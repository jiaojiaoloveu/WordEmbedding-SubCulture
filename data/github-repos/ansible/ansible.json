{"_default": {"1": {"LukeRussell": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35204", "title": "ios_config to add optional parameter `state:` [ present | absent ]", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Feature Idea\r\n\r\n##### COMPONENT NAME\r\n<!---\r\nName of the module, plugin, task or feature\r\nDo not include extra details here, e.g. \"vyos_command\" not \"the network module vyos_command\" or the full path\r\n-->\r\nios_config\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n  config file = /home/4032956/ansiblePSN/ansible.cfg\r\n  configured module search path = ['/home/4032956/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/4032956/ansiblePSN/.venv/ansiblePSN-3.6/lib/python3.6/site-packages/ansible\r\n  executable location = /home/4032956/ansiblePSN/.venv/ansiblePSN-3.6/bin/ansible\r\n  python version = 3.6.3 (default, Oct 11 2017, 18:17:50) [GCC 4.8.5 20150623 (Red Hat 4.8.5-16)]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\nIf using Ansible 2.4 or above, paste the results of \"ansible-config dump --only-changed\"\r\nOtherwise, mention any settings you have changed/added/removed in ansible.cfg\r\n(or using the ANSIBLE_* environment variables).\r\n-->\r\nNA\r\n\r\n##### OS / ENVIRONMENT\r\n<!---\r\nMention the OS you are running Ansible from, and the OS you are\r\nmanaging, or say \"N/A\" for anything that is not platform-specific.\r\nAlso mention the specific version of what you are trying to control,\r\ne.g. if this is a network bug the version of firmware on the network device.\r\n-->\r\nNA\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly -->\r\nIt would be great if ios_config could be used to ensure a config line is *not* present, in an idempotent fashion. Presently we just send a list of `no ...` configs or commands to IOS, but this always returns a modified flag. I typically overwrite this with change_when: but it would be handy to see when something is actually changed. The title is just a suggested way this could be accomplished.\r\n\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- What did you expect to happen when running the steps above? -->\r\n\r\n##### ACTUAL RESULTS\r\n<!--- What actually happened? If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35204/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "dhartford": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35198", "title": "maven_artifact enable 'proxymode' or similar feature", "body": "##### ISSUE TYPE\r\n - Feature Idea\r\n\r\n##### COMPONENT NAME\r\nmaven_artifact\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.1.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/vagrant/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Aug  4 2017, 00:39:18) [GCC 4.8.5 20150623 (Red Hat 4.8.5-16)]\r\n```\r\n\r\n##### CONFIGURATION\r\n\r\n\r\n##### OS / ENVIRONMENT\r\n\r\n##### SUMMARY\r\nCurrent state is the maven_artifact will execute the download from a maven repository (artifactory/nexus/ivy/etc) from the target server instead of from the ansible control server (or ansible tower server).  \r\n\r\nDesired feature request is a mode/switch/flag, such as proxymode=true, to have the ansible control server always download before sending to target server, and send to target server the dest defined.\r\n\r\n##### STEPS TO REPRODUCE\r\n\r\n##### EXPECTED RESULTS\r\nWhen adding and enabling feature 'proxymode=true', the artifact(s) will be downloaded from the maven repository to the ansible control server, then sent to the target server(s), without requiring the target server(s) having access to the maven repository.\r\n\r\n##### ACTUAL RESULTS\r\nCurrent results will fail, all target servers require network/firewall access to the maven repository which may be problematic in secure/regulatory environments. \r\n\r\nWorkaround to-date have been two-step file creation and copy to target servers approach, or using getUrl or similar direct API method that would be vendor-specific (artifactory-specific, nexus-specific, ivy-specific, etc).   \r\n\r\nBONUS detecting if actual change to target system or not (such as to kick of notify to restart a service) would be nice.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35198/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "IPvSean": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35195", "title": "meta module not working with refresh_inventory", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\nmeta\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nSEANs-MacBook-Pro:~ sean$ ansible --version\r\nansible 2.5.0\r\n  config file = None\r\n  configured module search path = [u'/Users/sean/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Library/Python/2.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.10 (default, Jul 15 2017, 17:16:57) [GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.31)]\r\n```\r\n\r\n##### CONFIGURATION\r\n```\r\nSEANs-MacBook-Pro:~ sean$ ansible-config dump --only-changed\r\nSEANs-MacBook-Pro:~ sean$\r\n```\r\nnothing changed\r\n\r\n##### OS / ENVIRONMENT\r\n```\r\nmacOS High Sierra 10.13.2\r\n```\r\n##### SUMMARY\r\nThe [meta module](http://docs.ansible.com/ansible/latest/meta_module.html) does not seem to refresh the inventory within a role/play using the `refresh_inventory`.  I am unable to use hosts from add_host until I am onto the next playbook or role.\r\n\r\n##### STEPS TO REPRODUCE\r\nHere is a simple playbook that I made to replicate the issue I am seeing in a much larger one.  My goal is to have a role be able to up ec2_instances in amazon, then use wait_for_connection task to make sure they are actually up and able to connect to.  Right now it works if the wait_for_connection is in another play within the playbook (I tested with another role).\r\n\r\n```yaml\r\n---\r\n- hosts: localhost\r\n  tasks:\r\n  - add_host:\r\n      name: \"testhost\"\r\n      ansible_host: \"1.2.3.4\"\r\n      ansible_user: \"testuser\"\r\n      groups:\r\n        - lab_hosts\r\n        - control_nodes\r\n\r\n  - name: Refresh inventory to ensure new instaces exist in inventory\r\n    meta: refresh_inventory\r\n\r\n  - debug:\r\n      msg: \"item: {{ item }}\"\r\n    with_items: groups['all']\r\n```\r\n\r\n\r\n##### EXPECTED RESULTS\r\nI expected something like:\r\n```\r\nok: [localhost] => (item=groups['all']) => {\r\n    \"attempts\": 1,\r\n    \"changed\": false,\r\n    \"failed\": false,\r\n    \"item\": \"'localhost\",\r\n    \"msg\": \"item localhost\"\r\n}\r\nok: [localhost] => (item=groups['all']) => {\r\n    \"attempts\": 1,\r\n    \"changed\": false,\r\n    \"failed\": false,\r\n    \"item\": \"testhost\",\r\n    \"msg\": \"item testhost\"\r\n}\r\n```\r\nsomehow... there would be 2 above... not sure how to loop through the groups... was looking at thread here-> https://github.com/ansible/ansible/issues/5451\r\n\r\n##### ACTUAL RESULTS\r\n\r\n```\r\nPLAY [localhost] *************************************************************************************************************************************************************************************************************************\r\n\r\nTASK [Gathering Facts] *******************************************************************************************************************************************************************************************************************\r\nok: [localhost]\r\n\r\nTASK [add_host] **************************************************************************************************************************************************************************************************************************\r\nchanged: [localhost]\r\n\r\nTASK [debug] *****************************************************************************************************************************************************************************************************************************\r\nok: [localhost] => (item=groups['all']) => {\r\n    \"attempts\": 1,\r\n    \"changed\": false,\r\n    \"failed\": false,\r\n    \"item\": \"groups['all']\",\r\n    \"msg\": \"item: groups['all']\"\r\n}\r\n\r\nPLAY RECAP *******************************************************************************************************************************************************************************************************************************\r\nlocalhost                  : ok=3    changed=1    unreachable=0    failed=0\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35195/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/34754", "title": "<platform>_vrf and <platform>_vlan module parameter *interfaces* is not DI, it actually configures it ", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n\r\n##### COMPONENT NAME\r\neos_vrf\r\nios_vrf\r\nnxos_vrf\r\njunos_vrf\r\neos_vlan\r\nios_vlan\r\nnxos_vlan\r\njunos_vlan\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n[root@centos aggregate_resources]# ansible --version\r\nansible 2.5.0\r\n  config file = /root/aggregate_resources/ansible.cfg\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Aug  4 2017, 00:39:18) [GCC 4.8.5 20150623 (Red Hat 4.8.5-16)]\r\n```\r\n\r\n##### CONFIGURATION\r\n```yml\r\n[root@centos aggregate_resources]# ansible-config dump --only-changed\r\nDEFAULT_GATHERING(/root/aggregate_resources/ansible.cfg) = explicit\r\nDEFAULT_HOST_LIST(/root/aggregate_resources/ansible.cfg) = [u'/root/aggregate_resources/hosts']\r\nDEPRECATION_WARNINGS(/root/aggregate_resources/ansible.cfg) = False\r\nHOST_KEY_CHECKING(/root/aggregate_resources/ansible.cfg) = False\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n```yml\r\n[root@centos aggregate_resources]# cat /etc/*release\r\nCentOS Linux release 7.3.1611 (Core)\r\nNAME=\"CentOS Linux\"\r\nVERSION=\"7 (Core)\"\r\nID=\"centos\"\r\nID_LIKE=\"rhel fedora\"\r\nVERSION_ID=\"7\"\r\nPRETTY_NAME=\"CentOS Linux 7 (Core)\"\r\nANSI_COLOR=\"0;31\"\r\nCPE_NAME=\"cpe:/o:centos:centos:7\"\r\nHOME_URL=\"https://www.centos.org/\"\r\nBUG_REPORT_URL=\"https://bugs.centos.org/\"\r\n\r\nCENTOS_MANTISBT_PROJECT=\"CentOS-7\"\r\nCENTOS_MANTISBT_PROJECT_VERSION=\"7\"\r\nREDHAT_SUPPORT_PRODUCT=\"centos\"\r\nREDHAT_SUPPORT_PRODUCT_VERSION=\"7\"\r\n\r\nCentOS Linux release 7.3.1611 (Core)\r\nCentOS Linux release 7.3.1611 (Core)\r\n```\r\n\r\n##### SUMMARY\r\nthe eos_vrf module has a parameter **interfaces**  which is described as a \"List of interfaces to check the VRF has been configured correctly.\"  This is supposed to be a **DI** or Declarative Intent parameter where it only checks operational state.  The problem is that the module is actually just configuring the interfaces.   Personally I think there is great value in having a parameter for operational state and configuring the interfaces.  I like what it does, but maybe we need another parameter to configure or check... right now this does not align with how eos_vlan works.\r\n\r\n##### STEPS TO REPRODUCE\r\n```yaml\r\n---\r\n- hosts: eos\r\n  connection: network_cli\r\n  remote_user: admin\r\n  become: yes\r\n  become_method: enable\r\n  vars:\r\n    ansible_network_os: \"eos\"\r\n  tasks:\r\n    - eos_vrf:\r\n        name: BLUE\r\n        interfaces:\r\n         - Ethernet1\r\n```\r\nRun the playbook and it configures the blue vrf\r\n```\r\neos#sh run int ethernet1\r\ninterface Ethernet1\r\n   shutdown\r\n   vrf forwarding BLUE\r\n```\r\n\r\n##### EXPECTED RESULTS\r\nWe should get an error similar to the eos_vlan module:\r\n```yml\r\nfatal: [eos]: FAILED! => {\"attempts\": 1, \"changed\": false, \"msg\": \"Interface Ethernet1 not configured on vlan 2\"}\r\n```\r\nmaybe instead it would do->\r\n```yml\r\nfatal: [eos]: FAILED! => {\"attempts\": 1, \"changed\": false, \"msg\": \"Interface Ethernet1 not configured for VRF BLUE\"}\r\n```\r\n##### ACTUAL RESULTS\r\nIt configures the interface into the vrf\r\n```yml\r\neos#sh run | i vrf\r\nvrf definition BLUE\r\nvrf definition management\r\n   vrf forwarding BLUE\r\nno ip routing vrf management\r\nno ip routing vrf BLUE\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34754/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/34711", "title": "iosxr_interface missing DI content, neighbors, tx_rate and rx_rate", "body": "##### ISSUE TYPE\r\n - Feature Idea\r\n\r\n##### COMPONENT NAME\r\niosxr_interface\r\n\r\n##### ANSIBLE VERSION\r\nN/A\r\n\r\n##### CONFIGURATION\r\nN/A\r\n\r\n##### OS / ENVIRONMENT\r\nN/A\r\n\r\n##### SUMMARY\r\nThe iosxr_interface needs feature parity with the eos_interface module.  Specifically we are missing the neighbors parameter->\r\n```yml\r\n  neighbors:\r\n    description:\r\n      - Check the operational state of given interface C(name) for LLDP neighbor.\r\n      - The following suboptions are available.\r\n    suboptions:\r\n        host:\r\n          description:\r\n            - \"LLDP neighbor host for given interface C(name).\"\r\n        port:\r\n          description:\r\n            - \"LLDP neighbor port to which given interface C(name) is connected.\"\r\n```\r\n\r\nand we are also missing tx_rate and rx_rate\r\n```yml \r\n  tx_rate:\r\n    description:\r\n      - Transmit rate in bits per second (bps) for the interface given in C(name) option.\r\n  rx_rate:\r\n    description:\r\n      - Receiver rate in bits per second (bps) for the interface given in C(name) option.\r\n```\r\n\r\nan example eos playbook:\r\n```yml\r\n---\r\n- hosts: eos\r\n  connection: network_cli\r\n  remote_user: admin\r\n  become: yes\r\n  become_method: enable\r\n  vars:\r\n    ansible_network_os: \"eos\"\r\n  tasks:\r\n    - eos_interface:\r\n        name: ethernet1\r\n        enabled: False\r\n        tx_rate: 100\r\n        neighbors:\r\n         - port: eth0\r\n           host: netdev\r\n```\r\n\r\n##### STEPS TO REPRODUCE\r\nN/A\r\n\r\n##### EXPECTED RESULTS\r\nN/A feature parity request \r\n\r\n##### ACTUAL RESULTS\r\nN/A\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34711/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/34709", "title": "junos_vlan missing DI parameter interface ", "body": "##### ISSUE TYPE\r\n - Feature Idea\r\n\r\n##### COMPONENT NAME\r\njunos_vlan\r\n\r\n##### ANSIBLE VERSION\r\nN/A\r\n\r\n##### CONFIGURATION\r\nN/A\r\n\r\n##### OS / ENVIRONMENT\r\nN/A\r\n\r\n##### SUMMARY\r\nThe eos_vlan module can check if interfaces have operational state or declarative intent (DI) of carrying the vlan (e.g. `show vlan`) ->\r\n```yaml\r\n---\r\n- hosts: eos\r\n  connection: network_cli\r\n  remote_user: admin\r\n  become: yes\r\n  become_method: enable\r\n  vars:\r\n    ansible_network_os: \"eos\"\r\n  tasks:\r\n    - eos_vlan:\r\n        state: active\r\n        purge: yes\r\n        aggregate:\r\n          - { vlan_id: 1, name: default }\r\n          - { vlan_id: 2, name: Vl2 }\r\n          - { vlan_id: 3, state: suspend }\r\n        interfaces:\r\n          - Ethernet1\r\n          - Ethernet2\r\n```\r\nThis playbook will error and fail (by default) if the interface does not carry the VLAN\r\n```fatal: [eos]: FAILED! => {\"attempts\": 1, \"changed\": false, \"msg\": \"Interface Ethernet1 not configured on vlan 2\"}```\r\n\r\nThis is correct because this is not configure as shown by the `show vlan`\r\n```yml\r\nlocalhost#show vlan\r\nVLAN  Name                             Status    Ports\r\n----- -------------------------------- --------- -------------------------------\r\n1     default                          active    Et1, Et2, Et3\r\n2     Vl2                              active\r\n3     VLAN0003                         suspended\r\n```\r\n\r\n##### STEPS TO REPRODUCE\r\nN/A\r\n\r\n##### EXPECTED RESULTS\r\nN/A FR to match eos_vlan\r\n\r\n##### ACTUAL RESULTS\r\nN/A FR to match eos_vlan", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34709/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/34588", "title": "gce_instance_template won't select image for centos-7", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\ngce_instance_template\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nseans-mbp:provisionner sean$ ansible --version\r\nansible 2.5.0\r\n  config file = /Users/sean/Documents/GitHub/IPvSean/darkbulb/provisionner/ansible.cfg\r\n  configured module search path = [u'/Users/sean/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Library/Python/2.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.10 (default, Jul 15 2017, 17:16:57) [GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.31)]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\nIf using Ansible 2.4 or above, paste the results of \"ansible-config dump --only-changed\"\r\nOtherwise, mention any settings you have changed/added/removed in ansible.cfg\r\n(or using the ANSIBLE_* environment variables).\r\n-->\r\n\r\n##### OS / ENVIRONMENT\r\nmacOS High Sierra Version 10.13.2\r\n\r\n##### SUMMARY\r\nusing the gce_instance_template to set the image as `centos-7` or image_family as `centos-7` will result in nothing being selected for the image type.  The only way I could get it to work was to create one through the webGUI, copy the exact image (in my case it used `centos-7-v20180104`) and then copy that value into my playbook and pass it in as a sourceImage.  This would allow me to actually create a vm from the instance template.  Every other way would error out.\r\n##### STEPS TO REPRODUCE\r\n```yaml\r\n---\r\n- name: create instance template named foo\r\n  gce_instance_template:\r\n    name: foo\r\n    size: \"{{ gce_cloud_instance_machine_type }}\"\r\n    state: present\r\n    project_id: \"{{ gce_cloud_instance_project_id }}\"\r\n    image_family: centos-7\r\n    credentials_file: \"{{ gce_cloud_instance_credentials_file }}\"\r\n    service_account_email: \"{{ gce_cloud_instance_service_account_email }}\"\r\n    disks_gce_struct:\r\n      - device_name: /dev/sda\r\n        boot: true\r\n        autoDelete: true\r\n        initializeParams:\r\n          diskSizeGb: 30\r\n          diskType: pd-standard\r\n```\r\n\r\n\r\n##### EXPECTED RESULTS\r\nIt would create the VM instance.  Under the Instance templates page, the image column is just blank  if you use `image_family` or `image` with just `centos-7`.  This should point to the newest `centos-7` image (which will have the date in it...)\r\n\r\n\r\n##### ACTUAL RESULTS\r\nThis was the only playbook I could use to make it work:\r\n```\r\n---\r\n- name: create instance template named foo\r\n  gce_instance_template:\r\n    name: foo\r\n    size: \"{{ gce_cloud_instance_machine_type }}\"\r\n    state: present\r\n    project_id: \"{{ gce_cloud_instance_project_id }}\"\r\n    credentials_file: \"{{ gce_cloud_instance_credentials_file }}\"\r\n    service_account_email: \"{{ gce_cloud_instance_service_account_email }}\"\r\n    disks_gce_struct:\r\n      - device_name: /dev/sda\r\n        boot: true\r\n        autoDelete: true\r\n        initializeParams:\r\n          diskSizeGb: 30\r\n          diskType: pd-standard\r\n          sourceImage: projects/centos-cloud/global/images/centos-7-v20180104\r\n```\r\nI should be able to somehow grab latest instead of having to specify the v20180104 part.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34588/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/34580", "title": "gce module state started returns no useful information and requires a 2nd task with state present to gather information", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\ngce\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nseans-mbp:provisionner sean$ ansible --version\r\nansible 2.5.0\r\n  config file = /Users/sean/Documents/GitHub/IPvSean/darkbulb/provisionner/ansible.cfg\r\n  configured module search path = [u'/Users/sean/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Library/Python/2.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.10 (default, Jul 15 2017, 17:16:57) [GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.31)]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\nIf using Ansible 2.4 or above, paste the results of \"ansible-config dump --only-changed\"\r\nOtherwise, mention any settings you have changed/added/removed in ansible.cfg\r\n(or using the ANSIBLE_* environment variables).\r\n-->\r\n\r\n##### OS / ENVIRONMENT\r\nmacOS High Sierra Version 10.13.2\r\n\r\n##### SUMMARY\r\nThe state `started` and state `present` are not well documented on the Ansible module page.  But from testing it is odd.... the `state: started` works fine but the return values is almost useless, so you have to call the gce module again with the `state: present` to get any info out of it (like private and public IP information).\r\n##### STEPS TO REPRODUCE\r\n\r\nThis task\r\n```yaml\r\n- name: \"Create student instance\"\r\n  gce:\r\n    instance_names: \"{{ student }}\"\r\n    zone: \"{{ gce_cloud_instance_zone }}\"\r\n    machine_type: \"{{ gce_cloud_instance_machine_type }}\"\r\n    image: \"{{ gce_cloud_instance_image }}\"\r\n    service_account_email: \"{{ gce_cloud_instance_service_account_email }}\"\r\n    credentials_file: \"{{ gce_cloud_instance_credentials_file }}\"\r\n    project_id: \"{{ gce_cloud_instance_project_id }}\"\r\n    tags: \"{{ gce_cloud_instance_tags }}\"\r\n    state: started\r\n  tags:\r\n    - create\r\n```\r\nonly returns this->\r\n```\r\nok: [localhost] => {\r\n    \"return_gce_cloud_instance\": {\r\n        \"changed\": true, \r\n        \"failed\": false, \r\n        \"instance_names\": [\r\n            \"student01\"\r\n        ], \r\n        \"state\": \"started\", \r\n        \"zone\": \"us-east1-d\"\r\n    }\r\n}\r\n```\r\n\r\n\r\n##### EXPECTED RESULTS\r\nI would hope I would get identical results from the `state: present`\r\n```\r\n- name: \"grab student instance public ip address\"\r\n  gce:\r\n    instance_names: \"{{ student }}\"\r\n    zone: \"{{ gce_cloud_instance_zone }}\"\r\n    service_account_email: \"{{ gce_cloud_instance_service_account_email }}\"\r\n    credentials_file: \"{{ gce_cloud_instance_credentials_file }}\"\r\n    project_id: \"{{ gce_cloud_instance_project_id }}\"\r\n    state: present\r\n  register: return_gce_cloud_instance\r\n```\r\n\r\n which yields this->\r\n```yml\r\n    \"return_gce_cloud_instance\": {\r\n        \"changed\": false, \r\n        \"failed\": false, \r\n        \"instance_data\": [\r\n            {\r\n                \"disks\": [\r\n                    \"student01\"\r\n                ], \r\n                \"image\": \"nested-vm-image\", \r\n                \"machine_type\": \"n1-highmem-4\", \r\n                \"metadata\": {}, \r\n                \"name\": \"student01\", \r\n                \"network\": \"default\", \r\n                \"private_ip\": \"10.142.0.2\", \r\n                \"public_ip\": 10.3.2.1, \r\n                \"status\": \"TERMINATED\", \r\n                \"subnetwork\": \"default\", \r\n                \"tags\": [\r\n                    \"darkbulb\", \r\n                    \"http-server\", \r\n                    \"https-server\"\r\n                ], \r\n                \"zone\": \"us-east1-d\"\r\n            }\r\n        ], \r\n        \"instance_names\": [\r\n            \"student01\"\r\n        ], \r\n        \"state\": \"present\", \r\n        \"zone\": \"us-east1-d\"\r\n    }\r\n}\r\n```\r\n##### ACTUAL RESULTS\r\nThis is listed above, but `state: started` only does this->\r\n```\r\nok: [localhost] => {\r\n    \"return_gce_cloud_instance\": {\r\n        \"changed\": true, \r\n        \"failed\": false, \r\n        \"instance_names\": [\r\n            \"student01\"\r\n        ], \r\n        \"state\": \"started\", \r\n        \"zone\": \"us-east1-d\"\r\n    }\r\n}\r\n```\r\nThe information I want to gather is the public ip address (`public_ip`) which is only found with state set to present.  The problem is that present does not actually start the VM, just checks to see if it exists... so I can get a playbook working but it requires two tasks.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34580/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "EpiqSty": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35190", "title": "proxied option from in cloudflare_dns module not working in the ansible 2.3.0.0", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\ncloudflare_dns\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n$ ansible --version\r\nansible 2.3.0.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = Default w/o overrides\r\n  python version = 2.7.9 (default, Jun 29 2016, 13:08:31) [GCC 4.9.2]\r\n```\r\n\r\n\r\n##### OS / ENVIRONMENT\r\n```\r\n$ cat /etc/debian_version\r\n8.10\r\n```\r\n\r\n##### SUMMARY\r\nproxied option from in cloudflare_dns module not working in the ansible 2.3.0.0:\r\n\r\n\r\n##### STEPS TO REPRODUCE\r\n\r\n$ ansible -i ./hosts subdomain.domain.com.yaml\r\n\r\n```\r\n$ cat subdomain.domain.com\r\n- hosts: localhost\r\n  vars:\r\n    cloudflare_email: cloudflareaccount@email.com\r\n    cloudflare_api_token: <cloudflare_api_token>\r\n  tasks:\r\n  - name: create dns record for subdomain.domain.com\r\n    cloudflare_dns:\r\n      zone: domain.com\r\n      record: subdomain\r\n      type: A\r\n      value: IP.AD.DR.ESS\r\n      proxied: yes\r\n      account_email: \"{{ cloudflare_email }}\"\r\n      account_api_token: \"{{ cloudflare_api_token }}\"\r\n$ cat hosts\r\n# Dummy inventory for ansible\r\nlocalhost\r\n```\r\nAnd one more thing - that should be existing DNS record. \r\ne.g. for new DNS records desired proxied option are setting up fine, but for existing DNS records i just getting current result without any changes and errors from ansible side.\r\n\r\n##### EXPECTED RESULTS\r\nproxied should been switched to \"true\"\r\n\r\n##### ACTUAL RESULTS\r\n```\r\nok: [localhost] => {\r\n    \"changed\": false,\r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"account_api_token\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\",\r\n            \"account_email\": \"cloudflareaccount@email.com\",\r\n            \"port\": null,\r\n            \"priority\": 1,\r\n            \"proto\": null,\r\n            \"proxied\": true, <-------- we are trying to set proxied:true\r\n            \"record\": \"login\",\r\n            \"service\": null,\r\n            \"solo\": null,\r\n            \"state\": \"present\",\r\n            \"timeout\": 30,\r\n            \"ttl\": 1,\r\n            \"type\": \"A\",\r\n            \"value\": \"21.0.9.6\",\r\n            \"weight\": 1,\r\n            \"zone\": domain.com\"\r\n        }\r\n    },\r\n    \"result\": {\r\n        \"record\": {\r\n            \"content\": \"21.0.9.6\",\r\n            \"created_on\": \"2018-01-22T15:09:38.728833Z\",\r\n            \"id\": \"XXX\",\r\n            \"locked\": false,\r\n            \"meta\": {\r\n                \"auto_added\": false,\r\n                \"managed_by_apps\": false\r\n            },\r\n            \"modified_on\": \"2018-01-22T15:09:38.728833Z\",\r\n            \"name\": \"subdomain.domain.com\",\r\n            \"proxiable\": true,\r\n            \"proxied\": false, <-------- but result is false\r\n            \"ttl\": 1,\r\n            \"type\": \"A\",\r\n            \"zone_id\": \"YYY\",\r\n            \"zone_name\": \"domain.com\"\r\n        }\r\n    }\r\n}\r\n```\r\nps: email/token/domain and other private stuff was replaced in examples above.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35190/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "nilloBE": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35185", "title": "aci_contract_subject_to_filter must support common tenant", "body": "##### ISSUE TYPE\r\n - Feature Idea\r\n\r\n##### COMPONENT NAME\r\naci_contract_subject_to_filter\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.0.0\r\n  config file = None\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Aug  4 2017, 00:39:18) [GCC 4.8.5 20150623 (Red Hat 4.8.5-16)]\r\n```\r\n\r\n##### CONFIGURATION\r\n[root@ansible-server vars]# ansible-config dump --only-change\r\n[root@ansible-server vars]#\r\n\r\n##### OS / ENVIRONMENT\r\nAnsible server running on CentOS 7.3, ACI running 3.1(1i).\r\n\r\n##### SUMMARY\r\nThe aci_contract_subject_to_filter currently assigns a filter to a subject for a given contract. The module takes the tenant name as input and configures the filter on the given subject for the contract on that tenant.\r\n\r\nHowever in ACI it is possible, and desirable, to consume filters from the common tenant. Therefore, this module should allow specifying tenant name in two different ways:\r\n- tenant where the contract is configured\r\n- tenant where the filter is configured\r\n\r\nI suggest we keep the 'tenant' attribute as it is now, meaning it represents the tenant where the contract object exists. And then we add another attribute 'filter_in_common' with value 'yes' or 'no'. If filter_in_common is yes, we pick the filter entry from common tenant. If filter_in_common is 'no', we pick the filter entry from the contract tenant.\r\n\r\n\r\n##### STEPS TO REPRODUCE\r\n\r\n\r\n\r\n##### EXPECTED RESULTS\r\n\r\n##### ACTUAL RESULTS\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35185/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/34896", "title": "aci_epg module needs to support PreferredGroup", "body": "\r\n##### ISSUE TYPE\r\n - Feature Idea\r\n\r\n##### COMPONENT NAME\r\naci_epg\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n[root@ansible-server ~]# ansible --version\r\nansible 2.4.0.0\r\n  config file = None\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Aug  4 2017, 00:39:18) [GCC 4.8.5 20150623 (Red Hat 4.8.5-16)]\r\n[root@ansible-server ~]#\r\n```\r\n\r\n##### CONFIGURATION\r\n\r\n[root@ansible-server ~]# ansible-config dump --only-changed\r\n[root@ansible-server ~]#\r\n\r\n##### OS / ENVIRONMENT\r\nAnsible server on CentOS 7.3 and ACI version 3.0 or 3.1\r\n\r\n##### SUMMARY\r\n\r\nSince ACI 2.3 it is possible to configure EPGs to be part of a Preferred Group. This is a new attribute of the fvAEPg object. EPGs that are part of the Preferred Group can communicate without contracts. This is very convenient for migration scenarios as well as customers that implement ACI for network automation but not for policy.\r\n\r\n##### STEPS TO REPRODUCE\r\n\r\n\r\n\r\n##### EXPECTED RESULTS\r\n\r\nThe module should have a new option to configure.\r\n\r\npreferred_group: yes, no\r\n\r\nThe object to configure is:\r\n\r\nfvAEPg.attributes.prefGrMemb and the option is \"include\" or \"exclude\".\r\n\r\n##### ACTUAL RESULTS\r\n\r\n```\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34896/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/34885", "title": "aci_domain needs support for VMM domain creation", "body": "##### ISSUE TYPE\r\n - Feature Idea\r\n\r\n##### COMPONENT NAME\r\naci_domain\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n# ansible --version\r\nansible 2.5.0 (devel b107e397cb) last updated 2018/01/15 16:56:58 (GMT +200)\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/nillo/software/ansible/lib/ansible\r\n  executable location = /home/nillo/software/ansible/bin/ansible\r\n  python version = 2.7.5 (default, Nov  6 2016, 00:28:07) [GCC 4.8.5 20150623 (Red Hat 4.8.5-11)]\r\n#\r\n```\r\n\r\n##### CONFIGURATION\r\n```\r\n# ansible-config dump --only-changed\r\nDEFAULT_ROLES_PATH(/etc/ansible/ansible.cfg) = [u'/etc/ansible/roles', u'/usr/share/ansible/roles']\r\n#\r\n```\r\n##### OS / ENVIRONMENT\r\nAnsible running on CentOS 7.3 and ACI running 3.1(1i).\r\n\r\n##### SUMMARY\r\n\r\nFor VMM domains we need to be able to specify all required parameters. This is dependent on the domain type (vmware, redhat, microsoft). I believe it would be great to add to the module.\r\n\r\nFor VMware:\r\n```\r\ndomain_name\r\nvswitch_type: [vds, avs, ave]\r\naccess_mode: [ro, rw]\r\nvcenter_name\r\nvcenter_ip: [ip or FQDN]\r\nvds_version: [5.1, 5.5, 6.0, 6.5, default]\r\nstats_collection: [disabled, enabled]\r\ndatacenter_name\r\nmgmt_epg\r\ncredential_name\r\nport_channel_mode: [on, lacp-active,lacp-passive,mac-pining,mac-pinning-plus]\r\nvswitch_policy: [cdp, lldp, none]\r\n```\r\nFor RHV:\r\n```\r\ndomain_name\r\nrhvm_name\r\nrhvm_ip: [ip or FQDN]\r\ndatacenter_name\r\nmgmt_epg\r\ncredential_name\r\n```\r\nFor Microsoft:\r\n```\r\ndomain_name\r\nscvmm_name\r\nscvmm_ip: [ip or FQDN]\r\nscvmm_cloud_name\r\nport_channel_mode: [on, lacp-active,lacp-passive,mac-pining,mac-pinning-plus]\r\n```\r\n##### STEPS TO REPRODUCE\r\nThis is an enhancement request/idea.\r\n\r\n```yaml\r\n\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n\r\n##### ACTUAL RESULTS\r\n\r\n```\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34885/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "Rahul-CSI": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35181", "title": "Need gce_facts module to get Google instance information.", "body": "##### ISSUE TYPE\r\n - Feature Idea\r\n\r\n##### COMPONENT NAME\r\n\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.0.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/centos/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Aug  4 2017, 00:39:18) [GCC 4.8.5 20150623 (Red Hat 4.8.5-16)]\r\n```\r\n\r\n##### CONFIGURATION\r\n[centos@localhost csi-ansible]$ ansible-config dump --only-changed\r\n[centos@localhost csi-ansible]$\r\n\r\n##### OS / ENVIRONMENT\r\n<!---\r\nMention the OS you are running Ansible from, and the OS you are\r\nmanaging, or say \"N/A\" for anything that is not platform-specific.\r\nAlso mention the specific version of what you are trying to control,\r\ne.g. if this is a network bug the version of firmware on the network device.\r\n-->\r\n\r\n##### SUMMARY\r\nCurrently we do not have a way to retrieve the info for a node.\r\nIf I wish to do some processing based on existing node info, like disks attached.\r\nI would like to have a gce_facts module which would do that.\r\n\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- What did you expect to happen when running the steps above? -->\r\n\r\n##### ACTUAL RESULTS\r\n<!--- What actually happened? If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35181/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "felixfontein": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35172", "title": "letsencrypt module with http-01 challenges issues two certificates (of which one is provided to the user)", "body": "##### ISSUE TYPE\r\nBug Report\r\n\r\n##### COMPONENT NAME\r\nletsencrypt\r\n\r\n##### ANSIBLE VERSION\r\n2.4, current devel\r\n\r\n##### SUMMARY\r\nIf `http-01` authentication is used for the `letsencrypt` module, I always find *two* certificates issued per request in the Certificate Transparency logs (https://crt.sh for example), instead of one (as expected).\r\n\r\nExample: I used current `devel` (also happened with the module coming with 2.4) to issue a certificate for `ecc-p256.tlstest.fonga.ch`. The following two certificates were issued five seconds apart:\r\n- https://crt.sh/?id=310017006\r\n- https://crt.sh/?id=310016898\r\n\r\n##### STEPS TO REPRODUCE\r\nUse `letsencrypt` to create a certificate with `http-01` challenge, then check https://crt.sh some time later (CT logs need some time to get updated).\r\n\r\n##### WHY THIS (PROBABLY) HAPPENS\r\nI'm not totally sure whether this is a bug of Let's Encrypt's boulder, or of our `letsencrypt` module, but it *does* not happen when using the branch for #34541. (For the same example as above, called absolutely identically, only one certificate was issued: https://crt.sh/?id=310013184)\r\n\r\nI *think* the reason is that the current `letsencrypt` module re-authenticates the domain because of this code: https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/web_infrastructure/letsencrypt.py#L732-L743 It only uses the existing authentication when DNS challenges were used. (Which also explains why this doesn't happen when DNS challenges are used.) The new branch stores authentications in a dictionary (indexed by the domain name), so it reuses the existing one.\r\n\r\nI don't know if that was happening all the time, or whether this is partially also a bug in [Boulder](https://github.com/letsencrypt/boulder/) which wasn't there when the letsencrypt module was developed.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35172/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/35080", "title": "Add OCSP Must Staple support for openssl_csr", "body": "##### ISSUE TYPE\r\nFeature Idea\r\n\r\n##### COMPONENT NAME\r\nopenssl_csr\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n2.4, devel\r\n```\r\n\r\n##### SUMMARY\r\nIt would be nice if the `openssl_csr` module could generate CSRs which include the OCSP Must Staple (id-pe-tlsfeature, 1.3.6.1.5.5.7.1.24) extension. The RFC is [here](https://tools.ietf.org/html/rfc7633), an explanation can be found [here](https://scotthelme.co.uk/ocsp-must-staple/).\r\n\r\nThe implementation should be pretty simple, see for example here: https://github.com/certbot/certbot/blob/d2df6880e5601af2813a7455abb265686a4c8b83/certbot/crypto_util.py#L123\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35080/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/784853da35762ffd82742fb11e67001dbd3d0edc", "message": "Accepting SANs marked as critical (fixes #32767). (#35057)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/39a7e0a9754b3e554b0f0065ea3c0a652c39ed60", "message": "Extending documentation (#35077)\n\n- Adding Let's Encrypt production ACME directory URL\n- Marking examples as one big example with several alternatives for the first step\n- Adding another example which uses aliases for options, and uses DNS-01 challenges"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/3a4b69096f68cf73ed8fc45cbd4b8be429871170", "message": "Clarifying documentation about account key being different from certificate's private key. (#35059)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/80361ce4da747547fac3b6ab823c900479117257", "message": "Making letsencrypt module work with Python 3. (#34324)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/1d26686b0994603ac4f6d2271f162b549e3f2060", "message": "Secure letsencrypt account_key_content better (#34979)\n\n* Ensure temp account key file cleanup even when module fails.\n\n* Adding warning to documentation on pitfalls of using account_key_content."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/c42c0f0cb388b052d964ecea57d8ba79ba004045", "message": "letsencrypt: Add support for Elliptic Curve account keys (#34852)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/8d69eb44882c49e56f50e1308ad11d1d170bd4bf", "message": "letsencrypt: fix fullchain is False by default. (#34912)"}], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35159", "title": "HostTech DNS records managing module", "body": "##### SUMMARY\r\nThis adds a new module: `hosttech_dns_record`, which allows to manage DNS records for zones hosted by the Swiss provider [hosttech](https://www.hosttech.ch/).\r\n\r\n##### ISSUE TYPE\r\nNew Module Pull Request\r\n\r\n##### COMPONENT NAME\r\nhosttech_dns_record\r\n\r\n##### ANSIBLE VERSION\r\ndevel (2.5.0)\r\n\r\n##### ADDITIONAL INFORMATION\r\nThe module's interface is similar to `route53`'s interface, and allows to add, remove and update DNS records.", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/35082", "title": "openssl_csr: added support for the OCSP Must Staple extension", "body": "##### SUMMARY\r\nAllows to request the OCSP Must Staple extension (`status_request`) in CSRs. Fix #35080.\r\n\r\n##### ISSUE TYPE\r\nFeature Pull Request\r\n\r\n##### COMPONENT NAME\r\nopenssl_csr\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n2.4, devel\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\nRelevant RFC: https://tools.ietf.org/html/rfc7633\r\nWhy OCSP Must Staple is a good thing (and more details): https://scotthelme.co.uk/ocsp-must-staple/\r\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34916", "title": "Changing behavior of new fullchain argument.", "body": "##### SUMMARY\r\nThis PR should initiate a discussion on whether #18996 might not be solved in a better way than in #22074, namely by not making the user choose between getting a leaf certificate or a fullchain certificate (i.e. certificate followed by intermediate certificates), but to allow the user to get both.\r\n\r\nThe approach in #22074 was to provide a new boolean option `fullchain`, which determines whether the file written to `dest`/`cert` will be a leaf certificate or a fullchain certificate.\r\n\r\nThis PR creates a new option `fullchain_dest` with alias `fullchain` (i.e. the boolean option is removed), \r\n\r\n@resmo, @manicai: what do you think?\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nletsencrypt\r\n\r\n##### ANSIBLE VERSION\r\n```\r\ndevel\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\nThe current `fullchain` option only exists in the `devel` branch (to my knowledge), not in any release branch. So changing it shouldn't hurt backwards compatibility. Everyone using the devel version will notice that something changed when 2.5 will be released, i.e. there should be no silent failures.\r\n\r\nThis PR is related to #34328, which adds another option `chain_dest`/`chain` which allows to write the intermediate certificate chain into a separate file. With both this and #34328 merged, the user can choose which one of certificate, fullchain, and chain to be written to disk, and is not forced to do additional file operations to extract the chain or create a fullchain certificate.\r\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34541", "title": "Changing letsencrypt module to use ACME v2 protocol", "body": "##### SUMMARY\r\nChanges the `letsencrypt` module to use the new ACME v2 protocol (as currently specified in https://tools.ietf.org/html/draft-ietf-acme-acme-09), and as supported by the current Let's Encrypt ACME v2 staging endpoint `https://acme-staging-v02.api.letsencrypt.org/directory` (see [announcement](https://letsencrypt.org//2017/06/14/acme-v2-api.html)). This will be necessary to acquire [wildcard certificates from Let's Encrypt](https://letsencrypt.org/2017/07/06/wildcard-certificates-coming-jan-2018.html).\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\n`letsencrypt`\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n2.4.2.0 (module is from devel branch)\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nCurrent problems:\r\n 1. No more support for current Let's Encrypt ACME v1 endpoint (would be possible to re-integrate that, at a cost of additional complexity);\r\n 2. The certificate chain isn't send by the staging endpoint; no idea whether that's purely a problem of this endpoint though.\r\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34328", "title": "Allowing to write intermediate certificate into file.", "body": "##### SUMMARY\r\nAllows the `letsencrypt` module to export the intermediate certificate to a file.\r\nFixes #18996 and extends #22074 (which allows to only write one combined file with certificate and intermediate certificate).\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nletsencrypt\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n2.4.2.0\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\nThe original issue #18996 asked for a way to get hold of the intermediate certificate. Since that one is not only needed to create the full chain (i.e. concatenation of certificate and intermediate, which is sent by the webserver to the client so it can validate the certificate), but also to create the root chain (root and intermediate certificate, which is used by the web server to validate OCSP responses to be stapled), the fix in #22074 is not sufficient (without extra processing). (See comment by @8w in original issue.)\r\n\r\nThis PR allows to write the intermediate certificate to a separate file, so it can be combined with whatever the caller wants (and not just the certificate).\r\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "smitna": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35148", "title": "always not executed when block nesting is combined with run_once", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\n`block`, `always`, `run_once`\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /bin/ansible\r\n  python version = 2.7.14 (default, Dec 11 2017, 16:08:01) [GCC 7.2.1 20170915 (Red Hat 7.2.1-2)]\r\n```\r\n\r\n##### CONFIGURATION\r\n\r\n##### OS / ENVIRONMENT\r\nN/A\r\n\r\n##### SUMMARY\r\n`always` not executed when `block` nesting is combined with `run_once`\r\n\r\n##### STEPS TO REPRODUCE\r\n`always` section of sample playbook below does not execute.  This is also true\r\nwhen `run_once` is indented once in either direction.\r\n\r\nIt will execute if either:\r\n1. `run_once` line is removed\r\n2. second `block` line is removed (i.e.  block nesting is collapsed)\r\n\r\n```yaml\r\n---\r\n- hosts: localhost\r\n  gather_facts: no\r\n  tasks:\r\n  - block:\r\n    - block:\r\n      - fail:\r\n        when: True\r\n      run_once: True\r\n    always:\r\n    - debug:\r\n        msg: bye\r\n```\r\nSimilar issue:  [17721](https://github.com/ansible/ansible/issues/17721)\r\n\r\n##### EXPECTED RESULTS\r\n`always` section should execute; i.e. the message \"bye\" should be emitted by `debug` module.\r\n\r\n##### ACTUAL RESULTS\r\n```\r\nansible-playbook 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /bin/ansible-playbook\r\n  python version = 2.7.14 (default, Dec 11 2017, 16:08:01) [GCC 7.2.1 20170915 (Red Hat 7.2.1-2)]\r\nUsing /etc/ansible/ansible.cfg as config file\r\nsetting up inventory plugins\r\nParsed /etc/ansible/hosts inventory source with ini plugin\r\n [WARNING]: Could not match supplied host pattern, ignoring: all\r\n [WARNING]: provided hosts list is empty, only localhost is available\r\nLoading callback plugin default of type stdout, v2.0 from /usr/lib/python2.7/site-packages/ansible/plugins/callback/__init__.pyc\r\n\r\nPLAYBOOK: test.yml *****************************************************************************************************************************\r\n1 plays in ./test.yml\r\n\r\nPLAY [localhost] *******************************************************************************************************************************\r\nMETA: ran handlers\r\n\r\nTASK [fail] ************************************************************************************************************************************\r\ntask path: /root/test.yml:7\r\nfatal: [localhost]: FAILED! => {\r\n    \"changed\": false, \r\n    \"msg\": \"Failed as requested from task\"\r\n}\r\n\r\nNO MORE HOSTS LEFT *****************************************************************************************************************************\r\n\tto retry, use: --limit @/root/test.retry\r\n\r\nPLAY RECAP *************************************************************************************************************************************\r\nlocalhost                  : ok=0    changed=0    unreachable=0    failed=1   \r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35148/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "millsks": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35142", "title": "Feature request - privilege escalation thru BoKS", "body": "Issue Type: Feature Idea\r\n\r\nIs there anything in the works for privilege escalation using BoKS?  This would be beneficial to us using ansible to implement our DevOps strategy without the need for agents being installed on all servers.\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35142/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "dagwieers": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35140", "title": "aci_config_rollback: integration test fails", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\naci_config_rollback\r\n\r\n##### ANSIBLE VERSION\r\nv2.5\r\n\r\n##### SUMMARY\r\nThe following error happens when running the integration tests on the public Sandbox ACI infrastructure.\r\n```\r\nTASK [aci_config_rollback : compare snapshots] ********************************************************************************************************************************************************************\r\ntask path: /home/dag/home-made/ansible.git/test/integration/targets/aci_config_rollback/tasks/main.yml:44\r\nUsing module file /home/dag/home-made/ansible.git/lib/ansible/modules/network/aci/aci_config_rollback.py\r\n<127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: dag\r\n<127.0.0.1> EXEC /bin/sh -c 'echo ~ && sleep 0'\r\n<127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /home/dag/.ansible/tmp/ansible-tmp-1516484160.33-266099540157328 `\" && echo ansible-tmp-1516484160.33-266099540157328=\"` echo /home/dag/.ansible/tmp/ansible-tmp-1516484160.33-266099540157328 `\" ) && sleep 0'\r\n<127.0.0.1> PUT /home/dag/.ansible/tmp/ansible-local-20786X1p62L/tmpQp5G3x TO /home/dag/.ansible/tmp/ansible-tmp-1516484160.33-266099540157328/aci_config_rollback.py\r\n<127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/dag/.ansible/tmp/ansible-tmp-1516484160.33-266099540157328/ /home/dag/.ansible/tmp/ansible-tmp-1516484160.33-266099540157328/aci_config_rollback.py && sleep 0'\r\n<127.0.0.1> EXEC /bin/sh -c '/tmp/ansible-test-coverage-5Tjfez/coverage/injector.py /home/dag/.ansible/tmp/ansible-tmp-1516484160.33-266099540157328/aci_config_rollback.py && sleep 0'\r\nThe full traceback is:\r\nTraceback (most recent call last):\r\n  File \"/tmp/ansible_fd8BOs/ansible_module_aci_config_rollback.py\", line 271, in <module>\r\n    main()\r\n  File \"/tmp/ansible_fd8BOs/ansible_module_aci_config_rollback.py\", line 235, in main\r\n    get_preview(aci)\r\n  File \"/tmp/ansible_fd8BOs/ansible_module_aci_config_rollback.py\", line 254, in get_preview\r\n    aci.result['apic_response'] = resp.read()\r\nAttributeError: 'NoneType' object has no attribute 'read'\r\n\r\nfatal: [localhost]: FAILED! => {\r\n    \"attempts\": 1, \r\n    \"changed\": false, \r\n    \"failed\": true, \r\n    \"module_stderr\": \"Traceback (most recent call last):\\n  File \\\"/tmp/ansible_fd8BOs/ansible_module_aci_config_rollback.py\\\", line 271, in <module>\\n    main()\\n  File \\\"/tmp/ansible_fd8BOs/ansible_module_aci_config_rollback.py\\\", line 235, in main\\n    get_preview(aci)\\n  File \\\"/tmp/ansible_fd8BOs/ansible_module_aci_config_rollback.py\\\", line 254, in get_preview\\n    aci.result['apic_response'] = resp.read()\\nAttributeError: 'NoneType' object has no attribute 'read'\\n\", \r\n    \"module_stdout\": \"\", \r\n    \"msg\": \"MODULE FAILURE\", \r\n    \"rc\": 1\r\n}\r\n\tto retry, use: --limit @/home/dag/home-made/ansible.git/test/integration/aci_config_rollback-Ls6vx9.retry\r\n\r\nPLAY RECAP ********************************************************************************************************************************************************************************************************\r\nlocalhost                  : ok=5    changed=3    unreachable=0    failed=1\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35140/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/35050", "title": "aci_rest: Using status=\"created\" behaves differently than status=\"deleted\"", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\naci_rest\r\n\r\n##### ANSIBLE VERSION\r\nv2.4+\r\n\r\n##### SUMMARY\r\nIf you use a REST payload with **aci_rest** using `status=\"created\"` the action is not idempotent. The first time (when the object does not exist) it works (`changed=True`), but a subsequent call fails as the APIC returns an HTTP failure.\r\n\r\nHowever, if you do the same for removing an object using `status=\"deleted\"` the action *is* idempotent. So a subsequent call works (and does not report a change, `changed=False`) as one would expect.\r\n\r\nThis seems an implementation issue in the APIC.\r\n\r\n**PS** If you would add `status=\"created,modified\"` or simply `status=\"modified\"` your task will be idempotent and it will not lead to failures on subsequent runs.\r\n\r\n##### STEPS TO REPRODUCE\r\nThis will cause a failure on a subsequent create:\r\n```xml\r\n<aaaUserCert dn=\"uni/userext/user-admin/usercert-admin\" data=\"-----BEGIN CERTIFICATE-----\\r\\nMII<snip>NGg\\r\\n-----END CERTIFICATE\\r\\n\" name=\"admin\" rn=\"usercert-admin\" status=\"created\"/>\r\n```\r\n\r\nThis will not cause a failure on a subsequent removal:\r\n```xml\r\n<aaaUserCert dn=\"uni/userext/user-admin/usercert-admin\" name=\"admin\" rn=\"usercert-admin\" status=\"deleted\"/>\r\n```\r\n\r\nHowever using `status=\"modified\"` will always work.\r\n\r\nThis report wants to highlight that creation and deletion have a different behaviour.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35050/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/7f6feca82fa91d8c95db8a0cdb6d30569acde54a", "message": "Revert \"win_setup: Add Product ID and Product Key in facts\" (#35200)\n\n* Revert \"win_setup: Add Product ID and Product Key in facts (#34097)\"\r\n\r\nThis reverts commit cf1f7b53dfb88f996593ec37fe455c0a2e272758."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/d6004852a2504cf3e5ed996c20b45b52d865a1e2", "message": "ACI: Move to 'host' parameter instead of 'hostname' (#35161)\n\n* ACI: Move to 'host' parameter instead of 'hostname'\r\n\r\n* Update host parameter in documentation fragment too"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/cf1f7b53dfb88f996593ec37fe455c0a2e272758", "message": "win_setup: Add Product ID and Product Key in facts (#34097)\n\n* win_setup: Add Product ID and Product Key in facts\n\nSo this is actually a very nice way to get product key information from\nsystems collected centrally.\n\nEspecially with systems that have been upgraded from Windows 7 or\nWindows 8 to Windows 10 may not have a valid Windows 10 product\nlicense key printed anywhere, it was a digital license.\n\nIf you ever have to reinstall the system, you may recover the system\nfrom the recovery partition, or the original media, but cannot upgrade\nto Windows 10 for free. By collecting the product key, one can always\nreinstall your free Windows upgrade.\n\nMy only question is, do we want this to be part of the default facts, as\nit may be considered important information. Or should we make a special\n**win_product_key_facts** ?\n\n* Add ACPI product key support"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/39aad91c5c2e931215ed597c6b6dd2c7b8bf9457", "message": "ACI: Introduce port parameter (#35168)\n\n* ACI: Introduce port parameter\r\n\r\n* Add port parameter to documentation"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/46e53f90a74bd122b7799f988794b3014cf15860", "message": "ACI: Rename aci_intf_policy_* to aci_interface_policy_* (#35170)\n\n* ACI: Rename aci_intf_policy_* to aci_interface_policy_*\r\n\r\n* Modify documentation accordingly\r\n\r\n* Fix validity ignore file"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/fa5adabcbfecef60e7a458f97733600c10b66171", "message": "aci_rest: Additional notes and simplify examples (#35091)\n\nAdd additional notes, improve examples"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/2bd0653488fe017f0b5f400907cd0d0e2dc43ceb", "message": "ACI: Support validate_certs, use_ssl and use_proxy (#35146)\n\nThis PR includes:\r\n- validate_certs, use_ssl and use_proxy support for the integration\r\n  tests"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/4b8e76747ee164ebce0cd92b0d3752e848ce0734", "message": "aci_config_snapshot: Fix bug with filter_target (#35141)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/192c0dc9d16458255102ce13d1707d8285defe12", "message": "ACI: Fix recently introduced bug (#35139)\n\nThis fixes #35135"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/2ad91dd3599e56f0e031d87376d0bbf54c8ce299", "message": "ACI: Fix integration tests after error message change (#35138)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/2cd8a3a9a31ab6f6fe58462030e097dd6a022a7b", "message": "ACI: Make network testing work out-of-the-box (#35116)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/064aad817dea7bdcbf603e8a37f96a30deda24c3", "message": "ACI: Add ACI version information to VMM domain docs (#35114)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/585862e4d05d621bd6681c7c510135b9c58c823a", "message": "ACI: Added more VMM providers, doc improvements (#34879)\n\n* Added more VMM providers, doc improvements\r\n\r\nThis fixes #34211 and others\r\n\r\n* Add all VMM providers to other domain-related modules"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/2fd5a99989fb52e5026da316608f17c53c037f6f", "message": "ACI: Fix validate-module tests E322 and E323 (#35052)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/ac4b031cc091c0ee1564730eebf6763d8cb27a15", "message": "ACI: Fix parameters and aliases in documentation (#34959)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/6351eff74ec7ef6540a431450ce77ace04f31640", "message": "ACI: Add missing documentation_fragments (#34955)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/349024235cd5099813e6464047325ac38132932f", "message": "ACI: Update docs (#34876)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/7957ba7aad7baf87b3e0235c87078dc33ef71acf", "message": "Fix small typo"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/d23d290be80ef18475fc722a066e4bb4a4dcf2fe", "message": "aci_aep: Add infrastructure_vlan support (infra:ProvAcc) (#33996)\n\nThis is a needed enhancement."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/d7d13b48e5f2c464d678a18a4f8da4b671487574", "message": "aci_aep_to_domain: New module to bind AEP to domain (#33942)\n\n* aci_aep_to_domain: New module to bind AEP to domain\r\n\r\n* Changes to bring in line with aci_domain\r\n\r\n* Rename aep_domain to domain_dn, add types\r\n\r\n* Fix pylint errors"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/628eca85c36eff3464fa70697631aaa68155711d", "message": "ACI: Fixing new pylint issue (#34775)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/83b7ec69fcf8b85ca540c24a16849fa7c2b8da93", "message": "Fix pylint issue (#34773)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/03dd3214b466c7135e253a84c3e6f74f505e39f8", "message": "Fix new pylint issue (#34772)\n\nIs it all worth it ?"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/c3909460d4a2827dd1379142a8c3cdc7179a5926", "message": "aci_domain_to_vlan_pool: Add domain to VLAN pool (#34402)\n\n* aci_domain_to_vlan_pool: Add domain to VLAN pool\r\n\r\nA new ACI module to bind a domain to a VLAN pool.\r\n\r\nThis module still needs integration tests once it is formally review and\r\naccepted.\r\n\r\n* Add examples to documentation"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/f3193f272cd0966fe52e36414ddd35ad0150ddf3", "message": "aci_domain_to_encap_pool: Add domain to encap pool (#34123)\n\n* aci_domain_to_encap_pool: Add domain to encap pool\r\n\r\nA new ACI module to bind a domain to an encap pool.\r\n\r\nThis module still needs integration tests once it is formally review and\r\naccepted.\r\n\r\n* Fix domain RN and attributes"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/3127be0e3d655b51c191ef5beb50da0af4318f05", "message": "aci_domain: Manage phys, vmm, l2ext, l3ext and FC domain profiles (#34011)\n\n* aci_domain: Manage phys, vmm, l2ext, l3ext and FC domain profiles\r\n\r\nA new ACI module from the high priority list.\r\n\r\n* Add RHEV VMM provider as Redhat\r\n\r\n* PEP compliancy\r\n\r\n* Make variables specific to domain\r\n\r\n* Add examples"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/0d84e27d0c22621e74764de0a61cbd1a583f83f6", "message": "aci_firmware_source: Manage firmware image sources on ACI (#34670)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/e0214ece574cbba4f1183cb0f1edf821a6d805a6", "message": "aci_vlan_pool_encap_block: New module to manage VLAN encap blocks (#34653)\n\n* aci_vlan_pool_encap_block: New module to manage VLAN encap blocks\r\n\r\nThis module is a simplified version of the aci_encap_pool_range module.\r\n\r\n* PEP8 fixes (closer to the original)\r\n\r\n* Add integration tests"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/fbffcb36bf0899dac44a2cf2fc822c457a5fa787", "message": "aci_vlan_pool: Module to manage VLAN pools (#34650)\n\n* aci_vlan_pool: Module to manage VLAN pools\r\n\r\nThis is a simplified version of the aci_encap_pool module.\r\n\r\n* Add integration tests, based on aci_encap_pool"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/79d2f8a93a209cdcc1ab67604a11bdc3046c2cd4", "message": "ACI: Fix tests and add signature-based authentication test (#34758)"}], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35206", "title": "win_product_facts: New module to get Windows product information", "body": "##### SUMMARY\r\nThis PR includes a new module that returns Windows product information, and includes product id and product key information.\r\n\r\n##### ISSUE TYPE\r\n - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\nwin_product_facts\r\n\r\n##### ANSIBLE VERSION\r\nv2.5", "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/35187", "title": "Fix modules index delimiter and improve readability", "body": "##### SUMMARY\r\nLooking at the modules index it's hard to read because it seems a large blob link:\r\nhttp://docs.ansible.com/ansible/devel/module_docs/list_of_network_modules.html#aci\r\n\r\nThis PR changes the module index in 2 ways:\r\n- It adds a delimited between module name and short-description (as it was before)\r\n- More importantly, it makes a visual distinction between module name and description by only making the module name a link (so the description is black on white)\r\n\r\n*PS Since I couldn't generate proper docs, I am not sure if the change in RST is correct.*\r\n\r\n##### ISSUE TYPE\r\n - Docs Pull Request\r\n\r\n##### COMPONENT NAME\r\ndocs\r\n\r\n##### ANSIBLE VERSION\r\nv2.5", "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/33752", "title": "[WIP] win_startlayout: Customize start menu on Windows images", "body": "##### SUMMARY\r\nThis is a module to customize the Windows start menu using the Start\r\nLayout cmdlets.\r\n\r\nOnly when writing this I discovered the existing functionality is no use\r\nfor my use case :-( So I put it out here because it may be useful for\r\nothers.\r\n\r\nI can write a basic integration test, but the imported state needs to be\r\ntested by someone who knows .wmi files.\r\n\r\nIt this something we want to add, then I will write the documentation and some basic tests.\r\n\r\nbleh\r\n\r\n##### ISSUE TYPE\r\n - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\nwin_startlayout\r\n\r\n##### ANSIBLE VERSION\r\nv2.5", "author_association": "MEMBER"}], "issue_comments": [{"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5174812", "body": "Is there a caching mechanism in order to not recreate \"dynamic\" facts every time ? Some facts may not change without a reboot, or do not change very often, or will never change. In order to make execution faster we may want to cache facts for a certain time ? A caching mechanism would be useful both for use on the host as on nodes.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5174812/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5175912", "body": "I am talking about our own facts implementation. Since we have no daemon to take care of this, I would expect ansible to trigger in certain cases an update of facts. And this is related to this issue, because if you store facts on the host, you need to know when these \"cached\" values need to be refreshed.\n\nI am assuming that you like to cache facts on hosts too, rather than fetch (and regenerate if not cached on the node) them for all systems all the time.\n\nPS My preference is to not rely on facter/ohai at all, so I am looking mostly to that scenario.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5175912/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5176884", "body": "Ok, in case these are Ansible facts, are they being \"executed\" at the time of need as well ? Or are we only considering static facts ? (I guess this discussion then should be part of another issue ?)\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5176884/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5174658", "body": "Perfect as jinja2 on RHEL4 is a no-go ;-)\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5174658/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5174812", "body": "Is there a caching mechanism in order to not recreate \"dynamic\" facts every time ? Some facts may not change without a reboot, or do not change very often, or will never change. In order to make execution faster we may want to cache facts for a certain time ? A caching mechanism would be useful both for use on the host as on nodes.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5174812/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5175912", "body": "I am talking about our own facts implementation. Since we have no daemon to take care of this, I would expect ansible to trigger in certain cases an update of facts. And this is related to this issue, because if you store facts on the host, you need to know when these \"cached\" values need to be refreshed.\n\nI am assuming that you like to cache facts on hosts too, rather than fetch (and regenerate if not cached on the node) them for all systems all the time.\n\nPS My preference is to not rely on facter/ohai at all, so I am looking mostly to that scenario.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5175912/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5176884", "body": "Ok, in case these are Ansible facts, are they being \"executed\" at the time of need as well ? Or are we only considering static facts ? (I guess this discussion then should be part of another issue ?)\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5176884/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/2044503", "body": "I am not too pleased seeing this to be made the default way of adding actions. Not only do we remove the very explicit \"action\" from the syntax (which is part of the terminology), we also make local_action an exception to the default practice, as well as mixing namespaces.\n\nSure it is shorter, but is shorter better ?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/2044503/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/2406171", "body": "Thanks !\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/2406171/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/3091449", "body": "Yup, this was a leftover of my test-code.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/3091449/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/5546491", "body": "@mpdehaan Commenting on this, because it impacts the existing behavior. If you set gather_facts to True per play by default, most people will have to disable it manually because most tasks do not change facts.\n\nAnd in the rare case that facts are changed by a task in the play, why enforce gather_facts only in the next play, and not for e.g. the next task ? What I do in those cases where facts change (i.e. we install redhat-lsb-core), we simply have the next task run setup conditionally so it updates those (all) facts, only for those hosts (and not for all of them). It gives you much more control over what is happening.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5546491/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/5551396", "body": "@bcoca I assume @mpdehaan refers to: https://github.com/ansible/ansible/pull/6251\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5551396/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}], "review_comments": []}, "SergeiHanus": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35125", "title": "Module fortios_config fails to apply configuration file when template contains several \"config\" statements", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!---\r\nfortios_config\r\n-->\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.1.0\r\n  config file = /home/ansible/BRRB-LAB/wan-config/ansible.cfg\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Nov  6 2016, 00:28:07) [GCC 4.8.5 20150623 (Red Hat 4.8.5-11)]\r\n\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\nDEFAULT_HOST_LIST(/home/ansible/BRRB-LAB/wan-config/ansible.cfg) = [u'/home/ansible/BRRB-LAB/wan-config/hosts']\r\nDEFAULT_REMOTE_USER(/home/ansible/BRRB-LAB/wan-config/ansible.cfg) = root\r\n\r\n-->\r\n\r\n##### OS / ENVIRONMENT\r\n<!---\r\nCentOS 7.4\r\nI'm trying to manage FortiOS v5.2.3\r\n-->\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly -->\r\nAnsible module fortios_config is not working for uploading configuration file when template contains several \"config\" statements\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nI tried to upload two types of configuration, one containing interface configuration, second containing ospf configuration. Interface configuration is being applied, but ospf configuration is not being applied.\r\nWhen I copy-paste configurations directly on device - both apply successfully.\r\n\r\n-->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```\r\n+++ yml file +++\r\n- hosts: lab-utm\r\n  connection: local\r\n  gather_facts: no\r\n  tasks:\r\n  - name: upload config\r\n    fortios_config:\r\n      host: \"{{ ansible_host }}\"\r\n      username: \"{{ ansible_user }}\"\r\n      password: \"{{ ansible_pass }}\"\r\n      src: ./templates/utm/branch-utm-ospf.conf\r\n    ignore_errors: yes\r\n\r\n+++ template file with ospf config +++\r\nconfig vdom\r\nedit root\r\nconfig router ospf\r\n    set default-information-originate enable\r\n    set router-id {{ rid2 }}\r\n        config area\r\n            edit 0.0.0.0\r\n        end\r\n        config ospf-interface\r\n            edit \"lan-int-op2\"\r\n                set interface {{ lan2_port }}\r\n                set ip {{ lan2_ip }}\r\n                set dead-interval 6\r\n                set hello-interval 2\r\n        end\r\n        config network\r\n            edit 1\r\n                set prefix {{ lan_prefix }}\r\n        end\r\nend\r\n\r\n+++ template file for interfaces +++\r\nconfig vdom\r\nedit root\r\n  config system interface\r\n    edit {{ wan2_port }}\r\n        set vdom \"root\"\r\n        set ip {{ wan2_ip }} {{ wan_mask }}\r\n        set allowaccess ping\r\n        set alias \"wan2\"\r\n    next\r\n\r\n    edit {{ lan2_port }}\r\n        set vdom \"root\"\r\n        set ip {{ lan2_ip }} {{ lan_mask }}\r\n        set allowaccess ping\r\n        set alias \"lan2\"\r\n    next\r\n\r\n\r\n    edit \"lo-wan2\"\r\n        set vdom \"root\"\r\n        set ip {{ rid2 }} 255.255.255.255\r\n        set allowaccess ping\r\n        set type loopback\r\n   end\r\n\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- What did you expect to happen when running the steps above? -->\r\nExpeted result : ospf configuration changes on device\r\n##### ACTUAL RESULTS\r\n<!--- What actually happened? If possible run with extra verbosity (-vvvv) -->\r\nospf configuration is not changed.\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\n \r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35125/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "yannrouillard": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35120", "title": "--flush-cache operation fails with redis database", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n \r\n##### COMPONENT NAME\r\n - plugin/cache/redis\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.1.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/myuser/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Aug 29 2016, 10:12:21) [GCC 4.8.5 20150623 (Red Hat 4.8.5-4)]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\nALLOW_WORLD_READABLE_TMPFILES(/etc/ansible/ansible.cfg) = True\r\nANSIBLE_FORCE_COLOR(/etc/ansible/ansible.cfg) = True\r\nANSIBLE_NOCOLOR(/etc/ansible/ansible.cfg) = False\r\nANSIBLE_NOCOWS(/etc/ansible/ansible.cfg) = True\r\nANSIBLE_PIPELINING(/etc/ansible/ansible.cfg) = True\r\nANSIBLE_SSH_ARGS(/etc/ansible/ansible.cfg) = -C -o ControlMaster=auto -o ControlPersist=240s\r\nANSIBLE_SSH_CONTROL_PATH_DIR(/etc/ansible/ansible.cfg) = ~/.ansible/cp\r\nCACHE_PLUGIN(/etc/ansible/ansible.cfg) = redis\r\nCACHE_PLUGIN_CONNECTION(/etc/ansible/ansible.cfg) = localhost:6379:0\r\nCACHE_PLUGIN_TIMEOUT(/etc/ansible/ansible.cfg) = 10000\r\nCOMMAND_WARNINGS(/etc/ansible/ansible.cfg) = False\r\nDEFAULT_ALLOW_UNSAFE_LOOKUPS(/etc/ansible/ansible.cfg) = True\r\nDEFAULT_BECOME(/etc/ansible/ansible.cfg) = True\r\nDEFAULT_BECOME_METHOD(/etc/ansible/ansible.cfg) = sudo\r\nDEFAULT_BECOME_USER(/etc/ansible/ansible.cfg) = root\r\nDEFAULT_CALLBACK_WHITELIST(/etc/ansible/ansible.cfg) = ['timer', 'skippy', 'profile_roles', 'junit']\r\nDEFAULT_EXECUTABLE(/etc/ansible/ansible.cfg) = /bin/sh\r\nDEFAULT_FORCE_HANDLERS(/etc/ansible/ansible.cfg) = True\r\nDEFAULT_FORKS(/etc/ansible/ansible.cfg) = 15\r\nDEFAULT_GATHERING(/etc/ansible/ansible.cfg) = smart\r\nDEFAULT_GATHER_SUBSET(/etc/ansible/ansible.cfg) = all\r\nDEFAULT_GATHER_TIMEOUT(/etc/ansible/ansible.cfg) = 60\r\nDEFAULT_HASH_BEHAVIOUR(/etc/ansible/ansible.cfg) = replace\r\nDEFAULT_LOAD_CALLBACK_PLUGINS(/etc/ansible/ansible.cfg) = True\r\nDEFAULT_LOG_PATH(/etc/ansible/ansible.cfg) = /var/log/ansible/ansible.log\r\nDEFAULT_MANAGED_STR(/etc/ansible/ansible.cfg) = Ansible managed: {file} %Y-%m-%d %H:%M:%S\r\nDEFAULT_MODULE_NAME(/etc/ansible/ansible.cfg) = command\r\nDEFAULT_NO_TARGET_SYSLOG(/etc/ansible/ansible.cfg) = True\r\nDEFAULT_PRIVATE_ROLE_VARS(/etc/ansible/ansible.cfg) = True\r\nDEFAULT_SCP_IF_SSH(/etc/ansible/ansible.cfg) = smart\r\nDEFAULT_SFTP_BATCH_MODE(/etc/ansible/ansible.cfg) = False\r\nDEFAULT_SSH_TRANSFER_METHOD(/etc/ansible/ansible.cfg) = smart\r\nDEFAULT_STRATEGY(/etc/ansible/ansible.cfg) = linear\r\nDEFAULT_TIMEOUT(/etc/ansible/ansible.cfg) = 300\r\nDEFAULT_TRANSPORT(/etc/ansible/ansible.cfg) = smart\r\nDEFAULT_UNDEFINED_VAR_BEHAVIOR(/etc/ansible/ansible.cfg) = True\r\nDEPRECATION_WARNINGS(/etc/ansible/ansible.cfg) = False\r\nDISPLAY_ARGS_TO_STDOUT(/etc/ansible/ansible.cfg) = True\r\nDISPLAY_SKIPPED_HOSTS(/etc/ansible/ansible.cfg) = True\r\nERROR_ON_MISSING_HANDLER(/etc/ansible/ansible.cfg) = True\r\nHOST_KEY_CHECKING(/etc/ansible/ansible.cfg) = False\r\nPARAMIKO_RECORD_HOST_KEYS(/etc/ansible/ansible.cfg) = True\r\nRETRY_FILES_ENABLED(/etc/ansible/ansible.cfg) = False\r\nRETRY_FILES_SAVE_PATH(/etc/ansible/ansible.cfg) = /home/myuser/.ansible-retry\r\nSHOW_CUSTOM_STATS(/etc/ansible/ansible.cfg) = True\r\nSYSTEM_WARNINGS(/etc/ansible/ansible.cfg) = True\r\n-->\r\n\r\n##### OS / ENVIRONMENT\r\nRedhat 7.2\r\n\r\n##### SUMMARY\r\nWhen trying to flush-cache with the redis database cache plugin, the command fails with the following error:\r\n```\r\nERROR! Unexpected Exception, this is probably a bug: u'NAME_OF_ONE_HOST'\r\n```\r\n\r\n##### STEPS TO REPRODUCE\r\nWith the following inventory and playbook, run the following commands:\r\n- Flush the existing redis cache if needed:\r\n```\r\nredis-cli flushdb\r\n```\r\n- Run the playbook first to gather facts:\r\n```\r\nansible-playbook -i hosts test-playbook.yml\r\n```\r\n- Try to flush the cache\r\n```\r\nansible-playbook -i hosts test-playbook.yml --flush-cache\r\n```\r\n\r\nThe playbook used is:\r\n```yaml\r\n- hosts: all\r\n  tasks:\r\n  - setup:\r\n```\r\nThe inventory file used is:\r\n```yaml\r\n[test]\r\nlocalhost ansible_connection=local\r\n```\r\n\r\n##### EXPECTED RESULTS\r\nThe cache is flushed and the playbook runs fine.\r\n\r\n##### ACTUAL RESULTS\r\nThe playbook then fails with the following error:\r\n```\r\nERROR! Unexpected Exception, this is probably a bug: u'localhost'\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35120/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35126", "title": "Only delete key from redis in-memory cache if present", "body": "##### SUMMARY\r\n\r\nFixes #35120 : the redis cache plugin keeps key/value\r\nentries in an in-memory cache to avoid hitting the\r\nredis database each time.\r\n\r\nThe problem is that a cache entry is only set when\r\na value is get or set but it is always deleted when\r\ntrying to delete a value.\r\n\r\nWhen the --flush-cache ansible-playbook option is used,\r\nthe redis cache plugin is first asked to remove every\r\nentry corresponding to every hostname present in the inventory.\r\nAs no value as been set/get so far, it then tries to delete\r\nan unexisting value from the cache and hence crashes with\r\na KeyError exception.\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n- plugin/cache/redis\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.1.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/myuser/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Aug 29 2016, 10:12:21) [GCC 4.8.5 20150623 (Red Hat 4.8.5-4)]\r\n```", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "sgtpanic": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35119", "title": "Creating Docker secrets from file system", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Feature Idea\r\n\r\n##### COMPONENT NAME\r\n<!---\r\nName of the module, plugin, task or feature\r\nDo not include extra details here, e.g. \"vyos_command\" not \"the network module vyos_command\" or the full path\r\n-->\r\ndocker_secret\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.0.0\r\n  config file = None\r\n  configured module search path = [u'/Users/me/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/Cellar/ansible/2.4.0.0/libexec/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.14 (default, Sep 25 2017, 09:54:19) [GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.37)]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\nIf using Ansible 2.4 or above, paste the results of \"ansible-config dump --only-changed\"\r\nOtherwise, mention any settings you have changed/added/removed in ansible.cfg\r\n(or using the ANSIBLE_* environment variables).\r\n-->\r\nNA\r\n##### OS / ENVIRONMENT\r\n<!---\r\nMention the OS you are running Ansible from, and the OS you are\r\nmanaging, or say \"N/A\" for anything that is not platform-specific.\r\nAlso mention the specific version of what you are trying to control,\r\ne.g. if this is a network bug the version of firmware on the network device.\r\n-->\r\nN/A\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly -->\r\nI think that docker_secret is an excellent addition to Ansible and I am interested to use it to manage infrastructure. I looked at it today but it appears that I can only create secrets from strings, not directly from files (e.g. I have a property file that I would like to turn into a secret or convert an SSL private key into a secret). I considered `cat`ing the file into a variable but I was hoping for something more direct. Is this correct and I'm limited to only strings? I understand it's only in preview so it's not the final iteration. If I can't create secrets from files, I'd be glad to add functionality to the module with some guidance. \r\n\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\n<!--- Paste example playbooks or commands between quotes below -->\r\nI was hoping to do something like the below.\r\n```\r\nname: create a new docker secret\r\ndocker_secret:\r\n  name: my_new_secret\r\n  data: /path/to/secret\r\n  file: yes\r\n  state: present\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- What did you expect to happen when running the steps above? -->\r\n\r\n##### ACTUAL RESULTS\r\n<!--- What actually happened? If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35119/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "shdobxr": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35110", "title": "s3_bucket default encryption upon bucket create and http mode in same module", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Feature Idea\r\n\r\n##### COMPONENT NAME\r\n<!---\r\nName of the module, plugin, task or feature\r\nDo not include extra details here, e.g. \"vyos_command\" not \"the network module vyos_command\" or the full path\r\n-->\r\ns3_bucket and s3_website as one with capability for standard encryption option during bucket launch.\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/Users/dgirard/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Library/Python/2.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.10 (default, Jul 15 2017, 17:16:57) [GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.31)]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\nIf using Ansible 2.4 or above, paste the results of \"ansible-config dump --only-changed\"\r\nOtherwise, mention any settings you have changed/added/removed in ansible.cfg\r\n(or using the ANSIBLE_* environment variables).\r\n-->\r\n\r\n##### OS / ENVIRONMENT\r\n<!---\r\nMention the OS you are running Ansible from, and the OS you are\r\nmanaging, or say \"N/A\" for anything that is not platform-specific.\r\nAlso mention the specific version of what you are trying to control,\r\ne.g. if this is a network bug the version of firmware on the network device.\r\n-->\r\nMacOs 10.13.2\r\n##### SUMMARY\r\n<!--- Explain the problem briefly -->\r\n\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n      s3_bucket:\r\n        name: \"{{ somevar }}\"\r\n        policy: \"{{ lookup('template', '{{ somevar }}' )}}\"\r\n        profile: \"{{ somevar }}\"\r\n        state: \"{{ somevar }}\"\r\n        region: \"{{ somevar }}\"\r\n        encrypt: Yes\r\n        versioning: \"{{ somevar }}\"\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- What did you expect to happen when running the steps above? -->\r\n\r\n##### ACTUAL RESULTS\r\n<!--- What actually happened? If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35110/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "kiorky": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35109", "title": "Multiple levels of include_tasks lead to unexpected behavior", "body": "See PR #35107 for all details.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35109/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/35065", "title": "included include_role fails to escalate since ebf971f", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\ninclude_role\r\n\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n2.4\r\ndevel\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n- ubuntu LTS\r\n\r\n##### SUMMARY\r\n- reproducable test case here: https://github.com/kiorky/ansible_test_cases/tree/35065\r\n- With the commit ebf971f931290a113f738f658d7a6e095994e120 the test will fail, the third role wont escalate to root, prior this commit, everything is fine.\r\n\r\n\r\n\r\nRelated to #33922 & #32565 ", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35065/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35167", "title": "fix Include role: exposed/shared vars", "body": "##### SUMMARY\r\ninclude_role included vars are totally losen from next tasks, roles play access making include_role pretty unusable to DRY code.\r\nThis PR fixes it; see #21890 and all linked bug.\r\n\r\nThis PR is a part of my initial PR #32565  which i splitted up.\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\ninclude_role\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n2.4\r\ndevel\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nI added targets/include_role integration test to show the bug in action\r\nexpected test run\r\n```\r\ntesthost                   : ok=16   changed=9    unreachable=0    failed=0\r\n```\r\nbefore the fix\r\n```\r\nTASK [test_include_role : noop task] ******************************************************************************************************************************************************************************************************************************************\r\nchanged: [testhost] => {\"changed\": true, \"cmd\": \"echo from role\", \"delta\": \"0:00:00.099395\", \"end\": \"2018-01-20 17:32:41.982486\", \"rc\": 0, \"start\": \"2018-01-20 17:32:41.883091\", \"stderr\": \"\", \"stderr_lines\": [], \"stdout\": \"from role\", \"stdout_lines\": [\"from role\"]}\r\n\r\nTASK [command] ****************************************************************************************************************************************************************************************************************************************************************\r\nfatal: [testhost]: FAILED! => {\"msg\": \"The task includes an option with an undefined variable. The error was: 'testinc_defvar1' is undefined\\n\\nThe error appears to have been in '/srv/corpusops/corpusops.bootstrap/venv/src/ansible/test/integration/targets/include_role/include_role.yml': line 11, column 7, but may\\nbe elsewhere in the file depending on the exact syntax problem.\\n\\nThe offending line appears to be:\\n\\n      register: testa\\n    - shell: echo {{testinc_defvar1}}\\n      ^ here\\nWe could be wrong, but this one looks like it might be an issue with\\nmissing quotes.  Always quote template expression brackets when they\\nstart a value. For instance:\\n\\n    with_items:\\n      - {{ foo }}\\n\\nShould be written as:\\n\\n    with_items:\\n      - \\\"{{ foo }}\\\"\\n\\nexception type: <class 'ansible.errors.AnsibleUndefinedVariable'>\\nexception: 'testinc_defvar1' is undefined\"}\r\n        to retry, use: --limit @/srv/corpusops/corpusops.bootstrap/venv/src/ansible/test/integration/targets/include_role/include_role.retry\r\n\r\nPLAY RECAP ********************************************************************************************************************************************************************************************************************************************************************\r\ntesthost                   : ok=5    changed=3    unreachable=0    failed=1\r\n\r\nNOTICE: To resume at this test target, use the option: --start-at include_role\r\nERROR: Command \"./runme.sh -v\" returned exit status 2.\r\n```\r\n\r\n", "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/35166", "title": "Include roles with tags in meta/main.yml make a role run more than neccesary", "body": "##### SUMMARY\r\nroles may be ran more than neccessary if they are called with different tags, which is in my opnion a bug, that PR fixes it.\r\n\r\nSee associated test\r\n\r\nThis is part of the #32565 PR split.\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\ninclude_role\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n2.4\r\ndevel\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nPre (associatet PR test FAIL)\r\n\r\n```\r\nTASK [assert] *****************************************************************************************************************************************************************************************************************************************************************\r\nfatal: [testhost]: FAILED! => {\r\n    \"assertion\": \"counter=='1'\",\r\n    \"changed\": false,\r\n    \"evaluated_to\": false,\r\n    \"msg\": \"counterfail2 2\"\r\n}\r\n        to retry, use: --limit @/srv/corpusops/corpusops.bootstrap/venv/src/ansible/test/integration/targets/include_role_cache_tags_bug/test.retry\r\n\r\nPLAY RECAP ********************************************************************************************************************************************************************************************************************************************************************\r\ntesthost                   : ok=4    changed=0    unreachable=0    failed=1\r\n\r\nNOTICE: To resume at this test target, use the option: --start-at include_role_cache_tags_bug\r\nERROR: Command \"./runme.sh -v\" returned exit status 2.\r\n```\r\n\r\nPost (associatet PR test pass)\r\n```\r\ntesthost                   : ok=18   changed=0    unreachable=0    failed=0\r\n\r\n```", "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/35165", "title": "FIX: multiple nested tasks include levels", "body": "I'm splitting the #32565 PR on multiple more isolated PR as it may be easier to accept/check in in core.\r\n\r\n\r\n##### ISSUE TYPE\r\n - Bug Report\r\n##### COMPONENT NAME\r\ninclude_tasks\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n2.4\r\ndevel\r\n```\r\n\r\n##### CONFIGURATION\r\nstandard\r\n\r\n##### OS / ENVIRONMENT\r\nubuntu lts\r\n\r\n##### SUMMARY\r\nSee 4f97013cabc79cba669090b9a7d2a13bdbf34453\r\n\r\n##### STEPS TO REPRODUCE\r\nSee 4f97013cabc79cba669090b9a7d2a13bdbf34453\r\n\r\n##### EXPECTED RESULTS\r\nincluded tasks find file\r\n```\r\n\r\nRunning include_role_nested integration test script\r\nRun command: ./runme.sh -v\r\n+ ansible-playbook -i../../inventory nested.yml -v\r\nUsing /srv/corpusops/corpusops.bootstrap/venv/src/ansible/test/integration/integration.cfg as config file\r\n\r\nPLAY [verify that multiple level of nested statements and  include+meta doesnt mess included files mecanisms] *****************************************************************************************************************************************************************\r\n\r\nTASK [Gathering Facts] ********************************************************************************************************************************************************************************************************************************************************\r\nok: [testhost]\r\n\r\nTASK [include_tasks] **********************************************************************************************************************************************************************************************************************************************************\r\nincluded: /srv/corpusops/corpusops.bootstrap/venv/src/ansible/test/integration/targets/include_role_nested/tasks/nested/nested.yml for testhost\r\n\r\nTASK [include_tasks] **********************************************************************************************************************************************************************************************************************************************************\r\nincluded: /srv/corpusops/corpusops.bootstrap/venv/src/ansible/test/integration/targets/include_role_nested/./tasks/nested/../../nestedtasks/nested/nested.yml for testhost\r\n\r\nTASK [include_role] ***********************************************************************************************************************************************************************************************************************************************************\r\n\r\nTASK [nested/test_nested_dep_role : include_tasks] ****************************************************************************************************************************************************************************************************************************\r\nincluded: /srv/corpusops/corpusops.bootstrap/venv/src/ansible/test/integration/targets/include_role_nested/nested/nested/test_nested_dep_role/tasks/./runc.yml for testhost\r\n\r\nTASK [nested/test_nested_dep_role : debug] ************************************************************************************************************************************************************************************************************************************\r\nok: [testhost] => {\r\n    \"msg\": \"from test_nested_dep_role\"\r\n}\r\n\r\nTASK [nested/test_nested_dep_role : include_role] *****************************************************************************************************************************************************************************************************************************\r\n\r\nTASK [nested/nested/test_nested_dep_role2b : include_tasks] *******************************************************************************************************************************************************************************************************************\r\nincluded: /srv/corpusops/corpusops.bootstrap/venv/src/ansible/test/integration/targets/include_role_nested/nested/nested/nested/test_nested_dep_role2b/tasks/./runf.yml for testhost\r\n\r\nTASK [nested/nested/test_nested_dep_role2b : command] *************************************************************************************************************************************************************************************************************************\r\nchanged: [testhost] => {\"changed\": true, \"cmd\": \"echo from deprole2b\", \"delta\": \"0:00:00.100271\", \"end\": \"2018-01-19 21:28:28.678150\", \"rc\": 0, \"start\": \"2018-01-19 21:28:28.577879\", \"stderr\": \"\", \"stderr_lines\": [], \"stdout\": \"from deprole2b\", \"stdout_lines\": [\"from deprole2b\"]}\r\n\r\nTASK [nested/nested/test_nested_dep_role2a : include_tasks] *******************************************************************************************************************************************************************************************************************\r\nincluded: /srv/corpusops/corpusops.bootstrap/venv/src/ansible/test/integration/targets/include_role_nested/nested/nested/nested/test_nested_dep_role2a/tasks/./rune.yml for testhost\r\n\r\nTASK [nested/nested/test_nested_dep_role2a : command] *************************************************************************************************************************************************************************************************************************\r\nchanged: [testhost] => {\"changed\": true, \"cmd\": \"echo from deprole2\", \"delta\": \"0:00:00.098868\", \"end\": \"2018-01-19 21:28:28.972384\", \"rc\": 0, \"start\": \"2018-01-19 21:28:28.873516\", \"stderr\": \"\", \"stderr_lines\": [], \"stdout\": \"from deprole2\", \"stdout_lines\": [\"from deprole2\"]}\r\n\r\nTASK [nested/nested/test_nested_dep_role2 : include_tasks] ********************************************************************************************************************************************************************************************************************\r\nincluded: /srv/corpusops/corpusops.bootstrap/venv/src/ansible/test/integration/targets/include_role_nested/nested/nested/nested/test_nested_dep_role2/tasks/./rund.yml for testhost\r\n\r\nTASK [nested/nested/test_nested_dep_role2 : command] **************************************************************************************************************************************************************************************************************************\r\nchanged: [testhost] => {\"changed\": true, \"cmd\": \"echo from deprole2a\", \"delta\": \"0:00:00.110779\", \"end\": \"2018-01-19 21:28:29.281009\", \"rc\": 0, \"start\": \"2018-01-19 21:28:29.170230\", \"stderr\": \"\", \"stderr_lines\": [], \"stdout\": \"from deprole2a\", \"stdout_lines\": [\"from deprole2a\"]}\r\n\r\nTASK [test_nested_include_task : include_tasks] *******************************************************************************************************************************************************************************************************************************\r\nincluded: /srv/corpusops/corpusops.bootstrap/venv/src/ansible/test/integration/targets/include_role_nested/roles/test_nested_include_task/tasks/./runa.yml for testhost\r\n\r\nTASK [test_nested_include_task : debug] ***************************************************************************************************************************************************************************************************************************************\r\nok: [testhost] => {\r\n    \"msg\": \"from test_nested_include_task\"\r\n}\r\n\r\nPLAY RECAP ********************************************************************************************************************************************************************************************************************************************************************\r\ntesthost                   : ok=13   changed=3    unreachable=0    failed=0\r\n```\r\n\r\n\r\n##### ACTUAL RESULTS\r\nincluded tasks doesnt find file\r\n```\r\nRunning include_role_nested integration test script\r\nRun command: ./runme.sh -v\r\n+ ansible-playbook -i../../inventory nested.yml -v\r\nUsing /srv/corpusops/corpusops.bootstrap/venv/src/ansible/test/integration/integration.cfg as config file\r\n\r\nPLAY [verify that multiple level of nested statements and  include+meta doesnt mess included files mecanisms] *****************************************************************************************************************************************************************\r\n\r\nTASK [Gathering Facts] ********************************************************************************************************************************************************************************************************************************************************\r\nok: [testhost]\r\n\r\nTASK [include_tasks] **********************************************************************************************************************************************************************************************************************************************************\r\nincluded: /srv/corpusops/corpusops.bootstrap/venv/src/ansible/test/integration/targets/include_role_nested/tasks/nested/nested.yml for testhost\r\n\r\nTASK [include_tasks] **********************************************************************************************************************************************************************************************************************************************************\r\nincluded: /srv/corpusops/corpusops.bootstrap/venv/src/ansible/test/integration/targets/include_role_nested/./tasks/nested/../../nestedtasks/nested/nested.yml for testhost\r\n\r\nTASK [include_role] ***********************************************************************************************************************************************************************************************************************************************************\r\n\r\nTASK [nested/test_nested_dep_role : include_tasks] ****************************************************************************************************************************************************************************************************************************\r\nfatal: [testhost]: FAILED! => {\"reason\": \"Unable to retrieve file contents\\nCould not find or access '/srv/corpusops/corpusops.bootstrap/venv/src/ansible/test/integration/targets/include_role_nested/runc.yml'\"}\r\n [WARNING]: Failure using method (v2_runner_on_failed) in callback plugin (<ansible.plugins.callback.junit.CallbackModule object at 0x7f9e22175e10>):\r\n/srv/corpusops/corpusops.bootstrap/venv/src/ansible/test/integration/targets/include_role_nested/nested/nested/test_nested_dep_role/tasks/main.yml:2: verify that multiple level of nested statements and  include+meta doesnt mess included files mecanisms:\r\nnested/test_nested_dep_role : include_tasks _raw_params=./runc.yml: duplicate host callback: testhost\r\n\r\n        to retry, use: --limit @/srv/corpusops/corpusops.bootstrap/venv/src/ansible/test/integration/targets/include_role_nested/nested.retry\r\n\r\nPLAY RECAP ********************************************************************************************************************************************************************************************************************************************************************\r\ntesthost                   : ok=3    changed=0    unreachable=0    failed=1\r\n\r\nNOTICE: To resume at this test target, use the option: --start-at include_role_nested\r\nERROR: Command \"./runme.sh -v\" returned exit status 2.\r\n```\r\n\r\n\r\nThis is another solution for #34782 (related to #34783)", "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/35164", "title": "Include role honour allow duplicates", "body": "##### SUMMARY\r\ninclude_role does not honour included role meta/main.yml allow_duplicates when not set on the include_role call and set it to True, which is pretty inintuitive\r\n\r\nSee associated test\r\n\r\nThis is part of the #32565 PR split.\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\ninclude_role\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n2.4\r\ndevel\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nPre (associatet PR test FAIL)\r\n\r\n```\r\nTASK [inccounter : set_fact] **************************************************************************************************************************************************************************************************************************************************\r\nok: [testhost] => {\"ansible_facts\": {\"counter\": \"4\"}, \"changed\": false}\r\n [WARNING]: Failure using method (v2_runner_on_ok) in callback plugin (<ansible.plugins.callback.junit.CallbackModule object at 0x7f719e940e10>):\r\n/srv/corpusops/corpusops.bootstrap/venv/src/ansible/test/integration/targets/include_role_honour_duplicates/roles/inccounter/tasks/main.yml:2: verify that allow_duplicates prevent include_role to run a role that has already run only if if it does not allow it:\r\ninccounter : set_fact cacheable=False, counter={{counter|int+1}}: duplicate host callback: testhost\r\n\r\n\r\nTASK [include_role] ***********************************************************************************************************************************************************************************************************************************************************\r\n\r\nTASK [altinccounter : set_fact] ***********************************************************************************************************************************************************************************************************************************************\r\nok: [testhost] => {\"ansible_facts\": {\"altcounter\": \"4\"}, \"changed\": false}\r\n [WARNING]: Failure using method (v2_runner_on_ok) in callback plugin (<ansible.plugins.callback.junit.CallbackModule object at 0x7f719e940e10>):\r\n/srv/corpusops/corpusops.bootstrap/venv/src/ansible/test/integration/targets/include_role_honour_duplicates/roles/altinccounter/tasks/main.yml:2: verify that allow_duplicates prevent include_role to run a role that has already run only if if it does not allow it:\r\naltinccounter : set_fact cacheable=False, altcounter={{altcounter|int+1}}: duplicate host callback: testhost\r\n\r\n\r\nTASK [include_role] ***********************************************************************************************************************************************************************************************************************************************************\r\n\r\nTASK [noinccounter : set_fact] ************************************************************************************************************************************************************************************************************************************************\r\nok: [testhost] => {\"ansible_facts\": {\"nocounter\": \"4\"}, \"changed\": false}\r\n [WARNING]: Failure using method (v2_runner_on_ok) in callback plugin (<ansible.plugins.callback.junit.CallbackModule object at 0x7f719e940e10>):\r\n/srv/corpusops/corpusops.bootstrap/venv/src/ansible/test/integration/targets/include_role_honour_duplicates/roles/noinccounter/tasks/main.yml:2: verify that allow_duplicates prevent include_role to run a role that has already run only if if it does not allow it:\r\nnoinccounter : set_fact nocounter={{nocounter|int+1}}, cacheable=False: duplicate host callback: testhost\r\n\r\n\r\nTASK [assert] *****************************************************************************************************************************************************************************************************************************************************************\r\nfatal: [testhost]: FAILED! => {\r\n    \"assertion\": \"counter=='3'\",\r\n    \"changed\": false,\r\n    \"evaluated_to\": false,\r\n    \"msg\": \"counterfail\"\r\n}\r\n        to retry, use: --limit @/srv/corpusops/corpusops.bootstrap/venv/src/ansible/test/integration/targets/include_role_honour_duplicates/test.retry\r\n\r\nPLAY RECAP ********************************************************************************************************************************************************************************************************************************************************************\r\ntesthost                   : ok=12   changed=0    unreachable=0    failed=1\r\n\r\nNOTICE: To resume at this test target, use the option: --start-at include_role_honour_duplicates\r\nERROR: Command \"./runme.sh -v\" returned exit status 2.\r\n\r\n```\r\n\r\nPost (associatet PR test pass)\r\n```\r\ntesthost                   : ok=26   changed=0    unreachable=0    failed=0\r\n\r\n```", "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/35163", "title": "Include role:  serialization: (de)pickling support", "body": "##### SUMMARY\r\nThe fixes that were introduced recently to avoid recursion errors (yes, already removed from 2.4 but still in 2.5)  are IMO more kind of workarounds that lead to the former bug not to happen again than fixes in themvelves.\r\n\r\nThis PR brings pickling/depickling support for include_role & fixes permanently the recursion error.\r\n\r\nThis PR is for the moment dependant of #35167 (the only real commit is 471d7452c2dd2005e0fbccbe0ccecb9bb1469840)\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\ninclude_role\r\n##### ANSIBLE VERSION\r\n```\r\n2.4\r\ndevel\r\n```\r\n\r\n\r\n- This refs: #35065\r\n- This fixes: #33922\r\n- This fixes: #23609", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "sivel": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35096", "title": "Add 2.5 porting guide notes about include_role and inherited attributes", "body": "##### ISSUE TYPE\r\n - Documentation Report\r\n\r\n##### COMPONENT NAME\r\n\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n2.5\r\n```\r\n\r\n##### CONFIGURATION\r\nN/A\r\n##### OS / ENVIRONMENT\r\nN/A\r\n##### SUMMARY\r\nIn 2.5 we resolved a bug in `include_*` to meet our expectations that attributes applied to `include_*` should not be inherited by the included tasks.  That functionality is reserved for `import_*`\r\n\r\nWe need to document this change in the 2.5 porting guide.\r\n\r\nref #35065 \r\n\r\n\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- What did you expect to happen when running the steps above? -->\r\n\r\n##### ACTUAL RESULTS\r\n<!--- What actually happened? If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35096/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/f9c2c9570d72c199caa825718771a30e81996c65", "message": "Clean up imports to prevent issues with mutable data being used in modules (#35112)\n\n* Clean up imports to prevent issues with mutable data being used in modules\r\n\r\n* Remove un-needed mock"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/a451613dd18e76d585ed34f3417a712b4d792572", "message": "Make sure we don't try to inspect DOCUMENTATION, if the plugin doesn't have any (#35017)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/3742ff9230d17efdd16b901ffe499e25accc069f", "message": "Fix CaptureStd in validate-modules to work on both py3 and py2 (#35060)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/d8329e530c3e7b2590cd16456b9104c19362d0c2", "message": "failed, skipped, and unreachable all seem to be needed for various callbacks. Fixes #34716 (#34724)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/29c1d5cb5d283c649a5bc30dce53b8e4875d01d3", "message": "Ensure that the become password is written on py3 in the ssh connection plugin. Fixes #34727"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/3c400c5899ca7c71b49087ffeae7153191e54c33", "message": "ANSIBLE_METADATA doesn't support YAML currently, change 315 to invalid data type (#35009)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/b20df1be02765db46edef887d51d0896bbec2570", "message": "Make template action respect local_tmp. Fixes #34941 (#35005)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/2cb810544cacd1ff96d5f63b1370a9328f89a83f", "message": "Address missing extends_documentation_fragment (#35008)\n\n* Address missing extends_documentation_fragment\r\n\r\n* Document purge_aliases"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/a352d4382491f06133ce52be9b7f5723f42fab1a", "message": "Compare arg+aliases between docs and argument_spec (#34809)\n\n* compare arg+aliases between docs and argument_spec\r\n\r\n* Add some special handling for the network modules provider options that also appear in the top level arg spec\r\n\r\n* Fix error code for bigip_hostname\r\n\r\n* Address merge conflicts due to changes in f5 modules\r\n\r\n* Update validate-modules ignore based off a clean execution\r\n\r\n* Address merge conflicts\r\n\r\n* Address renamed module\r\n\r\n* Address recent changes to modules\r\n\r\n* Add ignore for ucs_ip_pool\r\n\r\n* Update aci modules to get more reliable documentation comparison, but not mutating the module_utils aci_argument_spec\r\n\r\n* Update ignore.txt after recent aci updates\r\n\r\n* Add extra guard to ensure we handle provider special only for network modules\r\n\r\n* Address additional changes to modules"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/19ab8827907cc6612537110cedb528bcb1980cdd", "message": "Fix inconsitencies between code assumptions and schema (#34901)\n\n* Fix inconsitencies between code assumptions and schema\r\n\r\n* Address a couple of RETURN issues, where the description was parsed as a dict"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/ae49dd65d9b52dea3c5c07c924e7008a8448b67f", "message": "Add note to 2.4 porting guide about initial playbook relative host/group_vars and inheritance (#34769)\n\n* Add note to 2.4 porting guide about initial playbook relative host/group_vars and inheritance"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/86e4619dcf69843a74889e06dc74ade06565bcc1", "message": "Update echo ansible-vault example with -n as without this, you get a newline. Fixes #34795 (#34823)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/2b66d9966c68c9c79495e37d98664b6a4a86210e", "message": "Add a config toggle for agnostic become prompts, defaulting to False for the 2.5 release. Fixes #33999 (#34761)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/dcc05093db395eb1b7c42f46ef5b5506de67da6b", "message": "Validate modules arg spec fixes (#34477)\n\n* Update validate-modules arg_spec introspection to be faster, by only mocking the imports we explicitly list\r\n* The use of types.MethodType in redhat_subscription wasn't py3 compatible, use partial instead\r\n* Remove argument_spec import hacks, make them errors, we can ignore them with ansible-test\r\n* Enable the --arg-spec flag for validate-modules"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/42a0d7141339295cf7fd2f5ed05d7ec2ef5cb8c1", "message": "Catch exception comparing role versions, and provide a user friendly error message. Fixes #32301 (#34427)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/bfb52641380710664c166457a222b253cb4f6c2b", "message": "Support datetime serialization in json encoder. Fixes #34312 (#34516)"}], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35199", "title": "Add porting guide note about include inheritance change", "body": "##### SUMMARY\r\nAdd porting guide note about include inheritance change. Fixes #35096\r\n\r\n##### ISSUE TYPE\r\n - Docs Pull Request\r\n\r\n##### COMPONENT NAME\r\ndocs/docsite/rst/porting_guide_2.5.rst\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n2.5\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```", "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/35002", "title": "Don't skip an inventory source just because it has a comma", "body": "##### SUMMARY\r\nDon't skip an inventory source just because it has a comma, make sure it's also doesn't exist as a path. Fixes #34931\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nlib/ansible/vars/manager.py\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\ndevel\r\n2.4\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```", "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34649", "title": "Error if a module is found to shadow a reserved keyword", "body": "##### SUMMARY\r\nError if a module is found to shadow a reserved keyword\r\n\r\nThis prevents the error:\r\n\r\n```\r\nERROR! conflicting action statements: command, tags\r\n```\r\n\r\nand replaces it with\r\n```\r\nERROR! Module \"tags\" shadows the name of a reserved keyword. Please rename or remove this module. Found at /Users/matt/projects/ansibledev/playbooks/tags/library/tags\r\n```\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nlib/ansible/plugins/loader.py\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```", "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/33792", "title": "Handle duplicate headers in the uri module", "body": "##### SUMMARY\r\n...and make it easier for users to use cookies by providing a pre-built string\r\n\r\nFIxes #33325 \r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nuri\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\ndevel\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```", "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/33689", "title": "First pass at a src parameter that can be used in place of body. Support binary files", "body": "##### SUMMARY\r\n\r\nThis PR adds a new `src` parameter to the `uri` module. The allows for the following behaviors:\r\n\r\n* Sending a binary file\r\n* Alternative to `body: \"{{ lookup('file', 'foo.json') }}`\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nuri\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\ndevel\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "MEMBER"}], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/4863377", "body": "@claco I was doing some more extensive testing last night with this. The only way currently is to not specify a group attribute or meta key.\n\nI've already started looking at a potential logic fix.  Additionally there is a bug with state=absent with a group specified. I'm working on that too.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4863377/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/5004774", "body": "@LucianoCavalheiro, see https://github.com/ansible/ansible/pull/4733#issuecomment-27808711\n\nIn short, this allows you to provide a sudo password for a host, that will allow sudo without a password.  Detection of the echo allows us to know whether we were able to sudo successfully, regardless of sending a password.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5004774/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/5641068", "body": "See https://github.com/ansible/ansible/pull/5411#issuecomment-37341938\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5641068/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/11771289", "body": "@jimi-c I believe he is referencing:\n\nhttps://github.com/ansible/ansible/commit/18a9eff11f0a6e51b17405ce596bd9ff7e676320#diff-bb05a8db47842d9b28afd62364e23cc9R37\n\nSpecifically:\n\n```\nlocals=dict()\n```\n\nRef: http://docs.python-guide.org/en/latest/writing/gotchas/#mutable-default-arguments\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/11771289/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}], "review_comments": []}, "walro": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35094", "title": "rabbitmq_policy incompatible with RabbitMQ 3.7", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\n\r\nrabbitmq_policy\r\n\r\n##### ANSIBLE VERSION\r\n\r\n```\r\nansible 2.4.2.0\r\n  config file = /Users/robin/Workspace/git/ansible/ansible.cfg\r\n  configured module search path = [u'/Users/robin/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.14 (default, Jan  6 2018, 12:15:00) [GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.39.2)]\r\n```\r\n\r\n##### CONFIGURATION\r\n\r\n```\r\nDEFAULT_BECOME_ASK_PASS(/Users/robin/Workspace/git/ansible/ansible.cfg) = True\r\nDEFAULT_CALLBACK_PLUGIN_PATH(/Users/robin/Workspace/git/ansible/ansible.cfg) = [u'/Users/robin/Workspace/git/ansible/callback_plugins']\r\nDEFAULT_CALLBACK_WHITELIST(/Users/robin/Workspace/git/ansible/ansible.cfg) = ['log_plays_per_host']\r\nDEFAULT_FORKS(/Users/robin/Workspace/git/ansible/ansible.cfg) = 25\r\nDEFAULT_HOST_LIST(/Users/robin/Workspace/git/ansible/ansible.cfg) = [u'/Users/robin/Workspace/git/ansible/hosts']\r\nDEFAULT_LOG_PATH(/Users/robin/Workspace/git/ansible/ansible.cfg) = /Users/robin/Workspace/git/ansible/logs/ansible.log\r\nDEFAULT_TIMEOUT(/Users/robin/Workspace/git/ansible/ansible.cfg) = 600\r\nRETRY_FILES_ENABLED(/Users/robin/Workspace/git/ansible/ansible.cfg) = False\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n\r\nmacOS 10.12.6\r\n\r\n##### SUMMARY\r\n\r\nRabbitMQ 3.7 has made some changes to how `rabbitmqctl ` works in at least two different scenarios when it comes to managing policies.\r\n\r\nExample 1 (the one that is the root-cause to he problem described below), for 3.7 we have a newline when there are no policies set up:\r\n\r\n```\r\n# 3.7.2\r\n$ sudo rabbitmqctl list_policies -q -p /\r\n\r\n$ \r\n\r\n# 3.6.15\r\n$ sudo rabbitmqctl list_policies -q -p /\r\n$ \r\n```\r\n\r\nExample 2, the order between \"apply_to\" and \"pattern\" has changed (also the settings seems to be ordered now, but I don't think that matters)\r\n\r\n```\r\n# 3.7.2\r\n$ sudo rabbitmqctl list_policies -q -p /\r\n/\tHA\t.*\tall\t{\"ha-mode\":\"all\",\"ha-sync-mode\":\"automatic\"}\t0\r\n\r\n# 3.6.15\r\n$ sudo rabbitmqctl list_policies -q -p /\r\n/\tHA\tall\t.*\t{\"ha-sync-mode\":\"automatic\",\"ha-mode\":\"all\"}\t0\r\n```\r\n\r\n##### STEPS TO REPRODUCE\r\n\r\n```yaml\r\n- name: ensure all queues have the HA policy\r\n  rabbitmq_policy: name=HA pattern=\".*\"\r\n  args:\r\n    tags:\r\n      \"ha-mode\": \"all\"\r\n      \"ha-sync-mode\": \"automatic\"\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n\r\nThe policy to be set\r\n\r\n##### ACTUAL RESULTS\r\n\r\nThe policy is not set\r\n\r\n```\r\nTASK [rabbitmq : ensure all queues have the HA policy] **********************************************************************************************************************\r\nfatal: [vagrant-rabbitmq]: FAILED! => {\"changed\": false, \"module_stderr\": \"Shared connection to 127.0.0.1 closed.\\r\\n\", \"module_stdout\": \"\\r\\nTraceback (most recent call last):\\r\\n  File \\\"/tmp/ansible_lrsCKe/ansible_module_rabbitmq_policy.py\\\", line 172, in <module>\\r\\n    main()\\r\\n  File \\\"/tmp/ansible_lrsCKe/ansible_module_rabbitmq_policy.py\\\", line 159, in main\\r\\n    if rabbitmq_policy.list():\\r\\n  File \\\"/tmp/ansible_lrsCKe/ansible_module_rabbitmq_policy.py\\\", line 116, in list\\r\\n    policy_name = policy.split('\\\\t')[1]\\r\\nIndexError: list index out of range\\r\\n\", \"msg\": \"MODULE FAILURE\", \"rc\": 0}\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35094/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "mhalano": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35092", "title": "Wrong default group for Scaleway dynamic inventory script", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n\r\n##### COMPONENT NAME\r\nscaleway.py\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/marcos/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python2.7/dist-packages/ansible-2.5.0-py2.7.egg/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.14 (default, Sep 23 2017, 22:06:14) [GCC 7.2.0]\r\n```\r\n\r\n##### CONFIGURATION\r\nNo need.\r\n\r\n##### OS / ENVIRONMENT\r\nN/A\r\n\r\n##### SUMMARY\r\nThe Scaleway dynamic inventory script returns information about VMs on Scaleway. The default group for all Scaleway machines is called 'all', but Ansible itself has this group for all machines, so may be could occur superposition. Probably would be a better idea to do the same as ec2.py script, which have a group called 'ec2' for all machines from AWS EC2, creating a \"scaleway\" group.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35092/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "gundalow": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35090", "title": "REGRESSION: ios_facts: return type changed from string to list (stacked switches)", "body": "##### ISSUE TYPE\r\n - Bug report\r\n\r\n##### COMPONENT NAME\r\nios_facts\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n2.5.0\r\n```\r\n\r\n##### SUMMARY\r\nhttps://github.com/ansible/ansible/pull/33714 introduced a change to return details of the stacked switches. This is definitely useful data to return, though we've changed the format of the data returned\r\n\r\nThis needs changing, so that:\r\n* `ansible_net_model` and `ansible_net_serialnum` need changing back to be strings, representing the main system, as they were in Ansible 2.4\r\n* New facts should be created for the stacks. These will need adding to the `RETURN` documentation block in the module\r\n\r\nI'm not sure if there should be a dict for stacked that contains elements for each stacked switch, or something else\r\n\r\nPR which introduced this issue: https://github.com/ansible/ansible/pull/33714\r\n\r\nSee https://github.com/ansible/ansible/issues/34768 for the discussion that lead to this bug being raised.\r\n\r\n*NOTE* when fixing this issue we need to ensure that **ios-xe** works as per the original issue in https://github.com/ansible/ansible/issues/34768#issuecomment-358787000", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35090/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/35087", "title": "Test cases for `*_facts`: examples of show (version,running-facts,interfaces)", "body": "##### ISSUE TYPE\r\n - Feature Idea\r\n\r\n##### COMPONENT NAME\r\nios_facts\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n2.5.0\r\n```\r\n\r\n##### SUMMARY\r\nMost of the `*_facts` modules parse the output of `show` commands such as `show version` via regex to populate the various facts.\r\n\r\nWe've seen the data returned can vary depending on the network OS. For example you may get \r\n\r\n`\"ansible_net_model\": null` on some IOS-XE devices.\r\n\r\nMay be worth adding some unit tests that work though a set of sample outputs and check for the correct facts are returned:\r\n\r\n- [ ] Add unit test framework\r\n- [ ] Add in test strings from machines running in RDU lab & RDO Cloud\r\n- [ ] Document on how to gather these strings (what commands to run, what to redact, where to put results & version info)\r\n- [ ] Request extra test strings via community. Possibly the platform specific channels on NTC would be a good source\r\n\r\nSee https://github.com/ansible/ansible/issues/34768 for the discussion that lead to this", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35087/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/34697", "title": "Document module_utils.(eos, nxos) - Support use_proxy argument", "body": "##### ISSUE TYPE\r\n - Documentation Report\r\n\r\n##### COMPONENT NAME\r\neos_\r\nnxos_\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n2.5.0\r\n```\r\n\r\n##### SUMMARY\r\nhttps://github.com/ansible/ansible/pull/30813 adds support from http proxy. \r\n\r\n* Needs adding to http://docs.ansible.com/ansible/devel/network_debug_troubleshooting.html#proxy-issues\r\n* Needs highlighting on CHANGELOG", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34697/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/7228755f00cd45dda564c0de0bbbc55421fe0377", "message": "infoblox (#35179)\n\nEven though this module belongs in net_tools it will be managed by the\nnetwork team."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/9a32f5c88964054c6f2cb042658b1bf0b4e88f18", "message": "Add missing extends_documentation_fragment (#35013)\n\nNXOS modules need more work, though that will all be in\nmodule_docs_fragments/nxos.py"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/db61f8f9673bb03a34ff55e3d8d31b7225c6f47d", "message": "Clarify which ping module to use (#34935)\n\n* Clarify which ping module to use\r\n\r\nEnsure each of the ping modules link to each other\r\n\r\nping - Requires Python on remote-node\r\nnxos_ping - Only on Cisco NXOS\r\nios_ping - Only on Cisco IOS\r\nnet_ping - For network devices\r\nwin_ping - only for Windows"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/195beebcb4d25eeb32dfe251cb4993a99e865982", "message": "Module DOCUMENTATION should match argspec (#34895)\n\n* Module DOCUMENTATION should match argspec\r\n\r\nLarge update of many modules so that DOCUMENTATION option name and\r\naliases match those defined in the argspec.\r\n\r\nIssues identified by https://github.com/ansible/ansible/pull/34809\r\n\r\nIn addition to many typos and missing aliases, the following notable\r\nchanges were made:\r\n\r\n* Create `module_docs_fragments/url.py` for `url_argument_spec`\r\n* `dellos*_command` shouldn't have ever had `waitfor` (was incorrectly copied)\r\n* `ce_aaa_server_host.py` `s/raduis_server_type/radius_server_type/g`\r\n* `Junos_lldp` enable should be part of `state`."}], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34100", "title": "Module deprecation: docs, scheme and tests", "body": "##### SUMMARY\r\n* Enforce deprecation structure\r\n* Document that structure\r\n* Ensure that all modules starting with `_` have a `deprecation:` block\r\n* Ensure `deprecation:` block is only used on modules that start with `_`\r\n* `version` A string which represents the version of Ansible the deprecation starts, i.e. ``version: \"2.5\"``. Not the version this will be removed in. **<-- NOTE**\r\n\r\n**Example of `foo.py` with `deprecation:`**\r\n```\r\nERROR: lib/ansible/modules/network/nxos/foo.py:0:0: E305 DOCUMENTATION.module: not a valid value for dictionary value @ data['module']. Got 'nxos_ip_interface'\r\n```\r\n\r\n**Example of `_foo.py` without `deprecation:`**\r\n```\r\nERROR: lib/ansible/modules/network/nxos/_foo.py:0:0: E305 DOCUMENTATION.deprecated: required key not provided @ data['deprecated']. Got None\r\nERROR: lib/ansible/modules/network/nxos/_foo.py:0:0: E305 DOCUMENTATION.module: not a valid value for dictionary value @ data['module']. Got 'nxos_ip_interface'\r\nERROR: lib/ansible/modules/network/nxos/_foo.py:0:0: E318 Module deprecated, but DOCUMENTATION.deprecated is missing\r\n```\r\n\r\n\r\n**ansible-doc**\r\n`ansible-doc kubernetes`\r\n\r\n```\r\nDEPRECATED: \r\n\r\n        Reason: This module used the oc command line tool, where as M(k8s_raw) goes over the REST API.\r\n        Deprecated as of: Ansible 2.5\r\n        Alternatives: Use M(k8s_raw) instead.\r\n```\r\n\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n - Docs Pull Request\r\n\r\n\r\n  ", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "zakabluk": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35089", "title": "Failed to set permissions on temp files with pipelining", "body": "Hi! I have same problem as in #31125 \r\n##### ISSUE TYPE\r\n\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\nssh\r\n\r\n##### ANSIBLE VERSION\r\nansible 2.4.2.0\r\n```\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/usr/lib/python2.7/site-packages/epam_ansible']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Aug  4 2017, 00:39:18) [GCC 4.8.5 20150623 (Red Hat 4.8.5-16)]\r\n```\r\n\r\n##### CONFIGURATION\r\n\r\n##### OS / ENVIRONMENT\r\nall servers: CentOS Linux release 7.4.1708  @(Core)\r\n\r\n##### SUMMARY\r\nFailed to set permissions on the temporary files Ansible ...\r\n\r\n##### STEPS TO REPRODUCE\r\nBasically: default ansible configuration, test without pipelining=True. \r\n\r\n##### EXPECTED RESULTS\r\nplaybook will successful.\r\n\r\n##### ACTUAL RESULTS\r\nWhen I run playbook without option pipelining=True, I have error\r\n```\r\nfatal: [10.6.220.125]: FAILED! => {\"msg\": \"Failed to set permissions on the temporary files Ansible needs to create when becoming an unprivileged user (rc: 1, err: chown: changing ownership of \u2018/tmp/ansible-tmp-1516305715.98-191373091817149/\u2019: Operation not permit ted\\nchown: changing ownership of \u2018/tmp/ansible-tmp-1516305715.98-191373091817149/command.py\u2019: Operation not permitted\\n}). For info rmation on working around this, see https://docs.ansible.com/ansible/become.html#becoming-an-unprivileged-user\"}\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35089/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "soeb": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35086", "title": "clear_host_errors causes unexpected behaviour with unreachable hosts", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\nmeta\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Aug  4 2017, 00:39:18) [GCC 4.8.5 20150623 (Red Hat 4.8.5-16)]\r\n```\r\n\r\n##### CONFIGURATION\r\nCACHE_PLUGIN(/etc/ansible/ansible.cfg) = redis\r\nCACHE_PLUGIN_TIMEOUT(/etc/ansible/ansible.cfg) = 86400\r\nDEFAULT_HOST_LIST(/etc/ansible/ansible.cfg) = [u'/root/scripts/get_inventory.py']\r\nPERSISTENT_CONNECT_TIMEOUT(/etc/ansible/ansible.cfg) = 30\r\nRETRY_FILES_SAVE_PATH(/etc/ansible/ansible.cfg) = /root/.ansible-retry\r\n\r\n##### OS / ENVIRONMENT\r\nN/A\r\n\r\n##### SUMMARY\r\nI'm using Ansible to generate configuration files for physical nodes, not all of which might be present when the script runs. Using `meta: clear_host_errors` I want to create the configuration file regardless, however this appears to misbehave the more hosts are present (running against a group of ~50).\r\n\r\n##### STEPS TO REPRODUCE\r\nThis playbook demonstrates the unexpected behaviour.\r\n\r\n```yaml\r\n- hosts: all\r\n  tasks:\r\n    - set_fact:\r\n        was_accessible: \"up\"\r\n\r\n    - meta: clear_host_errors\r\n\r\n    - debug:\r\n        msg: \"Hello\"\r\n\r\n    - when:\r\n        - was_accessible is defined\r\n      debug:\r\n        msg: \"Hello again, I am up.\"\r\n```\r\n\r\n##### EXPECTED RESULTS\r\nThe fact `was_accessible` should only be set for hosts that were reachable. The first debug message should have appeared for every host, and the second message only for running hosts.\r\n\r\nAdmittedly, this might be misuse of clear_host_errors, but this behaviour still seems highly suspect.\r\n\r\n##### ACTUAL RESULTS\r\nTasks appear to move between each other, and the messages appear explicitly for the nodes that they shouldn't. Additionally one of the tasks runs for the exact nodes it shouldn't.\r\n\r\n```\r\nPLAY [all] ****************************************************************************************************\r\n\r\nTASK [Gathering Facts] **********************************************************************************************************\r\nUsing module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py\r\nfatal: [node1]: UNREACHABLE! => {\"changed\": false, \"msg\": \"Failed to connect to the host via ssh: ssh: connect to host node1.domain.org port 22: Connection timed out\\r\\n\", \"unreachable\": true}\r\nfatal: [node2]: UNREACHABLE! => {\"changed\": false, \"msg\": \"Failed to connect to the host via ssh: ssh: connect to host node2.domain.org port 22: Connection timed out\\r\\n\", \"unreachable\": true}\r\nfatal: [node3]: UNREACHABLE! => {\"changed\": false, \"msg\": \"Failed to connect to the host via ssh: ssh: connect to host node3.domain.org port 22: Connection timed out\\r\\n\", \"unreachable\": true}\r\nok: [node4]\r\nok: [node5]\r\nok: [node6]\r\nMETA: ran handlers\r\n\r\nTASK [set_fact] *****************************************************************************************************************\r\ntask path: debug.yml:4\r\nok: [node4] => {\r\n    \"ansible_facts\": {\r\n        \"was_accessible\": \"up\"\r\n    },\r\n    \"changed\": false\r\n}\r\nok: [node5] => {\r\n    \"ansible_facts\": {\r\n        \"was_accessible\": \"up\"\r\n    },\r\n    \"changed\": false\r\n}\r\nok: [node6] => {\r\n    \"ansible_facts\": {\r\n        \"was_accessible\": \"up\"\r\n    },\r\n    \"changed\": false\r\n}\r\nMETA: cleared host errors\r\nMETA: ran handlers\r\n\r\nTASK [set_fact] *****************************************************************************************************************\r\ntask path: debug.yml:4\r\nok: [node1] => {\r\n    \"ansible_facts\": {\r\n        \"was_accessible\": \"up\"\r\n    },\r\n    \"changed\": false\r\n}\r\nok: [node2] => {\r\n    \"ansible_facts\": {\r\n        \"was_accessible\": \"up\"\r\n    },\r\n    \"changed\": false\r\n}\r\nok: [node3] => {\r\n    \"ansible_facts\": {\r\n        \"was_accessible\": \"up\"\r\n    },\r\n    \"changed\": false\r\n}\r\nok: [node4] => {\r\n    \"msg\": \"Hello.\"\r\n}\r\nok: [node5] => {\r\n    \"msg\": \"Hello.\"\r\n}\r\nok: [node6] => {\r\n    \"msg\": \"Hello.\"\r\n}\r\nMETA: cleared host errors\r\n\r\nTASK [debug] ********************************************************************************************************************\r\ntask path: debug.yml:9\r\nMETA: noop\r\nMETA: noop\r\nMETA: noop\r\nok: [node1] => {\r\n    \"msg\": \"Hello.\"\r\n}\r\nok: [node2] => {\r\n    \"msg\": \"Hello.\"\r\n}\r\nok: [node3] => {\r\n    \"msg\": \"Hello.\"\r\n}\r\n\r\nTASK [debug] ********************************************************************************************************************\r\ntask path: debug.yml:12\r\nMETA: noop\r\nMETA: noop\r\nMETA: noop\r\nok: [node1] => {\r\n    \"msg\": \"Hello again\"\r\n}\r\nok: [node2] => {\r\n    \"msg\": \"Hello again\"\r\n}\r\nok: [node3] => {\r\n    \"msg\": \"Hello again\"\r\n}\r\nMETA: ran handlers\r\nMETA: ran handlers\r\n\r\nPLAY RECAP **********************************************************************************************************************\r\nnode1                    : ok=3    changed=0    unreachable=1    failed=0\r\nnode2                    : ok=3    changed=0    unreachable=1    failed=0\r\nnode3                    : ok=3    changed=0    unreachable=1    failed=0\r\nnode4                   : ok=3    changed=0    unreachable=0    failed=0\r\nnode5                   : ok=3    changed=0    unreachable=0    failed=0\r\nnode6                   : ok=3    changed=0    unreachable=0    failed=0\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35086/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "moon-musick": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35085", "title": "Setup module - ansible_service_mgr detection errors", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n\r\nBug Report\r\n\r\n##### COMPONENT NAME\r\n\r\nSetup module.\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n  config file = /home/lucas/ansible/ansible.cfg\r\n  configured module search path = [u'/home/lucas/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.12 (default, Nov 20 2017, 18:23:56) [GCC 5.4.0 20160609]\r\n```\r\n\r\n##### CONFIGURATION\r\n\r\n```\r\n DEFAULT_HOST_LIST(/home/lucas/ansible/ansible.cfg) = [u'/home/lucas/ansible/hosts']\r\n DEFAULT_REMOTE_USER(/home/lucas/ansible/ansible.cfg) = ansible\r\n DEFAULT_VAULT_PASSWORD_FILE(/home/lucas/ansible/ansible.cfg) = /home/lucas/.vault\r\n RETRY_FILES_ENABLED(/home/lucas/ansible/ansible.cfg) = False\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n\r\n\"Controller\" OS is Ubuntu 16.04 amd64\r\n\"Target\" OS is Ubuntu 14.04 amd64\r\n\r\n##### SUMMARY\r\n\r\nIt seems the `setup` module detects `ansible_service_mgr` incorrectly (and with major inconsistencies between subsequent runs) in an Ubuntu 14.04 (upstart) host with `snapd` installed (which in turn installs `systemd` as a dependency).\r\n\r\n##### STEPS TO REPRODUCE\r\n\r\n1. Run a minimal service task against a default `ubuntu/trusty64` Vagrant box.\r\n\r\n```\r\nVagrant.configure(\"2\") do |config|\r\n  config.vm.box = \"ubuntu/trusty64\"\r\n  config.vm.provision \"ansible\" do |ansible|\r\n    ansible.verbose = \"v\"\r\n    ansible.playbook = \"playbook.yml\"\r\n  end\r\nend\r\n```\r\n\r\n```\r\n- name: ensure rsyslog is running\r\n  hosts: all\r\n  become: yes\r\n  become_user: root\r\n  tasks:\r\n    - name: ensure rsyslog is running\r\n      service:\r\n        name: rsyslog\r\n        state: started\r\n        enabled: yes\r\n```\r\n\r\nWorks fine.\r\n\r\n2. Install `snapd` in VM\r\n\r\n`apt install snapd`\r\n\r\n3. Run the same playbook as before against that VM with `vagrant provision`\r\n\r\n---\r\n\r\n1. Install Ansible from an official PPA in the Vagrant VM (the same Ubuntu 14.04 with `snapd` already installed).\r\n\r\n```\r\napt-add-repository ppa:ansible/ansible\r\napt update\r\napt install -y ansible\r\n```\r\n\r\n2. Run `ansible -m setup -a filter=ansible_service_mgr localhost`.\r\n\r\n3. Run `ansible -m setup localhost | grep ansible_service_mgr` and compare results.\r\n\r\n##### EXPECTED RESULTS\r\n\r\n```\r\n$ ansible -m setup -a filter=ansible_service_mgr target_host\r\ntarget_host | SUCCESS => {\r\n    \"ansible_facts\": {\r\n        \"ansible_service_mgr\": \"service\"\r\n    },\r\n    \"changed\": false\r\n}\r\n$ ansible -m setup target_host | grep ansible_service_mgr\r\n        \"ansible_service_mgr\": \"service\",\r\n```\r\n\r\nFor the playbook run:\r\n\r\n```\r\nTASK [ensure rsyslog is running] ***********************************************\r\nok: [default] => {\"changed\": false, \"enabled\": true, \"name\": \"rsyslog\", \"state\": \"started\"}\r\n```\r\n\r\n##### ACTUAL RESULTS\r\n\r\n```\r\n$ ansible -m setup -a filter=ansible_service_mgr target_host\r\ntarget_host | SUCCESS => {\r\n    \"ansible_facts\": {\r\n        \"ansible_service_mgr\": \"service\"\r\n    },\r\n    \"changed\": false\r\n}\r\n$ ansible -m setup target_host | grep ansible_service_mgr\r\n        \"ansible_service_mgr\": \"systemd\",\r\n```\r\n\r\nFor the playbook run:\r\n\r\n```\r\nTASK [ensure rsyslog is running] ***********************************************\r\nfatal: [default]: FAILED! => {\"changed\": false, \"msg\": \"Error loading unit file 'rsyslog': org.freedesktop.DBus.Error.FileNotFound \\\"No such file or directory\\\"\"}\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35085/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "vinzenz": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35084", "title": "net_interface: Undocumented restriction on local connections", "body": "##### ISSUE TYPE\r\n - Documentation Report\r\n\r\n##### COMPONENT NAME\r\nnet_interface\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.2.0                                                                                                                        \u2502                                                                                                                                      \r\n  config file = /home/vfeenstr/talk-vms/source-system/ansible.cfg                                                                      \u2502                                                                                                                                      \r\n  configured module search path = [u'/home/vfeenstr/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']                  \u2502                                                                                                                                      \r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible                                                            \u2502                                                                                                                                      \r\n  executable location = /usr/bin/ansible                                                                                               \u2502                                                                                                                                      \r\n  python version = 2.7.13 (default, May 31 2017, 17:58:17) [GCC 7.1.1 20170503 (Red Hat 7.1.1-1)]  \r\n```\r\n\r\n##### CONFIGURATION\r\n```yaml\r\n- name: Ensure eth1 is up\r\n  net_interface:\r\n    name: eth1\r\n    enabled: True\r\n    state: up\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\nCentOS 7 \r\n\r\n##### SUMMARY\r\nThe command failed over SSH with this:\r\n\r\nfatal: [default]: FAILED! => {\"changed\": false, \"msg\": \"invalid connection specified, expected connection=local, got ssh\"}\r\n\r\nHowever there's no mentioning of this limitation in the documentation (At least I could not see it) of the net_interface module\r\n\r\n##### STEPS TO REPRODUCE\r\nSee above\r\n\r\n##### EXPECTED RESULTS\r\nDocumentation updated for this restriction of the connection having to be local\r\n\r\n##### ACTUAL RESULTS\r\nUndocumented restriction (connection has to be local only)", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35084/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "bjornicus": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35070", "title": "docker_container does not recreate the container if dns_servers is removed", "body": "\r\n##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\ndocker_container\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n$ ansible --version\r\nansible 2.4.1.0\r\n  config file = /home/ubuntu/.ansible.cfg\r\n  configured module search path = [u'/home/ubuntu/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.12 (default, Nov 20 2017, 18:23:56) [GCC 5.4.0 20160609]\r\n```\r\n\r\n##### CONFIGURATION\r\nANSIBLE_SSH_ARGS(/home/ubuntu/.ansible.cfg) = -o StrictHostKeyChecking=no\r\nDEFAULT_REMOTE_USER(/home/ubuntu/.ansible.cfg) = hoylu\r\nDEFAULT_ROLES_PATH(/home/ubuntu/.ansible.cfg) = [u'/home/ubuntu/ansible-roles']\r\nDEFAULT_SCP_IF_SSH(/home/ubuntu/.ansible.cfg) = True\r\nDEFAULT_TRANSPORT(/home/ubuntu/.ansible.cfg) = ssh\r\n\r\n##### OS / ENVIRONMENT\r\nNA\r\n\r\n##### SUMMARY\r\nwhen a container is started with the 'dns_servers' parameter set, and then the parameter is . removed and the task is run again, one would expect that the container gets re-created with the Docker Dns parameter set to null.\r\n\r\n##### STEPS TO REPRODUCE\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n- name: \"test docker containerr recreate with server_dns\"\r\n  hosts:  localhost\r\n  tasks:\r\n    - name: start the test container\r\n      docker_container:\r\n        name: tester\r\n        image: redis\r\n    - name: this should restart the test container\r\n      docker_container:\r\n        name: tester\r\n        image: redis\r\n        dns_servers: \"8.8.8.8\"\r\n    - name: this should also restart the test container\r\n      docker_container:\r\n        name: tester\r\n        image: redis\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\nExpected a `changed` on the task 'this should also restart the container'\r\n\r\n##### ACTUAL RESULTS\r\nGot an `ok` on the task. The container was not restarted despite the configuration being different. Running it in -vvvv mode shows `module_args:dns_servers` set to null, but that is not applied to the container.\r\n\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\nPLAY [test docker containerr recreate with server_dns] ********************************************************************************************************\r\n\r\nTASK [Gathering Facts] ****************************************************************************************************************************************\r\nok: [localhost]\r\n\r\nTASK [start the test container] *******************************************************************************************************************************\r\nchanged: [localhost]\r\n\r\nTASK [this should restart the test container] *****************************************************************************************************************\r\nchanged: [localhost]\r\n\r\nTASK [this should also restart the test container] ************************************************************************************************************\r\nok: [localhost]\r\n\r\nPLAY RECAP ****************************************************************************************************************************************************\r\nlocalhost                  : ok=4    changed=2    unreachable=0    failed=0\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35070/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "grybak-arista": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35069", "title": "eos_config with consecutive second-level indents is no longer idempotent", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!---\r\nName of the module, plugin, task or feature\r\nDo not include extra details here, e.g. \"vyos_command\" not \"the network module vyos_command\" or the full path\r\n-->\r\neos_config\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.3.0 (detached HEAD e2e64ed49c) last updated 2018/01/18 11:01:16 (GMT -600)\r\n  config file = None\r\n  configured module search path = [u'/Users/grybak/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/grybak/working/virtualenvs/jumptrading/ansible/lib/ansible\r\n  executable location = /Users/grybak/working/virtualenvs/jumptrading/ansible/bin/ansible\r\n  python version = 2.7.12 (default, Oct 14 2016, 09:24:15) [GCC 4.2.1 Compatible Apple LLVM 7.0.2 (clang-700.1.81)]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\nIf using Ansible 2.4 or above, paste the results of \"ansible-config dump --only-changed\"\r\nOtherwise, mention any settings you have changed/added/removed in ansible.cfg\r\n(or using the ANSIBLE_* environment variables).\r\n-->\r\n$ ansible-config dump --only-changed\r\n-- no output --\r\n\r\n##### OS / ENVIRONMENT\r\n<!---\r\nMention the OS you are running Ansible from, and the OS you are\r\nmanaging, or say \"N/A\" for anything that is not platform-specific.\r\nAlso mention the specific version of what you are trying to control,\r\ne.g. if this is a network bug the version of firmware on the network device.\r\n-->\r\nAnsible on macOS/Linux\r\nManaging Arista EOS\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly -->\r\nWhen using eos_config with a src file or template that contains consecutive second level indents, the operation no longer is idempotent and the configuration is applied on every run.\r\n\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\nUse a source file, issue.txt, containing the following configuration.\r\n```\r\npolicy-map type control-plane copp-system-policy\r\n   class copp-system-default\r\n      shape pps 1111\r\n      bandwidth pps 2222\r\n```\r\nRun a simple playbook with the task below. The playbook completes successfully and the settings on the switch are changed correctly, but future runs of the same playbook still report 'changed=1'.\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n- hosts: my_dut\r\n  gather_facts: no\r\n  connection: local\r\n\r\n  tasks:\r\n    - name: \"Change multiple second level indent items\"\r\n      eos_config:\r\n        src: issue.txt\r\n        provider:\r\n          host: \"{{ inventory_hostname }}\"\r\n          username: admin\r\n          password: \"{{ admin_passwd }}\"\r\n          use_ssl: yes\r\n          authorize: yes\r\n          transport: cli\r\n          # also with eapi transport as below\r\n          # transport: eapi\r\n          # validate_certs: false\r\n```\r\nOther configurations with consecutive second-level indents also produce the same issue, e.g.\r\n```\r\ninterface Ethernet5\r\n   switchport access vlan 4\r\n   qos trust dscp\r\n   uc-tx-queue 4\r\n      no priority\r\n      bandwidth percent 100\r\n   spanning-tree portfast\r\n```\r\nBut configurations with only a single second-level indent (or replicating the first indent line before each second-level line) do not cause the issue, e.g.\r\n```\r\npolicy-map type control-plane copp-system-policy\r\n   class copp-system-default\r\n      shape pps 1111\r\n```\r\nor\r\n```\r\npolicy-map type control-plane copp-system-policy\r\n   class copp-system-default\r\n      shape pps 1111\r\n   class copp-system-default\r\n      bandwidth pps 2222\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- What did you expect to happen when running the steps above? -->\r\nFirst run, the config is changed appropriately.\r\nSubsequent runs, no changes are reported.\r\n\r\n##### ACTUAL RESULTS\r\n<!--- What actually happened? If possible run with extra verbosity (-vvvv) -->\r\nFirst run, the config is changed appropriately.\r\nSubsequent runs, the playbook consistently reports 'changed=1' even though the configuration already exists on the switch.\r\n\r\nI believe the issue is that in several places within the module, the indent level is incorrectly set to '2' instead of the Arista EOS value of '3'. I have found three instances of the error: \r\n- in the first line of the 'get_candidate' function (line 281)\r\n- in the last line of the get_running_config function (line 300)\r\n- near the top of the 'if module.params['backup']...' block of the main function (line 363)\r\n\r\nI think what is happening is that because the indent is set to 2, the desired second-level (at 3 spaces each) indents are interpreted as third-level (2 spaces each) indents, and when there are consecutive second-level indents, the first line gets interpreted as the parent of the subsequent config lines. So the interpretation is looking like\r\n```\r\npolicy-map type control-plane copp-system-policy\r\n  class copp-system-default\r\n    shape pps 1111\r\n      bandwidth pps 2222\r\n```\r\nSince 'bandwidth pps' is never a child of 'shape pps' in the EOS config, the module assumes that we need to re-apply the configuration each and every time.\r\n\r\nWhen I changed the three instances of 'indent=2' to 'indent=3' the issue is resolved in my testing.\r\n\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\nansible-playbook 2.4.3.0 (detached HEAD e2e64ed49c) last updated 2018/01/18 11:01:16 (GMT -600)\r\n  config file = None\r\n  configured module search path = [u'/Users/grybak/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/grybak/working/virtualenvs/jumptrading/ansible/lib/ansible\r\n  executable location = /Users/grybak/working/virtualenvs/jumptrading/ansible/bin/ansible-playbook\r\n  python version = 2.7.12 (default, Oct 14 2016, 09:24:15) [GCC 4.2.1 Compatible Apple LLVM 7.0.2 (clang-700.1.81)]\r\nNo config file found; using defaults\r\nParsed /Users/grybak/working/virtualenvs/jumptrading/jumptrading/hosts inventory source with ini plugin\r\n\r\nPLAYBOOK: playbook.yml *******************************************************************\r\n1 plays in playbook.yml\r\n\r\nPLAY [one_switch] ************************************************************************\r\nMETA: ran handlers\r\n\r\nTASK [Change multiple second level indent items] ******************************************\r\ntask path: /Users/grybak/working/virtualenvs/jumptrading/jumptrading/playbook.yml:58\r\nUsing module file /Users/grybak/working/virtualenvs/jumptrading/ansible/lib/ansible/modules/network/eos/eos_config.py\r\n<dut> ESTABLISH LOCAL CONNECTION FOR USER: grybak\r\n<dut> EXEC /bin/sh -c 'echo ~ && sleep 0'\r\n<dut> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /Users/grybak/.ansible/tmp/ansible-tmp-1516319350.56-130804047496761 `\" && echo ansible-tmp-1516319350.56-130804047496761=\"` echo /Users/grybak/.ansible/tmp/ansible-tmp-1516319350.56-130804047496761 `\" ) && sleep 0'\r\n<dut> PUT /var/folders/b7/n3q7cy3x35q5nyd13s82g4340000gp/T/tmph84N3V TO /Users/grybak/.ansible/tmp/ansible-tmp-1516319350.56-130804047496761/eos_config.py\r\n<dut> EXEC /bin/sh -c 'chmod u+x /Users/grybak/.ansible/tmp/ansible-tmp-1516319350.56-130804047496761/ /Users/grybak/.ansible/tmp/ansible-tmp-1516319350.56-130804047496761/eos_config.py && sleep 0'\r\n<dut> EXEC /bin/sh -c '/usr/bin/python /Users/grybak/.ansible/tmp/ansible-tmp-1516319350.56-130804047496761/eos_config.py; rm -rf \"/Users/grybak/.ansible/tmp/ansible-tmp-1516319350.56-130804047496761/\" > /dev/null 2>&1 && sleep 0'\r\nchanged: [dut] => {\r\n    \"changed\": true,\r\n    \"commands\": [\r\n        \"policy-map type control-plane copp-system-policy\",\r\n        \"class copp-system-default\",\r\n        \"shape pps 1111\",\r\n        \"bandwidth pps 2222\"\r\n    ],\r\n    \"diff\": {\r\n        \"prepared\": \"\\n\"\r\n    },\r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"after\": null,\r\n            \"auth_pass\": null,\r\n            \"authorize\": true,\r\n            \"backup\": false,\r\n            \"before\": null,\r\n            \"defaults\": false,\r\n            \"diff_against\": \"session\",\r\n            \"diff_ignore_lines\": null,\r\n            \"force\": false,\r\n            \"host\": \"dut\",\r\n            \"intended_config\": null,\r\n            \"lines\": null,\r\n            \"match\": \"line\",\r\n            \"parents\": null,\r\n            \"password\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\",\r\n            \"port\": 443,\r\n            \"provider\": {\r\n                \"auth_pass\": null,\r\n                \"authorize\": true,\r\n                \"host\": \"dut\",\r\n                \"password\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\",\r\n                \"port\": 443,\r\n                \"ssh_keyfile\": null,\r\n                \"timeout\": 10,\r\n                \"transport\": \"eapi\",\r\n                \"use_ssl\": true,\r\n                \"username\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\",\r\n                \"validate_certs\": false\r\n            },\r\n            \"replace\": \"line\",\r\n            \"running_config\": null,\r\n            \"save\": false,\r\n            \"save_when\": \"never\",\r\n            \"src\": \"policy-map type control-plane copp-system-policy\\n   class copp-system-default\\n      shape pps 1111\\n      bandwidth pps 2222\\n\",\r\n            \"ssh_keyfile\": null,\r\n            \"timeout\": 10,\r\n            \"transport\": \"cli\",\r\n            \"url_password\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\",\r\n            \"url_username\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\",\r\n            \"use_ssl\": true,\r\n            \"username\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\",\r\n            \"validate_certs\": false\r\n        }\r\n    },\r\n    \"session\": \"ansible_1516319351\",\r\n    \"updates\": [\r\n        \"policy-map type control-plane copp-system-policy\",\r\n        \"class copp-system-default\",\r\n        \"shape pps 1111\",\r\n        \"bandwidth pps 2222\"\r\n    ]\r\n}\r\nMETA: ran handlers\r\nMETA: ran handlers\r\n\r\nPLAY RECAP *******************************************************************************\r\ndut                        : ok=1    changed=1    unreachable=0    failed=0\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35069/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "tdtrask": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35062", "title": "apk dependencies falsely marked as changed", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\napk.py\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.1.0\r\n  config file = None\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.14 (default, Dec 14 2017, 16:23:06) [GCC 6.4.0]\r\n```\r\n\r\n##### CONFIGURATION\r\n\r\n##### OS / ENVIRONMENT\r\nAlpine Linux 3.7.0\r\n\r\n##### SUMMARY\r\nIf you attempt to remove a package that is installed as a dependency, it will report that it was successfully changed although the package is still installed. Running the same action again produces the same results.\r\n\r\n##### STEPS TO REPRODUCE\r\n1) install awall (with lua5.2 dependency), 2) uninstall lua5.2, 3) uninstall lua5.2 again.\r\n\r\n```yaml\r\n---\r\n- name: test apk module\r\n  hosts: localhost\r\n  gather_facts: false\r\n\r\n  tasks:\r\n    - name: Add awall (with lua5.2 dependency)\r\n      apk:\r\n        name: awall\r\n        update_cache: yes\r\n\r\n    - name: Remove lua5.2\r\n      apk:\r\n        name: lua5.2\r\n        state: absent\r\n\r\n    - name: Remove lua5.2 a second time\r\n      apk:\r\n        name: lua5.2\r\n        state: absent\r\n```\r\n\r\n##### EXPECTED RESULTS\r\nSteps 2 and 3 should either report no change or a failure.\r\n\r\n##### ACTUAL RESULTS\r\nSteps 2 and 3 both report a change even though nothing changed and the package is still installed.\r\n\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\nlocalhost:~# ansible-playbook -i inventory apkdependencies2.yaml -vv\r\nansible-playbook 2.4.1.0\r\n  config file = None\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible-playbook\r\n  python version = 2.7.14 (default, Dec 14 2017, 16:23:06) [GCC 6.4.0]\r\nNo config file found; using defaults\r\n [WARNING]: Could not match supplied host pattern, ignoring: all\r\n\r\n [WARNING]: provided hosts list is empty, only localhost is available\r\n\r\n\r\nPLAYBOOK: apkdependencies2.yaml **************************************************************************************************************************************************************************************************************\r\n1 plays in apkdependencies2.yaml\r\n\r\nPLAY [test apk module] ***********************************************************************************************************************************************************************************************************************\r\nMETA: ran handlers\r\n\r\nTASK [Add awall (with lua5.2 dependency)] ****************************************************************************************************************************************************************************************************\r\ntask path: /root/apkdependencies2.yaml:7\r\nchanged: [localhost] => {\"changed\": true, \"failed\": false, \"msg\": \"installed awall package(s)\", \"packages\": [\"libxml2\", \"bind-libs\", \"bind-tools\", \"libmnl\", \"jansson\", \"libnftnl-libs\", \"iptables\", \"ip6tables\", \"ipset\", \"lua5.2\", \"lua5.2-alt-getopt\", \"lua5.2-cjson\", \"lua5.2-pc\", \"lua5.2-posix\", \"lua5.2-stringy\", \"xtables-addons\", \"awall\"], \"stderr\": \"\", \"stderr_lines\": [], \"stdout\": \"(1/17) Installing libxml2 (2.9.7-r0)\\n(2/17) Installing bind-libs (9.11.2-r1)\\n(3/17) Installing bind-tools (9.11.2-r1)\\n(4/17) Installing libmnl (1.0.4-r0)\\n(5/17) Installing jansson (2.10-r0)\\n(6/17) Installing libnftnl-libs (1.0.8-r1)\\n(7/17) Installing iptables (1.6.1-r1)\\n(8/17) Installing ip6tables (1.6.1-r1)\\n(9/17) Installing ipset (6.34-r0)\\n(10/17) Installing lua5.2 (5.2.4-r4)\\n(11/17) Installing lua5.2-alt-getopt (0.7-r8)\\n(12/17) Installing lua5.2-cjson (2.1.0-r7)\\n(13/17) Installing lua5.2-pc (1.0.0-r9)\\n(14/17) Installing lua5.2-posix (33.4.0-r0)\\n(15/17) Installing lua5.2-stringy (0.4.0-r5)\\n(16/17) Installing xtables-addons (2.11-r1)\\n(17/17) Installing awall (1.5.0-r0)\\nExecuting busybox-1.27.2-r7.trigger\\nExecuting awall-1.5.0-r0.trigger\\nOK: 157 MiB in 72 packages\\n\", \"stdout_lines\": [\"(1/17) Installing libxml2 (2.9.7-r0)\", \"(2/17) Installing bind-libs (9.11.2-r1)\", \"(3/17) Installing bind-tools (9.11.2-r1)\", \"(4/17) Installing libmnl (1.0.4-r0)\", \"(5/17) Installing jansson (2.10-r0)\", \"(6/17) Installing libnftnl-libs (1.0.8-r1)\", \"(7/17) Installing iptables (1.6.1-r1)\", \"(8/17) Installing ip6tables (1.6.1-r1)\", \"(9/17) Installing ipset (6.34-r0)\", \"(10/17) Installing lua5.2 (5.2.4-r4)\", \"(11/17) Installing lua5.2-alt-getopt (0.7-r8)\", \"(12/17) Installing lua5.2-cjson (2.1.0-r7)\", \"(13/17) Installing lua5.2-pc (1.0.0-r9)\", \"(14/17) Installing lua5.2-posix (33.4.0-r0)\", \"(15/17) Installing lua5.2-stringy (0.4.0-r5)\", \"(16/17) Installing xtables-addons (2.11-r1)\", \"(17/17) Installing awall (1.5.0-r0)\", \"Executing busybox-1.27.2-r7.trigger\", \"Executing awall-1.5.0-r0.trigger\", \"OK: 157 MiB in 72 packages\"]}\r\n\r\nTASK [Remove lua5.2] *************************************************************************************************************************************************************************************************************************\r\ntask path: /root/apkdependencies2.yaml:12\r\nchanged: [localhost] => {\"changed\": true, \"failed\": false, \"msg\": \"removed lua5.2 package(s)\", \"packages\": [], \"stderr\": \"\", \"stderr_lines\": [], \"stdout\": \"World updated, but the following packages are not removed due to:\\n  lua5.2: awall\\n\\nOK: 157 MiB in 72 packages\\n\", \"stdout_lines\": [\"World updated, but the following packages are not removed due to:\", \"  lua5.2: awall\", \"\", \"OK: 157 MiB in 72 packages\"]}\r\n\r\nTASK [Remove lua5.2 a second time] ***********************************************************************************************************************************************************************************************************\r\ntask path: /root/apkdependencies2.yaml:17\r\nchanged: [localhost] => {\"changed\": true, \"failed\": false, \"msg\": \"removed lua5.2 package(s)\", \"packages\": [], \"stderr\": \"\", \"stderr_lines\": [], \"stdout\": \"World updated, but the following packages are not removed due to:\\n  lua5.2: awall\\n\\nOK: 157 MiB in 72 packages\\n\", \"stdout_lines\": [\"World updated, but the following packages are not removed due to:\", \"  lua5.2: awall\", \"\", \"OK: 157 MiB in 72 packages\"]}\r\nMETA: ran handlers\r\nMETA: ran handlers\r\n\r\nPLAY RECAP ***********************************************************************************************************************************************************************************************************************************\r\nlocalhost                  : ok=3    changed=3    unreachable=0    failed=0   \r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35062/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/676ce74cbffbf2e4701aaa50f1e0b400b25157e1", "message": "apk: Fix package dependency bugs (#34419)\n\nFixes: #34325, #35062"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "skylerbunny": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35061", "title": "synchronize loses ssh connection params between retries", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\nsynchronize\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.5.0 (devel 0a86287a92) last updated 2018/01/18 13:04:12 (GMT -700)\r\n  config file = None\r\n  configured module search path = [u'/home/prifender/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /opt/ansible/src/ansible/lib/ansible\r\n  executable location = /opt/ansible/bin/ansible\r\n  python version = 2.7.5 (default, Nov  6 2016, 00:28:07) [GCC 4.8.5 20150623 (Red Hat 4.8.5-11)]\r\n```\r\nThis also affects the newest stable 2.4, which is what brought me here in the first place.\r\n\r\n##### CONFIGURATION\r\nNo ansible.cfg used.\r\nANSIBLE_HOST_KEY_CHECKING=False\r\n(Though this happens with or without the above set)\r\n\r\n##### OS / ENVIRONMENT\r\nCentos 7.4-1708 (newest with updates)\r\n\r\n##### SUMMARY\r\nPerforming a synchronize to a remote host, when the ssh control connection to said remote host is interrupted, loses the SSH connection parameters on subsequent attempts.\r\n\r\n##### STEPS TO REPRODUCE\r\nFrom a practical standpoint, imagine the scenario where you are synchronizing a huge file tree across a WAN (slow connection), or have low ssh timeouts (security), or the remote machine might randomly reboot (unstable).\r\n\r\nCreate a huge file to synchronize by a method like ```dd if=/dev/zero of=rm.tar bs=1 count=0 seek=5G```. I'm sure this could also be simulated over a throttled connection; the point is that the synchronize operation has to be interrupted midstream.\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\nhosts:\r\nmyhostname.example.com ansible_host=10.148.180.241\r\n\r\n---\r\n- hosts: myhostname.example.com\r\n  tasks:\r\n  - name: copy docker image tar \"{{ file }}\"\r\n    synchronize:\r\n      src: rm.tar\r\n      dest: /tmp/rm.tar\r\n      partial: yes\r\n      compress: no\r\n    retries: 40\r\n    delay: 2\r\n    register: task_result\r\n    until: task_result.rc == 0\r\n...\r\n```\r\nIn the middle of the file transfer, I intentionally kill all sshd connections on the remote host. I do this to simulate either a low connection timeout or a bad network connection, or anything of that sort. Think ```screen -m sudo sh -c \"killall sshd ; systemctl start sshd\"```, or\r\n```killall sshd ; systemctl start sshd``` as root on the console of the remote host.\r\n\r\n##### EXPECTED RESULTS\r\nI expect synchronize to 'continue where it left off', leveraging ```--partial``` in synchronize, copying the file to the remote host.\r\n\r\n##### ACTUAL RESULTS\r\nOn a second attempt, synchronize actually copies rm.tar to /tmp/rm.tar on the local host, then believes it has succeeded.\r\n\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\nUsing module file /opt/ansible/lib/python2.7/site-packages/ansible/modules/files/synchronize.py\r\n<10.148.180.241> ESTABLISH LOCAL CONNECTION FOR USER: username\r\n<10.148.180.241> EXEC /bin/sh -c 'echo ~ && sleep 0'\r\n<10.148.180.241> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /home/username/.ansible/tmp/ansible-tmp-1516304747.24-257753331576084 `\" && echo ansible-tmp-1516304747.24-257753331576084=\"` echo /home/username/.ansible/tmp/ansible-tmp-1516304747.24-257753331576084 `\" ) && sleep 0'\r\n<10.148.180.241> PUT /tmp/tmpxngM3A TO /home/username/.ansible/tmp/ansible-tmp-1516304747.24-257753331576084/synchronize.py\r\n<10.148.180.241> EXEC /bin/sh -c 'chmod u+x /home/username/.ansible/tmp/ansible-tmp-1516304747.24-257753331576084/ /home/username/.ansible/tmp/ansible-tmp-1516304747.24-257753331576084/synchronize.py && sleep 0'\r\n<10.148.180.241> EXEC /bin/sh -c '/opt/ansible/bin/python /home/username/.ansible/tmp/ansible-tmp-1516304747.24-257753331576084/synchronize.py; rm -rf \"/home/username/.ansible/tmp/ansible-tmp-1516304747.24-257753331576084/\" > /dev/null 2>&1 && sleep 0'\r\nFAILED - RETRYING: copy docker image tar \"{{ file }}\" (40 retries left).Result was: {\r\n    \"attempts\": 1,\r\n    \"changed\": false,\r\n    \"cmd\": \"/bin/rsync --delay-updates -F --archive --rsh=/bin/ssh -S none -o Port=22 -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null --partial --out-format=<<CHANGED>>%i %n%L /home/username/username/controlVM2/rm.tar 10.148.180.241:/tmp/rm.tar\",\r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"_local_rsync_path\": \"rsync\",\r\n            \"_substitute_controller\": false,\r\n            \"archive\": true,\r\n            \"checksum\": false,\r\n            \"compress\": false,\r\n            \"copy_links\": false,\r\n            \"delete\": false,\r\n            \"dest\": \"10.148.180.241:/tmp/rm.tar\",\r\n            \"dest_port\": 22,\r\n            \"dirs\": false,\r\n            \"existing_only\": false,\r\n            \"group\": null,\r\n            \"links\": null,\r\n            \"mode\": \"push\",\r\n            \"owner\": null,\r\n            \"partial\": true,\r\n            \"perms\": null,\r\n            \"private_key\": null,\r\n            \"recursive\": null,\r\n            \"rsync_opts\": null,\r\n            \"rsync_path\": null,\r\n            \"rsync_timeout\": 0,\r\n            \"set_remote_user\": true,\r\n            \"src\": \"/home/username/username/controlVM2/rm.tar\",\r\n            \"ssh_args\": null,\r\n            \"times\": null,\r\n            \"verify_host\": false\r\n        }\r\n    },\r\n    \"msg\": \"Warning: Permanently added '10.148.180.241' (ECDSA) to the list of known hosts.\\r\\n\\n        #################################################################\\nConnection to 10.148.180.241 closed by remote host.\\r\\nrsync: writefd_unbuffered failed to write 4 bytes to socket [sender]: Broken pipe (32)\\nrsync: connection unexpectedly closed (227039 bytes received so far) [sender]\\nrsync error: unexplained error (code 255) at io.c(605) [sender=3.0.9]\\n\",\r\n    \"rc\": 255,\r\n    \"retries\": 41\r\n}\r\nUsing module file /opt/ansible/lib/python2.7/site-packages/ansible/modules/files/synchronize.py\r\n<10.148.180.241> EXEC /bin/sh -c 'echo ~ && sleep 0'\r\n<10.148.180.241> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /home/username/.ansible/tmp/ansible-tmp-1516304760.34-28924134690777 `\" && echo ansible-tmp-1516304760.34-28924134690777=\"` echo /home/username/.ansible/tmp/ansible-tmp-1516304760.34-28924134690777 `\" ) && sleep 0'\r\n<10.148.180.241> PUT /tmp/tmpzqKOE_ TO /home/username/.ansible/tmp/ansible-tmp-1516304760.34-28924134690777/synchronize.py\r\n<10.148.180.241> EXEC /bin/sh -c 'chmod u+x /home/username/.ansible/tmp/ansible-tmp-1516304760.34-28924134690777/ /home/username/.ansible/tmp/ansible-tmp-1516304760.34-28924134690777/synchronize.py && sleep 0'\r\n<10.148.180.241> EXEC /bin/sh -c '/opt/ansible/bin/python /home/username/.ansible/tmp/ansible-tmp-1516304760.34-28924134690777/synchronize.py; rm -rf \"/home/username/.ansible/tmp/ansible-tmp-1516304760.34-28924134690777/\" > /dev/null 2>&1 && sleep 0'\r\nok: [myhostname.example.com] => {\r\n    \"attempts\": 2,\r\n    \"changed\": false,\r\n    \"cmd\": \"/bin/rsync --delay-updates -F --archive --partial --out-format=<<CHANGED>>%i %n%L /home/username/username/controlVM2/rm.tar /tmp/rm.tar\",\r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"_local_rsync_path\": \"rsync\",\r\n            \"_substitute_controller\": false,\r\n            \"archive\": true,\r\n            \"checksum\": false,\r\n            \"compress\": false,\r\n            \"copy_links\": false,\r\n            \"delete\": false,\r\n            \"dest\": \"/tmp/rm.tar\",\r\n            \"dest_port\": 22,\r\n            \"dirs\": false,\r\n            \"existing_only\": false,\r\n            \"group\": null,\r\n            \"links\": null,\r\n            \"mode\": \"push\",\r\n            \"owner\": null,\r\n            \"partial\": true,\r\n            \"perms\": null,\r\n            \"private_key\": null,\r\n            \"recursive\": null,\r\n            \"rsync_opts\": null,\r\n            \"rsync_path\": null,\r\n            \"rsync_timeout\": 0,\r\n            \"set_remote_user\": true,\r\n            \"src\": \"/home/username/username/controlVM2/rm.tar\",\r\n            \"ssh_args\": null,\r\n            \"times\": null,\r\n            \"verify_host\": false\r\n        }\r\n    },\r\n    \"msg\": \"\",\r\n    \"rc\": 0,\r\n    \"stdout_lines\": []\r\n}\r\n```\r\n\r\nThe problem should be obvious. In the first retry, synchronize has lost all of the remote parameters to reach the remote host (```--rsh=/bin/ssh -S none -o Port=22 -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null```), and instead is performing a completely different operation, local to local.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35061/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "rbrandon81": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35058", "title": "Ansible connection to Nexus device fails.", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n\r\n - Bug Report\r\n \r\n##### COMPONENT NAME\r\n\r\nnxos_command\r\n\r\n\r\n##### ANSIBLE VERSION\r\nansible --version\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/rob/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.12 (default, Nov 20 2017, 18:23:56) [GCC 5.4.0 20160609]\r\n\r\n##### CONFIGURATION\r\nansible-config dump --only-changed\r\nHOST_KEY_CHECKING(/etc/ansible/ansible.cfg) = False\r\nPARAMIKO_HOST_KEY_AUTO_ADD(/etc/ansible/ansible.cfg) = True\r\nPARAMIKO_LOOK_FOR_KEYS(/etc/ansible/ansible.cfg) = False\r\n\r\n##### OS / ENVIRONMENT\r\nNo LSB modules are available.\r\nDistributor ID: Ubuntu\r\nDescription:    Ubuntu 16.04.3 LTS\r\nRelease:        16.04\r\nCodename:       xenial\r\n\r\n##### SUMMARY\r\nPlaybook fails with unable to open shell message.\r\n\r\n##### STEPS TO REPRODUCE\r\nansible-playbook nexus.yml --ask-vault-pass\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```---\r\n- name: Nexus test\r\n  hosts: nexus_core\r\n  connection: local\r\n  tasks:\r\n  - name: Import credentials\r\n    include_vars: creds.yml\r\n  - name: Set connection\r\n    set_fact:\r\n     connection:\r\n      username: \"{{ creds['username'] }}\"\r\n      password: \"{{ creds['password'] }}\"\r\n      transport: cli\r\n      host: \"{{ inventory_hostname }}\"\r\n      timeout: 45\r\n  - name: Show version\r\n    nxos_command:\r\n     provider: \"{{ connection }}\"\r\n     commands:\r\n      - terminal color persist\r\n\r\n\r\n\r\n##### EXPECTED RESULTS\r\nExpected playbook to connect to both Nexus devices and input exec mode commands.\r\n\r\n##### ACTUAL RESULTS\r\n\r\n```\r\nansible-playbook nexus.yml --ask-vault-pass -vvvv\r\nansible-playbook 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/rob/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible-playbook\r\n  python version = 2.7.12 (default, Nov 20 2017, 18:23:56) [GCC 5.4.0 20160609]\r\nUsing /etc/ansible/ansible.cfg as config file\r\nVault password:\r\nsetting up inventory plugins\r\nParsed /etc/ansible/hosts inventory source with ini plugin\r\nLoading callback plugin default of type stdout, v2.0 from /usr/lib/python2.7/dist-packages/ansible/plugins/callback/__init__.pyc\r\n\r\nPLAYBOOK: nexus.yml ****************************************************************************************************\r\n1 plays in nexus.yml\r\n\r\nPLAY [Nexus test] ******************************************************************************************************\r\n\r\nTASK [Gathering Facts] *************************************************************************************************\r\nUsing module file /usr/lib/python2.7/dist-packages/ansible/modules/system/setup.py\r\n<10.200.8.231> ESTABLISH LOCAL CONNECTION FOR USER: rob\r\n<10.200.8.231> EXEC /bin/sh -c 'echo ~ && sleep 0'\r\nUsing module file /usr/lib/python2.7/dist-packages/ansible/modules/system/setup.py\r\n<10.200.8.232> ESTABLISH LOCAL CONNECTION FOR USER: rob\r\n<10.200.8.232> EXEC /bin/sh -c 'echo ~ && sleep 0'\r\n<10.200.8.231> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /home/rob/.ansible/tmp/ansible-tmp-1516305371.36-78819267958882 `\" && echo ansible-tmp-1516305371.36-78819267958882=\"` echo /home/rob/.ansible/tmp/ansible-tmp-1516305371.36-78819267958882 `\" ) && sleep 0'\r\n<10.200.8.232> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /home/rob/.ansible/tmp/ansible-tmp-1516305371.36-235469455605117 `\" && echo ansible-tmp-1516305371.36-235469455605117=\"` echo /home/rob/.ansible/tmp/ansible-tmp-1516305371.36-235469455605117 `\" ) && sleep 0'\r\n<10.200.8.231> PUT /tmp/tmpiL73N7 TO /home/rob/.ansible/tmp/ansible-tmp-1516305371.36-78819267958882/setup.py\r\n<10.200.8.232> PUT /tmp/tmpia8Vg9 TO /home/rob/.ansible/tmp/ansible-tmp-1516305371.36-235469455605117/setup.py\r\n<10.200.8.231> EXEC /bin/sh -c 'chmod u+x /home/rob/.ansible/tmp/ansible-tmp-1516305371.36-78819267958882/ /home/rob/.ansible/tmp/ansible-tmp-1516305371.36-78819267958882/setup.py && sleep 0'\r\n<10.200.8.232> EXEC /bin/sh -c 'chmod u+x /home/rob/.ansible/tmp/ansible-tmp-1516305371.36-235469455605117/ /home/rob/.ansible/tmp/ansible-tmp-1516305371.36-235469455605117/setup.py && sleep 0'\r\n<10.200.8.231> EXEC /bin/sh -c '/usr/bin/python /home/rob/.ansible/tmp/ansible-tmp-1516305371.36-78819267958882/setup.py; rm -rf \"/home/rob/.ansible/tmp/ansible-tmp-1516305371.36-78819267958882/\" > /dev/null 2>&1 && sleep 0'\r\n<10.200.8.232> EXEC /bin/sh -c '/usr/bin/python /home/rob/.ansible/tmp/ansible-tmp-1516305371.36-235469455605117/setup.py; rm -rf \"/home/rob/.ansible/tmp/ansible-tmp-1516305371.36-235469455605117/\" > /dev/null 2>&1 && sleep 0'\r\nok: [10.200.8.231]\r\nok: [10.200.8.232]\r\nMETA: ran handlers\r\n\r\nTASK [Import credentials] **********************************************************************************************\r\ntask path: /home/rob/nexus.yml:6\r\nTrying secret <ansible.parsing.vault.PromptVaultSecret object at 0x7f3c08f606d0> for vault_id=default\r\nTrying secret <ansible.parsing.vault.PromptVaultSecret object at 0x7f3c08f606d0> for vault_id=default\r\nok: [10.200.8.231] => {\r\n    \"ansible_facts\": {\r\n        \"creds\": {\r\n            \"password\": \"xxxxx\",\r\n            \"username\": \"rbrandon\"\r\n        }\r\n    },\r\n    \"ansible_included_var_files\": [\r\n        \"/home/rob/creds.yml\"\r\n    ],\r\n    \"changed\": false\r\n}\r\nok: [10.200.8.232] => {\r\n    \"ansible_facts\": {\r\n        \"creds\": {\r\n            \"password\": \"xxxx\",\r\n            \"username\": \"rbrandon\"\r\n        }\r\n    },\r\n    \"ansible_included_var_files\": [\r\n        \"/home/rob/creds.yml\"\r\n    ],\r\n    \"changed\": false\r\n}\r\n\r\nTASK [Set connection] **************************************************************************************************\r\ntask path: /home/rob/nexus.yml:8\r\nok: [10.200.8.231] => {\r\n    \"ansible_facts\": {\r\n        \"connection\": {\r\n            \"host\": \"10.200.8.231\",\r\n            \"password\": \"xxxxx\",\r\n            \"timeout\": 45,\r\n            \"transport\": \"cli\",\r\n            \"username\": \"rbrandon\"\r\n        }\r\n    },\r\n    \"changed\": false\r\n}\r\nok: [10.200.8.232] => {\r\n    \"ansible_facts\": {\r\n        \"connection\": {\r\n            \"host\": \"10.200.8.232\",\r\n            \"password\": \"xxxx\",\r\n            \"timeout\": 45,\r\n            \"transport\": \"cli\",\r\n            \"username\": \"rbrandon\"\r\n        }\r\n    },\r\n    \"changed\": false\r\n}\r\n\r\nTASK [Show version] ****************************************************************************************************\r\ntask path: /home/rob/nexus.yml:16\r\n<10.200.8.231> connection transport is cli\r\n<10.200.8.231> using connection plugin network_cli\r\n<10.200.8.232> connection transport is cli\r\n<10.200.8.232> using connection plugin network_cli\r\n<10.200.8.232> socket_path: None\r\n<10.200.8.231> socket_path: None\r\nfatal: [10.200.8.232]: FAILED! => {\r\n    \"changed\": false,\r\n    \"msg\": \"unable to open shell. Please see: https://docs.ansible.com/ansible/network_debug_troubleshooting.html#unable-to-open-shell\"\r\n}\r\nfatal: [10.200.8.231]: FAILED! => {\r\n    \"changed\": false,\r\n    \"msg\": \"unable to open shell. Please see: https://docs.ansible.com/ansible/network_debug_troubleshooting.html#unable-to-open-shell\"\r\n}\r\n        to retry, use: --limit @/home/rob/nexus.retry\r\n\r\nPLAY RECAP *************************************************************************************************************\r\n10.200.8.231               : ok=3    changed=0    unreachable=0    failed=1\r\n10.200.8.232               : ok=3    changed=0    unreachable=0    failed=1\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35058/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "alikins": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35055", "title": "Generalize HPUX arch check in  facts/hardware/hpux.py cpu facts ", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Bug Report\r\n - Feature Idea\r\n\r\n\r\n##### COMPONENT NAME\r\n<!---\r\nName of the module, plugin, task or feature\r\nDo not include extra details here, e.g. \"vyos_command\" not \"the network module vyos_command\" or the full path\r\n-->\r\nlib/ansible/module_utils/facts/hardware/hpux.py\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.5.0 (k0ste-facts-33927 2614905cab) last updated 2018/01/18 13:13:09 (GMT -400)\r\n  config file = /home/adrian/src/ansible/ansible.cfg\r\n  configured module search path = [u'/home/adrian/ansible/my-modules']\r\n  ansible python module location = /home/adrian/src/ansible/lib/ansible\r\n  executable location = /home/adrian/src/ansible/bin/ansible\r\n  python version = 2.7.14 (default, Dec 11 2017, 14:52:53) [GCC 7.2.1 20170915 (Red Hat 7.2.1-2)]\r\n\r\n\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\nIf using Ansible 2.4 or above, paste the results of \"ansible-config dump --only-changed\"\r\nOtherwise, mention any settings you have changed/added/removed in ansible.cfg\r\n(or using the ANSIBLE_* environment variables).\r\n-->\r\n\r\n##### OS / ENVIRONMENT\r\n<!---\r\nMention the OS you are running Ansible from, and the OS you are\r\nmanaging, or say \"N/A\" for anything that is not platform-specific.\r\nAlso mention the specific version of what you are trying to control,\r\ne.g. if this is a network bug the version of firmware on the network device.\r\n-->\r\nHP-UX\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly -->\r\nSee https://github.com/ansible/ansible/pull/33333/files#r156724661\r\n\r\nHP-UX hardware cpu fact code does a if arch == '9000/800' check to see if \r\narch is ia64 or 9000 platform. \r\n\r\nThe pr above adds a new arch, but it may be useful to generalize that, but we need\r\nmore info about the valid arches.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35055/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/ffe0ddea96bbe8ac27af816e58667c212e74688e", "message": "add a vault --encrypt-vault-to specify vault id to use for encrypt (#31067)\n\n\r\nEnforce that there can be only one --new-vault-id or\r\n--new-vault-password-file and use this instead of\r\n--encrypt-vault-id\r\n\r\n* Add a config option for default vault encrypt id"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/08f92a9f0f318c73ff4528be255c7066d436a85e", "message": "Fix fact deps when 'filter=ansible_fact' is used. (#33441)\n\nThe accumulated collected_facts was being update\r\nwith new facts _after_ filtering them. So only\r\nfacts that pass the filter would ever be passed\r\nto other fact collectors.\r\n\r\nFor 'filter=ansible_service_mgr', even though it requires\r\nthe platform and distribution facts and even collects them,\r\nthey would get filtered out and never passed to the other\r\ncollectors that need them (service_mgr for ex).\r\n\r\nFix is just to add the unfiltered facts to collected_facts.\r\n\r\nAdds unit tests for fact filter and collected_facts.\r\n\r\nFixes #32286"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/ec9769c82fc1818b31fd3c4a31de4cba9a5c2ab8", "message": "Facts distribution clear linux 31501 (#32453)\n\nThe search string used to look for Clear Linux\r\nwas changed in 45a9f967749ec68e2077fe1d1d32dd37660ab376 to\r\nbe more specific, but was too specific. Now finding\r\na substring match for 'Clear Linux' in /usr/lib/os-release\r\nis enough to consider a match.\r\n\r\nSince the details of the full name in os-release varies\r\n('Clear Linux Software for Intel Architecture',\r\n 'Clear Linux OS for Intel Architecture', etc) the\r\nsearch string match was failing and would fall back to the\r\n'first word in the release file' method resulting in\r\nansible_distribution='NAME=\"Clear'\r\n\r\nAlso add a meta fact indicating which search string\r\nwas matched.\r\n\r\nTest case info from:\r\n        https://github.com/ansible/ansible/issues/31501#issuecomment-340861535\r\n\r\nFixes #31501"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/fc180a378ad6582c4c4a0d1b972113fd3afb4ae9", "message": "Support using vault password files that are themselves vault encrypted  (#27668)\n\nExtract vault related bits of DataLoader._get_file_contents to DataLoader._decrypt_if_vault_data\r\n\r\nWhen loading vault password files, detect if they are vault encrypted, and if so, try to decrypt with any already known vault secrets.\r\n\r\nThis implements the 'Allow vault password files to be vault encrypted'  (#31002) feature card from\r\nthe 2.5.0 project at https://github.com/ansible/ansible/projects/9\r\n\r\nFixes #31002"}], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34950", "title": "[WIP] DO NOT MERGE - experiment - see what breaks in ci without pkg_resources", "body": "##### SUMMARY\r\nSee what breaks in CI without pkg_resources\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n\r\n - Bugfix Pull Request\r\n\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\nbin/ansible\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.5.0 (no_pkg_resources_test c21651257c) last updated 2018/01/16 14:03:06 (GMT -400)\r\n  config file = /home/adrian/src/ansible/ansible.cfg\r\n  configured module search path = [u'/home/adrian/ansible/my-modules']\r\n  ansible python module location = /home/adrian/src/ansible/lib/ansible\r\n  executable location = /home/adrian/src/ansible/bin/ansible\r\n  python version = 2.7.14 (default, Dec 11 2017, 14:52:53) [GCC 7.2.1 20170915 (Red Hat 7.2.1-2)]\r\n\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/60239019", "body": "Yup, especially if the only expected exit codes are 0/1.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/60239019/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/62714380", "body": "This could be done in the logging Formatter (and/or a logging.Filter). And then the modules\ncould just pass objects to self.debug_logger.debug(), and the handler/formatter decides how to pretty print.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/62714380/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/62715431", "body": "I'd like a shorter name[1] here, but it looks like self.log and self.debug are taken.\nself.dl is likely too far.\n\n[1] since there will be a lot of `self.debug_logger.debug('foo %s %s', obj1, otherobj)`\nand `self.debug_logger.exception(e)`\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/62715431/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/62716368", "body": "And for new style ziploader modules, a module scope 'log' object could work.\n\n```\nlog = logging.getLogger(__name__)      # <-- does __name__ get weird on remote modules?\n```\n\nThen instead of `self.debug_logger.debug(foo)`, it would be `log.debug(foo)`\n\nThat would remove the need for the module introspect in AnsibleModule.log(). Then potentially of the rest of AnsibleModule.log() becomes a matter of which logging Handler is setup.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/62716368/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/62730132", "body": "Add to examples/ansible.cfg\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/62730132/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/65438189", "body": "Aside from self._dump_results here, this could almost be a static method or module scope method.\n\nI sort of want to suggest always just passing the entire host_data.result to TestCase. Would seem more useful for the intended use case  (viewing results of our test cases).  But, I could also see this being useful with real 'live' data \nand the results being sensitive  (something like someone using ansible via jenkins as part of a test setup, and getting the task results as jenkins would be handy). Maybe include an AbridgedTestCase(TestCase) that can do the _dump_results style cleanup itself?\n\nSomething that has a TestCase() [or perhaps as a classmethod alternative constructor] could also handle figuring out the duration, name, and add_*_info info.\n\nThen this method is more or less\n\n```\ndef _build_test_case(self, task_data, host_data):\n    return AnsibleTestCase(task_data, host_data)\n```\n\nSimilarly for TestSuite.\ntest_suite = AnsibleTestSuite(playbook_name, task_data)\n\n(And maybe TaskData would get playbook_name passed to it's init?)\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/65438189/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/65438426", "body": "task_uuid seems unused\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/65438426/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/65438658", "body": "ditto host_uuid\n\n(Or is need task_date.items() necessary with OrderedDict?) \n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/65438658/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/65754569", "body": "This seems like it could be a util function. \n\nCould module_utils.splitter.split_args() be used here?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/65754569/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/65755745", "body": "[comment on code that was pre-existing to this pr and doesn't need to be revised now]\n\nMy preference would be to rename these to something like stdout_data/stderr_data. Having vars named 'stdout' and\n'stderr' floating around code dealing with subprocess/popen/select seem error prone, especially since the 'stdout' var here is not a pipe or file object.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/65755745/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/65759667", "body": "I'd like to see a comment either here or on the commit explaining this. \n\nIt seems like a general bug fix and unrelated to py2/py3. If it is related to py2/py3 I'd like to see an explanation.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/65759667/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/65760040", "body": "This changes the return type of this method doesnt it? Do modules need to be changed?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/65760040/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/65761893", "body": "My preference here would be to just import request as six_request and remove the object imports.\nMostly because of:\n- It's a lot of imports, and a lot of imports on a single line\n- In this case, it would be useful to refer to this objects via module scope, since they are not (always) the regular urlib/urllib2 objects. Using the six_request module namespace makes that more clear.\n\nBut, thats a style thing, so does not require revision now.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/65761893/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/67215184", "body": "doh, indeed.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/67215184/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/67217774", "body": "Now that I think about it, I definitely cargo cult'ed that import error idiom from the existing code. It doesn't seem to be common in the code base. \n\nThere are a couple of places with similar requirements (try to import something absolutely required, but for an optional plugin...). Is there a preferred way to handle those cases? \n\nThe try/except and AnsibleError seems reasonable (at least with the correct error message ;->). But there are a few approaches in the code:\n\nplugins/cache/redis.py  also raises an AnsibleError\nplugins/cache/memcached.py prints() an error and calls sys.exit()   (eek!)\n\n[module_utils/basic.py does variations of sys.exit, but that's a special case...]\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/67217774/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/67219798", "body": "I think I may just undo that change and revisit. There are two different hardcoded buffersizes in that module\n\n``` python\n\n      # FUTURE: determine buffer size at runtime via remote winrm config?\n      def _put_file_stdin_iterator(self, in_path, out_path, buffer_size=250000):\n          in_size = os.path.getsize(to_bytes(in_path, errors='strict'))\n          offset = 0\n```\n\nand the one changed in this patch\n\n``` python\n    def fetch_file(self, in_path, out_path):\n          super(Connection, self).fetch_file(in_path, out_path)\n          in_path = self._shell._unquote(in_path)\n          out_path = out_path.replace('\\\\', '/')\n          display.vvv('FETCH \"%s\" TO \"%s\"' % (in_path, out_path), host=self._winrm_host)\n          buffer_size = HALF_MB\n```\n\nMaybe \n\n``` python\nFETCHFILE_BUFSIZE = 2**19  # in bytes, 0.5MB\nPUTFILE_BUFSIZE = 250000\n```\n\n(PUTFILE_STDIN_BUFSIZE? )\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/67219798/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/68792159", "body": "idp?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/68792159/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/69944686", "body": "Maybe 'def find_file_in_expected_search_path()'  or 'find_file_in_search_path()' ?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/69944686/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/69947319", "body": "Could maybe use self.find_file_in_search_paths(variables, ['templates', 'vars', 'files'], fn) here.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/69947319/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/69947541", "body": "s/emplating/templating\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/69947541/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/69947867", "body": "And maybe a\n\n``` python\ndef find_file_in_search_paths(self, myvars, subdirs, target_name):\n    results = []\n    for subdir in subdirs:\n          try:\n               result.append(self.find_file_in_search_path(myvars, subdir, target_name))\n          # could use a more specific exception here. Or let find_needle/find_file_in_search_path() return results as []\n         except AnsibleError:\n              continue\n   return results\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/69947867/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/69948872", "body": "Could 'files' be replaced with a @property (self.file_search_path?).  For these cases it would return ['files']\nor  below it would be ['templates', 'vars', 'files']\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/69948872/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/69950469", "body": "And/or, throw some variety of IGotTooManyAnswersException if find_file_in_search_paths end up with len(result) > 1\n\nsomething like:\n\n``` python\ndef find_file_in_search_paths(self, myvars, subdirs, target_name):\n    results = []\n    for subdir in subdirs:\n          try:\n               result.append(self.find_file_in_search_path(myvars, subdir, target_name))\n          # could use a more specific exception here. Or let find_needle/find_file_in_search_path() return results as []\n         except AnsibleError:\n              continue\n   if  not results:\n       raise NoFilesFoundInSearchPathException(target_file=target_name, subdir=subdir)\n\n  if len(results) > 1:\n      raise TooManyFilesException(target_file=target_name, subdir=subdir, results=results)\n   return results\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/69950469/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/70720143", "body": "Initial motivation for the more specific exceptions in general was time spent attempting to track down a connection error that could have been raised from multiple places. [AnsibleConnectionFailure('SSH Error: data could not be sent to the remote host. Make sure this host can be reached over ssh')] \n\nGenerally my preference is to raise the most specific exception I can, especially if there is a reasonable expectation that the exception could be handled differently than it's base exception. But even if it's only to convey additional context its useful.\n\nGranted, at the moment, this module or the app doesn't make any use of this specific exception (aside from the places the exception name is exposed to the user). \n\nConceptually, the app could make use of it (for example, a smart connection type could allow a failed paramiko connection to be retried as a ssh connection or vice versa). Long term the connection type specific exceptions will be useful in nested or stacked connection scenarios.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/70720143/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/70725745", "body": "I kind of debated if it made sense to share 'ssh connection exceptions' across paramiko/ssh.  In a lot of ways, there are some potential failures modes that are more conceptually 'ssh protocol' related than specific implementations (a failure in the crypto handshake setting up the transport layer for example).\n\nThe reasons I went for connection plugin specific exceptions were:\n- A shared exception would need to live in either:\n  - base ansible (lib/ansible/errors/)\n  - connection base (plugin/connection/**init** for ex)   - either of these seems like it's pushing ssh specific concepts when it seems like there has been significant effort to remove ssh'isms from the app/lib\n  - something new (plugin/connection/base_ssh.py ?)  - maybe makes more sense but that approach doesnt seem common for plugins  [plugins/strategy and plugins/shell/fish.py and plugins/action/net_template do however]\n- While something like an auth or transport failure is a general ssh concept, in practice the causes of the failures (and the potential remedies) tend to be implementation specific. Or tied to the implementation specific configuration or setup. \n\nGiven those constraints, I pushed the more specific exceptions into the connection plugins.\n\nIt may make sense to push some slightly more specific base connection exceptions into lib/ansible/errors.py.\nOther connection failure modes that exist across multiple connection types.\n\n(psuedo-code sketch)\n\n``` python\nclass AnsibleConnectionTransportFailure(AnsibleConnectionFailure):\n    pass\n\nclass AnsibleConnectionAuthenticationFailure(AnsibleConnectionFailure):\n   pass\n\n# not a great name, but ssh channels, pipes/sockets (to dockerd  or popen comm for local for ex), \nclass AnsibleConnectionChannelFailure(AnsibleConnectionFailure):\n  pass\n\n# Also not great names here, but something to separate failures for:\n#  'the local command I run to make the connection failed'                  #  ssh, docker\n#     and \n# 'the command I have to to run on the remote end as part of the connection failed'    #  \"jail connection requires dd command in the jail\" ,  no python, no powershell\nclass AnsibleConnectionCommandFailure(AnsibleConnectionFailure):\n  pass\n\nclass AnsibleCommandConnectionFailure(AnsibleConnectionFailure):\n  pass\n\netc\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/70725745/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/70727939", "body": "The openssh messages searched for here are not translated. (afaict, no openssh messages are translated and no message catalogs are included). \n\nIf a different implementation did translate the message (or just used different messages), the error mapper would fail to find a more specific cause and would fall back to the existing errors. rc=255 will always be a failure, it's just a matter if we can detect a more specific reason. Ditto for the messages that may be libc/os\nspecific (errno, 'No route to host' etc).\n\nNo doubt the regexes will need tuning and updating over time.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/70727939/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/70729069", "body": "Yup, very fragile. But given the myriad ways the ssh command can fail, we need to try to provide as much info to users as possible. If we can enhance the context provided with error messages in this scenario (where rc=255 and the ssh connection has failed without a doubt[1]) it should help cut down on user frustration. Especially given that current versions hide all of the ssh \n\n[1] Or more accurately, that the exec of the ssh client failed somehow, but it's about all we've got. \n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/70729069/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/70849843", "body": "For the cases where I've wanted to use a nose test generator, I've ended up just making the test class inherit from object. You lose the TestCase methods (various self.assert*) but usually test generators methods have pretty simple assertions so not too much of a issue. To me it is simpler than injecting the support into a TestCase subclass.\n\n(an example is https://github.com/alikins/ansible/blob/6e8a3d0c25fdeaa349351c6636b062376c30b0a6/test/units/plugins/lookup/test_ini.py)\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/70849843/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/70854132", "body": "Bravo on tackling one of the gnarlier test setups ;-> :+1: \n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/70854132/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/72492338", "body": "try something like:\n\n``` python\nfrom ansible.plugins.callback.default import CallbackModule as CallbackModule_default\n```\n\nand \n\n``` python\nclass CallbackModule(CallbackModule_default):\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/72492338/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/72493225", "body": "subprocess.check_output is python 2.7+ and controller side code like connection plugins target python2.6\n\nThis module was using subprocess.check_output before this pr, but that needs to be fixed as well\n(see https://github.com/ansible/ansible/pull/16841). This pr doesn't need to fix the existing cases, but should avoid adding new use of subprocess.check_output()\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/72493225/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/72504201", "body": "unused import\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/72504201/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/72504252", "body": "fix indent\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/72504252/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/72504471", "body": "get_exception() isnt imported anywhere\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/72504471/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/72505210", "body": "pep8 stuff\n\n```\nif 'names' not in vmap:\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/72505210/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/72507278", "body": "Is 'tree' given a default mutable arg here intentionally? If so, that would be worth a comment explaining why.\n\nIf not then...\n\n``` python\ndef _build_folder_tree(self, folder, tree=None, treepath=None):\n    tree = tree or {'virtualmachines': [],\n                             'subfolders': {},\n                             'name': folder.name}\n\n```\n\nditto for 'vmap' on _build_folder_map below.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/72507278/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/72507450", "body": "rm debugger hook.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/72507450/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/72507559", "body": "lots of mixed space/tabs through here.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/72507559/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/72507628", "body": "missing import of get_exception()\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/72507628/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/72507916", "body": "MORTypes is not imported or defined.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/72507916/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/72511219", "body": "I think this indicates GalaxyCLI is doing something odd with it's args. I would expect passing args to GalaxyCLI to pass the value of args to GalaxyCLI's self.parser.parse_args instead of of calling it as self.parser.parse_args() which defaults to looking at sys.argv.\n\nie, change GalaxyCLI.parse to take args\n\n``` python\ndef parse(self, args=None):\n```\n\nand then have GalaxyCLI.parse call:\n\n``` python\nself.options, self.args =self.parser.parse_args(args)\n```\n\nThen the test would just pass ['install', '-c'] as args instead of having to patch sys.argv so the testing\nis easier and less likely to cause odd side effects, especially if anything else is looking at sys.argv (like nosetest\nitself for example).\n\nIf the top level app also passes in a copy of sys.argv instead of a reference (ie, GalaxyCLI(args=sys.argv[:])), it avoids problems potentially caused by app code manipulating sys.argv.\n\nThat said, it's been doing that a long time, so doesn't need to be changed for this pr, but it is an example of a case where changing the code to be more testable is useful.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/72511219/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/72511505", "body": "I would split these ('install' and 'install --offline -p -r etc') into two separate tests so any failures are more specific and granular.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/72511505/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/72512092", "body": "Preference would be for a unit test to be mocked sufficiently that a cleanup like this is not required.\n\nHowever, in this case if that involves a large amount of fragile mocking, I wouldn't worry about it now\nas having test coverage is better than not having it, even if it is a little messy.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/72512092/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/72529374", "body": "Not sure I understand this. I would expect gc.run() here (maybe with gc.action set)\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/72529374/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/73592853", "body": "This seems like it would break passwords with leading/trailing whitespace.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/73592853/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/74307002", "body": "I'll clean up the debug/logging stuff shortly...\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/74307002/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/75157074", "body": "Wasn't sure if we ever cared about the ordering, but we don't seem to so a set makes sense.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/75157074/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/75170116", "body": "I like giving the regex a name, the pre compile is a bonus.\n\n(Not sure there would be any noticeable performance changes, even with the >1000 block devices some users mentioned. Given the simple regex and the regex caching. That regex will get more complicated eventually though...)\n\n(note while it's in my head, generally don't like logic in class def scope, but this is straightforward and given the unusual **init**'s here...)\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/75170116/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/75173540", "body": "This is to guard against the size of fields changing and causing tuple unpacking errors.\n _mtab_entries() will potentially return entries with > 4 items.\nThough the code to parse the entries  is already a bit split across _mtab_entries and get_mount_facts so that could be enforced there.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/75173540/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/75175933", "body": "The rstrip() usage that was used for parsing findmnt output (now in _find_bind_mounts()) was in a section of code that was never executed due to wrong args to findmnt, so it wasn't worth trusting. The mtab splitting code at least appears to work in the wild, so I left it as is. afaict, it isn't needed...\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/75175933/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/75712630", "body": "Only need to import binascii module here and it should be near the top of the file.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/75712630/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/75712734", "body": "'import crc32 as crc32' is redundant and unneeded. \n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/75712734/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/75713511", "body": "the imported 'crc32' name and this method name collide.\n\nfilter/core.py expects this method to be called 'crc32_s' which doesn't exist.\nI think you meant to name this crc32_s  (or better, crc32s to match existing md5s).\n\nAt top of file:\n\n``` python\nimport binascii\n```\n\n(before the 'import os' since those are python std lib packages and 'binascii' is alphabetically first'\n\nThen at end of module:\n\n``` python\ndef crc32s(data):\n     return binascii.crc32(data) & 0xffffffff\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/75713511/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/75713828", "body": "This will need to be match whatever is in hashing.py\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/75713828/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/75713960", "body": "Looking at hashing.py, I take back the comment about the naming convention, since there doesn't really seem to be one there. So 'crc32_s' is fine.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/75713960/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/79040428", "body": "Not sure if it matters, but the existing behavior was to read from the current position instead of resetting\nto the beginning. I think everything that actually called it did so with file pointer at 0, so not sure it matters.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/79040428/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/79041036", "body": "I think these should stay regular methods. That way if VaultLib.is_encrypted() could be more\nspecific than the module scope version. The primary case I'm thinking of is checking if the data\nis encrypted by the key that the VaultLib instance knows about. ie, 'is this file something _I_ can decrypt'\n\n(granted at the moment, nothing uses that so it doesn't matter...)\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/79041036/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/79044694", "body": "These unit tests changes seem unrelated?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/79044694/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/79048049", "body": "They could likely also go away in favor of using the module versions everywhere. They were left in for compat, but that may not be needed.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/79048049/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/79064678", "body": "Interesting. Does this help the scenario where we needed to read the entire file to get the encoding?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/79064678/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/79064726", "body": "Yup, thats fine with me.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/79064726/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/79076953", "body": "Fixed now.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/79076953/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/79077289", "body": "removed now.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/79077289/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/79203993", "body": "Thought that seemed unneeded. Removing.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/79203993/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/79207623", "body": "Hmm, strings.digits (and ansible.constants.DEFAULT_PASSWORD_CHARS) are py2 strs on py2 and fail this assert. \n\nMoving the default for chars into the method and a None default arg\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/79207623/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/79208311", "body": "Though, I'm a little surprised a value from constants ended up as a regular string type...\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/79208311/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/79211450", "body": "The name is bad.\n\nIt is split into it's own method so that it can be easily mocked for the unit tests.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/79211450/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/79213618", "body": "I haven't figured out a good way to split _read_or_create_file better... The logic of the module is a little odd in that regards.\n\nread_or_create_password_file() is sort of get_to_the_state_where_we_are_ready_to_write_the_password_file()\n\nIt's crammed into one method so that later code can avoid having to deal with the two potential scenarios. And, or, avoid  abstractions like\n\n``` python\n\npw_store =  load_password_store()\npw_data = pw_store.read()\npw_data = update_pw_data(pw_data)\npw_store.update(pw_data)\npw_store.save()\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/79213618/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/79215761", "body": "Yup, primarily for better testing.\n\nAnd to keep os/io level stuff slightly encapsulated in lieu of a more complicated abstraction (pw_store, etc).\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/79215761/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/79226422", "body": "I can add a wrapper function that will call both, but I'd prefer to keep the impls as separate methods.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/79226422/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/79269967", "body": "Updated to extract any data bundled in the exception into the TaskResult before returning it from the worker.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/79269967/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/79446700", "body": "I would expect the arg name here to be 'failed_conditional'  based on the names in FailedConditionsError and the\n'self.failed_conditional = conditional' line. But I don't really understand how it's used, so that may not make sense.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/79446700/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/79485399", "body": "Oops, I pushed that to a different branch. Updated now.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/79485399/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/80123156", "body": "Yup, just removed that part of the change for now.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/80123156/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/80123651", "body": "updated\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/80123651/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/80123750", "body": "fixed\n\n(feel free to default it to whatever image makes the most sense...)\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/80123750/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/80516549", "body": "Where would the AnsibleConnectionTimeout get raised?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/80516549/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/80520796", "body": "Seems like this clause should be sufficient, especially if the AnsibleConnectionFailure has a reasonable message.\n(and or, AnsibleConnectionTimeout, assuming it was meant to be raised somewhere...)\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/80520796/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/80521046", "body": "This was already in pre-existing code, but it doesn't seem like the 'else:' is necessary here, and the rest of the method can lose an indention level.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/80521046/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/80522408", "body": "Also pre-existing code, but I don't see any reason _run_once() shouldn't be responsible for raising AnsibleConnectionFailure on return_code = 255.\n\nAnd then _run_once could raise AnsibleConnectionFailure errors with finer granularity (like AnsibleConnectionTimeout)\n(https://github.com/ansible/ansible/pull/16649 attempts to do some of that, amongst other things)\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/80522408/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/80523773", "body": "I'm tempted to suggest that the exception could indicate if it was a 'retry-able' exception. Either based on exception type or possibly via an attribute on the exception.\n\nBut... I don't see any obvious 'un-retry-able' exceptions. I would argue that authentication related failures shouldn't be retried, but I can see why people may disagree with me (auth failures can be transient as well).\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/80523773/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/80560477", "body": "I have a branch that moves the return code check into _run_once, and removes some of the nesting mentioned above. https://github.com/ansible/ansible/compare/devel...alikins:ssh_error_raise_in_run_once?expand=1\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/80560477/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/80574240", "body": "Is winrm the only connection plugin that supports reset()?\n\nAnd I only see a _reset() method on ansible.plugins.connection.winrm.Connection. Does this always raise a AttributeError?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/80574240/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/81025678", "body": "Running it without this code is enough to get the reproduce case to pass, but that more or less reverts\nhttps://github.com/ansible/ansible/commit/4ac2bafc4baa59d06c937eb8cb9ade0c6ae45a92 \n\nNot really sure how https://github.com/ansible/ansible/commit/4ac2bafc4baa59d06c937eb8cb9ade0c6ae45a92 fixed https://github.com/ansible/ansible/issues/12213 , so just removing it may be a regression. pinging @jimi-c\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/81025678/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/81026116", "body": "A 'module_setup' fact sounds like a good indicator. Would it make sense to set _gathered_facts here based on that fact, or try to check 'module_setup' fact directly in play_interator?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/81026116/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/81177649", "body": "I think the umask lines should be outside/before the try\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/81177649/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/81237754", "body": "I'd move this block into it's own method since fetch_file will likely need it as well.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/81237754/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/81241123", "body": "may be cleaner to build the list of methods, iterate on that list to build a list of (cmd,in_data,checkrc) for each method, then iterate over that list when invoking it. something like:\n\n``` python\nmethod_names =['sftp']\nif scp_if_ssh == 'smart':\n     method_names.append('scp')\nelif scp_if_ssh:\n     method_names = ['scp']\n\nmethods = []\nfor method_name in method_names:\n    if method_name == 'sftp':\n          methods.append(self._build_sftp_put_command(host, in_path, out_path))\n   if method_name == 'scp':\n         methods.append(self._build_scp_put_command(host, in_path, out_path))\n\nfor cmd, in_data, checkrc, method in methods:\n    (returncode, stdout, stderr) = self._run(cmd, in_data, checkrc)\n    if returncode == 0:\n         return\n   if scp_if_ssh == 'smart':\n         <the display warning/debug code here>\n\n# nothing succeeded and returned\nraise AnsibleError...\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/81241123/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/81624155", "body": "Is this debugging that got left in?  Needs to be removed.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/81624155/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/81625955", "body": "Seems wrong to have mod_args import galaxy code just to look a module file name for a galaxy role nickname.\n\nMaybe remove the galaxy bits from here, and instead populate the 'jctanner.pinger.pinger' style name as a name or alias in plugins.PluginLoader()? ie, add 'jctanner.pinger.pinger' to the names in the cache in https://github.com/ansible/ansible/blob/unified_ansible/lib/ansible/plugins/__init__.py#L273-L285\n\nThen this module doesn't need to know it's a galaxy specific name.  \n\n(the name could be URI like with a scheme indicating it's a galaxy name 'galaxy_role_module://jctanner/pinger/module/pinger' or whatever. Someway for mod args to tell that is referring to a module in a galaxy role.)\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/81625955/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/81626442", "body": "This could go away since the 'item' would be enough for plugin loader to get the right module\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/81626442/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/81630369", "body": "I could see a scenario where stdout is valid utf-8 that can be decoded with strict, but stderr could have garbage that would cause 'strict' to fail. Not sure if it's worth being able to specifying different error schemes for both (or different encodings for that matter)\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/81630369/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/81764238", "body": "Oooh, I like that. +1\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/81764238/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/82083917", "body": "s/THese/These\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/82083917/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/82084089", "body": "communite -> communicate\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/82084089/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/82084544", "body": "I think:\n\n> you can run `winrm enumerate winrm/config/listener` the following command in PowerShell::\n\nshould be:\n\n> you can run the following `winrm` command in PowerShell::\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/82084544/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/82084638", "body": "listener -> listening\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/82084638/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/82084789", "body": "(missing ':' )\n\n> In the above example we are able to authenticate with the Windows host using\n\n->\n\n> In the above example we are able to authenticate with the Windows host using:\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/82084789/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/82085639", "body": "is the 'note:' here meant to be a 'note::' directive.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/82085639/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/82201493", "body": "I think my version is buggy as well, since the `entry['path'] for entry in ret` in walk() will only check the local 'ret', which will be per term, where the original check against ret would see all results.\n\nI could pass the run() level 'ret' to walk() and let walk modify it accumulating results. And something\nsimilar for a 'visited_paths' collection. \n\nI sketched out a generator based version that could work, but is currently unfinished.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/82201493/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/83298913", "body": "Fixed.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/83298913/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/85816138", "body": "looks like other similar maps in facts tends to use constant style naming\n(ie, INTERFACE_TYPE). \n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/85816138/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/85933965", "body": "> bcoca> alikins: in most cases we don't add keys when they are not detected, not just virtualization (which we also need to change into lists instead of fixed values)\n> <bcoca> ^ we either change the behaviour to always populate all keys or keep as is, we should not change just for one set of keys\n> <bcoca> it would be nice to be consistent one way or the other\n\nGoing by that, I'd suggest the base get_virtual_facts is\n\n``` python\ndef get_virtual_facts(self):\n    pass\n```\n\nBut as you mention, that would change behavior. So pr as is LGTM to me, we can change the behavior later.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/85933965/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/90129580", "body": "Currently, the local data files needed for the tests is just added to the same directly as the test module.\r\nA specific test data dir may be more appropriate (a fixtures/ subdir, or a test/units/data/ dir, etc) and can\r\nbe changed if this simpler approach isnt sufficient.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/90129580/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/94601623", "body": "s/fact/stat", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/94601623/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/94601663", "body": "s/fact/stat", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/94601663/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/94602802", "body": "Could use some docs/comments explaining what the stats.custom data structure looks like. ", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/94602802/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/94604903", "body": "Could we use ```defaultdict(dict)``` here?", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/94604903/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/94607246", "body": "May be worthwhile to make lines 513-528 a method on the class, so strategy sub classes could override it easier. May also make it easier to write tests for.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/94607246/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/94609007", "body": "Could this block (520-528) be a method on the AggregateStats class? something like AggregateStats.aggregate_custom_stats(data=result_item['ansible_stats'], host_list=host_list)", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/94609007/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/94612298", "body": "Splitting this block (273-286) into it's own method would make it easier for sub classes of the default CallbackModule (like debug, skippy, actionable, dense) to extend this behavior.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/94612298/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/96057199", "body": "Going to push it and see if it breaks docs builds on bsds.  I don't see any mention of problems in the sphinx builds, but one to find out.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/96057199/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/96298099", "body": "requests or requests-ntlm?  (or both?)", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/96298099/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/96729690", "body": "encrypt_file() and decrypt_file() call write_data(data, filename) with filename being a non-tmp file.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/96729690/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/96730506", "body": "afaict, the 'remove the file, then re-open and write to it' approach was added so that 'shred' could be called on the old file before writing the encrypted version. _unlink_file tries to preserve that,", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/96730506/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/96734044", "body": "It's definitely a race condition. The 'shred' hook kind of makes real atomic ops difficult. \r\n\r\nNot entirely convinced the 'shred' hooks are worth the complexity, but giving it the benefit of the doubt. The existing code seems to go out of it's way to always have a finally path to shred old files\r\nand seems to value that over atomic file ops. If thats no longer the case, the code can be simplified and made more atomic[1]\r\n\r\nFor the non-shred cases, we could skip the os.remove() and let rename take care of it (via shutils.move[1]). \r\n\r\n[1] at least for the scenarios where os.rename() will work. Given the tempfile.mkstemp() use, I suspect os.rename() wont work for most cases (assuming /tmp of different fs...). ", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/96734044/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/96869603", "body": "just to have it in one try/except/finally without the try being being 15 lines", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/96869603/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/96870493", "body": "Think I was intending to remove that except stanza entirely and forgot to remove that debugging stanza", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/96870493/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/96872577", "body": "my pref is to have the special case (filename='-') checked early and to return early and have the normal case be in the first indent level in the method. Also minimizes the amount of code that the raised AnsibleErrors could be referring to.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/96872577/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/96882130", "body": "Was trying to avoid the gap between the tmp file rename and resetting perms/attributes in shuffle_files. This does allow a read of a partially written file, but it also keeps file perms in place.\r\n\r\nI like the idea of getting perms sorted on the tmpfile before the rename  (as mentioned at https://github.com/ansible/ansible/issues/18537). Though still a small perm race there (dest file perms could change in the gap between the setting/copying file perms from dest file to the temp file and when the rename happens) .", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/96882130/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/97631611", "body": "Could this ~ and / handling be moved into path_dwim_get_candidates?", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/97631611/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/98011757", "body": "I like 'etc_hosts' > 'hosts'. Especially if the intention is to support just unix style /etc/hosts.\r\n\r\nIf other formats/types is in the future, maybe 'hosts_file' ?", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/98011757/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/98012774", "body": "Will this handle a 'chattr +i /etc/hosts' or otherwise immutable /etc/hosts (docker does some variant of that I think?)", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/98012774/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/98013459", "body": "I'd like to see the return include a data structure of /etc/hosts content. Maybe a serializeable version of the EtcHosts object? (not a requirement, just a nice to have)", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/98013459/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/98015604", "body": "I would be tempted to extract this check into a method or two. (To simplify reading the logic, and also to make it easier to easier to unit test).", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/98015604/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/98123149", "body": "register it in a playbook and use it later. The module has already parsed the file into a object (self.lines and its records). That avoids the need to refetch and do string parsing to inspect the results.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/98123149/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/99663815", "body": "This import is not used.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/99663815/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/99663893", "body": "contrib/inventory/apstra_aos.py:47:5: F401 'apstra.aosom.exc.SessionRqstError' imported but unused\r\ncontrib/inventory/apstra_aos.py:47:5: F401 'apstra.aosom.exc.LoginError' imported but unused\r\ncontrib/inventory/apstra_aos.py:47:5: F401 'apstra.aosom.exc.SessionError' imported but unused\r\n\r\nNone of those imports appear to be used.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/99663893/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/99664394", "body": "pep8 warning:\r\ncontrib/inventory/apstra_aos.py:268:1: E302 expected 2 blank lines, found 0\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/99664394/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/99664660", "body": "pep8 warning:\r\nE305 expected 2 blank lines after class or function definition, found 1", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/99664660/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/99665184", "body": "pep8/flake8 doesnt really like the '##' comments. Minor, but it keeps pep8 happy:\r\ncontrib/inventory/apstra_aos.py:286:9: E265 block comment should start with '# '\r\ncontrib/inventory/apstra_aos.py:288:9: E265 block comment should start with '# '\r\ncontrib/inventory/apstra_aos.py:298:9: E265 block comment should start with '# '\r\ncontrib/inventory/apstra_aos.py:300:9: E265 block comment should start with '# '\r\ncontrib/inventory/apstra_aos.py:316:13: E266 too many leading '#' for block comment\r\ncontrib/inventory/apstra_aos.py:333:13: E266 too many leading '#' for block comment\r\ncontrib/inventory/apstra_aos.py:334:13: E266 too many leading '#' for block comment\r\ncontrib/inventory/apstra_aos.py:342:9: E265 block comment should start with '# '\r\ncontrib/inventory/apstra_aos.py:344:9: E265 block comment should start with '# '\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/99665184/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/99667050", "body": "I'd recommend adding a main() and a 'if __name__ == __main__: main()' here, but thats optional. ", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/99667050/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/99670486", "body": "I'd recommend a more explicit import, ie\r\n\r\n``` python\r\nfrom ansible.module_utils.basic import AnsibleModule'\r\n```\r\n\r\nAnd using regular imports for 're', 'shlex', 'os', 'json', 'tempfile' ", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/99670486/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/99670626", "body": "ipt_load_stderr doesnt appear to be defined anywhere.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/99670626/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/99670880", "body": "This 'default_chains' doesn't seem to be used anywhere.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/99670880/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/100087848", "body": "The code that gets replaced by this method (in crc32 for ex), the url is downloaded to a dir local to the module source. Here, a new temp dir is created. Afaict, those could have different permissions.\r\n\r\nIf the mkdtemp() result is more open than the __file__/* path, a downloaded file may be readable with different permissions.\r\n\r\nHaven't tested to see if that is a problem so would like some clarification.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/100087848/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/100088864", "body": "One option would be to pass add an arg for the local fs path (or even an open file handler).", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/100088864/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/100106489", "body": "lib/ansible/module_utils/postgres.py|74 col 1 warning| - mutable default arg of type Dict [M511] [python/flake8]\r\n\r\nI would avoid using mutable default args (ie, kw={}) \r\n\r\ntry\r\n\r\n``` python\r\ndef postgres_conn(module, database=None, kw=None, enable_autocommit=False):\r\n    kw = kw or {}\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/100106489/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/100110712", "body": "For test/debug, I would suggest adding a 'raise' here. Otherwise any exception is going to get obscured.\r\n\r\n(For ex, I suspect the 'sslrootcert' error is actually a KeyError that makes it back to this except clause)", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/100110712/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/100110905", "body": "Guessing this should be a module.params.get('sslrootcert', None) otherwise it will be a KeyError (see comment below)", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/100110905/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/100117120", "body": "``` python\r\ndef postgres_conn(module, database=None, kw=None, enable_autocommit=False):\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/100117120/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/100133091", "body": "lib/ansible/modules/network/aos/aos_ip_pool.py:191:1: M511 - mutable default arg of type List\r\n\r\nThere is only one caller of create_new_ip_pool() and it provides all three args, so subnets doesnt need to be keyword arg or optional.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/100133091/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/100133627", "body": "This import doesn't appear to be used.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/100133627/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/100134310", "body": "As far as I can tell, the 'in_use' is never used.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/100134310/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/100363130", "body": "May want to use the configparser in 'ansible.compat.six.moves.configparser' here. Otherwise there are py2/py3 compat issues.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/100363130/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/100428818", "body": "It does, but for v2_runner_retry, it's a task before post_validate happens, so the result._task doesnt have the task name templated.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/100428818/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/102475292", "body": "Hmm, unintentional. Fixing.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/102475292/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/102575711", "body": "Added a test/integration/targets/*/aliases file, so ansible-test will find the tests and run it from CI and locally.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/102575711/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/103541812", "body": "hmm, no reason. Just keeping the style. \r\n\r\nupdating to use display.v*", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/103541812/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/103542171", "body": "one possible reason to check verbosity would be to make '-v' show just the config, else show the version (which also mentions the config file path albeit with a different msg)", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/103542171/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/105010479", "body": "The count here is important.\r\n\r\nWithout it any file loaded by dataloader will be loaded entirely and entire contents ran through a to_bytes(to_text())", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/105010479/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/105010890", "body": "Actually, that is plumbed through already.\r\n\r\nShould be okay.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/105010890/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/105012362", "body": "I don't remember why the options to the inner to_text()  here different or if it is significant.\r\n\r\n``` python\r\nvaulttext, encoding='ascii', errors='strict'\r\n```\r\nvs\r\n\r\n``` python\r\ndata, encoding='ascii', errors='strict', nonstring='strict'\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/105012362/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/105233812", "body": "'rekey' confirms the 'new' password later. The prompt for the existing old password does not need to confirm.\r\n\r\nThere is no 'new'.  Do you mean 'create' or 'view'?", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/105233812/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/105431734", "body": "```\r\n# ansible-vault is a script that encrypts/decrypts YAML files. See\r\n# http://docs.ansible.com/playbooks_vault.html for more details.\r\n```\r\n\r\nThat is true, but probably not needed here ;->", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/105431734/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/105759724", "body": "Added a special case for this.\r\n\r\nIt strikes me as odd that ANSIBLE_SQUASH_ACTIONS default is a string, while it's type is a list however.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/105759724/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/106676205", "body": "Where does the RHS decrypt come from?  It appears to be undefined here.\r\n\r\nNeeds to be passed to _assemble_from_fragments as an kwarg I assume.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/106676205/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/106677569", "body": "Why 'autodecrypt' here and 'decrypt' else where?", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/106677569/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/107169061", "body": "Seems reasonable for a 2.3 targeted fix.\r\n\r\nLong term (after 2.3) may be useful to add a constant for the keys that are whitelisted ( ie something like `and key not in C.INTERNAL_RESULT_KEYS_WHITELIST` )\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/107169061/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/107418652", "body": "I think I'd remove most of syntax compatibility changes from this pr/commit, and do those in a different commit/pr.\r\n\r\n(At least in cases where there are also non-syntax related changes that may eventually need to be back-ported/cherry-picked. Granted, in this case, the non-syntax changes are also not  2.4 compatible so it is unlikely to ever get backported to a works-with-py24 branch).\r\n\r\nBut in the past I've found it useful to have syntax related changes isolated.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/107418652/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/107419943", "body": "```from ansible.compat.tests import unittest```\r\n seems to have gotten incorrectly updated to reference module_utils.tests\r\n\r\n```\r\n============================================================================================= ERRORS ==============================================================================================\r\n_______________________________________________________________________ ERROR collecting test/units/inventory/test_host.py ________________________________________________________________________\r\nImportError while importing test module '/home/adrian/src/ansible/test/units/inventory/test_host.py'.\r\nHint: make sure your test modules/packages have valid Python names.\r\nTraceback:\r\n../../.local/lib/python2.7/site-packages/_pytest/python.py:418: in _importtestmodule\r\n    mod = self.fspath.pyimport(ensuresyspath=importmode)\r\n../../.local/lib/python2.7/site-packages/py/_path/local.py:662: in pyimport\r\n    __import__(modname)\r\n../../.local/lib/python2.7/site-packages/_pytest/assertion/rewrite.py:216: in load_module\r\n    py.builtin.exec_(co, mod.__dict__)\r\ntest/units/inventory/test_host.py:24: in <module>\r\n    from ansible.module_utils.tests import unittest\r\nE   ImportError: No module named tests\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/107419943/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/107422413", "body": "Not sure why, but I'm seeing unit test failures on these (py2.7 and py3.6):\r\n\r\n```\r\n____________________________________________________________________________ TestRecursiveFinder.test_from_import_six _____________________________________________________________________________\r\nself = <test_recursive_finder.TestRecursiveFinder object at 0x7ff40d32c250>\r\nfinder_containers = FinderContainers(py_module_names=set([('six',)]), py_module_cache={}, zf=<zipfile.ZipFile object at 0x7ff40d33c410>)\r\n\r\n    def test_from_import_six(self, finder_containers):\r\n        name = 'ping'\r\n        data = b'#!/usr/bin/python\\nfrom ansible.module_utils import six'\r\n        recursive_finder(name, data, *finder_containers)\r\n        assert finder_containers.py_module_names == set((('six',),))\r\n        assert finder_containers.py_module_cache == {}\r\n>       assert frozenset(finder_containers.zf.namelist()) == frozenset(('ansible/module_utils/__init__.py', 'ansible/module_utils/_six.py'))\r\nE       assert frozenset(['a...tils/six.py']) == frozenset(['an...ils/_six.py'])\r\nE         Extra items in the left set:\r\nE         'ansible/module_utils/six.py'\r\nE         Extra items in the right set:\r\nE         'ansible/module_utils/_six.py'\r\nE         'ansible/module_utils/__init__.py'\r\nE         Full diff:\r\nE         - frozenset(['ansible/module_utils/six.py'])\r\nE         + frozenset(['ansible/module_utils/__init__.py', 'ansible/module_utils/_six.py'])\r\n\r\ntest/units/executor/module_common/test_recursive_finder.py:118: AssertionError\r\n_______________________________________________________________________________ TestRecursiveFinder.test_import_six _______________________________________________________________________________\r\nself = <test_recursive_finder.TestRecursiveFinder object at 0x7ff40d33c490>\r\nfinder_containers = FinderContainers(py_module_names=set([('six',)]), py_module_cache={}, zf=<zipfile.ZipFile object at 0x7ff40d33c710>)\r\n\r\n    def test_import_six(self, finder_containers):\r\n        name = 'ping'\r\n        data = b'#!/usr/bin/python\\nimport ansible.module_utils.six'\r\n        recursive_finder(name, data, *finder_containers)\r\n        assert finder_containers.py_module_names == set((('six',),))\r\n        assert finder_containers.py_module_cache == {}\r\n>       assert frozenset(finder_containers.zf.namelist()) == frozenset(('ansible/module_utils/__init__.py', 'ansible/module_utils/_six.py'))\r\nE       assert frozenset(['a...tils/six.py']) == frozenset(['an...ils/_six.py'])\r\nE         Extra items in the left set:\r\nE         'ansible/module_utils/six.py'\r\nE         Extra items in the right set:\r\nE         'ansible/module_utils/_six.py'\r\nE         'ansible/module_utils/__init__.py'\r\nE         Full diff:\r\nE         - frozenset(['ansible/module_utils/six.py'])\r\nE         + frozenset(['ansible/module_utils/__init__.py', 'ansible/module_utils/_six.py'])\r\n\r\ntest/units/executor/module_common/test_recursive_finder.py:126: AssertionError\r\n____________________________________________________________________ TestRecursiveFinder.test_import_six_from_many_submodules _____________________________________________________________________\r\nself = <test_recursive_finder.TestRecursiveFinder object at 0x7ff40d33c790>\r\nfinder_containers = FinderContainers(py_module_names=set([('six',)]), py_module_cache={}, zf=<zipfile.ZipFile object at 0x7ff40d33ca10>)\r\n\r\n    def test_import_six_from_many_submodules(self, finder_containers):\r\n        name = 'ping'\r\n        data = b'#!/usr/bin/python\\nfrom ansible.module_utils.six.moves.urllib.parse import urlparse'\r\n        recursive_finder(name, data, *finder_containers)\r\n        assert finder_containers.py_module_names == set((('six',),))\r\n        assert finder_containers.py_module_cache == {}\r\n>       assert frozenset(finder_containers.zf.namelist()) == frozenset(('ansible/module_utils/__init__.py', 'ansible/module_utils/_six.py'))\r\nE       assert frozenset(['a...tils/six.py']) == frozenset(['an...ils/_six.py'])\r\nE         Extra items in the left set:\r\nE         'ansible/module_utils/six.py'\r\nE         Extra items in the right set:\r\nE         'ansible/module_utils/_six.py'\r\nE         'ansible/module_utils/__init__.py'\r\nE         Full diff:\r\nE         - frozenset(['ansible/module_utils/six.py'])\r\nE         + frozenset(['ansible/module_utils/__init__.py', 'ansible/module_utils/_six.py'])\r\n\r\ntest/units/executor/module_common/test_recursive_finder.py:134: AssertionError\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/107422413/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/108251489", "body": "Not sure this is correct (before or after patch), since the sentinel check is usually checking object identity.\r\nI would expect this to be:\r\n\r\n``` python\r\n_sentinel = object()\r\n def results_thread_main(strategy):\r\n      while True:\r\n          try:\r\n              result = strategy._final_q.get()\r\n              if result is _sentinel:\r\n                  break\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/108251489/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/110171201", "body": "That may depend on the version, but OpenSSH_7.4p1 shows the applied config, including command line options and -o options.\r\n\r\n.ssh.config snippet\r\n```\r\nHost local_ssh_ssh_config_wrong_user\r\n    HostName 127.0.0.1\r\n    User wronguser\r\n```\r\n\r\n\r\n```\r\n[fedora-25:ansible (facts_notes %)]$ ssh -G local_ssh_ssh_config_wrong_user | grep compress\r\ncompression no\r\ncompressionlevel 6\r\n[fedora-25:ansible (facts_notes %)]$ ssh -G -C adrian@local_ssh_ssh_config_wrong_user | grep compress\r\ncompression yes\r\ncompressionlevel 6\r\n[fedora-25:ansible (facts_notes %)]$ ssh -G local_ssh_ssh_config_wrong_user | grep user\r\nuser wronguser\r\nuserknownhostsfile ~/.ssh/known_hosts ~/.ssh/known_hosts2\r\n[fedora-25:ansible (facts_notes %)]$ ssh -G adrian@local_ssh_ssh_config_wrong_user | grep user\r\nuser adrian\r\nuserknownhostsfile ~/.ssh/known_hosts ~/.ssh/known_hosts2\r\n[fedora-25:ansible (facts_notes %)]$ ssh -G -o User=adrian local_ssh_ssh_config_wrong_user | grep user\r\nuser adrian\r\nuserknownhostsfile ~/.ssh/known_hosts ~/.ssh/known_hosts2\r\n[fedora-25:ansible (facts_notes %)]$ man ssh\r\n[fedora-25:ansible (facts_notes %)]$ ssh -G -l adrian local_ssh_ssh_config_wrong_user | grep user\r\nuser adrian\r\nuserknownhostsfile ~/.ssh/known_hosts ~/.ssh/known_hosts2\r\n[fedora-25:ansible (facts_notes %)]$ ssh -G -l adrian local_ssh_ssh_config_wrong_user | grep agent\r\nforwardagent no\r\n[fedora-25:ansible (facts_notes %)]$ ssh -G -l adrian local_ssh_ssh_config_wrong_user -A | grep agent\r\nforwardagent yes\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/110171201/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/110172653", "body": "@gundalow re, showing lack of -G support. Yeah, I'll add that. No reason not to since it would already be running with high verbosity.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/110172653/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/110178246", "body": "@gundalow added that message", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/110178246/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/110702275", "body": "module.run_command is catching subprocess.CalledProcessError and calling module.fail_json, so should never get this exception at this point.\r\n\r\n(looks like that was already in the existing code and not introduced in this pr, so just a note...)", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/110702275/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/112465990", "body": "Is this and the test/integration/targets/copy/tasks/main.yml changes intentional? They seem unrelated.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/112465990/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/112467209", "body": "I added a couple of test cases to https://github.com/bcoca/ansible/compare/unsafe_unsafe_again...alikins:test_is_template that include passing in a tuple as 'data', and that seems to cause is_template to always return True\r\n\r\n```\r\n_______________________________________________________________________ TestTemplarIsTemplate.test_is_template_just_a_tuple _______________________________________________________________________\r\nself = <units.template.test_templar.TestTemplarIsTemplate testMethod=test_is_template_just_a_tuple>\r\n\r\n    def test_is_template_just_a_tuple(self):\r\n        some_obj = ('foo', 'bar', 1, 3, 5, None)\r\n        res = self.templar.is_template(some_obj)\r\n>       self.assertFalse(res, 'is_template(%s) return should be False' % repr(some_obj))\r\nE       AssertionError: is_template(('foo', 'bar', 1, 3, 5, None)) return should be False\r\n\r\ntest/units/template/test_templar.py:347: AssertionError\r\n_________________________________________________________________ TestTemplarIsTemplate.test_is_template_just_a_tuple_with_false __________________________________________________________________\r\nself = <units.template.test_templar.TestTemplarIsTemplate testMethod=test_is_template_just_a_tuple_with_false>\r\n\r\n    def test_is_template_just_a_tuple_with_false(self):\r\n        some_obj = (False, 'foo', 'bar', 1, 3, 5, None)\r\n        res = self.templar.is_template(some_obj)\r\n>       self.assertFalse(res, 'is_template(%s) return should be False' % repr(some_obj))\r\nE       AssertionError: is_template((False, 'foo', 'bar', 1, 3, 5, None)) return should be False\r\n\r\ntest/units/template/test_templar.py:352: AssertionError\r\n__________________________________________________________________ TestTemplarIsTemplate.test_is_template_just_a_tuple_with_true __________________________________________________________________\r\nself = <units.template.test_templar.TestTemplarIsTemplate testMethod=test_is_template_just_a_tuple_with_true>\r\n\r\n    def test_is_template_just_a_tuple_with_true(self):\r\n        some_obj = (True, 'foo', 'bar', 1, 3, 5, None)\r\n        res = self.templar.is_template(some_obj)\r\n>       self.assertFalse(res, 'is_template(%s) return should be False' % repr(some_obj))\r\nE       AssertionError: is_template((True, 'foo', 'bar', 1, 3, 5, None)) return should be False\r\n\r\ntest/units/template/test_templar.py:357: AssertionError\r\n________________________________________________________________ TestTemplarIsTemplate.test_is_template_tuple_with_unsafe_template ________________________________________________________________\r\nself = <units.template.test_templar.TestTemplarIsTemplate testMethod=test_is_template_tuple_with_unsafe_template>\r\n\r\n    def test_is_template_tuple_with_unsafe_template(self):\r\n        some_obj = ('foo', 'bar', wrap_var('{{ some_var }}'))\r\n        res = self.templar.is_template(some_obj)\r\n>       self.assertFalse(res, 'is_template(%s) return should be False' % repr(some_obj))\r\nE       AssertionError: is_template(('foo', 'bar', u'{{ some_var }}')) return should be False\r\n\r\ntest/units/template/test_templar.py:367: AssertionError\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/112467209/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/112468774", "body": "I have a test case or two that fails somewhere in here, if the template string includes a '{%something%}'.\r\nNot sure what the expected behavior is for that.\r\n\r\n```\r\n__________________________________________________________________________ TestTemplarIsTemplate.test_is_template_block ___________________________________________________________________________\r\nself = <units.template.test_templar.TestTemplarIsTemplate testMethod=test_is_template_block>\r\n\r\n    def test_is_template_block(self):\r\n        res = self.templar.is_template(u'1 2 {%what%} 3 4 {{ some_var }} 5 6 7')\r\n>       self.assertTrue(res)\r\nE       AssertionError: False is not true\r\n\r\ntest/units/template/test_templar.py:276: AssertionError\r\n_____________________________________________________________________ TestTemplarIsTemplate.test_is_template_block_undefined ______________________________________________________________________\r\nself = <units.template.test_templar.TestTemplarIsTemplate testMethod=test_is_template_block_undefined>\r\n\r\n    def test_is_template_block_undefined(self):\r\n        res = self.templar.is_template(u'1 2 {%what%} 3 4 {{ foo }} 5 6 7')\r\n>       self.assertTrue(res)\r\nE       AssertionError: False is not true\r\n\r\ntest/units/template/test_templar.py:272: AssertionError\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/112468774/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/112477747", "body": "SyntaxError\r\n\r\n```\r\nlib/ansible/vars/__init__.py:41: in <module>\r\n    from ansible.template import Templar\r\nE     File \"/home/adrian/src/ansible/lib/ansible/template/__init__.py\", line 517\r\nE       for k in data.:\r\nE                     ^\r\nE   SyntaxError: invalid syntax\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/112477747/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/112478607", "body": "undefined var 'variable'\r\n\r\ns/variable/data", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/112478607/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/114614884", "body": "_squash_items() doesnt take a templar arg\r\n\r\n```\r\nThe full traceback is:\r\nTraceback (most recent call last):\r\n  File \"/home/adrian/src/ansible/lib/ansible/executor/task_executor.py\", line 99, in run\r\n    item_results = self._run_loop(items, templar)\r\n  File \"/home/adrian/src/ansible/lib/ansible/executor/task_executor.py\", line 271, in _run_loop\r\n    items = self._squash_items(items, loop_var, task_vars, templar)\r\nTypeError: _squash_items() takes exactly 4 arguments (5 given)\r\n\r\nfatal: [localhost]: FAILED! => {\r\n    \"failed\": true, \r\n    \"msg\": \"Unexpected failure during module execution.\", \r\n    \"stdout\": \"\"\r\n}\r\n```\r\n\r\nAdding a templar arg gets it pass the error, but the memory usage doesnt seem to improved", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/114614884/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/115333552", "body": "hmm, doesn't seem to be. ", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/115333552/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/115333739", "body": "removed now...", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/115333739/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/115587458", "body": "I think the PKG_MGR_MODULES data can live elsewhere, though constants.py seems reasonable to me (DEFAULT_SQUASH_ACTIONS lives there which seems similar).\r\n\r\nThe main requirement is getting it out of module_utils and facts.py to avoid the dependency from app into module_utils.facts.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/115587458/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/115589420", "body": "I'll clean up TODOs etc once  we cover most of the discussion.\r\n\r\n(wish there was a good way to markup/annotate code inline with git without using comments...)", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/115589420/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/115589935", "body": "+1 for no code in __init__.py! :+1: ", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/115589935/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/115590285", "body": "yup, none of the docstrings are really 'release' ready yet.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/115590285/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/115591372", "body": "nod. Afaict it is not needed anymore so my preference is to get rid of it.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/115591372/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/115601333", "body": "It could if called on a Facts() instance directly but app code only uses subclasses that provide a populate(). Removing remaining uses of populate() is on the TODO list. \r\n\r\nIt's pretty much just an interface/ABC now, but I've hesitated to remove because of the way Hardware/Network use __new__. I don't see any particular reason we need it though, so i'll add removing it to the TODO.\r\n\r\n(and just return an empty dict on base populate() for now)", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/115601333/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/115606711", "body": "That may be a little trickier. Currently the __init__.py module is used to import all of the hardware.Hardware() based impls (the metaclass based ones from current facts). If the modules aren't imported, the __new__() doesnt find the subclasses via module_utils.basic.get_all_subclasses() so only the default Hardware() is found.\r\n\r\nI have some ideas on how to eliminate the metaclass use, but not sure its worthwhile yet.\r\n\r\nThe main downside to the explicit imports is it means all of the modules are loading when the facts package is imported, which makes ansiballz include all of the modules in its import list.\r\n\r\nI have some ideas on how to do that at ansiballz construction time instead of (or in addition to) module runtime. But that is also a good chunk of 'facts plugins' which isnt on the 2.4 roadmap ", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/115606711/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/115608079", "body": "Ah, yup, thats pretty much my thinking (as mentioned in https://github.com/ansible/ansible/pull/23012#discussion_r115606711 before I saw this comment).\r\n\r\nI think getting rid of the new/metaclass oddness is doable for 2.4 as long as we dont try to avoid the static imports (there is some interesting stuff we could potentially do with a client/module side plugin loader, but def post-2.4...)\r\n\r\nCurrent plan is to add a fact collector 'tags' so the gather_subset (or something more dynamic) can get the platform='Linux' collectors in lieu of the current metaclass/platform matching)", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/115608079/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/116087319", "body": "@abadger in this branch, only action_write_locks uses PKG_MGR_MODULES and the only places I see action_write_locks is in strategy/__init__.py and module_common._find_module_utils which both only seem to be used controller side. \r\n\r\nAnd the only place PKG_MGRS is used is in lib/ansible/module_utils/facts/system/pkg_mgr.py which is only used remote side.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/116087319/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/116102272", "body": "For reasons unknown to me, openbsd_pkg is handle specifically in the pkg_mgr collection code and is left out of the list, so I left it that way. \r\n\r\nJumping around git history a bit, and it looks like the special case for openbsd was introduced in \r\n\r\n```\r\ncommit f485eb28f53de8b8cda12ddc153cd5ef53f7c057\r\nAuthor: Patrik Lundin <patrik.lundin.swe@gmail.com>\r\nDate:   Sun Mar 3 00:02:50 2013 +0100\r\n\r\n    Teach setup about OpenBSD package manager.\r\n    \r\n    * We cannot depend on the path because FreeBSD for example uses the same path.\r\n```\r\n\r\nThe good thing is now that I extracted the 'list of pkg mgrs that have ansible modules and benefit from having the lock pre-created' from the 'list of pkg mgrs that guides the pkgmgr fact collection' I can add it to the former without breaking the latter._", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/116102272/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/116104822", "body": "Could be, 'default_collectors' exists because it doesnt seem like now is the right time to add a module loader. So it is in there as an abstraction point for now, to be replaced with something more dynamic later (for ex, based on action provided module params (ala _ANSIBLE_ARGS) or 'whatever modules are in dir X' etc)\r\n\r\nWhat do you mean by 'container lists' ?", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/116104822/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/117304263", "body": "I think I would make limit_to_modules arg a list here, and do the comma split on the cli arg before calling list_modules. \r\n\r\n(currently it looks this would do odd things if attempting to build module docs for a module with a name like 'ec2_vps_cwt_jkg_none_facts' or 'firewalld' or 'easy_install'?  Haven't tested though so that may be covered...)", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/117304263/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/117801383", "body": "ModuleManager() doesn't seem to have an exit_json...\r\n\r\nMaybe mm.client.module.exit_json (if it is needed at all)?", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/117801383/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/119919589", "body": "looks like merge botch\r\n\r\nI've amended the commit and re-rebased on top of current devel and updated.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/119919589/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/120456140", "body": "Could/should this return an extra item for headers?\r\n\r\n``` python \r\n     module.fail_json(msg='error in end_point=>' + endpoint, headers=headers)\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/120456140/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/120456579", "body": "split headers and/or payload to different items in the fail_json? \r\n\r\n``` python\r\n    fail_json(msg='asfad', headers=headers, payload=payload)\r\n```\r\n\r\nSuppose that depends if it would ever be useful on its own instead of part of the error msg.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/120456579/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/120457581", "body": "I would suggest 'except Exception as e' unless there is a reason for the sys.exc_info()\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/120457581/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/120919737", "body": "dont reassign options.limit_to_modules, just created a new limit_to_modules var\r\n\r\n``` python\r\nif options.limit_to_modules is not None:\r\n    limit_to_modules = [s.lower() for s in options.limit_to_modules.split(\",\")]\r\n\r\nmod_info, categories, aliases = list_modules(options.module_dir, limit_to_modules=limit_to_modules)\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/120919737/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/120921072", "body": "urllib, traceback, sys dont seem to be used.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/120921072/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/120921334", "body": "to_text() isnt imported", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/120921334/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/120922938", "body": "Agreed on exception handling here. response.read() can raise exceptions as well as json.loads() and the item lookup.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/120922938/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/120923879", "body": "I like the code organization here \ud83d\udc4d , but it is a little different than most modules. Some folks may prefer the deeply nested args style. I don't think you should change it, just a heads up that it might be a little unusual to some folks.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/120923879/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/120932631", "body": "Could try running the command with the env setup to use LANG=C \r\n\r\nYou can specify the env for the command either with the 'environ_update' arg to run_command() or\r\nby setting module.run_command_environ_update before the run command.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/120932631/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/120936320", "body": "If config_source is only used in combo with direct, whichs looks to be the case, it may make sense to collapse it into one arg (config_source). Then GConfTool2.__init__ could:\r\n\r\n``` python\r\n\r\nif config_source:\r\n   self.base_command += [\"--direct\", \"--config-source\", config_source]\r\n\r\n```\r\n\r\nThat assumes there won't be a scenario where it makes sense to call 'gconftool-2 --direct' or 'gconftool-2 --config-souce some_config_source' independently. ", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/120936320/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/120938543", "body": "I think for this case, this should work:\r\n\r\n``` python\r\n\r\nrequired_if = [('state', 'present', ('value', 'value_type'))]\r\n```\r\n\r\nBut haven't tested that...", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/120938543/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/120939444", "body": "@azaghal I would leave it as you have it, with the explicit check for 'present'", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/120939444/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/120945621", "body": "@azaghal I think I agree with you that the old code was kind of doing the wrong thing by settings facts at all.\r\nAnd doubly so if:\r\n\r\n> the value changes on each invocation, overwriting what was previously set, it gives limited view of what values are available (just one, the last one changed/read etc),\r\n\r\nNot sure what to do about the backwards compatibility though. Suppose we could:\r\n\r\n- deprecated gconftool2 module\r\n- add this module as new module  (gconftool2_ctl?)\r\n- possibly add another new module for facts (gconftool2_facts)\r\n   - and fix up what it returns for facts so they dont clobber \r\n        - would each config_source need a namespace in this case? somthing like\r\n``` python\r\n            {\r\n                'gconftool_facts_default': {'some_key': (some_value, some_value_type)},\r\n                'gconftool_facts_some_other_config_source': {'some_key': (some_other_value, some_value_type)}\r\n            }\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/120945621/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/121001291", "body": "Good catch\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/121001291/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/122811090", "body": "I agree with a preference for os.path.join() if we are changing it.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/122811090/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/122812472", "body": "Why?", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/122812472/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/122830220", "body": "What scenario would cause duplex to be 'unknown'? \r\n\r\nhttps://www.kernel.org/doc/Documentation/ABI/testing/sysfs-class-net claims the valid values are 'half' and 'full' ", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/122830220/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/122830970", "body": "I'm not sure I understand why this is dependent on the 'duplex' value? \r\n\r\nFor /sys/class/net/* info, I'd prefer just to report what is found to try to avoid interpreting it much (we already do a little of that but I'd prefer not to add more). ", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/122830970/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/122833555", "body": "s/delte/delete", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/122833555/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/123016929", "body": "You are right, looking at kernel source, 'unknown' is a valid option for duplex (http://elixir.free-electrons.com/linux/v4.12-rc6/source/net/core/net-sysfs.c#L236 for example)", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/123016929/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/123030607", "body": "> In my case, when the duplex display \"unknown\", the speed will display wrong, it will display like \"65535\" or a larger number. At this time, i think not show better than show a wrong data even if this error is not caused by our query.\r\n\r\nInteresting. I assume ethtool output for those cases does the same?\r\n\r\nI'm wondering if that indicates ethtool cant detect the speed? Not sure we can tell when the speed is unknown because link is down, or if it is unknown because the NIC's ethtool support isnt complete. (http://elixir.free-electrons.com/linux/v4.12-rc6/source/net/core/ethtool.c#L558)\r\nLooks like http://elixir.free-electrons.com/linux/v4.12-rc6/source/include/uapi/linux/ethtool.h#L1507 defines unknown speed as decimal -1.\r\n\r\nhttp://elixir.free-electrons.com/linux/v4.12-rc6/source/include/uapi/linux/ethtool.h#L74 implies that the validity of the 'speed' value also depends on autonegotiation setting which further complicates interpretation of the data.\r\n\r\nI dont think we should add a ansible specific definition of these values, since that will lose information and introduce ambiguity. It may make sense to also introduce a new field or fact for our higher level interpretation of the results. That would allow tools/users that need the low level info to get while also providing a higher level summary.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/123030607/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/123032178", "body": "``` python\r\n     duplex = get_file_content(os.path.join(path, 'duplex'))\r\n     if duplex is not None:\r\n         interfaces[device]['duplex'] = duplex     \r\n```\r\n\r\nget_file_content() will do a os.path.exists(), so no need to do it before the call to get_file_content", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/123032178/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/124069155", "body": "Should this be \r\n``` python\r\nchecked_list.sort(key=lambda x: sorted(list(x.items())) if isinstance(x, dict) else x)\r\n```\r\n\r\ntracebacks from test failures in CI make me suspect the view object from set(x.items()) fails because set() wants hashable items and the view object from x.items() is not. Does wrapping it in a list() or tuple() work?\r\n```\r\n2017-06-26 16:43:33 The full traceback is:\r\n2017-06-26 16:43:33 Traceback (most recent call last):\r\n2017-06-26 16:43:33   File \"/tmp/ansible_cLYNf7/ansible_module_ecs_ecr.py\", line 304, in run\r\n2017-06-26 16:43:33     policy = sort_json_policy_dict(policy)\r\n2017-06-26 16:43:33   File \"/tmp/ansible_cLYNf7/ansible_modlib.zip/ansible/module_utils/ec2.py\", line 603, in sort_json_policy_dict\r\n2017-06-26 16:43:33     ordered_policy_dict[key] = value_is_list(value)\r\n2017-06-26 16:43:33   File \"/tmp/ansible_cLYNf7/ansible_modlib.zip/ansible/module_utils/ec2.py\", line 595, in value_is_list\r\n2017-06-26 16:43:33     checked_list.sort(key=lambda x: sorted(set(x.items())) if isinstance(x, dict) else x)\r\n2017-06-26 16:43:33   File \"/tmp/ansible_cLYNf7/ansible_modlib.zip/ansible/module_utils/ec2.py\", line 595, in <lambda>\r\n2017-06-26 16:43:33     checked_list.sort(key=lambda x: sorted(set(x.items())) if isinstance(x, dict) else x)\r\n2017-06-26 16:43:33 TypeError: unhashable type: 'list'\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/124069155/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/125061486", "body": "You are suppressing the suppress_extended_error arg if used when creating a AnsibleFileNotFound() ", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/125061486/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/125063750", "body": "If I were writing the exceptions from scratch, I think I would tend to defer most of the message formatting to the __repr__/__str__ if possible. But I'm not sure how intertwined the the message creation in the base AnsibleError __init__ is required, so there may be reasons we can't defer to __repr__...   ie, if there is code explicitly using AnsibleError.message instead of the str/repr results \r\n\r\nIt looks like there are some references to some_exception.message, though at first inspection I dont see any that would do that for an AnsibleError, so moving that to the repr/str might work.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/125063750/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/125064373", "body": "With the AnsibleFileNotFound changes, not sure we need to specify a message here.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/125064373/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/125065278", "body": "maybe s/paths/searched_paths to distinguish from 'file_name' a little more? Though the message formatting can tweak that however for using facing messages so doesnt matter a ton.  ", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/125065278/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/125065817", "body": "RE_ABS_PATH is maybe a little too concrete. Maybe wrap in a is_abs_path() method? ditto for RE_TASKS", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/125065817/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/125066479", "body": "I recommend adding some unit tests to directly test any defined regexes. Just makes it easier to test if you have to change it (and also provides example hits/misses). Granted, this is not a complex regex...", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/125066479/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/125069569", "body": "[just a note inspired by branch, not something that needs to be addressed by this pr]\r\n\r\nLooking though code that uses find_file_in_search_path(), there are some lookup plugins that dont really\r\ncheck the return value (ini looks like it can throw exceptions if result is None, csvfile doesnt check for !None, but does at least try/except around open() it)", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/125069569/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/125989554", "body": "ActionModule.run() results only need to be pickle'able? Or do they need to be JSON serializable?  The plain[1] py3 json.dumps() doesn't understand bytestrings, but not sure if that is an issue here.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/125989554/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/126480189", "body": "Could try \r\n\r\n``` python\r\ndef _get_vm_prop(vm, *attributes):\r\n    result = vm\r\n    for attribute in attributes:\r\n    < etc >\r\n```\r\n\r\nThat version is a tiny bit magic, but it would allow:\r\n\r\n``` python\r\n_get_vm_prop(vm, 'some_attr')\r\n\r\n# as well as\r\n_get_vm_prop(vm, 'some_attr', 'another_attr', 'etc_attr')\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/126480189/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/126493332", "body": "I would suggest using\r\n\r\n``` python\r\nfrom six.moves import configparser\r\n```\r\n\r\nCurrently inventory scripts aren't real consistent about how they handle compat issues like configparser, but thats\r\nclosest to how the app code and modules do it (they use the six provided in module_utils, but that is not recommended for external inv scripts)\r\n\r\n``` python\r\nfrom ansible.module_utils.six.moves import configparser\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/126493332/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/127729916", "body": "Why change the example docs? The yaml dict style is the preferred format for EXAMPLES", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/127729916/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/127731474", "body": "`from ansible.module_utils.basic import *` is deprecated now.\r\n\r\nSee http://docs.ansible.com/ansible/dev_guide/developing_modules_checklist.html\r\n\r\n> Import ansible.module_utils code in the same place as you import other libraries. In older code, this was done at the bottom of the file but that\u2019s no longer needed.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/127731474/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/127749379", "body": "I'd like to see the documentation describe some of the security tradeoffs involved in this approach  (ie, sending krb passwords over the wire)", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/127749379/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/127754694", "body": "Could this cause backwards compatibility issues?  If someone was relying on the previous behavior of adding the datacenter prefix to searchpath?\r\n\r\nI think the approach in this pr is better and more explicit. But I'm not sure if the change will introduce api differences from the 2.3 version though. Would users see a behavior change?", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/127754694/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/127760650", "body": "Any particular reason to not support sleep(0)?\r\n\r\nOr to allow float values?", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/127760650/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/127812497", "body": "I suspect it doesn't matter much in practice, given I suspect any useful sleep would be 5 or 10 sec or more. Just curiosity on my part ;->", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/127812497/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/128317719", "body": "Would there be any utility to sorted() on files/sub_folders?  AFAICT, os.walk will use the os.listdir() results directly for filenames. os.listdir() is doc'ed as 'arbitrary order' (iirc, more or less up to fs). \r\n\r\nWondering if sorting those results would make for more reproducible behavior when trying to replicate errors. It shouldn't matter at all if there are no bugs, but it could make tracking down odd failures easier.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/128317719/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/129334739", "body": "once https://github.com/ansible/ansible/pull/27085 is merged, this could become\r\n``` python\r\ncollector = ansible_collector.get_ansible_collector(all_collector_classes=default_collectors.collectors,\r\n                                                            filter_spec='default_ipv4'\r\n                                                            gather_subset=['!all', '!min', 'network'],\r\n                                                            gather_timeout=10)\r\n```\r\n\r\nThe '!all !min' will then prevent gathering the other 'minimal' facts and just grab the network facts.  \r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/129334739/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/130366239", "body": "Not sure I understand this. \r\n\r\nThis makes channels a mutable default arg, meaning the same reference will be used for all calls of this method which is almost always the wrong behavior.\r\n\r\nWhy subscribe() need a default arg? it is only ever called from once place in module main, and it is called with the 'channels' var which is a list by default. How would subscribe() get called without channels being a list?", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/130366239/reactions", "total_count": 3, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/131401186", "body": "Whats our preferred dummy var name?", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/131401186/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/131405242", "body": "I don't mind it myself because the 'zip' I have imported is (sometimes) not the builtin 'zip', so the different name makes sense. Also generally dislike shadowing so I'd like to keep it for the general case.\r\n\r\nBut granted, 'six' exists to abstract those details...\r\n\r\npylint has a built in 'redefining-builtins-modules' option that by default includes 'six.moves,future.builtins' so should be able to add 'ansible.module_utils.six.moves' to the exceptions.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/131405242/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/131409766", "body": "Nothing uses the read_file() statically so it doesn't gain anything other to make it static in one class and regular in another. I'd prefer them to be consistent.\r\n\r\nBut looking at it closer, it also doesnt need to be a public method at all. It is just a helper implementation of the the more abstract load().\r\n\r\nCan probably make FileVaultSecret.read_file() use self.loader now (or possibly with\r\nall or part of https://github.com/ansible/ansible/pull/27668/files and https://github.com/ansible/ansible/pull/27669/). So vault password files could use loader for encrypted files and whatever else dataloader enables.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/131409766/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/131412985", "body": "The default pylint match for dummy vars is:\r\n\r\n```\r\ndummy-variables-rgx=_+$|(_[a-zA-Z0-9_]*[a-zA-Z0-9]+?$)|dummy|^ignored_|^unused_\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/131412985/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/131415904", "body": "```\r\nnewswoop:F25:ansible (vault_pylint %)]$ ack --python ' _+ ' | wc -l\r\n82\r\n```\r\n\r\nthe (_[a-zA-Z0-9_]*[a-zA-Z0-9]+?$)  regex hits _anything, private methods etc ~7000 hits, afaict none of them to indicate unused vars\r\n\r\n'ignored' doesnt seem to be used much to indicate unused vars but is in a lot of var names\r\n\r\n'unused_' gets no matches.\r\n\r\n\r\nSo of the defaults, _ is the only one we use, and we've used it 82 times, most to indicate unused/dummy vars (including a view usages of 'for _ in range(some_count)'.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/131415904/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/131422583", "body": "I see 0 uses of 'dummy' for that purpose in current code (in 'ack --python \"dummy\"' output)", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/131422583/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/131430691", "body": "re  py2/py3 zip, I think that is vice-versa. On py2 six.moves.zip is itertools.izip, and on py3 it is the builtin zip.\r\n\r\npy2.7\r\n```\r\n[newswoop:F25:ansible (vault_pylint %)]$ python\r\nPython 2.7.13 (default, May 10 2017, 20:04:28) \r\n[GCC 6.3.1 20161221 (Red Hat 6.3.1-1)] on linux2\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> print(zip)\r\n<built-in function zip>\r\n>>> print(zip.__doc__)\r\nzip(seq1 [, seq2 [...]]) -> [(seq1[0], seq2[0] ...), (...)]\r\n\r\nReturn a list of tuples, where each tuple contains the i-th element\r\nfrom each of the argument sequences.  The returned list is truncated\r\nin length to the length of the shortest argument sequence.\r\n>>> from ansible.module_utils.six.moves import zip\r\n>>> print zip\r\n<type 'itertools.izip'>\r\n>>> print(zip.__doc__)\r\nizip(iter1 [,iter2 [...]]) --> izip object\r\n\r\nReturn a izip object whose .next() method returns a tuple where\r\nthe i-th element comes from the i-th iterable argument.  The .next()\r\nmethod continues until the shortest iterable in the argument sequence\r\nis exhausted and then it raises StopIteration.  Works like the zip()\r\nfunction but consumes less memory by returning an iterator instead of\r\na list.\r\n```\r\n\r\npy3.6\r\n```\r\n[newswoop:F25:ansible (vault_pylint %)]$ python3.6\r\nPython 3.6.2 (default, Jul 24 2017, 14:22:34) \r\n[GCC 6.3.1 20161221 (Red Hat 6.3.1-1)] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> print(zip)\r\n<class 'zip'>\r\n>>> print(zip.__doc__)\r\nzip(iter1 [,iter2 [...]]) --> zip object\r\n\r\nReturn a zip object whose .__next__() method returns a tuple where\r\nthe i-th element comes from the i-th iterable argument.  The .__next__()\r\nmethod continues until the shortest iterable in the argument sequence\r\nis exhausted and then it raises StopIteration.\r\n>>> from ansible.module_utils.six.moves import zip\r\n>>> print(zip)\r\n<class 'zip'>\r\n>>> print(zip.__doc__)\r\nzip(iter1 [,iter2 [...]]) --> zip object\r\n\r\nReturn a zip object whose .__next__() method returns a tuple where\r\nthe i-th element comes from the i-th iterable argument.  The .__next__()\r\nmethod continues until the shortest iterable in the argument sequence\r\nis exhausted and then it raises StopIteration.\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/131430691/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/131443407", "body": "May want to mention cases where static checking tool complains about multiple uses of 'dummy'. Pylint will complain if 'dummy' is used in a scope, then a list comprehension in that scope uses 'dummy' as well'.\r\n\r\nie, something like:\r\n\r\n``` python\r\ndef foobar(the_stuff, misc=None):\r\n   stuff, dummy = parse_stuff(the_stuff)\r\n\r\n   filtered_stuff = [misc_thing for misc_thing, dummy in parse_misc_to_tuple(misc)]\r\n```\r\nIf we want to detail that case, and suggest an option (I just used '_dummy', but whatever we decide...).", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/131443407/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/131659606", "body": "ah, looking again it wasn't pylint showing the error, it was flake8.  (I have both turned on for my checkers)\r\n\r\n```\r\ndiff --git lib/ansible/parsing/vault/__init__.py lib/ansible/parsing/vault/__init__.py\r\nindex 9040cbf..47a066a 100644\r\n--- lib/ansible/parsing/vault/__init__.py\r\n+++ lib/ansible/parsing/vault/__init__.py\r\n@@ -526,7 +526,7 @@ class VaultLib:\r\n         # the known vault secrets.\r\n         if not C.DEFAULT_VAULT_ID_MATCH:\r\n             # Add all of the known vault_ids as candidates for decrypting a vault.\r\n-            vault_id_matchers.extend([_vault_id for _vault_id, _dummy in self.secrets if _vault_id != vault_id])\r\n+            vault_id_matchers.extend([_vault_id for _vault_id, dummy in self.secrets if _vault_id != vault_id])\r\n \r\n         matched_secrets = match_secrets(self.secrets, vault_id_matchers)\r\n \r\n[newswoop:F25:ansible (vault_pylint %)]$ flake8  lib/ansible/parsing/vault/__init__.py \r\nlib/ansible/parsing/vault/__init__.py:529:64: F812 list comprehension redefines 'dummy' from line 490\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/131659606/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/131664188", "body": "Can we get away with setting stderr in the return here?\r\n\r\n``` python\r\n            res['stderr'] = err\r\n```\r\n\r\nThe way stderr is the result is handled was changed recently, but not sure of the implication. But having the stderr in the result might be useful in these cases if it doesn't cause the task to fail.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/131664188/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/132196408", "body": "@zmedico \r\n\r\n> I think really want to inherit collections.Mapping like I've done here:\r\n\r\nYup, seems like the right approach to me \ud83d\udc4d ", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/132196408/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/132202406", "body": "The existing AnsibleJ2Vars code seems to go out of it's way to avoid copys (aside from it's ._locals) \r\n```\r\nAdded bonus is avoiding duplicating the large\r\n    hashes that inject tends to be.\r\n```\r\nBut first glance, the Mapping in https://github.com/zmedico/ansible/pull/1/files seems to be all references without copies so seems like it should be okay to me, but haven't tested.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/132202406/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/133826973", "body": "maybe just one warning line?\r\n\r\n``` python\r\nvarname_conflicts = varnames.intersection(_RESERVED_NAMES)\r\nif varname_conflicts:\r\n    display.warning('Found variables using reserved names: %s' % ','.join(sorted(varname_conflicts)))\r\n```\r\n\r\nOr is the one warning per var so that the warning duplicate detector catches them? \r\nIf it is for warning de-duping, should each play get a fresh set of warnings or just one globally for each varname?\r\n(ie, include the play info in the warning msg...)", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/133826973/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/135600670", "body": "Is reversing the order here ( from 'unsub then sub' to 'sub then unsub') going to cause any problems?  Thinking about cases where a system/org may be out or almost out of available subs. ", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/135600670/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/136636165", "body": "Wrong name here, dupes with name for DEFAULT_CALLBACK_PLUGIN_PATH", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/136636165/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/136637159", "body": "should the 'M()' macro/marker be allowed in the name?", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/136637159/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/136644931", "body": "s/skeleten/skeleton", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/136644931/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/136646112", "body": "Other plugin path config names[1] capitalize 'Plugins' and/or 'Path'. plugin path names need to be updated so they are consistent.\r\n\r\n'Action plugins path' -> 'Action Plugins Path'\r\n'Vars plugins path' -> 'Vars Plugins Path'\r\n\r\n[1] ie, 'Callback Plugins Path',\r\n``` \r\n['Action plugins path',\r\n 'Cache Plugins Path',\r\n 'Callback Plugins Path',\r\n 'Callback Plugins Path',\r\n 'Inventory Plugins Path',\r\n 'Jinja2 Filter Plugins Path',\r\n 'Jinja2 Test Plugins Path',\r\n 'Lookup Plugins Path',\r\n 'Strategy Plugins Path',\r\n 'Vars plugins path']\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/136646112/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/136646305", "body": "s/privlege/privilege", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/136646305/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/136646962", "body": "probably should be 'LXC' or 'lxc' instead of 'Lxc'", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/136646962/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/136647335", "body": "rest of names start with a capital letter ", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/136647335/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/136647618", "body": "s/privelege/privilege", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/136647618/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/136648921", "body": "These are the choices for 'gather_subset' not 'gathering'", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/136648921/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/136657489", "body": "duplicate 'description' keys", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/136657489/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/136657588", "body": "duplicate description key", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/136657588/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/136659219", "body": "This line needs to be quoted/escaped. \r\nyaml turns this line into a dict:\r\n\r\n``` python\r\n{u'When \\u2018implicit\\u2019 (the default), the cache plugin will be ignored and facts will be gathered per play unless \\u2018gather_facts': u'False\\u2019 is set.'}\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/136659219/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/137606937", "body": "I think DEFAULT_SU needs 'deprecated' as well", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/137606937/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/137616573", "body": "type: here should be 'boolean' instead of 'bool'", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/137616573/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/138674254", "body": "It wants a pygments lexer name, valid options are ('yaml+jinja' or 'YAML+Jinja' or 'salt') http://pygments.org/docs/lexers/#pygments.lexers.templates.YamlJinjaLexer\r\n\r\nconf.py currently uses highlight_language 'YAML+Jinja'\r\n\r\nNot sure how 'sticky' the code-block lang is, but this is explicit if nothing else.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/138674254/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}]}, "mtnbikenc": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35051", "title": "ansible_virtualization_type and ansible_virtualization_role not recognized for Amazon EC2 C5 Instances", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!---\r\nName of the module, plugin, task or feature\r\nDo not include extra details here, e.g. \"vyos_command\" not \"the network module vyos_command\" or the full path\r\n-->\r\nlib/ansible/module_utils/facts/virtual/linux.py\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.5.0 (devel fb18338cdc) last updated 2018/01/18 11:02:22 (GMT -400)\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/rteague/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/rteague/git/clusters/aws-c1/ansible/lib/ansible\r\n  executable location = /home/rteague/git/clusters/aws-c1/ansible/bin/ansible\r\n  python version = 2.7.14 (default, Jan 11 2018, 14:45:11) [GCC 7.2.1 20170915 (Red Hat 7.2.1-2)]\r\n\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\nIf using Ansible 2.4 or above, paste the results of \"ansible-config dump --only-changed\"\r\nOtherwise, mention any settings you have changed/added/removed in ansible.cfg\r\n(or using the ANSIBLE_* environment variables).\r\n-->\r\n```\r\n$ ansible-config dump --only-changed\r\n(no output)\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!---\r\nMention the OS you are running Ansible from, and the OS you are\r\nmanaging, or say \"N/A\" for anything that is not platform-specific.\r\nAlso mention the specific version of what you are trying to control,\r\ne.g. if this is a network bug the version of firmware on the network device.\r\n-->\r\nN/A\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly -->\r\nAmazon EC2 C5 instances are not properly recognized due to a change in bios_vendor/sys_vendor identifier.\r\n\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\nOn a C5 instance:\r\n```\r\n$ ansible -m setup all -i /tmp/c5_host |grep \"virtualization\"\r\n        \"ansible_virtualization_role\": \"NA\", \r\n        \"ansible_virtualization_type\": \"NA\", \r\n```\r\n\r\n\r\n\r\n##### EXPECTED RESULTS\r\n<!--- What did you expect to happen when running the steps above? -->\r\nExpected _role and _type to be properly populated.\r\n\r\n##### ACTUAL RESULTS\r\n<!--- What actually happened? If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\nChecked on the EC2 C5 instance:\r\n# cat /sys/devices/virtual/dmi/id/bios_vendor\r\nAmazon EC2\r\n# cat /sys/devices/virtual/dmi/id/sys_vendor\r\nAmazon EC2\r\n# cat /sys/devices/virtual/dmi/id/product_name\r\nc5.large\r\n\r\nChecking on a normal EC2 instance:\r\n# cat /sys/devices/virtual/dmi/id/bios_vendor\r\nXen\r\n# cat /sys/devices/virtual/dmi/id/sys_vendor\r\nXen\r\n# cat /sys/devices/virtual/dmi/id/product_name\r\nHVM domU\r\n```\r\nPlease see related bug: https://bugzilla.redhat.com/show_bug.cgi?id=1533099", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35051/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "freeseacher": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35048", "title": "import_tasks inside include_tasks generates confusing error", "body": "\r\n##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\ncore\r\n\r\n##### ANSIBLE VERSION\r\n\r\n```\r\n2.4.2.0 - v2.4.3.0-0.5.rc2\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\n# ansible-config dump --only-changed\r\nANSIBLE_PIPELINING(env: ANSIBLE_SSH_PIPELINING) = True\r\nCACHE_PLUGIN(env: ANSIBLE_CACHE_PLUGIN) = yaml\r\nCACHE_PLUGIN_CONNECTION(env: ANSIBLE_CACHE_PLUGIN_CONNECTION) = /tmp/ansible_cache\r\nDEFAULT_ROLES_PATH(env: ANSIBLE_ROLES_PATH) = [u'/opt/tower/var/tower/roles/NOC', u'/opt/tower/var/tower/playbooks/NOC']\r\nDEFAULT_STDOUT_CALLBACK(env: ANSIBLE_STDOUT_CALLBACK) = debug\r\nHOST_KEY_CHECKING(env: ANSIBLE_HOST_KEY_CHECKING) = False\r\n\r\n-->\r\n\r\n##### OS / ENVIRONMENT\r\nN/A\r\n\r\n##### SUMMARY\r\nwrong error generated if import_tasks found in include_tasks file\r\n\r\n##### STEPS TO REPRODUCE\r\n\r\n```yaml\r\n- include_tasks: \"os/{{ ansible_distribution }}/main.yml\"\r\n...\r\ninside\r\n...\r\n- import_tasks: \"firewall.yml\"\r\n\r\n```\r\n\r\n\r\n##### EXPECTED RESULTS\r\nimport error/lint error/any error\r\n\r\n##### ACTUAL RESULTS\r\n```\r\nfatal: [node1]: FAILED! => {\r\n    \"reason\": \"'ansible_distribution' is undefined\"\r\n}\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35048/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "maxgio92": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35046", "title": "s3_lifecycle: Add support for non-current versions", "body": "##### ISSUE TYPE\r\nFeature Idea\r\n\r\n##### COMPONENT NAME\r\ns3_lifecycle\r\n\r\n##### ANSIBLE VERSION\r\n2.4.2.0\r\n\r\n##### OS / ENVIRONMENT\r\nMacOS 10.13.2\r\n\r\n##### SUMMARY\r\nIt would be nice to have control on which versions to apply the rule to (current version or previous non-current versions).\r\n\r\nActually is not possible to apply the rule for non-current version S3 objects and by default the rule will be applied only to current version objects; this is because the s3_lifecycle module uses Boto 2 .\r\n\r\nIn Boto 2 the Rule class does not support the non-current versions of the S3 objects instead Boto 3 does:\r\nhttp://boto.cloudhackers.com/en/latest/ref/s3.html?highlight=lifecycle#boto.s3.lifecycle.Rule\r\nhttps://boto3.readthedocs.io/en/latest/reference/services/s3.html#S3.BucketLifecycle.rules\r\n\r\nThe only solution seems to be to rewrite the entire module using Boto 3.\r\n\r\nThank you all!\r\n\r\n##### EXPECTED RESULTS\r\nIn s3_lifecycle module to have new options, something like this:\r\n- noncurrent_version_transition\r\n- noncurrent_version_storage_class\r\n- noncurrent_version_expiration\r\n\r\nin order to apply a rule to non-current versions of the objects.\r\n\r\n##### ACTUAL RESULTS\r\nIt is not possible to do it.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35046/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "marinus81": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35041", "title": "aci_rest: change not detected", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Bug Report \r\n - maybe Enhancement request?\r\n\r\n##### COMPONENT NAME\r\naci_rest\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n  config file = None\r\n  configured module search path = [u'/home/dhamann/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.12 (default, Nov 20 2017, 18:23:56) [GCC 5.4.0 20160609]\r\n\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\nIf using Ansible 2.4 or above, paste the results of \"ansible-config dump --only-changed\"\r\nOtherwise, mention any settings you have changed/added/removed in ansible.cfg\r\n(or using the ANSIBLE_* environment variables).\r\n-->\r\nDEFAULT_DEBUG(env: ANSIBLE_DEBUG) = False\r\nDEFAULT_STRATEGY(env: ANSIBLE_STRATEGY) = linear\r\n\r\n##### OS / ENVIRONMENT\r\n<!---\r\nMention the OS you are running Ansible from, and the OS you are\r\nmanaging, or say \"N/A\" for anything that is not platform-specific.\r\nAlso mention the specific version of what you are trying to control,\r\ne.g. if this is a network bug the version of firmware on the network device.\r\n-->\r\nN/A\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly -->\r\naci_rest module does not always detect changed config, but reports it as unchanged (\"ok:\")\r\n\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\nDepending on how you push the config to APIC the aci_rest module detects it as changed or not:\r\n\r\nThis example will always report as unchanged:\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n- name: Create CDP Policies\r\n      tags:\r\n        - create\r\n        - network\r\n      aci_rest:\r\n        host: \"{{ apic_hostname }}\"\r\n        username: \"{{ apic_username }}\"\r\n        password: \"{{ apic_password }}\"\r\n        validate_certs: false\r\n        method: post\r\n        path: \"api/node/mo/uni/infra.xml?rsp-subtree=modified\"\r\n        content: |\r\n          <infraInfra>\r\n            <cdpIfPol adminSt=\"{{item.state}}\"  name=\"{{item.name}}\" descr=\"CDP set to {{item.state}}\"/>\r\n          </infraInfra>\r\n      with_items:\r\n        - \"{{cdp_policies}}\"\r\n```\r\n\r\nThis playbook works as expected (\"ok:\" if nothing has changed and \"changed:\" otherwise)\r\n```yaml\r\n- name: Create CDP Policies\r\n      tags:\r\n        - create\r\n        - network\r\n      aci_rest:\r\n        host: \"{{ apic_hostname }}\"\r\n        username: \"{{ apic_username }}\"\r\n        password: \"{{ apic_password }}\"\r\n        validate_certs: false\r\n        method: post\r\n        path: \"api/node/mo/uni/infra/.xml?rsp-subtree=modified\"\r\n        content: |\r\n            <cdpIfPol adminSt=\"{{item.state}}\"  name=\"{{item.name}}\" descr=\"CDP set to {{item.state}}\"/>\r\n      with_items:\r\n        - \"{{cdp_policies}}\"\r\n```\r\nNote the difference in path: parameter (infra.xml vs. infra/.xml) as well as adjusted content.\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\nIn both cases changes to actual APIC config should result in \"changed:\" status\r\n\r\n##### ACTUAL RESULTS\r\n<!--- What actually happened? If possible run with extra verbosity (-vvvv) -->\r\nThe reason why the first playbook does not behave as expected is that APIC does not populate the \"status=\" parameter as expected by the aci_rest module (it will only report change if this parameter is set to either of 'created', 'modified', 'deleted')\r\n(see https://github.com/datacenter/aci-ansible/blob/e87db8f15e34ea7dc2e1b30fd445a4c59561bbc9/library/aci_rest.py#L270-L284)\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\nok: [localhost] => (item={u'state': u'enabled', u'name': u'cdp_on2'}) => {\r\n    \"changed\": false, \r\n    \"error_code\": 0, \r\n    \"error_text\": \"Success\", \r\n    \"imdata\": [\r\n        {\r\n            \"infraInfra\": {\r\n                \"attributes\": {\r\n                    \"childAction\": \"deleteNonPresent\", \r\n                    \"dn\": \"uni/infra\", \r\n                    \"lcOwn\": \"local\", \r\n                    \"modTs\": \"2017-08-17T01:40:52.471+01:00\", \r\n                    \"monPolDn\": \"uni/fabric/monfab-default\", \r\n                    \"name\": \"infra\", \r\n                    \"nameAlias\": \"\", \r\n                    \"ownerKey\": \"\", \r\n                    \"ownerTag\": \"\", \r\n                    \"rn\": \"\", \r\n                    \"status\": \"\", \r\n                    \"uid\": \"0\"\r\n                }, \r\n                \"children\": [\r\n                    {\r\n                        \"cdpIfPol\": {\r\n                            \"attributes\": {\r\n                                \"adminSt\": \"enabled\", \r\n                                \"childAction\": \"deleteNonPresent\", \r\n                                \"descr\": \"\", \r\n                                \"extMngdBy\": \"\", \r\n                                \"lcOwn\": \"local\", \r\n                                \"modTs\": \"2018-01-17T09:45:05.902+01:00\", \r\n                                \"monPolDn\": \"\", \r\n                                \"name\": \"cdp_on2\", \r\n                                \"nameAlias\": \"\", \r\n                                \"ownerKey\": \"\", \r\n                                \"ownerTag\": \"\", \r\n                                \"rn\": \"cdpIfP-cdp_on2\", \r\n                                \"status\": \"\", \r\n                                \"uid\": \"17805\"\r\n                            }\r\n                        }\r\n                    }\r\n                ]\r\n            }\r\n        }\r\n    ], \r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"content\": \"<infraInfra>\\n  <cdpIfPol adminSt=\\\"enabled\\\"  name=\\\"cdp_on2\\\" />\\n</infraInfra>\\n\", \r\n            \"host\": \"apic.ddsdnlab.at\", \r\n            \"hostname\": \"apic.ddsdnlab.at\", \r\n            \"method\": \"post\", \r\n            \"password\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\", \r\n            \"path\": \"api/node/mo/uni/infra.xml?rsp-subtree=modified\", \r\n            \"protocol\": \"https\", \r\n            \"src\": null, \r\n            \"timeout\": 30, \r\n            \"use_proxy\": true, \r\n            \"use_ssl\": true, \r\n            \"username\": \"ansible\", \r\n            \"validate_certs\": false\r\n        }\r\n    }, \r\n    \"item\": {\r\n        \"name\": \"cdp_on2\", \r\n        \"state\": \"enabled\"\r\n    }, \r\n    \"response\": \"OK (544 bytes)\", \r\n    \"status\": 200, \r\n    \"totalCount\": \"1\", \r\n    \"url\": \"https://apic.ddsdnlab.at/api/node/mo/uni/infra.xml?rsp-subtree=modified\"\r\n}\r\n```\r\n\r\nOn the other hand the second playbook runs as expected as returned data from APIC contains (status='modified'):\r\n\r\n```\r\nchanged: [localhost] => (item={u'state': u'enabled', u'name': u'cdp_on'}) => {\r\n    \"changed\": true, \r\n    \"error_code\": 0, \r\n    \"error_text\": \"Success\", \r\n    \"imdata\": [\r\n        {\r\n            \"cdpIfPol\": {\r\n                \"attributes\": {\r\n                    \"adminSt\": \"enabled\", \r\n                    \"childAction\": \"deleteNonPresent\", \r\n                    \"descr\": \"CDP set to enabled\", \r\n                    \"dn\": \"uni/infra/cdpIfP-cdp_on\", \r\n                    \"extMngdBy\": \"\", \r\n                    \"lcOwn\": \"local\", \r\n                    \"modTs\": \"2018-01-18T05:26:34.072+01:00\", \r\n                    \"monPolDn\": \"uni/fabric/monfab-default\", \r\n                    \"name\": \"cdp_on\", \r\n                    \"nameAlias\": \"\", \r\n                    \"ownerKey\": \"\", \r\n                    \"ownerTag\": \"\", \r\n                    \"rn\": \"\", \r\n                    \"status\": \"modified\", \r\n                    \"uid\": \"15374\"\r\n                }\r\n            }\r\n        }\r\n    ], \r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"content\": \"<cdpIfPol adminSt=\\\"enabled\\\"  name=\\\"cdp_on\\\" descr=\\\"CDP set to enabled\\\"/>\\n\", \r\n            \"host\": \"apic.ddsdnlab.at\", \r\n            \"hostname\": \"apic.ddsdnlab.at\", \r\n            \"method\": \"post\", \r\n            \"password\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\", \r\n            \"path\": \"api/node/mo/uni/infra/.xml?rsp-subtree=modified\", \r\n            \"protocol\": \"https\", \r\n            \"src\": null, \r\n            \"timeout\": 30, \r\n            \"use_proxy\": true, \r\n            \"use_ssl\": true, \r\n            \"username\": \"ansible\", \r\n            \"validate_certs\": false\r\n        }\r\n    }, \r\n    \"item\": {\r\n        \"name\": \"cdp_on\", \r\n        \"state\": \"enabled\"\r\n    }, \r\n    \"response\": \"OK (375 bytes)\", \r\n    \"status\": 200, \r\n    \"totalCount\": \"1\", \r\n    \"url\": \"https://apic.ddsdnlab.at/api/node/mo/uni/infra/.xml?rsp-subtree=modified\"\r\n}\r\n```\r\n\r\nGiven this (weired?) behavior of APIC (I confirmed this behavior is the same on APIC versions 3.0, 3.1 and 2.1), I think the current implementation of aci_changed() might be insufficient.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35041/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "tiraboschi": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35039", "title": "ovirt_hosts has iscsidiscover and iscsilogin state but it misses iscsilogout", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\novirt_hosts\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Aug  4 2017, 00:39:18) [GCC 4.8.5 20150623 (Red Hat 4.8.5-16)]\r\n\r\n```\r\n\r\n##### CONFIGURATION\r\n\r\n\r\n##### OS / ENVIRONMENT\r\nCentos 7\r\n\r\n##### SUMMARY\r\novirt_hosts has iscsidiscover and iscsilogin state but it misses iscsilogout, \r\noVIrt REST APIs lacks it as well: https://bugzilla.redhat.com/show_bug.cgi?id=1535951\r\n\r\novirt_host_storage_facts then performs an implicit iSCSI login:\r\nhttps://github.com/ansible/ansible/blob/devel/lib/ansible/modules/cloud/ovirt/ovirt_host_storage_facts.py#L134 and so you need the full iSCSI parameters set while according to its example it should simply Gather facts about HostStorages with specified target and address\r\n\r\n\r\n\r\n##### STEPS TO REPRODUCE\r\nTry an iSCSI logout\r\n\r\n##### EXPECTED RESULTS\r\niscsilogout state\r\n\r\n##### ACTUAL RESULTS\r\niscsidiscover and iscsilogin state are there but iscsilogout is not\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35039/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/41ce1eaea95258d16eefb9cb8b38db1e8be1f348", "message": "ovirt_disk: support sparse parameter (#34091) (#34894)\n\nSupport sparse parameter as an explicit\nvalue to allow creating raw-sparse disks.\n\nThis commit fixes #34091"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "Chetan-CSI": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35034", "title": "An error occurred (RequestLimitExceeded) when calling the DescribeVpcEndpoints operation ", "body": "An error occurred (RequestLimitExceeded) when calling the DescribeVpcEndpoints operation \r\n\r\nISSUE TYPE\r\nBug Report\r\n\r\nCOMPONENT NAME\r\nec2_vpc_endpoint_facts\r\n\r\nANSIBLE VERSION\r\n```\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Aug  4 2017, 00:39:18) [GCC 4.8.5 20150623 (Red Hat 4.8.5-16)]\r\n```\r\n\r\nCONFIGURATION\r\nDEFAULT_ROLES_PATH(/etc/ansible/ansible.cfg) = [u'/etc/ansible/roles', u'/usr/share/ansible/roles']\r\n\r\n OS / ENVIRONMENT\r\nCentos7.4\r\n\r\nSUMMARY\r\nReceived this error while trying to collect  VPC endpoint facts.\r\n\r\nSTEPS TO REPRODUCE\r\n1. Provision AWS VPC,  Subnets \r\n2. Collect VPC endpoint facts -> Throws RateLimitExceeded error\r\n\r\n```\r\n- name: EC2 VPC | Gather VPC s3 endpoint facts\r\n  ec2_vpc_endpoint_facts:\r\n    query: endpoints\r\n    region: \"{{ net_data.network_region }}\"\r\n    filters:\r\n      vpc-id: \"{{ vpc.vpc.id }}\"\r\n      vpc-endpoint-state:\r\n        - available\r\n      service-name: \"com.amazonaws.{{ net_data.network_region }}.s3\"\r\n  register: existing_s3_endpoints\r\n\r\n- name: EC2 VPC | Create a VPC s3 endpoint, only if doesn't exist\r\n  ec2_vpc_endpoint:\r\n    state: present\r\n    region: \"{{ net_data.network_region }}\"\r\n    vpc_id: \"{{ vpc.vpc.id }}\"\r\n    service: \"com.amazonaws.{{ net_data.network_region }}.s3\"\r\n  register: vpc_s3_endpoint\r\n  when: existing_s3_endpoints.vpc_endpoints == []\r\n```\r\nEXPECTED RESULTS\r\nVPC endpoint facts should have been fetched succssfully.\r\n\r\n##### ACTUAL RESULTS\r\nReceiving request limit exceeded error.\r\n```\r\n \"raw_output\": {\"localhost\": {\"_ansible_no_log\": false, \"_ansible_parsed\": false, \"changed\": false, \"exception\": \"Traceback (most recent call last):\\n File \\\"/tmp/ansible_3EyYlb/ansible_module_ec2_vpc_endpoint_facts.py\\\", line 205, in <module>\\n main()\\n File \\\"/tmp/ansible_3EyYlb/ansible_module_ec2_vpc_endpoint_facts.py\\\", line 199, in main\\n results = invocations[module.params.get('query')](connection, module)\\n File \\\"/tmp/ansible_3EyYlb/ansible_module_ec2_vpc_endpoint_facts.py\\\", line 157, in get_endpoints\\n response = client.describe_vpc_endpoints(*params)\\n File \\\"/usr/lib/python2.7/site-packages/botocore/client.py\\\", line 312, in _api_call\\n return self._make_api_call(operation_name, kwargs)\\n File \\\"/usr/lib/python2.7/site-packages/botocore/client.py\\\", line 601, in _make_api_call\\n raise error_class(parsed_response, operation_name)\\nbotocore.exceptions.ClientError: An error occurred (RequestLimitExceeded) when calling the DescribeVpcEndpoints operation (reached max retries: 4): Request limit exceeded.\\n\", \"failed\": true, \"module_stderr\": \"Traceback (most recent call last):\\n File \\\"/tmp/ansible_3EyYlb/ansible_module_ec2_vpc_endpoint_facts.py\\\", line 205, in <module>\\n main()\\n File \\\"/tmp/ansible_3EyYlb/ansible_module_ec2_vpc_endpoint_facts.py\\\", line 199, in main\\n results = invocations[module.params.get('query')](connection, module)\\n File \\\"/tmp/ansible_3EyYlb/ansible_module_ec2_vpc_endpoint_facts.py\\\", line 157, in get_endpoints\\n response = client.describe_vpc_endpoints(*params)\\n File \\\"/usr/lib/python2.7/site-packages/botocore/client.py\\\", line 312, in _api_call\\n return self._make_api_call(operation_name, kwargs)\\n File \\\"/usr/lib/python2.7/site-packages/botocore/client.py\\\", line 601, in _make_api_call\\n raise error_class(parsed_response, operation_name)\\nbotocore.exceptions.ClientError: An error occurred (RequestLimitExceeded) when calling the DescribeVpcEndpoints operation (reached max retries: 4): Request limit exceeded.\\n\", \"module_stdout\": \"\", \"msg\": \"MODULE FAILURE\", \"rc\": 0}}, \"task\": {\"id\": \"06164f46-5166-9c6c-b611-00000000005c\", \"name\": \"EC2 VPC | Gather VPC s3 endpoint facts\", \"start\": 1513760461.687647}}\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35034/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/35032", "title": "An error occurred (RequestLimitExceeded) when calling the DescribeSubnets operation ", "body": "ISSUE TYPE\r\nBug Report\r\n\r\nCOMPONENT NAME\r\nec2_vpc_subnet\r\n\r\nANSIBLE VERSION\r\n```\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Aug  4 2017, 00:39:18) [GCC 4.8.5 20150623 (Red Hat 4.8.5-16)]\r\n```\r\n\r\nCONFIGURATION\r\nDEFAULT_ROLES_PATH(/etc/ansible/ansible.cfg) = [u'/etc/ansible/roles', u'/usr/share/ansible/roles']\r\n\r\n OS / ENVIRONMENT\r\nCentos7.4\r\n\r\nSUMMARY\r\nReceived the error for max tries exceeded while deleting aws subnetwork.\r\nCould not reproduce this issue in the next iteration, but seems to be an intermittent one.\r\n\r\nSTEPS TO REPRODUCE\r\n1. Provision AWS VPC and Subnets\r\n2. De-provision AWS VPC and Subnets -> Throws RateLimitExceeded error\r\n\r\n```\r\n- block:\r\n  - name: EC2 VPC | Remove subnetwork\r\n    ec2_vpc_subnet:\r\n      vpc_id: \"{{ vpc_id }}\"\r\n      region: \"{{ net_data.network_region }}\"\r\n      cidr: \"{{ net_data.subnet_range }}\"\r\n      resource_tags:\r\n        Name: \"{{ resource_env.domain }}/{{ resource_env.env }}/{{ net_data.subnet_name }}\"\r\n        csi-environment: \"{{ resource_env.domain }}-{{ resource_env.env }}\"\r\n      state: absent\r\n  ignore_errors: true\r\n```\r\n##### EXPECTED RESULTS\r\nVPC and Subnets should have been deleted successfully.\r\n\r\n##### ACTUAL RESULTS\r\nFailed while deleting AWS VPC/Subnets\r\n```\r\nTraceback (most recent call last):\r\nFile \"/tmp/ansible_zYmUJP/ansible_module_ec2_vpc_subnet.py\", line 265, in main\r\ncheck_mode=module.check_mode)\r\nFile \"/tmp/ansible_zYmUJP/ansible_module_ec2_vpc_subnet.py\", line 214, in ensure_subnet_absent\r\nsubnet = get_matching_subnet(conn, vpc_id, cidr)\r\nFile \"/tmp/ansible_zYmUJP/ansible_module_ec2_vpc_subnet.py\", line 177, in get_matching_subnet\r\nsubnets = get_subnet_info(conn.describe_subnets(Filters=filters))\r\nFile \"/usr/lib/python2.7/site-packages/botocore/client.py\", line 312, in _api_call\r\nreturn self._make_api_call(operation_name, kwargs)\r\nFile \"/usr/lib/python2.7/site-packages/botocore/client.py\", line 601, in _make_api_call\r\nraise error_class(parsed_response, operation_name)\r\nClientError: An error occurred (RequestLimitExceeded) when calling the DescribeSubnets operation (reached max retries: 4): Request limit exceeded.\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35032/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/d0a257efadaad30b064feea0aa9cc8c577ea360c", "message": "aws-describe-subnets-rate-limit (#35044)"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "NZSmartie": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35030", "title": "delegate_to with unreachable hosts breaks playbook", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\ndelegate_to\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.12 (default, Nov 20 2017, 18:23:56) [GCC 5.4.0 20160609]\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\nUbuntu 16.04.3 LTS\r\n\r\n##### SUMMARY\r\nUsing `delegate_to` (a perfect example can be found in the documentation [http://docs.ansible.com/ansible/latest/playbooks_delegation.html#delegated-facts](http://docs.ansible.com/ansible/latest/playbooks_delegation.html#delegated-facts)); When a host passed along to `delegate_to` is unreachable for whatever reason. The host that is executing the task will be also be marked as unreachable. After a large error is printed out (output from all hosts in the `delegate_to`?) and the playbook ends with something like:\r\n```\r\nPLAY RECAP *************************************************************************************************************************************************\r\nfoo.example.com    : ok=0    changed=0    unreachable=1    failed=0\r\n```\r\n\r\n##### STEPS TO REPRODUCE\r\nplaybook.yml:\r\n```yaml\r\n---\r\n- hosts: app_servers\r\n  tasks:\r\n    - name: gather facts from db servers\r\n      setup:\r\n      delegate_to: \"{{ item }}\"\r\n      delegate_facts: True\r\n      with_items: \"{{groups['dbservers']}}\"\r\n    - name: test\r\n      debug:\r\n        msg: \"test\"\r\n```\r\n\r\ninventory.yml:\r\n```yaml\r\n---\r\nall:\r\n  children:\r\n    app_servers:\r\n      hosts:\r\n        foo.example.com:\r\n    dbservers:\r\n      hosts:\r\n        bar.example.com:\r\n```\r\n\r\n##### EXPECTED RESULTS\r\n```\r\nPLAY [app_servers] ***********************************************************************************************************************************\r\n\r\nTASK [gather facts from db servers] ******************************************************************************************************************\r\nfailed: [foo.example.com] (item=bar.example.com) => {\"item\": \"bar.example.com\", \"msg\": \"Failed to connect to the host via ssh: ssh: connect to host bar.example.com port 22: Connection timed out\\r\\n\", \"unreachable\": true}\r\n\r\nTASK [test] ************************************************************************************************************************************************\r\nok: [foo.example.com] => {\r\n    \"msg\": \"test\"\r\n}\r\n```\r\n\r\n##### ACTUAL RESULTS\r\n```\r\nPLAY [app_servers] ***********************************************************************************************************************************\r\n\r\nTASK [gather facts from db servers] ******************************************************************************************************************\r\nfailed: [foo.example.com] (item=bar.example.com) => {\"item\": \"bar.example.com\", \"msg\": \"Failed to connect to the host via ssh: ssh: connect to host bar.example.com port 22: Connection timed out\\r\\n\", \"unreachable\": true}\r\nfatal: [foo.example.com]: UNREACHABLE! => {\"changed\": false, \"msg\": \"All items completed\", \"...\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35030/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "hvindin": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35029", "title": "Copy module silently truncates files if target server tmp location is to small.", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\nCopy module\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/l066731/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Aug 29 2016, 10:12:21) [GCC 4.8.5 20150623 (Red Hat 4.8.5-4)]\r\n```\r\n\r\n##### CONFIGURATION\r\n```\r\nALLOW_WORLD_READABLE_TMPFILES(/etc/ansible/ansible.cfg) = True\r\nANSIBLE_PIPELINING(/etc/ansible/ansible.cfg) = True\r\nANSIBLE_SSH_ARGS(/etc/ansible/ansible.cfg) = -C -o ControlMaster=auto -o ControlPersist=240s\r\nANSIBLE_SSH_CONTROL_PATH_DIR(/etc/ansible/ansible.cfg) = ~/.ansible/cp\r\nCACHE_PLUGIN(/etc/ansible/ansible.cfg) = redis\r\nCACHE_PLUGIN_CONNECTION(/etc/ansible/ansible.cfg) = localhost:6379:0\r\nCACHE_PLUGIN_TIMEOUT(/etc/ansible/ansible.cfg) = 10000\r\nCOMMAND_WARNINGS(/etc/ansible/ansible.cfg) = False\r\nDEFAULT_ALLOW_UNSAFE_LOOKUPS(/etc/ansible/ansible.cfg) = True\r\nDEFAULT_CALLBACK_WHITELIST(/etc/ansible/ansible.cfg) = ['timer', 'skippy', 'profile_roles', 'junit']\r\nDEFAULT_FORKS(/etc/ansible/ansible.cfg) = 15\r\nDEFAULT_GATHERING(/etc/ansible/ansible.cfg) = smart\r\nDEFAULT_GATHER_SUBSET(/etc/ansible/ansible.cfg) = all\r\nDEFAULT_GATHER_TIMEOUT(/etc/ansible/ansible.cfg) = 60\r\nDEFAULT_HASH_BEHAVIOUR(/etc/ansible/ansible.cfg) = replace\r\nDEFAULT_LOAD_CALLBACK_PLUGINS(/etc/ansible/ansible.cfg) = True\r\nDEFAULT_LOG_PATH(/etc/ansible/ansible.cfg) = /var/log/ansible/ansible.log\r\nDEFAULT_MANAGED_STR(/etc/ansible/ansible.cfg) = Ansible managed: {file} %Y-%m-%d %H:%M:%S\r\nDEFAULT_PRIVATE_ROLE_VARS(/etc/ansible/ansible.cfg) = True\r\nDEFAULT_SCP_IF_SSH(/etc/ansible/ansible.cfg) = smart\r\nDEFAULT_SFTP_BATCH_MODE(/etc/ansible/ansible.cfg) = False\r\nDEFAULT_SSH_TRANSFER_METHOD(/etc/ansible/ansible.cfg) = smart\r\nDEFAULT_TRANSPORT(/etc/ansible/ansible.cfg) = smart\r\nDEFAULT_UNDEFINED_VAR_BEHAVIOR(/etc/ansible/ansible.cfg) = True\r\nDEPRECATION_WARNINGS(/etc/ansible/ansible.cfg) = False\r\nDISPLAY_ARGS_TO_STDOUT(/etc/ansible/ansible.cfg) = True\r\nDISPLAY_SKIPPED_HOSTS(/etc/ansible/ansible.cfg) = True\r\nERROR_ON_MISSING_HANDLER(/etc/ansible/ansible.cfg) = True\r\nSHOW_CUSTOM_STATS(/etc/ansible/ansible.cfg) = True\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\nRunning with master and target server on Red Hat Enterprise Linux Server 7.2 (Maipo)\r\n\r\n##### SUMMARY\r\nThe Copy module seems to silently fail if the tmp location runs out of space when copying a large file. The copy module will simply fill the diskmount for the defined tmp location on the target server then move the truncated file to the desired path without notifying the user of the failed copy.\r\n\r\nThis can be caught by checking the hash's or file size of the target file, but this seems like it's something that the copy module itself should be able to do to validate that a copy actually occurred correctly.\r\n\r\n##### STEPS TO REPRODUCE\r\nSet up an environment with a target server with a /home diskmount of 2gb size\r\nConfigure ansible to use ~/.ansible/tmp for tmp when copying files (I assume this works if you set the tmp directory to any location with a limited size mount, but I'll use /home for the sake of simplicity)\r\n\r\nGenerate a 3gb random file `dd if=/dev/urandom of=random bs=1M count=3072` and place it in the files directory of a role.\r\nExecute the following role:\r\n\r\n```yaml\r\n- name: copy random file to /random\r\n  copy:\r\n    src: random\r\n    dest: /random\r\n    force: yes\r\n  register: copied\r\n\r\n- name: debug copied\r\n  debug:\r\n    var: copied\r\n\r\n- name: debug random file stat\r\n  local_action: stat path=\"{{ role_path }}/files/random\"\r\n  register: local_file\r\n\r\n- name: debug random file details\r\n  local_action: debug msg=\"{{ local_file.stat }}\"\r\n```\r\n\r\n##### EXPECTED RESULTS\r\nThe sha1sum's of the files copied to the server should match if the copy is successful. If the copy is *not* successful then the copy task should fail.\r\n\r\nIf the target diskmount hasn't got sufficient space for the copied file, the copy task should fail when it runs out of space, not silently truncating the file.\r\n\r\n##### ACTUAL RESULTS\r\nThe copy task is \"successful\" (changed) but the sha1sum of each of the files is random depending how much of the file actually copied to the server before the disk capped storage space.\r\n\r\nBelow trimmed down execution on 5 servers with varying amount of stuff already on the /home directory:\r\n```yaml\r\nPLAY [all] ***********************************************************************************************************************************************************************************\r\n\r\nTASK [test : copy random file to /random src=random, force=True, mode=a=rwX, dest=/random, group=root, owner=root] ***************************************************************\r\nchanged: [auslslnxsd4958]\r\nchanged: [auslslnxsd5505]\r\nchanged: [auslslnxsd3899]\r\nchanged: [auslslnxsd5502]\r\nchanged: [auslslnxsd4960]\r\n\r\nTASK [test : debug copied var=copied] ****************************************************************************************************************************************************\r\nok: [auslslnxsd4958] => {\r\n    \"copied\": {\r\n        \"checksum\": \"0f1d62e25d9487eed4c302a7320d3dd2e37c97cd\", \r\n        \"dest\": \"/random\", \r\n        \"size\": 1761767424, \r\n    }\r\n}\r\nok: [auslslnxsd5505] => {\r\n    \"copied\": {\r\n        \"checksum\": \"5aa686f6fc2038a57bc053c4f7256d1a0144c2a8\", \r\n        \"dest\": \"/random\",\r\n        \"size\": 1913671680\r\n    }\r\n}\r\nok: [auslslnxsd3899] => {\r\n    \"copied\": {\r\n        \"checksum\": \"96febf0131e1e8e70d883bd74e3b66ee1bcbd67d\", \r\n        \"dest\": \"/random\", \r\n        \"size\": 1911713792\r\n    }\r\n}\r\nok: [auslslnxsd5502] => {\r\n    \"copied\": {\r\n        \"checksum\": \"7bd512c18837afd438df718d9304c94a12bacd7a\", \r\n        \"dest\": \"/random\", \r\n        \"size\": 1913860096 \r\n    }\r\n}\r\nok: [auslslnxsd4960] => {\r\n    \"copied\": {\r\n        \"checksum\": \"b761ec98e3578742c2911851fa8f712cbb531de2\", \r\n        \"dest\": \"/random\", \r\n        \"size\": 1915072512 \r\n    }\r\n}\r\n\r\nTASK [test : local stat of random file path={{ role_path }}/files/random] ****************************************************************************************************************\r\nok: [auslslnxsd4958 -> localhost]\r\nok: [auslslnxsd5505 -> localhost]\r\nok: [auslslnxsd3899 -> localhost]\r\nok: [auslslnxsd5502 -> localhost]\r\nok: [auslslnxsd4960 -> localhost]\r\n\r\n\r\nTASK [test : debug random file stat msg={{ local_file.stat }}] **************************************************************************************************************************\r\nok: [auslslnxsd4958 -> localhost] => {\r\n    \"msg\": {\r\n        \"checksum\": \"592f1b9adaab949bd30b10f9b1a893bac792dd19\", \r\n        \"size\": 3221225472 \r\n    }\r\n}\r\nok: [auslslnxsd5505 -> localhost] => {\r\n    \"msg\": {\r\n        \"checksum\": \"592f1b9adaab949bd30b10f9b1a893bac792dd19\", \r\n        \"size\": 3221225472 \r\n    }\r\n}\r\nok: [auslslnxsd3899 -> localhost] => {\r\n    \"msg\": {\r\n        \"checksum\": \"592f1b9adaab949bd30b10f9b1a893bac792dd19\", \r\n        \"size\": 3221225472 \r\n    }\r\n}\r\nok: [auslslnxsd5502 -> localhost] => {\r\n    \"msg\": {\r\n        \"checksum\": \"592f1b9adaab949bd30b10f9b1a893bac792dd19\", \r\n        \"size\": 3221225472 \r\n    }\r\n}\r\nok: [auslslnxsd4960 -> localhost] => {\r\n    \"msg\": {\r\n        \"checksum\": \"592f1b9adaab949bd30b10f9b1a893bac792dd19\", \r\n        \"size\": 3221225472 \r\n    }\r\n}\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35029/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "Mixer9": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35025", "title": "Unicode characters used in blockinfile", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\nblockinfile\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.1.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /bin/ansible\r\n  python version = 2.7.5 (default, May  3 2017, 07:55:04) [GCC 4.8.5 20150623 (Red Hat 4.8.5-14)]\r\n\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\nIf using Ansible 2.4 or above, paste the results of \"ansible-config dump --only-changed\"\r\nOtherwise, mention any settings you have changed/added/removed in ansible.cfg\r\n(or using the ANSIBLE_* environment variables).\r\n-->\r\nPERSISTENT_CONNECT_TIMEOUT(/etc/ansible/ansible.cfg) = 30\r\nRETRY_FILES_SAVE_PATH(/etc/ansible/ansible.cfg) = /tmp/ansibleretry\r\n\r\n##### OS / ENVIRONMENT\r\n<!---\r\nMention the OS you are running Ansible from, and the OS you are\r\nmanaging, or say \"N/A\" for anything that is not platform-specific.\r\nAlso mention the specific version of what you are trying to control,\r\ne.g. if this is a network bug the version of firmware on the network device.\r\n-->\r\nRed Hat Enterprise Linux Server release 7.3 (Maipo)\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly -->\r\nI want to edit the /etc/bashrc file to make the prompt turn red when you are root (uid 0), this requires control characters to set the color, these are apparently not allowed.\r\n\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\nRun the below playbook with the control characters in place, they will most likely get clobbered when I submit.  \r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```\r\n---\r\n- hosts: all\r\n  become: yes\r\n\r\n\r\n  tasks:\r\n     - name: Set /etc/bashrc to have red prompt when root.\r\n       blockinfile:\r\n         backup: yes\r\n         path: /etc/bashrc\r\n         state: present\r\n         block: |\r\n           if [ $(id -u) -eq 0 ];\r\n           then # you are root, set red colour prompt\r\n             PS1=\"\\[^[[31m\\][\\u@\\h:\\w]# \\[^[(B^[[m\\]\"\r\n           else # normal\r\n             PS1=\"[\\u@\\h:\\w]$ \"\r\n           fi\r\n         insertafter: \"# vim:ts=4:sw=4\"\r\n       register: insert\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- What did you expect to happen when running the steps above? -->\r\nI expected the playbook to run successfully and edit the file to include the control characters.\r\n\r\n##### ACTUAL RESULTS\r\n<!--- What actually happened? If possible run with extra verbosity (-vvvv) -->\r\nIt would not run but produced the error below.\r\n\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\nERROR! Syntax Error while loading YAML.\r\n\r\nexception type: <class 'yaml.reader.ReaderError'>\r\nexception: unacceptable character #x001b: control characters are not allowed\r\n  in \"<unicode string>\", position 330\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35025/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/35023", "title": "jabber module fails with messages successfully sent", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\njabber\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.1.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /bin/ansible\r\n  python version = 2.7.5 (default, May  3 2017, 07:55:04) [GCC 4.8.5 20150623 (Red Hat 4.8.5-14)]\r\n\r\n```\r\n\r\n##### CONFIGURATION\r\nPERSISTENT_CONNECT_TIMEOUT(/etc/ansible/ansible.cfg) = 30\r\nRETRY_FILES_SAVE_PATH(/etc/ansible/ansible.cfg) = /tmp/ansibleretry\r\n\r\n\r\n##### OS / ENVIRONMENT\r\n<!---\r\nMention the OS you are running Ansible from, and the OS you are\r\nmanaging, or say \"N/A\" for anything that is not platform-specific.\r\nAlso mention the specific version of what you are trying to control,\r\ne.g. if this is a network bug the version of firmware on the network device.\r\n-->\r\nRed Hat Enterprise Linux Server release 7.3 (Maipo)\r\nJabber server version unknown, I don't own the server.\r\n\r\n##### SUMMARY\r\nJabber module successfully sends the message with my playbook but reports a failure.\r\n\r\n##### STEPS TO REPRODUCE\r\n\r\nRun the playbook as shown below after editing the host to match your environment, the message passed will be delivered but the playbook will report a fail.\r\n\r\n```\r\n  - name: Jabber Test\r\n    hosts: localhost\r\n    gather_facts: no\r\n\r\n    tasks:\r\n    - name: Send Jabber message\r\n      jabber:\r\n        user: \"{{ user }}\"\r\n        password: \"{{ pass }}\"\r\n        to: \"{{ user2 }}\"\r\n        msg: \"{{ message }}\"\r\n        host: <jabber server redacted>\r\n\r\n```\r\n\r\n##### EXPECTED RESULTS\r\nI expected a success returned after message was sent.\r\n\r\n##### ACTUAL RESULTS\r\nansible returned a \"failed\": true when it successfully sent the message.\r\n\r\nfatal: [localhost]: FAILED! => {\r\n    \"changed\": false,\r\n    \"failed\": true,\r\n\r\n```\r\nThe full traceback is:\r\nTraceback (most recent call last):\r\n  File \"/tmp/ansible_oK1Fax/ansible_module_jabber.py\", line 157, in main\r\n    conn.disconnect()\r\n  File \"/usr/lib/python2.7/site-packages/xmpp/dispatcher.py\", line 378, in disconnect\r\n    while self.Process(1): pass\r\n  File \"/usr/lib/python2.7/site-packages/xmpp/dispatcher.py\", line 123, in Process\r\n    self.Stream.Parse(data)\r\n  File \"/usr/lib/python2.7/site-packages/xmpp/simplexml.py\", line 425, in endtag\r\n    self.dispatch(self._mini_dom)\r\n  File \"/usr/lib/python2.7/site-packages/xmpp/dispatcher.py\", line 311, in dispatch\r\n    if user and self._defaultHandler: self._defaultHandler(session,stanza)\r\n  File \"/usr/lib/python2.7/site-packages/xmpp/dispatcher.py\", line 206, in returnStanzaHandler\r\n    conn.send(Error(stanza,ERR_FEATURE_NOT_IMPLEMENTED))\r\n  File \"/usr/lib/python2.7/site-packages/xmpp/dispatcher.py\", line 372, in send\r\n    self._owner_send(stanza)\r\n  File \"/usr/lib/python2.7/site-packages/xmpp/transports.py\", line 251, in send\r\n    self._owner.disconnected()\r\n  File \"/usr/lib/python2.7/site-packages/xmpp/client.py\", line 129, in disconnected\r\n    for i in self.disconnect_handlers: i()\r\n  File \"/usr/lib/python2.7/site-packages/xmpp/client.py\", line 137, in DisconnectHandler\r\n    raise IOError('Disconnected from server.')\r\nIOError: Disconnected from server.\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35023/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "abhigrover": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35015", "title": "Including playbook and passing ssh_user and ssh_pass", "body": "##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Bug Report\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.3.0.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = Default w/o overrides\r\n  python version = 2.7.13 (default, Mar 13 2017, 20:56:15) [GCC 5.4.0]\r\n```\r\n##### COMPONENT NAME\r\nsetup\r\n\r\n##### CONFIGURATION\r\n<!---\r\nIf using Ansible 2.4 or above, paste the results of \"ansible-config dump --only-changed\"\r\nOtherwise, mention any settings you have changed/added/removed in ansible.cfg\r\n(or using the ANSIBLE_* environment variables).\r\n-->\r\n\r\n##### OS / ENVIRONMENT\r\n<!---\r\nMention the OS you are running Ansible from, and the OS you are\r\nmanaging, or say \"N/A\" for anything that is not platform-specific.\r\nAlso mention the specific version of what you are trying to control,\r\ne.g. if this is a network bug the version of firmware on the network device.\r\n-->\r\nWindows\r\n##### SUMMARY\r\n<!--- Explain the problem briefly -->\r\nI am trying to have a parent playbook call a child playbook, while passing in the \"host\" to run against, ssh username to use and ssh password to use to connect to this host. Calling the child playbook by itself works, but from the parent playbook I am getting \"Authentication failure\".\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\nParent playbook - test_play_include.yml\r\n```\r\n---\r\n- include: test_play_passhostuserpass.yml t_host=\"host.example.com\" ssh_user=admin_user ssh_pass=\"sec#ret$pass\"\r\n```\r\nChild playbook - test_play_passhostuserpass.yml\r\n```\r\n---\r\n- hosts: all:&{{t_host}}\r\n\r\n  vars:\r\n  - ansible_ssh_user: \"{{ssh_user}}\"\r\n  - ansible_ssh_pass: \"{{ssh_pass}}\"\r\n  tasks:\r\n  - name: Show user account\r\n    shell: \"echo $USER\"\r\n```\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- What did you expect to happen when running the steps above? -->\r\nansible-playbook test_play_include.yml -i inventory\r\nshould connect to the host successfully\r\n##### ACTUAL RESULTS\r\n<!--- What actually happened? If possible run with extra verbosity (-vvvv) -->\r\nIf I run the child playbook by itself using the below, it works:\r\nansible-playbook test_play_passhostuserpass.yml -e 't_host=\"host.example.com\" ssh_user=admin_user ssh_pass=\"secret#ret$pass\"' -i inventory\r\n\r\nHowever, this fails:\r\n ansible-playbook test_play_include.yml -i inventory\r\n\r\n$ ansible-playbook test_play_include.yml -i inventory\r\n\r\nPLAY [all:&host.example.com] ******************************************************************************************************************************************\r\n\r\nTASK [Gathering Facts] ****************************************************************************************************************************************************\r\nfatal: [host.example.com]: UNREACHABLE! => {\"changed\": false, \"msg\": \"Authentication failure.\", \"unreachable\": true}\r\n        to retry, use: --limit @/home/myuser/ansible/mydir/test_play_include.retry\r\n\r\nPLAY RECAP ****************************************************************************************************************************************************************\r\nhost.example.com       : ok=0    changed=0    unreachable=1    failed=0\r\n\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35015/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "SaranrajMG": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/35012", "title": "vmware_guest Error : Unable to access the virtual machine configuration: Unable to access file ", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n##### COMPONENT NAME\r\nvmware_guest\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n$ ansible --version\r\nansible 2.4.1.0\r\n  config file = None\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /opt/rh/python27/root/usr/lib/python2.7/site-packages/ansible\r\n  executable location = /opt/rh/python27/root/usr/bin/ansible\r\n  python version = 2.7.13 (default, Feb  8 2017, 06:30:30) [GCC 4.4.7 20120313 (Red Hat 4.4.7-16)]\r\n```\r\n\r\n##### CONFIGURATION\r\n```\r\nansible-config dump --only-changed\r\n[root@ansible user12]#\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\nRHEL6.8\r\n\r\n##### SUMMARY\r\n##### STEPS TO REPRODUCE\r\nRunning the module vmware_guest to create a VM from a template gives the following error:\r\n```\r\n\"msg\": \"Unable to access the virtual machine configuration: Unable to access file [LUN-NPRD-OS-08] \r\n```\r\n\r\nI have the following setup in my environment.\r\n1.  I have a Datacenter (ex: DC1) in my vCenter, under the data center there are 8 clusters. \r\n2.  Each Cluster has 8 Esxi hosts placed in them.\r\n3.  I created a Template and I placed it in Cluster : last cluster(Host8)\r\n4.  From this template, I am trying to create a VM into same cluster: \" Host8 \".\r\n5.  Out of 8 Cluster , i have restricted access to deploy vm in single cluster and its associated datastores.\r\n\r\nI have tried manually deployed the vm using template and it worked, but when i tried from ansible it gives above error.\r\nIm Specifying Cluster and Datastore Cluster details in \"disk\" option.\r\n\r\nIn github i have read some issue related to the same issue. But it couldnt help me.\r\n\r\n```\r\n---\r\n- name: Create VMware guest\r\n  hosts: localhost\r\n  gather_facts: False\r\n\r\n  vars_prompt:\r\n    - name: \"vcenter\"\r\n      prompt: \"vCenter hostname?\"\r\n      private: no\r\n      default: \"winvcserver\"\r\n    - name: \"user\"\r\n      prompt: \"Enter username\"\r\n      private: no\r\n    - name: \"pass\"\r\n      prompt: \"Enter password\"\r\n      private: yes\r\n    - name: \"template\"\r\n      prompt: \"Template?\"\r\n      private: no\r\n      default: \"Linux-Test-Template\"\r\n    - name: \"guest\"\r\n      prompt: \"New VM HOstname?\"\r\n      private: no\r\n    - name: \"cluster\"\r\n      prompt: \"Cluster?\"\r\n      private: no\r\n      default: \"Host8\"\r\n\r\n  tasks:\r\n  - name: Deploy guest from template\r\n    vmware_guest:\r\n      hostname: \"{{ vcenter }}\"\r\n      username: \"{{ user }}\"\r\n      password: \"{{ pass }}\"\r\n      validate_certs: false\r\n      cluster: \"{{ cluster }}\"\r\n      datacenter: sDatacenter\r\n      state: poweredon\r\n      name: \"{{ guest }}\"\r\n      template: \"{{ template }}\"\r\n      folder: \"LINAUTTST\"\r\n      disk:\r\n       - size_gb: 64\r\n         datastore: LUN-NPRD-OS-SCLU-08  <--- Datastore Cluster Name\r\n         type: thick\r\n         autoselect_datastore: yes\r\n       - size_gb: 64\r\n         datastore: LUN-NPRD-DATA-SCLU-08  <--- Datastore Cluster Name\r\n         type: thick\r\n         autoselect_datastore: yes\r\n      hardware:\r\n        memory_mb: 2048\r\n        num_cpus: 1\r\n      networks:\r\n       - name: VLAN 3007 TST\r\n         device_type: vmxnet3\r\n         type: static\r\n         ip: xxx.xxx.xxx.xxx\r\n         netmask: xxx.xxx.xxx.xxx\r\n         gateway: xxx.xxx.xxx.xxx\r\n      customization:\r\n         autologon: yes\r\n         dns_servers:\r\n           - xxx.xxx.xxx.xxx\r\n           - xxx.xxx.xxx.xxx\r\n         hostname: \"{{ guest }}\"\r\n    delegate_to: localhost\r\n```\r\n\r\n##### EXPECTED RESULTS\r\nIt should Deploy a VM into the given location ( Folder and Cluster) without any issues.\r\n\r\n##### ACTUAL RESULTS\r\n```\r\nfatal: [localhost -> localhost]: FAILED! => {\r\n    \"changed\": true,\r\n    \"clone_method\": \"Clone\",\r\n    \"clonespec\": {\r\n        \"config\": {\r\n            \"alternateGuestName\": null,\r\n            \"annotation\": null,\r\n            \"bootOptions\": null,\r\n            \"changeTrackingEnabled\": null,\r\n            \"changeVersion\": null,\r\n            \"consolePreferences\": null,\r\n            \"cpuAffinity\": null,\r\n            \"cpuAllocation\": null,\r\n            \"cpuFeatureMask\": [],\r\n            \"cpuHotAddEnabled\": true,\r\n            \"cpuHotRemoveEnabled\": null,\r\n            \"crypto\": null,\r\n            \"deviceChange\": [\r\n                {\r\n                    \"backing\": null,\r\n                    \"device\": \"<class 'pyVmomi.VmomiSupport.vim.vm.device.VirtualVmxnet3'>\",\r\n                    \"dynamicProperty\": [],\r\n                    \"dynamicType\": null,\r\n                    \"fileOperation\": null,\r\n                    \"operation\": \"edit\",\r\n                    \"profile\": []\r\n                }\r\n            ],\r\n            \"dynamicProperty\": [],\r\n            \"dynamicType\": null,\r\n            \"extraConfig\": [],\r\n            \"files\": null,\r\n            \"firmware\": null,\r\n            \"flags\": null,\r\n            \"ftInfo\": null,\r\n            \"guestAutoLockEnabled\": null,\r\n            \"guestId\": null,\r\n            \"instanceUuid\": null,\r\n            \"latencySensitivity\": null,\r\n            \"locationId\": null,\r\n            \"managedBy\": null,\r\n            \"maxMksConnections\": null,\r\n            \"memoryAffinity\": null,\r\n            \"memoryAllocation\": null,\r\n            \"memoryHotAddEnabled\": true,\r\n            \"memoryMB\": 2048,\r\n            \"memoryReservationLockedToMax\": null,\r\n            \"messageBusTunnelEnabled\": null,\r\n            \"migrateEncryption\": null,\r\n            \"name\": null,\r\n            \"nestedHVEnabled\": null,\r\n            \"networkShaper\": null,\r\n            \"npivDesiredNodeWwns\": null,\r\n            \"npivDesiredPortWwns\": null,\r\n            \"npivNodeWorldWideName\": [],\r\n            \"npivOnNonRdmDisks\": null,\r\n            \"npivPortWorldWideName\": [],\r\n            \"npivTemporaryDisabled\": null,\r\n            \"npivWorldWideNameOp\": null,\r\n            \"npivWorldWideNameType\": null,\r\n            \"numCPUs\": 1,\r\n            \"numCoresPerSocket\": null,\r\n            \"powerOpInfo\": null,\r\n            \"repConfig\": null,\r\n            \"scheduledHardwareUpgradeInfo\": null,\r\n            \"swapPlacement\": null,\r\n            \"tools\": null,\r\n            \"uuid\": null,\r\n            \"vAppConfig\": null,\r\n            \"vAppConfigRemoved\": null,\r\n            \"vAssertsEnabled\": null,\r\n            \"vPMCEnabled\": null,\r\n            \"version\": null,\r\n            \"virtualICH7MPresent\": null,\r\n            \"virtualSMCPresent\": null,\r\n            \"vmProfile\": []\r\n        },\r\n        \"customization\": \"<class 'pyVmomi.VmomiSupport.vim.vm.customization.Specification'>\",\r\n        \"dynamicProperty\": [],\r\n        \"dynamicType\": null,\r\n        \"location\": {\r\n            \"datastore\": \"'vim.Datastore:datastore-4125':LUN-NPRD-OS-08\",   <-- Actual Datastore\r\n            \"deviceChange\": [],\r\n            \"disk\": [],\r\n            \"diskMoveType\": null,\r\n            \"dynamicProperty\": [],\r\n            \"dynamicType\": null,\r\n            \"folder\": null,\r\n            \"host\": null,\r\n            \"pool\": \"'vim.ResourcePool:resgroup-8':Resources\",\r\n            \"profile\": [],\r\n            \"service\": null,\r\n            \"transform\": null\r\n        },\r\n        \"memory\": null,\r\n        \"powerOn\": false,\r\n        \"snapshot\": null,\r\n        \"template\": false\r\n    },\r\n    \"configspec\": {\r\n        \"alternateGuestName\": null,\r\n        \"annotation\": null,\r\n        \"bootOptions\": null,\r\n        \"changeTrackingEnabled\": null,\r\n        \"changeVersion\": null,\r\n        \"consolePreferences\": null,\r\n        \"cpuAffinity\": null,\r\n        \"cpuAllocation\": null,\r\n        \"cpuFeatureMask\": [],\r\n        \"cpuHotAddEnabled\": true,\r\n        \"cpuHotRemoveEnabled\": null,\r\n        \"crypto\": null,\r\n        \"deviceChange\": [\r\n            {\r\n                \"backing\": null,\r\n                \"device\": \"<class 'pyVmomi.VmomiSupport.vim.vm.device.VirtualVmxnet3'>\",\r\n                \"dynamicProperty\": [],\r\n                \"dynamicType\": null,\r\n                \"fileOperation\": null,\r\n                \"operation\": \"edit\",\r\n                \"profile\": []\r\n            }\r\n        ],\r\n        \"dynamicProperty\": [],\r\n        \"dynamicType\": null,\r\n        \"extraConfig\": [],\r\n        \"files\": null,\r\n        \"firmware\": null,\r\n        \"flags\": null,\r\n        \"ftInfo\": null,\r\n        \"guestAutoLockEnabled\": null,\r\n        \"guestId\": null,\r\n        \"instanceUuid\": null,\r\n        \"latencySensitivity\": null,\r\n        \"locationId\": null,\r\n        \"managedBy\": null,\r\n        \"maxMksConnections\": null,\r\n        \"memoryAffinity\": null,\r\n        \"memoryAllocation\": null,\r\n        \"memoryHotAddEnabled\": true,\r\n        \"memoryMB\": 2048,\r\n        \"memoryReservationLockedToMax\": null,\r\n        \"messageBusTunnelEnabled\": null,\r\n        \"migrateEncryption\": null,\r\n        \"name\": null,\r\n        \"nestedHVEnabled\": null,\r\n        \"networkShaper\": null,\r\n        \"npivDesiredNodeWwns\": null,\r\n        \"npivDesiredPortWwns\": null,\r\n        \"npivNodeWorldWideName\": [],\r\n        \"npivOnNonRdmDisks\": null,\r\n        \"npivPortWorldWideName\": [],\r\n        \"npivTemporaryDisabled\": null,\r\n        \"npivWorldWideNameOp\": null,\r\n        \"npivWorldWideNameType\": null,\r\n        \"numCPUs\": 1,\r\n        \"numCoresPerSocket\": null,\r\n        \"powerOpInfo\": null,\r\n        \"repConfig\": null,\r\n        \"scheduledHardwareUpgradeInfo\": null,\r\n        \"swapPlacement\": null,\r\n        \"tools\": null,\r\n        \"uuid\": null,\r\n        \"vAppConfig\": null,\r\n        \"vAppConfigRemoved\": null,\r\n        \"vAssertsEnabled\": null,\r\n        \"vPMCEnabled\": null,\r\n        \"version\": null,\r\n        \"virtualICH7MPresent\": null,\r\n        \"virtualSMCPresent\": null,\r\n        \"vmProfile\": []\r\n    },\r\n    \"failed\": true,\r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"annotation\": null,\r\n            \"cluster\": \"Host8\",\r\n            \"customization\": {\r\n                \"autologon\": true,\r\n                \"dns_servers\": [\r\n                    \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\",\r\n                    \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\"\r\n                ],\r\n                \"domain\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\",\r\n                \"hostname\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\"\r\n            },\r\n            \"customvalues\": [],\r\n            \"datacenter\": \"sDatacenter\",\r\n            \"disk\": [\r\n                {\r\n                    \"autoselect_datastore\": true,\r\n                    \"datastore\": \"LUN-NPRD-OS-SCLU-08\",\r\n                    \"size_gb\": 64,\r\n                    \"type\": \"thick\"\r\n                },\r\n                {\r\n                    \"autoselect_datastore\": true,\r\n                    \"datastore\": \"LUN-NPRD-DATA-SCLU-08\",\r\n                    \"size_gb\": 64,\r\n                    \"type\": \"thick\"\r\n                }\r\n            ],\r\n            \"esxi_hostname\": null,\r\n            \"folder\": \"/LINAUTTST\",\r\n            \"force\": false,\r\n            \"guest_id\": null,\r\n            \"hardware\": {\r\n                \"memory_mb\": 2048,\r\n                \"num_cpus\": 1\r\n            },\r\n            \"hostname\": \"winvcserver.********\",\r\n            \"is_template\": false,\r\n            \"linked_clone\": false,\r\n            \"name\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\",\r\n            \"name_match\": \"first\",\r\n            \"networks\": [\r\n                {\r\n                    \"device_type\": \"vmxnet3\",\r\n                    \"gateway\": \"XXX.XXX.XXX.XXX\",\r\n                    \"ip\": \"XXX.XXX.XXX.XXX\",\r\n                    \"name\": \"VLAN 3007 TST\",\r\n                    \"netmask\": \"XXX.XXX.XXX.XXX\",\r\n                    \"type\": \"static\"\r\n                }\r\n            ],\r\n            \"password\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\",\r\n            \"resource_pool\": null,\r\n            \"snapshot_src\": null,\r\n            \"state\": \"poweredon\",\r\n            \"template\": \"Linux-Test-Template\",\r\n            \"username\": \"admin\",\r\n            \"uuid\": null,\r\n            \"validate_certs\": false,\r\n            \"wait_for_ip_address\": false\r\n        }\r\n    },\r\n    \"msg\": \"Unable to access the virtual machine configuration: Unable to access file [LUN-NPRD-OS-08]\"\r\n}\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/35012/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "ganeshrn": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34997", "title": "Add secure session tracing capability for network_cli and netconf connections", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\nConnection and interactions with remote network device are handled in background `ansible-connection` process. If any goes wrong behind during this interaction there is no way to debug it.\r\n\r\nFor instance, if an unexpected prompt is received from the remote device that is not matched either by `terminal_stdout_re` or `terminal_stderr_re` (from platform-specific terminal plugins) it can result in wait till `command_response` timeout and connection getting closed unexpectedly or if the response is incorrectly matched with terminal regex resulting in truncated output. \r\n\r\nAs verbose logging can contain sensitive information of connection and interaction details with remote host the log file needs to be encrypted possibly using ansible-vault.\r\n\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Feature Idea\r\n\r\n##### COMPONENT NAME\r\n<!---\r\nName of the module, plugin, task or feature\r\nDo not include extra details here, e.g. \"vyos_command\" not \"the network module vyos_command\" or the full path\r\n-->\r\nbin/ansible-connection\r\nconnection/network_cli\r\nconnection/netconf\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n2.5\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\nIf using Ansible 2.4 or above, paste the results of \"ansible-config dump --only-changed\"\r\nOtherwise, mention any settings you have changed/added/removed in ansible.cfg\r\n(or using the ANSIBLE_* environment variables).\r\n-->\r\n\r\n##### OS / ENVIRONMENT\r\n<!---\r\nMention the OS you are running Ansible from, and the OS you are\r\nmanaging, or say \"N/A\" for anything that is not platform-specific.\r\nAlso mention the specific version of what you are trying to control,\r\ne.g. if this is a network bug the version of firmware on the network device.\r\n-->\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly -->\r\n\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- What did you expect to happen when running the steps above? -->\r\n\r\n##### ACTUAL RESULTS\r\n<!--- What actually happened? If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34997/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/e8dd01fa5b03ddad84b911f84099a7b16c712fa8", "message": "Add junos_l2_interface module (#35123)\n\n* Add junos_l2_interface module\r\n\r\n*  Implementation for junos_l2_interface module\r\n*  Integration test\r\n\r\n* Fix CI issues\r\n\r\n* Fix review comments"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/b3b3c0ec546a71c671aeb83726c80f8f8cafc9ae", "message": "Add regex to catch ios error prompt (#35007)\n\n*  Move the error checking from ios_l3_module\r\n   to ios termianl plugin by adding additional\r\n   regex to catch error prompt."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/c386ae9498ad6bf0c5b85a993fe1bc3ebc38ec59", "message": "Fix eos_vrf and eos_vlan interfaces param idempotent issue (#34921)\n\nFixes # 34917\r\n\r\n*  Remove spaces from in between interface name\r\n*  Convert interface name to lower case as interface name\r\n   is case insensitive wrt configuring on remote device."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/85f300e02bcf421a87e148ca5269811fb7991941", "message": "Fix junos_netconf integration test failure (#34744)\n\n* Fix junos_netconf integration test failure\r\n\r\nSet ansible_connection to netconf for junos_command module\r\nin junos_netconf integration test\r\n\r\n* Fix review comments"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "anbsmile": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34994", "title": "win_iis_webapplication: additional parameters", "body": "##### ISSUE TYPE\r\n - Feature Idea\r\n\r\n##### COMPONENT NAME\r\nwin_iis_webapplication\r\n\r\n##### SUMMARY\r\nIt would be nice to be able to modify web application params as it implemented in _win_iis_website_.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34994/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34998", "title": "win_iis_webapplication: added additional parameters", "body": "##### SUMMARY\r\nFeature #34994\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nwin_iis_webapplication\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.12 (default, Nov 20 2017, 18:23:56) [GCC 5.4.0 20160609]\r\n\r\n```\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "kwanlowe": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34992", "title": "azure_rm_networkinterface and azure_rm_virtualmachine inconsistent \"location\" param", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Bug Report\r\n\r\n\r\n##### COMPONENT NAME\r\n<!---\r\nName of the module, plugin, task or feature\r\nDo not include extra details here, e.g. \"vyos_command\" not \"the network module vyos_command\" or the full path\r\n-->\r\nazure_rm_networkinterface\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n  config file = None\r\n  configured module search path = [u'/home/108752/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/108752/bin/p27_venv/lib/python2.7/site-packages/ansible\r\n  executable location = /home/108752/bin/p27_venv/bin/ansible\r\n  python version = 2.7.5 (default, May  3 2017, 07:55:04) [GCC 4.8.5 20150623 (Red Hat 4.8.5-14)]\r\n\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\nIf using Ansible 2.4 or above, paste the results of \"ansible-config dump --only-changed\"\r\nOtherwise, mention any settings you have changed/added/removed in ansible.cfg\r\n(or using the ANSIBLE_* environment variables).\r\n-->\r\n[defaults]\r\nhostfile = inventory\r\nbecome=True\r\nbecome_user=root\r\ndeprecation_warnings=False\r\nsystem_warnings=False\r\nhost_key_checking=False\r\n\r\n##### OS / ENVIRONMENT\r\n<!---\r\nMention the OS you are running Ansible from, and the OS you are\r\nmanaging, or say \"N/A\" for anything that is not platform-specific.\r\nAlso mention the specific version of what you are trying to control,\r\ne.g. if this is a network bug the version of firmware on the network device.\r\n-->\r\nRed Hat Enterprise Linux 7.4\r\n##### SUMMARY\r\n<!--- Explain the problem briefly -->\r\nThe \"location\" parameter between azure_rm_networkinterface and azure_rm_virtualmachine is inconsistent. \r\n\r\nazure_rm_networkinterface accepts:\r\n   location: \"East US 2\"\r\n\r\nazure_rm_virtualmachine accepts:\r\n   location: \"eastus2\"\r\n\r\nUsing \"East US 2\" in azure_rm_virtualmachine returns an error about invalid characters.\r\n\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n\r\n- name: Create NIC\r\n  azure_rm_networkinterface:\r\n    name: \"vm-klltest01-nic\"\r\n    resource_group: \"klltest-rg\"\r\n    virtual_network_name: \"{{ virtual_network }}\"\r\n    location: \"East US 2\"\r\n    subnet_name: \"{{ private_subnet }}\"\r\n    security_group_name: \"{{ security_group }}\"\r\n    public_ip: no\r\n\r\n- name: Create virtual machine\r\n  azure_rm_virtualmachine:\r\n    resource_group: \"{{ resource_group }}\"\r\n    name: \"{{ machine_name }}\"\r\n    vm_size: Basic_A0\r\n    admin_username: deploy\r\n    ssh_password_enabled: false\r\n    ssh_public_keys:\r\n      - path: /home/deploy/.ssh/authorized_keys\r\n        key_data: \"{{ public_key }}\"\r\n    network_interfaces: \"{{ machine_name }}-nic\"\r\n    location: \"East US 2\"\r\n    image:\r\n      offer: \"CentOS\"\r\n      publisher: \"OpenLogic\"\r\n      sku: \"7.4\"\r\n      version: \"latest\"\r\n\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- What did you expect to happen when running the steps above? -->\r\nBoth azure_rm_networkinterface and azure_rm_virtualmachine should accept the same \"location\" format. Either use the short version or the long to be consistent.\r\n\r\n##### ACTUAL RESULTS\r\n<!--- What actually happened? If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\n(p27_venv)[108752@rhldakll075 baseline]$ ansible-playbook playbooks/ansible_feature.yml -e \"machine_name=rhldaklltest902\"\r\n\r\nPLAY [Azure instance] ****************************************************************************************************************************************\r\n\r\nTASK [Gathering Facts] ***************************************************************************************************************************************\r\nok: [localhost]\r\n\r\nTASK [Create NIC] ********************************************************************************************************************************************\r\nchanged: [localhost]\r\n\r\nTASK [Create virtual machine] ********************************************************************************************************************************\r\nAn exception occurred during task execution. To see the full traceback, use -vvv. The error was: msrest.exceptions.ValidationError: Parameter 'location' must conform to the following pattern: '^[-\\\\w\\\\._]+$'.\r\nfatal: [localhost]: FAILED! => {\"changed\": false, \"module_stderr\": \"Traceback (most recent call last):\\n  File \\\"/tmp/ansible_xePoUi/ansible_module_azure_rm_virtualmachine.py\\\", line 1554, in <module>\\n    main()\\n  File \\\"/tmp/ansible_xePoUi/ansible_module_azure_rm_virtualmachine.py\\\", line 1551, in main\\n    AzureRMVirtualMachine()\\n  File \\\"/tmp/ansible_xePoUi/ansible_module_azure_rm_virtualmachine.py\\\", line 651, in __init__\\n    supports_check_mode=True)\\n  File \\\"/tmp/ansible_xePoUi/ansible_modlib.zip/ansible/module_utils/azure_rm_common.py\\\", line 285, in __init__\\n  File \\\"/tmp/ansible_xePoUi/ansible_module_azure_rm_virtualmachine.py\\\", line 679, in exec_module\\n    if self.vm_size and not self.vm_size_is_valid():\\n  File \\\"/tmp/ansible_xePoUi/ansible_module_azure_rm_virtualmachine.py\\\", line 1368, in vm_size_is_valid\\n    for size in sizes:\\n  File \\\"/home/108752/bin/p27_venv/lib/python2.7/site-packages/msrest/paging.py\\\", line 109, in __next__\\n    self.advance_page()\\n  File \\\"/home/108752/bin/p27_venv/lib/python2.7/site-packages/msrest/paging.py\\\", line 95, in advance_page\\n    self._response = self._get_next(self.next_link)\\n  File \\\"/home/108752/bin/p27_venv/lib/python2.7/site-packages/azure/mgmt/compute/compute/v2017_03_30/operations/virtual_machine_sizes_operations.py\\\", line 63, in internal_paging\\n    'location': self._serialize.url(\\\"location\\\", location, 'str', pattern=r'^[-\\\\w\\\\._]+$'),\\n  File \\\"/home/108752/bin/p27_venv/lib/python2.7/site-packages/msrest/serialization.py\\\", line 487, in url\\n    data = self.validate(data, name, required=True, **kwargs)\\n  File \\\"/home/108752/bin/p27_venv/lib/python2.7/site-packages/msrest/serialization.py\\\", line 567, in validate\\n    raise ValidationError(key, name, value)\\nmsrest.exceptions.ValidationError: Parameter 'location' must conform to the following pattern: '^[-\\\\\\\\w\\\\\\\\._]+$'.\\n\", \"module_stdout\": \"\", \"msg\": \"MODULE FAILURE\", \"rc\": 0}\r\n        to retry, use: --limit @/home/108752/src/ansible/baseline/playbooks/ansible_feature.retry\r\n\r\nPLAY RECAP ***************************************************************************************************************************************************\r\nlocalhost                  : ok=2    changed=1    unreachable=0    failed=1\r\n\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34992/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "Plup-io": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34990", "title": "ansible 2.4 synchronise module overrides ansible_user with remote_user when use with delegate_to", "body": "Hi guys, \r\n\r\nNone of the issues I read about delegation troubles seems to apply to my problem. So here it is :\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Bug Report \r\n\r\n##### COMPONENT NAME\r\n<!---\r\nName of the module, plugin, task or feature\r\nDo not include extra details here, e.g. \"vyos_command\" not \"the network module vyos_command\" or the full path\r\n-->\r\nSychronize module\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n$ ansible --version\r\nansible 2.4.2.0\r\n  config file = /home/plup/project/devel/deployers/ansible.cfg\r\n  configured module search path = [u'/home/plup/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.14 (default, Sep 17 2017, 18:50:44) [GCC 7.2.0]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\nIf using Ansible 2.4 or above, paste the results of \"ansible-config dump --only-changed\"\r\nOtherwise, mention any settings you have changed/added/removed in ansible.cfg\r\n(or using the ANSIBLE_* environment variables).\r\n-->\r\n```\r\n$ ansible-config dump --only-changed\r\nANSIBLE_SSH_ARGS(/home/plup/project/devel/deployers/ansible.cfg) = -o ForwardAgent=yes\r\nDEFAULT_HOST_LIST(/home/plup/project/devel/deployers/ansible.cfg) = [u'/home/plup/project/devel/deployers/environments/lab']\r\nDEFAULT_REMOTE_USER(/home/plup/project/devel/deployers/ansible.cfg) = root\r\nDEFAULT_ROLES_PATH(/home/plup/project/devel/deployers/ansible.cfg) = [u'/home/plup/project/devel/deployers/roles-dep', u'/home/plup/project/devel/deployers/roles']\r\nRETRY_FILES_ENABLED(/home/plup/project/devel/deployers/ansible.cfg) = False\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!---\r\nMention the OS you are running Ansible from, and the OS you are\r\nmanaging, or say \"N/A\" for anything that is not platform-specific.\r\nAlso mention the specific version of what you are trying to control,\r\ne.g. if this is a network bug the version of firmware on the network device.\r\n-->\r\n```\r\n $ uname -a\r\nLinux Thor 4.13.0-1-amd64 #1 SMP Debian 4.13.4-2 (2017-10-15) x86_64 GNU/Linux\r\n```\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly -->\r\nI want to synchronize 2 remote servers with ansible. This is the ssh command I want to mimic : \r\n```\r\n$ ssh root@gnaa.srv.happy-dev.fr \"ssh happydev@idunn.srv.happy-dev.fr\"\r\n```\r\n\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\nMy inventory : \r\n```\r\n[iduun]\r\nidunn.srv.happy-dev.fr ansible_user=happydev\r\n```\r\nAnd my playbook:\r\n```yaml\r\nhosts: idunn\r\ntasks:\r\n  - name: Transfer dump to target host\r\n    synchronize:\r\n        src: '/tmp/{{dump_archive}}'\r\n        dest: '/tmp/{{dump_archive}}'\r\n        verify_host: False\r\n    delegate_to: 'gnaa.srv.happy-dev.fr'\r\n    remote_user: 'root'\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- What did you expect to happen when running the steps above? -->\r\nThe copy should works and give me a success. \r\n\r\n##### ACTUAL RESULTS\r\n<!--- What actually happened? If possible run with extra verbosity (-vvvv) -->\r\nIt hangs forever. \r\n\r\nWhen I use `-vvvv` I get this debug message\r\n\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\n<gnaa.srv.happy-dev.fr> ESTABLISH SSH CONNECTION FOR USER: root\r\n<gnaa.srv.happy-dev.fr> SSH: EXEC ssh -vvv -o ForwardAgent=yes -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o User=root -o ConnectTimeout=10 -tt gnaa.srv.happy-dev.fr '/bin/sh -c '\"'\"'/usr/bin/python /root/.ansible/tmp/ansible-tmp-1516196412.5-16451795029568/synchronize.py; rm -rf \"/root/.ansible/tmp/ansible-tmp-1516196412.5-16451795029568/\" > /dev/null 2>&1 && sleep 0'\"'\"''\r\n```\r\n\r\nAnd when I execute manually the ssh command I get this : \r\n```\r\nssh -vvv -o ForwardAgent=yes -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o User=root -o ConnectTimeout=10 -tt gnaa.srv.happy-dev.fr '/bin/sh -c '\"'\"'/usr/bin/python /root/.ansible/tmp/ansible-tmp-1516196412.5-16451795029568/synchronize.py; rm -rf \"/root/.ansible/tmp/ansible-tmp-1516196412.5-16451795029568/\" > /dev/null 2>&1 && sleep 0'\"'\"''\r\ndebug1: Sending command: /bin/sh -c '/usr/bin/python /root/.ansible/tmp/ansible-tmp-1516196412.5-16451795029568/synchronize.py; rm -rf \"/root/.ansible/tmp/ansible-tmp-1516196412.5-16451795029568/\" > /dev/null 2>&1 && sleep 0'\r\ndebug1: client_input_channel_open: ctype auth-agent@openssh.com rchan 2 win 65536 max 16384\r\ndebug1: channel 1: new [authentication agent connection]\r\ndebug1: confirm auth-agent@openssh.com\r\nroot@idunn.srv.happy-dev.fr's password:\r\n```\r\nSo, the connection is made with the `root` user instead of `happydev` user. ", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34990/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "willis7": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34988", "title": "Failed to connect to the host via ssh despite successful auth", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\n`ansible my-host -m ping`\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nconfig file = /home/sion/ansible/ansible.cfg\r\n  configured module search path = [u'/home/sion/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.14+ (default, Dec  5 2017, 15:17:02) [GCC 7.2.0]\r\n\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\nIf using Ansible 2.4 or above, paste the results of \"ansible-config dump --only-changed\"\r\nOtherwise, mention any settings you have changed/added/removed in ansible.cfg\r\n(or using the ANSIBLE_* environment variables).\r\n-->\r\n```\r\nDEFAULT_HOST_LIST(/home/sion/ansible/ansible.cfg) = [u'/home/sion/ansible/inventory']\r\nDEFAULT_REMOTE_USER(/home/sion/ansible/ansible.cfg) = swilliams\r\nHOST_KEY_CHECKING(env: ANSIBLE_HOST_KEY_CHECKING) = False\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n`Linux parrot 4.14.0-parrot2-amd64 #1 SMP Parrot 4.14.2-1parrot2 (2017-12-05) x86_64 GNU/Linux\r\n`\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly -->\r\n\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\nWith the inventory below and config above, this should be fairly straightforward. I'm using basic auth against, so no ssh key complexity.\r\n```\r\nmyhost ansible_password=xxxxxxx\r\n```\r\n\r\nI can see from the target machine that the login is successful, but ansible is failing. Here's the `auth.log` of the target showing a login is successful:\r\n\r\n```\r\nJan 17 12:25:48 myhost sshd[31968]: Accepted password for swilliams from 172.25.xxx.xxx port 55822 ssh2\r\nJan 17 12:25:48 myhost sshd[31968]: pam_unix(sshd:session): session opened for user swilliams by (uid=0)\r\nJan 17 12:25:48 myhost systemd-logind[558]: New session 3087 of user swilliams.\r\nJan 17 12:26:48 myhost sshd[31970]: Received disconnect from 172.25.xxx.xxx: 11: disconnected by user\r\nJan 17 12:26:48 myhost sshd[31968]: pam_unix(sshd:session): session closed for user swilliams\r\nJan 17 12:26:48 myhost systemd-logind[558]: Removed session 3087.\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- What did you expect to happen when running the steps above? -->\r\n```\r\nmyhost | SUCCESS => {\r\n    \"changed\": false, \r\n    \"ping\": \"pong\"\r\n}\r\n```\r\n\r\n##### ACTUAL RESULTS\r\n<!--- What actually happened? If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\nmyhost | UNREACHABLE! => {\r\n    \"changed\": false, \r\n    \"msg\": \"Failed to connect to the host via ssh: \", \r\n    \"unreachable\": true\r\n}\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34988/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "kinware": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34987", "title": "The \"script\" module sometimes fails on Windows hosts (WinRM HTTP 500 status code)", "body": "##### ISSUE TYPE\r\nBug Report\r\n\r\n##### COMPONENT NAME\r\nThe ansible 'script' module\r\n\r\n##### ANSIBLE VERSION\r\nansible 2.4.0.0\r\n  config file = .../ansible.cfg\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = ..../lib/python2.7/site-packages/ansible\r\n  executable location = ..../bin/ansible\r\n  python version = 2.7.9\r\n\r\n##### CONFIGURATION\r\nN/A\r\n\r\n##### OS / ENVIRONMENT\r\nLinux host targeting Windows hosts\r\n\r\n##### SUMMARY\r\nThere is a bug in the 'script' module when run on Windows targets. The bug manifests itself when the script which is run exits quickly (for example a script \"fast.ps1\" with the contents \"Exit(0)\"), and the latency between the host running ansible and the target host is high (for example a slow WAN link).\r\n\r\nAfter some investigation the root cause has been found, see DETAILS below.\r\n\r\n##### STEPS TO REPRODUCE\r\n\r\n/tmp/fast.ps1:\r\n\r\n```\r\nExit(0);\r\n```\r\n\r\nansible invocation on a host that is slow to reach with ansible (slow in this case means *win_ping* takes 15-30 seconds to complete....).\r\n\r\n```\r\nansible somewindowshost -m script -a /tmp/fast.ps1\r\n``` \r\n\r\n##### EXPECTED RESULTS\r\nSuccessful execution of the 'script' module.\r\n\r\n##### ACTUAL RESULTS\r\nOn high latency/slow links:\r\n\r\n```\r\nWinRMTransport. Bad HTTP response returned from server.  Code 500\r\nfatal: [somewindowshost]: FAILED! => {\"failed\": true, \"msg\": \"winrm send_input failed\"}\r\n```\r\n\r\nWe have also actually seen spurious HTTP 500 errors from ansible tons of times on random tasks, and we are hoping this may actually be this same problem...\r\n\r\n#### DETAILS\r\n\r\nThis bug was was most likely introduced/aggravated during some of the refactoring done to get the (most awesome!) speedup under Windows with pipeline support etc.\r\n\r\nAfter a full day of digging into WinRM/WSMan protocols the error \"The pipe is being closed\" was found in the WinRM logs (see below for details).\r\n\r\nThe current sequence for a winrm \"script\" execution has a bug in that it incorrectly tries to send input to stdin of the powershell command that runs the uploaded script. If the script is fast and exits before ansible even has time to post the stdin data, then the WSMAN web service gives a HTTP 500 error. \r\n\r\nThe sequence of operations for the ansible 'script' module is:\r\n\r\n1. Create the remote shell instance (create shell)\r\n2. Determine current working directory (cmd + receive + terminate)\r\n3. Create temporary directory to upload script to (cmd + receive + terminate)\r\n4. Upload the script to temporary directory  (cmd + send + receive + terminate)\r\n5. Invoke the script\r\n  5a. cmd:  &  'C:\\Users\\someuser\\AppData\\Local\\Temp\\ansibletmp-1516179945.07-69917874081045\\fast.ps1\r\n  5b. send: {\"environment\": {}, \"powershell_modules\": {}, \"module_entry\":  \"....\", \"actions\": [\"exec\"], \"exec\": \"....\"}\r\n  5c. receive: script stdout,stderr\r\n  5d. terminate: terminate the command launched in 5a\r\n\r\nThe problem here is *5b* above. If the script in *5a* has already finished and terminated, then the data sent in *5b* will cause the HTTP 500 error. Also, there is no reason to send the data (the JSON payload) at all (i.e *5b* can be skipped entirely) - at least with the current mode of operation. Maybe the idea was to wrap the entire script and send it through *5b* directly without the uploads in step 2+3+4? If that is possible then that would speed things up for sure. But ansible doesn't do it that way at the moment.\r\n\r\nOne way to fix this is to simply remove step *5b*. This is accomplished by commenting out an if-clause in _lib/ansible/plugins/action/script.py_:\r\n\r\n```\r\n        exec_data = None\r\n        # HACK: come up with a sane way to pass around env outside the command\r\n        if self._connection.transport == \"winrm\":\r\n            exec_data = self._connection._create_raw_wrapper_payload(script_cmd, env_dict)\r\n\r\n        result.update(self._low_level_execute_command(cmd=script_cmd, in_data=exec_data, sudoable=True, chdir=chdir))\r\n```\r\n\r\nThe 'exec_data' variable is set to hold the wrapped payload and is then included as _in_data_ when calling _low_level_execute_command()_.\r\n\r\nCommenting out the two lines with the if and exec_data assignment gets rid of the HTTP 500 error and ansible completes the script module run successfully.\r\n\r\nNot sure if the above solution is correct, but it does appear to solve our immediate problem (this is currently a \"show stopper\" for us). Maybe someone has a better way of fixing this?\r\n\r\n#### LOGS\r\n\r\nWinRM trace log. Look for \"The pipe is being closed\" needle in the haystack....\r\n\r\n```\r\n<Event xmlns=\"http://schemas.microsoft.com/win/2004/08/events/event\">\r\n\t<System>\r\n\t\t<Provider Name=\"Microsoft-Windows-WinRM\" Guid=\"{a7975c8f-ac13-49f1-87da-5a984a4ab417}\" />\r\n\t\t<EventID>1044</EventID>\r\n\t\t<Version>0</Version>\r\n\t\t<Level>4</Level>\r\n\t\t<Task>10</Task>\r\n\t\t<Opcode>0</Opcode>\r\n\t\t<Keywords>0x2000000000000005</Keywords>\r\n\t\t<TimeCreated SystemTime=\"2018-01-16T19:34:58.088448500Z\" />\r\n\t\t<Correlation ActivityID=\"{ba151b13-8b84-0000-3d1b-15ba848bd301}\" />\r\n\t\t<Execution ProcessID=\"948\" ThreadID=\"1008\" ProcessorID=\"2\" KernelTime=\"915\" UserTime=\"1680\" />\r\n\t\t<Channel>Microsoft-Windows-WinRM/Analytic</Channel>\r\n\t\t<Computer />\r\n\t</System>\r\n\t<EventData>\r\n\t\t<Data Name=\"index\">       1</Data>\r\n\t\t<Data Name=\"totalChunks\">       1</Data>\r\n\t\t<Data Name=\"bytes\">    1332</Data>\r\n\t\t<Data Name=\"SoapDocument\">&lt;s:Envelope xml:lang=&quot;en-US&quot; xmlns:s=&quot;http://www.w3.org/2003/05/soap-envelope&quot; xmlns:a=&quot;http://schemas.xmlsoap.org/ws/2004/08/addressing&quot; xmlns:x=&quot;http://schemas.xmlsoap.org/ws/2004/09/transfer&quot; xmlns:e=&quot;http://schemas.xmlsoap.org/ws/2004/08/eventing&quot; xmlns:n=&quot;http://schemas.xmlsoap.org/ws/2004/09/enumeration&quot; xmlns:w=&quot;http://schemas.dmtf.org/wbem/wsman/1/wsman.xsd&quot; xmlns:p=&quot;http://schemas.microsoft.com/wbem/wsman/1/wsman.xsd&quot;&gt;&lt;s:Header&gt;&lt;a:Action&gt;http://schemas.dmtf.org/wbem/wsman/1/wsman/fault&lt;/a:Action&gt;&lt;a:MessageID&gt;uuid:4B3E01AC-3A68-4F01-8951-FBA8C7C5E511&lt;/a:MessageID&gt;&lt;p:ActivityId&gt;BA151B13-8B84-0002-B062-15BA848BD301&lt;/p:ActivityId&gt;&lt;a:To&gt;http://schemas.xmlsoap.org/ws/2004/08/addressing/role/anonymous&lt;/a:To&gt;&lt;a:RelatesTo&gt;uuid:39f3f50e-edad-434b-bfc6-db9f5d262ebf&lt;/a:RelatesTo&gt;&lt;/s:Header&gt;&lt;s:Body&gt;&lt;s:Fault&gt;&lt;s:Code&gt;&lt;s:Value&gt;s:Receiver&lt;/s:Value&gt;&lt;s:Subcode&gt;&lt;s:Value&gt;w:InternalError&lt;/s:Value&gt;&lt;/s:Subcode&gt;&lt;/s:Code&gt;&lt;s:Reason&gt;&lt;s:Text xml:lang=&quot;en-US&quot;&gt;The pipe is being closed. &lt;/s:Text&gt;&lt;/s:Reason&gt;&lt;s:Detail&gt;&lt;f:WSManFault xmlns:f=&quot;http://schemas.microsoft.com/wbem/wsman/1/wsmanfault&quot; Code=&quot;232&quot; Machine=&quot;windows-host&quot;&gt;&lt;f:Message&gt;&lt;f:ProviderFault provider=&quot;Shell cmd plugin&quot; path=&quot;%systemroot%\\system32\\winrscmd.dll&quot;&gt;The pipe is being closed. &lt;/f:ProviderFault&gt;&lt;/f:Message&gt;&lt;/f:WSManFault&gt;&lt;/s:Detail&gt;&lt;/s:Fault&gt;&lt;/s:Body&gt;&lt;/s:Envelope&gt;</Data>\r\n\t</EventData>\r\n\t<RenderingInfo Culture=\"en-US\">\r\n\t\t<Level>Information </Level>\r\n\t\t<Keywords>\r\n\t\t\t<Keyword>Soap Trace </Keyword>\r\n\t\t\t<Keyword>Server </Keyword>\r\n\t\t</Keywords>\r\n\t\t<Task>Response handling </Task>\r\n\t\t<Message>SOAP [listener sending index 1 of 1 total chunks (1332 bytes)] &lt;s:Envelope xml:lang=&quot;en-US&quot; xmlns:s=&quot;http://www.w3.org/2003/05/soap-envelope&quot; xmlns:a=&quot;http://schemas.xmlsoap.org/ws/2004/08/addressing&quot; xmlns:x=&quot;http://schemas.xmlsoap.org/ws/2004/09/transfer&quot; xmlns:e=&quot;http://schemas.xmlsoap.org/ws/2004/08/eventing&quot; xmlns:n=&quot;http://schemas.xmlsoap.org/ws/2004/09/enumeration&quot; xmlns:w=&quot;http://schemas.dmtf.org/wbem/wsman/1/wsman.xsd&quot; xmlns:p=&quot;http://schemas.microsoft.com/wbem/wsman/1/wsman.xsd&quot;&gt;&lt;s:Header&gt;&lt;a:Action&gt;http://schemas.dmtf.org/wbem/wsman/1/wsman/fault&lt;/a:Action&gt;&lt;a:MessageID&gt;uuid:4B3E01AC-3A68-4F01-8951-FBA8C7C5E511&lt;/a:MessageID&gt;&lt;p:ActivityId&gt;BA151B13-8B84-0002-B062-15BA848BD301&lt;/p:ActivityId&gt;&lt;a:To&gt;http://schemas.xmlsoap.org/ws/2004/08/addressing/role/anonymous&lt;/a:To&gt;&lt;a:RelatesTo&gt;uuid:39f3f50e-edad-434b-bfc6-db9f5d262ebf&lt;/a:RelatesTo&gt;&lt;/s:Header&gt;&lt;s:Body&gt;&lt;s:Fault&gt;&lt;s:Code&gt;&lt;s:Value&gt;s:Receiver&lt;/s:Value&gt;&lt;s:Subcode&gt;&lt;s:Value&gt;w:InternalError&lt;/s:Value&gt;&lt;/s:Subcode&gt;&lt;/s:Code&gt;&lt;s:Reason&gt;&lt;s:Text xml:lang=&quot;en-US&quot;&gt;The pipe is being closed. &lt;/s:Text&gt;&lt;/s:Reason&gt;&lt;s:Detail&gt;&lt;f:WSManFault xmlns:f=&quot;http://schemas.microsoft.com/wbem/wsman/1/wsmanfault&quot; Code=&quot;232&quot; Machine=&quot;windows-host&quot;&gt;&lt;f:Message&gt;&lt;f:ProviderFault provider=&quot;Shell cmd plugin&quot; path=&quot;%systemroot%\\system32\\winrscmd.dll&quot;&gt;The pipe is being closed. &lt;/f:ProviderFault&gt;&lt;/f:Message&gt;&lt;/f:WSManFault&gt;&lt;/s:Detail&gt;&lt;/s:Fault&gt;&lt;/s:Body&gt;&lt;/s:Envelope&gt; </Message>\r\n\t\t<Channel>Microsoft-Windows-WinRM/Analytic </Channel>\r\n\t\t<Provider>Microsoft-Windows-Windows Remote Management </Provider>\r\n\t</RenderingInfo>\r\n</Event>\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34987/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "cnasten": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34985", "title": "nso_config fails to set leaf-list values", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\nnso_config\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0 (devel f67f8c7bc9) last updated 2018/01/09 18:52:16 (GMT +200)\r\n  config file = None\r\n  configured module search path = [u'/home/cnasten/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/cnasten/dev/ansible/lib/ansible\r\n  executable location = /home/cnasten/dev/ansible/bin/ansible\r\n  python version = 2.7.14+ (default, Dec  5 2017, 15:17:02) [GCC 7.2.0]\r\n```\r\n\r\n##### CONFIGURATION\r\n```\r\n$ ansible-config dump --only-changed\r\n$\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\nDebian GNU/Linux Buster controlling NSO 4.4.4\r\n\r\n##### SUMMARY\r\nSetting leaf-list values does not currently work with nso_config due to the handling of types.\r\n\r\n##### STEPS TO REPRODUCE\r\nUse the provided YAML together with the YANG below.\r\n\r\nYAML:\r\n```yaml\r\n- name: Test leaf-list set\r\n  hosts: localhost\r\n  connection: local\r\n  gather_facts: no\r\n\r\n  tasks:\r\n  - name: Set leaf-list\r\n    nso_config:\r\n      url: \"http://localhost:8080/jsonrpc\"\r\n      username: \"username\"\r\n      password: \"password\"\r\n      data:\r\n        test:test:\r\n          test:device-list:\r\n            - one\r\n            - two\r\n```\r\n\r\nYANG:\r\n```yang\r\nmodule test {\r\n    namespace \"urn:test\";\r\n    prefix test;\r\n\r\n    container test {\r\n        leaf-list device {\r\n            type string;\r\n        }\r\n    }\r\n}\r\n```\r\n##### EXPECTED RESULTS\r\nThe device leaf list should be set with the two elements one and two.\r\n\r\n##### ACTUAL RESULTS\r\nnso_config fails executing the Python code.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34985/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34986", "title": "NSO: handle types for leaf-lists in nso_config (ValueBuilder)", "body": "Fixes: #34985\r\n\r\n##### SUMMARY\r\nThis reads the type information for leaf-list elements from the appropriate part of the schema.\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nnso_config\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0 (nso_config_leaf-list_34985 e9efe8df5a) last updated 2018/01/17 13:25:10 (GMT +200)\r\n  config file = None\r\n  configured module search path = [u'/home/cnasten/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/cnasten/dev/ansible/lib/ansible\r\n  executable location = /home/cnasten/dev/ansible/bin/ansible\r\n  python version = 2.7.14+ (default, Dec  5 2017, 15:17:02) [GCC 7.2.0]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nSee #34985 for details.", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "brainstorm": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34978", "title": "EC2 user-data error when spot_price != null", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\nec2\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n$ ansible --version\r\nansible 2.4.2.0\r\n  config file = /Users/romanvg/dev/pcgr-deploy/ansible/ansible.cfg\r\n  configured module search path = ['/Users/romanvg/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/romanvg/.miniconda/envs/ansible24/lib/python3.6/site-packages/ansible\r\n  executable location = /Users/romanvg/.miniconda/envs/ansible24/bin/ansible\r\n  python version = 3.6.3 | packaged by conda-forge | (default, Nov  4 2017, 10:13:32) [GCC 4.2.1 Compatible Apple LLVM 6.1.0 (clang-602.0.53)]\r\n```\r\n\r\n##### CONFIGURATION\r\n$ ansible-config dump --only-changed\r\nANSIBLE_SSH_ARGS(/Users/romanvg/dev/pcgr-deploy/ansible/ansible.cfg) = -o ControlMaster=auto\r\nHOST_KEY_CHECKING(/Users/romanvg/dev/pcgr-deploy/ansible/ansible.cfg) = False\r\nINVENTORY_ENABLED(/Users/romanvg/dev/pcgr-deploy/ansible/ansible.cfg) = ['host_list', 'script', 'yaml', 'ini', 'constructed']\r\nRETRY_FILES_ENABLED(/Users/romanvg/dev/pcgr-deploy/ansible/ansible.cfg) = False\r\n\r\n##### OS / ENVIRONMENT\r\nN/A\r\n\r\n##### SUMMARY\r\n\r\nThere's a parsing error on the base64 encoding of `user-data` that works fine with python2.x, but breaks with python3\r\n\r\nhttps://github.com/brainstorm/pcgr-deploy/blob/master/ansible/aws.yml#L16\r\n\r\n##### STEPS TO REPRODUCE\r\n\r\n`ansible-playbook aws.yaml`\r\n\r\n```yaml\r\n---\r\n- hosts: localhost\r\n  connection: local\r\n  gather_facts: no\r\n  tasks:\r\n    - name: Launch EC2 instance\r\n      ec2:\r\n         group: \"{{ aws.security_group }}\"\r\n         instance_type: \"{{ aws.instance_type }}\"\r\n         instance_profile_name: \"{{ aws.instance_profile_name }}\"\r\n         instance_tags:\r\n             Name: pcgr \"{{ pcgr.release }}\"\r\n             name: pcgr\r\n             pcgrexecid: \"{{ pcgr.execution_id }}\"\r\n         spot_price: \"{{ aws.spot_price }}\"\r\n         user_data: \"{{ lookup('file', 'files/s3_user_data.sh') }}\"\r\n         image: \"{{ aws.image_id }}\"\r\n         keypair: \"{{ aws.keypair }}\"\r\n         region: \"{{ aws.region }}\"\r\n         zone: \"{{ aws.zone }}\"\r\n         wait: yes\r\n         volumes:\r\n           - device_name: \"{{ aws.volume_device }}\"\r\n             volume_type: gp2\r\n             volume_size: \"{{ aws.volume_size }}\"\r\n             delete_on_termination: true\r\n         count_tag:\r\n           name: pcgr\r\n         exact_count: 1\r\n      register: ec2\r\n\r\n    - name: Add new instance to host group\r\n      add_host:\r\n        hostname: \"{{ item.public_dns_name }}\"\r\n        groupname: launched\r\n      with_items: \"{{ ec2.instances }}\"\r\n\r\n    - name: Wait for SSH to come up\r\n      wait_for:\r\n        host: \"{{ item.public_dns_name }}\"\r\n        port: 22\r\n        delay: 60\r\n        timeout: 320\r\n        state: started\r\n      with_items: \"{{ ec2.instances }}\"\r\n```\r\n\r\n##### EXPECTED RESULTS\r\nClean instantiation of an ec2 instance, loading its corresponding user-data:\r\n\r\nhttps://github.com/brainstorm/pcgr-deploy/blob/master/ansible/files/s3_user_data.sh\r\n\r\n##### ACTUAL RESULTS\r\n```\r\n(ansible24) brainstorm:ansible romanvg$ ansible-playbook aws.yml -vvvv\r\nansible-playbook 2.4.2.0\r\n  config file = /Users/romanvg/dev/pcgr-deploy/ansible/ansible.cfg\r\n  configured module search path = ['/Users/romanvg/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/romanvg/.miniconda/envs/ansible24/lib/python3.6/site-packages/ansible\r\n  executable location = /Users/romanvg/.miniconda/envs/ansible24/bin/ansible-playbook\r\n  python version = 3.6.3 | packaged by conda-forge | (default, Nov  4 2017, 10:13:32) [GCC 4.2.1 Compatible Apple LLVM 6.1.0 (clang-602.0.53)]\r\nUsing /Users/romanvg/dev/pcgr-deploy/ansible/ansible.cfg as config file\r\nsetting up inventory plugins\r\n [WARNING]: Unable to parse /etc/ansible/hosts as an inventory source\r\n\r\n [WARNING]: No inventory was parsed, only implicit localhost is available\r\n\r\n [WARNING]: Could not match supplied host pattern, ignoring: all\r\n\r\n [WARNING]: provided hosts list is empty, only localhost is available\r\n\r\nLoading callback plugin default of type stdout, v2.0 from /Users/romanvg/.miniconda/envs/ansible24/lib/python3.6/site-packages/ansible/plugins/callback/__init__.py\r\n\r\nPLAYBOOK: aws.yml ************************************************************************************************************************************************************************************************************************************************\r\n1 plays in aws.yml\r\n\r\nPLAY [localhost] *************************************************************************************************************************************************************************************************************************************************\r\nMETA: ran handlers\r\n\r\nTASK [Launch EC2 instance] ***************************************************************************************************************************************************************************************************************************************\r\ntask path: /Users/romanvg/dev/pcgr-deploy/ansible/aws.yml:6\r\nUsing module file /Users/romanvg/.miniconda/envs/ansible24/lib/python3.6/site-packages/ansible/modules/cloud/amazon/ec2.py\r\n<127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: romanvg\r\n<127.0.0.1> EXEC /bin/sh -c 'echo ~ && sleep 0'\r\n<127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /Users/romanvg/.ansible/tmp/ansible-tmp-1516170269.445788-236322726281460 `\" && echo ansible-tmp-1516170269.445788-236322726281460=\"` echo /Users/romanvg/.ansible/tmp/ansible-tmp-1516170269.445788-236322726281460 `\" ) && sleep 0'\r\n<127.0.0.1> PUT /var/folders/wz/__dd9trs0kl4jb3rs83704y80000gn/T/tmpk8nz061i TO /Users/romanvg/.ansible/tmp/ansible-tmp-1516170269.445788-236322726281460/ec2.py\r\n<127.0.0.1> EXEC /bin/sh -c 'chmod u+x /Users/romanvg/.ansible/tmp/ansible-tmp-1516170269.445788-236322726281460/ /Users/romanvg/.ansible/tmp/ansible-tmp-1516170269.445788-236322726281460/ec2.py && sleep 0'\r\n<127.0.0.1> EXEC /bin/sh -c '/Users/romanvg/.miniconda/envs/ansible24/bin/python /Users/romanvg/.ansible/tmp/ansible-tmp-1516170269.445788-236322726281460/ec2.py; rm -rf \"/Users/romanvg/.ansible/tmp/ansible-tmp-1516170269.445788-236322726281460/\" > /dev/null 2>&1 && sleep 0'\r\nThe full traceback is:\r\nTraceback (most recent call last):\r\n  File \"/var/folders/wz/__dd9trs0kl4jb3rs83704y80000gn/T/ansible_6sdx67__/ansible_module_ec2.py\", line 1725, in <module>\r\n    main()\r\n  File \"/var/folders/wz/__dd9trs0kl4jb3rs83704y80000gn/T/ansible_6sdx67__/ansible_module_ec2.py\", line 1719, in main\r\n    (tagged_instances, instance_dict_array, new_instance_ids, changed) = enforce_count(module, ec2, vpc)\r\n  File \"/var/folders/wz/__dd9trs0kl4jb3rs83704y80000gn/T/ansible_6sdx67__/ansible_module_ec2.py\", line 963, in enforce_count\r\n    = create_instances(module, ec2, vpc, override_count=to_create)\r\n  File \"/var/folders/wz/__dd9trs0kl4jb3rs83704y80000gn/T/ansible_6sdx67__/ansible_module_ec2.py\", line 1253, in create_instances\r\n    res = ec2.request_spot_instances(spot_price, **params)\r\n  File \"/Users/romanvg/.miniconda/envs/ansible24/lib/python3.6/site-packages/boto/ec2/connection.py\", line 1616, in request_spot_instances\r\n    params['%s.UserData' % ls] = base64.b64encode(user_data)\r\n  File \"/Users/romanvg/.miniconda/envs/ansible24/lib/python3.6/base64.py\", line 58, in b64encode\r\n    encoded = binascii.b2a_base64(s, newline=False)\r\nTypeError: a bytes-like object is required, not 'str'\r\n\r\nfatal: [localhost]: FAILED! => {\r\n    \"changed\": false,\r\n    \"module_stderr\": \"Traceback (most recent call last):\\n  File \\\"/var/folders/wz/__dd9trs0kl4jb3rs83704y80000gn/T/ansible_6sdx67__/ansible_module_ec2.py\\\", line 1725, in <module>\\n    main()\\n  File \\\"/var/folders/wz/__dd9trs0kl4jb3rs83704y80000gn/T/ansible_6sdx67__/ansible_module_ec2.py\\\", line 1719, in main\\n    (tagged_instances, instance_dict_array, new_instance_ids, changed) = enforce_count(module, ec2, vpc)\\n  File \\\"/var/folders/wz/__dd9trs0kl4jb3rs83704y80000gn/T/ansible_6sdx67__/ansible_module_ec2.py\\\", line 963, in enforce_count\\n    = create_instances(module, ec2, vpc, override_count=to_create)\\n  File \\\"/var/folders/wz/__dd9trs0kl4jb3rs83704y80000gn/T/ansible_6sdx67__/ansible_module_ec2.py\\\", line 1253, in create_instances\\n    res = ec2.request_spot_instances(spot_price, **params)\\n  File \\\"/Users/romanvg/.miniconda/envs/ansible24/lib/python3.6/site-packages/boto/ec2/connection.py\\\", line 1616, in request_spot_instances\\n    params['%s.UserData' % ls] = base64.b64encode(user_data)\\n  File \\\"/Users/romanvg/.miniconda/envs/ansible24/lib/python3.6/base64.py\\\", line 58, in b64encode\\n    encoded = binascii.b2a_base64(s, newline=False)\\nTypeError: a bytes-like object is required, not 'str'\\n\",\r\n    \"module_stdout\": \"\",\r\n    \"msg\": \"MODULE FAILURE\",\r\n    \"rc\": 0\r\n}\r\n\r\nPLAY RECAP *******************************************************************************************************************************************************************************************************************************************************\r\nlocalhost                  : ok=0    changed=0    unreachable=0    failed=1\r\n```\r\n\r\n/cc @vladsaveliev", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34978/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "thinkmassive": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34974", "title": "inconsistent documentation for tags on dynamic-include tasks", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n - Documentation Report\r\n\r\n##### COMPONENT NAME\r\n- include_role\r\n- include_tasks\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.2.0\r\n  config file = /home/alexander/workspace/Ansible-adhoc/ansible.cfg\r\n  configured module search path = [u'/usr/share/ansible', u'/home/alexander/workspace/Ansible-adhoc/library']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.14 (default, Dec 11 2017, 16:08:01) [GCC 7.2.1 20170915 (Red Hat 7.2.1-2)]\r\n```\r\n\r\n##### CONFIGURATION\r\nN/A\r\n\r\n##### OS / ENVIRONMENT\r\nFedora 26 (probably N/A)\r\n\r\n##### SUMMARY\r\nThe [Creating Reusable Playbooks](http://docs.ansible.com/ansible/latest/playbooks_reuse.html) doc states:\r\n> If you use any include* Task (include_tasks, include_role, etc.), it will be dynamic.\r\n> ...\r\n> When it comes to Ansible task options like **tags** and conditional statements (when:):\r\n>    For static imports, the parent task options will be copied to all child tasks contained within the import.\r\n>    For **dynamic includes**, the task options will only apply to the dynamic task as it is evaluated, and **will not be copied to child tasks**.\r\n\r\nThe Tags doc, under [Tag Inheritance](http://docs.ansible.com/ansible/latest/playbooks_tags.html#tag-inheritance) states:\r\n> You can apply tags to more than tasks, but they ONLY affect the tasks themselves. Applying tags anywhere else is just a convenience so you don\u2019t have to write it on every task:\r\n> ...\r\n> ```\r\n> - include_tasks: foo.yml\r\n>   tags: [web,foo]\r\n> ```\r\n> **All of these apply the specified tags to EACH task inside** the play, included file, or role, so that these tasks can be selectively run when the playbook is invoked with the corresponding tags.\r\n\r\n###### Documentation discrepancy\r\n- According to \"Creating Reusable Playbooks\" the tags on an `include_*` task should only determine whether the `include_*` task itself is executed, and the tags should not propagate into the included role.\r\n- According to \"Tag Inheritance\" the tags an any `include_*` or `import_*` are inherited by each task within the role.\r\n\r\n###### Personal opinion\r\nThe behavior described in \"Creating Reusable Playbooks\" seems most desirable. Actual behavior (described below) seems to be a combination of the two, and it doesn't offer much flexibility over the previous `include` functionality. This makes it impossible to run a subset of included tasks with a simple `--tag`, and instead requires a much more complicated combination of `--tag`+`--skip-tags`. \r\n\r\n##### STEPS TO REPRODUCE\r\nsite.yml:\r\n```yaml\r\n---\r\n- hosts: all\r\n  tasks:\r\n    - include_role: name=role1\r\n      tags: [ role1, include-role ]\r\n    - include_tasks: name=tasks.yml\r\n      tags: [ tasks1, include-tasks ]\r\n```\r\nroles/role1/tasks/main.yml:\r\n```yaml\r\n---\r\n- debug:\r\n    msg: \"include_role | tag: always\"\r\n  tags: always\r\n- debug: \r\n    msg: \"include_role | tag: role1\"\r\n  tags: role1\r\n- debug: \r\n    msg: \"include_role | tag: tag1\"\r\n  tags: tag1\r\n```\r\ntasks.yml:\r\n```yaml\r\n---\r\n- debug:\r\n    msg: \"include_tasks | tag: always\"\r\n  tags: always\r\n- debug: \r\n    msg: \"include_tasks | tag: tasks1\"\r\n  tags: tasks1\r\n- debug: \r\n    msg: \"include_tasks | tag: tag1\"\r\n  tags: tag1\r\n```\r\nhosts:\r\n```\r\n[all]\r\nhost1 ansible_connection=local\r\n```\r\n\r\n##### EXPECTED RESULTS\r\n###### Summary\r\n  - Dynamic include tasks with a matching tag(s) are executed, and each inside-task is executed only if it has a specified tag (or no tags were specified), behaving according to the \"Creating Reusable Playbooks\" description\r\n  - Dynamic include tasks with no matching tags are skipped entirely (unless no tags are specified), behaving according to the \"Creating Reusable Playbooks\" description\r\n###### Detail\r\n1. `ansible-playbook site.yml -i hosts -t role1`\r\n  i. role1 should run only the tasks tagged: `always`, `role1`\r\n  ii. tasks.yml should be skipped\r\n\r\n2. `ansible-playbook site.yml -i hosts -t include-role`\r\n  i. role1 should run only the task tagged: `always`\r\n  ii. tasks.yml should be skipped\r\n\r\n3. `ansible-playbook site.yml -i hosts -t include-role,tag1`\r\n  i. role1 should run only the tasks tagged: `always`, `tag1`\r\n  ii. tasks.yml should be skipped\r\n\r\n4. `ansible-playbook site.yml -i hosts -t include-tasks`\r\n  i. role1 should be skipped\r\n  ii. tasks.yml should run only the tasks tagged: `always`\r\n\r\n5. `ansible-playbook site.yml -i hosts -t include-tasks,tag1`\r\n  i. role1 should be skipped\r\n  ii. tasks.yml should run only the tasks tagged: `always`, `tag1`\r\n\r\n6. `ansible-playbook site.yml -i hosts -t tag1`\r\n  i. role1 should be skipped\r\n  ii. tasks.yml should be skipped\r\n\r\n##### ACTUAL RESULTS\r\n###### Summary\r\n  - Dynamic include tasks with a matching tag(s) are executed, and **all inside-tasks have the tag(s) applied**, behaving according to the \"Tag Inheritance\" description (bad)\r\n  - Dynamic include tasks with no matching tags are skipped entirely (unless no tags are specified), behaving according to the \"Creating Reusable Playbooks\" description (good)\r\n###### Detail\r\n1. `ansible-playbook site.yml -i hosts -t role1`\r\n  i. (fail) role1 ran all tasks, including `tag1`\r\n  ii. (pass) tasks.yml was skipped\r\n\r\n2. `ansible-playbook site.yml -i hosts -t include-role`\r\n  i. (fail) role1 ran all tasks, including `role`, `tag1`\r\n  ii. (pass) tasks.yml was skipped\r\n\r\n3. `ansible-playbook site.yml -i hosts -t include-role,tag1`\r\n  i. (fail) role1 ran all tasks, including `role1`\r\n  ii. (pass) tasks.yml was skipped\r\n\r\n4. `ansible-playbook site.yml -i hosts -t include-tasks`\r\n  i. (pass) role1 was skipped\r\n  ii. (fail) tasks.yml ran all tasks, including `tasks1`, `tag1`\r\n\r\n5. `ansible-playbook site.yml -i hosts -t include-tasks,tag1`\r\n  i. (pass) role1 was skipped\r\n  ii. (fail) tasks.yml ran all tasks, including `tasks1`\r\n\r\n6. `ansible-playbook site.yml -i hosts -t tag1`\r\n  i. (pass) role1 was skipped\r\n  ii. (pass) tasks.yml was skipped", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34974/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "steaksauce-": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34956", "title": "win_dns_client fails when specifying an empty list of addresses", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!---\r\nName of the module, plugin, task or feature\r\nDo not include extra details here, e.g. \"vyos_command\" not \"the network module vyos_command\" or the full path\r\n-->\r\nwin_dns_client\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Aug  4 2017, 00:39:18) [GCC 4.8.5 20150623 (Red Hat 4.8.5-16)]\r\n\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\nIf using Ansible 2.4 or above, paste the results of \"ansible-config dump --only-changed\"\r\nOtherwise, mention any settings you have changed/added/removed in ansible.cfg\r\n(or using the ANSIBLE_* environment variables).\r\n-->\r\nDefault configuration (config dump returns nothing)\r\n\r\n##### OS / ENVIRONMENT\r\n<!---\r\nMention the OS you are running Ansible from, and the OS you are\r\nmanaging, or say \"N/A\" for anything that is not platform-specific.\r\nAlso mention the specific version of what you are trying to control,\r\ne.g. if this is a network bug the version of firmware on the network device.\r\n-->\r\nCentOS Linux release 7.4.1708 (Core)\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly -->\r\nWhen running the win_dns_client example to configure all adapters whose names begin with Ethernet to use DHCP-assigned DNS values, I get an error, resulting in a module failure.\r\n\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\n- Create and run a playbook file with the following:\r\n```\r\n---\r\n- name: Configure DNS to pull from DHCP\r\n  hosts: windows\r\n  tasks:\r\n    - win_dns_client:\r\n        adapter_names: \"Ethernet*\"\r\n        ipv4_addresses: []\r\n```\r\nPlease note, the above task is an example from [the documentation](http://docs.ansible.com/ansible/latest/win_dns_client_module.html#examples)\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```\r\n---\r\n- name: Configure DNS to pull from DHCP\r\n  hosts: windows\r\n  tasks:\r\n    - win_dns_client:\r\n        adapter_names: \"Ethernet*\"\r\n        ipv4_addresses: []\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- What did you expect to happen when running the steps above? -->\r\nPer the documentation, I would expect the above to set the adapter to use DHCP values for DNS, or disable DNS lookup on static connections.\r\n\r\n##### ACTUAL RESULTS\r\n<!--- What actually happened? If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\nTASK [win_dns_client] ***********************************************************************************************************************************************************************************************************************\r\ntask path: /root/playbooks/win-dhcp.yml:9\r\nUsing module file /usr/lib/python2.7/site-packages/ansible/modules/windows/win_dns_client.ps1\r\n<10.2.1.80> ESTABLISH WINRM CONNECTION FOR USER: administrator on PORT 5986 TO 10.2.1.80\r\nEXEC (via pipeline wrapper)\r\nfatal: [10.2.1.80]: FAILED! => {\r\n    \"changed\": false,\r\n    \"module_stderr\": \"An error occurred while creating the pipeline.\\r\\n    + CategoryInfo          : NotSpecified: (:) [], ParentContainsErrorRecordException\\r\\n    + FullyQualifiedErrorId : RuntimeException\\r\\n \\r\\nCompare-Object : Cannot bind argument to parameter 'DifferenceObject' because it is null.\\r\\nAt line:143 char:54\\r\\n+ ...  $v4_match = @(Compare-Object $current_dns_v4 $ipv4_addresses).Count  ...\\r\\n+                                                   ~~~~~~~~~~~~~~~\\r\\n    + CategoryInfo          : InvalidData: (:) [Compare-Object], ParentContainsErrorRecordException\\r\\n    + FullyQualifiedErrorId : ParameterArgumentValidationErrorNullNotAllowed,Microsoft.PowerShell.Commands.CompareObje \\r\\n   ctCommand\\r\\n \\r\\n\\r\\n\",\r\n    \"module_stdout\": \"\",\r\n    \"msg\": \"MODULE FAILURE\",\r\n    \"rc\": 1\r\n}\r\n        to retry, use: --limit @/root/playbooks/win-dhcp.retry\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34956/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35149", "title": "Fixes issue #34956", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nShould address issue #34956 -- logic was added to check to see if $ipv4_addresses is equal to $null and take appropriate actions to resolve the error mentioned in the issue and ensure that the DNS address is set to DHCP if $ipv4_addresses is null.\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\nwin_dns_client\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Aug  4 2017, 00:39:18) [GCC 4.8.5 20150623 (Red Hat 4.8.5-16)]\r\n\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\nIt seems like the issue was caused by the -CompareObject cmdlet's inability to compare objects if one or both of those objects were $null. I added logic to avoid the scenario. While doing so, I noticed that the task would not revert DNS settings to DHCP, so I made changes to the Set-DNSClientServerAddress cmdlet if $ipv4_addresses was $null.\r\n\r\nNote the below before and after for the given playbook:\r\n\r\n##### Playbook:\r\n```\r\n---\r\n- name: Configure DNS to pull from DHCP\r\n  hosts: windows\r\n  tasks:\r\n    - win_dns_client:\r\n        adapter_names: \"*\"\r\n        ipv4_addresses: []\r\n```\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n##### Before:\r\n```\r\nTASK [win_dns_client] ***********************************************************************************************************************************************************************************************************************\r\ntask path: /root/playbooks/win-dhcp.yml:9\r\nUsing module file /usr/lib/python2.7/site-packages/ansible/modules/windows/win_dns_client.ps1\r\n<10.2.1.80> ESTABLISH WINRM CONNECTION FOR USER: administrator on PORT 5986 TO 10.2.1.80\r\nEXEC (via pipeline wrapper)\r\nfatal: [10.2.1.80]: FAILED! => {\r\n    \"changed\": false,\r\n    \"module_stderr\": \"An error occurred while creating the pipeline.\\r\\n    + CategoryInfo          : NotSpecified: (:) [], ParentContainsErrorRecordException\\r\\n    + FullyQualifiedErrorId : RuntimeException\\r\\n \\r\\nCompare-Object : Cannot bind argument to parameter 'DifferenceObject' because it is null.\\r\\nAt line:143 char:54\\r\\n+ ...  $v4_match = @(Compare-Object $current_dns_v4 $ipv4_addresses).Count  ...\\r\\n+                                                   ~~~~~~~~~~~~~~~\\r\\n    + CategoryInfo          : InvalidData: (:) [Compare-Object], ParentContainsErrorRecordException\\r\\n    + FullyQualifiedErrorId : ParameterArgumentValidationErrorNullNotAllowed,Microsoft.PowerShell.Commands.CompareObje \\r\\n   ctCommand\\r\\n \\r\\n\\r\\n\",\r\n    \"module_stdout\": \"\",\r\n    \"msg\": \"MODULE FAILURE\",\r\n    \"rc\": 1\r\n}\r\n        to retry, use: --limit @/root/playbooks/win-dhcp.retry\r\n\r\n```\r\n\r\n##### After:\r\n```\r\nTASK [win_dns_client] ************************************************************************\r\ntask path: /etc/ansible/playbooks/dns2.yml:5\r\nUsing module file /usr/lib/python2.7/site-packages/ansible/modules/windows/win_dns_client.ps1\r\n<192.168.187.140> ESTABLISH WINRM CONNECTION FOR USER: administrator on PORT 5986 TO 192.168.187.140\r\nEXEC (via pipeline wrapper)\r\nchanged: [192.168.187.140] => {\r\n    \"changed\": true,\r\n    \"failed\": false\r\n}\r\nMETA: ran handlers\r\nMETA: ran handlers\r\n```\r\n\r\n##### Other notes:\r\nThis is my first contribution to the open source community, so forgive me if I have done something a way that isn't the best ;)", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "boxrick": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34949", "title": "Ansible ansible_group_priority variable is not passed down to child groups", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!---\r\nName of the module, plugin, task or feature\r\nDo not include extra details here, e.g. \"vyos_command\" not \"the network module vyos_command\" or the full path\r\n-->\r\nInventory\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n  config file = /home/rickb/ansible-mist-old/ansible.cfg\r\n  configured module search path = [u'/home/rickb/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.12 (default, Nov 20 2017, 18:23:56) [GCC 5.4.0 20160609\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\nIf using Ansible 2.4 or above, paste the results of \"ansible-config dump --only-changed\"\r\nOtherwise, mention any settings you have changed/added/removed in ansible.cfg\r\n(or using the ANSIBLE_* environment variables).\r\n-->\r\n```\r\nDEFAULT_CALLBACK_WHITELIST(/home/rickb/ansible-mist-old/ansible.cfg) = ['profile_tasks']\r\nDEFAULT_CONNECTION_PLUGIN_PATH(/home/rickb/ansible-mist-old/ansible.cfg) = [u'/home/rickb/ansible-mist-old/plugins/connection_plugins']\r\nDEFAULT_FILTER_PLUGIN_PATH(/home/rickb/ansible-mist-old/ansible.cfg) = [u'/home/rickb/ansible-mist-old/plugins/filter']\r\nDEFAULT_FORCE_HANDLERS(/home/rickb/ansible-mist-old/ansible.cfg) = True\r\nDEFAULT_HASH_BEHAVIOUR(/home/rickb/ansible-mist-old/ansible.cfg) = merge\r\nDEFAULT_HOST_LIST(/home/rickb/ansible-mist-old/ansible.cfg) = [u'/home/rickb/ansible-mist-old/inventory/deploy.mist']\r\nDEFAULT_ROLES_PATH(/home/rickb/ansible-mist-old/ansible.cfg) = [u'/home/rickb/ansible-mist-old/roles-dev', u'/home/rickb/ansible-mist-old/roles', u'/home/rickb/ansible-mist-old/base-roles']\r\nDEFAULT_STRATEGY_PLUGIN_PATH(/home/rickb/ansible-mist-old/ansible.cfg) = [u'/home/rickb/ansible-mist-old/plugins/strategy']\r\nHOST_KEY_CHECKING(/home/rickb/ansible-mist-old/ansible.cfg) = False\r\nINVENTORY_UNPARSED_IS_FAILED(/home/rickb/ansible-mist-old/ansible.cfg) = True\r\nRETRY_FILES_ENABLED(/home/rickb/ansible-mist-old/ansible.cfg) = False\r\n```\r\n##### OS / ENVIRONMENT\r\n<!---\r\nMention the OS you are running Ansible from, and the OS you are\r\nmanaging, or say \"N/A\" for anything that is not platform-specific.\r\nAlso mention the specific version of what you are trying to control,\r\ne.g. if this is a network bug the version of firmware on the network device.\r\n-->\r\nUbuntu 16.04\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly -->\r\nWhen using ansible_group_priority in inventory file, it is not passed down from group to child group\r\n\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n---\r\nall:\r\n  hosts:\r\n    mist0.deploy:\r\n      ansible_host: 10.0.128.13\r\n    mist1.deploy:\r\n      ansible_host: 10.0.128.14\r\n\r\n  children:\r\n  # All top level groups\r\n\r\n    networking:\r\n      children:\r\n        networking_container-hosts:\r\n          hosts:\r\n            mist[0:1].deploy:\r\n      vars:\r\n        ansible_group_priority: 5\r\n\r\n    hardware:\r\n      children:\r\n        hardware_SYS-5039MS-H8TRF:\r\n          hosts:\r\n            mist[0:1].deploy:\r\n      vars:\r\n        ansible_group_priority: 10\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### RESULTS\r\n`ansible_group_priority` is set to higher, which should mean that `hardware_SYS-5039MS-H8TRF` runs after `networking_container-hosts`. Instead this is ignored unless explicitly set at the actual group level.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34949/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "Everspace": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34948", "title": "s3_bucket fails when a manually created bucket already exists", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Bug Report\r\n##### COMPONENT NAME\r\ns3_bucket\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n  config file = /ansible/ansible.cfg\r\n  configured module search path = ['/ansible/library', '/usr/share/ansible']\r\n  ansible python module location = /usr/local/lib/python3.5/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.5.4 (default, Dec 12 2017, 16:43:39) [GCC 4.9.2]\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n```\r\nFROM python:3.5.4-jessie\r\n\r\nRUN apt-get update && \\\r\n  apt-get install -y \\\r\n    cowsay \\\r\n    mysql-client \\\r\n    openssh-client \\\r\n    rsync\r\n\r\nRUN pip3 install \\\r\n  ansible \\\r\n  boto \\\r\n  boto3 \\\r\n  awscli \\\r\n  colorama \\\r\n  jmespath \\\r\n  mysqlclient \\\r\n  passlib\r\n```\r\n\r\n##### SUMMARY\r\nI have already made 'my-bucket' manually. Transitioning to ansible managing it causes s3_bucket to fail.\r\n\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\n\r\n1. Create a bucket named 'birds-content' through the web console.\r\n1. Then run the following task:\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n  - name: Make S3 buckets\r\n    s3_bucket:\r\n      name: \"{{item}}-content\"\r\n    with_items: \r\n    - bees\r\n    - birds\r\n    - trombones\r\n```\r\n\r\n##### EXPECTED RESULTS\r\n<!--- What did you expect to happen when running the steps above? -->\r\nbirds-content creation does not fail\r\n\r\n\r\n##### ACTUAL RESULTS\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\nThe full traceback is:\r\n  File \"/tmp/ansible_dc612ya0/ansible_module_s3_bucket.py\", line 256, in _create_or_update_bucket\r\n    bucket = connection.create_bucket(name, location=location)\r\n  File \"/usr/local/lib/python3.5/site-packages/boto/s3/connection.py\", line 623, in create_bucket\r\n    response.status, response.reason, body)\r\n\r\nfailed: [127.0.0.1] (item=birds) => {\r\n    \"changed\": false,\r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"aws_access_key\": null,\r\n            \"aws_secret_key\": null,\r\n            \"ceph\": false,\r\n            \"ec2_url\": null,\r\n            \"force\": false,\r\n            \"name\": \"birds-content\",\r\n            \"policy\": null,\r\n            \"profile\": null,\r\n            \"region\": null,\r\n            \"requester_pays\": false,\r\n            \"s3_url\": null,\r\n            \"security_token\": null,\r\n            \"state\": \"present\",\r\n            \"tags\": null,\r\n            \"validate_certs\": true,\r\n            \"versioning\": null\r\n        }\r\n    },\r\n    \"msg\": \"Your previous request to create the named bucket succeeded and you already own it.\"\r\n}\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34948/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "dabesa53": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34931", "title": "Error when directory name is comma and space", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n$ ansible --version\r\nansible 2.4.2.0\r\n  config file = /Users/XXX/Desktop/home/stady/Linux/Services/Deploy, Provisioning/Ansible/Sample/Ansible-CentOS/ansible.cfg\r\n  configured module search path = [u'/Users/XXX/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/Cellar/ansible/2.4.2.0_2/libexec/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.10 (default, Jul 15 2017, 17:16:57) [GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.31)]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\nIf using Ansible 2.4 or above, paste the results of \"ansible-config dump --only-changed\"\r\nOtherwise, mention any settings you have changed/added/removed in ansible.cfg\r\n(or using the ANSIBLE_* environment variables).\r\n-->\r\n\r\n##### OS / ENVIRONMENT\r\nmacOS High Sierra version 10.13.2\r\n\r\n##### SUMMARY\r\n```\r\n$ cd /Users/XXX/Desktop/home/stady/Linux/Services/Deploy\\,\\ Provisioning/Ansible/Sample/Ansible-CentOS\r\n$ ansible-playbook -i inventories/prd/hosts ./playbook-web.yml\r\n...\r\nTASK [zabbix/client : enable Server] *********************************************************************************************************************************\r\nfatal: [prd-web001]: FAILED! => {\"msg\": \"The task includes an option with an undefined variable. The error was: 'zabbix' is undefined\\n\\nThe error appears to have been in '/Users/XXX/Desktop/home/stady/Linux/Services/Deploy, Provisioning/Ansible/Sample/Ansible-CentOS/roles/zabbix/client/tasks/conf.yml': line 27, column 3, but may\\nbe elsewhere in the file depending on the exact syntax problem.\\n\\nThe offending line appears to be:\\n\\n\\n- name: enable Server\\n  ^ here\\n\\nexception type: <class 'ansible.errors.AnsibleUndefinedVariable'>\\nexception: 'zabbix' is undefined\"}\r\nfatal: [prd-web002]: FAILED! => {\"msg\": \"The task includes an option with an undefined variable. The error was: 'zabbix' is undefined\\n\\nThe error appears to have been in '/Users/XXX/Desktop/home/stady/Linux/Services/Deploy, Provisioning/Ansible/Sample/Ansible-CentOS/roles/zabbix/client/tasks/conf.yml': line 27, column 3, but may\\nbe elsewhere in the file depending on the exact syntax problem.\\n\\nThe offending line appears to be:\\n\\n\\n- name: enable Server\\n  ^ here\\n\\nexception type: <class 'ansible.errors.AnsibleUndefinedVariable'>\\nexception: 'zabbix' is undefined\"}\r\n\tto retry, use: --limit @/Users/XXX/Desktop/home/stady/Linux/Services/Deploy, Provisioning/Ansible/Sample/Ansible-CentOS/playbook-web.retry\r\n```\r\n\r\n##### STEPS TO REPRODUCE\r\n\r\n##### EXPECTED RESULTS\r\n\r\n##### ACTUAL RESULTS\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34931/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "cvanniekerk": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34929", "title": "Filter list of IP addresses on range", "body": "##### ISSUE TYPE\r\n\r\n - Feature Idea\r\n\r\n##### COMPONENT NAME\r\n\r\n`ipaddr`\r\n\r\n##### ANSIBLE VERSION\r\n\r\n```ansible 2.5.0 (devel 0a9489ef66) last updated 2018/01/16 12:43:50 (GMT +200)```\r\n\r\n##### SUMMARY\r\n\r\nRelated to the resolved issue #34792 I need the ability to filter a list of IP addresses on a given IP range in order to determine the correct address to add to the in-memory inventory.\r\n\r\nFor this I propose adding this functionality to the existing `ipaddr` filter, similar to `network_in_network` but taking a list as the first parameter and a network as the second parameter and returning the filtered list of addresses.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34929/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34930", "title": "Implement a method to filter a list of IP addresses", "body": "##### SUMMARY\r\n\r\nExtend the `ipaddr` filter plugin by implementing a new method to easily reduce a list of IP addresses down to the addresses that fall inside the given network.\r\n\r\nFixes #34929\r\n\r\n##### ISSUE TYPE\r\n\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\n\r\n`ipaddr`\r\n\r\n##### ANSIBLE VERSION\r\n\r\n`ansible 2.5.0 (devel 9def706b06) last updated 2018/01/16 14:20:24 (GMT +200)`", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "Voolkanus": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34927", "title": "contrib/inventory/gce.py fails with \"libcloud.common.google.ResourceNotFoundError\" error", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\nGoogle Cloud Platform inventory\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.0.0\r\n  config file = None\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.9 (default, Jun 29 2016, 13:08:31) [GCC 4.9.2]\r\n```\r\n\r\n##### CONFIGURATION\r\nansible-config dump --only-changed\r\n\r\n(default)\r\n\r\n##### OS / ENVIRONMENT\r\nDebian GNU/Linux 8\r\n\r\n##### SUMMARY\r\nSometimes when running ansible playbook using the gce.py inventory I'm receiving an exception, with \"libcloud.common.google.ResourceNotFoundError\" error. In 100% of the times the resources that couldn't be found is one of the disks!(The resource 'projects/streamrail/zones/us-central1-c/disks/half-pipe-vpaid-bzqg' was not found). I don't think the module should look for disks, when I'm clearly indicate that all I need is instances names.\r\n\r\n##### STEPS TO REPRODUCE\r\nRun a playbook that uses dynamic inventory to collect instances labels.\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```\r\nansible-playbook -v -i deploy/inventory/gcloud-prod -u eranchetz --private-key /Certs/google_compute_engine -e hosts=half-pipe-vast -e deploykey=dff746822f66725a8b3e0c08ce35e4cbf3049968 -e apport=62659 -e provider=GCP -e env=prod -f 50 -T 3 deploy/update-half-pipe.yml\r\n\r\n```\r\n\r\n##### EXPECTED RESULTS\r\nThe script returns the desired instances, that has the specified label(half-pipe-vast in the example)\r\n##### ACTUAL RESULTS\r\nA python exception raises instead.\r\n```\r\nUsing /var/jenkins_home/workspace/half-pipe-vast/ansible.cfg as config file\r\n [WARNING]:  * Failed to parse /var/jenkins_home/workspace/half-pipe-\r\nvast/deploy/inventory/gcloud-prod/gce.py with script plugin: Inventory script\r\n(/var/jenkins_home/workspace/half-pipe-vast/deploy/inventory/gcloud-\r\nprod/gce.py) had an execution error: Traceback (most recent call last):   File\r\n\"/var/jenkins_home/workspace/half-pipe-vast/deploy/inventory/gcloud-\r\nprod/gce.py\", line 501, in <module>     GceInventory()   File\r\n\"/var/jenkins_home/workspace/half-pipe-vast/deploy/inventory/gcloud-\r\nprod/gce.py\", line 173, in __init__     self.do_api_calls_update_cache()   File\r\n\"/var/jenkins_home/workspace/half-pipe-vast/deploy/inventory/gcloud-\r\nprod/gce.py\", line 395, in do_api_calls_update_cache     data =\r\nself.group_instances(zones)   File \"/var/jenkins_home/workspace/half-pipe-\r\nvast/deploy/inventory/gcloud-prod/gce.py\", line 414, in group_instances     for\r\nnode in self.list_nodes():   File \"/var/jenkins_home/workspace/half-pipe-\r\nvast/deploy/inventory/gcloud-prod/gce.py\", line 404, in list_nodes\r\nall_nodes.extend(self.driver.list_nodes())   File \"/usr/local/lib/python2.7\r\n/dist-packages/libcloud/compute/drivers/gce.py\", line 1601, in list_nodes\r\nv.get('instances', [])]   File \"/usr/local/lib/python2.7/dist-\r\npackages/libcloud/compute/drivers/gce.py\", line 5283, in _to_node\r\nextra['boot_disk'] = self.ex_get_volume(bd['name'], bd['zone'])   File\r\n\"/usr/local/lib/python2.7/dist-packages/libcloud/compute/drivers/gce.py\", line\r\n4165, in ex_get_volume     response = self.connection.request(request,\r\nmethod='GET').object   File \"/usr/local/lib/python2.7/dist-\r\npackages/libcloud/compute/drivers/gce.py\", line 120, in request     response =\r\nsuper(GCEConnection, self).request(*args, **kwargs)   File\r\n\"/usr/local/lib/python2.7/dist-packages/libcloud/common/google.py\", line 692,\r\nin request     *args, **kwargs)   File \"/usr/local/lib/python2.7/dist-\r\npackages/libcloud/common/base.py\", line 799, in request     response =\r\nresponseCls(**kwargs)   File \"/usr/local/lib/python2.7/dist-\r\npackages/libcloud/common/base.py\", line 145, in __init__     self.object =\r\nself.parse_body()   File \"/usr/local/lib/python2.7/dist-\r\npackages/libcloud/common/google.py\", line 263, in parse_body     raise\r\nResourceNotFoundError(message, self.status, code)\r\nlibcloud.common.google.ResourceNotFoundError: {u'domain': u'global',\r\nu'message': u\"The resource 'projects/streamrail/zones/us-central1-c/disks/half-\r\npipe-vpaid-bzqg' was not found\", u'reason': u'notFound'}\r\n [WARNING]:  * Failed to parse /var/jenkins_home/workspace/half-pipe-\r\nvast/deploy/inventory/gcloud-prod/gce.py with ini plugin:\r\n/var/jenkins_home/workspace/half-pipe-vast/deploy/inventory/gcloud-\r\nprod/gce.py:19: Error parsing host definition ''''': No closing quotation\r\n [WARNING]: Unable to parse /var/jenkins_home/workspace/half-pipe-\r\nvast/deploy/inventory/gcloud-prod/gce.py as an inventory source\r\n [WARNING]: Could not match supplied host pattern, ignoring: half-pipe-vast\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34927/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "huegelc": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34924", "title": " Ansible: cannot connect to the LXD server", "body": "##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!---\r\nlxd\r\n-->\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.12 (default, Nov 20 2017, 18:23:56) [GCC 5.4.0 20160609]\r\n\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\nIf using Ansible 2.4 or above, paste the results of \"ansible-config dump --only-changed\"\r\nOtherwise, mention any settings you have changed/added/removed in ansible.cfg\r\n(or using the ANSIBLE_* environment variables).\r\n-->\r\n\r\n```\r\nDEFAULT_HOST_LIST(/etc/ansible/ansible.cfg) = [u'/ansible/inventory/hosts']\r\nDEFAULT_ROLES_PATH(/etc/ansible/ansible.cfg) = [u'/ansible/roles']\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!---\r\nMention the OS you are running Ansible from, and the OS you are\r\nmanaging, or say \"N/A\" for anything that is not platform-specific.\r\nAlso mention the specific version of what you are trying to control,\r\ne.g. if this is a network bug the version of firmware on the network device.\r\n-->\r\nUbuntu Xenial\r\n\r\n##### LXD Information\r\n\r\n<!--- Explain the problem briefly -->\r\n\r\n * Distribution:\r\n * Distribution version:\r\n * The output of \"lxc info\" or if that fails:\r\n   * Kernel version:\r\n   * LXC version:\r\n   * LXD version:\r\n   * Storage backend in use:\r\n\r\n```\r\nHostA\r\n \r\nlxc info\r\nconfig:\r\n  core.https_address: '[::]:8443'\r\n  core.trust_password: true\r\napi_extensions:\r\n- storage_zfs_remove_snapshots\r\n- container_host_shutdown_timeout\r\n- container_stop_priority\r\n- container_syscall_filtering\r\n- auth_pki\r\n- container_last_used_at\r\n- etag\r\n- patch\r\n- usb_devices\r\n- https_allowed_credentials\r\n- image_compression_algorithm\r\n- directory_manipulation\r\n- container_cpu_time\r\n- storage_zfs_use_refquota\r\n- storage_lvm_mount_options\r\n- network\r\n- profile_usedby\r\n- container_push\r\n- container_exec_recording\r\n- certificate_update\r\n- container_exec_signal_handling\r\n- gpu_devices\r\n- container_image_properties\r\n- migration_progress\r\n- id_map\r\n- network_firewall_filtering\r\n- network_routes\r\n- storage\r\n- file_delete\r\n- file_append\r\n- network_dhcp_expiry\r\n- storage_lvm_vg_rename\r\n- storage_lvm_thinpool_rename\r\n- network_vlan\r\n- image_create_aliases\r\n- container_stateless_copy\r\n- container_only_migration\r\n- storage_zfs_clone_copy\r\n- unix_device_rename\r\n- storage_lvm_use_thinpool\r\n- storage_rsync_bwlimit\r\n- network_vxlan_interface\r\n- storage_btrfs_mount_options\r\n- entity_description\r\n- image_force_refresh\r\n- storage_lvm_lv_resizing\r\n- id_map_base\r\n- file_symlinks\r\n- container_push_target\r\n- network_vlan_physical\r\n- storage_images_delete\r\n- container_edit_metadata\r\n- container_snapshot_stateful_migration\r\n- storage_driver_ceph\r\n- storage_ceph_user_name\r\n- resource_limits\r\n- storage_volatile_initial_source\r\n- storage_ceph_force_osd_reuse\r\n- storage_block_filesystem_btrfs\r\n- resources\r\n- kernel_limits\r\n- storage_api_volume_rename\r\n- macaroon_authentication\r\n- network_sriov\r\n- console\r\n- restrict_devlxd\r\n- migration_pre_copy\r\n- infiniband\r\n- maas_network\r\napi_status: stable\r\napi_version: \"1.0\"\r\nauth: trusted\r\npublic: false\r\nauth_methods:\r\n- tls\r\nenvironment:\r\n  addresses:\r\n  - 192.168.100.2:8443\r\n  - 172.17.0.1:8443\r\n  - 10.65.44.1:8443\r\n  - '[fd42:3e07:d01e:c49e::1]:8443'\r\n  architectures:\r\n  - x86_64\r\n  - i686\r\n  certificate: |\r\n    -----BEGIN CERTIFICATE-----\r\n    -----END CERTIFICATE-----\r\n  certificate_fingerprint: 3cf5aec4da\r\n  driver: lxc\r\n  driver_version: 2.1.1\r\n  kernel: Linux\r\n  kernel_architecture: x86_64\r\n  kernel_version: 4.13.0-12-generic\r\n  server: lxd\r\n  server_pid: 12786\r\n  server_version: \"2.21\"\r\n  storage: btrfs\r\n  storage_version: \"4.4\"\r\n\r\n  ######\r\n```\r\n```\r\nHostB\r\n\r\n  config:\r\n  core.https_address: '[::]:8443'\r\napi_extensions:\r\n- storage_zfs_remove_snapshots\r\n- container_host_shutdown_timeout\r\n- container_stop_priority\r\n- container_syscall_filtering\r\n- auth_pki\r\n- container_last_used_at\r\n- etag\r\n- patch\r\n- usb_devices\r\n- https_allowed_credentials\r\n- image_compression_algorithm\r\n- directory_manipulation\r\n- container_cpu_time\r\n- storage_zfs_use_refquota\r\n- storage_lvm_mount_options\r\n- network\r\n- profile_usedby\r\n- container_push\r\n- container_exec_recording\r\n- certificate_update\r\n- container_exec_signal_handling\r\n- gpu_devices\r\n- container_image_properties\r\n- migration_progress\r\n- id_map\r\n- network_firewall_filtering\r\n- network_routes\r\n- storage\r\n- file_delete\r\n- file_append\r\n- network_dhcp_expiry\r\n- storage_lvm_vg_rename\r\n- storage_lvm_thinpool_rename\r\n- network_vlan\r\n- image_create_aliases\r\n- container_stateless_copy\r\n- container_only_migration\r\n- storage_zfs_clone_copy\r\n- unix_device_rename\r\n- storage_lvm_use_thinpool\r\n- storage_rsync_bwlimit\r\n- network_vxlan_interface\r\n- storage_btrfs_mount_options\r\n- entity_description\r\n- image_force_refresh\r\n- storage_lvm_lv_resizing\r\n- id_map_base\r\n- file_symlinks\r\n- container_push_target\r\n- network_vlan_physical\r\n- storage_images_delete\r\n- container_edit_metadata\r\n- container_snapshot_stateful_migration\r\n- storage_driver_ceph\r\n- storage_ceph_user_name\r\n- resource_limits\r\n- storage_volatile_initial_source\r\n- storage_ceph_force_osd_reuse\r\n- storage_block_filesystem_btrfs\r\n- resources\r\n- kernel_limits\r\n- storage_api_volume_rename\r\n- macaroon_authentication\r\n- network_sriov\r\n- console\r\n- restrict_devlxd\r\n- migration_pre_copy\r\n- infiniband\r\n- maas_network\r\napi_status: stable\r\napi_version: \"1.0\"\r\nauth: trusted\r\npublic: false\r\nauth_methods:\r\n- tls\r\nenvironment:\r\n  addresses:\r\n  - 10.184.120.1:8443\r\n  - '[fd42:77be:d33f:e081::1]:8443'\r\n  - 10.65.44.233:8443\r\n  - '[fd42:3e07:d01e:c49e:216:3eff:fe43:c07a]:8443'\r\n  architectures:\r\n  - x86_64\r\n  - i686\r\n  certificate: |\r\n    -----BEGIN CERTIFICATE-----\r\n    -----END CERTIFICATE-----\r\n  certificate_fingerprint: 2ad29e52af4eb\r\n  driver: lxc\r\n  driver_version: 2.1.1\r\n  kernel: Linux\r\n  kernel_architecture: x86_64\r\n  kernel_version: 4.13.0-12-generic\r\n  server: lxd\r\n  server_pid: 1960\r\n  server_version: \"2.21\"\r\n  storage: dir\r\n  storage_version: \"1\"\r\n```\r\n\r\n##### SUMMARY\r\n\r\n\r\nI got two identical Ubuntu Xenial machines running the latest lxd snap package\r\nThe first host (HostA) is supposed to be a backup LXD server and HostB is our \r\nansible deploy server.\r\nOn HostB I\u00b4ve added the remote LXD server:\r\n\r\n```\r\n+-----------------+------------------------------------------+---------------+-----------+--------+--------+\r\n|      NAME       |                   URL                    |   PROTOCOL    | AUTH TYPE | PUBLIC | STATIC |\r\n+-----------------+------------------------------------------+---------------+-----------+--------+--------+\r\n| images          | https://images.linuxcontainers.org       | simplestreams |           | YES    | NO     |\r\n+-----------------+------------------------------------------+---------------+-----------+--------+--------+\r\n| local (default) | unix://                                  | lxd           | tls       | NO     | YES    |\r\n+-----------------+------------------------------------------+---------------+-----------+--------+--------+\r\n| lxd-backup      | https://HostA:8443                        | lxd           | tls       | NO     | NO     |\r\n+-----------------+------------------------------------------+---------------+-----------+--------+--------+\r\n| ubuntu          | https://cloud-images.ubuntu.com/releases | simplestreams |           | YES    | YES    |\r\n+-----------------+------------------------------------------+---------------+-----------+--------+--------+\r\n| ubuntu-daily    | https://cloud-images.ubuntu.com/daily    | simplestreams |           | YES    | YES    |\r\n+-----------------+------------------------------------------+---------------+-----------+--------+--------+\r\n```\r\n\r\nHostB# lxc list lxd-backup:\r\n\r\nshows all containers running on HostA. So far so good. Now, I would like to deploy a container on HostA via ansible.\r\nTherefore I use the ansible role from here: https://github.com/ahnooie/ansible-role-lxd-container and the following inventory:\r\n\r\n```\r\n# remote LXD host for staging\r\n[lxd-stgn]\r\nHostA\r\n\r\n[lxd-stgn:vars]\r\nansible_port=2006\r\nansible_user=root\r\n\r\n[containers]\r\nubuntu01 ansible_connection=lxd ansible_host=lxd-backup:ubuntu01 alias=ubuntu/xenial/amd64\r\n\r\n[containers:vars]\r\nansible_connection=lxd\r\nlxd_host=HostA\r\n```\r\nIf I run the role I always get the error:\r\n\r\n```\r\nfatal: [ubuntu01 -> HostA]: FAILED! => {\"actions\": [], \"changed\": false, \"msg\": \"cannot connect to the LXD server\"}\r\n```\r\nCan somebody give me a hand with this issue? Thank you\r\n\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- What did you expect to happen when running the steps above? -->\r\nAnsible should connect to remote host and create lxd container\r\n\r\n##### ACTUAL RESULTS\r\n<!--- What actually happened? If possible run with extra verbosity (-vvvv) -->\r\n\r\n```\r\nfatal: [ubuntu01 -> HostA]: FAILED! => {\"actions\": [], \"changed\": false, \"msg\": \"cannot connect to the LXD server\"}\r\n```\r\n\r\n##### Hint\r\n@stgraber from LXD pointed out that the snap package has a different path now\r\n\r\n\r\n`/var/snap/lxd/common/lxd/unix.socket` rather then `/var/lib/lxd/unix.socket`\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34924/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "kyliel": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34913", "title": "azure_rm_loadbalance should accpet a list of rules instead of one", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\nazure_rm_loadbalance\r\n\r\n##### ANSIBLE VERSION\r\n2.4\r\n2.5\r\n\r\n##### CONFIGURATION\r\nN/A\r\n\r\n##### OS / ENVIRONMENT\r\nN/A\r\n\r\n##### SUMMARY\r\nThe load balancer module. Currently it can only accept one load balancing rule and one NAT rule.  It should be able to accept a list of rules. \r\n\r\n##### STEPS TO REPRODUCE\r\n##### EXPECTED RESULTS\r\n##### ACTUAL RESULTS\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34913/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "H1YAoQYD": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34893", "title": "recursive copy does not copy files, only directories", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\ncopy\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/user/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.14+ (default, Dec  5 2017, 15:17:02) [GCC 7.2.0]\r\n\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\nIf using Ansible 2.4 or above, paste the results of \"ansible-config dump --only-changed\"\r\nOtherwise, mention any settings you have changed/added/removed in ansible.cfg\r\n(or using the ANSIBLE_* environment variables).\r\n-->\r\ndefault configuration\r\n\r\n##### OS / ENVIRONMENT\r\n<!---\r\nMention the OS you are running Ansible from, and the OS you are\r\nmanaging, or say \"N/A\" for anything that is not platform-specific.\r\nAlso mention the specific version of what you are trying to control,\r\ne.g. if this is a network bug the version of firmware on the network device.\r\n-->\r\nLinux / Linux\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly -->\r\nThe copy module copies only directories, no files. The directories look fine and are created recursively, however no files are copied. If you run the playbook again then the files too are copied.\r\n\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\n```\r\n$ find . -ls\r\n   852461      4 drwxr-xr-x   3 user     user         4096 Jan 15 14:00 .\r\n   852463      4 drwxr-xr-x   4 user     user         4096 Jan 15 13:59 ./source\r\n   860161      4 drwxr-xr-x   2 user     user         4096 Jan 15 13:59 ./source/one\r\n   846271      4 -rw-r--r--   1 user     user            4 Jan 15 13:59 ./source/one/afile\r\n   942425      4 drwxr-xr-x   2 user     user         4096 Jan 15 13:59 ./source/two\r\n   846272      4 -rw-r--r--   1 user     user          121 Jan 15 14:00 ./test.yml\r\n$ ansible-playbook test.yml\r\n [WARNING]: Unable to parse /etc/ansible/hosts as an inventory source\r\n\r\n [WARNING]: No inventory was parsed, only implicit localhost is available\r\n\r\n [WARNING]: Could not match supplied host pattern, ignoring: all\r\n\r\n [WARNING]: provided hosts list is empty, only localhost is available\r\n\r\n\r\nPLAY [localhost] *****************************************************************************************\r\n\r\nTASK [copy] **********************************************************************************************\r\nchanged: [localhost]\r\n\r\nPLAY RECAP ***********************************************************************************************\r\nlocalhost                  : ok=1    changed=1    unreachable=0    failed=0   \r\n\r\n$ find . -ls\r\n   852461      4 drwxr-xr-x   4 user     user         4096 Jan 15 14:01 .\r\n   852463      4 drwxr-xr-x   4 user     user         4096 Jan 15 13:59 ./source\r\n   860161      4 drwxr-xr-x   2 user     user         4096 Jan 15 13:59 ./source/one\r\n   846271      4 -rw-r--r--   1 user     user            4 Jan 15 13:59 ./source/one/afile\r\n   942425      4 drwxr-xr-x   2 user     user         4096 Jan 15 13:59 ./source/two\r\n   942429      4 drwxr-xr-x   3 user     user         4096 Jan 15 14:01 ./target\r\n   942430      4 drwxr-xr-x   4 user     user         4096 Jan 15 14:01 ./target/source\r\n   942431      4 drwxr-xr-x   2 user     user         4096 Jan 15 14:01 ./target/source/one\r\n   942432      4 drwxr-xr-x   2 user     user         4096 Jan 15 14:01 ./target/source/two\r\n   846272      4 -rw-r--r--   1 user     user          121 Jan 15 14:00 ./test.yml\r\n```\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\ntest.yml:\r\n```yaml\r\n- hosts: localhost\r\n  gather_facts: no\r\n  become: no\r\n  tasks:\r\n    - copy:\r\n        src: source/\r\n        dest: target\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- What did you expect to happen when running the steps above? -->\r\nThe whole directory tree is copied.\r\n\r\n##### ACTUAL RESULTS\r\n<!--- What actually happened? If possible run with extra verbosity (-vvvv) -->\r\nNo files are copied, only directories are created.\r\n\r\n<!--- Paste verbatim command output between quotes below -->\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34893/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "JqckB": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34886", "title": "Nested jinja2 include can't use home template variables", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\n`template`\r\n\r\n##### ANSIBLE VERSION\r\n```\r\ncyril@MBP-Cyril:~/dev/test_ansible_jinja2 $ ansible --version\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/Users/cyril/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/Cellar/ansible/2.4.2.0_2/libexec/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.10 (default, Jul 15 2017, 17:16:57) [GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.31)]\r\n```\r\n\r\n##### CONFIGURATION\r\n```\r\ncyril@MBP-Cyril:~/dev/test_ansible_jinja2 $ ansible-config dump --only-changed\r\nANSIBLE_PIPELINING(/etc/ansible/ansible.cfg) = False\r\nANSIBLE_SSH_CONTROL_PATH(/etc/ansible/ansible.cfg) = %(directory)s/%%h-%%r\r\nHOST_KEY_CHECKING(/etc/ansible/ansible.cfg) = False\r\n```\r\n##### OS / ENVIRONMENT\r\n\r\n```macOS High Sierra\u200e version 10.13```\r\n\r\n##### SUMMARY\r\n\r\nSince I updated my version of Ansible from 2.3.2 to 2.4.2, I can't generate a jinja2 template which have 2 nested includes with a variable at the template base. \r\n\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\n\r\nCommand to execute :  `ansible-playbook -c local -i \"localhost,\" test.yml`\r\n\r\n`test.yml` : \r\n```yaml\r\n- hosts: all\r\n  vars:\r\n    boxes:\r\n      - \"test1\"\r\n      - \"test2\"\r\n  tasks:\r\n    - template:\r\n        src: templates/boxes.j2\r\n        dest: /tmp/test_boxes.txt\r\n```\r\n\r\n`templates/boxes.j2` : \r\n```yaml\r\n{% for box in boxes %}\r\n{% include 'box.j2' %}\r\n\r\n{% endfor %}\r\n```\r\n\r\n`templates/box.j2`  : \r\n```\r\n{% if box is defined %}\r\n{% include 'box_service.j2' %}\r\n{% endif %}\r\n```\r\n\r\n`templates/box_service.j2`  : \r\n```\r\n{{ box }}\r\n```\r\n\r\n##### EXPECTED RESULTS\r\n<!--- What did you expect to happen when running the steps above? -->\r\n\r\nFrom 2.3.2 : \r\n```\r\ntest1\r\ntest2\r\n```\r\n\r\n##### ACTUAL RESULTS\r\n<!--- What actually happened? If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\ncyril@MBP-Cyril:~/dev/test_ansible_jinja2 $ ansible-playbook -vvv -c local -i \"localhost,\" test.yml\r\nansible-playbook 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/Users/cyril/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/Cellar/ansible/2.4.2.0_2/libexec/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible-playbook\r\n  python version = 2.7.10 (default, Jul 15 2017, 17:16:57) [GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.31)]\r\nUsing /etc/ansible/ansible.cfg as config file\r\nParsed localhost, inventory source with host_list plugin\r\n\r\nPLAYBOOK: test.yml ***************************************************************************************************\r\n1 plays in test.yml\r\n\r\nPLAY [all] ***********************************************************************************************************\r\n\r\nTASK [Gathering Facts] ***********************************************************************************************\r\nUsing module file /usr/local/Cellar/ansible/2.4.2.0_2/libexec/lib/python2.7/site-packages/ansible/modules/system/setup.py\r\n<localhost> ESTABLISH LOCAL CONNECTION FOR USER: cyril\r\n<localhost> EXEC /bin/sh -c 'echo ~ && sleep 0'\r\n<localhost> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /Users/cyril/.ansible/tmp/ansible-tmp-1516033326.51-161942920865376 `\" && echo ansible-tmp-1516033326.51-161942920865376=\"` echo /Users/cyril/.ansible/tmp/ansible-tmp-1516033326.51-161942920865376 `\" ) && sleep 0'\r\n<localhost> PUT /var/folders/p1/gg7vqthj3dl6zd2g6fjj19dw0000gn/T/tmpMApNIP TO /Users/cyril/.ansible/tmp/ansible-tmp-1516033326.51-161942920865376/setup.py\r\n<localhost> EXEC /bin/sh -c 'chmod u+x /Users/cyril/.ansible/tmp/ansible-tmp-1516033326.51-161942920865376/ /Users/cyril/.ansible/tmp/ansible-tmp-1516033326.51-161942920865376/setup.py && sleep 0'\r\n<localhost> EXEC /bin/sh -c '/usr/bin/python /Users/cyril/.ansible/tmp/ansible-tmp-1516033326.51-161942920865376/setup.py; rm -rf \"/Users/cyril/.ansible/tmp/ansible-tmp-1516033326.51-161942920865376/\" > /dev/null 2>&1 && sleep 0'\r\nok: [localhost]\r\nMETA: ran handlers\r\n\r\nTASK [template] ******************************************************************************************************\r\ntask path: /Users/cyril/dev/test_ansible_jinja2/test.yml:7\r\nfatal: [localhost]: FAILED! => {\r\n    \"changed\": false,\r\n    \"msg\": \"AnsibleUndefinedVariable: 'box' is undefined\"\r\n}\r\n\tto retry, use: --limit @/Users/cyril/dev/test_ansible_jinja2/test.retry\r\n\r\nPLAY RECAP ***********************************************************************************************************\r\nlocalhost                  : ok=1    changed=0    unreachable=0    failed=1\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34886/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "KKoukiou": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34867", "title": "Yum module runs yum install when `state` is `latest` and `name` != `*`", "body": "##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Bug Report\r\n - Documentation Report\r\n\r\n##### COMPONENT NAME\r\nlib/ansible/modules/packaging/os/yum.py\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.5.0\r\n```\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly -->\r\n`Yum` module does not use `yum update` when  `name` != `*` but instead `yum install`.\r\nIs this desired behavior? If so it should be documented properly.\r\n\r\n##### STEPS TO REPRODUCE\r\nI am using `yum` module with `state` == `latest` and `name` parameter a regex like `ovirt*setup`.\r\nWith this I would expect `yum` module to run the actual command 'yum update ovirt*setup'.\r\n\r\nHowever, yum module is implemented to run `yum install ovirt*setup` (see [1]) even if state is `latest`, which in my case results in some dependency issues [2], which using update) they don't exist.\r\n\r\nSo, it this expected behavior? If so it should be documented that state == `latest` does not use `yum update` command.\r\nHowever, it might be need to change this behavior. \r\n\r\n##### ACTUAL RESULTS\r\nSome info on the mentioned dependency issue: \r\n\r\nOn my system when running `yum` module with `state` `latest` and the `name` `ovirt*setup` the command `yum install ovirt*setup` is executed.\r\nThis fails on missing dependencies (which actually are not missing) as you can see in the dependency resolution here [2].\r\nWhen I run the `yum update ovirt*setup` command, these dependencies don't occur, which implies that yum pkg manager handles `install` and `update` different when bringing package dependencies.\r\n\r\n[1]: https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/packaging/os/yum.py#L1162\r\n[2]:\r\n``` bash\r\nError: Package: cockpit-storaged-155-1.el7.noarch (rhv-4.1.9)\r\n           Requires: storaged-lvm2 >= 2.1.1\r\n           Available: storaged-lvm2-2.5.2-2.el7.x86_64 (rhv-4.1.9)\r\n               storaged-lvm2 = 2.5.2-2.el7\r\n           Available: storaged-lvm2-2.5.2-4.el7.x86_64 (rhv-4.2.1)\r\n               storaged-lvm2 = 2.5.2-4.el7\r\nError: Package: cockpit-storaged-155-1.el7.noarch (rhv-4.1.9)\r\n           Requires: storaged-iscsi >= 2.1.1\r\n           Available: storaged-iscsi-2.5.2-2.el7.x86_64 (rhv-4.1.9)\r\n               storaged-iscsi = 2.5.2-2.el7\r\n           Available: storaged-iscsi-2.5.2-4.el7.x86_64 (rhv-4.2.1)\r\n               storaged-iscsi = 2.5.2-4.el7\r\nError: Package: cockpit-storaged-155-1.el7.noarch (rhv-4.1.9)\r\n           Requires: storaged >= 2.1.1\r\n           Available: storaged-2.5.2-2.el7.x86_64 (rhv-4.1.9)\r\n               storaged = 2.5.2-2.el7\r\n           Available: storaged-2.5.2-4.el7.x86_64 (rhv-4.2.1)\r\n               storaged = 2.5.2-4.el7\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34867/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "RushPu": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34863", "title": "rabbitmq_user throws \"ValueError: need more than 1 value to unpack\"", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Bug Report\r\n\r\n\r\n##### COMPONENT NAME\r\n<!---\r\nName of the module, plugin, task or feature\r\nDo not include extra details here, e.g. \"vyos_command\" not \"the network module vyos_command\" or the full path\r\n-->\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n  config file = /Users/rushpu/Program/Devops/Ansible/ansible.cfg\r\n  configured module search path = [u'/Users/rushpu/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/rushpu/.pyenv/versions/2.7.12/envs/ansible/lib/python2.7/site-packages/ansible\r\n  executable location = /Users/rushpu/.pyenv/versions/ansible/bin/ansible\r\n  python version = 2.7.12 (default, Jul 26 2017, 16:16:30) [GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.42.1)]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\nIf using Ansible 2.4 or above, paste the results of \"ansible-config dump --only-changed\"\r\nOtherwise, mention any settings you have changed/added/removed in ansible.cfg\r\n(or using the ANSIBLE_* environment variables).\r\n-->\r\n```\r\nANSIBLE_PIPELINING(/Users/rushpu/Program/Devops/Ansible/ansible.cfg) = True\r\nANSIBLE_SSH_CONTROL_PATH(/Users/rushpu/Program/Devops/Ansible/ansible.cfg) = /tmp/ansible-ssh-%%h-%%p-%%r\r\nANSIBLE_SSH_RETRIES(/Users/rushpu/Program/Devops/Ansible/ansible.cfg) = 2\r\nDEFAULT_CALLBACK_PLUGIN_PATH(/Users/rushpu/Program/Devops/Ansible/ansible.cfg) = [u'/Users/rushpu/Program/Devops/Ansible/plugins/human_log.py']\r\nDEFAULT_LOG_PATH(/Users/rushpu/Program/Devops/Ansible/ansible.cfg) = /Users/rushpu/Program/Devops/Ansible/log\r\nDEFAULT_PRIVATE_KEY_FILE(/Users/rushpu/Program/Devops/Ansible/ansible.cfg) = /Users/rushpu/.ssh/id_rsa\r\nDEFAULT_ROLES_PATH(/Users/rushpu/Program/Devops/Ansible/ansible.cfg) = [u'/Users/rushpu/Program/Devops/Ansible/roles']\r\nDEFAULT_TIMEOUT(/Users/rushpu/Program/Devops/Ansible/ansible.cfg) = 20\r\nHOST_KEY_CHECKING(/Users/rushpu/Program/Devops/Ansible/ansible.cfg) = False\r\nRETRY_FILES_ENABLED(/Users/rushpu/Program/Devops/Ansible/ansible.cfg) = False\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!---\r\nMention the OS you are running Ansible from, and the OS you are\r\nmanaging, or say \"N/A\" for anything that is not platform-specific.\r\nAlso mention the specific version of what you are trying to control,\r\ne.g. if this is a network bug the version of firmware on the network device.\r\n-->\r\n```\r\nSystem Version: macOS 10.12.6 (16G1114)\r\nKernel Version: Darwin 16.7.0\r\n```\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly -->\r\n\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n- name: add rabbitmq user\r\n  rabbitmq_user:\r\n    user: \"user\"\r\n    password: \"password\"\r\n    vhost: /\r\n    tags: monitoring\r\n    configure_priv: .*\r\n    read_priv: .*\r\n    write_priv: .*\r\n    state: present\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- What did you expect to happen when running the steps above? -->\r\n```\r\nadd a rabbitmq user\r\n```\r\n\r\n##### ACTUAL RESULTS\r\n<!--- What actually happened? If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\nTASK [beoprabbitmq : add rabbitmq user] *******************************************************************************************************\r\ntask path: /Users/rushpu/Program/Devops/Ansible/roles/beoprabbitmq/tasks/main.yml:25\r\nUsing module file /Users/rushpu/.pyenv/versions/2.7.12/envs/ansible/lib/python2.7/site-packages/ansible/modules/messaging/rabbitmq_user.py\r\n<hostip> ESTABLISH SSH CONNECTION FOR USER: root\r\n<hostip> SSH: EXEC sshpass -d59 ssh -C -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o Port=22 -o 'IdentityFile=\"/Users/rushpu/.ssh/id_rsa\"' -o User=root -o ConnectTimeout=20 -o ControlPath=/tmp/ansible-ssh-%h-%p-%r hostip '/bin/sh -c '\"'\"'/usr/bin/python && sleep 0'\"'\"''\r\n<hostip> (1, '', 'Traceback (most recent call last):\\n  File \"/tmp/ansible_PxsyvA/ansible_module_rabbitmq_user.py\", line 307, in <module>\\n    main()\\n  File \"/tmp/ansible_PxsyvA/ansible_module_rabbitmq_user.py\", line 280, in main\\n    if rabbitmq_user.get():\\n  File \"/tmp/ansible_PxsyvA/ansible_module_rabbitmq_user.py\", line 176, in get\\n    self._permissions = self._get_permissions()\\n  File \"/tmp/ansible_PxsyvA/ansible_module_rabbitmq_user.py\", line 185, in _get_permissions\\n    vhost, configure_priv, write_priv, read_priv = perm.split(\\'\\\\t\\')\\nValueError: need more than 1 value to unpack\\n')\r\nThe full traceback is:\r\nTraceback (most recent call last):\r\n  File \"/tmp/ansible_PxsyvA/ansible_module_rabbitmq_user.py\", line 307, in <module>\r\n    main()\r\n  File \"/tmp/ansible_PxsyvA/ansible_module_rabbitmq_user.py\", line 280, in main\r\n    if rabbitmq_user.get():\r\n  File \"/tmp/ansible_PxsyvA/ansible_module_rabbitmq_user.py\", line 176, in get\r\n    self._permissions = self._get_permissions()\r\n  File \"/tmp/ansible_PxsyvA/ansible_module_rabbitmq_user.py\", line 185, in _get_permissions\r\n    vhost, configure_priv, write_priv, read_priv = perm.split('\\t')\r\nValueError: need more than 1 value to unpack\r\n\r\nfatal: [rabbitmq]: FAILED! => {\r\n    \"changed\": false,\r\n    \"module_stderr\": \"Traceback (most recent call last):\\n  File \\\"/tmp/ansible_PxsyvA/ansible_module_rabbitmq_user.py\\\", line 307, in <module>\\n    main()\\n  File \\\"/tmp/ansible_PxsyvA/ansible_module_rabbitmq_user.py\\\", line 280, in main\\n    if rabbitmq_user.get():\\n  File \\\"/tmp/ansible_PxsyvA/ansible_module_rabbitmq_user.py\\\", line 176, in get\\n    self._permissions = self._get_permissions()\\n  File \\\"/tmp/ansible_PxsyvA/ansible_module_rabbitmq_user.py\\\", line 185, in _get_permissions\\n    vhost, configure_priv, write_priv, read_priv = perm.split('\\\\t')\\nValueError: need more than 1 value to unpack\\n\",\r\n    \"module_stdout\": \"\",\r\n    \"msg\": \"MODULE FAILURE\",\r\n    \"rc\": 1\r\n}\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34863/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "YoninL": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34861", "title": "Host order in groups variable is not 'as provided' when using yaml inventory", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\n - inventory\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.3.1.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = Default w/o overrides\r\n  python version = 2.7.6 (default, Oct 26 2016, 20:30:19) [GCC 4.8.4]\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n - Ubuntu 14.04 LTS\r\n\r\n##### SUMMARY\r\nThe order of elements in hostvars[groups['group_name']] list doesn't follow the order in yaml format host inventory file.\r\n\r\nHost file:\r\n```\r\nroot@myci:~# cat dev\r\nmysql:\r\n    hosts:\r\n        192.168.11.2:\r\n        192.168.11.1:\r\n```\r\nCommands run against the host file:\r\n```\r\nroot@myci:~# ansible -i dev localhost -m debug -a \"var=hostvars[groups['mysql'][0]]\"\r\n```\r\n##### EXPECTED RESULTS\r\n192.168.11.1\r\n\r\n##### ACTUAL RESULTS\r\n192.168.11.2\r\n\r\n##### STEPS TO REPRODUCE\r\nLet's say we have two host files, host.yaml and host.ini.\r\n\r\nhost.yaml:\r\n```\r\nmysql:\r\n    hosts:\r\n        192.168.11.2:\r\n        192.168.11.1:\r\n```\r\nhost.ini:\r\n```\r\n[mysql]\r\n192.168.11.2\r\n192.168.11.1\r\n```\r\nI want to run `ansible -i host.yaml localhost -m debug -a \"var=hostvars[groups['mysql'][0]]\"` to get the first host, but got the second one.\r\n```\r\nlocalhost | SUCCESS => {\r\n    \"hostvars[groups['mysql'][0]]\": {\r\n        \"ansible_check_mode\": false,\r\n        \"ansible_playbook_python\": \"/usr/bin/python\",\r\n        \"ansible_version\": {\r\n            \"full\": \"2.3.1.0\",\r\n            \"major\": 2,\r\n            \"minor\": 3,\r\n            \"revision\": 1,\r\n            \"string\": \"2.3.1.0\"\r\n        },\r\n        \"group_names\": [\r\n            \"mysql\"\r\n        ],\r\n        \"groups\": {\r\n            \"all\": [\r\n                \"192.168.11.1\",\r\n                \"192.168.11.2\"\r\n            ],\r\n            \"mysql\": [\r\n                \"192.168.11.1\",\r\n                \"192.168.11.2\"\r\n            ],\r\n            \"ungrouped\": [\r\n                \"localhost\"\r\n            ]\r\n        },\r\n        \"inventory_dir\": \"/root\",\r\n        \"inventory_file\": \"/root/dev\",\r\n        \"inventory_hostname\": \"192.168.11.1\",\r\n        \"inventory_hostname_short\": \"192\",\r\n        \"omit\": \"__omit_place_holder__9cc33acdf1e4828707e5668d453dbe2a95a98243\",\r\n        \"playbook_dir\": \".\"\r\n    }\r\n}\r\n```\r\nWhile `ansible -i host.ini localhost -m debug -a \"var=hostvars[groups['mysql'][0]]\"` gives me correct result.\r\n```\r\nlocalhost | SUCCESS => {\r\n    \"hostvars[groups['mysql'][0]]\": {\r\n        \"ansible_check_mode\": false,\r\n        \"ansible_playbook_python\": \"/usr/bin/python\",\r\n        \"ansible_version\": {\r\n            \"full\": \"2.3.1.0\",\r\n            \"major\": 2,\r\n            \"minor\": 3,\r\n            \"revision\": 1,\r\n            \"string\": \"2.3.1.0\"\r\n        },\r\n        \"group_names\": [\r\n            \"mysql\"\r\n        ],\r\n        \"groups\": {\r\n            \"all\": [\r\n                \"192.168.11.2\",\r\n                \"192.168.11.1\"\r\n            ],\r\n            \"mysql\": [\r\n                \"192.168.11.2\",\r\n                \"192.168.11.1\"\r\n            ],\r\n            \"ungrouped\": [\r\n                \"localhost\"\r\n            ]\r\n        },\r\n        \"inventory_dir\": \"/root\",\r\n        \"inventory_file\": \"/root/dev2\",\r\n        \"inventory_hostname\": \"192.168.11.2\",\r\n        \"inventory_hostname_short\": \"192\",\r\n        \"omit\": \"__omit_place_holder__6c8e522f74475f8abdd8199cf2c270434b024b1a\",\r\n        \"playbook_dir\": \".\"\r\n    }\r\n}\r\n```\r\n\r\nYou can see the order in host.ini matters, but in host.yaml not.\r\n\r\nI need to use yaml format to store some variables which is encrypted by Ansible vault.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34861/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "grabmana": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34857", "title": "Ansible truncates output from network devices", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!---\r\nName of the module, plugin, task or feature\r\nDo not include extra details here, e.g. \"vyos_command\" not \"the network module vyos_command\" or the full path\r\n-->\r\nnetwork_cli\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible --version\r\nansible 2.3.0.0\r\n  config file = \r\n  configured module search path = Default w/o overrides\r\n  python version = 2.7.12 (default, Nov 20 2017, 18:23:56) [GCC 5.4.0 20160609]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\nIf using Ansible 2.4 or above, paste the results of \"ansible-config dump --only-changed\"\r\nOtherwise, mention any settings you have changed/added/removed in ansible.cfg\r\n(or using the ANSIBLE_* environment variables).\r\n-->\r\n\r\n##### OS / ENVIRONMENT\r\n<!---\r\nMention the OS you are running Ansible from, and the OS you are\r\nmanaging, or say \"N/A\" for anything that is not platform-specific.\r\nAlso mention the specific version of what you are trying to control,\r\ne.g. if this is a network bug the version of firmware on the network device.\r\n-->\r\nansible launched on Ubuntu 16.04.2 LTS\r\nmanaging ios-xe\r\n##### SUMMARY\r\n<!--- Explain the problem briefly -->\r\nAnsible truncates output of cpmmands executed on ios devices\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\nexecute \"show run\" on the device which contain\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- What did you expect to happen when running the steps above? -->\r\n...\r\nip sla 10524001\r\n udp-jitter 10.10.1.1 64001 source-ip 10.10.1.2\r\n request-data-size 128\r\n tos 104\r\n vrf name\r\n tag PPHH111 -> PPCF3111  UDP jitter D1\r\n frequency 300\r\nip sla schedule 10524001 life forever start-time after 00:02:16\r\nip sla 10524002\r\n udp-jitter 10.10.1.1 64001 source-ip 10.10.1.2\r\n request-data-size 128\r\n tos 72\r\n vrf name\r\n tag PPHH111 -> PPCF3111  UDP jitter D2\r\n frequency 300\r\n...\r\n##### ACTUAL RESULTS\r\n<!--- What actually happened? If possible run with extra verbosity (-vvvv) -->\r\noutput in stdout was truncated.\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\noutput of command is not complete. Data is truncated after line \"tag PPHH111 -> PPCF3111  UDP jitter D1\"\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34857/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "smueller18": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34855", "title": "docker_network does not support ipv6 networks", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Feature Idea\r\n\r\n##### COMPONENT NAME\r\ndocker_network\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/sm/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.6/dist-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.6.3 (default, Oct  3 2017, 21:45:48) [GCC 7.2.0]\r\n```\r\n\r\n##### SUMMARY\r\nThe docker_network module does not support defining an ipv6 network. There is no `enable_ipv6` parameter. Furthermore, a new strategy must be chosen to allow defining custom ipv4 and ipv6 options.\r\nAt the moment an ipv6 subnet could be defined with\r\n```yml\r\n- name: Create ipv6 network\r\n  docker_network:\r\n    name: ipv6\r\n    ipam_options:\r\n      subnet: 'a:b:c:d::/80'\r\n```\r\nbut without setting `enable_ipv6`, containers don't get an ipv6 address. Furthermore, if the task definition does not change on further runs, the task outputs that the network changed, because it does not expect an ipv6 subnet.\r\n\r\nTo implement ipv6 network definitions, two changes are required.\r\nFirst, a parameter to enable ipv6 must be introduced. Maybe with the name `enable_ipv6` which is not required and defaults to no.\r\nSecond, the `ipam_options` directive must be extended to allow multiple config entries. I would suggest a list:\r\n```yml\r\n- name: Create ipv6 network\r\n  docker_network:\r\n    name: ipv6\r\n    enable_ipv6: yes\r\n    ipam_options:\r\n      - subnet: '172.3.26.0/16'\r\n        gateway: 172.3.26.1\r\n      - subnet: 'a:b:c:d::/80'\r\n```\r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34855/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "andeschau": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34853", "title": "SSH connection unstable on Ansible v2.4", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Bug Report\r\n\r\n\r\n##### COMPONENT NAME\r\n<!---\r\nName of the module, plugin, task or feature\r\nDo not include extra details here, e.g. \"vyos_command\" not \"the network module vyos_command\" or the full path\r\n-->\r\nwait_for\r\nshell\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nAnsible 2.4.0.0\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\nIf using Ansible 2.4 or above, paste the results of \"ansible-config dump --only-changed\"\r\nOtherwise, mention any settings you have changed/added/removed in ansible.cfg\r\n(or using the ANSIBLE_* environment variables).\r\n-->\r\nDEFAULT_ROLES_PATH(/etc/ansible/ansible.cfg) = [u'/etc/ansible/roles', u'/usr/share/ansible/roles']\r\n\r\n##### OS / ENVIRONMENT\r\n<!---\r\nMention the OS you are running Ansible from, and the OS you are\r\nmanaging, or say \"N/A\" for anything that is not platform-specific.\r\nAlso mention the specific version of what you are trying to control,\r\ne.g. if this is a network bug the version of firmware on the network device.\r\n-->\r\nRHEL 7.4\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly -->\r\nThe SSH connection is intermittent to target host.\r\nThe ssh connection should use ssh key (public key) to do authentication.\r\n\r\nBut sometimes the connection uses \"gssapi-with-mic packet\" with \"we sent a gssapi-with-mic packet, wait for reply\", then connection failed. while other times, the connection uses \"gssapi-with-mic packet\" with \"we did not send a packet, disable method\", then it uses the next method \"publickey\" and the connection would be made.\r\n\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\nRepeatedly run the playbook, with -vvvv to check the connection.\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\ntest.yml\r\n\r\n```yaml\r\n---\r\n- name: Wait for host to come up\r\n  hosts: localhost\r\n  gather_facts: no\r\n  tasks:\r\n    - wait_for: host=[target host ip] state=started port=22 delay=1 timeout=300\r\n\r\n- name: Testing the ssh by ls folder\r\n  hosts: ALL\r\n  tasks:\r\n    - shell: ls ~\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- What did you expect to happen when running the steps above? -->\r\n\r\nThe ssh connection uses public key to do authentication every time and succeed.\r\n\r\n##### ACTUAL RESULTS\r\n<!--- What actually happened? If possible run with extra verbosity (-vvvv) -->\r\n\r\nIntermittently we got the error as below:\r\n\r\n```\r\nansible-playbook-2 -i /etc/ansible/hosts test.yml -u ansible -vvvv\r\nansible-playbook-2 2.4.0.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/var/lib/awx/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /bin/ansible-playbook-2\r\n  python version = 2.7.5 (default, May  3 2017, 07:55:04) [GCC 4.8.5 20150623 (Red Hat 4.8.5-14)]\r\nUsing /etc/ansible/ansible.cfg as config file\r\nsetting up inventory plugins\r\nSet default localhost to localhost\r\nParsed /etc/ansible/hosts inventory source with ini plugin\r\nLoading callback plugin default of type stdout, v2.0 from /usr/lib/python2.7/site-packages/ansible/plugins/callback/__init__.pyc\r\n\r\nPLAYBOOK: test.yml ***********************************************************************************************************************************\r\n2 plays in test.yml\r\n\r\nPLAY [Wait for host to come up] **********************************************************************************************************************\r\nMETA: ran handlers\r\n\r\nTASK [wait_for] **************************************************************************************************************************************\r\ntask path: /var/lib/awx/test.yml:6\r\nUsing module file /usr/lib/python2.7/site-packages/ansible/modules/utilities/logic/wait_for.py\r\n<localhost> ESTABLISH LOCAL CONNECTION FOR USER: awx\r\n<localhost> EXEC /bin/sh -c 'echo ~ && sleep 0'\r\n<localhost> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /var/lib/awx/.ansible/tmp/ansible-tmp-1515939786.16-147552035942446 `\" && echo ansible-tmp-1515939786.16-147552035942446=\"` echo /var/lib/awx/.ansible/tmp/ansible-tmp-1515939786.16-147552035942446 `\" ) && sleep 0'\r\n<localhost> PUT /tmp/tmpySi5Ep TO /var/lib/awx/.ansible/tmp/ansible-tmp-1515939786.16-147552035942446/wait_for.py\r\n<localhost> EXEC /bin/sh -c 'chmod u+x /var/lib/awx/.ansible/tmp/ansible-tmp-1515939786.16-147552035942446/ /var/lib/awx/.ansible/tmp/ansible-tmp-1515939786.16-147552035942446/wait_for.py && sleep 0'\r\n<localhost> EXEC /bin/sh -c '/usr/bin/python /var/lib/awx/.ansible/tmp/ansible-tmp-1515939786.16-147552035942446/wait_for.py; rm -rf \"/var/lib/awx/.ansible/tmp/ansible-tmp-1515939786.16-147552035942446/\" > /dev/null 2>&1 && sleep 0'\r\nok: [localhost] => {\r\n    \"changed\": false, \r\n    \"elapsed\": 1, \r\n    \"failed\": false, \r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"active_connection_states\": [\r\n                \"ESTABLISHED\", \r\n                \"FIN_WAIT1\", \r\n                \"FIN_WAIT2\", \r\n                \"SYN_RECV\", \r\n                \"SYN_SENT\", \r\n                \"TIME_WAIT\"\r\n            ], \r\n            \"connect_timeout\": 5, \r\n            \"delay\": 1, \r\n            \"exclude_hosts\": null, \r\n            \"host\": \"[target host ip]\", \r\n            \"msg\": null, \r\n            \"path\": null, \r\n            \"port\": 22, \r\n            \"search_regex\": null, \r\n            \"sleep\": 1, \r\n            \"state\": \"started\", \r\n            \"timeout\": 300\r\n        }\r\n    }, \r\n    \"path\": null, \r\n    \"port\": 22, \r\n    \"search_regex\": null, \r\n    \"state\": \"started\"\r\n}\r\nMETA: ran handlers\r\nMETA: ran handlers\r\n\r\nPLAY [Testing the ssh by ls folder] ******************************************************************************************************************\r\n\r\nTASK [Gathering Facts] *******************************************************************************************************************************\r\nUsing module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py\r\n<[target host ip]> ESTABLISH SSH CONNECTION FOR USER: ansible\r\n<[target host ip]> SSH: EXEC ssh -vvv -C -o ControlMaster=auto -o ControlPersist=60s -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o User=ansible -o ConnectTimeout=10 -o ControlPath=/var/lib/awx/.ansible/cp/c9145471fb [target host ip]'/bin/sh -c '\"'\"'echo ~ && sleep 0'\"'\"''\r\n<[target host ip]> (255, '', 'OpenSSH_6.6.1, OpenSSL 1.0.1e-fips 11 Feb 2013\\r\\ndebug1: Reading configuration data /etc/ssh/ssh_config\\r\\ndebug1: /etc/ssh/ssh_config line 56: Applying options for *\\r\\ndebug1: auto-mux: Trying existing master\\r\\ndebug1: Control socket \"/var/lib/awx/.ansible/cp/c9145471fb\" does not exist\\r\\ndebug2: ssh_connect: needpriv 0\\r\\ndebug1: Connecting to [target host ip] [[target host ip]] port 22.\\r\\ndebug2: fd 3 setting O_NONBLOCK\\r\\ndebug1: fd 3 clearing O_NONBLOCK\\r\\ndebug1: Connection established.\\r\\ndebug3: timeout: 9966 ms remain after connect\\r\\ndebug3: Incorrect RSA1 identifier\\r\\ndebug3: Could not load \"/var/lib/awx/.ssh/id_rsa\" as a RSA1 public key\\r\\ndebug1: identity file /var/lib/awx/.ssh/id_rsa type -1\\r\\ndebug1: identity file /var/lib/awx/.ssh/id_rsa-cert type -1\\r\\ndebug1: identity file /var/lib/awx/.ssh/id_dsa type -1\\r\\ndebug1: identity file /var/lib/awx/.ssh/id_dsa-cert type -1\\r\\ndebug1: identity file /var/lib/awx/.ssh/id_ecdsa type -1\\r\\ndebug1: identity file /var/lib/awx/.ssh/id_ecdsa-cert type -1\\r\\ndebug1: identity file /var/lib/awx/.ssh/id_ed25519 type -1\\r\\ndebug1: identity file /var/lib/awx/.ssh/id_ed25519-cert type -1\\r\\ndebug1: Enabling compatibility mode for protocol 2.0\\r\\ndebug1: Local version string SSH-2.0-OpenSSH_6.6.1\\r\\ndebug1: Remote protocol version 2.0, remote software version OpenSSH_7.4\\r\\ndebug1: match: OpenSSH_7.4 pat OpenSSH* compat 0x04000000\\r\\ndebug2: fd 3 setting O_NONBLOCK\\r\\ndebug3: load_hostkeys: loading entries for host \"[target host ip]\" from file \"/var/lib/awx/.ssh/known_hosts\"\\r\\ndebug3: load_hostkeys: found key type ECDSA in file /var/lib/awx/.ssh/known_hosts:13\\r\\ndebug3: load_hostkeys: loaded 1 keys\\r\\ndebug3: order_hostkeyalgs: prefer hostkeyalgs: ecdsa-sha2-nistp256-cert-v01@openssh.com,ecdsa-sha2-nistp384-cert-v01@openssh.com,ecdsa-sha2-nistp521-cert-v01@openssh.com,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521\\r\\ndebug1: SSH2_MSG_KEXINIT sent\\r\\ndebug1: SSH2_MSG_KEXINIT received\\r\\ndebug2: kex_parse_kexinit: curve25519-sha256@libssh.org,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha1,diffie-hellman-group1-sha1\\r\\ndebug2: kex_parse_kexinit: ecdsa-sha2-nistp256-cert-v01@openssh.com,ecdsa-sha2-nistp384-cert-v01@openssh.com,ecdsa-sha2-nistp521-cert-v01@openssh.com,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,ssh-ed25519-cert-v01@openssh.com,ssh-rsa-cert-v01@openssh.com,ssh-dss-cert-v01@openssh.com,ssh-rsa-cert-v00@openssh.com,ssh-dss-cert-v00@openssh.com,ssh-ed25519,ssh-rsa,ssh-dss\\r\\ndebug2: kex_parse_kexinit: aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-gcm@openssh.com,aes256-gcm@openssh.com,chacha20-poly1305@openssh.com,aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,aes256-cbc,arcfour,rijndael-cbc@lysator.liu.se\\r\\ndebug2: kex_parse_kexinit: aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-gcm@openssh.com,aes256-gcm@openssh.com,chacha20-poly1305@openssh.com,aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,aes256-cbc,arcfour,rijndael-cbc@lysator.liu.se\\r\\ndebug2: kex_parse_kexinit: hmac-md5-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-ripemd160-etm@openssh.com,hmac-sha1-96-etm@openssh.com,hmac-md5-96-etm@openssh.com,hmac-md5,hmac-sha1,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96\\r\\ndebug2: kex_parse_kexinit: hmac-md5-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-ripemd160-etm@openssh.com,hmac-sha1-96-etm@openssh.com,hmac-md5-96-etm@openssh.com,hmac-md5,hmac-sha1,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96\\r\\ndebug2: kex_parse_kexinit: zlib@openssh.com,zlib,none\\r\\ndebug2: kex_parse_kexinit: zlib@openssh.com,zlib,none\\r\\ndebug2: kex_parse_kexinit: \\r\\ndebug2: kex_parse_kexinit: \\r\\ndebug2: kex_parse_kexinit: first_kex_follows 0 \\r\\ndebug2: kex_parse_kexinit: reserved 0 \\r\\ndebug2: kex_parse_kexinit: curve25519-sha256,curve25519-sha256@libssh.org,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha256,diffie-hellman-group14-sha1,diffie-hellman-group1-sha1\\r\\ndebug2: kex_parse_kexinit: ssh-rsa,rsa-sha2-512,rsa-sha2-256,ecdsa-sha2-nistp256,ssh-ed25519\\r\\ndebug2: kex_parse_kexinit: aes128-ctr,aes192-ctr,aes256-ctr\\r\\ndebug2: kex_parse_kexinit: aes128-ctr,aes192-ctr,aes256-ctr\\r\\ndebug2: kex_parse_kexinit: umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-sha1\\r\\ndebug2: kex_parse_kexinit: umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-sha1\\r\\ndebug2: kex_parse_kexinit: none,zlib@openssh.com\\r\\ndebug2: kex_parse_kexinit: none,zlib@openssh.com\\r\\ndebug2: kex_parse_kexinit: \\r\\ndebug2: kex_parse_kexinit: \\r\\ndebug2: kex_parse_kexinit: first_kex_follows 0 \\r\\ndebug2: kex_parse_kexinit: reserved 0 \\r\\ndebug2: mac_setup: setup hmac-sha1-etm@openssh.com\\r\\ndebug1: kex: server->client aes128-ctr hmac-sha1-etm@openssh.com zlib@openssh.com\\r\\ndebug2: mac_setup: setup hmac-sha1-etm@openssh.com\\r\\ndebug1: kex: client->server aes128-ctr hmac-sha1-etm@openssh.com zlib@openssh.com\\r\\ndebug1: kex: curve25519-sha256@libssh.org need=20 dh_need=20\\r\\ndebug1: kex: curve25519-sha256@libssh.org need=20 dh_need=20\\r\\ndebug1: sending SSH2_MSG_KEX_ECDH_INIT\\r\\ndebug1: expecting SSH2_MSG_KEX_ECDH_REPLY\\r\\ndebug1: Server host key: ECDSA 65:6f:69:eb:a6:67:a5:98:8e:42:77:65:86:ee:c7:66\\r\\ndebug3: load_hostkeys: loading entries for host \"[target host ip]\" from file \"/var/lib/awx/.ssh/known_hosts\"\\r\\ndebug3: load_hostkeys: found key type ECDSA in file /var/lib/awx/.ssh/known_hosts:13\\r\\ndebug3: load_hostkeys: loaded 1 keys\\r\\ndebug1: Host \\'[target host ip]\\' is known and matches the ECDSA host key.\\r\\ndebug1: Found key in /var/lib/awx/.ssh/known_hosts:13\\r\\ndebug1: ssh_ecdsa_verify: signature correct\\r\\ndebug2: kex_derive_keys\\r\\ndebug2: set_newkeys: mode 1\\r\\ndebug1: SSH2_MSG_NEWKEYS sent\\r\\ndebug1: expecting SSH2_MSG_NEWKEYS\\r\\ndebug2: set_newkeys: mode 0\\r\\ndebug1: SSH2_MSG_NEWKEYS received\\r\\ndebug1: SSH2_MSG_SERVICE_REQUEST sent\\r\\ndebug2: service_accept: ssh-userauth\\r\\ndebug1: SSH2_MSG_SERVICE_ACCEPT received\\r\\ndebug2: key: /var/lib/awx/.ssh/id_rsa ((nil)),\\r\\ndebug2: key: /var/lib/awx/.ssh/id_dsa ((nil)),\\r\\ndebug2: key: /var/lib/awx/.ssh/id_ecdsa ((nil)),\\r\\ndebug2: key: /var/lib/awx/.ssh/id_ed25519 ((nil)),\\r\\ndebug3: input_userauth_banner\\r\\n****************************************************************************SSH BANNER HERE  *\\n*                                                                          *\\n****************************************************************************\\ndebug1: Authentications that can continue: publickey,gssapi-keyex,gssapi-with-mic,password\\r\\ndebug3: start over, passed a different list publickey,gssapi-keyex,gssapi-with-mic,password\\r\\ndebug3: preferred gssapi-with-mic,gssapi-keyex,hostbased,publickey\\r\\ndebug3: authmethod_lookup gssapi-with-mic\\r\\ndebug3: remaining preferred: gssapi-keyex,hostbased,publickey\\r\\ndebug3: authmethod_is_enabled gssapi-with-mic\\r\\ndebug1: Next authentication method: gssapi-with-mic\\r\\ndebug1: Unspecified GSS failure.  Minor code may provide more information\\nServer not found in Kerberos database\\n\\r\\ndebug2: we sent a gssapi-with-mic packet, wait for reply\\r\\nConnection closed by [target host ip]\\r\\n')\r\nfatal: [[target host ip]]: UNREACHABLE! => {\r\n    \"changed\": false, \r\n    \"msg\": \"Failed to connect to the host via ssh: OpenSSH_6.6.1, OpenSSL 1.0.1e-fips 11 Feb 2013\\r\\ndebug1: Reading configuration data /etc/ssh/ssh_config\\r\\ndebug1: /etc/ssh/ssh_config line 56: Applying options for *\\r\\ndebug1: auto-mux: Trying existing master\\r\\ndebug1: Control socket \\\"/var/lib/awx/.ansible/cp/c9145471fb\\\" does not exist\\r\\ndebug2: ssh_connect: needpriv 0\\r\\ndebug1: Connecting to [target host ip] [[target host ip]] port 22.\\r\\ndebug2: fd 3 setting O_NONBLOCK\\r\\ndebug1: fd 3 clearing O_NONBLOCK\\r\\ndebug1: Connection established.\\r\\ndebug3: timeout: 9966 ms remain after connect\\r\\ndebug3: Incorrect RSA1 identifier\\r\\ndebug3: Could not load \\\"/var/lib/awx/.ssh/id_rsa\\\" as a RSA1 public key\\r\\ndebug1: identity file /var/lib/awx/.ssh/id_rsa type -1\\r\\ndebug1: identity file /var/lib/awx/.ssh/id_rsa-cert type -1\\r\\ndebug1: identity file /var/lib/awx/.ssh/id_dsa type -1\\r\\ndebug1: identity file /var/lib/awx/.ssh/id_dsa-cert type -1\\r\\ndebug1: identity file /var/lib/awx/.ssh/id_ecdsa type -1\\r\\ndebug1: identity file /var/lib/awx/.ssh/id_ecdsa-cert type -1\\r\\ndebug1: identity file /var/lib/awx/.ssh/id_ed25519 type -1\\r\\ndebug1: identity file /var/lib/awx/.ssh/id_ed25519-cert type -1\\r\\ndebug1: Enabling compatibility mode for protocol 2.0\\r\\ndebug1: Local version string SSH-2.0-OpenSSH_6.6.1\\r\\ndebug1: Remote protocol version 2.0, remote software version OpenSSH_7.4\\r\\ndebug1: match: OpenSSH_7.4 pat OpenSSH* compat 0x04000000\\r\\ndebug2: fd 3 setting O_NONBLOCK\\r\\ndebug3: load_hostkeys: loading entries for host \\\"[target host ip]\\\" from file \\\"/var/lib/awx/.ssh/known_hosts\\\"\\r\\ndebug3: load_hostkeys: found key type ECDSA in file /var/lib/awx/.ssh/known_hosts:13\\r\\ndebug3: load_hostkeys: loaded 1 keys\\r\\ndebug3: order_hostkeyalgs: prefer hostkeyalgs: ecdsa-sha2-nistp256-cert-v01@openssh.com,ecdsa-sha2-nistp384-cert-v01@openssh.com,ecdsa-sha2-nistp521-cert-v01@openssh.com,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521\\r\\ndebug1: SSH2_MSG_KEXINIT sent\\r\\ndebug1: SSH2_MSG_KEXINIT received\\r\\ndebug2: kex_parse_kexinit: curve25519-sha256@libssh.org,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha1,diffie-hellman-group1-sha1\\r\\ndebug2: kex_parse_kexinit: ecdsa-sha2-nistp256-cert-v01@openssh.com,ecdsa-sha2-nistp384-cert-v01@openssh.com,ecdsa-sha2-nistp521-cert-v01@openssh.com,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,ssh-ed25519-cert-v01@openssh.com,ssh-rsa-cert-v01@openssh.com,ssh-dss-cert-v01@openssh.com,ssh-rsa-cert-v00@openssh.com,ssh-dss-cert-v00@openssh.com,ssh-ed25519,ssh-rsa,ssh-dss\\r\\ndebug2: kex_parse_kexinit: aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-gcm@openssh.com,aes256-gcm@openssh.com,chacha20-poly1305@openssh.com,aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,aes256-cbc,arcfour,rijndael-cbc@lysator.liu.se\\r\\ndebug2: kex_parse_kexinit: aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-gcm@openssh.com,aes256-gcm@openssh.com,chacha20-poly1305@openssh.com,aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,aes256-cbc,arcfour,rijndael-cbc@lysator.liu.se\\r\\ndebug2: kex_parse_kexinit: hmac-md5-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-ripemd160-etm@openssh.com,hmac-sha1-96-etm@openssh.com,hmac-md5-96-etm@openssh.com,hmac-md5,hmac-sha1,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96\\r\\ndebug2: kex_parse_kexinit: hmac-md5-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-ripemd160-etm@openssh.com,hmac-sha1-96-etm@openssh.com,hmac-md5-96-etm@openssh.com,hmac-md5,hmac-sha1,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96\\r\\ndebug2: kex_parse_kexinit: zlib@openssh.com,zlib,none\\r\\ndebug2: kex_parse_kexinit: zlib@openssh.com,zlib,none\\r\\ndebug2: kex_parse_kexinit: \\r\\ndebug2: kex_parse_kexinit: \\r\\ndebug2: kex_parse_kexinit: first_kex_follows 0 \\r\\ndebug2: kex_parse_kexinit: reserved 0 \\r\\ndebug2: kex_parse_kexinit: curve25519-sha256,curve25519-sha256@libssh.org,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha256,diffie-hellman-group14-sha1,diffie-hellman-group1-sha1\\r\\ndebug2: kex_parse_kexinit: ssh-rsa,rsa-sha2-512,rsa-sha2-256,ecdsa-sha2-nistp256,ssh-ed25519\\r\\ndebug2: kex_parse_kexinit: aes128-ctr,aes192-ctr,aes256-ctr\\r\\ndebug2: kex_parse_kexinit: aes128-ctr,aes192-ctr,aes256-ctr\\r\\ndebug2: kex_parse_kexinit: umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-sha1\\r\\ndebug2: kex_parse_kexinit: umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-sha1\\r\\ndebug2: kex_parse_kexinit: none,zlib@openssh.com\\r\\ndebug2: kex_parse_kexinit: none,zlib@openssh.com\\r\\ndebug2: kex_parse_kexinit: \\r\\ndebug2: kex_parse_kexinit: \\r\\ndebug2: kex_parse_kexinit: first_kex_follows 0 \\r\\ndebug2: kex_parse_kexinit: reserved 0 \\r\\ndebug2: mac_setup: setup hmac-sha1-etm@openssh.com\\r\\ndebug1: kex: server->client aes128-ctr hmac-sha1-etm@openssh.com zlib@openssh.com\\r\\ndebug2: mac_setup: setup hmac-sha1-etm@openssh.com\\r\\ndebug1: kex: client->server aes128-ctr hmac-sha1-etm@openssh.com zlib@openssh.com\\r\\ndebug1: kex: curve25519-sha256@libssh.org need=20 dh_need=20\\r\\ndebug1: kex: curve25519-sha256@libssh.org need=20 dh_need=20\\r\\ndebug1: sending SSH2_MSG_KEX_ECDH_INIT\\r\\ndebug1: expecting SSH2_MSG_KEX_ECDH_REPLY\\r\\ndebug1: Server host key: ECDSA 65:6f:69:eb:a6:67:a5:98:8e:42:77:65:86:ee:c7:66\\r\\ndebug3: load_hostkeys: loading entries for host \\\"[target host ip]\\\" from file \\\"/var/lib/awx/.ssh/known_hosts\\\"\\r\\ndebug3: load_hostkeys: found key type ECDSA in file /var/lib/awx/.ssh/known_hosts:13\\r\\ndebug3: load_hostkeys: loaded 1 keys\\r\\ndebug1: Host '[target host ip]' is known and matches the ECDSA host key.\\r\\ndebug1: Found key in /var/lib/awx/.ssh/known_hosts:13\\r\\ndebug1: ssh_ecdsa_verify: signature correct\\r\\ndebug2: kex_derive_keys\\r\\ndebug2: set_newkeys: mode 1\\r\\ndebug1: SSH2_MSG_NEWKEYS sent\\r\\ndebug1: expecting SSH2_MSG_NEWKEYS\\r\\ndebug2: set_newkeys: mode 0\\r\\ndebug1: SSH2_MSG_NEWKEYS received\\r\\ndebug1: SSH2_MSG_SERVICE_REQUEST sent\\r\\ndebug2: service_accept: ssh-userauth\\r\\ndebug1: SSH2_MSG_SERVICE_ACCEPT received\\r\\ndebug2: key: /var/lib/awx/.ssh/id_rsa ((nil)),\\r\\ndebug2: key: /var/lib/awx/.ssh/id_dsa ((nil)),\\r\\ndebug2: key: /var/lib/awx/.ssh/id_ecdsa ((nil)),\\r\\ndebug2: key: /var/lib/awx/.ssh/id_ed25519 ((nil)),\\r\\ndebug3: input_userauth_banner\\r\\n****************************************************************************\\n* SSH BANNER HERE *\\n*                                                                          *\\n****************************************************************************\\ndebug1: Authentications that can continue: publickey,gssapi-keyex,gssapi-with-mic,password\\r\\ndebug3: start over, passed a different list publickey,gssapi-keyex,gssapi-with-mic,password\\r\\ndebug3: preferred gssapi-with-mic,gssapi-keyex,hostbased,publickey\\r\\ndebug3: authmethod_lookup gssapi-with-mic\\r\\ndebug3: remaining preferred: gssapi-keyex,hostbased,publickey\\r\\ndebug3: authmethod_is_enabled gssapi-with-mic\\r\\ndebug1: Next authentication method: gssapi-with-mic\\r\\ndebug1: Unspecified GSS failure.  Minor code may provide more information\\nServer not found in Kerberos database\\n\\r\\ndebug2: we sent a gssapi-with-mic packet, wait for reply\\r\\nConnection closed by [target host IP]\\r\\n\", \r\n    \"unreachable\": true\r\n}\r\n\tto retry, use: --limit @/var/lib/awx/test.retry\r\n\r\nPLAY RECAP *******************************************************************************************************************************************\r\n[target host IP]              : ok=0    changed=0    unreachable=1    failed=0   \r\nlocalhost                  : ok=1    changed=0    unreachable=0    failed=0   \r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34853/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "ipatalas": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34836", "title": "locale_gen module failing with 'No such file or directory'", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!---\r\nName of the module, plugin, task or feature\r\nDo not include extra details here, e.g. \"vyos_command\" not \"the network module vyos_command\" or the full path\r\n-->\r\nlocale_gen \r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/irek/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.13 (default, Nov 24 2017, 17:33:09) [GCC 6.3.0 20170516]\r\n```\r\n\r\n##### CONFIGURATION\r\nChanged:\r\n```\r\nCOLOR_VERBOSE(/etc/ansible/ansible.cfg) = dark gray\r\nDEFAULT_GATHERING(/etc/ansible/ansible.cfg) = explicit\r\nDEFAULT_TIMEOUT(/etc/ansible/ansible.cfg) = 30\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\nControl machine: `Linux debian 4.9.0-4-amd64 #1 SMP Debian 4.9.65-3+deb9u1 (2017-12-23) x86_64 GNU/Linux`\r\n\r\nControlled machine: `Linux osmc 4.9.29-13-osmc #1 SMP PREEMPT Thu Dec 21 17:18:07 UTC 2017 armv7l GNU/Linux` (http://osmc.tv media center based on Debian)\r\n\r\n##### STEPS TO REPRODUCE\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n---\r\n- hosts: osmc\r\n  tasks:\r\n  - name: make sure en_US.UTF-8 locale is generated\r\n    become: yes\r\n    locale_gen:\r\n      name: en_US.UTF-8\r\n      state: present\r\n```\r\n\r\n##### EXPECTED RESULTS\r\n\r\nSelected locale are generated in the system.\r\n\r\n##### ACTUAL RESULTS\r\n\r\nGetting following error:\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\nansible-playbook 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/irek/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible-playbook\r\n  python version = 2.7.13 (default, Nov 24 2017, 17:33:09) [GCC 6.3.0 20170516]\r\nUsing /etc/ansible/ansible.cfg as config file\r\nParsed /etc/ansible/hosts inventory source with ini plugin\r\n\r\nPLAYBOOK: osmc.yml **********************************************************************************************************************************************************************************************\r\n1 plays in osmc.yml\r\n\r\nPLAY [osmc] *****************************************************************************************************************************************************************************************************\r\nMETA: ran handlers\r\n\r\nTASK [make sure locale are properly generated] ******************************************************************************************************************************************************************\r\ntask path: /home/irek/osmc-playbook/osmc.yml:6\r\nUsing module file /usr/lib/python2.7/dist-packages/ansible/modules/system/locale_gen.py\r\n<192.168.1.105> ESTABLISH SSH CONNECTION FOR USER: osmc\r\n<192.168.1.105> SSH: EXEC sshpass -d12 ssh -C -o ControlMaster=auto -o ControlPersist=60s -o User=osmc -o ConnectTimeout=30 -o ControlPath=/home/irek/.ansible/cp/6e525fa90e 192.168.1.105 '/bin/sh -c '\"'\"'echo ~ && sleep 0'\"'\"''\r\n<192.168.1.105> (0, '/home/osmc\\n', '')\r\n<192.168.1.105> ESTABLISH SSH CONNECTION FOR USER: osmc\r\n<192.168.1.105> SSH: EXEC sshpass -d12 ssh -C -o ControlMaster=auto -o ControlPersist=60s -o User=osmc -o ConnectTimeout=30 -o ControlPath=/home/irek/.ansible/cp/6e525fa90e 192.168.1.105 '/bin/sh -c '\"'\"'( umask 77 && mkdir -p \"` echo /home/osmc/.ansible/tmp/ansible-tmp-1515885349.9-159311973542707 `\" && echo ansible-tmp-1515885349.9-159311973542707=\"` echo /home/osmc/.ansible/tmp/ansible-tmp-1515885349.9-159311973542707 `\" ) && sleep 0'\"'\"''\r\n<192.168.1.105> (0, 'ansible-tmp-1515885349.9-159311973542707=/home/osmc/.ansible/tmp/ansible-tmp-1515885349.9-159311973542707\\n', '')\r\n<192.168.1.105> PUT /tmp/tmp4XjgUX TO /home/osmc/.ansible/tmp/ansible-tmp-1515885349.9-159311973542707/locale_gen.py\r\n<192.168.1.105> SSH: EXEC sshpass -d12 sftp -o BatchMode=no -b - -C -o ControlMaster=auto -o ControlPersist=60s -o User=osmc -o ConnectTimeout=30 -o ControlPath=/home/irek/.ansible/cp/6e525fa90e '[192.168.1.105]'\r\n<192.168.1.105> (0, 'sftp> put /tmp/tmp4XjgUX /home/osmc/.ansible/tmp/ansible-tmp-1515885349.9-159311973542707/locale_gen.py\\n', '')\r\n<192.168.1.105> ESTABLISH SSH CONNECTION FOR USER: osmc\r\n<192.168.1.105> SSH: EXEC sshpass -d12 ssh -C -o ControlMaster=auto -o ControlPersist=60s -o User=osmc -o ConnectTimeout=30 -o ControlPath=/home/irek/.ansible/cp/6e525fa90e 192.168.1.105 '/bin/sh -c '\"'\"'chmod u+x /home/osmc/.ansible/tmp/ansible-tmp-1515885349.9-159311973542707/ /home/osmc/.ansible/tmp/ansible-tmp-1515885349.9-159311973542707/locale_gen.py && sleep 0'\"'\"''\r\n<192.168.1.105> (0, '', '')\r\n<192.168.1.105> ESTABLISH SSH CONNECTION FOR USER: osmc\r\n<192.168.1.105> SSH: EXEC sshpass -d12 ssh -C -o ControlMaster=auto -o ControlPersist=60s -o User=osmc -o ConnectTimeout=30 -o ControlPath=/home/irek/.ansible/cp/6e525fa90e -tt 192.168.1.105 '/bin/sh -c '\"'\"'sudo -H -S -n -u root /bin/sh -c '\"'\"'\"'\"'\"'\"'\"'\"'echo BECOME-SUCCESS-alijtmcghmwmqdafnjvxdllojtrhpaci; /usr/bin/python /home/osmc/.ansible/tmp/ansible-tmp-1515885349.9-159311973542707/locale_gen.py; rm -rf \"/home/osmc/.ansible/tmp/ansible-tmp-1515885349.9-159311973542707/\" > /dev/null 2>&1'\"'\"'\"'\"'\"'\"'\"'\"' && sleep 0'\"'\"''\r\n<192.168.1.105> (0, '\\r\\n{\"msg\": \"No such file or directory\", \"failed\": true, \"exitValue\": 2, \"exception\": \"  File \\\\\"/tmp/ansible_Y3dH2N/ansible_module_locale_gen.py\\\\\", line 229, in main\\\\n    apply_change(state, name)\\\\n  File \\\\\"/tmp/ansible_Y3dH2N/ansible_module_locale_gen.py\\\\\", line 150, in apply_change\\\\n    localeGenExitValue = call(\\\\\"locale-gen\\\\\")\\\\n  File \\\\\"/usr/lib/python2.7/subprocess.py\\\\\", line 168, in call\\\\n    return Popen(*popenargs, **kwargs).wait()\\\\n  File \\\\\"/usr/lib/python2.7/subprocess.py\\\\\", line 390, in __init__\\\\n    errread, errwrite)\\\\n  File \\\\\"/usr/lib/python2.7/subprocess.py\\\\\", line 1024, in _execute_child\\\\n    raise child_exception\\\\n\", \"invocation\": {\"module_args\": {\"state\": \"present\", \"name\": \"en_US.UTF-8\"}}}\\r\\n', 'Shared connection to 192.168.1.105 closed.\\r\\n')\r\nThe full traceback is:\r\n  File \"/tmp/ansible_Y3dH2N/ansible_module_locale_gen.py\", line 229, in main\r\n    apply_change(state, name)\r\n  File \"/tmp/ansible_Y3dH2N/ansible_module_locale_gen.py\", line 150, in apply_change\r\n    localeGenExitValue = call(\"locale-gen\")\r\n  File \"/usr/lib/python2.7/subprocess.py\", line 168, in call\r\n    return Popen(*popenargs, **kwargs).wait()\r\n  File \"/usr/lib/python2.7/subprocess.py\", line 390, in __init__\r\n    errread, errwrite)\r\n  File \"/usr/lib/python2.7/subprocess.py\", line 1024, in _execute_child\r\n    raise child_exception\r\n\r\nfatal: [192.168.1.105]: FAILED! => {\r\n    \"changed\": false,\r\n    \"exitValue\": 2,\r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"name\": \"en_US.UTF-8\",\r\n            \"state\": \"present\"\r\n        }\r\n    },\r\n    \"msg\": \"No such file or directory\"\r\n}\r\n        to retry, use: --limit @/home/irek/osmc-playbook/osmc.retry\r\n\r\nPLAY RECAP ******************************************************************************************************************************************************************************************************\r\n192.168.1.105              : ok=0    changed=0    unreachable=0    failed=1\r\n```\r\n\r\nCannot make it work and don't know what file or directory this script cannot find.\r\nAfter setting ANSIBLE_KEEP_REMOTE_FILES to 1 and executing `sudo python path_to_ansible_temp_script_on_remote_machine.py execute` locale are correctly generated. Doing the same from control machine always fails with the error above.\r\nExecuting the same playbook locally on control machine succeeds  which makes me think it's related to target system. \r\nI have also tried changing **become_method** to **su** but no luck as well. It then always times out on either gathering facts part or first play with _Timeout (12s) waiting for privilege escalation prompt_\r\nI have no more clues how to get to the root cause but I'll be happy to try any suggestions even if it can break target system (it's a clean installation anyway - I can easily recover it if needed).", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34836/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "mzpqnxow": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34835", "title": "Error in user module with Solaris 11.3 target", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\n`user` module\r\n\r\n##### ANSIBLE VERSION\r\n2.4.2.0\r\n\r\n##### CONFIGURATION\r\nDEFAULT_BECOME(/home/debian/ansible-solaris/ansible/etc/ansible.cfg) = True\r\nDEFAULT_BECOME_ASK_PASS(/home/debian/ansible-solaris/ansible/etc/ansible.cfg) = True\r\nDEFAULT_BECOME_METHOD(/home/debian/ansible-solaris/ansible/etc/ansible.cfg) = su\r\nDEFAULT_BECOME_USER(/home/debian/ansible-solaris/ansible/etc/ansible.cfg) = root\r\nDEFAULT_HOST_LIST(/home/debian/ansible-solaris/ansible/etc/ansible.cfg) = [u'/home/debian/ansible-solaris/ansible/etc/hosts']\r\nDEFAULT_PRIVATE_KEY_FILE(/home/debian/ansible-solaris/ansible/etc/ansible.cfg) = /home/debian/.ssh/solaris_ansible\r\nDEFAULT_REMOTE_USER(/home/debian/ansible-solaris/ansible/etc/ansible.cfg) = user\r\nDEFAULT_ROLES_PATH(/home/debian/ansible-solaris/ansible/etc/ansible.cfg) = [u'/home/debian/ansible-solaris/ansible/roles']\r\nPARAMIKO_PTY(/home/debian/ansible-solaris/ansible/etc/ansible.cfg) = True\r\n\r\n##### OS / ENVIRONMENT\r\nRunning Ansible from Debian on a Solaris 11.3 target\r\n\r\n##### SUMMARY\r\nWhen using the `user` module to change the shell of an existing user on the Solaris 11.3 machine, I get the following error:\r\n\r\n```failed: [solaris11] (item=root) => {\"changed\": false, \"item\": \"root\", \"msg\": \"UX: /usr/sbin/usermod: ERROR: Roles must be modified with 'rolemod'.\\n\", \"name\": \"root\", \"rc\": 2}```\r\n\r\n##### STEPS TO REPRODUCE\r\nRun a playbook against a Solaris 11.3 host with existing user `user` and the following task:\r\n\r\n```\r\n- user:\r\n    name: user\r\n    shell: /bin/bash\r\n```\r\n\r\n##### EXPECTED RESULTS\r\nSuccessfully change the shell of `user` to /bin/bash\r\n\r\n##### ACTUAL RESULTS\r\nError emitted, bombs out\r\n\r\n```failed: [solaris11] (item=root) => {\"changed\": false, \"item\": \"root\", \"msg\": \"UX: /usr/sbin/usermod: ERROR: Roles must be modified with 'rolemod'.\\n\", \"name\": \"root\", \"rc\": 2}```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34835/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "tomaluca95": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34832", "title": "from_yaml can't decode yaml with vault values", "body": "##### ISSUE TYPE\r\n - Feature Idea\r\n\r\n\r\n##### COMPONENT NAME\r\n\r\n!component\r\n\r\nfilter from_yaml\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.2.0\r\n  config file = None\r\n  configured module search path = [u'/home/luca/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.13 (default, Nov 24 2017, 17:33:09) [GCC 6.3.0 20170516]\r\n```\r\n\r\n##### CONFIGURATION\r\nNone\r\n\r\n##### OS / ENVIRONMENT\r\nDebian 9\r\n\r\n##### SUMMARY\r\nI have a playbook that deploys OpenStack instances and creates all configs in the ansible inventory.\r\nPart of the process is modify the `all.yml` file in the group_vars directory.\r\nIf the file has a vault string from_yaml can't parse the yaml.\r\n\r\n##### STEPS TO REPRODUCE\r\n* Create a yaml file with a vault value\r\n* Use from_yaml to read the file\r\n\r\n```yaml\r\n  - name: \"lookup {{ ansible_inventory_dir }}/group_vars/all.yml file\"\r\n    set_fact:\r\n      all_cfg: \"{{ lookup('file',ansible_inventory_dir + '/group_vars/all.yml') | from_yaml }}\"\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\nHave in all_cfg the content of `all.yml` file as object\r\n\r\n\r\n##### ACTUAL RESULTS\r\nThe yaml library can't decode the vault value\r\n\r\n```\r\nThe full traceback is:\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python2.7/dist-packages/ansible/executor/task_executor.py\", line 130, in run\r\n    res = self._execute()\r\n  File \"/usr/local/lib/python2.7/dist-packages/ansible/executor/task_executor.py\", line 472, in _execute\r\n    self._task.post_validate(templar=templar)\r\n  File \"/usr/local/lib/python2.7/dist-packages/ansible/playbook/task.py\", line 249, in post_validate\r\n    super(Task, self).post_validate(templar)\r\n  File \"/usr/local/lib/python2.7/dist-packages/ansible/playbook/base.py\", line 376, in post_validate\r\n    value = templar.template(getattr(self, name))\r\n  File \"/usr/local/lib/python2.7/dist-packages/ansible/template/__init__.py\", line 494, in template\r\n    disable_lookups=disable_lookups,\r\n  File \"/usr/local/lib/python2.7/dist-packages/ansible/template/__init__.py\", line 450, in template\r\n    disable_lookups=disable_lookups,\r\n  File \"/usr/local/lib/python2.7/dist-packages/ansible/template/__init__.py\", line 672, in do_template\r\n    res = j2_concat(rf)\r\n  File \"<template>\", line 13, in root\r\n  File \"/usr/local/lib/python2.7/dist-packages/ansible/plugins/filter/core.py\", line 221, in from_yaml\r\n    return yaml.safe_load(data)\r\n  File \"/usr/lib/python2.7/dist-packages/yaml/__init__.py\", line 93, in safe_load\r\n    return load(stream, SafeLoader)\r\n  File \"/usr/lib/python2.7/dist-packages/yaml/__init__.py\", line 71, in load\r\n    return loader.get_single_data()\r\n  File \"/usr/lib/python2.7/dist-packages/yaml/constructor.py\", line 39, in get_single_data\r\n    return self.construct_document(node)\r\n  File \"/usr/lib/python2.7/dist-packages/yaml/constructor.py\", line 48, in construct_document\r\n    for dummy in generator:\r\n  File \"/usr/lib/python2.7/dist-packages/yaml/constructor.py\", line 398, in construct_yaml_map\r\n    value = self.construct_mapping(node)\r\n  File \"/usr/lib/python2.7/dist-packages/yaml/constructor.py\", line 208, in construct_mapping\r\n    return BaseConstructor.construct_mapping(self, node, deep=deep)\r\n  File \"/usr/lib/python2.7/dist-packages/yaml/constructor.py\", line 133, in construct_mapping\r\n    value = self.construct_object(value_node, deep=deep)\r\n  File \"/usr/lib/python2.7/dist-packages/yaml/constructor.py\", line 88, in construct_object\r\n    data = constructor(self, node)\r\n  File \"/usr/lib/python2.7/dist-packages/yaml/constructor.py\", line 414, in construct_undefined\r\n    node.start_mark)\r\nConstructorError: could not determine a constructor for the tag '!vault'\r\n  in \"<unicode string>\", line 18, column 20:\r\n        root_password: !vault |\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34832/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "jwitko": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34816", "title": "ec2_group module errors intermittently when \"group_name:\" parameter includes existing group", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\nec2_group\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.2.0\r\n  config file = /home/jwitkowski/throtle-ansible/ansible.cfg\r\n  configured module search path = [u'/home/jwitkowski/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/jwitkowski/throtle-ansible-venv/lib/python2.7/site-packages/ansible\r\n  executable location = /home/jwitkowski/throtle-ansible-venv/bin/ansible\r\n  python version = 2.7.5 (default, Aug  4 2017, 00:39:18) [GCC 4.8.5 20150623 (Red Hat 4.8.5-16)]\r\n```\r\n\r\n##### CONFIGURATION\r\n```\r\n(throtle-ansible-venv) [jwitkowski@dmpprod-ss1 throtle-ansible]$ ansible-config dump --only-changed\r\nANSIBLE_PIPELINING(/home/jwitkowski/throtle-ansible/ansible.cfg) = True\r\nANSIBLE_SSH_ARGS(/home/jwitkowski/throtle-ansible/ansible.cfg) = -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -o ForwardAgent=yes\r\nDEFAULT_CALLBACK_PLUGIN_PATH(/home/jwitkowski/throtle-ansible/ansible.cfg) = [u'/home/jwitkowski/throtle-ansible/library/callback']\r\nDEFAULT_FILTER_PLUGIN_PATH(/home/jwitkowski/throtle-ansible/ansible.cfg) = [u'/usr/share/ansible_plugins/filter_plugins', u'/home/jwitkowski/throtle-ansible/library/plugins']\r\nDEFAULT_FORKS(/home/jwitkowski/throtle-ansible/ansible.cfg) = 15\r\nDEFAULT_GATHERING(/home/jwitkowski/throtle-ansible/ansible.cfg) = smart\r\nDEFAULT_GATHER_SUBSET(/home/jwitkowski/throtle-ansible/ansible.cfg) = !hardware,!ohai,!facter\r\nDEFAULT_HOST_LIST(/home/jwitkowski/throtle-ansible/ansible.cfg) = [u'/home/jwitkowski/throtle-ansible/inventory']\r\nDEFAULT_MANAGED_STR(/home/jwitkowski/throtle-ansible/ansible.cfg) = Created by Ansible\r\nDEFAULT_PRIVATE_KEY_FILE(/home/jwitkowski/throtle-ansible/ansible.cfg) = /home/jwitkowski/.ssh/throtle-ansible.key\r\nDEFAULT_REMOTE_TMP(/home/jwitkowski/throtle-ansible/ansible.cfg) = /tmp/ansible-$USER/tmp\r\nDEFAULT_ROLES_PATH(/home/jwitkowski/throtle-ansible/ansible.cfg) = [u'/home/jwitkowski/throtle-ansible/roles']\r\nDEFAULT_SCP_IF_SSH(/home/jwitkowski/throtle-ansible/ansible.cfg) = True\r\nDEFAULT_VAULT_PASSWORD_FILE(/home/jwitkowski/throtle-ansible/ansible.cfg) = /home/jwitkowski/throtle-ansible/.vault\r\nDISPLAY_ARGS_TO_STDOUT(/home/jwitkowski/throtle-ansible/ansible.cfg) = True\r\nHOST_KEY_CHECKING(/home/jwitkowski/throtle-ansible/ansible.cfg) = False\r\nRETRY_FILES_SAVE_PATH(/home/jwitkowski/throtle-ansible/ansible.cfg) = /home/jwitkowski/.ansible/retry-files\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\nN/A\r\n\r\n##### SUMMARY\r\nI have a large YAML file that defines lists of dictionaries that contain my AWS security groups.  I also have a playbook which loops over these lists and creates security groups from them.  Sometimes when running the playbook I will receive the following error:\r\n```\r\nAn exception occurred during task execution. To see the full traceback,\r\nuse -vvv. The error was:botocore.exceptions.ClientError:An error occurred (InvalidGroup.Duplicate) when calling the CreateSecurityGroup operation:The security group 'prod-sftp-instance' already exists for VPC 'vpc-39c8235f' \r\nfailed:[  \r\n   localhost\r\n](item=nsq) =>{  \r\n   \"changed\":false,\r\n   \"item\":\"nsq\",\r\n   \"module_stderr\":\"Traceback (most recent call last):\r\n  File \\\"/tmp/ansible_2VDh2N/ansible_module_ec2_group.py\\\", line 899, in <module>\r\n    main()\r\n  File \\\"/tmp/ansible_2VDh2N/ansible_module_ec2_group.py\\\", line 742, in main\r\n    group, groups, vpc_id)\r\n  File \\\"/tmp/ansible_2VDh2N/ansible_module_ec2_group.py\\\", line 406, in get_target_from_rule\r\n    auto_group = client.create_security_group(**params)\r\n File \\\"/home/jwitkowski/throtle-ansible-venv/lib/python2.7/site-packages/botocore/client.py\\\", line 317, in _api_call\r\n    return self._make_api_call(operation_name, kwargs)\\n  File \\\"/home/jwitkowski/throtle-ansible-venv/lib/python2.7/site-packages/botocore/client.py\\\", line 615, in _make_api_call\r\n    raise error_class(parsed_response, operation_name)\r\nbotocore.exceptions.ClientError: An error occurred (InvalidGroup.Duplicate) when calling the CreateSecurityGroup operation: The security group 'prod-sftp-instance' already exists for VPC 'vpc-39c8235f'\",\r\n   \"module_stdout\":\"\",\r\n   \"msg\":\"MODULE FAILURE\",\r\n   \"rc\":1\r\n}\r\n```\r\n\r\nThis typically happens when a ec2_group module is attempting to create an \"empty\" group from the `group_name:` parameter when fed a list of groups.  The above is an example of just that where the group being created is \"prod-nsq-instance\" but it has a `group_name:` dependency on \"prod-sftp-instance\", which already exists.  If I run the playbook a second time with no modifications it typically passes no problem.  \r\n\r\n##### STEPS TO REPRODUCE\r\nvars/security_groups.yml:\r\n```\r\nsg_nsq_rules:\r\n  - proto: tcp\r\n    ports:\r\n      - 4150\r\n      - 4160\r\n      - 4170-4171\r\n    group_name:\r\n      - \"{{ deploy_env }}-nsq-instance\"\r\n      - \"{{ deploy_env }}-sftp-instance\"\r\n    group_desc: \"{{ ansible_managed }}\"\r\n  - proto: tcp\r\n    ports:\r\n      - 9117-9118 #NSQ and CAdvisor exporters\r\n    group_name: \"{{ deploy_env }}-prometheus-instance\"\r\n    group_desc: \"{{ ansible_managed }}\"\r\n\r\nsg_sftp_rules:\r\n  - proto: tcp\r\n    ports: 22 #Global SFTP Allow\r\n    cidr_ip: 0.0.0.0/0\r\n  - proto: tcp\r\n    ports:\r\n      - 8301 #Consul Port\r\n      - 8400 #Consul Port\r\n      - 8500 #Consul Port\r\n      - 8600 #Consul Port\r\n    group_name:\r\n      - \"{{ deploy_env }}-mongors-instance\"\r\n      - \"{{ deploy_env }}-mongoconfig-instance\"\r\n      - \"{{ deploy_env }}-uiapp-instance\"\r\n    group_desc: \"{{ ansible_managed }}\"\r\n\r\nsg_prometheus_rules:\r\n  - proto: tcp\r\n    ports:\r\n      - 25 #SMTP\r\n      - 80 #Webserver for nagios\r\n      - 443 #Webserver for nagios\r\n      - 6783 #Alert manager data port\r\n      - 8081 #Grafana HTTP Server\r\n      - 9090 #Query webserver for prometheus\r\n      - 9093 #Alert Manager http port\r\n    cidr_ip: \"{{vpc_cidr_block}}\"\r\n\r\nsg_ec2_instances:\r\n  sg_nsq_ec2: \"{{ sg_common }} + {{ sg_nsq_rules }}\"\r\n  sg_sftp_ec2: \"{{ sg_common }} + {{ sg_sftp_rules }}\"\r\n```\r\n\r\nvars/deploy_env/test.yml\r\n```\r\nsg_ec2s:\r\n  - \"sftp\"\r\n  - \"nsq\"\r\n```\r\n\r\nbuild_sec_group.yml playbook:\r\n```\r\n- hosts: localhost\r\n  gather_facts: False\r\n  vars_files:\r\n    - \"vars/security_groups.yml\"\r\n    - \"vars/deploy_envs/test.yml\"\r\n  tasks:\r\n    - name: Create EC2 Security groups\r\n      ec2_group:\r\n        name: \"{{ display_env|default(deploy_env) }}-{{ item }}-instance\"\r\n        description: \"{{ ansible_managed }}\"\r\n        vpc_id: \"{{ vpc_id }}\"\r\n        region: \"{{ region }}\"\r\n        rules: \"{{ sg_ec2_instances['sg_' + item + '_ec2'] }}\"\r\n        tags:\r\n          Name: \"{{ display_env|default(deploy_env) }}-{{ item }}-instance\"\r\n          Environment: \"{{ display_env|default(deploy_env) }}\"\r\n      with_items: \"{{ sg_ec2s }}\"\r\n      when: group_tag is not defined or (group_tag is defined and group_tag == item)\r\n      tags:\r\n        - \"ec2_instance\"\r\n```\r\n\r\nRun the above setup a few times and you'll eventually hit the error.\r\n\r\n##### EXPECTED RESULTS\r\nThe playbook should run each time idempotently and never cause this error.\r\n\r\n##### ACTUAL RESULTS\r\nThe error above appears intermittently and works sometimes without changing any code.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34816/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "newsletter2go": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34811", "title": "HAProxy module does not work with python3 interpreter", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\nHAProxy module\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.0.0\r\n  config file = /home/user/development/provisioner-reloaded/ansible.cfg\r\n  configured module search path = [u'/home/user/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.12 (default, Nov 20 2017, 18:23:56) [GCC 5.4.0 20160609]\r\n```\r\n\r\n##### CONFIGURATION\r\n```\r\nANSIBLE_SSH_ARGS(/home/user/development/provisioner-reloaded/ansible.cfg) = -o ForwardAgent=yes\r\nDEFAULT_LOG_PATH(/home/user/development/provisioner-reloaded/ansible.cfg) = /home/user/development/provisioner-reloaded/ansible.log\r\nHOST_KEY_CHECKING(/home/user/development/provisioner-reloaded/ansible.cfg) = False\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\nAnsible OS: Ubuntu 16.04\r\nManaged OS: Ubuntu 16.04\r\n\r\n##### SUMMARY\r\nWhen using python3 as ansible interpreter the haproxy fails while setting the backend to a specific state. \r\n\r\n##### STEPS TO REPRODUCE\r\n```yaml\r\n- name: Set MySQL backend to maintenance state in HAProxy\r\n  haproxy:\r\n    state: disabled\r\n    host: db-mysql\r\n    backend: mysql_cluster\r\n    socket: /var/run/haproxy.sock\r\n    shutdown_sessions: true\r\n```\r\n\r\nIt works when no specific ansible interpreter is set, which means that python 2.7 is used. When setting\r\n\r\n```yaml\r\nansible_python_interpreter: /usr/bin/python3\r\n```\r\n\r\nin the host vars or group vars before, you get the error shown below. The issue seems to be here https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/net_tools/haproxy.py#L254 .\r\n\r\n##### EXPECTED RESULTS\r\n```\r\nchanged: [managed-host] => {\"changed\": true, \"command\": [\"get weight mysql_cluster/db-mysql; disable server mysql_cluster/db-mysql; shutdown sessions server mysql_cluster/db-mysql\"], \"failed\": false, \"output\": [\"1 (initial 1)\"], \"state_after\": [{\"scur\": \"0\", \"status\": \"MAINT\", \"weight\": \"1\"}], \"state_before\": [{\"scur\": \"0\", \"status\": \"DOWN\", \"weight\": \"1\"}]}\r\n```\r\n\r\n##### ACTUAL RESULTS\r\n```\r\nfatal: [managed-host]: FAILED! => {\"changed\": false, \"failed\": true, \"module_stderr\": \"Connection to 192.168.57.101 closed.\\r\\n\", \"module_stdout\": \"\\r\\nTraceback (most recent call last):\\r\\n  File \\\"/tmp/ansible_28dmn_55/ansible_module_haproxy.py\\\", line 454, in <module>\\r\\n    main()\\r\\n  File \\\"/tmp/ansible_28dmn_55/ansible_module_haproxy.py\\\", line 450, in main\\r\\n    ansible_haproxy.act()\\r\\n  File \\\"/tmp/ansible_28dmn_55/ansible_module_haproxy.py\\\", line 399, in act\\r\\n    state_before = self.get_state_for(self.backend, self.host)\\r\\n  File \\\"/tmp/ansible_28dmn_55/ansible_module_haproxy.py\\\", line 330, in get_state_for\\r\\n    data = self.execute('show stat', 200, False).lstrip('# ')\\r\\n  File \\\"/tmp/ansible_28dmn_55/ansible_module_haproxy.py\\\", line 254, in execute\\r\\n    self.client.sendall('%s\\\\n' % cmd)\\r\\nTypeError: a bytes-like object is required, not 'str'\\r\\n\", \"msg\": \"MODULE FAILURE\", \"rc\": 0}\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34811/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "miticojo": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34804", "title": "Force group creation to be local ", "body": "##### ISSUE TYPE\r\n - Feature Idea\r\n\r\n##### COMPONENT NAME\r\ngroup module\r\n\r\n##### ANSIBLE VERSION\r\nN.A.\r\n\r\n##### OS / ENVIRONMENT\r\n- RHEL/CENTOS 7\r\n\r\n##### SUMMARY\r\nAs already applied and merged for user module (#22140), I would like to add the option force=yes to the group module such that is used grouped instead of groupadd.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34804/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34805", "title": "added 'local' option to group ", "body": "##### SUMMARY\r\na new option that lets user force the usage of lgroupXXX alternatives for the commands\r\nfixes #34804\r\n\r\n##### ISSUE TYPE\r\nFeature Pull Request\r\n\r\n##### COMPONENT NAME\r\ngroup", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "machacekondra": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34803", "title": "ovirt: Support passthrough host devices for Virtual Machines", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\noVirt support PCI passthrough for virtual machines:\r\n\r\n https://www.ovirt.org/documentation/install-guide/appe-Configuring_a_Hypervisor_Host_for_PCI_Passthrough/\r\n\r\nWe need to support to attach host devices to VMs using Ansible.\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Feature Idea\r\n\r\n##### COMPONENT NAME\r\n<!---\r\nName of the module, plugin, task or feature\r\nDo not include extra details here, e.g. \"vyos_command\" not \"the network module vyos_command\" or the full path\r\n-->\r\novirt_vms\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n2.4.2\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\nIf using Ansible 2.4 or above, paste the results of \"ansible-config dump --only-changed\"\r\nOtherwise, mention any settings you have changed/added/removed in ansible.cfg\r\n(or using the ANSIBLE_* environment variables).\r\n-->\r\n\r\n##### OS / ENVIRONMENT\r\n<!---\r\nMention the OS you are running Ansible from, and the OS you are\r\nmanaging, or say \"N/A\" for anything that is not platform-specific.\r\nAlso mention the specific version of what you are trying to control,\r\ne.g. if this is a network bug the version of firmware on the network device.\r\n-->\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly -->\r\n\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- What did you expect to happen when running the steps above? -->\r\n\r\n##### ACTUAL RESULTS\r\n<!--- What actually happened? If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34803/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/6648964afa55f8b75a4a8647352080852ef01d8f", "message": "ovirt_auth: support env variable passing (#34872)\n\noVirt modules support environment variables to be passed as\nauthentication details for connection. But ovirt_auth doesn't support\nit. This patch add support for it."}], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35093", "title": "ovirt_disk: Fix fail state condition of disk creation", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nFixes: https://github.com/ansible/ansible/issues/32684\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\novirt_disk\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n2.4.2\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34878", "title": " ovirt: Support env variable in ovirt_auth module", "body": "Backport of: https://github.com/ansible/ansible/pull/34872", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "balonik": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34802", "title": "vmware_guest tries to create VM on ESX in maintenance mode", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\nvmware_guest\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n$ ansible --version\r\nansible 2.4.1.0\r\n```\r\n\r\n##### CONFIGURATION\r\n\r\n##### OS / ENVIRONMENT\r\nVMware environment:\r\n1 DC with ESX cluster and 2+ ESXi hosts\r\n1 ESXi host in maintenance mode\r\n\r\n##### SUMMARY\r\nvmware_guest does not take into account if ESXi host is in maintenance mode.\r\nI've tried 10 times. Always the ESXi host in maintenance mode was selected.\r\n\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n...\r\n- tasks:\r\n - name: Create VM from template\r\n     vmware_guest:\r\n       hostname: vcenter\r\n       username: username\r\n       password: password\r\n       validate_certs: no\r\n       datacenter: DC\r\n       folder: DC/vm/\"\r\n       name: some_linux\r\n       state: poweredon\r\n       template: some_template\r\n       cluster: \"clusterA\"\r\n     register: deploy\r\n     delegate_to: localhost\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\nVM gets provisioned on any of the ESXi in Online mode.\r\n\r\n##### ACTUAL RESULTS\r\nvmware_guest fails while creating the VM.\r\nThe important part is \"msg\": \"The operation is not allowed in the current state of the host.\"\r\n\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\nTASK [Create VM from template] *****************************************************************************************\r\nfatal: [lnxspectre -> localhost]: FAILED! => {\"ansible_job_id\": \"735675695393.106473\", \"attempts\": 2, \"changed\": true, \"clone_method\": \"Clone\", \"clonespec\": {\"config\": {\"alternateGuestName\": null, \"annotation\": null, \"bootOptions\": null, \"changeTrackingEnabled\": null, \"changeVersion\": null, \"consolePreferences\": null, \"cpuAffinity\": null, \"cpuAllocation\": null, \"cpuFeatureMask\": [], \"cpuHotAddEnabled\": true, \"cpuHotRemoveEnabled\": null, \"crypto\": null, \"deviceChange\": [{\"backing\": null, \"device\": \"<class 'pyVmomi.VmomiSupport.vim.vm.device.VirtualVmxnet3'>\", \"dynamicProperty\": [], \"dynamicType\": null, \"fileOperation\": null, \"operation\": \"edit\", \"profile\": []}], \"dynamicProperty\": [], \"dynamicType\": null, \"extraConfig\": [], \"files\": null, \"firmware\": null, \"flags\": null, \"ftInfo\": null, \"guestAutoLockEnabled\": null, \"guestId\": null, \"instanceUuid\": null, \"latencySensitivity\": null, \"locationId\": null, \"managedBy\": null, \"maxMksConnections\": null, \"memoryAffinity\": null, \"memoryAllocation\": null, \"memoryHotAddEnabled\": true, \"memoryMB\": null, \"memoryReservationLockedToMax\": null, \"messageBusTunnelEnabled\": null, \"migrateEncryption\": null, \"name\": null, \"nestedHVEnabled\": null, \"networkShaper\": null, \"npivDesiredNodeWwns\": null, \"npivDesiredPortWwns\": null, \"npivNodeWorldWideName\": [], \"npivOnNonRdmDisks\": null, \"npivPortWorldWideName\": [], \"npivTemporaryDisabled\": null, \"npivWorldWideNameOp\": null, \"npivWorldWideNameType\": null, \"numCPUs\": null, \"numCoresPerSocket\": null, \"powerOpInfo\": null, \"repConfig\": null, \"scheduledHardwareUpgradeInfo\": null, \"swapPlacement\": null, \"tools\": null, \"uuid\": null, \"vAppConfig\": null, \"vAppConfigRemoved\": null, \"vAssertsEnabled\": null, \"vPMCEnabled\": null, \"version\": null, \"virtualICH7MPresent\": null, \"virtualSMCPresent\": null, \"vmProfile\": []}, \"customization\": \"<class 'pyVmomi.VmomiSupport.vim.vm.customization.Specification'>\", \"dynamicProperty\": [], \"dynamicType\": null, \"location\": {\"datastore\": \"'vim.Datastore:datastore-2956':datastore_mid5b\", \"deviceChange\": [], \"disk\": [], \"diskMoveType\": null, \"dynamicProperty\": [], \"dynamicType\": null, \"folder\": null, \"host\": null, \"pool\": \"'vim.ResourcePool:resgroup-5360':Resources\", \"profile\": [], \"service\": null, \"transform\": null}, \"memory\": null, \"powerOn\": false, \"snapshot\": null, \"template\": false}, \"configspec\": {\"alternateGuestName\": null, \"annotation\": null, \"bootOptions\": null, \"changeTrackingEnabled\": null, \"changeVersion\": null, \"consolePreferences\": null, \"cpuAffinity\": null, \"cpuAllocation\": null, \"cpuFeatureMask\": [], \"cpuHotAddEnabled\": true, \"cpuHotRemoveEnabled\": null, \"crypto\": null, \"deviceChange\": [{\"backing\": null, \"device\": \"<class 'pyVmomi.VmomiSupport.vim.vm.device.VirtualVmxnet3'>\", \"dynamicProperty\": [], \"dynamicType\": null, \"fileOperation\": null, \"operation\": \"edit\", \"profile\": []}], \"dynamicProperty\": [], \"dynamicType\": null, \"extraConfig\": [], \"files\": null, \"firmware\": null, \"flags\": null, \"ftInfo\": null, \"guestAutoLockEnabled\": null, \"guestId\": null, \"instanceUuid\": null, \"latencySensitivity\": null, \"locationId\": null, \"managedBy\": null, \"maxMksConnections\": null, \"memoryAffinity\": null, \"memoryAllocation\": null, \"memoryHotAddEnabled\": true, \"memoryMB\": null, \"memoryReservationLockedToMax\": null, \"messageBusTunnelEnabled\": null, \"migrateEncryption\": null, \"name\": null, \"nestedHVEnabled\": null, \"networkShaper\": null, \"npivDesiredNodeWwns\": null, \"npivDesiredPortWwns\": null, \"npivNodeWorldWideName\": [], \"npivOnNonRdmDisks\": null, \"npivPortWorldWideName\": [], \"npivTemporaryDisabled\": null, \"npivWorldWideNameOp\": null, \"npivWorldWideNameType\": null, \"numCPUs\": null, \"numCoresPerSocket\": null, \"powerOpInfo\": null, \"repConfig\": null, \"scheduledHardwareUpgradeInfo\": null, \"swapPlacement\": null, \"tools\": null, \"uuid\": null, \"vAppConfig\": null, \"vAppConfigRemoved\": null, \"vAssertsEnabled\": null, \"vPMCEnabled\": null, \"version\": null, \"virtualICH7MPresent\": null, \"virtualSMCPresent\": null, \"vmProfile\": []}, \"failed\": true, \"finished\": 1, \"msg\": \"The operation is not allowed in the current state of the host.\"}\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34802/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/34801", "title": "vmware_guest ignores 'cluster' option when creating VM", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\nvmware_guest\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n$ ansible --version\r\nansible 2.4.1.0\r\n```\r\n\r\n##### CONFIGURATION\r\n\r\n##### OS / ENVIRONMENT\r\nVMware vCenter environment:\r\n1 Datacenter 'DC'\r\n2 Host clusters under that DC called 'clusterA' and 'clusterB'\r\n1 ESXi 6.0U3 host under each cluster (2 total)\r\nThere are some VMs running on clusterA-ESX.\r\nclusterB-ESX is empty.\r\n\r\n##### SUMMARY\r\nWhile using vmware_guest to create new VM the option 'cluster' is ignored.\r\n\r\n##### STEPS TO REPRODUCE\r\nBuild the VMware environment described above.\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n...\r\n- tasks:\r\n - name: Create VM from template\r\n     vmware_guest:\r\n       hostname: vcenter\r\n       username: username\r\n       password: password\r\n       validate_certs: no\r\n       datacenter: DC\r\n       folder: DC/vm/\"\r\n       name: some_linux\r\n       state: poweredon\r\n       template: some_template\r\n       cluster: \"clusterA\"\r\n     register: deploy\r\n     delegate_to: localhost\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\nVM gets created on clusterA-ESX.\r\n\r\n##### ACTUAL RESULTS\r\nVM gets always created on clusterB-ESX (propably, because it has more free resources?)", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34801/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34996", "title": "Make vmware_guest always get a resource pool and properly create VM in chosen cluster", "body": "##### SUMMARY\r\nBackporting get_resource_pool from devel branch. This way the VM is properly created in cluster as specified by user in `cluster` option.\r\n\r\nFixing issue https://github.com/ansible/ansible/issues/34801\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nvmware_guest\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.1.0\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34995", "title": " Make vmware_guest always get a resource pool", "body": "##### SUMMARY\r\nSmall change to the code to always get a resource pool before the 'template'/'no-template' code where it would be called anyway.\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nvmware_guest\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34993", "title": "Updating lvol.py to better handle %PVS options when creating/resizing lvols.", "body": "##### SUMMARY\r\nUpdating lvol.py to better handle %PVS options when creating/resizing lvols.\r\n\r\n- Adds idempotency when the module is called N+ times and %PVS is used in `size`\r\n- Making the module inline with LVM2 man pages (lvcreate/lvextend), specifically with the description of `-l|--extents` option and sentence `The suffix %VG denotes the total size of the VG, the suffix %FREE the remaining free space in the VG, and the suffix %PVS the free space in the specified PVs`.\r\n- This update makes `pvs` option mandatory when %PVS is used in size, because it calculates requested size by adding size of specified PVS in `pvs` (to be inline with the above point).\r\n- Fixing errors like `\"msg\": \"Unable to resize lv_var_cache_pulp to 100%PVS\", \"rc\": 5)` when module is called N+ times, because it calculated size of VG and not only subset of PVS.\r\n\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nlvol\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.1.0\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\nBefore applied changes same task 2 times:\r\n- lvol: lv=lv_var_cache_pulp size=100%PVS pvs=/dev/sdc shrink=no state=present vg=vg_pulp\r\n- lvol: lv=lv_var_cache_pulp size=100%PVS pvs=/dev/sdc shrink=no state=present vg=vg_pulp\r\n\r\nwill result in:\r\nTASK [create_lvm : lvol] *****************************************************************************\r\nok: [server] => (item={'key': u'lv_var_cache_pulp', 'value': {u'path': u'/var/cache/pulp', u'pvs': u'/dev/sdc', u'mount': True, u'vg_name': u'vg_pulp', u'size': u'100%PVS'}})\r\nTASK [create_lvm : lvol] *****************************************************************************\r\nfailed: [server] (item={'key': u'lv_var_cache_pulp', 'value': {u'path': u'/var/cache/pulp', u'pvs': u'/dev/sdc', u'mount': True, u'vg_name': u'vg_pulp', u'size': u'100%PVS'}}) => {\"changed\": false, \"err\": \"  WARNING: No free extents on physical volume \\\"/dev/sdc\\\".\\n  No specified PVs have space available.\\n\", \"failed\": true, \"item\": {\"key\": \"lv_var_cache_pulp\", \"value\": {\"mount\": true, \"path\": \"/var/cache/pulp\", \"pvs\": \"/dev/sdc\", \"size\": \"100%PVS\", \"vg_name\": \"vg_pulp\"}}, \"msg\": \"Unable to resize lv_var_cache_pulp to 100%PVS\", \"rc\": 5}\r\n```\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "sravan1265": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34794", "title": "ec2_asg module causes 'AssociatePublicIpAddress field can not be specified without a subnet id' error", "body": "i am getting below error while creating sample auto scaling group.\r\n\r\nTASK [Configure Auto Scaling Group] ********************************************************************************************\r\nAn exception occurred during task execution. To see the full traceback, use -vvv. The error was: ClientError: An error occurred (ValidationError) when calling the CreateAutoScalingGroup operation: AssociatePublicIpAddress field can not be specified without a subnet id\r\nfatal: [ip address]: FAILED! => {\"changed\": false, \"error\": {\"code\": \"ValidationError\", \"message\": \"AssociatePublicIpAddress field can not be specified without a subnet id\", \"type\": \"Sender\"}, \"msg\": \"Failed to create Autoscaling Group.\", \"response_metadata\": {\"http_headers\": {\"connection\": \"close\", \"content-length\": \"325\", \"content-type\": \"text/xml\", \"date\": \"Fri, 12 Jan 2018 10:45:54 GMT\", \"x-amzn-requestid\": \"c3cb979c-f785-11e7-ac00-c7ffa1d889e0\"}, \"http_status_code\": 400, \"request_id\": \"c3cb979c-f785-11e7-ac00-c7ffa1d889e0\", \"retry_attempts\": 0}}\r\n\r\n##### STEPS TO REPRODUCE\r\n\r\n``` yaml\r\n ---\r\n- name: spin up the load balancer and add the servers to it\r\n  hosts: webserver\r\n  connection: local\r\n  gather_facts: False\r\n  tasks:\r\n    - name: setup a simple load balancer\r\n      ec2_elb_lb:\r\n        name: aws-blog-elb\r\n        state: present\r\n        region: ap-southeast-1\r\n        zones:\r\n          - ap-southeast-1a\r\n        listeners:\r\n          - protocol: http\r\n            load_balancer_port: 80\r\n            instance_port: 80\r\n      register: aws-elb\r\n    - name: create launch config\r\n      ec2_lc:\r\n        name: my_new_lc\r\n        image_id: ami-84a6f3e7\r\n        key_name: VCX Keypair\r\n        region: ap-southeast-1\r\n        security_groups: sg-173f0971\r\n        instance_type: t2.micro\r\n        assign_public_ip: yes\r\n    - name: Configure Auto Scaling Group\r\n      ec2_asg:\r\n        name: myasg\r\n        launch_config_name: my_new_lc\r\n        availability_zones: ap-southeast-1a\r\n        health_check_type: ELB\r\n        health_check_period: 60\r\n        min_size: 1\r\n        max_size: 3\r\n        desired_capacity: 2\r\n        region: ap-southeast-1\r\n        state: present\r\n      register: asg_result\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34794/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "MrTwIXx": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34787", "title": "SSH connection to root user fails", "body": "##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!---\r\nansible-playbook\r\n-->\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.12 (default, Nov 20 2017, 18:23:56) [GCC 5.4.0 20160609]\r\n\r\n```\r\n\r\n##### CONFIGURATION\r\nDEFAULT_LOG_PATH(/etc/ansible/ansible.cfg) = /var/log/ansible.log\r\nDEFAULT_REMOTE_USER(/etc/ansible/ansible.cfg) = root\r\nHOST_KEY_CHECKING(/etc/ansible/ansible.cfg) = False\r\n\r\n##### OS / ENVIRONMENT\r\nUbuntu 16.04\r\n\r\n##### SUMMARY\r\nWhen I try to connect to a remote server via ssh as root, in the playbook, I always get an error message. I added all ssh keys. If I connect directly from ubuntu to the remote server as root it works.( ssh root@IP from Server\r\n\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n---\r\n- hosts: analytic_server\r\n  tasks:\r\n     - name: connection check\r\n       become: yes\r\n       wait_for: host=8.8.8.8 port=443 timeout=1\r\n       ignore_errors: True\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- What did you expect to happen when running the steps above? -->\r\nTASK [Gathering Facts] *********************************************************\r\nok: [analytic_server]\r\n\r\nTASK [connection check] ****************************************************\r\nok: [analytic_server]\r\n\r\n##### ACTUAL RESULTS\r\n<!--- What actually happened? If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes below -->\r\n##### Playbook run as root\r\n```\r\nPLAY [analytic server] *********************************************************\r\n\r\nTASK [Gathering Facts] *********************************************************\r\nUsing module file /usr/lib/python2.7/dist-packages/ansible/modules/system/setup.py\r\n<172.16.8.105> ESTABLISH SSH CONNECTION FOR USER: wac\r\n<172.16.8.105> SSH: EXEC ssh -C -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o User=wac -o ConnectTimeout=10 -o ControlPath=/root/.ansible/cp/3a452619e1 172.16.8.105 '/bin/sh -c '\"'\"'echo ~ && sleep 0'\"'\"''\r\nUsing module file /usr/lib/python2.7/dist-packages/ansible/modules/system/setup.py\r\n<172.16.8.101> ESTABLISH SSH CONNECTION FOR USER: wac\r\n<172.16.8.101> SSH: EXEC ssh -C -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o User=wac -o ConnectTimeout=10 -o ControlPath=/root/.ansible/cp/47c3220fdd 172.16.8.101 '/bin/sh -c '\"'\"'echo ~ && sleep 0'\"'\"''\r\n<172.16.8.101> (255, '', 'Permission denied (publickey,password).\\r\\n')\r\nfatal: [172.16.8.101]: UNREACHABLE! => {\r\n    \"changed\": false,\r\n    \"msg\": \"Failed to connect to the host via ssh: Permission denied (publickey,password).\\r\\n\",\r\n    \"unreachable\": true\r\n}\r\n<172.16.8.105> (255, '', 'Permission denied (publickey,password).\\r\\n')\r\nfatal: [172.16.8.105]: UNREACHABLE! => {\r\n    \"changed\": false,\r\n    \"msg\": \"Failed to connect to the host via ssh: Permission denied (publickey,password).\\r\\n\",\r\n    \"unreachable\": true\r\n}\r\n\r\n```\r\n##### Playbook run as non root\r\n```\r\nPLAY [analytic server] *********************************************************\r\n\r\nTASK [Gathering Facts] *********************************************************\r\nUsing module file /usr/lib/python2.7/dist-packages/ansible/modules/system/setup.py\r\n<172.16.8.101> ESTABLISH SSH CONNECTION FOR USER: wac\r\n<172.16.8.101> SSH: EXEC ssh -C -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o User=wac -o ConnectTimeout=10 -o ControlPath=/home/hal/.ansible/cp/47c3220fdd 172.16.8.101 '/bin/sh -c '\"'\"'echo ~ && sleep 0'\"'\"''\r\nUsing module file /usr/lib/python2.7/dist-packages/ansible/modules/system/setup.py\r\n<172.16.8.105> ESTABLISH SSH CONNECTION FOR USER: wac\r\n<172.16.8.105> SSH: EXEC ssh -C -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o User=wac -o ConnectTimeout=10 -o ControlPath=/home/hal/.ansible/cp/3a452619e1 172.16.8.105 '/bin/sh -c '\"'\"'echo ~ && sleep 0'\"'\"''\r\n<172.16.8.105> (0, 'home/wac\\n', '')\r\n<172.16.8.105> ESTABLISH SSH CONNECTION FOR USER: wac\r\n<172.16.8.105> SSH: EXEC ssh -C -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o User=wac -o ConnectTimeout=10 -o ControlPath=/home/hal/.ansible/cp/3a452619e1 172.16.8.105 '/bin/sh -c '\"'\"'( umask 77 && mkdir -p \"` echo home/wac/.ansible/tmp/ansible-tmp-1515747659.76-183831838413360 `\" && echo ansible-tmp-1515747659.76-183831838413360=\"` echo home/wac/.ansible/tmp/ansible-tmp-1515747659.76-183831838413360 `\" ) && sleep 0'\"'\"''\r\n<172.16.8.105> (0, 'ansible-tmp-1515747659.76-183831838413360=home/wac/.ansible/tmp/ansible-tmp-1515747659.76-183831838413360\\n', '')\r\n<172.16.8.105> PUT /tmp/tmp6deutt TO home/wac/.ansible/tmp/ansible-tmp-1515747659.76-183831838413360/setup.py\r\n<172.16.8.105> SSH: EXEC sftp -b - -C -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o User=wac -o ConnectTimeout=10 -o ControlPath=/home/hal/.ansible/cp/3a452619e1 '[172.16.8.105]'\r\n<172.16.8.101> (0, 'home/wac\\n', '')\r\n<172.16.8.101> ESTABLISH SSH CONNECTION FOR USER: wac\r\n<172.16.8.101> SSH: EXEC ssh -C -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o User=wac -o ConnectTimeout=10 -o ControlPath=/home/hal/.ansible/cp/47c3220fdd 172.16.8.101 '/bin/sh -c '\"'\"'( umask 77 && mkdir -p \"` echo home/wac/.ansible/tmp/ansible-tmp-1515747659.75-67571460400372 `\" && echo ansible-tmp-1515747659.75-67571460400372=\"` echo home/wac/.ansible/tmp/ansible-tmp-1515747659.75-67571460400372 `\" ) && sleep 0'\"'\"''\r\n<172.16.8.101> (0, 'ansible-tmp-1515747659.75-67571460400372=home/wac/.ansible/tmp/ansible-tmp-1515747659.75-67571460400372\\n', '')\r\n<172.16.8.101> PUT /tmp/tmpzLIQe0 TO home/wac/.ansible/tmp/ansible-tmp-1515747659.75-67571460400372/setup.py\r\n<172.16.8.101> SSH: EXEC sftp -b - -C -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o User=wac -o ConnectTimeout=10 -o ControlPath=/home/hal/.ansible/cp/47c3220fdd '[172.16.8.101]'\r\n<172.16.8.105> (0, 'sftp> put /tmp/tmp6deutt home/wac/.ansible/tmp/ansible-tmp-1515747659.76-183831838413360/setup.py\\n', '')\r\n<172.16.8.105> ESTABLISH SSH CONNECTION FOR USER: wac\r\n<172.16.8.105> SSH: EXEC ssh -C -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o User=wac -o ConnectTimeout=10 -o ControlPath=/home/hal/.ansible/cp/3a452619e1 172.16.8.105 '/bin/sh -c '\"'\"'chmod u+x home/wac/.ansible/tmp/ansible-tmp-1515747659.76-183831838413360/ home/wac/.ansible/tmp/ansible-tmp-1515747659.76-183831838413360/setup.py && sleep 0'\"'\"''\r\n<172.16.8.105> (0, '', '')\r\n<172.16.8.105> ESTABLISH SSH CONNECTION FOR USER: wac\r\n<172.16.8.105> SSH: EXEC ssh -C -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o User=wac -o ConnectTimeout=10 -o ControlPath=/home/hal/.ansible/cp/3a452619e1 -tt 172.16.8.105 '/bin/sh -c '\"'\"'sudo -H -S -n -u root /bin/sh -c '\"'\"'\"'\"'\"'\"'\"'\"'echo BECOME-SUCCESS-mhslhklmcalnibppnncdgxjlpiodwtjn; /usr/bin/python3 home/wac/.ansible/tmp/ansible-tmp-1515747659.76-183831838413360/setup.py; rm -rf \"home/wac/.ansible/tmp/ansible-tmp-1515747659.76-183831838413360/\" > /dev/null 2>&1'\"'\"'\"'\"'\"'\"'\"'\"' && sleep 0'\"'\"''\r\n<172.16.8.101> (0, 'sftp> put /tmp/tmpzLIQe0 home/wac/.ansible/tmp/ansible-tmp-1515747659.75-67571460400372/setup.py\\n', '')\r\n<172.16.8.101> ESTABLISH SSH CONNECTION FOR USER: wac\r\n<172.16.8.101> SSH: EXEC ssh -C -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o User=wac -o ConnectTimeout=10 -o ControlPath=/home/hal/.ansible/cp/47c3220fdd 172.16.8.101 '/bin/sh -c '\"'\"'chmod u+x home/wac/.ansible/tmp/ansible-tmp-1515747659.75-67571460400372/ home/wac/.ansible/tmp/ansible-tmp-1515747659.75-67571460400372/setup.py && sleep 0'\"'\"''\r\n<172.16.8.105> (1, 'sudo: a password is required\\r\\n', 'Shared connection to 172.16.8.105 closed.\\r\\n')\r\nfatal: [172.16.8.105]: FAILED! => {\r\n    \"changed\": false,\r\n    \"module_stderr\": \"Shared connection to 172.16.8.105 closed.\\r\\n\",\r\n    \"module_stdout\": \"sudo: a password is required\\r\\n\",\r\n    \"msg\": \"MODULE FAILURE\",\r\n    \"rc\": 1\r\n}\r\n<172.16.8.101> (0, '', '')\r\n<172.16.8.101> ESTABLISH SSH CONNECTION FOR USER: wac\r\n<172.16.8.101> SSH: EXEC ssh -C -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o User=wac -o ConnectTimeout=10 -o ControlPath=/home/hal/.ansible/cp/47c3220fdd -tt 172.16.8.101 '/bin/sh -c '\"'\"'sudo -H -S -n -u root /bin/sh -c '\"'\"'\"'\"'\"'\"'\"'\"'echo BECOME-SUCCESS-bqxhzwfnanwlodhzlucajakftswxcvlh; /usr/bin/python3 home/wac/.ansible/tmp/ansible-tmp-1515747659.75-67571460400372/setup.py; rm -rf \"home/wac/.ansible/tmp/ansible-tmp-1515747659.75-67571460400372/\" > /dev/null 2>&1'\"'\"'\"'\"'\"'\"'\"'\"' && sleep 0'\"'\"''\r\n<172.16.8.101> (1, 'sudo: a password is required\\r\\n', 'Shared connection to 172.16.8.101 closed.\\r\\n')\r\nfatal: [172.16.8.101]: FAILED! => {\r\n    \"changed\": false,\r\n    \"module_stderr\": \"Shared connection to 172.16.8.101 closed.\\r\\n\",\r\n    \"module_stdout\": \"sudo: a password is required\\r\\n\",\r\n    \"msg\": \"MODULE FAILURE\",\r\n    \"rc\": 1\r\n}\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34787/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "saiterio": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34786", "title": "Create --from-tags options for ansible-playbook", "body": "##### ISSUE TYPE\r\n - Feature Idea\r\n\r\n##### COMPONENT NAME\r\nansible-playbook\r\nlib/ansible/playbook/taggable.py\r\nlib/ansible/playbook/play.py\r\nlib/ansible/cli/playbook.py\r\n\r\n##### ANSIBLE VERSION\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/damien/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.12 (default, Nov 20 2017, 18:23:56) [GCC 5.4.0 20160609]\r\n\r\n##### OS / ENVIRONMENT\r\nUbuntu 16.04\r\n\r\n##### SUMMARY\r\nIt could be useful to be able to start to run playbook from a specific tag\r\n\r\n##### DETAILS\r\n\r\n**With following playbook (myplaybook.yml):**\r\n```\r\n- hosts: developer\r\n  gather_facts: no\r\n  pre_tasks:\r\n    - name: initialize ssh connection\r\n      include_role:\r\n        name: ssh\r\n      tags: always\r\n    - name: Gathering facts \r\n      setup:\r\n      tags: always\r\n    - name: cleanup\r\n      include_role:\r\n        name: cleanup\r\n      tags: always\r\n  \r\n  post_tasks:\r\n    - name: cleanup\r\n      include_role:\r\n        name: cleanup\r\n      tags: always\r\n    - name: Restart server\r\n      include_role:\r\n        name: common/restart\r\n      tags: always\r\n  roles:\r\n    - {role: role1, tags: \"first\"}\r\n    - {role: role2, tags: \"second\"}\r\n    - {role: role3, tags: \"third\"}\r\n    - {role: role4, tags: \"fourth\"}\r\n```\r\n**Command**\r\nansible-playbook -i my_inventory myplaybook.yml --from-tag \"third\"\r\n\r\n##### EXPECTED RESULT\r\nAll the pre/post-tasks are executed, but only role 3 and role4 are executed. ", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34786/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "torgiren": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34782", "title": "Wrong search paths with include_role", "body": "##### ISSUE TYPE\r\n - Bug Report (propably)\r\n\r\n##### COMPONENT NAME\r\ndynamic includes\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0 (devel e3b5be0887) last updated 2018/01/12 07:53:31 (GMT +200)\r\n  config file = None\r\n  configured module search path = [u'/home/torgiren/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /tmp/ansible/lib/ansible\r\n  executable location = /tmp/ansible/bin/ansible\r\n  python version = 2.7.14 (default, Nov 26 2017, 14:35:36) [GCC 5.4.0]\r\n```\r\nsame on 2.4.0\r\n\r\n##### CONFIGURATION\r\ndefault configuration\r\nansible-config dump --only-changed - empty result\r\n\r\n##### OS / ENVIRONMENT\r\nLinux, but it isn't important\r\n\r\n##### SUMMARY\r\ninclude path are wrong, then using include_roles.\r\nAnsible does not search for tasks in role that use include_tasks.\r\nWhen we use include_role, the search path is limited only to parent roles.\r\nIn the example below, we have roles:\r\ntop - which include_role role one\r\none - which include_role role two\r\ntwo - which dependency role three\r\nthree - which include_task file in her tasks/\r\n\r\nwhen using include_role, included_tasks are search only in one/tasks and two/tasks.\r\nIt's bug in my opinion, because it should search in three/tasks as well. (and maybe in top/tasks?)\r\n\r\n##### STEPS TO REPRODUCE\r\n\r\n roles/top/tasks/main.yml\r\n```yaml\r\n- include_role:\r\n    name: one\r\n```\r\nroles/one/tasks/main.yml \r\n```yaml\r\n- debug:\r\n    msg: \"one\"\r\n\r\n- include_role:\r\n    name: two\r\n```\r\nroles/two/tasks/main.yml\r\n```yaml\r\n- debug:\r\n    msg: \"two\"\r\n```\r\nroles/two/meta/main.yml\r\n```yaml\r\ndependencies:\r\n- three\r\n```\r\nroles/three/tasks/main.yml\r\n```yaml\r\n- debug:\r\n    msg: \"three\"\r\n\r\n- include_tasks: my.yml\r\n```\r\nroles/three/tasks/my.yml\r\n```yaml\r\n- debug:\r\n    msg: \"it my\"\r\n```\r\nplaybook_a.yml\r\n```yaml\r\n- hosts:\r\n    localhost\r\n  roles:\r\n  - three\r\n```\r\nplaybook_b.yml\r\n```yaml\r\n- hosts:\r\n    localhost\r\n  roles:\r\n  - top\r\n```\r\n\r\n##### EXPECTED RESULTS\r\n```bash\r\nansible-playbook -i inventory playbook_a.yml                           \r\n\r\nPLAY [localhost] *****************************************************************************\r\n\r\nTASK [Gathering Facts] ***********************************************************************\r\nok: [localhost]\r\n\r\nTASK [three : debug] *************************************************************************\r\nok: [localhost] => {\r\n    \"attempts\": 1, \r\n    \"msg\": \"three\"\r\n}\r\n\r\nTASK [three : include_tasks] *****************************************************************\r\nincluded: /tmp/uuy/roles/three/tasks/my.yml for localhost\r\n\r\nTASK [three : debug] *************************************************************************\r\nok: [localhost] => {\r\n    \"attempts\": 1, \r\n    \"msg\": \"it my\"\r\n}\r\n\r\nPLAY RECAP ***********************************************************************************\r\nlocalhost                  : ok=4    changed=0    unreachable=0    failed=0   \r\n\r\nansible-playbook -i inventory playbook_b.yml\r\n\r\nPLAY [localhost] *****************************************************************************\r\n\r\nTASK [Gathering Facts] ***********************************************************************\r\nok: [localhost]\r\n\r\nTASK [top : include_role] ********************************************************************\r\n\r\nTASK [one : debug] ***************************************************************************\r\nok: [localhost] => {\r\n    \"attempts\": 1, \r\n    \"msg\": \"one\"\r\n}\r\n\r\nTASK [one : include_role] ********************************************************************\r\n\r\nTASK [three : debug] *************************************************************************\r\nok: [localhost] => {\r\n    \"attempts\": 1, \r\n    \"msg\": \"three\"\r\n}\r\n\r\nTASK [three : include_tasks] *****************************************************************\r\nincluded: /tmp/uuy/roles/three/tasks/my.yml for localhost\r\n\r\nTASK [three : debug] *************************************************************************\r\nok: [localhost] => {\r\n    \"attempts\": 1, \r\n    \"msg\": \"it my\"\r\n}\r\n\r\nTASK [two : debug] ***************************************************************************\r\nok: [localhost] => {\r\n    \"attempts\": 1, \r\n    \"msg\": \"two\"\r\n}\r\n\r\nPLAY RECAP ***********************************************************************************\r\nlocalhost                  : ok=6    changed=0    unreachable=0    failed=0   \r\n```\r\n\r\n##### ACTUAL RESULTS\r\n```\r\n ansible-playbook -i inventory playbook_a.yml\r\n\r\nPLAY [localhost] ******************************************************************************************************************************************************************************\r\n\r\nTASK [Gathering Facts] ************************************************************************************************************************************************************************\r\nok: [localhost]\r\n\r\nTASK [three : debug] **************************************************************************************************************************************************************************\r\nok: [localhost] => {\r\n    \"attempts\": 1, \r\n    \"msg\": \"three\"\r\n}\r\n\r\nTASK [three : include_tasks] ******************************************************************************************************************************************************************\r\nincluded: /tmp/uuy/roles/three/tasks/my.yml for localhost\r\n\r\nTASK [three : debug] **************************************************************************************************************************************************************************\r\nok: [localhost] => {\r\n    \"attempts\": 1, \r\n    \"msg\": \"it my\"\r\n}\r\n\r\nPLAY RECAP ************************************************************************************************************************************************************************************\r\nlocalhost                  : ok=4    changed=0    unreachable=0    failed=0   \r\n\r\n ansible-playbook -i inventory playbook_b.yml\r\n\r\nPLAY [localhost] ******************************************************************************************************************************************************************************\r\n\r\nTASK [Gathering Facts] ************************************************************************************************************************************************************************\r\nok: [localhost]\r\n\r\nTASK [top : include_role] *********************************************************************************************************************************************************************\r\n\r\nTASK [one : debug] ****************************************************************************************************************************************************************************\r\nok: [localhost] => {\r\n    \"attempts\": 1, \r\n    \"msg\": \"one\"\r\n}\r\n\r\nTASK [one : include_role] *********************************************************************************************************************************************************************\r\n\r\nTASK [three : debug] **************************************************************************************************************************************************************************\r\nok: [localhost] => {\r\n    \"attempts\": 1, \r\n    \"msg\": \"three\"\r\n}\r\n\r\nTASK [three : include_tasks] ******************************************************************************************************************************************************************\r\nfatal: [localhost]: FAILED! => {\"reason\": \"Unable to retrieve file contents\\nCould not find or access '/tmp/uuy/my.yml'\"}\r\n        to retry, use: --limit @/tmp/uuy/playbook_b.retry\r\n\r\nPLAY RECAP ************************************************************************************************************************************************************************************\r\nlocalhost                  : ok=3    changed=0    unreachable=0    failed=1   \r\n\r\n```\r\nand with strace, we can see:\r\n```\r\nstrace -f -e file ansible-playbook -i inventory playbook_b.yml 2>&1|grep my.yml \r\n[pid 19037] stat(\"/tmp/uuy/roles/two/tasks/my.yml\", 0x7fff64d17730) = -1 ENOENT (No such file or directory)\r\n[pid 19037] stat(\"/tmp/uuy/roles/two/tasks/my.yml\", 0x7fff64d17730) = -1 ENOENT (No such file or directory)\r\n[pid 19037] stat(\"/tmp/uuy/roles/two/tasks/my.yml\", 0x7fff64d17730) = -1 ENOENT (No such file or directory)\r\n[pid 19037] stat(\"/tmp/uuy/tasks/my.yml\", 0x7fff64d17730) = -1 ENOENT (No such file or directory)\r\n[pid 19037] stat(\"/tmp/uuy/roles/two/my.yml\", 0x7fff64d17730) = -1 ENOENT (No such file or directory)\r\n[pid 19037] stat(\"/tmp/uuy/tasks/my.yml\", 0x7fff64d17730) = -1 ENOENT (No such file or directory)\r\n[pid 19037] stat(\"/tmp/uuy/my.yml\", 0x7fff64d17730) = -1 ENOENT (No such file or directory)\r\n[pid 19037] stat(\"/tmp/uuy/my.yml\", 0x7fff64d17930) = -1 ENOENT (No such file or directory)\r\n[pid 19037] stat(\"/tmp/uuy/roles/one/tasks/my.yml\", 0x7fff64d17730) = -1 ENOENT (No such file or directory)\r\n[pid 19037] stat(\"/tmp/uuy/roles/one/tasks/my.yml\", 0x7fff64d17730) = -1 ENOENT (No such file or directory)\r\n[pid 19037] stat(\"/tmp/uuy/roles/one/tasks/my.yml\", 0x7fff64d17730) = -1 ENOENT (No such file or directory)\r\n[pid 19037] stat(\"/tmp/uuy/tasks/my.yml\", 0x7fff64d17730) = -1 ENOENT (No such file or directory)\r\n[pid 19037] stat(\"/tmp/uuy/roles/one/my.yml\", 0x7fff64d17730) = -1 ENOENT (No such file or directory)\r\n[pid 19037] stat(\"/tmp/uuy/tasks/my.yml\", 0x7fff64d17730) = -1 ENOENT (No such file or directory)\r\n[pid 19037] stat(\"/tmp/uuy/my.yml\", 0x7fff64d17730) = -1 ENOENT (No such file or directory)\r\n[pid 19037] stat(\"/tmp/uuy/my.yml\", 0x7fff64d17930) = -1 ENOENT (No such file or directory)\r\n[pid 19037] stat(\"/tmp/uuy/my.yml\", 0x7fff64d17330) = -1 ENOENT (No such file or directory)\r\nfatal: [localhost]: FAILED! => {\"reason\": \"Unable to retrieve file contents\\nCould not find or access '/tmp/uuy/my.yml'\"}\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34782/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34783", "title": "fix dynamic include search path. Fixes #34782", "body": "##### SUMMARY\r\nFix search paths for include_tasks, when include_role is used\r\n\r\nFixes #34782\r\nIt Adds original role tasks folder to search path when using include_tasks.\r\nAdds base  (first role which call include_role) tasks as well.\r\n\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n\r\n##### COMPONENT NAME\r\ndynamic_include strategy (I think)\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0 (fix_dynamic_include_path e6b2a416bb) last updated 2018/01/12 08:32:10 (GMT +200)\r\n  config file = None\r\n  configured module search path = [u'/home/torgiren/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /tmp/ansible/lib/ansible\r\n  executable location = /tmp/ansible/bin/ansible\r\n  python version = 2.7.14 (default, Nov 26 2017, 14:35:36) [GCC 5.4.0]\r\n\r\n```\r\n2.4.0 as well\r\n\r\n##### ADDITIONAL INFORMATION\r\nfull information is in issue", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "cheeye": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34780", "title": "[Errno 7] Argument list too long and got failed indication with yum module", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n ```- Bug Report```\r\n\r\n##### COMPONENT NAME\r\n<!---   -->\r\n```Name of the module: yum```\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.12 (default, Nov 20 2017, 18:23:56) [GCC 5.4.0 20160609]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---    --->\r\n```\r\nDEFAULT_BECOME(/etc/ansible/ansible.cfg) = True\r\nDEFAULT_BECOME_USER(/etc/ansible/ansible.cfg) = root\r\nDEFAULT_CALLBACK_WHITELIST(/etc/ansible/ansible.cfg) = ['timer', 'mail']\r\nDEFAULT_LOG_PATH(/etc/ansible/ansible.cfg) = /data/logs/ansible.log\r\nDEFAULT_PRIVATE_KEY_FILE(/etc/ansible/ansible.cfg) = /etc/ansible/ans-key\r\nDEFAULT_ROLES_PATH(/etc/ansible/ansible.cfg) = [u'/etc/ansible/roles', u'/home/user1/roles', u'/root/roles']\r\nHOST_KEY_CHECKING(/etc/ansible/ansible.cfg) = False\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!---   --->\r\n\r\n```Ubuntu 16.04 server```\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly -->\r\n\r\nUse yum module to update  remote red hat server. Use register to capture the output of the yum installation. When there are tons of packages to install, it shows tons of messages, and in the end, it show the failure. But all the packages are seemed installed. \r\n\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n   - yum:\r\n      name: '*'\r\n      state: latest\r\n      security: yes\r\n      update_cache: yes\r\n     register: patch_output\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- What did you expect to happen when running the steps above? -->\r\n\r\n##### ACTUAL RESULTS\r\n<!--- What actually happened? If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34780/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "danmoz": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34767", "title": "route53_zone ignores 'comment' parameter if zone already exists", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\nroute53_zone\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\npython version = 3.6.1 (v3.6.1:69c0db5050, Mar 21 2017, 01:21:04) [GCC 4.2.1 (Apple Inc. build 5666) (dot 3)]\r\n```\r\n\r\n##### CONFIGURATION\r\nANSIBLE_PIPELINING(/###/ansible.cfg) = True\r\nDEFAULT_MODULE_LANG(/###/ansible.cfg) = en_US.UTF-8\r\nDEFAULT_VAULT_PASSWORD_FILE(env: ANSIBLE_VAULT_PASSWORD_FILE) = /###/.vault_password\r\n\r\n##### OS / ENVIRONMENT\r\n<!---\r\nMention the OS you are running Ansible from, and the OS you are\r\nmanaging, or say \"N/A\" for anything that is not platform-specific.\r\nAlso mention the specific version of what you are trying to control,\r\ne.g. if this is a network bug the version of firmware on the network device.\r\n-->\r\nMacOS 10.13.2\r\n\r\n##### SUMMARY\r\nAnsible will only update the AWS zone comment with value of the route53_zone 'comment' parameter if the zone is being created. If the zone already exists, 'comment' is ignored and the task returns 'ok'\r\n\r\n##### STEPS TO REPRODUCE\r\nRun route53_zone against an existing AWS zone, where \"comment\" parameter differs from the current AWS zone comment.\r\n\r\n##### EXPECTED RESULTS\r\nAWS zone comment should be updated with the route53_zone comment parameter value passed\r\n\r\n##### ACTUAL RESULTS\r\nroute53_zone comment parameter value is ignored.\r\n\r\nTask to create a new zone:\r\n\r\n<!--- Paste verbatim command output between quotes below -->\r\n```yaml\r\n- route53_zone:\r\n    zone: example.com\r\n    comment: the new zone will be created with this comment\r\n```\r\nZone is created, ansible returns\r\n```\r\nchanged: [localhost]\r\n```\r\nAlter the comment parameter and re-run the task:\r\n```yaml\r\n- route53_zone:\r\n    zone: example.com\r\n    comment: foo bar baz\r\n```\r\nTask returns OK, AWS zone remains unchanged\r\n```\r\nok: [localhost]\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34767/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "nergdron": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34764", "title": "count_tag with multiple tags and exact_count in ec2 broken in ansible 2.4.x", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\nec2\r\n\r\n##### ANSIBLE VERSION\r\nworks:\r\n```\r\n$ ansible --version\r\nansible 2.3.3.0\r\n  config file = /home/tessa/.ansible.cfg\r\n  configured module search path = Default w/o overrides\r\n  python version = 2.7.12 (default, Nov 20 2017, 18:23:56) [GCC 5.4.0 20160609]\r\n```\r\n\r\nbroken:\r\n```\r\n$ ansible --version\r\nansible 2.4.2.0\r\n  config file = /home/tessa/.ansible.cfg\r\n  configured module search path = [u'/home/tessa/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.12 (default, Nov 20 2017, 18:23:56) [GCC 5.4.0 20160609]\r\n```\r\n\r\n##### CONFIGURATION\r\nN/A\r\n\r\n##### OS / ENVIRONMENT\r\nUbuntu 16.04 amd64 on ec2.\r\n\r\n##### SUMMARY\r\nDiscovered that using multiple count_tag entries + exact_count to prevent spinning up duplicate instances in ec2 no longer works in ansible 2.4.x, and that it'll just spin up a duplicates even when the tags match. Downgrading to ansible 2.3.x solves the problem.\r\n\r\n##### STEPS TO REPRODUCE\r\nrun the following task from localhost multiple times:\r\n\r\n```yaml\r\n- ec2:\r\n    region: \"us-west-2\"\r\n    instance_tags:\r\n      Name: test\r\n      Prefix: dev\r\n    exact_count: 1\r\n    count_tag:\r\n      Name: test\r\n      Prefix: dev\r\n    key_name: \"{{ ssh_key }}\"\r\n    instance_type: t2.micro\r\n    image: ami-45224425\r\n    vpc_subnet_id: \"{{ vpc_subnet_id }}\r\n```\r\n\r\n##### EXPECTED RESULTS\r\nonly spin up one instance.\r\n\r\n##### ACTUAL RESULTS\r\nspins up multiple instances.\r\n\r\n```\r\nTASK [aws_instances : ec2] ****************************************************************************************************************************************************************************************\r\ntask path: /home/tessa/ansible/roles/aws_instances/tasks/main.yml:2\r\nUsing module file /usr/local/lib/python2.7/dist-packages/ansible/modules/cloud/amazon/ec2.py\r\n<127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: tessa\r\n<127.0.0.1> EXEC /bin/sh -c 'echo ~ && sleep 0'\r\n<127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /home/tessa/.ansible/tmp/ansible-tmp-1515707342.82-54897923708400 `\" && echo ansible-tmp-1515707342.82-54897923708400=\"` echo /home/tessa/.ansible/tmp/ansible-tmp-1515707342.82-54897923708400 `\" ) && sleep 0'\r\n<127.0.0.1> PUT /tmp/tmpPn7vWS TO /home/tessa/.ansible/tmp/ansible-tmp-1515707342.82-54897923708400/ec2.py\r\n<127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/tessa/.ansible/tmp/ansible-tmp-1515707342.82-54897923708400/ /home/tessa/.ansible/tmp/ansible-tmp-1515707342.82-54897923708400/ec2.py && sleep 0'\r\n<127.0.0.1> EXEC /bin/sh -c '/usr/bin/python /home/tessa/.ansible/tmp/ansible-tmp-1515707342.82-54897923708400/ec2.py; rm -rf \"/home/tessa/.ansible/tmp/ansible-tmp-1515707342.82-54897923708400/\" > /dev/null 2>&1 && sleep 0'\r\nchanged: [localhost] => {\r\n    \"changed\": true, \r\n    \"instance_ids\": [\r\n        \"i-04992feeb756b46c5\"\r\n    ], \r\n    \"instances\": [\r\n        {\r\n            \"ami_launch_index\": \"0\", \r\n            \"architecture\": \"x86_64\", \r\n            \"block_device_mapping\": {\r\n                \"/dev/sda1\": {\r\n                    \"delete_on_termination\": true, \r\n                    \"status\": \"attaching\", \r\n                    \"volume_id\": \"vol-07a2b13e9a727b7cc\"\r\n                }\r\n            }, \r\n            \"dns_name\": \"\", \r\n            \"ebs_optimized\": false, \r\n            \"groups\": {\r\n                \"sg-8b2faff0\": \"default\"\r\n            }, \r\n            \"hypervisor\": \"xen\", \r\n            \"id\": \"i-04992feeb756b46c5\", \r\n            \"image_id\": \"ami-45224425\", \r\n            \"instance_type\": \"t2.micro\", \r\n            \"kernel\": null, \r\n            \"key_name\": \"ssh-key\", \r\n            \"launch_time\": \"2018-01-11T21:49:05.000Z\", \r\n            \"placement\": \"us-west-2c\", \r\n            \"private_dns_name\": \"ip-172-23-30-176.us-west-2.compute.internal\", \r\n            \"private_ip\": \"172.23.30.176\", \r\n            \"public_dns_name\": \"\", \r\n            \"public_ip\": null, \r\n            \"ramdisk\": null, \r\n            \"region\": \"us-west-2\", \r\n            \"root_device_name\": \"/dev/sda1\", \r\n            \"root_device_type\": \"ebs\", \r\n            \"state\": \"pending\", \r\n            \"state_code\": 0, \r\n            \"tags\": {\r\n                \"Name\": \"test\", \r\n                \"Prefix\": \"dev\"\r\n            }, \r\n            \"tenancy\": \"default\", \r\n            \"virtualization_type\": \"hvm\"\r\n        }\r\n    ], \r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"assign_public_ip\": false, \r\n            \"aws_access_key\": null, \r\n            \"aws_secret_key\": null, \r\n            \"count\": 1, \r\n            \"count_tag\": \"{'Prefix': 'dev', 'Name': 'test'}\", \r\n            \"ebs_optimized\": false, \r\n            \"ec2_url\": null, \r\n            \"exact_count\": 1, \r\n            \"group\": null, \r\n            \"group_id\": null, \r\n            \"id\": null, \r\n            \"image\": \"ami-45224425\", \r\n            \"instance_ids\": null, \r\n            \"instance_initiated_shutdown_behavior\": null, \r\n            \"instance_profile_name\": null, \r\n            \"instance_tags\": {\r\n                \"Name\": \"test\", \r\n                \"Prefix\": \"dev\"\r\n            }, \r\n            \"instance_type\": \"t2.micro\", \r\n            \"kernel\": null, \r\n            \"key_name\": \"bench-tools\", \r\n            \"monitoring\": false, \r\n            \"network_interfaces\": null, \r\n            \"placement_group\": null, \r\n            \"private_ip\": null, \r\n            \"profile\": null, \r\n            \"ramdisk\": null, \r\n            \"region\": \"us-west-2\", \r\n            \"security_token\": null, \r\n            \"source_dest_check\": true, \r\n            \"spot_launch_group\": null, \r\n            \"spot_price\": null, \r\n            \"spot_type\": \"one-time\", \r\n            \"spot_wait_timeout\": \"600\", \r\n            \"state\": \"present\", \r\n            \"tenancy\": \"default\", \r\n            \"termination_protection\": null, \r\n            \"user_data\": null, \r\n            \"validate_certs\": true, \r\n            \"volumes\": null, \r\n            \"vpc_subnet_id\": \"vpc_subnet_id\", \r\n            \"wait\": false, \r\n            \"wait_timeout\": \"300\", \r\n            \"zone\": null\r\n        }\r\n    }, \r\n    \"tagged_instances\": [\r\n        {\r\n            \"ami_launch_index\": \"0\", \r\n            \"architecture\": \"x86_64\", \r\n            \"block_device_mapping\": {\r\n                \"/dev/sda1\": {\r\n                    \"delete_on_termination\": true, \r\n                    \"status\": \"attaching\", \r\n                    \"volume_id\": \"vol-07a2b13e9a727b7cc\"\r\n                }\r\n            }, \r\n            \"dns_name\": \"\", \r\n            \"ebs_optimized\": false, \r\n            \"groups\": {\r\n                \"sg-8b2faff0\": \"default\"\r\n            }, \r\n            \"hypervisor\": \"xen\", \r\n            \"id\": \"i-04992feeb756b46c5\", \r\n            \"image_id\": \"ami-45224425\", \r\n            \"instance_type\": \"t2.micro\", \r\n            \"kernel\": null, \r\n            \"key_name\": \"bench-tools\", \r\n            \"launch_time\": \"2018-01-11T21:49:05.000Z\", \r\n            \"placement\": \"us-west-2c\", \r\n            \"private_dns_name\": \"ip-172-23-30-176.us-west-2.compute.internal\", \r\n            \"private_ip\": \"172.23.30.176\", \r\n            \"public_dns_name\": \"\", \r\n            \"public_ip\": null, \r\n            \"ramdisk\": null, \r\n            \"region\": \"us-west-2\", \r\n            \"root_device_name\": \"/dev/sda1\", \r\n            \"root_device_type\": \"ebs\", \r\n            \"state\": \"pending\", \r\n            \"state_code\": 0, \r\n            \"tags\": {\r\n                \"Name\": \"test\", \r\n                \"Prefix\": \"dev\"\r\n            }, \r\n            \"tenancy\": \"default\", \r\n            \"virtualization_type\": \"hvm\"\r\n        }\r\n    ]\r\n}\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34764/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "t6n": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34763", "title": "openbsd_pkg: does not install latest version if multiple versions are available", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\nopenbsd_pkg\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.2.1.0\r\nconfig file = /data/git/t6n/my_project/ansible.cfg\r\nconfigured module search path = Default w/o overrides\r\n```\r\n\r\n##### CONFIGURATION\r\nansible.cfg:\r\n```\r\n[defaults]\r\ninventory      = ./hosts\r\nremote_user = root\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\nOpenBSD 6.1\r\n\r\n##### SUMMARY\r\n\r\nI want to install OpenBSD packages with the openbsd_pkg module.\r\nIf pkg_add find multiple versions of this package, it fails.\r\nIt is independent of the flavor.\r\n\r\n##### STEPS TO REPRODUCE\r\n\r\nI executed following task:\r\n\r\n```yaml\r\n- name: install ruby\r\n  openbsd_pkg:\r\n    name: ruby\r\n    state: latest\r\n```\r\n\r\n\r\n##### EXPECTED RESULTS\r\nIt installs the latest version that ansible find.\r\n\r\n##### ACTUAL RESULTS\r\nIt fails:\r\n\r\n```\r\nfatal: [172.16.0.119]: FAILED! => {\"changed\": false, \"failed\": true, \"msg\": \"Ambiguous: ruby could be ruby-2.3.5 ruby-2.1.9p5 ruby-1.8.7.374p9 ruby-2.2.8 ruby-2.4.2\\n\"}\r\n```\r\n\r\nWhy ansible do not install the latest version of ruby (in this case ruby-2.4.2) ?", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34763/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34766", "title": "openbsd_pkg: install latest package", "body": "##### SUMMARY\r\nInstall the latest version of a package if there are\r\nmultiple versions available and state=latest.\r\n\r\nFixes #34763 \r\n\r\n##### ISSUE TYPE\r\n\r\n - Bugfix Pull Request\r\n\r\n\r\n##### COMPONENT NAME\r\nopenbsd_pkg\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.2.1.0\r\nconfig file = /data/git/t6n/my_project/ansible.cfg\r\nconfigured module search path = Default w/o overrides\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nI want to install OpenBSD packages with the openbsd_pkg module.\r\nIf pkg_add find multiple versions of this package, it fails.\r\nIt is independent of the flavor.\r\n\r\nThe task to reproduce:\r\n```\r\n- name: install ruby\r\n  openbsd_pkg:\r\n    name: ruby\r\n    state: latest\r\n```\r\n\r\nOutput before change:\r\n```\r\nfatal: [172.16.0.119]: FAILED! => {\"changed\": false, \"failed\": true, \"msg\": \"Ambiguous: ruby could be ruby-2.3.5 ruby-2.1.9p5 ruby-1.8.7.374p9 ruby-2.2.8 ruby-2.4.2\\n\"}\r\n\r\n```\r\n\r\nAfter change it does not fail.", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "wfaulk": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34760", "title": "Empty hosts declaration in YAML inventory causes partial fallback to INI parsing", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\ninventory\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n  config file = None\r\n  configured module search path = [u'/Users/wfaulk/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/Cellar/ansible/2.4.2.0_2/libexec/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.10 (default, Feb  7 2017, 00:08:15) [GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.34)]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\nIf using Ansible 2.4 or above, paste the results of \"ansible-config dump --only-changed\"\r\nOtherwise, mention any settings you have changed/added/removed in ansible.cfg\r\n(or using the ANSIBLE_* environment variables).\r\n-->\r\ndefault environment, no config or envvars\r\n\r\n##### OS / ENVIRONMENT\r\n<!---\r\nMention the OS you are running Ansible from, and the OS you are\r\nmanaging, or say \"N/A\" for anything that is not platform-specific.\r\nAlso mention the specific version of what you are trying to control,\r\ne.g. if this is a network bug the version of firmware on the network device.\r\n-->\r\nrunning from MacOS 10.12.6\r\nmanaging N/A\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly -->\r\nYAML inventories where a group contains a \"hosts:\" group, but no hosts exist inside the group cause ansible to interpret the file partially as just a list of hosts, without warning.\r\n\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\nRunning `ansible all --list-hosts` against the following inventory file lists 10 hosts, when it should only list 3.\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\nall:\r\n  hosts:\r\n    host1:\r\n  children:\r\n    group1:\r\n      hosts:\r\n      children:\r\n        group1a:\r\n          hosts:\r\n            host2:\r\n    group2:\r\n      hosts:\r\n        host3:\r\n```\r\n\r\nNote that \"group1\" contains a \"hosts\" entry, but there are no hosts listed. If you delete that line, the inventory file works correctly.\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- What did you expect to happen when running the steps above? -->\r\n```\r\n  hosts (3):\r\n    host2\r\n    host3\r\n    host1\r\n```\r\n\r\n##### ACTUAL RESULTS\r\n<!--- What actually happened? If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n  config file = None\r\n  configured module search path = [u'/Users/wfaulk/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/Cellar/ansible/2.4.2.0_2/libexec/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.10 (default, Feb  7 2017, 00:08:15) [GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.34)]\r\nNo config file found; using defaults\r\nParsed <redacted>/bug1.yml inventory source with ini plugin\r\n  hosts (10):\r\n    all:\r\n    hosts:\r\n    host1:\r\n    children:\r\n    group1:\r\n    group1a:\r\n    host2:\r\n    group2:\r\n    host3:\r\n    host1\r\n```\r\n\r\nNote that, somehow, both \"host1\" and \"host1:\" are included, which seems to indicate that it's somehow parsing it as YAML and as INI.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34760/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "dkirrane": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34746", "title": "vmware_guest module doesn't allow creation of vm under specific DataCenter folder & DataStore folder", "body": "##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Feature Idea\r\n\r\n##### COMPONENT NAME\r\nvmware_guest\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.2.0\r\n  config file = //ansible.cfg\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.13 (default, Apr 20 2017, 12:13:37) [GCC 6.3.0]\r\n```\r\n\r\n##### CONFIGURATION\r\n```\r\nCACHE_PLUGIN(//ansible.cfg) = jsonfile\r\nCACHE_PLUGIN_CONNECTION(//ansible.cfg) = /fact_cache\r\nCACHE_PLUGIN_TIMEOUT(//ansible.cfg) = 86400\r\nDEFAULT_CALLBACK_WHITELIST(//ansible.cfg) = ['profile_tasks']\r\nDEFAULT_GATHERING(//ansible.cfg) = smart\r\nHOST_KEY_CHECKING(env: ANSIBLE_HOST_KEY_CHECKING) = False\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\nCentOS 7\r\n\r\n##### SUMMARY\r\nvmware_guest module doesn't allow creation of the VM under a datacenter folder and datastore folder\r\n\r\n##### STEPS TO REPRODUCE\r\n\r\nSettings folders in the module like below do not work for VM creation\r\n\r\n```yaml\r\n  vmware_guest:\r\n:\r\n          datacenter: \"Europe\"\r\n          folder: \"Europe/dev/joe\"\r\n          disk:\r\n            - size_gb: 20\r\n              type: thin\r\n              datastore: \"SANDatastore1\"\r\n              folder: \"/dev/joe\"\r\n:\r\n;\r\n```\r\n\r\n##### EXPECTED RESULTS\r\nThe VMs should appear under folders dev/joe on the Europe DataCenter\r\nAnd the VM files show be created under the /dev/joe folder of the SANDatastore1 DataStore\r\n\r\n##### ACTUAL RESULTS\r\nFails if DataCenter folder does not exist. If DataCenter folder exists it is ignored\r\nDataStore folder is ingored. It's not a supported field at all.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34746/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "gitet": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34739", "title": "Value passed to playbook using 'ansible-playbook -u' is not exposed in variable available to playbook author", "body": "##### ISSUE TYPE\r\n- Bug Report\r\n- Feature Idea\r\n##### COMPONENT NAME\r\nAnsible\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.2.0\r\n  config file = /home/eto/github/ansible/playbooks/ansible.cfg\r\n  configured module search path = [u'/home/eto/dev/venv-napalm/lib/python2.7/site-packages/napalm_ansible', u'/home/eto/github/ansible/playbooks/ntc-ansible']\r\n  ansible python module location = /home/eto/dev/venv-napalm/lib/python2.7/site-packages/ansible\r\n  executable location = /home/eto/dev/venv-napalm/bin/ansible\r\n  python version = 2.7.5 (default, Aug  4 2017, 00:39:18) [GCC 4.8.5 20150623 (Red Hat 4.8.5-16)]\r\n```\r\n\r\n##### CONFIGURATION\r\nDEFAULT_HOST_LIST(/home/eto/github/ansible/playbooks/ansible.cfg) = [u'/home/eto/github/ansible/playbooks/inventory']\r\nDEFAULT_LOG_PATH(env: ANSIBLE_LOG_PATH) = /home/eto/github/ansible/playbooks/ansible.log\r\nDEFAULT_MODULE_PATH(/home/eto/github/ansible/playbooks/ansible.cfg) = [u'/home/eto/dev/venv-napalm/lib/python2.7/site-\r\nDEFAULT_TIMEOUT(/home/eto/github/ansible/playbooks/ansible.cfg) = 10\r\nHOST_KEY_CHECKING(/home/eto/github/ansible/playbooks/ansible.cfg) = False\r\n\r\n##### OS / ENVIRONMENT\r\nN/A\r\n\r\n##### SUMMARY\r\nWhen passing a username to a playbook using `'ansible-playbook -u <REMOTE_USER> <playbook>'`, REMOTE_USER is not exposed in any variable available for the playbook author to use.\r\nThe value seems to be passed into an undocumented \"internal\" variable that can is consumed by e.g. the core networking modules (passed as value to the provider 'username' key).\r\n\r\nThe value passed interactively using ansible-playbook's `'-k'` argument is available to the playbook author via the variable `'ansible_ssh_pass'`.\r\n\r\nIt would be very nice to be able to reference <REMOTE_USER> in a task and not have to set it statically or via `'-e/--extra-vars'`\r\n\r\n##### STEPS TO REPRODUCE\r\n```\r\n\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- What did you expect to happen when running the steps above? -->\r\n\r\n##### ACTUAL RESULTS\r\n<!--- What actually happened? If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34739/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "achinsngh": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34737", "title": "ansible authentication failed when trying to run some command but login using vault is working", "body": "##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Bug Report\r\n - Feature Idea\r\n - Documentation Report\r\n\r\n\r\n##### COMPONENT NAME\r\n<!---\r\nName of the module, plugin, task or feature\r\nansible-playbook\r\nansible -m raw -a \"command\"\r\nping module\r\n-->\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n[root@l .ssh]# ansible --version\r\nansible 2.4.0.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /bin/ansible\r\n  python version = 2.7.5 (default, Aug  4 2017, 00:39:18) [GCC 4.8.5 20150623 (Red Hat 4.8.5-16)]\r\n\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\nvault_password_file = ~/vault/vault.key\r\n\r\n#Enable profiling.\r\ncallback_whitelist = profile_tasks\r\n\r\n#This causes ansible to fail steps that reference variable names that are likely typoed.\r\nerror_on_undefined_vars = True\r\n\r\n#The default number of parallel processes to spawn when communicating with remote hosts.\r\nforks = 50\r\n\r\n#If a host is reinstalled and has a different key in \u2018known_hosts\u2019,\r\n#this will result in an error message until corrected.\r\n#If a host is not initially in \u2018known_hosts\u2019 this will result in prompting for confirmation of the key,\r\n#which results in an interactive experience if using Ansible, from say, cron.\r\n#If you understand the implications and wish to disable this behavior, put the variable to False.\r\nhost_key_checking = False\r\n\r\n#If present and configured in ansible.cfg,\r\n#Ansible will log information about executions at the designated location.\r\n#Be sure the user running Ansible has permissions on the logfile.\r\nlog_path = ./ansible.log\r\n\r\n#By default ansible will take advantage of cowsay\r\n#if installed to make /usr/bin/ansible-playbook runs more exciting.\r\n#Why? We believe systems management should be a happy experience.\r\n#If you do not like the cows, you can disable them by setting \u2018nocows\u2019 to 1.\r\nnocows = 0\r\n\r\n#Enabling pipelining reduces the number of SSH operations required to execute a module on the remote server,\r\n#by executing many ansible modules without actual file transfer.\r\n#This can result in a very significant performance improvement when enabled,\r\n#however when using \u201csudo:\u201d operations you must first disable \u2018requiretty\u2019 in /etc/sudoers on all managed hosts.\r\npipelining=False\r\n\r\n#The default SSH timeout to use on connection attempts.\r\ntimeout = 60\r\n\r\n#This controls whether a failed Ansible playbook should create a .retry file.\r\nretry_files_enabled = False\r\n\r\n-->\r\n\r\n##### OS / ENVIRONMENT\r\n<!---\r\nCentOS Linux release 7.4.1708 (Core)\r\nNAME=\"CentOS Linux\"\r\nVERSION=\"7 (Core)\"\r\n-->\r\n\r\n##### SUMMARY\r\n<!\r\ni am trying to login to ansible user of the remote user using my ansible server using vault key and it is working fine, like this\r\n[ansible@l ~]$ ssh -i ~/vault/id_rsa ansible@10.43.7.29\r\nLast login: Fri Apr  6 13:45:26 2018 from 10.43.190.150\r\n\r\n\r\n\r\n\r\nBut when I am trying to execute some command using ansible or if i am running ansible-playbook then it is saying authentication failure\r\n[ansible@l ~]$ ansible linux -i /tmp/uplane -m ping -u ansible --limit 10.43.7.29\r\n10.43.7.29 | UNREACHABLE! => {\r\n    \"changed\": false,\r\n    \"msg\": \"Failed to connect to the host via ssh: Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).\\r\\n\",\r\n    \"unreachable\": true\r\n}\r\n\r\n[ansible@l ~]$ ansible linux -i /tmp/uplane -m raw -a \"whoami\" -u ansible --limit 10.43.7.29\r\n10.43.7.29 | UNREACHABLE! => {\r\n    \"changed\": false,\r\n    \"msg\": \"Failed to connect to the host via ssh: Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).\\r\\n\",\r\n    \"unreachable\": true\r\n}\r\n\r\n>\r\n\r\n##### STEPS TO REPRODUCE\r\n\r\n\r\n\r\n\r\nHere is the log of failed ansible ping command using -vvv\r\n\r\n[ansible@l ~]$ ansible linux -i /tmp/uplane -m ping -u ansible --limit 10.43.7.29 -vvvv\r\nansible 2.4.0.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/ansible/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /bin/ansible\r\n  python version = 2.7.5 (default, Aug  4 2017, 00:39:18) [GCC 4.8.5 20150623 (Red Hat 4.8.5-16)]\r\nUsing /etc/ansible/ansible.cfg as config file\r\nsetting up inventory plugins\r\nParsed /tmp/uplane inventory source with ini plugin\r\nLoading callback plugin minimal of type stdout, v2.0 from /usr/lib/python2.7/site-packages/ansible/plugins/callback/__init__.pyc\r\nMETA: ran handlers\r\nUsing module file /usr/lib/python2.7/site-packages/ansible/modules/system/ping.py\r\n<10.43.7.29> ESTABLISH SSH CONNECTION FOR USER: ansible\r\n<10.43.7.29> SSH: EXEC ssh -vvv -C -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o User=ansible -o ConnectTimeout=10 -o ControlPath=/home/ansible/.ansible/cp/c8c10ff18d 10.43.7.29 '/bin/sh -c '\"'\"'echo ~ && sleep 0'\"'\"''\r\n<10.43.7.29> (255, '', 'OpenSSH_7.4p1, OpenSSL 1.0.2k-fips  26 Jan 2017\\r\\ndebug1: Reading configuration data /etc/ssh/ssh_config\\r\\ndebug1: /etc/ssh/ssh_config line 58: Applying options for *\\r\\ndebug1: auto-mux: Trying existing master\\r\\ndebug1: Control socket \"/home/ansible/.ansible/cp/c8c10ff18d\" does not exist\\r\\ndebug2: resolving \"10.43.7.29\" port 22\\r\\ndebug2: ssh_connect_direct: needpriv 0\\r\\ndebug1: Connecting to 10.43.7.29 [10.43.7.29] port 22.\\r\\ndebug2: fd 3 setting O_NONBLOCK\\r\\ndebug1: fd 3 clearing O_NONBLOCK\\r\\ndebug1: Connection established.\\r\\ndebug3: timeout: 10000 ms remain after connect\\r\\ndebug1: key_load_public: No such file or directory\\r\\ndebug1: identity file /home/ansible/.ssh/id_rsa type -1\\r\\ndebug1: key_load_public: No such file or directory\\r\\ndebug1: identity file /home/ansible/.ssh/id_rsa-cert type -1\\r\\ndebug1: key_load_public: No such file or directory\\r\\ndebug1: identity file /home/ansible/.ssh/id_dsa type -1\\r\\ndebug1: key_load_public: No such file or directory\\r\\ndebug1: identity file /home/ansible/.ssh/id_dsa-cert type -1\\r\\ndebug1: key_load_public: No such file or directory\\r\\ndebug1: identity file /home/ansible/.ssh/id_ecdsa type -1\\r\\ndebug1: key_load_public: No such file or directory\\r\\ndebug1: identity file /home/ansible/.ssh/id_ecdsa-cert type -1\\r\\ndebug1: key_load_public: No such file or directory\\r\\ndebug1: identity file /home/ansible/.ssh/id_ed25519 type -1\\r\\ndebug1: key_load_public: No such file or directory\\r\\ndebug1: identity file /home/ansible/.ssh/id_ed25519-cert type -1\\r\\ndebug1: Enabling compatibility mode for protocol 2.0\\r\\ndebug1: Local version string SSH-2.0-OpenSSH_7.4\\r\\ndebug1: Remote protocol version 2.0, remote software version OpenSSH_5.3\\r\\ndebug1: match: OpenSSH_5.3 pat OpenSSH_5* compat 0x0c000000\\r\\ndebug2: fd 3 setting O_NONBLOCK\\r\\ndebug1: Authenticating to 10.43.7.29:22 as \\'ansible\\'\\r\\ndebug3: hostkeys_foreach: reading file \"/home/ansible/.ssh/known_hosts\"\\r\\ndebug3: record_hostkey: found key type RSA in file /home/ansible/.ssh/known_hosts:1\\r\\ndebug3: load_hostkeys: loaded 1 keys from 10.43.7.29\\r\\ndebug3: order_hostkeyalgs: prefer hostkeyalgs: ssh-rsa-cert-v01@openssh.com,rsa-sha2-512,rsa-sha2-256,ssh-rsa\\r\\ndebug3: send packet: type 20\\r\\ndebug1: SSH2_MSG_KEXINIT sent\\r\\ndebug3: receive packet: type 20\\r\\ndebug1: SSH2_MSG_KEXINIT received\\r\\ndebug2: local client KEXINIT proposal\\r\\ndebug2: KEX algorithms: curve25519-sha256,curve25519-sha256@libssh.org,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha256,diffie-hellman-group14-sha1,diffie-hellman-group1-sha1,ext-info-c\\r\\ndebug2: host key algorithms: ssh-rsa-cert-v01@openssh.com,rsa-sha2-512,rsa-sha2-256,ssh-rsa,ecdsa-sha2-nistp256-cert-v01@openssh.com,ecdsa-sha2-nistp384-cert-v01@openssh.com,ecdsa-sha2-nistp521-cert-v01@openssh.com,ssh-ed25519-cert-v01@openssh.com,ssh-dss-cert-v01@openssh.com,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,ssh-ed25519,ssh-dss\\r\\ndebug2: ciphers ctos: chacha20-poly1305@openssh.com,aes128-ctr,aes192-ctr,aes256-ctr,aes128-gcm@openssh.com,aes256-gcm@openssh.com,aes128-cbc,aes192-cbc,aes256-cbc\\r\\ndebug2: ciphers stoc: chacha20-poly1305@openssh.com,aes128-ctr,aes192-ctr,aes256-ctr,aes128-gcm@openssh.com,aes256-gcm@openssh.com,aes128-cbc,aes192-cbc,aes256-cbc\\r\\ndebug2: MACs ctos: umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-sha1\\r\\ndebug2: MACs stoc: umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-sha1\\r\\ndebug2: compression ctos: zlib@openssh.com,zlib,none\\r\\ndebug2: compression stoc: zlib@openssh.com,zlib,none\\r\\ndebug2: languages ctos: \\r\\ndebug2: languages stoc: \\r\\ndebug2: first_kex_follows 0 \\r\\ndebug2: reserved 0 \\r\\ndebug2: peer server KEXINIT proposal\\r\\ndebug2: KEX algorithms: diffie-hellman-group-exchange-sha256,diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha1,diffie-hellman-group1-sha1\\r\\ndebug2: host key algorithms: ssh-rsa,ssh-dss\\r\\ndebug2: ciphers ctos: aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,aes256-cbc,arcfour,rijndael-cbc@lysator.liu.se\\r\\ndebug2: ciphers stoc: aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,aes256-cbc,arcfour,rijndael-cbc@lysator.liu.se\\r\\ndebug2: MACs ctos: hmac-md5,hmac-sha1,umac-64@openssh.com,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96\\r\\ndebug2: MACs stoc: hmac-md5,hmac-sha1,umac-64@openssh.com,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96\\r\\ndebug2: compression ctos: none,zlib@openssh.com\\r\\ndebug2: compression stoc: none,zlib@openssh.com\\r\\ndebug2: languages ctos: \\r\\ndebug2: languages stoc: \\r\\ndebug2: first_kex_follows 0 \\r\\ndebug2: reserved 0 \\r\\ndebug1: kex: algorithm: diffie-hellman-group-exchange-sha256\\r\\ndebug1: kex: host key algorithm: ssh-rsa\\r\\ndebug1: kex: server->client cipher: aes128-ctr MAC: umac-64@openssh.com compression: zlib@openssh.com\\r\\ndebug1: kex: client->server cipher: aes128-ctr MAC: umac-64@openssh.com compression: zlib@openssh.com\\r\\ndebug1: kex: diffie-hellman-group-exchange-sha256 need=16 dh_need=16\\r\\ndebug1: kex: diffie-hellman-group-exchange-sha256 need=16 dh_need=16\\r\\ndebug3: send packet: type 34\\r\\ndebug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<3072<8192) sent\\r\\ndebug3: receive packet: type 31\\r\\ndebug1: got SSH2_MSG_KEX_DH_GEX_GROUP\\r\\ndebug2: bits set: 1494/3072\\r\\ndebug3: send packet: type 32\\r\\ndebug1: SSH2_MSG_KEX_DH_GEX_INIT sent\\r\\ndebug3: receive packet: type 33\\r\\ndebug1: got SSH2_MSG_KEX_DH_GEX_REPLY\\r\\ndebug1: Server host key: ssh-rsa SHA256:l1eOB2qtPmNgZpW2h/4tJ32TD+qjWmLOX+td0y5mBmU\\r\\ndebug3: hostkeys_foreach: reading file \"/home/ansible/.ssh/known_hosts\"\\r\\ndebug3: record_hostkey: found key type RSA in file /home/ansible/.ssh/known_hosts:1\\r\\ndebug3: load_hostkeys: loaded 1 keys from 10.43.7.29\\r\\ndebug1: Host \\'10.43.7.29\\' is known and matches the RSA host key.\\r\\ndebug1: Found key in /home/ansible/.ssh/known_hosts:1\\r\\ndebug2: bits set: 1540/3072\\r\\ndebug3: send packet: type 21\\r\\ndebug2: set_newkeys: mode 1\\r\\ndebug1: rekey after 4294967296 blocks\\r\\ndebug1: SSH2_MSG_NEWKEYS sent\\r\\ndebug1: expecting SSH2_MSG_NEWKEYS\\r\\ndebug3: receive packet: type 21\\r\\ndebug1: SSH2_MSG_NEWKEYS received\\r\\ndebug2: set_newkeys: mode 0\\r\\ndebug1: rekey after 4294967296 blocks\\r\\ndebug2: key: /home/ansible/.ssh/id_rsa ((nil))\\r\\ndebug2: key: /home/ansible/.ssh/id_dsa ((nil))\\r\\ndebug2: key: /home/ansible/.ssh/id_ecdsa ((nil))\\r\\ndebug2: key: /home/ansible/.ssh/id_ed25519 ((nil))\\r\\ndebug3: send packet: type 5\\r\\ndebug3: receive packet: type 6\\r\\ndebug2: service_accept: ssh-userauth\\r\\ndebug1: SSH2_MSG_SERVICE_ACCEPT received\\r\\ndebug3: send packet: type 50\\r\\ndebug3: receive packet: type 51\\r\\ndebug1: Authentications that can continue: publickey,gssapi-keyex,gssapi-with-mic,password\\r\\ndebug3: start over, passed a different list publickey,gssapi-keyex,gssapi-with-mic,password\\r\\ndebug3: preferred gssapi-with-mic,gssapi-keyex,hostbased,publickey\\r\\ndebug3: authmethod_lookup gssapi-with-mic\\r\\ndebug3: remaining preferred: gssapi-keyex,hostbased,publickey\\r\\ndebug3: authmethod_is_enabled gssapi-with-mic\\r\\ndebug1: Next authentication method: gssapi-with-mic\\r\\ndebug1: Unspecified GSS failure.  Minor code may provide more information\\nNo Kerberos credentials available (default cache: KEYRING:persistent:1000)\\n\\r\\ndebug1: Unspecified GSS failure.  Minor code may provide more information\\nNo Kerberos credentials available (default cache: KEYRING:persistent:1000)\\n\\r\\ndebug2: we did not send a packet, disable method\\r\\ndebug3: authmethod_lookup gssapi-keyex\\r\\ndebug3: remaining preferred: hostbased,publickey\\r\\ndebug3: authmethod_is_enabled gssapi-keyex\\r\\ndebug1: Next authentication method: gssapi-keyex\\r\\ndebug1: No valid Key exchange context\\r\\ndebug2: we did not send a packet, disable method\\r\\ndebug3: authmethod_lookup publickey\\r\\ndebug3: remaining preferred: ,publickey\\r\\ndebug3: authmethod_is_enabled publickey\\r\\ndebug1: Next authentication method: publickey\\r\\ndebug1: Trying private key: /home/ansible/.ssh/id_rsa\\r\\ndebug3: no such identity: /home/ansible/.ssh/id_rsa: No such file or directory\\r\\ndebug1: Trying private key: /home/ansible/.ssh/id_dsa\\r\\ndebug3: no such identity: /home/ansible/.ssh/id_dsa: No such file or directory\\r\\ndebug1: Trying private key: /home/ansible/.ssh/id_ecdsa\\r\\ndebug3: no such identity: /home/ansible/.ssh/id_ecdsa: No such file or directory\\r\\ndebug1: Trying private key: /home/ansible/.ssh/id_ed25519\\r\\ndebug3: no such identity: /home/ansible/.ssh/id_ed25519: No such file or directory\\r\\ndebug2: we did not send a packet, disable method\\r\\ndebug1: No more authentication methods to try.\\r\\nPermission denied (publickey,gssapi-keyex,gssapi-with-mic,password).\\r\\n')\r\n\r\n\r\n\r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34737/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "suzuki-shunsuke": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34736", "title": "ansible role's dependency is called only once although it is called twice with defferent parameters.", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!---\r\nName of the module, plugin, task or feature\r\nDo not include extra details here, e.g. \"vyos_command\" not \"the network module vyos_command\" or the full path\r\n-->\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n2.4.2.0\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!---\r\nMention the OS you are running Ansible from, and the OS you are\r\nmanaging, or say \"N/A\" for anything that is not platform-specific.\r\nAlso mention the specific version of what you are trying to control,\r\ne.g. if this is a network bug the version of firmware on the network device.\r\n-->\r\n\r\nMac OS X\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly -->\r\n\r\nansible role's dependency is called only once although it is called twice with defferent parameters.\r\n\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n\r\nroles/foo/meta/main.yml\r\n\r\n```yaml\r\n---\r\ndependencies:\r\n  - role: hello\r\n    name: \"{{key}}\"\r\n```\r\n\r\nroles/hello/tasks/main.yml\r\n\r\n```yaml\r\n---\r\n- debug:\r\n    var: name\r\n```\r\n\r\nplaybook.yml\r\n\r\n```yaml\r\n---\r\n- hosts: localhost\r\n  roles:\r\n    - role: foo\r\n      key: foo\r\n    - role: foo\r\n      key: bar\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- What did you expect to happen when running the steps above? -->\r\n\r\nWhen the playbook is run, the role `hello` is called twice because roles `foo` and `hello` are called twice with different parameters.\r\n\r\nhttp://docs.ansible.com/ansible/latest/playbooks_reuse_roles.html#role-duplication-and-execution\r\n\r\n```yaml\r\nPLAY [localhost] *****************************************************************************************************************\r\n\r\nTASK [Gathering Facts] ***********************************************************************************************************\r\nok: [localhost]\r\n\r\nTASK [hello : debug] *************************************************************************************************************\r\nok: [localhost] => {\r\n    \"name\": \"foo\"\r\n}\r\n\r\nTASK [hello : debug] *************************************************************************************************************\r\nok: [localhost] => {\r\n    \"name\": \"bar\"\r\n}\r\n\r\nPLAY RECAP ***********************************************************************************************************************\r\nlocalhost                  : ok=3    changed=0    unreachable=0    failed=0\r\n```\r\n\r\n##### ACTUAL RESULTS\r\n<!--- What actually happened? If possible run with extra verbosity (-vvvv) -->\r\n\r\nThe role `hello` is called only once.\r\n\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\nPLAY [localhost] *****************************************************************************************************************\r\n\r\nTASK [Gathering Facts] ***********************************************************************************************************\r\nok: [localhost]\r\n\r\nTASK [hello : debug] *************************************************************************************************************\r\nok: [localhost] => {\r\n    \"name\": \"foo\"\r\n}\r\n\r\nPLAY RECAP ***********************************************************************************************************************\r\nlocalhost                  : ok=2    changed=0    unreachable=0    failed=0\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34736/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34547", "title": "Add 'init' option to docker_container module to support docker's `--init` option", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nAdd 'init' option to [docker_container module](http://docs.ansible.com/ansible/latest/docker_container_module.html) to support docker's `--init` option.\r\n[This option requires Docker API 1.25+](https://docs.docker.com/engine/reference/commandline/run/#options).\r\n\r\nFixes #30761\r\n\r\n##### ISSUE TYPE\r\n\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\n[docker_container module's](http://docs.ansible.com/ansible/latest/docker_container_module.html) `init` option\r\n\r\n##### ANSIBLE VERSION\r\n\r\n```\r\nv2.4\r\n```", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "sparunakian": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34733", "title": "LDAP lookup", "body": "Hi,\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Feature Idea\r\n\r\n##### COMPONENT NAME\r\nLDAP lookup\r\n\r\n##### SUMMARY\r\nA LDAP lookup would be quite useful to get information from a LDAP server. A use case would be the creation of users queried from the LDAP server.\r\n\r\nThere already is a community LDAP lookup at https://github.com/quinot/ansible-plugin-lookup_ldap which works very well. The author would be ok with the integration of his lookup: quinot/ansible-plugin-lookup_ldap/issues/11\r\n\r\nRegards", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34733/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "Madhura-CSI": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34732", "title": "AWS direct connect modules are unable to create direct connect resources when 'ec2_url' is specified.", "body": "AWS Direct Connect modules cannot create required resources like direct connect connection or gateway when 'ec2_url' parameter is specified in a playbook run.\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\naws_direct_connect_connection\r\naws_direct_connect_gateway\r\naws_direct_connect_link_aggregation_group\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/centos-dev/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Aug  4 2017, 00:39:18) [GCC 4.8.5 20150623 (Red Hat 4.8.5-16)]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\nIf using Ansible 2.4 or above, paste the results of \"ansible-config dump --only-changed\"\r\nOtherwise, mention any settings you have changed/added/removed in ansible.cfg\r\n(or using the ANSIBLE_* environment variables).\r\n-->\r\n\r\n##### OS / ENVIRONMENT\r\nCentos 7.4\r\n\r\n##### SUMMARY\r\nAbove mentioned AWS direct connect modules have issue when ec2 endpoint url gets specified in ansible playbook run. The module fails to create AWS direct connect resource and throws 'DirectConnectError'.\r\n\r\n##### STEPS TO REPRODUCE\r\n1. Have task to create a VPC in playbook where EC2_URL environment variable is specified.\r\n2. Include task to create direct connect playbook in same playbook. Following is the sample playbook.\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n---\r\n- hosts: localhost\r\n  tasks:\r\n    - ec2_vpc_net:\r\n        state: present\r\n        cidr_block: \"10.107.0.0/16\"\r\n        name: testvpc\r\n    - name: dc create\r\n      aws_direct_connect_connection:\r\n        name: madhuradc1\r\n        state: present\r\n        location: SFY52\r\n        bandwidth: 1Gbps\r\n  environment:\r\n    EC2_URL: \"https://ec2.ap-south-1.amazonaws.com\"\r\n  connection: local\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\nVPC and direct connect connection both should get created successfully.\r\n\r\n##### ACTUAL RESULTS\r\nVPC creation is successful but direct connect connection is not created. Error is as below.\r\n\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\nThe full traceback is:\r\nTraceback (most recent call last):\r\n  File \"/tmp/ansible_esgsXG/ansible_module_aws_direct_connect_connection.py\", line 304, in <module>\r\n    main()\r\n  File \"/tmp/ansible_esgsXG/ansible_module_aws_direct_connect_connection.py\", line 274, in main\r\n    connection_name=module.params.get('name'))\r\n  File \"/tmp/ansible_esgsXG/ansible_modlib.zip/ansible/module_utils/cloud.py\", line 153, in retry_func\r\nansible.module_utils.aws.direct_connect.DirectConnectError\r\n\r\nfatal: [localhost]: FAILED! => {\r\n    \"changed\": false,\r\n    \"module_stderr\": \"Traceback (most recent call last):\\n  File \\\"/tmp/ansible_esgsXG/ansible_module_aws_direct_connect_connection.py\\\", line 304, in <module>\\n    main()\\n  File \\\"/tmp/ansible_esgsXG/ansible_module_aws_direct_connect_connection.py\\\", line 274, in main\\n    connection_name=module.params.get('name'))\\n  File \\\"/tmp/ansible_esgsXG/ansible_modlib.zip/ansible/module_utils/cloud.py\\\", line 153, in retry_func\\nansible.module_utils.aws.direct_connect.DirectConnectError\\n\",\r\n    \"module_stdout\": \"\",\r\n    \"msg\": \"MODULE FAILURE\",\r\n    \"rc\": 0\r\n}\r\n\r\n```\r\n\r\nThis happens due to the following lines of code in aws_direct_connect modules.\r\n```\r\nconnection = boto3_conn(module, conn_type='client',\r\n                            resource='directconnect', region=region,\r\n                            endpoint=ec2_url, **aws_connect_kwargs)\r\n```\r\nIn general, ec2_url is used as endpoint URL for boto3 ec2 clients. Hence, modules referring to ec2 clients will function correctly. But same is not the case with direct connect. Direct connect url is in format 'directconnect.region-name.amazonaws.com' which is not handled in boto3_conn and in botocore.\r\n\r\nHence, the above lines should be changed to:\r\n```\r\nconnection = boto3_conn(module, conn_type='client',\r\n                            resource='directconnect', region=region,\r\n                            **aws_connect_kwargs)\r\n```\r\nThis will work in all the cases. i.e. with and without ec2_url.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34732/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/aae8f351a4fd18e7ce24926c883004ad0b3dae2f", "message": "new ec2_customer_gateway_facts module (#34448)"}], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34788", "title": "Support for accelerated networking and network security group for scaleset vms", "body": "Fix for https://github.com/ansible/ansible/issues/34032\r\n##### SUMMARY\r\nCurrent azure_rm_virtualmachine_scaleset module does not have a support for attaching pre-created network security group to virtual machines in scaleset. Also, there is no provision for enabling accelerated networking for VMs. Adding the support through this PR.\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Feature Pull Request\r\n \r\n##### COMPONENT NAME\r\nazure_rm_virtualmachine_scaleset\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/centos-dev/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Aug  4 2017, 00:39:18) [GCC 4.8.5 20150623 (Red Hat 4.8.5-16)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nExtra Parameters added to current module:\r\n1. network_security_group (type='str') -> name of network security group.\r\n2. enable_accelerated_networking (type='bool', default='no') -> flag to be set to true, if user wants to enabled accelerated networking for VM interfaces.\r\n\r\nTested Following Use-Case:\r\nModule execution by specifying existing network security group and flag to enable accelerated networking.\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n---\r\n- hosts: localhost\r\n  vars:\r\n    vm_image:\r\n      offer: \"{{ image_offer | default('CentOS') }}\"\r\n      publisher: \"{{ image_publisher | default('OpenLogic') }}\"\r\n      sku: \"{{ image_sku | default('7.4') }}\"\r\n      version: \"{{ image_version | default('latest') }}\"\r\n  tasks:\r\n    - name: Azure VMs | Create Scaleset\r\n      azure_rm_virtualmachine_scaleset:\r\n        resource_group: test-resource_group\r\n        name: testpr-scale-set\r\n        vm_size: Standard_D3_v2\r\n        capacity: 1\r\n        virtual_network_name: test-network\r\n        subnet_name: test-subnet\r\n        admin_username: centos\r\n        ssh_password_enabled: false\r\n        ssh_public_keys:\r\n          - path: \"/home/centos/.ssh/authorized_keys\"\r\n            key_data: \"ssh-rsa AAAAB3NzaC1yc2EAAAADBQAAAAABAYDL/Op8/NENu+nFHS7INjLYoesYxhrVv975UFQWSBF1AYQBxkiJ5W5uQhvUTeZXF1ebR4xnMmRspWf3AWUIdEwXJglfe7p7lr/V4R/TSot0UAvjdXvRXQelIN+AmS2ZsVjcvmqRbubFmJIclo0OTjddHuX3ccYRD1XDUALxOEipcuemWB83Pt+DZnwpJks9dhHJCUCNEhL7McSt1B5dVNfh0Ng83WK0hh58SVx9b0fKD/eKLH00m7Tm9Ni/cisGR3TINs6TH+is56FPFBmFtT6Orx0D+SZUd44pBdfs8FYKsKsS9WoHYcRtEH1XmjpfmP3MLCwJ2VbLy0rD52GcrA6d centos-dev@localhost.localdomain\"\r\n        image: \"{{ vm_image }}\"\r\n        upgrade_policy: Manual\r\n        network_security_group: \"test-sg\"\r\n        enable_accelerated_networking: yes\r\n      register: vmset\r\n    - debug:\r\n        msg: \"{{ vmset }}\"\r\n  environment:\r\n    AZURE_SUBSCRIPTION_ID: \"{{ azure_subscription_id | default('') }}\"\r\n    AZURE_REGION: \"{{ azure_region | default('') }}\"\r\n    AZURE_AD_USER: \"{{ azure_ad_user | default('') }}\"\r\n    AZURE_PASSWORD: \"{{ azure_password | default('') }}\"\r\n  connection: local\r\n```\r\nResult: VM network interfaces are seen attached to network security group 'test-sg'. Also following output shows accelerated networking enabled for VM interface. Output as below.\r\n```\r\n[centos@testpr-scale-set000001 ~]$ lspci\r\n0000:00:00.0 Host bridge: Intel Corporation 440BX/ZX/DX - 82443BX/ZX/DX Host bridge (AGP disabled) (rev 03)\r\n0000:00:07.0 ISA bridge: Intel Corporation 82371AB/EB/MB PIIX4 ISA (rev 01)\r\n0000:00:07.1 IDE interface: Intel Corporation 82371AB/EB/MB PIIX4 IDE (rev 01)\r\n0000:00:07.3 Bridge: Intel Corporation 82371AB/EB/MB PIIX4 ACPI (rev 02)\r\n0000:00:08.0 VGA compatible controller: Microsoft Corporation Hyper-V virtual VGA\r\n_0001:00:02.0 Ethernet controller: Mellanox Technologies MT27500/MT27520 Family [ConnectX-3/ConnectX-3 Pro Virtual Function]_\r\n\r\n[centos@testpr-scale-set000001 ~]$ ethtool -S eth0 | grep vf_\r\n     vf_rx_packets: 5578\r\n     vf_rx_bytes: 5396118\r\n     vf_tx_packets: 17941\r\n     vf_tx_bytes: 3257966\r\n     vf_tx_dropped: 0\r\n```\r\nNOTE: These additional features/parameters are not affecting existing scaleset flow. Have tested normal scaleset creation as well. It worked without issues.", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34640", "title": "New module for google storage bucket operations based on google-cloud-storage client.", "body": "##### SUMMARY\r\nNew module for google storage bucket operations based on google-cloud-storage client. This is a substitute for gc_storage module which uses boto for google storage operations.\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\ngce_bucket\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/centos-dev/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Aug  4 2017, 00:39:18) [GCC 4.8.5 20150623 (Red Hat 4.8.5-16)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nThis new module for google storage bucket operations currently supports following operations:\r\n\r\n1. Creation/deletion of multi-regional google storage buckets along with versioning enablement.\r\n2. Upload or download objects to or from bucket.\r\n3. Update bucket policy.\r\n4. Get object contents as string.\r\n5. Get object urls for object access operations.\r\n6. Authenticate storage operations with google service accounts.\r\n7. User-defined bucket policies can be attached to a given bucket. Also, canned permissions can be set for buckets/objects which can be one of ['private', 'authenticated-read', 'public-read']\r\n\r\nThis module is mainly developed for the following reasons.\r\n1. gc_storage module which is currently supported by community uses boto for bucket operations and AWS seems to be limiting support for boto now on-wards. Hence, using google cloud supported library would be a better option.\r\n2. gc_storage module supports authentication with pair of secret/access keys. We often require authentications to be done google service accounts. The storage client here satisfies this requirement.\r\n3. This module also can attach user-defined policy to a bucket.\r\n\r\nThe Documentation and EXAMPLES sections describe in detail about this module.\r\nI would like to contribute this module to community.\r\nA couple of sample module invocations are as below:\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n- hosts: localhost\r\n  tasks:\r\n    - gce_bucket:\r\n        bucket: testbucket\r\n        mode: create\r\n        versioning: yes\r\n  environment:\r\n    GCE_PROJECT: testproject\r\n    GCE_CREDENTIALS_FILE_PATH: /home/centos/service_account_cred.json\r\n  connection: local\r\n```\r\n```\r\n- name: Upload New Object\r\n  gce_bucket:\r\n    bucket: testbucket\r\n    mode: put\r\n    src: /tmp/x.txt\r\n    object: x.txt\r\n```\r\n\r\nKnown issues:\r\n1. Cannot delete versioned objects: https://github.com/GoogleCloudPlatform/google-cloud-python/issues/2463\r\nPlease let me know if any improvements to be done in current module.", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "lindsm": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34726", "title": "win_package retries", "body": "##### ISSUE TYPE\r\nBug Report\r\n\r\n##### COMPONENT NAME\r\nwin_package\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.2.0\r\n  config file = None\r\n  configured module search path = [u'/Users/user/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/user/Documents/Projects/venv/default/lib/python2.7/site-packages/ansible\r\n  executable location = /Users/user/Documents/Projects/venv/default/bin/ansible\r\n  python version = 2.7.14 (default, Jan  3 2018, 12:57:16) [GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.39.2)]\r\n```\r\n\r\n##### CONFIGURATION\r\n\r\n##### OS / ENVIRONMENT\r\nmacOS Sierra 10.12.6\r\n\r\n##### SUMMARY\r\nwin_package ignores retries.\r\n\r\n##### STEPS TO REPRODUCE\r\nUse win_package to install an MSI on a windows host with retries set.  Start a install by hand, preferably a long running one, or one with prompts.  Execute the sample task.  Retries will not be honored.\r\n\r\n```yaml\r\n  - name: Install MSIs on Host\r\n    win_package:\r\n      name: \"{{ item }}\"\r\n      path: 'C:\\\\temp\\\\TempData\\\\{{ item }}'\r\n    register: msi_file_install\r\n    with_items:\r\n      - msi_name\r\n    retries: 40\r\n    delay: 10\r\n    # until: msi_file_install.rc != 1618  # This is a workaround for the problem mentioned.\r\n    ignore_errors: yes\r\n```\r\n\r\n##### EXPECTED RESULTS\r\nI expected to see failed message followed by retrying message\r\n\r\n##### ACTUAL RESULTS\r\n```\r\nfailed: [hostname] (item={u'extra_args': u'/L*v C:\\\\Files\\\\Logs\\\\validator.log', u'instructions': u'', u'name': u'msi_name'}) => {\"changed\": false, \"exit_code\": 1618, \"failed\": true, \"item\": {\"extra_args\": \"/L*v C:\\\\Files\\\\Logs\\\\validator.log\", \"instructions\": \"\", \"name\": \"msi_name\"}, \"msg\": \"unexpected rc from install C:\\\\WINDOWS\\\\system32\\\\msiexec.exe /i \\\"C:\\\\\\\\temp\\\\\\\\TempData\\\\\\\\msi_name.msi\\\" /L*V \\\"C:\\\\Users\\\\user\\\\AppData\\\\Local\\\\Temp\\\\cimhfqvk.ois\\\" /qn /norestart /L*v C:\\\\Files\\\\Logs\\\\validator.log: see exit_code, stdout and stderr for more details\", \"rc\": 1618, \"reboot_required\": false, \"restart_required\": false, \"stderr\": \"\", \"stderr_lines\": [], \"stdout\": \"Another program is being installed. Please wait until that installation is complete, and then try installing this software again.\\n\\r\", \"stdout_lines\": [\"Another program is being installed. Please wait until that installation is complete, and then try installing this software again.\", \"\"]}\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34726/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "opoplawski": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34722", "title": "RFE: Add config option to pass custom -P option to sshpass", "body": "##### ISSUE TYPE\r\n - Feature Idea\r\n\r\n##### COMPONENT NAME\r\nssh\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.6/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.6.6 (r266:84292, Aug 18 2016, 15:13:37) [GCC 4.4.7 20120313 (Red Hat 4.4.7-17)]\r\n\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\nEnterprise Linux 7\r\n\r\n##### SUMMARY\r\n\r\nRemote systems can issue different password prompts for various reasons, including requiring One-Time Passwords in addition to ssh keys.  In these cases it would be helpful to be able to pass a custom -P option to sshpass.  See also issue #11565.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34722/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "bdowling": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34719", "title": "Handling of sub-prompts, particularly for enable mode needs improvement", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!---\r\nName of the module, plugin, task or feature\r\nDo not include extra details here, e.g. \"vyos_command\" not \"the network module vyos_command\" or the full path\r\n-->\r\n\r\nnetwork_cli.py\r\nconnection/ios.py\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\ndevel\r\n```\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly -->\r\n\r\nAnsible does not fully handle enable mode Password prompting.  It sends a response once, but does not check if the device asked for Password: again.  The changes introduced in #33794 have brought this to the fore.  I worked witth @brainclots to identify that the issue in #33993 was actually that he was not getting to enable mode. \r\n\r\nThe crux of the issue is:\r\n- handle_prompts is only ever called once.  On an IOS device, by default it will prompt for the Password: 3 times.  Only after that fails will it return `%Bad Secrets`\r\n- Now that it only sends one CR after a timeout to see if there is a prompt, it fails to see this error message.  (This explains why in #33993 it was failing with an odd message because the prompt was Password:)  Note, without some sort of some other prompt synchronization mechanisms, sending one CR is the proper approach here.  Thus better handling for the device still prompting for a Password should be implemented.\r\n- Please note that #34585 also comes into play here.  Without that fix, you can see below that it ends up sending the password to the normal CLI prompt because it is not seeing the current prompt.\r\n\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\nansible-playbook -e ansible_become_password=foobar net-enable-mode-play.yml\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- What did you expect to happen when running the steps above? -->\r\n```\r\nfatal: [bd-csr1000v-00]: FAILED! => {\r\n    \"msg\": \"unable to elevate privilege to enable mode, at prompt [\\nbd-csr1000v-00>]\"\r\n```\r\n\r\n##### ACTUAL RESULTS\r\n<!--- What actually happened? If possible run with extra verbosity (-vvvv) -->\r\n*20 second timeout*\r\n```\r\n    raise AnsibleConnectionFailure(\"timeout trying to send command: %s\" % command.strip())\r\nAnsibleConnectionFailure: timeout trying to send command:\r\n```\r\n\r\n##### Device Interaction logs\r\nThe below logs are from the #33928 (with a few local changes) which really help to identify issues like this.\r\n\r\n----\r\nThe current devel branch responds like this:\r\n```\r\n18499 1515617839.32807: CLI-PROMPT: looking for prompt in | te\r\n18499 1515617839.34388: CLI-PROMPT: looking for prompt in | term\r\n18499 1515617839.35165: CLI-PROMPT: looking for prompt in | termi\r\n18499 1515617839.35948: CLI-PROMPT: looking for prompt in | termin\r\n18499 1515617839.36730: CLI-PROMPT: looking for prompt in | termina\r\n18499 1515617839.37505: CLI-PROMPT: looking for prompt in | terminal\r\n18499 1515617839.39099: CLI-PROMPT: looking for prompt in | terminal w\r\n18499 1515617839.39869: CLI-PROMPT: looking for prompt in | terminal wi\r\n18499 1515617839.40632: CLI-PROMPT: looking for prompt in | terminal wid\r\n18499 1515617839.41406: CLI-PROMPT: looking for prompt in | terminal widt\r\n18499 1515617839.42186: CLI-PROMPT: looking for prompt in | terminal width\r\n18499 1515617839.43794: CLI-PROMPT: looking for prompt in | terminal width\r\n18499 1515617839.43850: CLI-PROMPT: looking for prompt in | terminal width 5\r\n18499 1515617839.44615: CLI-PROMPT: looking for prompt in | terminal width 51\r\n18499 1515617839.45388: CLI-PROMPT: looking for prompt in | terminal width 512\r\n18499 1515617839.46150: CLI-PROMPT: looking for prompt in | terminal width 512\\r\\n\r\n18499 1515617839.46150: CLI-PROMPT: looking for prompt in | terminal width 512\\r\\n\r\n18499 1515617839.46919: CLI-PROMPT: looking for prompt in | terminal width 512\\r\\nbd-csr1000v-00>\r\n18499 1515617839.46949: CLI-PROMPT: Matched Standard Prompt [\\r\\n]?[\\w+\\-\\.:\\/\\[\\]]+(?:\\([^\\)]+\\)){,3}(?:>|#) ?$\r\n18499 1515617839.46970: CLI-RECV: terminal width 512\\r\\nbd-csr1000v-00>\r\n18499 1515617839.46994: CLI-SEND: \\r\r\n18499 1515617839.48587: CLI-PROMPT: looking for prompt in | \\r\\nbd-csr1000v-00>\r\n18499 1515617839.48617: CLI-PROMPT: Matched Standard Prompt [\\r\\n]?[\\w+\\-\\.:\\/\\[\\]]+(?:\\([^\\)]+\\)){,3}(?:>|#) ?$\r\n18499 1515617839.48638: CLI-RECV: \\r\\nbd-csr1000v-00>\r\n18499 1515617839.48674: CLI-SEND: enable\\r\r\n18499 1515617839.51951: CLI-PROMPT: looking for prompt in | ena\r\n18499 1515617839.51985: CLI-PROMPT: looking for prompt in | enab\r\n18499 1515617839.52744: CLI-PROMPT: looking for prompt in | enabl\r\n18499 1515617839.53518: CLI-PROMPT: looking for prompt in | enable\r\n18499 1515617839.54287: CLI-PROMPT: looking for prompt in | enable\\r\\n\r\n18499 1515617839.65107: CLI-SUBPROMPT: Matched [\\r\\n]?password: $, sent '<answer>\\r'\r\n18499 1515617839.65140: CLI-PROMPT: looking for prompt in | enable\\r\\nPassword:\r\n18499 1515617839.65169: CLI-PROMPT: looking for prompt in | enable\\r\\nPassword: \\r\\nPassword:\r\n18499 1515617849.65339: CLI-SEND: \\r\r\n18499 1515617849.66965: CLI-PROMPT: looking for prompt in | \\r\\nPassword:\r\n```\r\n\r\n----\r\n\r\n*As an aside, the logging above shows the buffering issues with paramiko.  I have an inquiry upstream to see if there is a better way to flush the send buffer.  I introduced microsecond delays after sending to see this logging improve, but that is not optimal.  https://github.com/paramiko/paramiko/issues/1145 *\r\n\r\nWith my patch which checks for the prompt more than once, this changes to:\r\n```\r\n18572 1515618500.48843: CLI-SUBPROMPT: Matched [\\r\\n]?password: $, sent '<answer>\\r'\r\n18572 1515618500.48873: CLI-PROMPT: looking for prompt in | enable\\r\\nPassword:\r\n18572 1515618500.58946: CLI-SUBPROMPT: Matched [\\r\\n]?password: $, sent '<answer>\\r'\r\n18572 1515618500.58979: CLI-PROMPT: looking for prompt in | enable\\r\\nPassword: \\r\\nPassword: \\r\\nPassword:\r\n18572 1515618500.69058: CLI-SUBPROMPT: Matched [\\r\\n]?password: $, sent '<answer>\\r'\r\n18572 1515618500.69092: CLI-PROMPT: looking for prompt in | enable\\r\\nPassword: \\r\\nPassword: \\r\\nPassword: \\r\\n% Bad secrets\\r\\n\\r\\nbd-csr1000v-00>\r\n18572 1515618500.69122: CLI-PROMPT: Matched Error Prompt [\\r\\n]?[\\w+\\-\\.:\\/\\[\\]]+(?:\\([^\\)]+\\)){,3}(?:>|#) ?$\r\n18572 1515618500.69155: CLI-SEND: \\r\r\n18572 1515618500.70759: CLI-PROMPT: looking for prompt in | \\r\\nbd-csr1000v-00>\r\n18572 1515618500.70788: CLI-PROMPT: Matched Standard Prompt [\\r\\n]?[\\w+\\-\\.:\\/\\[\\]]+(?:\\([^\\)]+\\)){,3}(?:>|#) ?$\r\n18572 1515618500.70813: CLI-RECV: \\r\\nbd-csr1000v-00>\r\n\r\nfatal: [bd-csr1000v-00]: FAILED! => {\r\n    \"msg\": \"unable to elevate privilege to enable mode, at prompt [\\nbd-csr1000v-00>]\"\r\n}\r\n```\r\n-----\r\n\r\nNote I also identified an issue with the password prompt regex similar to #34585 in that the newline is optional.  This should also be fixed.  See below, there is a timing issue introduced when checking for the subprompt more than once.  With any sort of network delay or timing, it could \"see\" the password prompt in the buffer anywhere without regard to starting a newline and end of buffer.  Thus it could send the password more than three times, as is the case below.  It sent it enough times for it to be exposed in the normal cli where cisco performed a host lookup by default.\r\n\r\n```\r\n18823 1515619048.83241: CLI-RECV: \\r\\nbd-csr1000v-00>\r\n18823 1515619048.83276: CLI-SEND: enable\\r\r\n18823 1515619048.93427: CLI-SUBPROMPT: Matched [\\r\\n]?password: $, sent '<answer>\\r'\r\n18823 1515619048.93454: CLI-PROMPT: looking for prompt in | enable\\r\\nPassword:\r\n18823 1515619048.93502: CLI-SUBPROMPT: Matched [\\r\\n]?password: $, sent '<answer>\\r'\r\n18823 1515619048.95096: CLI-PROMPT: looking for prompt in | enable\\r\\nPassword: \\r\\nPassword:\r\n18823 1515619048.95168: CLI-SUBPROMPT: Matched [\\r\\n]?password: $, sent '<answer>\\r'\r\n18823 1515619048.95312: CLI-PROMPT: looking for prompt in | enable\\r\\nPassword: \\r\\nPassword: \\r\\nPassword:\r\n18823 1515619048.95375: CLI-SUBPROMPT: Matched [\\r\\n]?password: $, sent '<answer>\\r'\r\n18823 1515619049.01774: CLI-PROMPT: looking for prompt in | enable\\r\\nPassword: \\r\\nPassword: \\r\\nPassword: \\r\\n% Bad secrets\\r\\n\\r\\nbd-csr1000v-00>fo\r\n18823 1515619049.02149: CLI-PROMPT: looking for prompt in | enable\\r\\nPassword: \\r\\nPassword: \\r\\nPassword: \\r\\n% Bad secrets\\r\\n\\r\\nbd-csr1000v-00>foo\r\n18823 1515619049.02932: CLI-PROMPT: looking for prompt in | enable\\r\\nPassword: \\r\\nPassword: \\r\\nPassword: \\r\\n% Bad secrets\\r\\n\\r\\nbd-csr1000v-00>foo\\r\\n\r\n18823 1515619049.03713: CLI-PROMPT: looking for prompt in | enable\\r\\nPassword: \\r\\nPassword: \\r\\nPassword: \\r\\n% Bad secrets\\r\\n\\r\\nbd-csr1000v-00>foo\\r\\n% Bad IP address or host name% Unknown command or computer name, or unable to find computer address\\r\\nbd-csr1000v-00>\r\n18823 1515619049.03758: CLI-PROMPT: Matched Error Prompt [\\r\\n]?[\\w+\\-\\.:\\/\\[\\]]+(?:\\([^\\)]+\\)){,3}(?:>|#) ?$\r\n18823 1515619049.03815: CLI-SEND: \\r\r\n18823 1515619049.13885: CLI-PROMPT: looking for prompt in | \\r\\nbd-csr1000v-00>\r\n18823 1515619049.13917: CLI-PROMPT: Matched Standard Prompt [\\r\\n]?[\\w+\\-\\.:\\/\\[\\]]+(?:\\([^\\)]+\\)){,3}(?:>|#) ?$\r\n18823 1515619049.13942: CLI-RECV: \\r\\nbd-csr1000v-00>\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34719/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34723", "title": "Fix enable subprompt", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\n\r\nThis is an attempt at fixing the issues discussed in #34719.  This is certainly not the only way, and is probably not \"complete.\" But more advanced fixes would require rework of the whole send/prompt handling framework IMHO.\r\n\r\nFixes #34719 \r\nReturns better user-friendly error message in #33993 \r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\nnetwork_cli\r\nios.py\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\ndevel\r\n```", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34585", "title": "Fix terminal prompt re in ios and iosxr to match newline", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\n\r\nThe regex in a number of network cli terminal modules is relatively weak in how few characters it needs to match, which sometimes causes it to detect prompts where it shouldn't, in descriptions, in show output, etc.  It is further weakened however because it **optionally** matches the start of the line (by `[\\r\\n]?`) which of course makes it a lot easier to find the rest of the simple pattern in other places.\r\n\r\nThis PR fixes that for ios and iosxr.  You may wish to fix this on other modules as well, but as I do not have those device types I did not make the change as I cannot test.\r\n```\r\nlib/ansible/plugins/terminal/aireos.py:    re.compile(br\"[\\r\\n]?[\\w]*\\(.+\\)?[>#\\$](?:\\s*)$\"),\r\nlib/ansible/plugins/terminal/aruba.py:     re.compile(br\"[\\r\\n]?[\\w]*\\(.+\\) ?#(?:\\s*)$\"),\r\nlib/ansible/plugins/terminal/bigip.py:     re.compile(br\"[\\r\\n]?(?:\\([^\\)]+\\)){,5}(?:>|#) ?$\"),\r\nlib/ansible/plugins/terminal/bigip.py:     re.compile(br\"[\\r\\n]?[\\w+\\-\\.:\\/\\[\\]]+(?:\\([^\\)]+\\)){,3}(?:>|#) ?$\"),\r\nlib/ansible/plugins/terminal/dellos10.py:  re.compile(br\"[\\r\\n]?[\\w+\\-\\.:\\/\\[\\]]+(?:\\([^\\)]+\\)){,3}(?:#) ?$\"),\r\nlib/ansible/plugins/terminal/dellos6.py:   re.compile(br\"[\\r\\n]?[\\w+\\-\\.:\\/\\[\\]]+(?:\\([^\\)]+\\)){,3}(?:>|#) ?$\"),\r\nlib/ansible/plugins/terminal/dellos9.py:   re.compile(br\"[\\r\\n]?[\\w+\\-\\.:\\/\\[\\]]+(?:\\([^\\)]+\\)){,3}(?:>|#) ?$\"),\r\nlib/ansible/plugins/terminal/enos.py:      re.compile(br\"[\\r\\n]?[\\w+\\-\\.:\\/\\[\\]]+(?:\\([^\\)]+\\)){,3}(?:>|#) ?$\"),\r\nlib/ansible/plugins/terminal/eos.py:       re.compile(br\"[\\r\\n]?[\\w+\\-\\.:\\/\\[\\]]+(?:\\([^\\)]+\\)){,3}(?:>|#) ?$\"),\r\nlib/ansible/plugins/terminal/junos.py:     re.compile(br\"[\\r\\n]?[\\w+\\-\\.:\\/\\[\\]]+(?:\\([^\\)]+\\)){,3}(?:>|#) ?$|%\"),\r\nlib/ansible/plugins/terminal/sros.py:      re.compile(br\"[\\r\\n]?[\\w+\\-\\.:\\/\\[\\]]+(?:\\([^\\)]+\\)){,3}(?:>|#|\\$) ?$\"),\r\nlib/ansible/plugins/terminal/vyos.py:      re.compile(br\"[\\r\\n]?[\\w+\\-\\.:\\/\\[\\]]+(?:\\([^\\)]+\\)){,3}(?:>|#) ?$\"),\r\n```\r\n* which of these are not like the others ? ;) ... I know DRY humor *\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\nnetwork_cli\r\nios\r\niosxr\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.5.0 (fix_ios_re 228fcaac6d) last updated 2018/01/08 17:07:04 (GMT +000)\r\n```\r\n\r\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "aetelman": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34701", "title": "ios_user: issue attempting to remove multiple users", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\n--> ios_user\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.2.0\r\n  config file = /opt/isv/netflow/venvs/alsible/ansible/ansible.cfg\r\n  configured module search path = ['/home/<user>/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /opt/isv/netflow/pyenv/versions/3.6.2/envs/py3ansible/lib/python3.6/site-packages/ansible\r\n  executable location = /opt/isv/netflow/pyenv/versions/py3ansible/bin/ansible\r\n  python version = 3.6.2 (default, Aug 19 2017, 16:48:59) [GCC 4.4.7 20120313 (Red Hat 4.4.7-18)]\r\n```\r\n\r\n##### CONFIGURATION\r\n```\r\nDEFAULT_FORKS(/opt/isv/netflow/venvs/alsible/ansible/ansible.cfg) = 15\r\nDEFAULT_HOST_LIST(/opt/isv/netflow/venvs/alsible/ansible/ansible.cfg) = ['/opt/isv/netflow/venvs/alsible/ansible/m\r\nDEFAULT_LOCAL_TMP(/opt/isv/netflow/venvs/alsible/ansible/ansible.cfg) = /opt/isv/netflow/temp/ansible/ansible-loca\r\nDEFAULT_LOG_PATH(/opt/isv/netflow/venvs/alsible/ansible/ansible.cfg) = /var/log/ansible.log\r\nDEFAULT_ROLES_PATH(/opt/isv/netflow/venvs/alsible/ansible/ansible.cfg) = ['/opt/isv/netflow/venvs/alsible/ansible/\r\nDEFAULT_VAULT_PASSWORD_FILE(/opt/isv/netflow/venvs/alsible/ansible/ansible.cfg) = /home/<user>/vault_pass.txt\r\nHOST_KEY_CHECKING(/opt/isv/netflow/venvs/alsible/ansible/ansible.cfg) = False\r\nPARAMIKO_RECORD_HOST_KEYS(/opt/isv/netflow/venvs/alsible/ansible/ansible.cfg) = False\r\nRETRY_FILES_ENABLED(/opt/isv/netflow/venvs/alsible/ansible/ansible.cfg) = False\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n--> Red Hat 4.4.7-18\r\n\r\n##### SUMMARY\r\nWhen attempting to remove multiple users on c2951, the module doesn't account for the confirmation message from the IOS and reply.\r\n\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\n--> \r\n\r\n```- name: Delete users with aggregate\r\n  ios_user:\r\n    aggregate:\r\n      - name: ansibletest1\r\n      - name: ansibletest2\r\n      - name: ansibletest3\r\n    state: absent\r\n```\r\n\r\n##### EXPECTED RESULTS\r\n--> Expected the user accounts to be deleted\r\n\r\n##### ACTUAL RESULTS\r\n<!--- What actually happened? If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes below -->\r\n[git_issue_ios_user.txt](https://github.com/ansible/ansible/files/1623933/git_issue_ios_user.txt)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34701/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "jimholden82": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34698", "title": "win_uri module: no json in response var defined despite 'return_content: yes'", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!---\r\nName of the module, plugin, task or feature\r\nDo not include extra details here, e.g. \"vyos_command\" not \"the network module vyos_command\" or the full path\r\n-->\r\nwin_uri\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/ubuntu/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.12 (default, Nov 20 2017, 18:23:56) [GCC 5.4.0 20160609]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\nIf using Ansible 2.4 or above, paste the results of \"ansible-config dump --only-changed\"\r\nOtherwise, mention any settings you have changed/added/removed in ansible.cfg\r\n(or using the ANSIBLE_* environment variables).\r\n-->\r\nHOST_KEY_CHECKING(/etc/ansible/ansible.cfg) = False\r\nPERSISTENT_CONNECT_TIMEOUT(/etc/ansible/ansible.cfg) = 30\r\n\r\n##### OS / ENVIRONMENT\r\n<!---\r\nMention the OS you are running Ansible from, and the OS you are\r\nmanaging, or say \"N/A\" for anything that is not platform-specific.\r\nAlso mention the specific version of what you are trying to control,\r\ne.g. if this is a network bug the version of firmware on the network device.\r\n-->\r\nControl Host: Ubuntu 16.04\r\nTarget Host: Windows 2012 R2 Datacenter\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly -->\r\nWhen using the win_uri to call a resource which returns a JSON response, the result is not loaded into a  json key in the dictionary results. This happens despite using 'return_content: yes' and the content type being 'application/json'\r\n\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\nTasks to reproduce:\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n- name: Get JSON from resource\r\n  win_uri:\r\n    url: http://petstore.swagger.io/v2/swagger.json\r\n    return_content: yes\r\n  register: response\r\n\r\n- debug: var=response.json\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- What did you expect to happen when running the steps above? -->\r\nThe expected result would be that `response.json` would be defined and I can access keys and values.\r\n##### ACTUAL RESULTS\r\n<!--- What actually happened? If possible run with extra verbosity (-vvvv) -->\r\nSee the actual ouput with -vvv below, the JSON key is not defined. For readability reasons, I cut the values of 'content' and 'raw_content'. You call view the full output [here](https://gist.github.com/jimholden82/54711740b0f4aaeb76c0e4cc88fa235b).\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\nTASK [common : Test win_uri] ******************************************************************\r\ntask path: /home/ubuntu/basic-windows-server/trunk/playbooks/roles/common/tasks/main.yml:26\r\nUsing module file /usr/lib/python2.7/dist-packages/ansible/modules/windows/win_uri.ps1\r\n<10.204.0.9> ESTABLISH WINRM CONNECTION FOR USER: Admin on PORT 5986 TO 10.204.0.9\r\nEXEC (via pipeline wrapper)\r\nok: [10.204.0.9] => {\r\n    \"base_response\": {\r\n        \"CharacterSet\": \"\", \r\n        \"ContentEncoding\": \"\", \r\n        \"ContentLength\": -1, \r\n        \"ContentType\": \"application/json\", \r\n        \"Cookies\": [], \r\n        \"Headers\": [\r\n            \"Access-Control-Allow-Origin\", \r\n            \"Access-Control-Allow-Methods\", \r\n            \"Access-Control-Allow-Headers\", \r\n            \"X-Cache\", \r\n            \"X-Cache-Lookup\", \r\n            \"Transfer-Encoding\", \r\n            \"Content-Type\", \r\n            \"Date\", \r\n            \"Server\", \r\n            \"Via\"\r\n        ], \r\n        \"IsFromCache\": false, \r\n        \"IsMutuallyAuthenticated\": false, \r\n        \"LastModified\": \"/Date(1515596851865)/\", \r\n        \"Method\": \"GET\", \r\n        \"ProtocolVersion\": {\r\n            \"Build\": -1, \r\n            \"Major\": 1, \r\n            \"MajorRevision\": -1, \r\n            \"Minor\": 1, \r\n            \"MinorRevision\": -1, \r\n            \"Revision\": -1\r\n        }, \r\n        \"ResponseUri\": \"http://petstore.swagger.io/v2/swagger.json\", \r\n        \"Server\": \"Jetty(9.2.9.v20150224)\", \r\n        \"StatusCode\": 200, \r\n        \"StatusDescription\": \"OK\", \r\n        \"SupportsHeaders\": true\r\n    }, \r\n    \"changed\": false, \r\n    \"content\": \"{\\\"swagger\\\":\\\"2.0\\\",\\\"info\\\":...\", \r\n    \"content_type\": \"application/json\", \r\n    \"headers\": {\r\n        \"Access-Control-Allow-Headers\": \"Content-Type, api_key, Authorization\", \r\n        \"Access-Control-Allow-Methods\": \"GET, POST, DELETE, PUT\", \r\n        \"Access-Control-Allow-Origin\": \"*\", \r\n        \"Content-Type\": \"application/json\", \r\n        \"Date\": \"Wed, 10 Jan 2018 15:07:32 GMT\", \r\n        \"Server\": \"Jetty(9.2.9.v20150224)\", \r\n        \"Transfer-Encoding\": \"chunked\", \r\n        \"Via\": \"1.1 forward-proxy-2 (squid/3.5.12)\", \r\n        \"X-Cache\": \"MISS from forward-proxy-2\", \r\n        \"X-Cache-Lookup\": \"MISS from forward-proxy-2:3128\"\r\n    }, \r\n    \"images\": [], \r\n    \"input_fields\": [], \r\n    \"links\": [], \r\n    \"method\": \"GET\", \r\n    \"raw_content\": \"HTTP/1.1 200 OK\\r\\nAcc...\", \r\n    \"raw_content_length\": 13676, \r\n    \"raw_content_stream\": {\r\n        \"CanRead\": true, \r\n        \"CanSeek\": true, \r\n        \"CanTimeout\": false, \r\n        \"CanWrite\": true, \r\n        \"Capacity\": 100000, \r\n        \"Length\": 13676, \r\n        \"Position\": 13676, \r\n        \"ReadTimeout\": null, \r\n        \"WriteTimeout\": null\r\n    }, \r\n    \"status_code\": 200, \r\n    \"status_description\": \"OK\", \r\n    \"url\": \"http://petstore.swagger.io/v2/swagger.json\", \r\n    \"use_basic_parsing\": true\r\n}\r\n\r\nTASK [common : debug] *************************************************************************\r\ntask path: /home/ubuntu/basic-windows-server/trunk/playbooks/roles/common/tasks/main.yml:36\r\nok: [10.204.0.9] => {\r\n    \"response.json\": \"VARIABLE IS NOT DEFINED!\"\r\n}\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34698/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "tagirb": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34696", "title": "homebrew_cask: add cask upgrade functionality", "body": "##### ISSUE TYPE\r\n - Feature Idea\r\n\r\n##### COMPONENT NAME\r\nhomebrew_cask\r\n\r\n##### SUMMARY\r\nHomebrew supports now cask upgrades via `brew cask upgrade`, but the Ansible module `homebrew_cask` does not. Please add a parameter and functionality to run a cask upgrade.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34696/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "sedlund": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34693", "title": "Cannot use ansible_managed in copy module with content option", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Documentation Report\r\n##### COMPONENT NAME\r\n<!---\r\ncopy: content\r\n-->\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n  config file = /home/ansible/ansible.cfg\r\n  configured module search path = [u'/home/ansible/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.14 (default, Sep 23 2017, 22:06:14) [GCC 7.2.0]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\nANSIBLE_PIPELINING(/home/ansible/ansible.cfg) = True\r\nDEFAULT_BECOME(/home/ansible/ansible.cfg) = True\r\nDEFAULT_BECOME_ASK_PASS(/home/ansible/ansible.cfg) = True\r\nDEFAULT_HOST_LIST(/home/ansible/ansible.cfg) = [u'/home/ansible/production']\r\nDEFAULT_MANAGED_STR(/home/ansible/ansible.cfg) = This file is managed by Ansible.%n\r\ntemplate: {file}\r\ndate: %Y-%m-%d %H:%M:%S\r\nuser: {uid}\r\nhost: {host}\r\nDEFAULT_VAULT_PASSWORD_FILE(/home/ansible/ansible.cfg) = /home/ansible/vpass-->\r\n\r\n##### OS / ENVIRONMENT\r\n<!---\r\nN/A\r\n-->\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly -->\r\nthe copy module with the content option should be able to parse {{ ansible_managed }}\r\n\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```\r\ncat << EOF > test_copy_content.yml\r\n- hosts: localhost\r\n  gather_facts: no\r\n  tasks:\r\n    - name: test ansible_managed with copy module using content\r\n      copy:\r\n        dest: /tmp/test_copy.tmp\r\n        content: |\r\n          {{ ansible_managed | comment }}\r\n          var: test\r\nEOF\r\nansible-playbook -c local -l localhost test_copy_content.yml\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- What did you expect to happen when running the steps above? -->\r\nExpected templating to work with the copy option as stated in documentation:\r\n\r\nhttp://docs.ansible.com/ansible/latest/intro_configuration.html#ansible-managed\r\n'ansible_managed\r\nThe ansible_managed string can be inserted into files written by Ansible\u2019s config templating system:'\r\n\r\nhttp://docs.ansible.com/ansible/latest/template_module.html\r\n'You can use the copy module with the content: option if you prefer the template inline, as part of the playbook.'\r\n\r\n##### ACTUAL RESULTS\r\nFatal Error\r\n\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\n# ansible-playbook -c local -l localhost test_copy_content.yml   \r\n\r\nPLAY [localhost] **************************************************************************************************************************************************\r\n\r\nTASK [test ansible_managed with copy module using content] ********************************************************************************************************\r\nfatal: [localhost]: FAILED! => {\"msg\": \"The task includes an option with an undefined variable. The error was: 'ansible_managed' is undefined\\n\\nThe error appears to have been in '/home/sedlund/test/test_copy_content.yml': line 4, column 7, but may\\nbe elsewhere in the file depending on the exact syntax problem.\\n\\nThe offending line appears to be:\\n\\n  tasks:\\n    - name: test ansible_managed with copy module using content\\n      ^ here\\n\\nexception type: <class 'ansible.errors.AnsibleUndefinedVariable'>\\nexception: 'ansible_managed' is undefined\"}\r\n        to retry, use: --limit @/home/sedlund/test/test_copy_content.retry\r\n\r\nPLAY RECAP ********************************************************************************************************************************************************\r\nlocalhost                  : ok=0    changed=0    unreachable=0    failed=1   \r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34693/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "Vladimir-csp": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34690", "title": "lineinfile with regexp is not idempotent", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!---\r\nName of the module, plugin, task or feature\r\nDo not include extra details here, e.g. \"vyos_command\" not \"the network module vyos_command\" or the full path\r\n-->\r\nlineinfile\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\nIf using Ansible 2.4 or above, paste the results of \"ansible-config dump --only-changed\"\r\nOtherwise, mention any settings you have changed/added/removed in ansible.cfg\r\n(or using the ANSIBLE_* environment variables).\r\n-->\r\n\r\n##### OS / ENVIRONMENT\r\n<!---\r\nMention the OS you are running Ansible from, and the OS you are\r\nmanaging, or say \"N/A\" for anything that is not platform-specific.\r\nAlso mention the specific version of what you are trying to control,\r\ne.g. if this is a network bug the version of firmware on the network device.\r\n-->\r\nN/A\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly -->\r\nlineinflile with regex is inconsistent\r\n\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n---\r\n- hosts: localhost\r\n  tasks:\r\n    - name: place file\r\n      copy:\r\n        dest: /tmp/test\r\n        content: |\r\n          first line\r\n          replace\r\n          third line\r\n\r\n    - name: replace line\r\n      lineinfile:\r\n        path: /tmp/test\r\n        regexp: replace\r\n        line: REPLACED\r\n      with_sequence: start=0  end=4\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- What did you expect to happen when running the steps above? -->\r\nFirst iteration `changed`, subsequent iterations `ok`\r\n```\r\nfirst line\r\nREPLACED\r\nthird line\r\n```\r\n##### ACTUAL RESULTS\r\n<!--- What actually happened? If possible run with extra verbosity (-vvvv) -->\r\nFirst iteration does correct replace, subsequent iterations add new line to the end of the file.\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\nfirst line\r\nREPLACED\r\nthird line\r\nREPLACED\r\nREPLACED\r\nREPLACED\r\nREPLACED\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34690/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "JonTheNiceGuy": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34687", "title": "Unable to use tasksel-style syntax with ansible's apt module.", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\napt\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.2.0\r\n  config file = None\r\n  configured module search path = [u'/home/spriggsj/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  pythonversion = 2.7.12 (default, Nov 20 2017, 18:23:56) [GCC 5.4.0 20160609]\r\n```\r\n\r\n##### CONFIGURATION\r\n\r\n##### OS / ENVIRONMENT\r\nVagrant, using vm.box = \"ubuntu/xenial64\" and the stanza:\r\n```\r\n  config.vm.provision :ansible_local do |ansible|\r\n      ansible.playbook       = \"ansible_software.yml\"\r\n      ansible.install_mode   = \"pip\"\r\n      ansible.inventory_path = \"inventory\"\r\n    end\r\n```\r\n(Based on this: https://github.com/E-and-CS/K5-Ansible-Openstack-Development-Machine)\r\n\r\n##### SUMMARY\r\nThis ansible playbook is designed to take a commonly available Ubuntu/Xenial64 machine from ubuntu-server-16.04 to kubuntu-desktop-16.04 by installing, via apt [\"kubuntu-desktop^\"](https://github.com/E-and-CS/K5-Ansible-Openstack-Development-Machine/blob/master/ansible_software.yml#L32). This special package name [*should* effectively perform a tasksel of that action](https://shantanugoel.com/2010/10/23/apt-get-caret/) but instead I'm getting:\r\n```\r\nTASK [Install Desktop Environment] *********************************************\r\nfatal: [kubuntu]: FAILED! => {\"changed\": false, \"msg\": \"No package matching 'kubuntu-desktop^' is available\"}\r\n```\r\n\r\n##### STEPS TO REPRODUCE\r\n```yaml\r\n---\r\n- hosts: localhost\r\n  become: true\r\n  tasks:\r\n  - apt:\r\n      name: \"kubuntu-desktop^\"\r\n      state: latest\r\n```\r\n\r\n##### EXPECTED RESULTS\r\nInstallation of the tasksel activity \"kubuntu-desktop\"\r\n\r\n##### ACTUAL RESULTS\r\n<!--- What actually happened? If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\nansible-playbook 2.4.2.0\r\n  config file = None\r\n  configured module search path = [u'/home/spriggsj/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/local/bin/ansible-playbook\r\n  python version = 2.7.12 (default, Nov 20 2017, 18:23:56) [GCC 5.4.0 20160609]\r\nNo config file found; using defaults\r\nsetting up inventory plugins\r\n [WARNING]: Unable to parse /etc/ansible/hosts as an inventory source\r\n\r\n [WARNING]: No inventory was parsed, only implicit localhost is available\r\n\r\n [WARNING]: Could not match supplied host pattern, ignoring: all\r\n\r\n [WARNING]: provided hosts list is empty, only localhost is available\r\n\r\nLoading callback plugin default of type stdout, v2.0 from /usr/local/lib/python2.7/dist-packages/ansible/plugins/callback/__init__.pyc\r\n\r\nPLAYBOOK: tasksel.yml **********************************************************\r\n1 plays in tasksel.yml\r\n\r\nPLAY [localhost] ***************************************************************\r\n\r\nTASK [Gathering Facts] *********************************************************\r\nUsing module file /usr/local/lib/python2.7/dist-packages/ansible/modules/system/setup.py\r\n<127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: spriggsj\r\n<127.0.0.1> EXEC /bin/sh -c 'echo ~ && sleep 0'\r\n<127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /home/spriggsj/.ansible/tmp/ansible-tmp-1515576122.12-204412308932026 `\" && echo ansible-tmp-1515576122.12-204412308932026=\"` echo /home/spriggsj/.ansible/tmp/ansible-tmp-1515576122.12-204412308932026 `\" ) && sleep 0'\r\n<127.0.0.1> PUT /tmp/tmp1dYgSQ TO /home/spriggsj/.ansible/tmp/ansible-tmp-1515576122.12-204412308932026/setup.py\r\n<127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/spriggsj/.ansible/tmp/ansible-tmp-1515576122.12-204412308932026/ /home/spriggsj/.ansible/tmp/ansible-tmp-1515576122.12-204412308932026/setup.py && sleep 0'\r\n<127.0.0.1> EXEC /bin/sh -c 'sudo -H -S -n -u root /bin/sh -c '\"'\"'echo BECOME-SUCCESS-efbkxnasancymsajrvjhmkuhztysopce; /usr/bin/python /home/spriggsj/.ansible/tmp/ansible-tmp-1515576122.12-204412308932026/setup.py; rm -rf \"/home/spriggsj/.ansible/tmp/ansible-tmp-1515576122.12-204412308932026/\" > /dev/null 2>&1'\"'\"' && sleep 0'\r\nok: [localhost]\r\nMETA: ran handlers\r\n\r\nTASK [apt] *********************************************************************\r\ntask path: /home/spriggsj/tasksel.yml:5\r\nUsing module file /usr/local/lib/python2.7/dist-packages/ansible/modules/packaging/os/apt.py\r\n<127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: spriggsj\r\n<127.0.0.1> EXEC /bin/sh -c 'echo ~ && sleep 0'\r\n<127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /home/spriggsj/.ansible/tmp/ansible-tmp-1515576122.75-203918083574394 `\" && echo ansible-tmp-1515576122.75-203918083574394=\"` echo /home/spriggsj/.ansible/tmp/ansible-tmp-1515576122.75-203918083574394 `\" ) && sleep 0'\r\n<127.0.0.1> PUT /tmp/tmpOMqOMg TO /home/spriggsj/.ansible/tmp/ansible-tmp-1515576122.75-203918083574394/apt.py\r\n<127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/spriggsj/.ansible/tmp/ansible-tmp-1515576122.75-203918083574394/ /home/spriggsj/.ansible/tmp/ansible-tmp-1515576122.75-203918083574394/apt.py && sleep 0'\r\n<127.0.0.1> EXEC /bin/sh -c 'sudo -H -S -n -u root /bin/sh -c '\"'\"'echo BECOME-SUCCESS-yflaauxuwkmmyyrnqbnumfkbsqsijstc; /usr/bin/python /home/spriggsj/.ansible/tmp/ansible-tmp-1515576122.75-203918083574394/apt.py; rm -rf \"/home/spriggsj/.ansible/tmp/ansible-tmp-1515576122.75-203918083574394/\" > /dev/null 2>&1'\"'\"' && sleep 0'\r\nThe full traceback is:\r\n  File \"/tmp/ansible_tOdrGY/ansible_module_apt.py\", line 333, in package_status\r\n    pkg = cache[pkgname]\r\n  File \"/usr/lib/python2.7/dist-packages/apt/cache.py\", line 200, in __getitem__\r\n    raise KeyError('The cache has no package named %r' % key)\r\nfatal: [localhost]: FAILED! => {\r\n    \"changed\": false, \r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"allow_unauthenticated\": false, \r\n            \"autoclean\": false, \r\n            \"autoremove\": false, \r\n            \"cache_valid_time\": 0, \r\n            \"deb\": null, \r\n            \"default_release\": null, \r\n            \"dpkg_options\": \"force-confdef,force-confold\", \r\n            \"force\": false, \r\n            \"force_apt_get\": false, \r\n            \"install_recommends\": null, \r\n            \"name\": \"kubuntu-desktop^\", \r\n            \"only_upgrade\": false, \r\n            \"package\": [\r\n                \"kubuntu-desktop^\"\r\n            ], \r\n            \"purge\": false, \r\n            \"state\": \"latest\", \r\n            \"update_cache\": null, \r\n            \"upgrade\": null\r\n        }\r\n    }, \r\n    \"msg\": \"No package matching 'kubuntu-desktop^' is available\"\r\n}\r\n\tto retry, use: --limit @/home/spriggsj/tasksel.retry\r\n\r\nPLAY RECAP *********************************************************************\r\nlocalhost                  : ok=1    changed=0    unreachable=0    failed=1   \r\n\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34687/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "jottschi": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34686", "title": "lvm modules - lvg and lvol-  failing on SLES11 SP1-SP3 maybe SP4", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\nlvg\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nconfig file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Aug  4 2017, 00:39:18) [GCC 4.8.5 20150623 (Red Hat 4.8.5-16)]\r\n\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\nplain Ansible on Centos7 as Ansible Workstation\r\n-->\r\n\r\n##### OS / ENVIRONMENT\r\n<!---\r\n\"N/A\"\r\n-->\r\n\r\n##### SUMMARY\r\nWhen creating a VG and a LV inside in this it disappears after rebooting. On SLES 11.\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nreboot\r\nthe filesystem on the LV doesn't appear.\r\n-->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n---\r\n- name: Add LVM-DISKS and filesystem\r\n  hosts: ZEN-REMOTE\r\n  gather_facts: true\r\n\r\n  tasks:\r\n    - name: check for device\r\n      stat: path=/dev/mapper/vgNEW-lvNEW\r\n      register: NEWdisk\r\n\r\n    - name: rescanning for new disks\r\n      command: /usr/bin/rescan-scsi-bus.sh\r\n      when:  not NEWdisk.stat.exists\r\n\r\n    - name: create pysical Volume for zen\r\n      lvg:\r\n       vg: vgNEW\r\n       pvs: /dev/sdc\r\n       state: present\r\n      register: pvcreate.changed\r\n      when: not NEWdisk.stat.exists\r\n\r\n    - name: create ZEN LVM l-vol\r\n      lvol:\r\n       vg: vgNEW\r\n       lv: lvNEW\r\n       size: 100%FREE\r\n       state: present\r\n      when: not NEWdisk.stat.exists\r\n\r\n\r\n    - name: create XFS-Filesystem\r\n      filesystem:\r\n       fstype: xfs\r\n       dev: /dev/mapper/vgNEW-lvNEW\r\n       opts: -L newLV\r\n      ignore_errors: true\r\n      when: not NEWdisk.stat.exists\r\n\r\n    - name: Mount new device by label\r\n\t  # creates fstab entry\r\n      mount:\r\n       path: /mnt/newLV\r\n       src: LABEL=newLV\r\n       fstype: xfs\r\n       opts: noatime\r\n       state: mounted\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\nAfter running this playbook I can access the new filesystem.\r\n##### ACTUAL RESULTS\r\nAfter reboot it is not accessible.\r\n\r\nSolution: toggle in  /etc/sysconfig/lvm \r\nLVM_ACTIVATED_ON_DISCOVERED=\"disable\"\r\nto\r\nLVM_ACTIVATED_ON_DISCOVERED=\"enable\"\r\n\r\n\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34686/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "duck-rh": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34685", "title": "nmcli crashes when asked to disable a connection unless an unrelated parameter is given", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\nnmcli\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.2.0\r\n  config file = /home/duck/OSAS/community-cage-infra-ansible/ansible.cfg\r\n  configured module search path = [u'/home/duck/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/duck/.local/lib/python2.7/site-packages/ansible\r\n  executable location = /home/duck/.local/bin/ansible\r\n  python version = 2.7.14+ (default, Dec  5 2017, 15:17:02) [GCC 7.2.0]\r\n```\r\n\r\n##### CONFIGURATION\r\nnothing special\r\n\r\n##### OS / ENVIRONMENT\r\nControl node runs Debian unstable, host is CentOS 7.4.\r\n\r\n##### SUMMARY\r\nDisabling a connection fails with a crash unless the `dns4` parameter is provided (an empty list is fine).\r\n\r\n##### STEPS TO REPRODUCE\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n    - name: Disable provisioning interfaces\r\n      nmcli:\r\n        conn_name: \"{{ item }}\"\r\n        state: absent\r\n        dns4: []\r\n      with_items:\r\n        - eth1\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\nConnection removed.\r\n\r\n##### ACTUAL RESULTS\r\n\r\n```\r\nfailed: [stuff.example.com] (item=eth1) => {\"changed\": false, \"item\": \"eth1\", \"module_stderr\": \"/tmp/ansible_i1T4vC/ansible_module_nmcli.py:493: PyGIWarning: NetworkManager was imported without specifying a version first. Use gi.require_version('NetworkManager', '1.0') before import to ensure that the right version gets loaded.\\n  from gi.repository import NetworkManager, NMClient\\n/tmp/ansible_i1T4vC/ansible_module_nmcli.py:493: PyGIWarning: NMClient was imported without specifying a version first. Use gi.require_version('NMClient', '1.0') before import to ensure that the right version gets loaded.\\n  from gi.repository import NetworkManager, NMClient\\nTraceback (most recent call last):\\n  File \\\"/tmp/ansible_i1T4vC/ansible_module_nmcli.py\\\", line 1190, in <module>\\n    main()\\n  File \\\"/tmp/ansible_i1T4vC/ansible_module_nmcli.py\\\", line 1134, in main\\n    nmcli=Nmcli(module)\\n  File \\\"/tmp/ansible_i1T4vC/ansible_module_nmcli.py\\\", line 559, in __init__\\n    self.dns4=' '.join(module.params['dns4'])\\nTypeError\\n\", \"module_stdout\": \"\", \"msg\": \"MODULE FAILURE\", \"rc\": 1}\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34685/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "Chiggins": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34675", "title": "Add option to win_domain to include management tools during install", "body": "##### ISSUE TYPE\r\n - Feature Idea\r\n\r\n##### COMPONENT NAME\r\nwin_domain\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/chiggins/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.13 (default, Dec 21 2016, 07:16:46) [GCC 6.2.1 20160830]\r\n```\r\n\r\n##### CONFIGURATION\r\n```\r\nNot applicable \r\n```\r\n\r\n##### OS / ENVIRONMENT\r\nArch Linux\r\n\r\n##### SUMMARY\r\nWhen creating a new Active Directory domain, it is more often than not useful to have the management tools installed on the domain controller. I'm proposing adding an option to the `win_domain` module that would include installation of the AD DS management tools when installing the AD DS Windows feature. Documentation can be found [here](https://docs.microsoft.com/en-us/windows-server/identity/ad-ds/deploy/install-active-directory-domain-services--level-100-).\r\n\r\n##### STEPS TO REPRODUCE\r\nIdeally, before [installing the Windows feature](https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/windows/win_domain.ps1#L33), a check can be done on the `include_management_tools` options. If it's yes, tack on `-IncludeManagementTools` to include the tools.\r\n\r\n```yaml\r\nwin_domain:\r\n    dns_domain_name: lab.local\r\n    safe_mode_password: Password123!\r\n    include_management_tools: yes\r\n```\r\n\r\n##### EXPECTED RESULTS\r\nThe AD DS management tools, such as the Active Directory Administration Center, will be installed.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34675/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "johnboy2": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34665", "title": "Errors can be wrongly replaced on dynamically imported static include", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\ninclude_tasks\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.12 (default, Nov 20 2017, 18:23:56) [GCC 5.4.0 20160609]\r\n```\r\n\r\n##### CONFIGURATION\r\n```\r\nANSIBLE_PIPELINING(/mnt/speedyg/johnn/Documents/EclipseWS/cloud-network/ansible.cfg) = True\r\nANSIBLE_SSH_ARGS(/mnt/speedyg/johnn/Documents/EclipseWS/cloud-network/ansible.cfg) = -o ControlMaster=auto -o ControlPersist=300s -o UserKnownHostsFile=./ssh_known_hosts\r\nDEFAULT_BECOME(/mnt/speedyg/johnn/Documents/EclipseWS/cloud-network/ansible.cfg) = True\r\nDEFAULT_LOG_PATH(/mnt/speedyg/johnn/Documents/EclipseWS/cloud-network/ansible.cfg) = /mnt/speedyg/johnn/Documents/EclipseWS/cloud-network/ansible.log\r\nDEFAULT_REMOTE_USER(/mnt/speedyg/johnn/Documents/EclipseWS/cloud-network/ansible.cfg) = automation\r\nDEFAULT_ROLES_PATH(/mnt/speedyg/johnn/Documents/EclipseWS/cloud-network/ansible.cfg) = [u'/mnt/speedyg/johnn/Documents/EclipseWS/cloud-network/roles']\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\nManagement node: Ubuntu 16.04\r\nRemote node: Debian 9\r\n\r\n##### SUMMARY\r\nUntrue/incorrect error message shown when a dynamically-determined dynamic include contains an embedded reference to an unknown file.\r\n\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\ntest.yml:\r\n```yaml\r\n- hosts: all\r\n  tasks:\r\n  - debug: var=ansible_system\r\n  - include_tasks: '{{ ansible_system }}.yml'\r\n```\r\n\r\nLinux.yml:\r\n```yaml\r\n- import_tasks: a_file_that_does_not_exist.yml\r\n```\r\n\r\nExecute command:\r\n```\r\nansible-playbook -l \"pick_an_inventory_host\" test.yml\r\n```\r\n\r\n##### EXPECTED RESULTS\r\nThe debug task should execute as expected, showing the remote system's platform (expected in this case to be \"Linux\").\r\n\r\nFor the \"include_tasks\" task, it should result in an error along the lines of:\r\n```\r\nFAILED! => {\"reason\": \"Unable to retrieve file contents\\nCould not find or access '...'\"}\r\n```\r\n(which is what you get with a straight-up static include of a missing file)\r\n\r\n##### ACTUAL RESULTS\r\nDebug task executes as expected (which also proves that ```ansible_system``` is defined).\r\n\r\nThe \"import_tasks\" task fails, as expected, but does so with an entirely incorrect error message:\r\n```\r\nFAILED! => {\"reason\": \"'ansible_system' is undefined\"}\r\n```\r\n\r\nAnsible thus **hides** the actual fault in this case behind a completely false error.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34665/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "mavink78": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34641", "title": "ec2_vpc_net tries to call DescribeVpcClassicLink in regions where EC2 classic isn't available", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\nec2_vpc_net\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0\r\n  config file = /Users/vink/.ansible.cfg\r\n  configured module search path = [u'/Users/vink/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Library/Python/2.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.10 (default, Oct 23 2015, 19:19:21) [GCC 4.2.1 Compatible Apple LLVM 7.0.0 (clang-700.0.59.5)]\r\n```\r\n\r\n##### CONFIGURATION\r\nNo changes from defaults\r\n\r\n##### OS / ENVIRONMENT\r\nN/A\r\n\r\n##### SUMMARY\r\nThe ec2_vpc_net module calls the DescribeVpcClassicLink API after creating a new VPC. In some regions Classic mode was never available, and as such the API call fails with \"The functionality you requested is not available in this region.\"\r\n\r\n##### STEPS TO REPRODUCE\r\nCreate a playbook:\r\n\r\n```\r\n- hosts: localhost\r\n  connection: local\r\n  gather_facts: false\r\n\r\n  tasks:\r\n  - name: Create VPC in Frankfurt region\r\n    ec2_vpc_net:\r\n      name: Test\r\n      cidr_block: 10.0.0.0/16\r\n      region: eu-central-1\r\n      state: present\r\n```\r\nRun this playbook. \r\n\r\n##### EXPECTED RESULTS\r\nA new VPC named Test is created in the eu-central-1 region with CIDR block 10.0.0.0/16\r\n\r\n##### ACTUAL RESULTS\r\nAn unnamed VPC was created with the correct CIDR subnet. After that ansible fails with an error. \r\n\r\n```\r\nPLAY [localhost] ********************************************************************************************************************\r\n\r\nTASK [Create VPC in Frankfurt region] ***********************************************************************************************\r\nAn exception occurred during task execution. To see the full traceback, use -vvv. The error was: ClientError: An error occurred (UnsupportedOperation) when calling the DescribeVpcClassicLink operation: The functionality you requested is not available in this region.\r\nfatal: [localhost]: FAILED! => {\"changed\": false, \"error\": {\"code\": \"UnsupportedOperation\", \"message\": \"The functionality you requested is not available in this region.\"}, \"msg\": \"Failed to describe VPCs: An error occurred (UnsupportedOperation) when calling the DescribeVpcClassicLink operation: The functionality you requested is not available in this region.\", \"response_metadata\": {\"http_headers\": {\"connection\": \"close\", \"date\": \"Tue, 09 Jan 2018 13:19:09 GMT\", \"server\": \"AmazonEC2\", \"transfer-encoding\": \"chunked\"}, \"http_status_code\": 400, \"request_id\": \"32a8424e-d23e-478e-8c69-fb37d3723960\", \"retry_attempts\": 0}}\r\n\tto retry, use: --limit @/Users/vink/ansible/test.retry\r\n\r\nPLAY RECAP **************************************************************************************************************************\r\nlocalhost                  : ok=0    changed=0    unreachable=0    failed=1   \r\n```\r\n\r\n  ", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34641/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "m8ram": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34632", "title": "Documentation: intro getting started: assumes user is root but does not mention which account(s) to use", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Documentation Report\r\n\r\n##### COMPONENT NAME\r\n<!---\r\nName of the module, plugin, task or feature\r\nDo not include extra details here, e.g. \"vyos_command\" not \"the network module vyos_command\" or the full path\r\n-->\r\nintro_getting_started.rst\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.1.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/bram.mertens/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Oct 11 2015, 17:47:16) [GCC 4.8.3 20140911 (Red Hat 4.8.3-9)]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\nIf using Ansible 2.4 or above, paste the results of \"ansible-config dump --only-changed\"\r\nOtherwise, mention any settings you have changed/added/removed in ansible.cfg\r\n(or using the ANSIBLE_* environment variables).\r\n-->\r\nN/A\r\n\r\n##### OS / ENVIRONMENT\r\n<!---\r\nMention the OS you are running Ansible from, and the OS you are\r\nmanaging, or say \"N/A\" for anything that is not platform-specific.\r\nAlso mention the specific version of what you are trying to control,\r\ne.g. if this is a network bug the version of firmware on the network device.\r\n-->\r\nany Linux OS\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly -->\r\n\r\n\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\nFollow the section \"Your first commands\" in the intro getting started documentation.\r\n\r\n##### EXPECTED RESULTS\r\n<!--- What did you expect to happen when running the steps above? -->\r\nThe first steps documentation should include information on which type of user account can be used and what the limitations are.\r\nIt does not need to go into detail but should link to relevant information. E.g. http://docs.ansible.com/ansible/latest/playbooks_intro.html#hosts-and-users and perhaps others.\r\n\r\nFor first tries a setup that runs as a regular user is more suitable.\r\n\r\n##### ACTUAL RESULTS\r\n<!--- What actually happened? If possible run with extra verbosity (-vvvv) -->\r\nThe section \"Your first commands\" instructs the user to edit a system wide configuration file (``/etc/ansible/hosts``) which requires administrator (root) privileges.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34632/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "alvaroaleman": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34628", "title": "consul.py: state=absent is broken", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n\r\n##### COMPONENT NAME\r\n\r\n`consul`\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.14 (default, Dec 11 2017, 14:52:53) [GCC 7.2.1 20170915 (Red Hat 7.2.1-2)]\r\n\r\n```\r\n\r\n##### CONFIGURATION\r\n\r\nNone\r\n\r\n\r\n##### SUMMARY\r\n\r\nDeregistration of services does not work, because the underlying `consul-python` modules uses the wrong request type (GET instead of PUT).\r\nUpstream PR: https://github.com/cablehead/python-consul/pull/174\r\n\r\n##### STEPS TO REPRODUCE\r\n\r\n```yaml\r\nansible -m consul -a 'state=absent service_name=myservice' all\r\n```\r\n\r\n\r\n##### EXPECTED RESULTS\r\n\r\nService removed\r\n\r\n##### ACTUAL RESULTS\r\nService present\r\n\r\n\r\n#### Workaround based on @bobh66 suggestion:\r\n\r\nCopy `consul.py` to `{{ playbook_dir }}/library` and apply the following patch:\r\n\r\n```\r\n@@ -343,12 +343,19 @@ def remove_service(module, service_id):\r\n     module.exit_json(changed=False, id=service_id)\r\n \r\n \r\n+class MyAgentService(consul.Consul.Agent.Service):\r\n+    def deregister(self, service_id):\r\n+        return self.agent.http.put(consul.base.CB.bool(), '/v1/agent/service/deregister/%s' % service_id)\r\n+\r\n+\r\n def get_consul_api(module, token=None):\r\n-    return consul.Consul(host=module.params.get('host'),\r\n+    consulClient = consul.Consul(host=module.params.get('host'),\r\n                          port=module.params.get('port'),\r\n                          scheme=module.params.get('scheme'),\r\n                          verify=module.params.get('validate_certs'),\r\n                          token=module.params.get('token'))\r\n+    consulClient.agent.service = MyAgentService(consulClient)\r\n+    return consulClient\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34628/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34847", "title": "Fix consul module service deregistration", "body": "Upstream pr in the consul-python library:\r\nhttps://github.com/cablehead/python-consul/pull/174\r\n\r\nThis is based on work from https://github.com/bobh\r\n\r\nFixes ansible/ansible#34628\r\n\r\n##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n\r\n`consul.py`\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\ndevel\r\n```", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "richlv": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34594", "title": "\"unarchive\" module should support relative path in \"creates\"", "body": "##### ISSUE TYPE\r\n - Feature Idea\r\n\r\n##### COMPONENT NAME\r\nunarchive\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.3.0.0\r\n```\r\n\r\n##### CONFIGURATION\r\n\r\n##### OS / ENVIRONMENT\r\nN/A\r\n\r\n##### SUMMARY\r\n\"unarchive\" module should support relative path in \"creates\"\r\n\r\n##### STEPS TO REPRODUCE\r\nuse the \"unarchive\" module and set \"creates\" as a relative path to \"dest\"\r\n\r\n##### EXPECTED RESULTS\r\n\"creates\" picks up the relative path\r\n\r\n##### ACTUAL RESULTS\r\nfile was not found, requiring the use of absolute path", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34594/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/e04e24010f61af09e430a71e1c30703621f5204b", "message": "Update unarchive.py (#34596)\n\nclarify that absolute path is to be used for \"creates\", explicitly mention that it supports files and directories"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "michaelgugino": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34591", "title": "Inconsistent when conditional for string \"false\" boolean", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\nwhen / when not conditional\r\n\r\n##### ANSIBLE VERSION\r\nFrom devel branch:\r\n```\r\nansible 2.5.0 (devel 34206a0402) last updated 2018/01/08 13:39:51 (GMT -400)\r\n  config file = None\r\n  configured module search path = ['/home/myuser/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/myuser/git/ansible/lib/ansible\r\n  executable location = /home/myuser/git/ansible/venv/bin/ansible\r\n  python version = 3.6.2 (default, Oct  2 2017, 16:51:32) [GCC 7.2.1 20170915 (Red Hat 7.2.1-2)]\r\n```\r\n\r\nAlso versions 2.4.1 and 2.4.2 from pip, and 2.4.1 via RPM on RHEL.\r\n\r\n##### CONFIGURATION\r\n```sh\r\n$ ansible-config dump --only-changed\r\n$ (no output)\r\n```\r\n##### OS / ENVIRONMENT\r\nFedora 26, RHEL 7\r\n\r\n##### SUMMARY\r\nWhen a user supplies a variable that should be a boolean value as the string value 'false', we witness inconsistent behavior in the 'when' and 'when not' condition.  For example, if x=\"false\", then both \"when: not x\" and \"when: x\" resolve to false.\r\n\r\n##### STEPS TO REPRODUCE\r\nThis was originally triggered by a value provided in an ini formatted inventory, (eg, x=false) which equates to a string, but the same behavior can be replicated with \r\n```\r\n---\r\n- hosts: localhost\r\n  connection: local\r\n  vars:\r\n    x: \"false\"\r\n  tasks:\r\n    - set_fact:\r\n        other_var: \"x was true\"\r\n      when: x\r\n    - set_fact:\r\n        other_var: \"x was false\"\r\n      when: not x\r\n    - debug: var=other_var\r\n```\r\n\r\n##### EXPECTED RESULTS\r\n```\r\nTASK [debug] \r\nok: [localhost] => {\r\n    \"attempts\": 1,\r\n    \"other_var\": \"x was false\"\r\n}\r\n```\r\n\r\nIt would be fair if this resolved to 'x was true' as well, because a defined string (other than one that shares a name with a boolean) will resolve to True normally.  However, I feel both 'x' and 'not x' cannot be false for the same value.\r\n\r\n##### ACTUAL RESULTS\r\n```\r\nTASK [set_fact] \r\nskipping: [localhost]\r\n\r\nTASK [set_fact] \r\nskipping: [localhost]\r\n\r\nTASK [debug] \r\nok: [localhost] => {\r\n    \"attempts\": 1,\r\n    \"other_var\": \"VARIABLE IS NOT DEFINED!\"\r\n}\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34591/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "JamesNesta": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34587", "title": "aci: Ability to assign a static port to an EPG is missing", "body": "##### ISSUE TYPE\r\n - Feature Idea\r\n\r\n##### COMPONENT NAME\r\n- ACI module (for Cisco APIC / Cisco Nexus, the software-defined-networking switches)\r\n- lib/ansible/module_utils/network/aci/aci.py\r\n- lib/ansible/modules/network/aci/aci_epg_to_domain.py\r\n\r\n##### SUMMARY\r\nThe Cisco ACI module has recently been integrated into the core Ansible repository. This is fantastic! However, it does not seem to be currently possible to add a static port to an EPG (end-point group). This is a very common task - can this be added as well to core?\r\n\r\nHere is a screenshot of me doing this manually in the Cisco APIC web GUI by right clicking a test EPG.\r\n\r\n![image](https://user-images.githubusercontent.com/35046300/34683720-e5c8ec70-f470-11e7-8820-5a6043c23344.png)\r\n  \r\n  ", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34587/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "chromium58": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34569", "title": "Archive module does not adds empty(zero-size) files to dest archive", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\narchive\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\nIf using Ansible 2.4 or above, paste the results of \"ansible-config dump --only-changed\"\r\nOtherwise, mention any settings you have changed/added/removed in ansible.cfg\r\n(or using the ANSIBLE_* environment variables).\r\n-->\r\n\r\n##### OS / ENVIRONMENT\r\n<!---\r\nMention the OS you are running Ansible from, and the OS you are\r\nmanaging, or say \"N/A\" for anything that is not platform-specific.\r\nAlso mention the specific version of what you are trying to control,\r\ne.g. if this is a network bug the version of firmware on the network device.\r\n-->\r\nN/A\r\n##### SUMMARY\r\nArchive module does not add empty(zero-size) files to archive. I think it is caused by this condition https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/files/archive.py#L319\r\n\r\nIn this condition we are comparing file that we adding to archive with just created archive. In case of empty file it should not work. Why do we need this condition?\r\n\r\n##### STEPS TO REPRODUCE\r\n1. Create directory and few empty files in it\r\n2. Fill files except one with some data\r\n3. Apply playbook to this directory\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```\r\n$ ls -la ~/test-archive-bug/\r\ntotal 12\r\ndrwxrwxrwx 0 user user 4096 Jan  8 13:20 .\r\ndrwxr-xr-x 0 user user 4096 Jan  8 13:16 ..\r\n-rw-rw-rw- 1 user user    2 Jan  8 13:12 1.txt\r\n-rw-rw-rw- 1 user user    2 Jan  8 13:12 2.txt\r\n-rw-rw-rw- 1 user user    0 Jan  8 13:12 3.txt\r\n```\r\n```\r\n$ cat test.yml\r\n```\r\n```yaml\r\n- hosts: all\r\n  tasks:\r\n    - name: Test archive\r\n      archive:\r\n        path: /home/user/test-archive-bug\r\n        dest: /home/user/test.tar.gz\r\n        format: gz\r\n```\r\n```\r\n$ ansible-playbook test.yml -c local -i localhost,\r\n```\r\n4. See that file with zero-size was not added to archive\r\n\r\n##### EXPECTED RESULTS\r\nThat all files including empty file will be added to archive\r\n\r\n##### ACTUAL RESULTS\r\nEmpty(zero-size) file was not added to archive\r\n\r\n\r\n  ", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34569/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "danowar2k": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34567", "title": "BUG: Pear module reports \"changed\" even if PHP extension was already installed", "body": "##### ISSUE TYPE\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\npear (http://docs.ansible.com/ansible/latest/pear_module.html)\r\n\r\n##### ANSIBLE VERSION\r\nansible 2.4.2.0\r\nconfig file = /home/vagrant/playbooks/playbook-moodle/ansible.cfg\r\nconfigured module search path = [u'/home/vagrant/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\nansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\nexecutable location = /usr/bin/ansible\r\npython version = 2.7.12 (default, Nov 19 2016, 06:48:10) [GCC 5.4.0 20160609]\r\n\r\n##### CONFIGURATION\r\nANSIBLE_PIPELINING(/home/vagrant/playbooks/playbook-moodle/ansible.cfg) = True\r\nCOLOR_VERBOSE(/home/vagrant/playbooks/playbook-moodle/ansible.cfg) = bright blue\r\nDEFAULT_BECOME_METHOD(/home/vagrant/playbooks/playbook-moodle/ansible.cfg) = sudo\r\nDEFAULT_HOST_LIST(/home/vagrant/playbooks/playbook-moodle/ansible.cfg) = [u'/home/vagrant/playbooks/playbook-moodle/inventory/debug_hosts.ini']\r\nDEFAULT_STDOUT_CALLBACK(/home/vagrant/playbooks/playbook-moodle/ansible.cfg) = debug\r\nDEFAULT_TIMEOUT(/home/vagrant/playbooks/playbook-moodle/ansible.cfg) = 30\r\nDIFF_ALWAYS(/home/vagrant/playbooks/playbook-moodle/ansible.cfg) = True\r\nPERSISTENT_CONNECT_TIMEOUT(/home/vagrant/playbooks/playbook-moodle/ansible.cfg) = 60\r\n\r\n##### OS / ENVIRONMENT\r\nAnsible CM: \r\nUbuntu 17.04\r\nLinux version 4.4.0-87-generic (buildd@lcy01-31) (gcc version 5.4.0 20160609 (Ubuntu 5.4.0-6ubuntu1~16.04.4) ) #110-Ubuntu SMP Tue Jul 18 12:55:35 UTC 2017 (Ubuntu 4.4.0-87.110-generic 4.4.73)\r\n\r\nTarget Host:\r\nSolaris 11.3\r\nSunOS s11-pb-test 5.11 11.3 i86pc i386 i86pc\r\n\r\nManaging:\r\nPHP 5.6.31 64-Bit self-built\r\nConfiguration:\r\n```\r\n# Ansible managed\r\nManaged Tools:\r\n  - php 5.6.31\r\n    Checksum: sha256:6687ed2f09150b2ad6b3780ff89715891f83a9c331e69c90241ef699dec4c43f\r\n(Solaris only) Output of crle:\r\nDefault configuration file (/var/ld/ld.config) not found\r\n  Platform:     32-bit LSB 80386\r\n  Default Library Path (ELF):   /lib:/usr/lib  (system default)\r\n  Trusted Directories (ELF):    /lib/secure:/usr/lib/secure  (system default)\r\nTools incorporated in build process:\r\n  - httpd: /moodle/tools/apache2/2.4.27\r\n  - Postgres: /moodle/tools/postgres/9.5.9\r\n  - OpenLDAP: /moodle/tools/openldap/2.4.45\r\n  - curl: /moodle/tools/curl/7.55.1\r\nAdditional Build environment: CFLAGS: '-fPIC  '\r\nCPPFLAGS: ' '\r\nLDFLAGS: '   '\r\nNM: /usr/bin/gnm\r\nPKG_CONFIG_PATH: ''\r\nhttp_proxy: ''\r\n\r\nConfigure: bash ./configure --prefix=/moodle/tools/php/5.6.31 --with-config-file-path=/moodle/configuration/php --with-config-file-scan-dir=/moodle/configuration/php/additional --w\r\nith-config-file--enable-opcache --with-apxs2=/moodle/tools/apache2/2.4.27/bin/apxs --without-sqlite3 --without-pdo-sqlite --with-pgsql=/moodle/tools/postgres/9.5.9 --with-pdo-pgsql\r\n=/moodle/tools/postgres/9.5.9 --enable-mbstring --enable-soap --enable-zip --with-gd --with-jpeg-dir=/moodle/tools/php/5.6.31/jpeg --with-curl=/moodle/tools/curl/7.55.1 --with-xmlr\r\npc --with-zlib --with-mcrypt --with-ldap=/moodle/tools/openldap/2.4.45 --with-iconv --with-openssl\r\nClean: /usr/bin/gmake clean\r\nBuild: /usr/bin/gmake\r\nInstall: /usr/bin/gmake install\r\nInstallation folder: /moodle/tools/php/5.6.31\r\n```\r\n##### SUMMARY\r\nManaging PHP + Extensions via Ansible. My Tasks to install xdebug and other extensions (Memcache e.g.) report changed every run.\r\n##### STEPS TO REPRODUCE\r\n```yaml\r\n---\r\n- name: Install xdebug if requested (is always changed)\r\n  become: true\r\n  pear:\r\n    executable: \"{{ build_php_install_dir }}/bin/pecl\"\r\n    name: \"xdebug\"\r\n    state: latest\r\n  environment: \"{{ build_php_build_environment }}\"\r\n  when: build_php_install_xdebug\r\n\r\n- name: Install requested PHP packages (is always changed)\r\n  become: true\r\n  pear:\r\n    executable: \"{{ build_php_install_dir }}/bin/pecl\"\r\n    name: \"{{ item }}\"\r\n    state: latest\r\n  environment: \"{{ build_php_build_environment }}\"\r\n  with_items: \"{{ build_php_additional_packages }}\"\r\n...\r\n```\r\n##### EXPECTED RESULTS\r\nReport \"changed\" the first time. Report \"OK\" in subsequent runs.\r\n\r\n##### ACTUAL RESULTS\r\n<!--- What actually happened? If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\nTASK [role-build_php : Install xdebug if requested (is always changed)] ************************************************************************************************\r\n\r\ntask path: /home/vagrant/playbooks/playbook-moodle/playbooks/roles/role-build_php/tasks/pear-packages.yml:2\r\nUsing module file /usr/lib/python2.7/dist-packages/ansible/modules/packaging/language/pear.py\r\n<192.168.123.11> ESTABLISH SSH CONNECTION FOR USER: None\r\n<192.168.123.11> SSH: EXEC ssh -vvv -C -o ControlMaster=auto -o ControlPersist=60s -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi\r\n-keyex,hostbased,publickey -o PasswordAuthentication=no -o ConnectTimeout=30 -o ControlPath=/home/vagrant/.ansible/cp/5a871d16bf 192.168.123.11 '/bin/sh -c '\"'\"'sudo -H\r\n -S -n -u root /bin/sh -c '\"'\"'\"'\"'\"'\"'\"'\"'echo BECOME-SUCCESS-potvadpuaiuddtwopyqimdcxwueirqhh; CPPFLAGS='\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"' '\"'\"'\"'\"\r\n'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"' NM=/usr/bin/gnm LDFLAGS='\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'   '\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"\r\n'\"'\"'\"'\"'\"' PKG_CONFIG_PATH='\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"''\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"' CFLAGS='\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"\r\n'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'-fPIC  '\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"' http_proxy='\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"''\"'\"'\"'\"'\"'\"'\"'\"\r\n'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"' /usr/bin/python'\"'\"'\"'\"'\"'\"'\"'\"' && sleep 0'\"'\"''\r\n<192.168.123.11> (0, '\\n{\"msg\": \"installed 1 package(s)\", \"invocation\": {\"module_args\": {\"executable\": \"/moodle/tools/php/5.6.31/bin/pecl\", \"state\": \"latest\", \"name\": \"\r\nxdebug\"}}, \"changed\": true}\\n', 'OpenSSH_7.2p2 Ubuntu-4ubuntu2.2, OpenSSL 1.0.2g  1 Mar 2016\\r\\ndebug1: Reading configuration data /home/vagrant/.ssh/config\\r\\ndebug1:\r\nReading configuration data /etc/ssh/ssh_config\\r\\ndebug1: /etc/ssh/ssh_config line 19: Applying options for *\\r\\ndebug1: auto-mux: Trying existing master\\r\\ndebug2: fd\r\n3 setting O_NONBLOCK\\r\\ndebug2: mux_client_hello_exchange: master version 4\\r\\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\\r\\ndebug3: mux_client\r\n_request_session: entering\\r\\ndebug3: mux_client_request_alive: entering\\r\\ndebug3: mux_client_request_alive: done pid = 7167\\r\\ndebug3: mux_client_request_session: ses\r\nsion request sent\\r\\ndebug1: mux_client_request_session: master session id: 2\\r\\ndebug3: mux_client_read_packet: read header failed: Broken pipe\\r\\ndebug2: Received exi\r\nt status from master 0\\r\\n')\r\nchanged: [pb_test] => {\r\n    \"changed\": true,\r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"executable\": \"/moodle/tools/php/5.6.31/bin/pecl\",\r\n            \"name\": \"xdebug\",\r\n            \"state\": \"latest\"\r\n        }\r\n    }\r\n}\r\n\r\nMSG:\r\n\r\ninstalled 1 package(s)\r\n\r\n\r\nTASK [role-build_php : Install requested PHP packages (is always changed)] *********************************************************************************************\r\n\r\ntask path: /home/vagrant/playbooks/playbook-moodle/playbooks/roles/role-build_php/tasks/pear-packages.yml:11\r\nUsing module file /usr/lib/python2.7/dist-packages/ansible/modules/packaging/language/pear.py\r\n<192.168.123.11> ESTABLISH SSH CONNECTION FOR USER: None\r\n<192.168.123.11> SSH: EXEC ssh -vvv -C -o ControlMaster=auto -o ControlPersist=60s -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi\r\n-keyex,hostbased,publickey -o PasswordAuthentication=no -o ConnectTimeout=30 -o ControlPath=/home/vagrant/.ansible/cp/5a871d16bf 192.168.123.11 '/bin/sh -c '\"'\"'sudo -H\r\n -S -n -u root /bin/sh -c '\"'\"'\"'\"'\"'\"'\"'\"'echo BECOME-SUCCESS-xyqtsnxopznhygbzfjfknrlxpprwnhst; CPPFLAGS='\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"' '\"'\"'\"'\"\r\n'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"' NM=/usr/bin/gnm LDFLAGS='\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'   '\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"\r\n'\"'\"'\"'\"'\"' PKG_CONFIG_PATH='\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"''\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"' CFLAGS='\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"\r\n'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'-fPIC  '\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"' http_proxy='\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"''\"'\"'\"'\"'\"'\"'\"'\"\r\n'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"' /usr/bin/python'\"'\"'\"'\"'\"'\"'\"'\"' && sleep 0'\"'\"''\r\n<192.168.123.11> (0, '\\n{\"msg\": \"installed 1 package(s)\", \"invocation\": {\"module_args\": {\"executable\": \"/moodle/tools/php/5.6.31/bin/pecl\", \"state\": \"latest\", \"name\": \"\r\nmemcache\"}}, \"changed\": true}\\n', 'OpenSSH_7.2p2 Ubuntu-4ubuntu2.2, OpenSSL 1.0.2g  1 Mar 2016\\r\\ndebug1: Reading configuration data /home/vagrant/.ssh/config\\r\\ndebug1\r\n: Reading configuration data /etc/ssh/ssh_config\\r\\ndebug1: /etc/ssh/ssh_config line 19: Applying options for *\\r\\ndebug1: auto-mux: Trying existing master\\r\\ndebug2: f\r\nd 3 setting O_NONBLOCK\\r\\ndebug2: mux_client_hello_exchange: master version 4\\r\\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\\r\\ndebug3: mux_clie\r\nnt_request_session: entering\\r\\ndebug3: mux_client_request_alive: entering\\r\\ndebug3: mux_client_request_alive: done pid = 7167\\r\\ndebug3: mux_client_request_session: s\r\nession request sent\\r\\ndebug1: mux_client_request_session: master session id: 2\\r\\ndebug3: mux_client_read_packet: read header failed: Broken pipe\\r\\ndebug2: Received e\r\nxit status from master 0\\r\\n')\r\nchanged: [pb_test] => (item=memcache) => {\r\n    \"changed\": true,\r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"executable\": \"/moodle/tools/php/5.6.31/bin/pecl\",\r\n            \"name\": \"memcache\",\r\n            \"state\": \"latest\"\r\n        }\r\n    },\r\n    \"item\": \"memcache\"\r\n}\r\n\r\nMSG:\r\n\r\ninstalled 1 package(s)\r\n\r\nMETA: ran handlers\r\nMETA: ran handlers\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34567/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/34566", "title": "FR: Optional role dependencies / optionally execute role with task instead of at the beginning", "body": "##### ISSUE TYPE\r\n - Feature Idea\r\n\r\n##### COMPONENT NAME\r\ncore\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.2.0\r\n  config file = /home/vagrant/playbooks/playbook-moodle/ansible.cfg\r\n  configured module search path = [u'/home/vagrant/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.12 (default, Nov 19 2016, 06:48:10) [GCC 5.4.0 20160609]\r\n```\r\n\r\n##### CONFIGURATION\r\n```\r\nANSIBLE_PIPELINING(/home/vagrant/playbooks/playbook-moodle/ansible.cfg) = True\r\nCOLOR_VERBOSE(/home/vagrant/playbooks/playbook-moodle/ansible.cfg) = bright blue\r\nDEFAULT_BECOME_METHOD(/home/vagrant/playbooks/playbook-moodle/ansible.cfg) = sudo\r\nDEFAULT_HOST_LIST(/home/vagrant/playbooks/playbook-moodle/ansible.cfg) = [u'/home/vagrant/playbooks/playbook-moodle/inventory/debug_hosts.ini']\r\nDEFAULT_STDOUT_CALLBACK(/home/vagrant/playbooks/playbook-moodle/ansible.cfg) = debug\r\nDEFAULT_TIMEOUT(/home/vagrant/playbooks/playbook-moodle/ansible.cfg) = 30\r\nDIFF_ALWAYS(/home/vagrant/playbooks/playbook-moodle/ansible.cfg) = True\r\nPERSISTENT_CONNECT_TIMEOUT(/home/vagrant/playbooks/playbook-moodle/ansible.cfg) = 60\r\n```\r\n##### OS / ENVIRONMENT\r\nN/A\r\n\r\n##### SUMMARY\r\nAt the moment, an ansible role can define dependencies to other roles.\r\nThese roles are then executed before the role depending on them.\r\n\r\nIt would be nice if you could somehow mark a role as \"will be executed manually later\". This would allow optional dependencies. Then the role could decide if it needs to execute some other role based on some registered variable or something like it.\r\n\r\nOf course the role can then be called with different parameters depending on other criteria.\r\n\r\nAlso interesting: Being able to define the other role's VCS somehow in the file, so you don't have to have the dependency in the playbook. (But this will be recorded in another issue)\r\n\r\n##### STEPS TO REPRODUCE\r\n**meta/main.yml**\r\n```yaml\r\ndependencies:\r\n    - { \r\n   role: role-builder\r\n   optional: true\r\n}\r\n```\r\n##### EXPECTED RESULTS\r\nN/A (Maybe multiple templates for tickets would be a good idea?)\r\n\r\n##### ACTUAL RESULTS\r\nN/A\r\n  ", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34566/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "coaxial": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34560", "title": "virt: documentation is too succinct", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Documentation Report\r\n\r\n##### COMPONENT NAME\r\n<!---\r\nName of the module, plugin, task or feature\r\nDo not include extra details here, e.g. \"vyos_command\" not \"the network module vyos_command\" or the full path\r\n-->\r\nvirt\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nn/a\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\nIf using Ansible 2.4 or above, paste the results of \"ansible-config dump --only-changed\"\r\nOtherwise, mention any settings you have changed/added/removed in ansible.cfg\r\n(or using the ANSIBLE_* environment variables).\r\n-->\r\nn/a\r\n\r\n##### OS / ENVIRONMENT\r\n<!---\r\nMention the OS you are running Ansible from, and the OS you are\r\nmanaging, or say \"N/A\" for anything that is not platform-specific.\r\nAlso mention the specific version of what you are trying to control,\r\ne.g. if this is a network bug the version of firmware on the network device.\r\n-->\r\nall\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly -->\r\nThe documentation for the `virt` module is too succinct. For example, it took me hours to disocver that unlike it's command line equivalent, virt define/create takes literal inline xml, not the path to an xml file like `virsh {define,create}`. Or that the `autostart` argument doesn't work with every command (try setting autostart while using define for instance)\r\n\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\ncf. the virt module documentation\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- What did you expect to happen when running the steps above? -->\r\nMore detailed documentation\r\n\r\n##### ACTUAL RESULTS\r\n<!--- What actually happened? If possible run with extra verbosity (-vvvv) -->\r\nConfusion\r\n\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\n\r\n```\r\n\r\n  ", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34560/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/34559", "title": "virt: chokes on define/create", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest -->\r\n - Bug Report\r\n\r\n##### COMPONENT NAME\r\n<!---\r\nName of the module, plugin, task or feature\r\nDo not include extra details here, e.g. \"vyos_command\" not \"the network module vyos_command\" or the full path\r\n-->\r\nvirt\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.5.0 (devel f4a2b0b103) last updated 2018/01/06 20:16:02 (GMT -400)\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/coaxial/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/coaxial/code/ansible/lib/ansible\r\n  executable location = /home/coaxial/code/ansible/bin/ansible\r\n  python version = 2.7.14 (default, Sep 23 2017, 22:06:14) [GCC 7.2.0]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\nIf using Ansible 2.4 or above, paste the results of \"ansible-config dump --only-changed\"\r\nOtherwise, mention any settings you have changed/added/removed in ansible.cfg\r\n(or using the ANSIBLE_* environment variables).\r\n-->\r\n```\r\nDEFAULT_HOST_LIST(/etc/ansible/ansible.cfg) = [u'/home/coaxial/code/ansible-inventories/inventory.ini']\r\nDEFAULT_REMOTE_USER(/etc/ansible/ansible.cfg) = ansible\r\nDEFAULT_ROLES_PATH(/etc/ansible/ansible.cfg) = [u'/home/coaxial/.ansible/roles']\r\nPERSISTENT_CONNECT_TIMEOUT(/etc/ansible/ansible.cfg) = 30\r\n```\r\n\r\n##### OS / ENVIRONMENT\r\n<!---\r\nMention the OS you are running Ansible from, and the OS you are\r\nmanaging, or say \"N/A\" for anything that is not platform-specific.\r\nAlso mention the specific version of what you are trying to control,\r\ne.g. if this is a network bug the version of firmware on the network device.\r\n-->\r\nUbuntu 17.10 targetting Ubuntu 17.10 host\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly -->\r\nThe `virt` module demands a `name` argument be passed, even when using `create` or `define` actions. If none is passed, it errors saying it's required. If one is passed, and the domain doesn't exist (i.e. you want to define or create it), then it errors too saying it can't find the domain <name>. It is odd that a domain name would be required by the virt module for `create` or `define`, because `virsh {create,define}` only expects the path to an XML file. The XML file contains the domain name.\r\n\r\nI should add that running `virsh create mydomain.xml` and `virsh define mydoamin.xml` on the command line on the target machine works perfectly well.\r\n\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n    - name: Create VMs\r\n      virt:\r\n        name: mydomain\r\n        command:  define\r\n        xml: \"{{ lookup('file', '{{ mydomain.xml }}') }}\"\r\n        autostart: \"{{ item.autostart | default('true') }}\"\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- What did you expect to happen when running the steps above? -->\r\nOK\r\n\r\n##### ACTUAL RESULTS\r\n<!--- What actually happened? If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\nUsing module file /home/coaxial/code/ansible/lib/ansible/modules/cloud/misc/virt.py\r\n<192.168.1.50> ESTABLISH SSH CONNECTION FOR USER: ansible\r\n<192.168.1.50> SSH: EXEC ssh -C -o ControlMaster=auto -o ControlPersist=60s -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o User=ansible -o ConnectTimeout=10 -o ControlPath=/home/coaxial/.ansible/cp/3b9e9b102a 192.168.1.50 '/bin/sh -c '\"'\"'echo ~ && sleep 0'\"'\"''\r\n<192.168.1.50> (0, '/home/ansible\\n', '')\r\n<192.168.1.50> ESTABLISH SSH CONNECTION FOR USER: ansible\r\n<192.168.1.50> SSH: EXEC ssh -C -o ControlMaster=auto -o ControlPersist=60s -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o User=ansible -o ConnectTimeout=10 -o ControlPath=/home/coaxial/.ansible/cp/3b9e9b102a 192.168.1.50 '/bin/sh -c '\"'\"'( umask 77 && mkdir -p \"` echo /home/ansible/.ansible/tmp/ansible-tmp-1515356256.59-262590954320113 `\" && echo ansible-tmp-1515356256.59-262590954320113=\"` echo /home/ansible/.ansible/tmp/ansible-tmp-1515356256.59-262590954320113 `\" ) && sleep 0'\"'\"''\r\n<192.168.1.50> (0, 'ansible-tmp-1515356256.59-262590954320113=/home/ansible/.ansible/tmp/ansible-tmp-1515356256.59-262590954320113\\n', '')\r\n<192.168.1.50> PUT /tmp/tmp_AjIIY TO /home/ansible/.ansible/tmp/ansible-tmp-1515356256.59-262590954320113/virt.py\r\n<192.168.1.50> SSH: EXEC sftp -b - -C -o ControlMaster=auto -o ControlPersist=60s -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o User=ansible -o ConnectTimeout=10 -o ControlPath=/home/coaxial/.ansible/cp/3b9e9b102a '[192.168.1.50]'\r\n<192.168.1.50> (0, 'sftp> put /tmp/tmp_AjIIY /home/ansible/.ansible/tmp/ansible-tmp-1515356256.59-262590954320113/virt.py\\n', '')\r\n<192.168.1.50> ESTABLISH SSH CONNECTION FOR USER: ansible\r\n<192.168.1.50> SSH: EXEC ssh -C -o ControlMaster=auto -o ControlPersist=60s -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o User=ansible -o ConnectTimeout=10 -o ControlPath=/home/coaxial/.ansible/cp/3b9e9b102a 192.168.1.50 '/bin/sh -c '\"'\"'chmod u+x /home/ansible/.ansible/tmp/ansible-tmp-1515356256.59-262590954320113/ /home/ansible/.ansible/tmp/ansible-tmp-1515356256.59-262590954320113/virt.py && sleep 0'\"'\"''\r\n<192.168.1.50> (0, '', '')\r\n<192.168.1.50> ESTABLISH SSH CONNECTION FOR USER: ansible\r\n<192.168.1.50> SSH: EXEC ssh -C -o ControlMaster=auto -o ControlPersist=60s -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o User=ansible -o ConnectTimeout=10 -o ControlPath=/home/coaxial/.ansible/cp/3b9e9b102a -tt 192.168.1.50 '/bin/sh -c '\"'\"'sudo -H -S -n -u root /bin/sh -c '\"'\"'\"'\"'\"'\"'\"'\"'echo BECOME-SUCCESS-abrekzfylmrnvfhwsvjhsxllliebjixi; /usr/bin/python /home/ansible/.ansible/tmp/ansible-tmp-1515356256.59-262590954320113/virt.py; rm -rf \"/home/ansible/.ansible/tmp/ansible-tmp-1515356256.59-262590954320113/\" > /dev/null 2>&1'\"'\"'\"'\"'\"'\"'\"'\"' && sleep 0'\"'\"''\r\nEscalation succeeded\r\n<192.168.1.50> (0, 'libvirt: QEMU Driver error : Domain not found: no domain with matching name \\'pbx\\'\\r\\n\\r\\n{\"msg\": \"Domain not found: no domain with matching name \\'pbx\\'\", \"failed\": true, \"exception\": \"Traceback (most recent call last):\\\\n  File \\\\\"/tmp/ansible_P_wdlG/ansible_module_virt.py\\\\\", line 526, in main\\\\n    rc, result = core(module)\\\\n  File \\\\\"/tmp/ansible_P_wdlG/ansible_module_virt.py\\\\\", line 476, in core\\\\n    if autostart is not None and v.autostart(guest, autostart):\\\\n  File \\\\\"/tmp/ansible_P_wdlG/ansible_module_virt.py\\\\\", line 339, in autostart\\\\n    if self.conn.get_autostart(vmid) != as_flag:\\\\n  File \\\\\"/tmp/ansible_P_wdlG/ansible_module_virt.py\\\\\", line 248, in get_autostart\\\\n    vm = self.conn.lookupByName(vmid)\\\\n  File \\\\\"/usr/lib/python2.7/dist-packages/libvirt.py\\\\\", line 4048, in lookupByName\\\\n    if ret is None:raise libvirtError(\\'virDomainLookupByName() failed\\', conn=self)\\\\nlibvirtError: Domain not found: no domain with matching name \\'pbx\\'\\\\n\", \"invocation\": {\"module_args\": {\"xml\": \"<domain type=\\'kvm\\'>\\\\n  <name>pbx</name>\\\\n  <uuid>3cca922a-37a8-4b86-ab8a-ab563dc7fc55</uuid>\\\\n  <memory unit=\\'KiB\\'>786432</memory>\\\\n  <currentMemory unit=\\'KiB\\'>262144</currentMemory>\\\\n  <vcpu placement=\\'static\\'>1</vcpu>\\\\n  <os>\\\\n    <type arch=\\'x86_64\\' machine=\\'pc-i440fx-xenial\\'>hvm</type>\\\\n    <boot dev=\\'hd\\'/>\\\\n  </os>\\\\n  <features>\\\\n    <acpi/>\\\\n    <apic/>\\\\n  </features>\\\\n  <cpu mode=\\'custom\\' match=\\'exact\\'>\\\\n    <model fallback=\\'allow\\'>core2duo</model>\\\\n  </cpu>\\\\n  <clock offset=\\'utc\\'>\\\\n    <timer name=\\'rtc\\' tickpolicy=\\'catchup\\'/>\\\\n    <timer name=\\'pit\\' tickpolicy=\\'delay\\'/>\\\\n    <timer name=\\'hpet\\' present=\\'no\\'/>\\\\n  </clock>\\\\n  <on_poweroff>destroy</on_poweroff>\\\\n  <on_reboot>restart</on_reboot>\\\\n  <on_crash>restart</on_crash>\\\\n  <pm>\\\\n    <suspend-to-mem enabled=\\'no\\'/>\\\\n    <suspend-to-disk enabled=\\'no\\'/>\\\\n  </pm>\\\\n  <devices>\\\\n    <emulator>/usr/bin/kvm-spice</emulator>\\\\n    <disk type=\\'file\\' device=\\'cdrom\\'>\\\\n      <driver name=\\'qemu\\' type=\\'raw\\'/>\\\\n      <target dev=\\'hda\\' bus=\\'ide\\'/>\\\\n      <readonly/>\\\\n      <address type=\\'drive\\' controller=\\'0\\' bus=\\'0\\' target=\\'0\\' unit=\\'0\\'/>\\\\n    </disk>\\\\n    <disk type=\\'file\\' device=\\'disk\\'>\\\\n      <driver name=\\'qemu\\' type=\\'qcow2\\'/>\\\\n      <source file=\\'/media/storage/vms/pbx.qcow2\\'/>\\\\n      <target dev=\\'vda\\' bus=\\'virtio\\'/>\\\\n      <address type=\\'pci\\' domain=\\'0x0000\\' bus=\\'0x00\\' slot=\\'0x06\\' function=\\'0x0\\'/>\\\\n    </disk>\\\\n    <controller type=\\'usb\\' index=\\'0\\' model=\\'ich9-ehci1\\'>\\\\n      <address type=\\'pci\\' domain=\\'0x0000\\' bus=\\'0x00\\' slot=\\'0x05\\' function=\\'0x7\\'/>\\\\n    </controller>\\\\n    <controller type=\\'usb\\' index=\\'0\\' model=\\'ich9-uhci1\\'>\\\\n      <master startport=\\'0\\'/>\\\\n      <address type=\\'pci\\' domain=\\'0x0000\\' bus=\\'0x00\\' slot=\\'0x05\\' function=\\'0x0\\' multifunction=\\'on\\'/>\\\\n    </controller>\\\\n    <controller type=\\'usb\\' index=\\'0\\' model=\\'ich9-uhci2\\'>\\\\n      <master startport=\\'2\\'/>\\\\n      <address type=\\'pci\\' domain=\\'0x0000\\' bus=\\'0x00\\' slot=\\'0x05\\' function=\\'0x1\\'/>\\\\n    </controller>\\\\n    <controller type=\\'usb\\' index=\\'0\\' model=\\'ich9-uhci3\\'>\\\\n      <master startport=\\'4\\'/>\\\\n      <address type=\\'pci\\' domain=\\'0x0000\\' bus=\\'0x00\\' slot=\\'0x05\\' function=\\'0x2\\'/>\\\\n    </controller>\\\\n    <controller type=\\'pci\\' index=\\'0\\' model=\\'pci-root\\'/>\\\\n    <controller type=\\'ide\\' index=\\'0\\'>\\\\n      <address type=\\'pci\\' domain=\\'0x0000\\' bus=\\'0x00\\' slot=\\'0x01\\' function=\\'0x1\\'/>\\\\n    </controller>\\\\n    <controller type=\\'virtio-serial\\' index=\\'0\\'>\\\\n      <address type=\\'pci\\' domain=\\'0x0000\\' bus=\\'0x00\\' slot=\\'0x04\\' function=\\'0x0\\'/>\\\\n    </controller>\\\\n    <interface type=\\'bridge\\'>\\\\n      <mac address=\\'52:54:00:9c:61:6b\\'/>\\\\n      <source bridge=\\'br0\\'/>\\\\n      <model type=\\'virtio\\'/>\\\\n      <address type=\\'pci\\' domain=\\'0x0000\\' bus=\\'0x00\\' slot=\\'0x03\\' function=\\'0x0\\'/>\\\\n    </interface>\\\\n    <serial type=\\'pty\\'>\\\\n      <target port=\\'0\\'/>\\\\n    </serial>\\\\n    <console type=\\'pty\\'>\\\\n      <target type=\\'serial\\' port=\\'0\\'/>\\\\n    </console>\\\\n    <channel type=\\'spicevmc\\'>\\\\n      <target type=\\'virtio\\' name=\\'com.redhat.spice.0\\'/>\\\\n      <address type=\\'virtio-serial\\' controller=\\'0\\' bus=\\'0\\' port=\\'1\\'/>\\\\n    </channel>\\\\n    <input type=\\'mouse\\' bus=\\'ps2\\'/>\\\\n    <input type=\\'keyboard\\' bus=\\'ps2\\'/>\\\\n    <graphics type=\\'spice\\' autoport=\\'yes\\'>\\\\n      <image compression=\\'off\\'/>\\\\n    </graphics>\\\\n    <video>\\\\n      <model type=\\'qxl\\' ram=\\'65536\\' vram=\\'65536\\' vgamem=\\'16384\\' heads=\\'1\\'/>\\\\n      <address type=\\'pci\\' domain=\\'0x0000\\' bus=\\'0x00\\' slot=\\'0x02\\' function=\\'0x0\\'/>\\\\n    </video>\\\\n    <memballoon model=\\'virtio\\'>\\\\n      <address type=\\'pci\\' domain=\\'0x0000\\' bus=\\'0x00\\' slot=\\'0x07\\' function=\\'0x0\\'/>\\\\n    </memballoon>\\\\n  </devices>\\\\n</domain>\", \"name\": \"pbx\", \"uri\": \"qemu:///system\", \"state\": null, \"command\": \"define\", \"autostart\": true}}}\\r\\n', 'Shared connection to 192.168.1.50 closed.\\r\\n')\r\nThe full traceback is:\r\nTraceback (most recent call last):\r\n  File \"/tmp/ansible_P_wdlG/ansible_module_virt.py\", line 526, in main\r\n    rc, result = core(module)\r\n  File \"/tmp/ansible_P_wdlG/ansible_module_virt.py\", line 476, in core\r\n    if autostart is not None and v.autostart(guest, autostart):\r\n  File \"/tmp/ansible_P_wdlG/ansible_module_virt.py\", line 339, in autostart\r\n    if self.conn.get_autostart(vmid) != as_flag:\r\n  File \"/tmp/ansible_P_wdlG/ansible_module_virt.py\", line 248, in get_autostart\r\n    vm = self.conn.lookupByName(vmid)\r\n  File \"/usr/lib/python2.7/dist-packages/libvirt.py\", line 4048, in lookupByName\r\n    if ret is None:raise libvirtError('virDomainLookupByName() failed', conn=self)\r\nlibvirtError: Domain not found: no domain with matching name 'pbx'\r\n\r\nfailed: [mainframe] (item={u'files': {u'xml': u'files/pbx.xml', u'disk': u'/media/coaxial/ebe17a65-bd74-430f-956c-5aac9b29d708/pbx.qcow2'}, u'disk_type': u'qcow2', u'name': u'pbx'}) => {\r\n    \"attempts\": 1, \r\n    \"changed\": false, \r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"autostart\": true, \r\n            \"command\": \"define\", \r\n            \"name\": \"pbx\", \r\n            \"state\": null, \r\n            \"uri\": \"qemu:///system\", \r\n            \"xml\": \"<domain type='kvm'>\\n  <name>pbx</name>\\n  <uuid>3cca922a-37a8-4b86-ab8a-ab563dc7fc55</uuid>\\n  <memory unit='KiB'>786432</memory>\\n  <currentMemory unit='KiB'>262144</currentMemory>\\n  <vcpu placement='static'>1</vcpu>\\n  <os>\\n    <type arch='x86_64' machine='pc-i440fx-xenial'>hvm</type>\\n    <boot dev='hd'/>\\n  </os>\\n  <features>\\n    <acpi/>\\n    <apic/>\\n  </features>\\n  <cpu mode='custom' match='exact'>\\n    <model fallback='allow'>core2duo</model>\\n  </cpu>\\n  <clock offset='utc'>\\n    <timer name='rtc' tickpolicy='catchup'/>\\n    <timer name='pit' tickpolicy='delay'/>\\n    <timer name='hpet' present='no'/>\\n  </clock>\\n  <on_poweroff>destroy</on_poweroff>\\n  <on_reboot>restart</on_reboot>\\n  <on_crash>restart</on_crash>\\n  <pm>\\n    <suspend-to-mem enabled='no'/>\\n    <suspend-to-disk enabled='no'/>\\n  </pm>\\n  <devices>\\n    <emulator>/usr/bin/kvm-spice</emulator>\\n    <disk type='file' device='cdrom'>\\n      <driver name='qemu' type='raw'/>\\n      <target dev='hda' bus='ide'/>\\n      <readonly/>\\n      <address type='drive' controller='0' bus='0' target='0' unit='0'/>\\n    </disk>\\n    <disk type='file' device='disk'>\\n      <driver name='qemu' type='qcow2'/>\\n      <source file='/media/storage/vms/pbx.qcow2'/>\\n      <target dev='vda' bus='virtio'/>\\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x06' function='0x0'/>\\n    </disk>\\n    <controller type='usb' index='0' model='ich9-ehci1'>\\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x05' function='0x7'/>\\n    </controller>\\n    <controller type='usb' index='0' model='ich9-uhci1'>\\n      <master startport='0'/>\\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x05' function='0x0' multifunction='on'/>\\n    </controller>\\n    <controller type='usb' index='0' model='ich9-uhci2'>\\n      <master startport='2'/>\\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x05' function='0x1'/>\\n    </controller>\\n    <controller type='usb' index='0' model='ich9-uhci3'>\\n      <master startport='4'/>\\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x05' function='0x2'/>\\n    </controller>\\n    <controller type='pci' index='0' model='pci-root'/>\\n    <controller type='ide' index='0'>\\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x01' function='0x1'/>\\n    </controller>\\n    <controller type='virtio-serial' index='0'>\\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x04' function='0x0'/>\\n    </controller>\\n    <interface type='bridge'>\\n      <mac address='52:54:00:9c:61:6b'/>\\n      <source bridge='br0'/>\\n      <model type='virtio'/>\\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>\\n    </interface>\\n    <serial type='pty'>\\n      <target port='0'/>\\n    </serial>\\n    <console type='pty'>\\n      <target type='serial' port='0'/>\\n    </console>\\n    <channel type='spicevmc'>\\n      <target type='virtio' name='com.redhat.spice.0'/>\\n      <address type='virtio-serial' controller='0' bus='0' port='1'/>\\n    </channel>\\n    <input type='mouse' bus='ps2'/>\\n    <input type='keyboard' bus='ps2'/>\\n    <graphics type='spice' autoport='yes'>\\n      <image compression='off'/>\\n    </graphics>\\n    <video>\\n      <model type='qxl' ram='65536' vram='65536' vgamem='16384' heads='1'/>\\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x0'/>\\n    </video>\\n    <memballoon model='virtio'>\\n      <address type='pci' domain='0x0000' bus='0x00' slot='0x07' function='0x0'/>\\n    </memballoon>\\n  </devices>\\n</domain>\"\r\n        }\r\n    }, \r\n    \"item\": {\r\n        \"disk_type\": \"qcow2\", \r\n        \"files\": {\r\n            \"disk\": \"/media/coaxial/ebe17a65-bd74-430f-956c-5aac9b29d708/pbx.qcow2\", \r\n            \"xml\": \"files/pbx.xml\"\r\n        }, \r\n        \"name\": \"pbx\"\r\n    }, \r\n    \"msg\": \"Domain not found: no domain with matching name 'pbx'\"\r\n}\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34559/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "maykelg": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34556", "title": "RFE: permit passing stdin to \"raw\" module", "body": "##### ISSUE TYPE\r\n - Feature Idea\r\n\r\n##### COMPONENT NAME\r\n\r\nraw\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.6/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.6.6 (r266:84292, Aug 18 2016, 08:36:59) [GCC 4.4.7 20120313 (Red Hat 4.4.7-17)]\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\nIf using Ansible 2.4 or above, paste the results of \"ansible-config dump --only-changed\"\r\nOtherwise, mention any settings you have changed/added/removed in ansible.cfg\r\n(or using the ANSIBLE_* environment variables).\r\n-->\r\n\r\n##### OS / ENVIRONMENT\r\n<!---\r\nMention the OS you are running Ansible from, and the OS you are\r\nmanaging, or say \"N/A\" for anything that is not platform-specific.\r\nAlso mention the specific version of what you are trying to control,\r\ne.g. if this is a network bug the version of firmware on the network device.\r\n-->\r\nFrom a generic Linux platform to an embedded device that does not support Python.\r\n\r\n##### SUMMARY\r\nSee https://github.com/ansible/ansible/issues/14380 RFE: permit passing stdin to commands/shells\r\nThe issue is the same, but the solution https://github.com/ansible/ansible/commit/905c25559d05c264c6e7d071a565127833c653dc provided an implementation for \"command\" only and not for \"raw\". This functionality is need for \"raw\" modules as well.\r\n\r\n##### STEPS TO REPRODUCE\r\n<!---\r\nFor bugs, show exactly how to reproduce the problem, using a minimal test-case.\r\nFor new features, show how the feature would be used.\r\n-->\r\n\r\n<!--- Paste example playbooks or commands between quotes below -->\r\n```yaml\r\n\r\n```\r\n\r\n<!--- You can also paste gist.github.com links for larger files -->\r\n\r\n##### EXPECTED RESULTS\r\n<!--- What did you expect to happen when running the steps above? -->\r\n\r\n##### ACTUAL RESULTS\r\n<!--- What actually happened? If possible run with extra verbosity (-vvvv) -->\r\n\r\n<!--- Paste verbatim command output between quotes below -->\r\n```\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34556/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "jean-christophe-manciot": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34554", "title": "Debug hostvars[inventory_hostname]  & error messages output have become hardly readable", "body": "##### ISSUE TYPE\r\n- Bug Report\r\n\r\n##### COMPONENT NAME\r\n\r\ndebug\r\n\r\n##### ANSIBLE VERSION\r\n\r\nLatest stable/unstable versions:\r\n```\r\nansible 2.4.2.0 (detached HEAD e3a8bf02ac) last updated 2018/01/04 15:50:35 (GMT +200)\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/actionmystique/Ansible/git-yang-networkop/ansible-101/library']\r\n  ansible python module location = /media/actionmystique/SAMSUNG5-Shared/home/actionmystique/src/Ansible/git-ansible/lib/ansible\r\n  executable location = /home/actionmystique/src/Ansible/git-ansible/bin/ansible\r\n  python version = 2.7.14 (default, Sep 23 2017, 22:06:14) [GCC 7.2.0]\r\n```\r\n##### CONFIGURATION\r\n```\r\ninventory   = ./hosts\r\nlibrary        = /home/actionmystique/Ansible/git-yang-networkop/ansible-101/library\r\nforks = 1000\r\ngathering = explicit\r\ngather_timeout = 30\r\nroles_path = /home/actionmystique/Ansible/Roles/roles\r\nprivate_role_vars = yes\r\nhash_behaviour = merge\r\nlog_path = /var/log/ansible.log\r\nretry_files_enabled = False\r\nshow_custom_stats = True\r\ntimeout = 120\r\npipelining = True\r\nconnect_timeout = 240\r\nconnect_retry_timeout = 180\r\n```\r\n##### OS / ENVIRONMENT\r\n- host: Ubuntu 17.10 4.13\r\n- target: \r\n  + *IOS-XEv 16.5.1b**\r\n- paramiko: 2.4.0\r\n\r\n##### SUMMARY\r\n\r\nDebug var=hostvars[inventory_hostname]  used to produce a nice readable list of the contents of all inventory_hostname's variables.\r\nThe format used now in the output makes it almost unreadable.\r\n\r\n##### STEPS TO REPRODUCE\r\n\r\n**Role**: :\r\n\r\n```\r\n...\r\n- name: Print all variables for each remote device\r\n  debug: \r\n        var: hostvars[inventory_hostname]\r\n```\r\n\r\n##### EXPECTED RESULTS\r\n\r\nThe output should list all variables with one line/variable.\r\n\r\n##### ACTUAL RESULTS: Playbook\r\n\r\n```\r\n  ______________________________________________________\r\n/ TASK [ios_yang : Print all variables for each remote \\\r\n\\ device]                                              /\r\n ------------------------------------------------------\r\n        \\   ^__^\r\n         \\  (oo)\\_______\r\n            (__)\\       )\\/\\\r\n                ||----w |\r\n                ||     ||\r\n\r\ntask path: /media/actionmystique/SAMSUNG5-Shared/home/actionmystique/Ansible/Roles/roles/ios_yang/tasks/stop.yml:72\r\nok: [XEv_Spine_31] => {\r\n    \"hostvars[inventory_hostname]\": \"{'ansible_playbook_python': '/usr/bin/python', u'connections': \r\n...\r\n, u'yang_check': {'failed': False, u'changed': False, u'stdout_lines': [[u'confd            : Running ', u'nesd             : Running ', u'syncfd           : Running ', u'ncsshd           : Running ', u'dmiauthd         : Running ', u'vtyserverutild   : Running ', u'opdatamgrd       : Running ', u'nginx            : Running ', u'ndbmand          : Running']], u'stdout': [u'confd            : Running \\\\nnesd             : Running \\\\nsyncfd           : Running \\\\nncsshd           : Running \\\\ndmiauthd         : Running \\\\nvtyserverutild   : Running \\\\nopdatamgrd       : Running \\\\nnginx            : Running \\\\nndbmand          : Running']}, u'os_family': u'ios_xev', \r\n...\r\n}\r\n```\r\n  \r\n  ", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34554/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "progz": {"issues": [{"url": "https://api.github.com/repos/ansible/ansible/issues/34536", "title": "Feature Idea: Add support for multiple SSL in AWS ALB ", "body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n - Feature Idea\r\n\r\n##### COMPONENT NAME\r\nelb_application_lb\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible --version\r\nansible 2.4.2.0\r\n  config file = None\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.13 (default, Nov 24 2017, 17:33:09) [GCC 6.3.0 20170516]\r\n```\r\n\r\n##### CONFIGURATION\r\n\r\n##### OS / ENVIRONMENT\r\n\r\n##### SUMMARY\r\nSince 10 october 2017, Application Load Balancer on AWS support multiple certificates SSL, so it would be awesome if Ansible can manage this.\r\nOfficial announce : https://aws.amazon.com/blogs/aws/new-application-load-balancer-sni/\r\n\r\n##### STEPS TO REPRODUCE\r\nI try to use the existing module \"elb_application_lb\" but when I set up multiple certificates in the Certificates parameters of the listener option, Ansible only set the last one.\r\n\r\n```- elb_application_lb:\r\n    name: myelb\r\n    security_groups:\r\n      - sg-12345678\r\n    subnets:\r\n      - subnet-012345678\r\n    listeners:\r\n      - Protocol: HTTPS\r\n        Port: 443\r\n        SslPolicy: ELBSecurityPolicy-2016-08\r\n        Certificates: \r\n          - CertificateArn: arn:aws:iam::12345678987:server-certificate/test.domain.com\r\n          - CertificateArn: arn:aws:iam::12345678987:server-certificate/foo.domain2.com\r\n          - CertificateArn: arn:aws:iam::12345678987:server-certificate/bar.domain3.com\r\n        DefaultActions:\r\n          - Type: forward\r\n            TargetGroupName: foo\r\n    state: present\r\n```\r\nIn this case, this playbook will only set the last certificate => arn:aws:iam::12345678987:server-certificate/bar.domain3.com\r\n\r\n\r\n##### EXPECTED RESULTS\r\nI expect than all certificate provide into the playbook are attached to the ALB.\r\n\r\n##### ACTUAL RESULTS\r\nIn this case, this playbook will only set the last certificate => arn:aws:iam::12345678987:server-certificate/bar.domain3.com\r\n\r\n  ", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/34536/reactions", "total_count": 4, "+1": 4, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "piontas": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/5fa29201a79068ea08f90205dfb22470f49e6455", "message": "Port sts_assume_role to boto3 (#32569)\n\n* Ported sts_assume_role to boto3\r\n\r\n* Added integration tests"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "wimnat": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/866239e01af12ef1fe2d4c6202c5b8bd4329c01f", "message": "[cloud] Add support for using IP addresses in target groups (#34266)\n\n* Add support for IP based ELB target groups. Fixes #30962\r\n\r\n* Add support for using IP addresses in target groups"}], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/33808", "title": "[WIP] AWS Network load balancer", "body": "##### SUMMARY\r\nAWS Network Load Balancer module\r\n\r\n##### ISSUE TYPE\r\n - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\nelb_network_lb\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n2.5\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nRequires pending PR to move application load balancer code in to new class.\r\nWork still to do:\r\nsubnet_mappings work \r\ncheck any nlb only attributes", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/33769", "title": "[WIP] - Create classes for Application Load Balancer", "body": "##### SUMMARY\r\nCreate a super class for ELBv2 and then a class for ALB.\r\n\r\nThis is so that the NLB module can be created and re-use a vast majority of this code.\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nelb_application_lb\r\n\r\n##### ANSIBLE VERSION\r\nFor 2.5\r\n\r\n##### ADDITIONAL INFORMATION\r\nWIP\r\n\r\nNeed to add some integration tests", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "afeld": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/de60328d948929c5d5a3d892b08408288002ae8b", "message": "add documentation around commonly-used Facts for Conditionals (#34263)\n\n* add documentation around commonly-used Facts for Conditionals\r\n\r\nThere are a few Facts that are often used for Conditionals, so\r\ndocumenting them on the Conditionals page with their possible values.\r\n\r\n* Edit"}], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34290", "title": "fix passing of package paths+URLs to package module when using apt", "body": "##### SUMMARY\r\nWhile most of the packaging modules support a package file path or URL being passed to their `name`, [the `apt` module requires a different one (`deb`)](https://docs.ansible.com/ansible/latest/apt_module.html#options). This change looks for a suffix of `.deb` and adjusts the arguments accordingly. Also added some tests around argument handling in the package module.\r\n\r\nThis change was inspired by seeing [a role that was installing packages cross-platform](https://github.com/singleplatform-eng/ansible-role-nessus-agent/blob/cb21622189efabef4c17245a9addac01654c8ae8/tasks/main.yml#L3-L9). The simplified version of their code:\r\n\r\n```yaml\r\n- name: Install from repo\r\n  package: name={{pkg}}\r\n  when: \"'.deb' not in pkg\"\r\n\r\n- name: Install from .deb package\r\n  apt: deb={{pkg}}\r\n  when: \"'.deb' in pkg\"\r\n```\r\n\r\nFollowing this change, it could simply be\r\n\r\n```yaml\r\n- name: Install from repo\r\n  package: name={{pkg}}\r\n```\r\n\r\nThis will make cross-platform support in Ansible code just that little bit easier.\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\npackage\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/ubuntu/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/ubuntu/.local/lib/python2.7/site-packages/ansible\r\n  executable location = /home/ubuntu/.local/bin/ansible\r\n  python version = 2.7.12 (default, Nov 20 2017, 18:23:56) [GCC 5.4.0 20160609]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n\r\nWith the following command, run on Ubuntu 16.04:\r\n\r\n```sh\r\nansible all -b -i \"localhost,\" -c local -m package -a \"name=http://mirrors.kernel.org/ubuntu/pool/universe/c/cloc/cloc_1.60-1.1_all.deb\"\r\n```\r\n\r\nBefore:\r\n\r\n```\r\nlocalhost | FAILED! => {\r\n    \"changed\": false,\r\n    \"msg\": \"No package matching 'http://mirrors.kernel.org/ubuntu/pool/universe/c/cloc/cloc_1.60-1.1_all.deb' is available\"\r\n}\r\n```\r\n\r\nAfter:\r\n\r\n```\r\nlocalhost | SUCCESS => {\r\n    \"changed\": true,\r\n    ...\r\n}\r\n```", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34046", "title": "Link to the Galaxy platforms list from the meta file template", "body": "##### SUMMARY\r\n\r\nIt's unclear what the supported values are from looking at the meta file or the documentation. This gives users a way to understand the different values, even if reading it from JSON output isn't ideal.\r\n\r\nFixes https://github.com/ansible/galaxy/issues/52.\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Docs Pull Request\r\n\r\n##### COMPONENT NAME\r\n`ansible-galaxy init`\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n  config file = None\r\n  configured module search path = [u'/Users/aidanfeldman/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/var/pyenv/versions/2.7.11/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/local/var/pyenv/versions/2.7.11/bin/ansible\r\n  python version = 2.7.11 (default, Feb  8 2016, 15:08:06) [GCC 4.2.1 Compatible Apple LLVM 7.0.2 (clang-700.1.81)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n\r\nWouldn't be a bad idea to add this sentence to https://galaxy.ansible.com/intro#meta, but I couldn't figure out where to submit a pull request.\r\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "privateip": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/dd5256f3dfe66f34609c016cdf48906ec2e694cb", "message": "adds restart_if_needed argument to nios_zone (#35191)\n\n* adds restart_if_needed argument to nios_zone\r\n\r\n* minor updates to the documentation strings"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/8d775a332e959e41be46962c6fb7367edafe2cf6", "message": "Add support for Infoblox NIOS (#35097)\n\n* WIP: initial commit\r\n\r\n* update documentation in modules\r\n\r\n* fix up sanity check issues\r\n\r\n* add unit tests for nios api\r\n\r\n* fix up sanity check failures\r\n\r\n* fix up EXAMPLES in modules\r\n\r\n* mock infoblox_client.connector\r\n\r\n* remove unsupported assert statement"}], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35189", "title": "adds two new infoblox lookup plugins", "body": "* nios - lookup plugin to return nios objects to the playbook\r\n* nios_next_ip - lookup plugin to return the next avaiable ip address\r\n\r\n", "author_association": "MEMBER"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "mattclay": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/f2f743aef039e4f7241b8d8e186baa11cbe625c9", "message": "Uninstall backports.lzma in archive test.\n\nThis avoids breaking other tests which depend on backports\nmodules, since the backports.lzma module is currently\nincompatible with other backports modules."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/20824b8f3d8afefe1d442d2aac4752482dab448a", "message": "Simplify Windows versions in ansible-test."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/f9f6080630f1a50b42ae7d5313339a03e2ef69ca", "message": "Improve handling of ansible-doc sanity errors."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/74d635ba6beeca4f9c7b7f8586c1a848a8582c11", "message": "Add missing code to yamllint messages."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/5fa1edc15d5ac62ded3c76a517e5bb1c57d18148", "message": "Track ansible-test cloud and target overhead. (#34902)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/35c3a92c8ccfb27faddcc142f8c653c300119cd0", "message": "Fix ansible-test injector symlinks. (#34942)\n\n* Convert importer.py back to symlink.\r\n* Add missing ansible-* injector symlinks."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/227ff61f9d94fbe54669e7e6892b481509a1907c", "message": "Add module support to yamllint sanity test. (#34964)\n\n* Add module support to yamllint sanity test.\r\n* Fix duplicate keys in module RETURN docs.\r\n* Fix syntax in return_common docs fragment.\r\n* Fix duplicate keys in module EXAMPLES docs."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/d8673ed72a53ea58f7afa62b9e94e8807a9424ea", "message": "Preserve `test/results/data/` in Shippable jobs."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/3c72161da5a9712726e755ec02fe2ca86abf9d86", "message": "Enable tests which pass on Python 3."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/6969d492d82e3c4ddc6af260c2331df1abd40ddc", "message": "Split Windows tests into 4 groups."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/96e5cce5eac2817c65bdab3bddefa7478faff3cd", "message": "Ignore pylint errors."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/74ac1c2e4a70b68e18073d6bdd820c2c7c15ed5c", "message": "Test cleanup."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/2d4a43bb0ad91d076fd766033a9faa4e605a156f", "message": "Add file+rule ignore support to validate-modules. (#34757)\n\n* Clean up code.\r\n* Add file+rule ignore support to validate-modules."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/feab47e33a34324d98274c596e70728eac8859b7", "message": "Update default ansible-test container SHA."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/513e0547b926b544cf76795272700f3f896094df", "message": "Fix version_added validation when empty."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/784360385e18b98b8bda457082631809b5c438dc", "message": "Remove already fixed Python 3.7 pylint ignores."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/797664d9cb681a66b3c2e17405d23b9c8723321c", "message": "Python 2.6 `str.format()` compatibility fixes."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/f968776d86b7f2f7c2ae616710ce1efe688256d6", "message": "Remove ansible-test obsolete `net_*` target logic."}], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35197", "title": "WIP - Move requirements into tests.", "body": "##### SUMMARY\r\n\r\nMove requirements into tests.\r\n\r\n##### ISSUE TYPE\r\n\r\nFeature Pull Request\r\n\r\n##### COMPONENT NAME\r\n\r\nintegration tests\r\n\r\n##### ANSIBLE VERSION\r\n\r\n```\r\nansible 2.5.0 (remote-tests 9a3a3b359b) last updated 2018/01/22 12:09:35 (GMT -700)\r\n  config file = None\r\n  configured module search path = [u'/Users/mclay/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/mclay/code/mattclay/ansible/lib/ansible\r\n  executable location = /Users/mclay/code/mattclay/ansible/bin/ansible\r\n  python version = 2.7.13 (default, Jul 18 2017, 09:17:00) [GCC 4.2.1 Compatible Apple LLVM 8.1.0 (clang-802.0.42)]\r\n```\r\n", "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/35115", "title": "WIP - Compare AWS vs Azure for Windows tests.", "body": "##### SUMMARY\r\n\r\nWIP - Compare AWS vs Azure for Windows tests.\r\n\r\nDo not merge.\r\n\r\n##### ISSUE TYPE\r\n\r\nFeature Pull Request\r\n\r\n##### COMPONENT NAME\r\n\r\nShippable\r\n\r\n##### ANSIBLE VERSION\r\n\r\n```\r\nansible 2.5.0 (aws-vs-azure 8c78bf3dcc) last updated 2018/01/19 17:14:58 (GMT -700)\r\n  config file = None\r\n  configured module search path = [u'/Users/mclay/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/mclay/code/mattclay/ansible/lib/ansible\r\n  executable location = /Users/mclay/code/mattclay/ansible/bin/ansible\r\n  python version = 2.7.13 (default, Jul 18 2017, 09:17:00) [GCC 4.2.1 Compatible Apple LLVM 8.1.0 (clang-802.0.42)]\r\n```\r\n", "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34831", "title": "WIP - Trigger complete CI run.", "body": "##### SUMMARY\r\n\r\nWIP - Trigger complete CI run. Do not merge.\r\n\r\n##### ISSUE TYPE\r\n\r\nFeature Pull Request\r\n\r\n##### COMPONENT NAME\r\n\r\nCI\r\n\r\n##### ANSIBLE VERSION\r\n\r\n```\r\nansible 2.5.0 (ci-complete 620a3027a9) last updated 2018/01/13 00:04:05 (GMT -700)\r\n  config file = None\r\n  configured module search path = [u'/Users/mclay/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/mclay/code/mattclay/ansible/lib/ansible\r\n  executable location = /Users/mclay/code/mattclay/ansible/bin/ansible\r\n  python version = 2.7.13 (default, Jul 18 2017, 09:17:00) [GCC 4.2.1 Compatible Apple LLVM 8.1.0 (clang-802.0.42)]\r\n```\r\n", "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34606", "title": "WIP - Trigger full test run. Test. Do not merge.", "body": "##### SUMMARY\r\n\r\nWIP - Trigger full test run. Test. Do not merge.\r\n\r\n##### ISSUE TYPE\r\n\r\nBugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n\r\nTests\r\n\r\n##### ANSIBLE VERSION\r\n\r\n```\r\nansible 2.5.0 (test-devel d11e688295) last updated 2018/01/08 17:22:24 (GMT -700)\r\n  config file = None\r\n  configured module search path = [u'/Users/mclay/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/mclay/code/mattclay/ansible/lib/ansible\r\n  executable location = /Users/mclay/code/mattclay/ansible/bin/ansible\r\n  python version = 2.7.13 (default, Jul 18 2017, 09:17:00) [GCC 4.2.1 Compatible Apple LLVM 8.1.0 (clang-802.0.42)]\r\n```\r\n", "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34605", "title": "WIP - Trigger full test run. Test. Do not merge.", "body": "##### SUMMARY\r\n\r\nWIP - Trigger full test run. Test. Do not merge.\r\n\r\n##### ISSUE TYPE\r\n\r\nBugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n\r\nTests\r\n\r\n##### ANSIBLE VERSION\r\n\r\n```\r\nansible 2.4.3 (test-2.4 3459447793) last updated 2018/01/08 17:09:48 (GMT -700)\r\n  config file = None\r\n  configured module search path = [u'/Users/mclay/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/mclay/code/mattclay/ansible/lib/ansible\r\n  executable location = /Users/mclay/code/mattclay/ansible/bin/ansible\r\n  python version = 2.7.13 (default, Jul 18 2017, 09:17:00) [GCC 4.2.1 Compatible Apple LLVM 8.1.0 (clang-802.0.42)]\r\n```\r\n", "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34604", "title": "WIP - Trigger full test run. Test. Do not merge.", "body": "##### SUMMARY\r\n\r\nWIP - Trigger full test run. Test. Do not merge.\r\n\r\n##### ISSUE TYPE\r\n\r\nBugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n\r\nTests\r\n\r\n##### ANSIBLE VERSION\r\n\r\n```\r\nansible 2.3.3.0 (test-2.3 748f28d3df) last updated 2018/01/08 17:04:36 (GMT -700)\r\n  config file = \r\n  configured module search path = Default w/o overrides\r\n  python version = 2.7.13 (default, Jul 18 2017, 09:17:00) [GCC 4.2.1 Compatible Apple LLVM 8.1.0 (clang-802.0.42)]\r\n```\r\n", "author_association": "OWNER"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "kairoaraujo": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/bcd883ce5e075a52120d9bd23d63ccfe16186db8", "message": "Included ansible_devices for AIX facts/hardware (#31546)\n\n* Included ansible_devices for AIX"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "toshywoshy": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/87e82be09f1c9d387cec1cec70fbaf64b5657c8a", "message": "added new IBM Power KVM guest recognisation (#35169)\n\nSigned-off-by: Toshaan Bharvani <tab@toshaan.com>"}], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34925", "title": "continue fact gathering even without dmidecode", "body": "##### SUMMARY\r\nBugfix Pull Request\r\n\r\nIf dmidecode is not available we still wan to continue with fact gathering.\r\nOn certain platforms dmidecode won't even be available\r\n\r\n##### COMPONENT NAME\r\nsetup ( fact gathering )\r\n\r\n##### ANSIBLE VERSION\r\n\r\n```\r\nansible 2.5.0 (dmidecode-na 06a1ed6718) last updated 2018/01/16 12:49:32 (GMT +200)\r\n  config file = /home/ansible/.ansible.cfg\r\n  configured module search path = [u'/home/ansible/ansible/library']\r\n  ansible python module location = /home/ansible/ansible/lib/ansible\r\n  executable location = /home/ansible/ansible/bin/ansible\r\n  python version = 2.7.5 (default, May 16 2016, 12:54:51) [GCC 4.8.5 20150623 (PowerEL 4.8.5-10)]\r\n```\r\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "joshsouza": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/1ac715987bb093b3c76cdcc211a9efab36534651", "message": "Update `iam_group` to add check mode support (#27589)"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "rcarrillocruz": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/b7f4504a3691919fe60ef9e2555971be6179d07f", "message": "Add eos_l2_interface module and integration tests (#35162)\n\n* Add eos_l2_interface module and integration tests\r\n\r\n* Address PR review comments\r\n\r\n* Fix pylint issues"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/9851a0540f55b1440b73058805e638786928205e", "message": "Plumb newline param on cliconf (#34868)\n\nChange cb1b7052182d675d24bbf0f815587165f0cf6f0a introduced the newline\r\nparameter on network_cli plugin, but that was never introduced on cliconf.\r\nThis causes ios_user to break, since the newline value is never plumbed thru\r\nto network_cli"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/74eb0bfb13e56ebf7ff3c5841ae7c97e7e4efcd2", "message": "Add missing flags param to IOS get_config cliconf method (#34869)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/a56de25df55b5ec5d41cc97e7a9b8c466718366b", "message": "Fix persistent command timeout handling (#34791)\n\n* Fix persistent command timeout handling\r\n\r\nWe were using play context timeout on ansible-connect to set\r\nthe persistent command timeout handler. Thus, we were ignoring\r\nthe persistent_command_timeout setting.\r\nMoreover, even by changing that on ansible-connection, were again\r\noverriding it on cliconf send_command, since in a same process we can\r\njust set a single alarm and cliconf send_command alarm setup is executed\r\nafter ansible-connection alarm setup.\r\n\r\n* Remove alarm setting on cliconf send_command\r\n\r\nThe alarm is set regardless before it is executed by ansible-connection.\r\nSetting an alarm again, overrides/disables the previous ones as a single\r\nprocess can just have a single alarm set.\r\n\r\n* Move the setting of persistent command timeout to network_cli\r\n\r\nWe do also use ansible-connection for connection local, so if a\r\nuser provides a timeout via provider that would be ignored if we\r\nset the value on ansible-connection.\r\nMoving that logic to network_cli plugin constructor makes both\r\nconnections to work.\r\n\r\n* Remove debug statements\r\n\r\n* Set the persistent command timeout on task_executor\r\n\r\nWe can't set the timeout on ansible-connection nor network_cli,\r\notherwise tasks using provider timeout won't work."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/e9d62e18c79ec576a2bbbee3060edf82ea5069b8", "message": "Mark cliconf refactor on 2.5 roadmap as done (#34735)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/32e7c9bc9c0065c9c5fd35415fe78b9f16fa77f7", "message": "Refactor EOS code to use cliconf (#34426)\n\n* WIP Refactor EOS code to use cliconf\r\n\r\n* Fix connection.get where sendonly is True\r\n\r\n* Fix pylint issue\r\n\r\n* Remove return from send_config and various exec_commands\r\n\r\nAlso, removed a few try/except, which are anyways handled in\r\nConnection."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/477cd3f77527f7521254be96ac10bbff0ccd0936", "message": "Refactor IOS libs to use cliconf (#34136)\n\n* Refactor IOS libs to use cliconf\r\n\r\n* Fix pep8\r\n\r\n* Remove bytstrings from edit_config and additional end on load_config\r\n\r\n* Fix pep8"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "willthames": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/142cacfec354c0762639292d9d8d1833995a8c70", "message": "[cloud] ECS Service load balancer modification graceful fail (#32876)\n\nIt is not possible to modify the load balancer configuration\r\nfor ECS Service.\r\n\r\nAs it is possible to detect this, it's nicer to fail gracefully\r\nthan return AWS's less meaningful failure message.\r\n\r\nFix PEP8 compliance"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/4d58d16793962fb7186defa3f1a4db90a2aa2a69", "message": "Add aws_s3 action plugin to find source files as expected (#35028)\n\nPeople expect to be able to upload files to s3 using standard\r\nlocations for files.\r\n\r\nProviding an action plugin that effectively rewrites the `src`\r\nkey to the result of finding such a file is a great help.\r\n\r\nTests added, and IAM permissions corrected"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/8d733dbdf0eb7bbda5f3a783e893d71a3a35a646", "message": "[cloud] New module cloudfront_distribution (#31284)\n\n* added cloudfont.py, modified cloudfront_facts.py class name and fixed a minor bug\r\n\r\n* Improvements to cloudfront_distribution\r\n\r\n* Reduce the scope of the cloudfront_distribution module\r\n    * Remove presigning\r\n    * Remove streaming distribution functionality\r\n* Add full test suite for cloudfront distribution\r\n* Meet Ansible AWS guidelines\r\n\r\n* Make requested changes\r\n\r\nFix tests\r\n\r\nUse built-in waiter\r\n\r\nUpdate copyright"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/8e48793654397d4bc73e1b2e79e00d8486130b83", "message": "Speed up ec2_ami_facts and handle permissions issue (#34385)\n\n* describe_images is very slow if not filtered to owner accounts\n  *or* if the Owners parameter is passed (unless the Owners parameter\n  is `self`). Convert Owners parameters to `owner-id` and `owner-alias`\n  filters where possible. Tests with CLI show that `--owners self` is\n  fast, `--owners 123456789012` is slow (with or without owner-id filter).\n\n* describe_image_attributes fails against accounts other than your\n  own. Launch permissions are useful information, but not critical."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/04df2312e7c2ced34fcadf67cf164f8907274b42", "message": "Provide AnsibleAWSModule with _name attribute (#34564)\n\n_name attribute is used when providing generic error messages\r\n(such as connection problems). As AnsibleAWSModule does not inherit\r\nthings from AnsibleModule by default, need to provide it."}], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34776", "title": "Add decrypt_string option to ansible-vault", "body": "##### SUMMARY\r\nAllow encrypted strings inside variable files to be decrypted\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nansible-vault\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0 (devel 83b7ec69fc) last updated 2018/01/12 11:28:16 (GMT +1000)\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/will/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/will/src/ansible/lib/ansible\r\n  executable location = /home/will/src/ansible/bin/ansible\r\n  python version = 2.7.14 (default, Dec 11 2017, 14:52:53) [GCC 7.2.1 20170915 (Red Hat 7.2.1-2)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34678", "title": "Catch TemplateSyntaxError when escaping backslashes", "body": "##### SUMMARY\r\nMissing `_escape_backslashes` exception causes problems when it's later\r\nreraised as a TemplateSyntaxError rather than an AnsibleError\r\n\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\ntemplate/vars.py\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0 (devel a0e96efec7) last updated 2018/01/10 09:54:03 (GMT +1000)\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/will/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/will/src/ansible/lib/ansible\r\n  executable location = /home/will/src/ansible/bin/ansible\r\n  python version = 2.7.14 (default, Dec 11 2017, 14:52:53) [GCC 7.2.1 20170915 (Red Hat 7.2.1-2)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nWith the following playbook, an unfathomable exception occurs:\r\n\r\n```\r\n- hosts: localhost\r\n  connection: local\r\n\r\n  vars:\r\n    thing_that_exists:\r\n      broken_key: \"{{ hello | open_brackets('need_a_backreference', '(.*)', 'xy\\\\1')| some_filter) }}\"\r\n\r\n  tasks:\r\n  - debug:\r\n      msg: \"{{ thing_that_exists.key_that_doesnt | default(omit) }}\"\r\n```\r\n\r\nBefore:\r\n```\r\nTASK [debug] *********************************************************************************************************************************************************************************\r\ntask path: /home/will/tmp/ansible/template_issue/playbook.yml:9\r\nfatal: [localhost]: FAILED! => {\r\n    \"msg\": \"Unexpected templating type error occurred on ({{ thing_that_exists.key_that_doesnt | default(omit) }}): __init__() takes at least 3 arguments (2 given)\"\r\n}\r\n```\r\n\r\nAfter:\r\n```\r\nTASK [debug] *********************************************************************************************************************************************************************************\r\ntask path: /home/will/tmp/ansible/template_issue/playbook.yml:9\r\nfatal: [localhost]: FAILED! => {\r\n    \"msg\": \"{u'broken_key': u\\\"{{ hello | open_brackets('need_a_backreference', '(.*)', 'xy\\\\\\\\1')| some_filter) }}\\\"}: template error while templating string: unexpected ')'\\n  line 1. String: {{ hello | open_brackets('need_a_backreference', '(.*)', 'xy\\\\1')| some_filter) }}\"\r\n}\r\n\r\n```", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34381", "title": "awsvpc configuration for ECS", "body": "##### SUMMARY\r\nEnable awsvpc network mode for ecs task definitions, tasks and services\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n\r\n##### COMPONENT NAME\r\necs_taskdefinition\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0 (devel 0a3da471f5) last updated 2018/01/02 10:31:55 (GMT +1000)\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/will/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/will/src/ansible/lib/ansible\r\n  executable location = /home/will/src/ansible/bin/ansible\r\n  python version = 2.7.14 (default, Nov  2 2017, 18:42:05) [GCC 7.2.1 20170915 (Red Hat 7.2.1-2)]\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34337", "title": "ecs_taskdefinition_facts results", "body": "##### SUMMARY\r\nImprove results from `ecs_taskdefinition_facts`\r\n    \r\n`ecs_taskdefinition_facts` should not populate `ansible_facts` with so much information.\r\n    \r\nBetter to just return the contents of the dict directly.\r\n    \r\nReduce line lengths, use `AnsibleAWSModule`, don't reimplement `camel_dict_to_snake_dict`\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\necs_taskdefinition_facts\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0 (devel 0a3da471f5) last updated 2018/01/02 10:31:55 (GMT +1000)\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/will/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/will/src/ansible/lib/ansible\r\n  executable location = /home/will/src/ansible/bin/ansible\r\n  python version = 2.7.14 (default, Nov  2 2017, 18:42:05) [GCC 7.2.1 20170915 (Red Hat 7.2.1-2)]\r\n```\r\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/4831080", "body": "This needs rebasing to take into account recent changes, but that aside, my main concern would be the removal of the `instance_id` param - that would be a breaking change to existing playbooks. \n\nI think as long as you check for one of `instance_id` or `instances`, and then if `instance_id` is set just use\n\n```\ninstances = [ instance_id ]\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4831080/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/4831101", "body": "I think the register should come first and then the deregister. Otherwise you might end up with 0 instances in service. \n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4831101/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/4831133", "body": "self.instances will not equal info.id. Should probably be\n\n```\nif info.id in self.instances:\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4831133/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "Akasurde": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/b24d502682a0e75ee24092d2340ddc000046dbe0", "message": "VMware: Refactor vmware_dvs_portgroup (#35193)\n\nSigned-off-by: Abhijeet Kasurde <akasurde@redhat.com>"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/c65842b9d8912698c2ed7b109e546283f9e079c3", "message": "Add check mode support in vmware_guest (#32858)\n\nThis fix adds check mode support in vmware_guest\r\n\r\nFixes: #32439\r\n\r\nSigned-off-by: Abhijeet Kasurde <akasurde@redhat.com>"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/912729b6a7188f24857617213e3d45b1e88d8b1e", "message": "VMware: Check if VM is poweredoff before destroy (#35151)\n\nThis fix checks if VM is poweredoff before it can be destroyed.\r\n\r\nSigned-off-by: Abhijeet Kasurde <akasurde@redhat.com>"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/04bee050ac924b10a4b5b031db0ad98a7c4af35b", "message": "VMware: minor correction in documentation. (#35124)\n\nFixes: #27176\r\n\r\nSigned-off-by: Abhijeet Kasurde <akasurde@redhat.com>"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/87f2893481f127a39f1c9ccd4ba7a5863d4f9d1b", "message": "VMware: Get virtual machine object using property (#33525)\n\nThis fixes get_vm method to use propertyCollector which\r\ncan efficiently find the virtual machine from given VMware\r\ninfrastructure using only name.\r\n\r\n* VMware: Refactor vmware_guest module\r\n* Add nested paths of datacenter\r\n* Add tchernomax suggestions\r\n\r\nSigned-off-by: Abhijeet Kasurde <akasurde@redhat.com>"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/0a86287a92f3b57a0152bb99de608c5643601320", "message": "Handle facts for HP-UX 9000/785 architecture (#33333)\n\nThis fix adds support for HP-UX '9000/785' architecture.\r\n\r\nFixes: #31976\r\n\r\nSigned-off-by: Abhijeet Kasurde <akasurde@redhat.com>"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/cf88bfdbbf745e7cd2c063f112581db88590a4d0", "message": "VMware: Refactor vmware_maintenancemode module (#35000)\n\nSigned-off-by: Abhijeet Kasurde <akasurde@redhat.com>"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/bf2ce55ca6241464104e38d3d1e205022303b498", "message": "VMware: Add new module: vmware_host_config_manager (#34627)\n\nSigned-off-by: Abhijeet Kasurde <akasurde@redhat.com>"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/4ba7b005f5a9b8ff2270883c328a7953dc6a993b", "message": "VMware: add new module: vmware_host_ntp (#34730)\n\nThis module manages NTP configuration for given ESXi server.\r\n\r\nSigned-off-by: Abhijeet Kasurde <akasurde@redhat.com>"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/082654894a80ef7f7688c801403ef11921f7f7d7", "message": "VMware: Add ESXi hostname in fact details (#34981)\n\nFixes: #33972\n\nSigned-off-by: Abhijeet Kasurde <akasurde@redhat.com>"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/0196b6bb69210ff3475a89444e22205ae29ac3b4", "message": "ce_engine: Refactor check_ip_addr (#34126)\n\nSigned-off-by: Abhijeet Kasurde <akasurde@redhat.com>"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/0a9489ef6671d28fe6cb62665ea8e9f3d957e71a", "message": "VMware: Add multiple IP Addresses in result (#34866)\n\nThis fix adds IPv4 and IPv6 addresses in virtual machine facts.\r\n\r\nFixes: #34792\r\n\r\nSigned-off-by: Abhijeet Kasurde <akasurde@redhat.com>"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/b7724fdf857c9d57b50f94b6573f5ae2516547b5", "message": "nmcli: Add ipv4.dns-search attribute (#34261)\n\nThis fix adds following -\r\n* ipv4.dns-search attribute\r\n* refactoring of code\r\n* correct return status for up_connection\r\n* documentation update\r\n\r\nFixes: #17843\r\n\r\nSigned-off-by: Abhijeet Kasurde <akasurde@redhat.com>"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/eca3fcd214903595db4d4e2f06813b74f1511e85", "message": "VMware: Add new module: vmware_host_service_manager (#34862)\n\nSigned-off-by: Abhijeet Kasurde <akasurde@redhat.com>"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/3950f5b9ce07cdcf398f7043034908648945753a", "message": "facts: Get virtual facts about VMware (#34132)\n\nThis fixes fact gathering of VMware guest machines with\r\nolder Linux Kernel versions. These older Kernels do not support /sys\r\nfilesystem which is used to gather virtualization related facts.\r\n'dmidecode' is the safest option to find out virtualization related facts.\r\n\r\nFixes: #21573\r\n\r\nSigned-off-by: Abhijeet Kasurde <akasurde@redhat.com>"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/191b934dbd36f46169d2ad843550dbbdc07e8d7d", "message": "freeipa: support for host vars (#34535)\n\nAdds method to return host vars related to FreeIPA hostname.\r\n\r\nSigned-off-by: Abhijeet Kasurde <akasurde@redhat.com>"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/82a02530596af8e1b646060447546e60a3f3f167", "message": "VMware: Add new module: vmware_host_service_facts (#34731)\n\nThis adds module to gather facts about VMware host service facts.\r\n\r\nSigned-off-by: Abhijeet Kasurde <akasurde@redhat.com>"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/eabd7eafad6e602a3f0dbc60496ab0a5acac40c4", "message": "VMware: Refactor vmware_host module (#33916)\n\nThis fix refactor vmware_host module to use PyVmomi.\nAlso, handle SSLVerifyFault exception to get hostsystem's certificate\nthumbprint.\n\nFixes: #20819\n\nSigned-off-by: Abhijeet Kasurde <akasurde@redhat.com>"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/3f4dfb25742001b937fad03b0176e34a15201498", "message": "WinRM: fix format_exc call (#34233)\n\nThis fix adds correct call for format_exc in winrm plugin.\r\n\r\nSigned-off-by: Abhijeet Kasurde <akasurde@redhat.com>"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/2b3b689616329f11e578aaf7aac5d14a7877c489", "message": "vmware: Add new module 'vmware_host_config_facts' (#34570)\n\nThis adds a new module called 'vmware_host_config_facts' which\r\ngathers facts about advanced configuration informantion about ESXi host or all\r\nESXi hosts from given cluster.\r\n\r\nSigned-off-by: Abhijeet Kasurde <akasurde@redhat.com>"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/63536944a4089a57999c896c38d1796714a58207", "message": "VMware: Add schedule datetime for powerstate (#34652)\n\nThis fix adds an user parameter for scheduled powerstate management of\nvirtual machines.\n\nSigned-off-by: Abhijeet Kasurde <akasurde@redhat.com>"}], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35128", "title": "VMware: Add basic vmware module related guide", "body": "\r\n##### SUMMARY\r\nThis fix adds page which tries to consolidate various information related\r\nto vmware modules and debugging related information.\r\n\r\nSigned-off-by: Abhijeet Kasurde <akasurde@redhat.com>\r\n\r\n##### ISSUE TYPE\r\n - Docs Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\ndocs/docsite/rst/guide_vmware.rst\r\ndocs/docsite/rst/guides.rst\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n2.5devel\r\n```", "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/35088", "title": "VMware: vmware_guest template find", "body": "##### SUMMARY\r\nThis fix adds logic to find unique virtual machine template using name.\r\n\r\nFixes: #26669\r\n\r\nSigned-off-by: Abhijeet Kasurde <akasurde@redhat.com>\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nlib/ansible/module_utils/vmware.py\r\nlib/ansible/modules/cloud/vmware/vmware_guest.py\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n2.5devel\r\n```", "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/35040", "title": "VMware: add new module: vmware_host_acceptance", "body": "\r\n##### SUMMARY\r\nSigned-off-by: Abhijeet Kasurde <akasurde@redhat.com>\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\nlib/ansible/modules/cloud/vmware/vmware_host_acceptance.py\r\ntest/integration/targets/vmware_host_acceptance/aliases\r\ntest/integration/targets/vmware_host_acceptance/tasks/main.yml\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n2.5devel\r\n```", "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/35036", "title": "VMware: add new module: vmware_host_package_facts", "body": "##### SUMMARY\r\nSigned-off-by: Abhijeet Kasurde <akasurde@redhat.com>\r\n\r\n##### ISSUE TYPE\r\n - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\nlib/ansible/modules/cloud/vmware/vmware_host_package_facts.py\r\ntest/integration/targets/vmware_host_package_facts/aliases\r\ntest/integration/targets/vmware_host_package_facts/tasks/main.yml\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n2.5devel\r\n```", "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34984", "title": "VMware: add new module: vmware_host_vmnic_facts", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nSigned-off-by: Abhijeet Kasurde <akasurde@redhat.com>\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\nlib/ansible/modules/cloud/vmware/vmware_host_vmnic_facts.py\r\ntest/integration/targets/vmware_host_vmnic_facts/aliases\r\ntest/integration/targets/vmware_host_vmnic_facts/tasks/main.yml\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n2.5devel\r\n```", "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34494", "title": "yum: Support disable_excludes and disable_includes", "body": "##### SUMMARY\r\nFixes: #29799\r\n\r\nSigned-off-by: Abhijeet Kasurde <akasurde@redhat.com>\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\nlib/ansible/modules/packaging/os/yum.py\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n2.5devel\r\n```", "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34491", "title": "docker_login: Hide password from response", "body": "##### SUMMARY\r\nFixes: #32869\r\n\r\nSigned-off-by: Abhijeet Kasurde <akasurde@redhat.com>\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nlib/ansible/modules/cloud/docker/docker_login.py\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n2.5devel\r\n```", "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34268", "title": "nmcli: Allow setting ipv4.dhcp-client-id parameter", "body": "##### SUMMARY\r\nSigned-off-by: Orion Poplawski <orion@cora.nwra.com>\r\nSigned-off-by: Abhijeet Kasurde <akasurde@redhat.com>\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nlib/ansible/modules/net_tools/nmcli.py\r\ntest/units/modules/net_tools/test_nmcli.py\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n2.5devel\r\n```", "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34232", "title": "Remove deprecated get_exception API", "body": "##### SUMMARY\r\nSigned-off-by: Abhijeet Kasurde <akasurde@redhat.com>\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nseveral\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n2.5devel\r\n```", "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34177", "title": "VMware: Add new module - vmware_drs_rule", "body": "##### SUMMARY\r\nThis adds a new module called vmware_drs. This module add\r\naffinity rule for VM-VM in given cluster.\r\n\r\nFixes: #32109\r\n\r\nSigned-off-by: Abhijeet Kasurde <akasurde@redhat.com>\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\nlib/ansible/modules/cloud/vmware/vmware_drs.py\r\ntest/integration/targets/vmware_drs/aliases\r\ntest/integration/targets/vmware_drs/tasks/main.yml\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n2.5devel\r\n```", "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/33735", "title": "github_release: Fix state returned from module", "body": "##### SUMMARY\r\nThis fix corrects the module state returned by github_module.\r\nNow,\r\n* When the release already exists, state is \"ok\"\r\n* When the release is created, state is \"changed\"\r\n\r\nFixes: #33687\r\n\r\nSigned-off-by: Abhijeet Kasurde <akasurde@redhat.com>\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module/plugin/module/task -->\r\nlib/ansible/modules/source_control/github_release.py\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n2.5devel\r\n```", "author_association": "MEMBER"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "giovannisciortino": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/b4736a874150d6e8d1bcc6e3af5e0df00fc83a82", "message": "Add rhsm_repository module (#28292)\n\nAdd rhsm_repository module"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "abirami-n": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/775118aae2cf35ad103007ede59cf20cf79f84ae", "message": "2.5 Plugin Environment support and Testcases for dellos6 modules (#34890)\n\n* Dellos6_2.5_support\r\n\r\n* cleanup\r\n\r\n* Fix pep8\r\n\r\n* fix waitfor\r\n\r\n* fix_facts\r\n\r\n* fix_assert"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "albertomurillo": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/2018a61489c56e44fdd551445121ac634a4b9177", "message": "archive: Add support for xz (#34110)\n\n* Add support for xz format on archive module\n\nFixes #34037\nFixes #34119\n\nSigned-off-by: Alberto Murillo <albertomurillosilva@gmail.com>"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "resmo": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/4d2204882ab84d599dfbbd7e84c84d0468a46257", "message": "changelog: add new modules to changelog (#35158)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/8fdfda76e91d9fb2158e473fb5fc926167209a9f", "message": "cloudstack: cs_network: implement subdomain_access (#34741)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/d1ce8e99243e0095e415f5579f53b09a0ae6f8cc", "message": "vultr: add integration tests (#35157)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/386c6b4051bae34774b12b17e073ee68cd473d40", "message": "influxdb: add login aliases (#34599)\n\ninfluxdb_user module has user_name, user_password which may confuse with existing\r\nlogin arg username and password. Added aliases prefixed ith login_ to\r\nhelp distinguish."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/1a8bbcf14674c3c0efb49e0d276233b2dfa33bd9", "message": "vultr: new module vr_dns_record (#34423)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/f8d2f0ac44f3e7a68277631bf4d464ed8b397832", "message": "tests: cs_router: fix tests not desructive anymore (#34957)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/3b7136c5ab04f37a7b572405059270896f824125", "message": "cs_vpn_connection: fix wrong connection used (#34937)\n\n* cs_vpn_connection: fix wrong connection used\r\n\r\n* fix vpn_customer_gateway is required\r\n\r\n* fix tests as we have a new required param\r\n\r\n* code styling"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/6bed4d6ef3d42dd93476475f3a152e159f603c59", "message": "botmeta: new maintainer for letsencrypt (#34954)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/698d5a524cd1d4dcd9a0f97bca75d1120c6d2599", "message": "vultr: add api_endpoint param (#34850)\n\n* vultr: add new param api_endpoint\r\n\r\n* vultr: improve error handling for values read from ini file"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/5a7a5b88c9364f88326bba2375e8c1bd8dd09c20", "message": "vultr: fix config ini params ignored (#34848)\n\n* vultr: fix config ini params ignored\r\n\r\n* vutlr: align docs with configs"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/1c3bba0bdb8f030a382ece60efa3cd92e4df70fe", "message": "cloudstack: fix timeout in ini config file is ignored (#34833)\n\n* cloudstack: fix timeout in ini config file is ignored\r\n\r\n* cloudstack: prepare for unit tests"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/7bdbe9ab87b6d4568389bc911db45fa3a29cfd39", "message": "vultr: new module vr_startup_script (#34374)\n\n* vultr: new module vr_startup_script\r\n\r\n* add integration tests"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/e3b5be08878b0a10c194834a4a9f6f45be84dca3", "message": "vr_server: fix assumption returned id is an int (#34765)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/476030a49c2aff82f35e44a9ad9099fb16217d70", "message": " vr_server: implement startup_script  (#34565)\n\n* simplify\r\n\r\n* vr_server: implement startup_script"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/be06799b20fe7db0972d22c87fc863917ccc4c90", "message": "vultr: new module vr_dns_domain (#34377)\n\n* vultr: new module vr_dns_domain\r\n\r\n* minor doc fix"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/adbb2f7016f37b844a4278a657f9c1498c9390a9", "message": "vultr: new module vr_user (#34521)\n\n* vultr: new module vr_user\r\n\r\n* add missing doc of arg force\r\n\r\n* make password less required\r\n\r\n* optimize error msg\r\n\r\n* update docs"}], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35184", "title": "iam_role: default state to present", "body": "##### SUMMARY\r\ndefault state to present.\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\niam_role\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n2.5\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/35173", "title": "exo_dns_record: remove limitation for multiple reocrds only for A type", "body": "##### SUMMARY\r\nThis removes a limitation \r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nexo_dns_record\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n2.5\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/35155", "title": "mongodb_user: fix check_compatibility needs auth session", "body": "##### SUMMARY\r\nFixes #34153, unsure if this is an issue in pymongo.\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n\r\n\r\n##### COMPONENT NAME\r\nmongodb_user\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n2.4\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34991", "title": "doc: fix loop examples", "body": "##### SUMMARY\r\nfix loop examples, \r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Docs Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\ndoc\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n2.5\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34537", "title": "basic: allow one or more when param list having choices", "body": "##### SUMMARY\r\nAllow one or more when type='list' with choices.\r\n\r\ne.g.\r\n~~~\r\nTASK [test_vr_user : test fail param not in choices] ****************************************************************************************************************************\r\nfatal: [localhost -> localhost]: FAILED! => {\"attempts\": 1, \"changed\": false, \"msg\": \"value of acls must be one or more of: manage_users, subscriptions, provisioning, billing, support, abuse, dns, upgrade, got: ['bad', 'dns', 'manage_users']\"}\r\n~~~\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nbasic\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n2.5\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34108", "title": "doc: guide how to use vultr", "body": "##### SUMMARY\r\nvutlr docs \r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Docs Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\nvultr\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n2.5\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "MEMBER"}], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/4162941", "body": "omg...  thx! Bad bad code cleanup of mine...\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4162941/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/4162949", "body": "this was maybe a bad example but, it would be good showing an example that you can specify a hostname to be absent, e.g.:\n\n```\nhost: hostname=foobar.com state=absent\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4162949/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/7400694", "body": "See ML, Please add this fix into 1.7.1. Thanks!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7400694/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/9532281", "body": "Thanks for your work!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/9532281/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/10962603", "body": "@romain-dartigues \nthere is actually already a PR for a clean cloudstack dynamic inventory https://github.com/ansible/ansible/pull/9835, but you can also use it independently in the meanwhile from my ansible-cloudstack repo https://github.com/resmo/ansible-cloudstack/blob/master/cloudstack.py\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/10962603/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/11591638", "body": "there is a typo here reported to me by twitter... on my tweet about his. brave new world.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/11591638/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}], "review_comments": []}, "saichint": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/4bc22be61441641c2162e4b7d0c290b887c09c35", "message": "Fix for nxos_pim issues (#35103)\n\n* fix nxos_pim issues\r\n\r\n* unused line removed\r\n\r\n* unused line removed\r\n\r\n* remove unnecessary files"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/3a144b290d6161ced77df5c8912dad3af646197b", "message": "fix for nxos_vxlan_vtep_vni issues (#34946)\n\n* fix vxlan_vtep_vni issues\r\n\r\n* pep8 errors"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/c04cd8642d0589c3ffc0395a24bd2843a066b196", "message": "fix vxlan idempotent issue (#34750)"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "mscherer": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/8071cc05291d5b157a383f4d994f1cf854b416de", "message": "Add support for adding the intermediate cert (#35144)\n\nacme-tiny generate certificate without adding add the LE intermediate\ncertificate, which make several browsers and curl complain."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/347b5d1e50d6e85837695d7637388ed8de889674", "message": "write need bytes object on python 3 (#35143)\n\nOtherwise, it fail with:\n\n    Traceback (most recent call last):\n      File \\\"/tmp/ansible_c1zmq3i9/ansible_module_openssl_certificate.py\\\", line 808, in <module>\n        main()\n      File \\\"/tmp/ansible_c1zmq3i9/ansible_module_openssl_certificate.py\\\", line 787, in main\n        certificate.generate(module)\n      File \\\"/tmp/ansible_c1zmq3i9/ansible_module_openssl_certificate.py\\\", line 692, in generate\n        certfile.write(str(crt))\n    TypeError: a bytes-like object is required, not 'str'"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/f23f277e468cb3c02bf7bcbd866e93d9b71f2ff4", "message": "Verify that acme-tiny is present (#35145)\n\n* Verify that acme-tiny is present\n\n* Use run_command rather than subprocess for acme-tiny\n\nBesides consistency with the rest of the code base, this also\nadd 2 bug fixes:\n- ansible should no longer show \"warning, junk after json\" when using the module\n- it also verify the return code of acme-tiny, and so fail when the\nverification fail. The previous code didn't check rc, so it would continue\nwith a empty file"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/2a9daaa45b0252cd935c48b5d0ab4b581aa16e32", "message": "Fix ansible-config with python3 (#34673)\n\nWhen using the -c option, like \"ansible-config -c ~/.ansible.cfg view\"\r\nwith python 3, it fail with this error message:\r\n\r\n  ERROR! Unsupported configuration file extension for b'/home/misc/.ansible.cfg': .cfg"}], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35147", "title": "Remove deadcode since diff is never used", "body": "##### SUMMARY\r\n\r\nFlake8 keep warning me about that\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nopenssl_certificate\r\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34828", "title": "Remove deprecated code", "body": "##### SUMMARY\r\nRemove deprecated code that was supposed to go once 2.4 is out.\r\n\r\n##### ISSUE TYPE\r\n - Code Cleanup Pull Request\r\n\r\n##### COMPONENT NAME\r\nvault\r\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34430", "title": "Fix detection of import failure in firewalld module when the module is not installed", "body": "##### SUMMARY\r\n\r\nOn a Debian system without the modules installed, it fail\r\nwith the following traceback:\r\n\r\n    Traceback (most recent call last):\r\n      File \"/tmp/ansible_KNCWAU/ansible_module_firewalld.py\", line 1017, in <module>\r\n        main()\r\n      File \"/tmp/ansible_KNCWAU/ansible_module_firewalld.py\", line 811, in main\r\n        if fw_offline:\r\n    NameError: global name 'fw_offline' is not defined\r\n\r\n\r\n##### ISSUE TYPE\r\n\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nfirewalld\r\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/33817", "title": "Add os-release file parsing, partially fix #25897", "body": "\r\n##### SUMMARY\r\n\r\nAdd os-release file parsing, partially fix #25897\r\n/etc/os_release is documented on https://www.freedesktop.org/software/systemd/man/os-release.html\r\n\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nsetup\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n$ ansible --version\r\nansible 2.5.0 (add_fact_os_release 1b2081dfbb) last updated 2017/12/12 15:56:51 (GMT +200)\r\n  config file = /home/misc/.ansible.cfg\r\n  configured module search path = [u'/home/misc/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/misc/checkout/git/ansible/lib/ansible\r\n  executable location = /home/misc/checkout/git/ansible/bin/ansible\r\n  python version = 2.7.5 (default, May  3 2017, 07:55:04) [GCC 4.8.5 20150623 (Red Hat 4.8.5-14)]\r\n```", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "caphrim007": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/bff862b05df6249709eb5f01b2a440cbd17ea3af", "message": "Fixes bigip_asm_policy (#35154)\n\nThis module had been unable to successfully create policies\r\non different partitions. This appears to be fixed now"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/ca8982f96cec32c771b8c988a93f1481bc5e7b22", "message": "Fixes some bugs and things (#35122)\n\nRemoves deprecations and fixes bugs."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/90f0c411e4f8bd8437c6a2da6e32b797ce6a32d3", "message": "Adds module for bigip_device_group_member (#35121)\n\nModule allows for members to be managed in a device group"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/585d8cf4c74f51c8d9c086f38cf1903e611f2d2d", "message": "Adds bigip_ucs_fetch module (#35113)\n\nThis module can be used to download UCS files from a BIG-IP"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/8cc0e744482313faf9103ecda47e52672792386c", "message": "Adds better error handling to f5 api connections (#35020)\n\nPreviously, the failure of the API connection would result\r\nin a stack trace. This patch makes the failure capable of exiting\r\nwith fail_json"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/529404adc42743d0ef251e32492c0ff0dd20fc6b", "message": "Removes redundant docs (#35006)\n\nbigip_routedomain included docs that are already part of the f5\r\ndocumentation fragment. This removes the redundant ones."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/acb26758ef686861eb8544df319fd39350aaa81d", "message": "Adds better cli detection for bigip_command (#34975)\n\nThe new detection includes things like provider spec. The action\r\nplugin for bigip generally was changed, so this is a required change"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/e9b52aca64b5a026710b66521eb383dc4de043f5", "message": "Minor bigip fixes (#34971)\n\nUpdating docs in modules. fixing imports"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/944ae47701967e0b62fe9cf48498e6d11ce266d0", "message": "Detects errors in bigip_config (#34965)\n\nThere are changes that the merge config can fail, but the module\r\nwill still report success. This adds a blob of code to start\r\ncollecting those failures and bubbling up a module failure\r\naccordingly."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/17d9ba304ea8da031b6600424dd001a7011e8853", "message": "Adds module for bigip device group (#34958)\n\nThis module can be used to manage a device group on a bigip"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/835dd30d50ca27794d23016e5996cc593f509670", "message": "Fixes, and updates, bigip action plugin and module utils (#34947)\n\nThese fixes make provider work across more things. Adds a timeout\r\nvalue, and makes the action plugin look similar to other network\r\naction plugins"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/9aba711519fb1982db0019e76e3104d050772d81", "message": "Adds bigip_static_route module (#34859)\n\nThis module can be used to manage static routes on a BIG-IP"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/c548ab0f18cf1b97456081b108f1c5af49a64532", "message": "Refactors and deprecation removals (#34830)\n\nThis patch is primarily a refactor to make the validate-modules arg-spec\r\nno longer generate a traceback. It additionally includes removal of deprecated\r\ncode in the virtual server module."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/a10aee0fc3d92063dfb719ca28103b46c3b6d4de", "message": "Adds refactors for more f5 modules (#34824)\n\nThe main patch is to remove the traceback generating code. There are\r\nother small fixes that were made in addition to doing that.\r\n\r\n* Removed re-def of cleanup_tokens.\r\n* Changed parameter args to be keywords.\r\n* Changed imports to include new module_util locations.\r\n* Imports also include developing (sideband) module_util locations.\r\n* Changed to using F5Client and plain AnsibleModule to prevent tracebacks caused by missing libraries.\r\n* Removed init and update methods from most Parameter classes (optimization) as its now included in module_utils.\r\n* Changed module and module param references to take into account the new self.module arg.\r\n* Minor bug fixes made during this refactor."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/0e4e7de0001c3b53c586e6b9bafcd3f15bb862c0", "message": "Various F5 related fixes for traceback raising (#34820)\n\nThe main purpose of this patch is to do the refactor that\r\nsupports replacing tracebacks with fail_json. Additionally, the\r\nfollowing was done.\r\n\r\n* Removed re-def of cleanup_tokens.\r\n* Changed parameter args to be keywords.\r\n* Changed imports to include new module_util locations.\r\n* Imports also include developing (sideband) module_util locations.\r\n* Changed to using F5Client and plain AnsibleModule to prevent tracebacks caused by missing libraries.\r\n* Removed init and update methods from most Parameter classes (optimization) as its now included in module_utils.\r\n* Changed module and module param references to take into account the new self.module arg.\r\n* Minor bug fixes made during this refactor."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/eace686044e0c275c3dcc61370ece552532611fb", "message": "Various fixes and changes for F5 (#34817)\n\nPrimarily, this patch contains refactors to remove tracebacks that\r\nare generated when libraries are missing. There is also,\r\n\r\n* Removed re-def of cleanup_tokens.\r\n* Changed parameter args to be keywords.\r\n* Changed imports to include new module_util locations.\r\n* Imports also include developing (sideband) module_util locations.\r\n* Changed to using F5Client and plain AnsibleModule to prevent tracebacks caused by missing libraries.\r\n* Removed init and update methods from most Parameter classes (optimization) as its now included in module_utils.\r\n* Changed module and module param references to take into account the new self.module arg. Minor bug fixes made during this refactor."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/44a5b3abb495a3939396631fe9ecf8c40b3182f3", "message": "Various fixes (#34815)\n\nThis patch was primarily an effort to reduce traceback errors for\r\nwork that sivel was doing. Part of (and in some cases in addition to)\r\nthat, the following was done.\r\n\r\n* Removed re-def of cleanup_tokens.\r\n* Changed parameter args to be keywords.\r\n* Changed imports to include new module_util locations.\r\n* Imports also include developing (sideband) module_util locations.\r\n* Changed to using F5Client and plain AnsibleModule to prevent tracebacks caused by missing libraries.\r\n* Removed init and update methods from most Parameter classes (optimization) as its now included in module_utils.\r\n* Changed module and module param references to take into account the new self.module arg.\r\n* Minor bug fixes made during this refactor."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/18d33eeb892cee671beb1f4433ba02b53a80f721", "message": "Adds the AFM address list module (#34814)\n\nThis module can be used to manage address lists on a BIG-IP running\r\nAFM."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/9314607c386d1d75742934dd3c2de88087611a1a", "message": "Adds selective assignment of kwargs (#34813)\n\nFor the f5 module utils, the parameters base class needs to selectively\r\nget args from kwargs"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "chouseknecht": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/a0bb1935985083e34d33cfb0fba45a1403f824ef", "message": "Add K8s inventory plugin (#34920)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/6a75c1a1385a5b7de9cef28d2db57225be5cd234", "message": "Fix name param. Remove logging. (#34881)"}], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35127", "title": "Upgrade to openshift 4.0", "body": "##### SUMMARY\r\nPreparing to upgrade to v0.4.0 of OpenShift client\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nlib/ansible/module_utils/k8s/helper.py\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0 (feature/k8s-upgrade ed906fc520) last updated 2018/01/20 08:48:13 (GMT -400)\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/Users/chouseknecht/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/chouseknecht/projects/ansible/lib/ansible\r\n  executable location = /Users/chouseknecht/projects/ansible/bin/ansible\r\n  python version = 2.7.14 (default, Nov 14 2017, 23:24:24) [GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.38)]\r\n```\r\n", "author_association": "MEMBER"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "brunocalogero": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/c5a7beecc4ceda8c6dbdc78a55192583d2879c0e", "message": "fix integration tests (#35117)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/a13958d2738cea9512b4501181a780ddda442cbb", "message": "added integration tests (#34825)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/04f1b140d9c905a7bdc458dec511861e48b5820b", "message": "added aci_interface_policy_leaf_policy_group module (#34968)\n\n* added aci_interface_policy_leaf_policy_group module\r\n\r\n* fixing documentation errors\r\n\r\n* fixed argument_spec function and fixing documentation errors\r\n\r\n* added documentation extends..\r\n\r\n* removed unnecessary aliases, improved notes, improved examples to show optional description\r\n\r\n* fixing sanity checks\r\n\r\n* fixed proposed changes by dag\r\n\r\n* Fix one more leftover"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/e130b3eed25dafc924133caba766213d6127aa50", "message": "added aci_switch_leaf_selector integration tests (#34951)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/1166e181ecdf3a9c82514590c505df3e7b781f80", "message": "added aci_switch_leaf_policy_profile integration tests (#34952)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/bf69f987f9abdcea267fdf20181d08fbd81aceee", "message": "added aci_interface_selector_to_switch_policy_leaf_profile integration test (#34903)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/545650c3b1a50c4d2909d595511433d667dd957e", "message": "aci_switch_leaf_selector module (#34041)\n\n* added aci_switch_leaf_policy_profile module WIP\r\n\r\n* fixed pep8 errors for PR\r\n\r\n* fixed unwanted modifications and fixed pep8 errors\r\n\r\n* fixed suggested errors for PR\r\n\r\n* adding WIP aci_switch_leaf_selector module\r\n\r\n* fixed for pull request\r\n\r\n* fixing pep8 errors, bad indents\r\n\r\n* improved initial description\r\n\r\n* fixed pep8 doc errors\r\n\r\n* updated module to include infra:NodeBlk and infra:RsAccNodePGrp instead of having seperate modules for the latter\r\n\r\n* fixing pep8\r\n\r\n* adding 'name' alias to leaf_selector\r\n\r\n* updating example\r\n\r\n* updating aliases, forgot 'name' again\r\n\r\n* added examples\r\n\r\n* Fix pylint errors\r\n\r\n* Fix trailing whitespace issue\r\n\r\n* Fix one more pylint issue"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/61d50a12e5092ee75a14ec0555dc9ce6cea9701c", "message": "aci_access_port_to_interface_policy_leaf_profile module (#34398)\n\n* added aci_switch_leaf_policy_profile module WIP\r\n\r\n* fixed pep8 errors for PR\r\n\r\n* fixed unwanted modifications and fixed pep8 errors\r\n\r\n* fixed suggested errors for PR\r\n\r\n* adding WIP aci_switch_leaf_selector module\r\n\r\n* fixed for pull request\r\n\r\n* fixing pep8 errors, bad indents\r\n\r\n* improved initial description\r\n\r\n* fixed pep8 doc errors\r\n\r\n* updated module to include infra:NodeBlk and infra:RsAccNodePGrp instead of having seperate modules for the latter\r\n\r\n* fixing pep8\r\n\r\n* adding 'name' alias to leaf_selector\r\n\r\n* updating example\r\n\r\n* updating aliases, forgot 'name' again\r\n\r\n* adding aci_interface_policy_leaf_profile module\r\n\r\n* removing unwanted module.. man I always make this mistake\r\n\r\n* add aci_access_port_to_interface_policy_leaf_profile module\r\n\r\n* added example and integration tests\r\n\r\n* Fix pylint errors"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/393c5bea6774348532aaccf7c67cad64f791a63a", "message": "aci_switch_leaf_policy_profile module  (#33955)\n\n* added aci_switch_leaf_policy_profile module WIP\r\n\r\n* fixed pep8 errors for PR\r\n\r\n* fixed unwanted modifications and fixed pep8 errors\r\n\r\n* fixed suggested errors for PR\r\n\r\n* fixing PR errors\r\n\r\n* removing unwanted module from this branch for PR\r\n\r\n* removing unwanted module again, rookie git mistakes\r\n\r\n* correcting wrong module name\r\n\r\n* added examples\r\n\r\n* Fix pylint errors\r\n\r\n* Fix trailing whitespace"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/837a05fca4f6eb749aba16ff76af9ded3632de5a", "message": "aci_interface_selector_to_switch_policy_leaf_profile module (#34098)\n\n* added aci_switch_leaf_policy_profile module WIP\r\n\r\n* fixed pep8 errors for PR\r\n\r\n* fixed unwanted modifications and fixed pep8 errors\r\n\r\n* fixed suggested errors for PR\r\n\r\n* adding WIP aci_switch_leaf_selector module\r\n\r\n* fixed for pull request\r\n\r\n* added new module aci_switch_leaf_selector_node_block for PR\r\n\r\n* fixed pep8 issues\r\n\r\n* fixed from and to parameter setup in arg spec\r\n\r\n* fixed pep8 doc errors\r\n\r\n* fixed pep8 indentation error\r\n\r\n* adding new aci_interface_selector_to_switch_policy_leaf_profile module for  PR\r\n\r\n* removed unwanted module\r\n\r\n* added examples\r\n\r\n* Fix pylint errors\r\n\r\n* Remove whitespace introduced by Github editor"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/007c19095d2df613297a4e51b907ecc3ccc4f022", "message": "aci_interface_policy_leaf_profile module (#34364)\n\n* added aci_switch_leaf_policy_profile module WIP\r\n\r\n* fixed pep8 errors for PR\r\n\r\n* fixed unwanted modifications and fixed pep8 errors\r\n\r\n* fixed suggested errors for PR\r\n\r\n* adding WIP aci_switch_leaf_selector module\r\n\r\n* fixed for pull request\r\n\r\n* fixing pep8 errors, bad indents\r\n\r\n* improved initial description\r\n\r\n* fixed pep8 doc errors\r\n\r\n* updated module to include infra:NodeBlk and infra:RsAccNodePGrp instead of having seperate modules for the latter\r\n\r\n* fixing pep8\r\n\r\n* adding 'name' alias to leaf_selector\r\n\r\n* updating example\r\n\r\n* updating aliases, forgot 'name' again\r\n\r\n* adding aci_interface_policy_leaf_profile module\r\n\r\n* removing unwanted module.. man I always make this mistake\r\n\r\n* added examples\r\n\r\n* Fix pylint errors"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "Qalthos": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/bf1580a3335e8c8218224fa497bb2b2930004185", "message": "ios_l2_interface (#35054)\n\n* Fix sending 'None' to device on ios\r\n\r\n* Add ios_l2_interface module & tests\r\n\r\n* Skip l2 tests on non-l2 images\r\n\r\n* Allow test to continue on non-L2 hosts"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/bd989b3088f3a8273db3a4721a15fa4bee53f6c1", "message": "Report invalid connection types for network modules (#34755)\n\n* Emit error on wrong connection type"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/1f2c276481ae7052cc70110029436f0b393ef3b9", "message": "Distinguish between natural connections and rewritten connections (#34706)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/db4460262924dfaf530df7a78a1ab8cc672df191", "message": "Remove vars from include for ios netowrk_cli tests (#34703)\n\nThese should be specified in inventory for 2.5+"}], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34101", "title": "Revert \"Fixes  prompt doubling issue that impacted missing ios enable password prompts. (#33794)\"", "body": "\r\n\r\n##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\nI think this has been fixed another way, and is causing issues for other\r\npeople.\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\nios\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n2.5\r\n```", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "jborean93": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/d0e6889f9341fa8eb1a0639af5d557f331643429", "message": "win_become: another option to support become flags for runas (#34551)\n\n* win_become: another option to support become flags for runas\r\n\r\n* removed uneeded entries\r\n\r\n* fixed up whitespace issue\r\n\r\n* Copy edit"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/9106284c1ce4b7b298ec0c5d87ac372917e7eb94", "message": "copy tests: only create recursive symlink in tests (#35073)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/e5c6708d39d0d8ae193296a4812696c5da337a3e", "message": "win_updates: added blacklist and whitelist filtering of updates (#34907)\n\n* win_updates: added blacklist and whitelist filtering of updates\r\n\r\n* fixed sanity issue with docs\r\n\r\n* fix docs typos"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/389f4ef1fb71629a3389306e6324ea5b118275ff", "message": "template: change to pass along the correct template path (#35027)\n\n* template: change to pass along the correct template path\r\n\r\n* standardise tmp path behaviour\r\n\r\n* removed if condition as it should not be needed"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/630ae01f91e4ee93e5e1d5c0c9944a27be5bf730", "message": "win_wait_for: fix tests after attempts change (#35026)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/f0134079e3aaff3a6c8d31ff55cd3d01c82f2bc8", "message": "win_script: work when argument exceeds stdin buffer size (#33855)\n\n* win_script: work when argument exceeds stdin buffer size\r\n\r\n* Added test for large argument being passed"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/8edd1cf18220bbb2d8743035a3843ff4e4064c24", "message": "changed to enable windows temp path override (#34967)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/1f69b8e55c816a4375ac2f949137116706bdd4e7", "message": "windows path: fix failing test (#34973)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/6f9f337a67d228cb1ed7a805c74a4085bbd86410", "message": "standardise the powershell FileUtils (#34969)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/d43cb0a438d447b507843aebb12c8f9fbd7172a1", "message": "win_security_policy: Add link to the win_user_right module (#34953)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/9d9c117580e8d20f6249561a377244dc44764459", "message": "winrm scheme default behaviour (#34908)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/557716dc4916640263ae3797af2f1163d4d3a4e5", "message": "win_updates: action plugin-ify it (#33216)\n\n* converted win_updates to an action plugin for automatic reboots\r\n\r\n* do not set final result when running under async\r\n\r\n* Updated documentation around win_updates with async and become"}], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34386", "title": "windows: added Ansible.IO c# code to work on paths greater than 260", "body": "##### SUMMARY\r\nThis PR adds the following c# classes\r\n\r\n* Ansible.IO.File\r\n* Ansible.IO.FileInfo\r\n* Ansible.IO.Directory\r\n* Ansible.IO.DirectoryInfo\r\n\r\nThese classes are designed to be a like for like replacement of the `System.IO.*` class of the same name but also includes the ability to interact with files/directories that exceed the max path limit of 260 characters. Unfortunately we have no choice but to use the Win32 APIs to make these calls as .NET does not support the `\\\\?\\` prefix which allows the paths to exceed the 260 limit.\r\n\r\nOnce this is in I will be looking at changing win_file, win_find, win_owner, win_acl, and win_acl_inheritance to use the new c# code in separate PRs.\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nAnsible.ModuleUtils.FileUtil.psm1\r\nAnsible.ModuleUtils.LinkUtil.psm1\r\nwin_command\r\nwin_shell\r\nwin_stat\r\nwin_wait_for\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n2.5\r\n```\r\n\r\n  \r\n  ", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "hkrist": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/1c22d82c5e8d624046323aa6c2a87d3b68009c60", "message": "consul_io: fixed service availability check (#34293)\n\nservice is only up if the node publishing it is also available"}], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34103", "title": "helpers: Typo fixed. Checking for import_tasks allowed for using loops on 'import_role' statements", "body": "##### SUMMARY\r\nCondition wasn't checking what it should have.\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "samdoran": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/10a8c6bc2531f1b42509c80bf3b746aacedaec4e", "message": "Integration tests for import/include (#33418)\n\n* First pass at include_role tests\r\n\r\n* Reorganize test structure\r\n\r\nDo all import and include tests in a single target.\r\n\r\n* Build out more tests and test with linear and free strategy for each type\r\n\r\n* import_role tests\r\n\r\n* Set target host for play test\r\n\r\n* Basic import_playbook tests\r\n\r\n* Basic import/include_tasks tests\r\n\r\n* Add recursion test\r\n\r\n* import_playbook tests\r\n\r\n* Add import_playbook group_vars test\r\n\r\nIssue #33177\r\n\r\n* Additional group_var tests for import_playbook\r\n\r\n* Enable recursion test\r\n\r\n* More work on import_tasks\r\n\r\n* Run all tests via run.sh, improve conditional tests, add never tag\r\n\r\nAdd never tag to certain failining tests and explicitly skip it for now until #34104 is merged. Some tasks need to remain commented out because they cause the entire play to fail and aren't skippable by tags because they are syntax and/or variable checks.\r\n\r\nImprove test for whether or not a role was run based on a conditional. Since the [import|include]_role does not register a variable, use a variable that is set inside a role as a canary test for whether or not the role was run.\r\n\r\n* Use a fail task rather than trigger a failure via bogus command\r\n\r\nThis should resolve the \"unstable\" test results.\r\n\r\n* Import tag tests\r\n\r\nFix bug it tests where validate tasks weren't run on tag tests.\r\nAdd tests for task import/include with tags.\r\n\r\n* Remove test for playbook group_var inheritance"}], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35205", "title": "[WIP] Add reboot action plugin", "body": "##### SUMMARY\r\n\r\nCreate a `reboot` action plugin for rebooting *nix hosts.\r\n\r\nFixes #16186\r\n\r\n##### ISSUE TYPE\r\n\r\n - New Module Pull Request\r\n\r\n\r\n##### COMPONENT NAME\r\n`reboot.py`\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n2.5\r\n```\r\n", "author_association": "MEMBER"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "GIC-de": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/2697c0e237df22d0af8876f187cb764ec9b0ee06", "message": "junos scp module (#31950)\n\n* junos_scp module\n\nThis module transfers files via SCP from or to remote devices running Junos.\n\n* fix version\n\n* add return documentation\n\n* updated return documentation\n\n* docu, renamed args and exceptions\n+ update docu\n+ rename arg download to remote_src (simitlar to copy module)\n+ exception handling for transfer errors\n\n* add tests\n\n* add test_junos_scp_all\n\n* update to reorganized module utils\n\n* fix unit tests"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "xcambar": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/cea681a5c0efac9bfa6505d1acf501afd236079d", "message": "npm module compatible with npm5 (#26582)\n\n* npm module compatible with npm5\r\n\r\nUses the `--long` flag in `npm list` to get the `missing` key back.\r\n\r\n* npm: add integration tests\r\n\r\n* npm: test the module with npm 4 as well\r\n\r\n* Remove debug tasks, use variables\r\n\r\n* Use tests instead of filters\r\n\r\n* Adds xcambar as a maintainer of the npm module"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "kedarX": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/719feef2e05561d4f4ab4eba553be55f73b2ee8b", "message": "* Fix DCI issues and changes to action plugin & utils (#35083)\n\n* * Fix DCI issues and changes to action plugin & utils\r\n\r\n* * Additional check to handle cli only modules for platforms that\r\nsupport netconf"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/93acd7c651bc8c5135a89de6d29f02927048117e", "message": "refactor iosxr_system for cliconf and netconf (#34749)\n\n* * refactor iosxr_system for cliconf and netconf\r\n\r\n* * Fix unit tests and sanity issues"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/0f692f1fe758093450e25c73652f580bfbd38795", "message": "iosxr_user refactor for cliconf and netconf (#34892)\n\n* * refactor iosxr_user for cliconf and netconf\r\n\r\n(cherry picked from commit 5d0994ef598f1601fca00a0c1eff4ebb05ebbf1b)\r\n\r\n* * Purge and units test changes"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/47665ca335b86405e4c478cf37411c8322871a40", "message": "* Fix DCI failure in net_* integration test of iosxr_logging (#34926)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/08957cf46e449e953b7b84532af3dd47b3ed5f34", "message": "cliconf and netconf refactor of iosxr_logging (#34495)\n\n* * cliconf and netconf refactor of iosxr_logging\r\n\r\n* * documentation issue fix\r\n\r\n* * adds required_if and mutually_exclusive in arg spec"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "nwsparks": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/beb0fd9b8bd6b172d44916adb73e68949b585837", "message": "win_iis_webbinding: Fix bug with ipaddress * returning multiple bindings (#34721)\n\n* win_iis_webbinding: Fix bug with ipaddress * returning multiple bindings\r\ninstead of only the ones defined as *. Address possible future issues around\r\nhostheader * by just disallowing it. Resolves 25473. Added new test for\r\nthis case.\r\n\r\nRemoved all validation for https binding collisions due to difficulty in\r\nvalidating all cases in which they could or could not collide. As a\r\nresult, also removed return values relating to certificate data.\r\n\r\nUpdated testing and docs appropriately\r\n\r\n* win_iis_webbinding: added break to remove binding loops"}], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35100", "title": "Win lineinfile fix", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nFixes #33858\r\nAdded test for this particular issue\r\nUpdated the copyright headers\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\nwin_lineinfile\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.5.0 (win_lineinfile_fix d5a530a351) last updated 2018/01/19 16:34:00 (GMT +000)\r\n  config file = None\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /opt/ansible/lib/ansible\r\n  executable location = /opt/ansible/bin/ansible\r\n  python version = 2.7.12 (default, Nov  2 2017, 19:20:38) [GCC 4.8.5 20150623 (Red Hat 4.8.5-11)]\r\n\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\nwin_lineinfile had a section which was converting `\\r\\n` to``` `r`n` ``` which is the PowerShell method of inserting line breaks. This was causing things like some windows paths (ex. c:\\return\\new) to be inserted incorrectly. \r\n\r\nAfter removing the section, if line breaks are desired they can still be done `path: \"break\\r\\nhere\"`. The quoting is important.\r\n\r\n```\r\n  - name: no line break\r\n    win_lineinfile:\r\n      path: c:\\test.txt\r\n      line: c:\\return\\new\r\n\r\n  - name: no line break\r\n    win_lineinfile:\r\n      path: c:\\test.txt\r\n      line: 'c:\\return\\new'\r\n\r\n  - name: line break occurs\r\n    win_lineinfile:\r\n      path: c:\\test.txt\r\n      line: \"c:\\return\\new\"\r\n```\r\n\r\nAny conversions are occurring in Ansible prior to being processed by PowerShell. So things like ```path: \"break`r`nhere\"``` are interpreted literally by powershell and no line break will occur.", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "tiggi": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/fb18338cdc7120b6f6ccfc39472748d3e3e80b1f", "message": "Change documentation for path: in openssl_csr to match reality (#35045)"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "seuf": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/9b07746ff1a5c83872f1e660f8eff9e152c51365", "message": "New module: monitoring/grafana_datasource (#29006)\n\n* Add monitoring/grafana_datasource module\r\n\r\nadded ds type mysql and postgres + check of parameters\r\n\r\n* Added option max_concurrent_shard_requests for es_version >= 5.6"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "Spredzy": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/a2b00e9b5201f52355643b6f8c2967d798dd6d54", "message": "openssl_certificate: Ensure issuer field is set (#34982)\n\nEnsure the Issuer field of the certificate is set when using the\r\nselfsigned backend.\r\n\r\nFixes: https://github.com/ansible/ansible/issues/34963"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "trishnaguha": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/8a6d69919863c2b1583da03e91e1c2108cde892c", "message": "Enable nxapi nxos_banner test (#35033)\n\nSigned-off-by: Trishna Guha <trishnaguha17@gmail.com>"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/f806a58a5e3d8089ba2bb68cd45edfa0233cc975", "message": "Idempotency test for enabled mode nxos_udld_interface (#35031)\n\nSigned-off-by: Trishna Guha <trishnaguha17@gmail.com>"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/290b1651aecd324d5d36312e1562efe3703a3f57", "message": "fix nxos_nxapi test (#34972)\n\n* Remove nxos_nxapi config test as config param is deprecated and removed\r\n\r\nSigned-off-by: Trishna Guha <trishnaguha17@gmail.com>\r\n\r\n* fix nxos_nxapi disable test\r\n\r\nSigned-off-by: Trishna Guha <trishnaguha17@gmail.com>"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/a727930f075d1f9c2b493766da9afd6a7f6fd192", "message": "Remove deprecated params from module argspec nxos modules (#34911)\n\n* Remove deprecated param from module argspec nxos modules\r\n\r\nSigned-off-by: Trishna Guha <trishnaguha17@gmail.com>\r\n\r\n* fix nxos_vrrp syntaxerror\r\n\r\n* Add choices for version _nxos_ip_interface\r\n\r\n* remove check_args function\r\n\r\n* remove include_defaults"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/a65f7021556c8d3b36781f82e53f23a7a8b1e5d1", "message": "add config option to replace argument (#34342)\n\nSigned-off-by: Trishna Guha <trishnaguha17@gmail.com>"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/43a081d1c9b9d8454333027b7d998b99d7c97136", "message": "fix KeyError net_base plugin (#34874)\n\nSigned-off-by: Trishna Guha <trishnaguha17@gmail.com>"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/48ecbb8fb90080b4d1056bbb1dc2bfaddcf2c847", "message": "fix connection gets overridden by network_cli for transport nxapi,eapi net_* modules (#34778)\n\n* fix connection gets overridden by network_cli for transport nxapi,eapi net_* modules\r\n\r\nSigned-off-by: Trishna Guha <trishnaguha17@gmail.com>\r\n\r\n* Define functions in individual action plugins to avoid code duplication\r\n\r\nSigned-off-by: Trishna Guha <trishnaguha17@gmail.com>\r\n\r\n* Add net_* eos tests for eapi\r\n\r\nSigned-off-by: Trishna Guha <trishnaguha17@gmail.com>\r\n\r\n* update plugin code"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/303894dd174091ab262d894737ee515ddd17f8ae", "message": "fix nxos_banner (#34695)\n\nSigned-off-by: Trishna Guha <trishnaguha17@gmail.com>"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/df8b01aaf768e24d61787c5c3d4d47c946df9912", "message": "Handle platform os version for sandbox nxos_nxapi (#34490)\n\nSigned-off-by: Trishna Guha <trishnaguha17@gmail.com>"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/2e76f04a9e821acad8237379e30e39f529a5b403", "message": "Add ios_linkagg DI module (#33215)\n\n* Add ios_linkagg DI module\r\n\r\nSigned-off-by: Trishna Guha <trishnaguha17@gmail.com>\r\n\r\n* pep8 fixes\r\n\r\n* update ios version\r\n\r\n* ios_linkagg integration test\r\n\r\nSigned-off-by: Trishna Guha <trishnaguha17@gmail.com>\r\n\r\n* fix port-channel commands\r\n\r\n* update test\r\n\r\n* ios tests to network_cli\r\n\r\nSigned-off-by: Trishna Guha <trishnaguha17@gmail.com>\r\n\r\n* add required_together check in aggregate and update test\r\n\r\nSigned-off-by: Trishna Guha <trishnaguha17@gmail.com>\r\n\r\n* fix pep8 issues\r\n\r\n* Add discovery of ios switch type\r\n\r\nSigned-off-by: Trishna Guha <trishnaguha17@gmail.com>"}], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35186", "title": "Fix nxos terminal plugin regex to support certain commands", "body": "Signed-off-by: Trishna Guha <trishnaguha17@gmail.com>\r\n\r\n##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nFixes https://github.com/ansible/ansible/issues/35058\r\nFix nxos terminal plugin regex to support certain commands\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\nplugins/terminal/nxos.py\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\ndevel\r\n```", "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34928", "title": "[WIP]fix connection gets overridden by network_cli for transport nxapi,eapi net_* modules", "body": "Signed-off-by: Trishna Guha <trishnaguha17@gmail.com>\r\n\r\n##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nfix connection gets overridden by network_cli for transport nxapi,eapi net_* modules\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\nplugins/action/net_base.py\r\nplugins/action/nxos.py\r\nplugins/action/eos.py\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n2.4\r\n```", "author_association": "MEMBER"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "indispeq": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/943730b70c1f1cf2f3cd21b268a1d5e8638a5f8a", "message": "Update pamd.py to allow module path with slashes (#32197)"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "cwarner-mdsol": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/e6d01ff7e302211ed01efda13fdcb1e9b3121b50", "message": "fix for ec2 module terminating instances outside of inventory -- Fixes #19427 (#26621)\n\n* Proposed fix for issue 19427\n\n* Use string_types and to_text for evaluation, if not on empty dict.\n\n* if int, to_text and continue on"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "prasadkatti": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/5a9562a1012debab80768b17aefd6cd99f4f694f", "message": "Add option to toggle describe_image_attribute lookups (#34977)"}], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34022", "title": "Integration tests for route53_zone", "body": "##### SUMMARY\r\nIntegration tests for route53_zone\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n`route53_zone`\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\ndevel\r\n```", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "nitzmahone": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/3371b5eb03366a7d7d683050a8bc50904e2fed3f", "message": "restore format arg to azure_rm_common errmsg"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/3e56883c44cc54d11c649a0eb64fd6b1a12f1322", "message": "zap extra format args from azure_rm_common errmsg"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/68ccd5fc007e5f062dc95ca28c822b3b404f8211", "message": "fix minimum client version checking (#35018)\n\n* bump minimum client versions to match requirements file\r\n* improve prescriptive error messaging to match current recommendations"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/e726c7ecf72772f35d4defb61f112026cfce6464", "message": "disable host_key_checking in virtualmachine test"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/d7fbc947580d3ab7d32801668b7fb72eaa2200c6", "message": "add custom_action support to azure_rm_virtualmachine (#34970)\n\n* Adds custom_data parameter to azure virtual machine resource\r\n\r\nInvoke custom_data in an integration test: This invocation of\r\ncustom_data should not cause any side effects.\r\n\r\n* Bugfix: String encoding now works in both python2 and 3\r\n\r\n* Fix pep8 violations\r\n\r\n* Use nginx to serve a text file created via custom_data and verify that\r\nthat custom_data is working\r\n\r\n* fix up azure_rm_virtualmachine custom_data\r\n\r\n* tweaks #25924 \r\n* simplify string encoding fun\r\n* don't rely on external packages"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/9cf217a1518fa36eba7e2d8cd81adc5a064f0901", "message": "allow cert validation to be disabled for Azure modules (#34906)\n\n* `validate` or `ignore` values may be set by module, credential profile, or env. Module has highest precedence, followed by credential profile, then environment, and defaults to `validate` if not otherwise specified.\r\n* fixes #33455"}], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35075", "title": "[WIP] [skip ci] DO NOT MERGE - Azure static model sample", "body": "##### SUMMARY\r\n* remove all shared client/model code from common\r\n* define needed clients and API versions locally to each module with static imports\r\n* static imports allow IDE completion, static analysis, etc to work properly\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nazure_rm_common\r\n\r\n##### ANSIBLE VERSION\r\n2.5.0\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/35074", "title": "[WIP] [skip ci] DO NOT MERGE - Azure dynamic model sample", "body": "##### SUMMARY\r\n* remove all shared client/model code from common\r\n* define needed clients and API versions locally to each module (ONCE)\r\n* models are loaded dynamically from client\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nazure_rm_common\r\n\r\n##### ANSIBLE VERSION\r\n2.5.0\r\n\r\n##### ADDITIONAL INFORMATION\r\n", "author_association": "MEMBER"}], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/13033495", "body": "This is but a drop in the bucket of the violations- see #12214 (which now has a conflict w/ this removal)\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/13033495/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}], "review_comments": []}, "elad661": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/ea1361a9273d4b31391f08eb7d7a5e3d44b6161e", "message": "modules/na_cdot_lun: properly compare LUN size (#34846)\n\ncurrent_size is returned from the API as string, while self.size\n(the requested size) is an integer. This caused the comparison\nto always be False, and a resize request to always be sent."}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "themr0c": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/5b52bfad6dd1f8fd6447557948ca2b42465863cf", "message": "azure_rm inventory should add \"ansible_connection: winrm\" in host_vars for windows hosts - fixes #34689 (#34691)\n\n* fix for https://github.com/ansible/ansible/issues/34689\r\nazure_rm inventory should add \"ansible_connection: winrm\" in host_vars for windows hosts\r\n\r\n* add ansible_connection: winrm - fix for https://github.com/ansible/ansible/issues/34689"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "clarkst": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/e4f294822f77f116a47073f6e4cb68bde9a0ac9b", "message": "[cloud] kinesis stream server side encryption - fixes #30269 (#30689)\n\n* Moved the encryption to its own action method.\r\n\r\n* removed silly default value for encryption type.\r\n\r\n* Code formatting issues from pull request ANSIBOT.\r\n\r\n* changed version_added to  \"2.5\"\r\nbecause of new new options available\r\n\r\n* changed version_added to  \"2.5\"\r\nbecause of new new options available\r\n\r\n* changed version_added to  \"2.5\"\r\nbecause of new new options available"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "kokel": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/66f654cb6417d0f41f1e5f9a90ef8d9165cccb3b", "message": "filter ipaddr: add custom delimiter option to ip4_hex(); fix format (#26862)"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "RobReus": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/53266e31df0954513b585b1f056be42514900f4c", "message": "Work-around for empty changesets with status FAILED being created (#34933)\n\n* Added check to prevent failed empty changesets from being left behind\r\n\r\n* Fixing comments from PR 34933, prevent infinte loop and stricter exception catching"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "eval": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/9d4d86237d6dc240758d70c85ddc26beb7493b26", "message": "Logger-process is not considered for pid and state (#34905)\n\nFixes #34899"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "rbywater": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/a7e27b74c96a60d1ffcea555d10e7a822920afa9", "message": "Add ability to append suffix to host names for Cloudforms Inventory (#33565)\n\n* Add ability to append suffix to host names for Cloudforms Inventory\r\n\r\nAllows for use of a suffix that will be appended to host names returned\r\nfrom Cloudforms API if that suffix is not present.\r\n\r\nFor example with a suffix of 'example.org', the following results\r\nwould be shown for a particular Cloudforms host name:\r\nsomeexample -> someexample.example.org\r\nsomeexample.example.org -> someexample.example.org\r\n\r\nThe main use-case for this is when Cloudforms has short names rather\r\nthan FQDN and there is a desire to to use the FQDN as the name.\r\n\r\n* Add example line into Cloudforms INI file\r\n\r\n* Clarify that leading fullstop needed\r\n\r\n* Add validation to ensure leading fullstop for suffix"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "pilou-": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/217ff4498c6ac75e51e8e80021c2afef4e34e865", "message": "ansible-config: add simple tests (#34900)\n\n* Revert \"Fix ansible-config with python3 (#34673)\"\r\n\r\nThis reverts commit 2a9daaa45b0252cd935c48b5d0ab4b581aa16e32.\r\n\r\n* ansible-config: add simple tests\r\n\r\n* Fix ansible-config with python3\r\n\r\n* ansible-test: don't quote \"unusual\" characters"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/64e15932430fc8b9d18c32c463bcfae6f8b2be75", "message": "set_fact:  handle 'cacheable=value' form (#34871)\n\n* Ensure fact isn't cached when cacheable=val form is used\r\n\r\n* Don't cache fact when cacheable=val form is used"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/9e918c8003a4a2a5049c5b32bb44aab9af5f859c", "message": "acl integration tests: don't use restricted key, allow to run twice in a row (#34858)\n\n* acl test: don't use restricted key\r\n\r\nFix this warning: [WARNING]: Removed restricted key from module data: ansible_user = ansible_user\r\n\r\n* acl test: allow to execute twice in a row"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/00332a49d5552aa43b949f0835181b4335e65d9d", "message": "ec2_win_password: fix broken import and minor updates (#34479)\n\n* fix broken import\r\n\r\n* ansible.module_utils.ec2.HAS_BOTO is already used\r\n\r\n* wait_timeout parameter: use 'int' type\r\n\r\n* wait is always True there\r\n\r\n* doc: use formatting function"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/32ba02b62646861a6ad6e1ab017717305654e6a0", "message": "file tests: control & managed host can be distinct"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/cbb238522b4507674a4c5c55d0ea3fbf4069e5fa", "message": "get_url tests: controller & managed node can be distinct\n\nTemplating happens on the Ansible controller, not on the task\u2019s target host."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/e9e316c76bb85b417e7705da1f3a9a82c6bb2b65", "message": "Filesystem: refactor, improvements, add tests (#25519)\n\n* filesystem: list used tools\n\n* filesystem: btrfs and reiserfs don't support resizing\n\n* filesystem: list supported filesystems\n\nuse formatting functions and 'filesystem' instead of 'file system'\n\n* filesystem: PEP8\n\n* filesystem: remove useless calls to module.boolean\n\n* filesystem: fail when the requested action isn't implemented\n\n* filesystem: resizefs: list supported FS rather than unsupported\n\n* filesystem: refactor\n\n* filesystem: add integration tests\n\n* filesystem: allow to use image file with 'dev' param\n\n* filesystem: test resizefs (ext2/3/4 filesystems only)\n\n* filesystem: Btrfs, handle older version than v0.20-rc1\n\n* filesystem: use loop keyword (integration tests)\n\n* filesystem: new test, check when another filesystem already exists\n\n* filesystem: add myself as a maintainer\n\n* filesystem: fix tests as filters"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/b66863abf0cb51295ba20caba9d206a4d1a82c72", "message": "dev_guide: don't ask to use '\u00a9 Ansible Project' (#34704)\n\ncontributor don't sign any copyright assignment, then this makes no\r\nsense."}], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35177", "title": "Fix yum integration tests", "body": "##### SUMMARY\r\nFix `yum` integration tests:\r\n- don't check `rc`:\r\n  - `rc` isn't documented in `yum` module documentation\r\n  - `rc` isn't always returned by `yum` module (and it would not make sense to always set `rc` in case of error):\r\n    ```\r\n    TASK [yum : try to install not compatible arch rpm, should fail] ***************\r\n    fatal: [testhost]: FAILED! => {\"attempts\": 1, \"changed\": false, \"failed\": true, \"msg\": \"Failure downloading http://download.fedoraproject.org/pub/epel/7/ppc64le/Packages/b/banner-1.3.4-3.el7.ppc64le.rpm, Request failed: <urlopen error timed out>\"}\r\n     ...ignoring\r\n \r\n    TASK [yum : verify that yum failed] ********************************************\r\n    fatal: [testhost]: FAILED! => {\"failed\": true, \"msg\": \"The conditional check 'yum_result.rc == 1' failed. The error was: error while evaluating conditional (yum_result.rc == 1): 'dict object' has no attribute 'rc'\"}\r\n\tto retry, use: --limit @/root/ansible/test/integration/yum-5zf9GA.retry\r\n    ```\r\n  - yum module uses `fail_json` method\r\n- allow to execute integration tests twice in a row: always remove installed packages. Then the 2nd try doesn't report wrong error.\r\n- use tests instead of filters\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nyum\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0 (devel 8fdfda76e9) last updated 2018/01/22 12:19:38 (GMT +200)\r\n```", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/35024", "title": "webfaction modules: fix broken import", "body": "##### SUMMARY\r\nwebfaction mdoules: fix [broken import](https://github.com/ansible/community/wiki/Testing:-progress-tracker#fixing-broken-imports)\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nwebfaction modules\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.5.0 (devel 92b3d79283) last updated 2018/01/16 15:27:58 (GMT +200)\r\n```", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34983", "title": "azure_rm_dnsrecordset: fix broken import and minor updates", "body": "##### SUMMARY\r\nazure_rm_dnsrecordset:\r\n- fix [broken import](https://github.com/ansible/community/wiki/Testing%3A-progress-tracker#list-of-things-that-need-unit-tests-eg-libraries-under-module_utils)\r\n- doc: use formatting function\r\n- remove unused dictionary\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nazure_rm_dnsrecordset\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0 (devel 92b3d79283) last updated 2018/01/16 15:27:58 (GMT +200)\r\n```", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34838", "title": "vars.clean: remove unused method inject_facts", "body": "##### SUMMARY\r\nRemoving the unused method `inject_facts` seems better than fixing the typo (`ansilbe_`).\r\nAlso: fix typo in comments.\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nlib/ansible/vars/clean.py\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.5.0 (devel 1c3bba0bdb) last updated 2018/01/14 00:25:00 (GMT +200)\r\n```", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34356", "title": "FreeIPA inventory (ipalib 4.6.2): avoid exception", "body": "##### SUMMARY\r\n\r\nFreeIPA inventory:\r\n- Workaround [7345](https://pagure.io/freeipa/issue/7345) FreeIPA 4.6.2 issue: require some parameters in order to avoid an `AttributeError` exception\r\n- mentions `IPA_CONFDIR` environment variable.\r\n\r\nException:\r\n```\r\n$ ./freeipa.py --list\r\nTraceback (most recent call last):\r\n  File \"./ansible/contrib/inventory/freeipa.py\", line 95, in <module>\r\n    api = initialize()\r\n  File \"./ansible/contrib/inventory/freeipa.py\", line 18, in initialize\r\n    api.finalize()\r\n  File \"local/lib/python2.7/site-packages/ipalib/plugable.py\", line 738, in finalize\r\n    self.__do_if_not_done('load_plugins')\r\n  File \"local/lib/python2.7/site-packages/ipalib/plugable.py\", line 425, in __do_if_not_done\r\n    getattr(self, name)()\r\n  File \"local/lib/python2.7/site-packages/ipalib/plugable.py\", line 618, in load_plugins\r\n    for package in self.packages:\r\n  File \"local/lib/python2.7/site-packages/ipalib/__init__.py\", line 949, in packages\r\n    ipaclient.remote_plugins.get_package(self),\r\n  File \"local/lib/python2.7/site-packages/ipaclient/remote_plugins/__init__.py\", line 120, in get_package\r\n    server_info = ServerInfo(api)\r\n  File \"local/lib/python2.7/site-packages/ipaclient/remote_plugins/__init__.py\", line 26, in __init__\r\n    hostname = DNSName(api.env.server).ToASCII()\r\nAttributeError: 'Env' object has no attribute 'server\r\n```\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\ncontrib/inventory/freeipa.py\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0 (devel 18ea816a0e) last updated 2017/12/21 19:38:37 (GMT -400)\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\n\r\n###### WITHOUT THIS PULL REQUEST\r\n\r\nWithout this pull request, using 4.6.2, without any configuration:\r\n```\r\n$ pip list|grep ipa\r\nipaclient (4.6.2)\r\nipalib (4.6.2)\r\nipaplatform (4.6.2)\r\nipapython (4.6.2)\r\n\r\n$ ./freeipa.py --list\r\nTraceback (most recent call last):\r\n  File \"./ansible/contrib/inventory/freeipa.py\", line 95, in <module>\r\n    api = initialize()\r\n[...]\r\n  File \"local/lib/python2.7/site-packages/ipaclient/remote_plugins/__init__.py\", line 26, in __init__\r\n    hostname = DNSName(api.env.server).ToASCII()\r\nAttributeError: 'Env' object has no attribute 'server'\r\n```\r\n\r\nWithout this pull request, using 4.6.2, with an empty configuration directory:\r\n```\r\n$ IPA_CONFDIR=\"$(mktemp -d)\" ./freeipa.py --list\r\nTraceback (most recent call last):\r\n  File \"./ansible/contrib/inventory/freeipa.py\", line 95, in <module>\r\n    api = initialize()\r\n[...]\r\n  File \"local/lib/python2.7/site-packages/ipaclient/remote_plugins/__init__.py\", line 26, in __init__\r\n    hostname = DNSName(api.env.server).ToASCII()\r\nAttributeError: 'Env' object has no attribute 'server'\r\n```\r\n\r\nWithout this PR, using 4.6.2. with a configuration:\r\n```\r\n$ cat ~/default.conf\r\n[global]\r\ndomain=ipa.test\r\nxmlrpc_uri=https://server.ipa.test/ipa/xml\r\n\r\n$ IPA_CONFDIR=~ ./freeipa.py --list\r\n{\r\n \"_meta\": {\r\n  \"hostvars\": {\r\n   \"replica.ipa.test\": {}, \r\n   \"server.ipa.test\": {}\r\n  }\r\n }, \r\n \"debian-servers\": {\r\n  \"hosts\": [\r\n   \"server.ipa.test\"\r\n  ]\r\n }, \r\n \"ipaservers\": {\r\n  \"hosts\": [\r\n   \"server.ipa.test\", \r\n   \"replica.ipa.test\"\r\n  ]\r\n }\r\n}\r\n```\r\n\r\n###### WITH THIS PULL REQUEST\r\n\r\nWith this PR, using 4.6.2, without any IPA configuration:\r\n```\r\n$ ./freeipa.py --list\r\nWARNING: IPA configuration directory (/etc/ipa) is missing. Environment variable IPA_CONFDIR could be used to override default path.\r\nERROR: ('jsonrpc_uri' or 'xmlrpc_uri') or 'domain' are not defined in '[global]' section of '/etc/ipa/cli.conf' nor in '/etc/ipa/default.conf'.\r\n```\r\n\r\nWith this PR, using 4.6.2, with an empty configuration directory:\r\n```\r\n$ IPA_CONFDIR=\"$(mktemp -d)\" ./freeipa.py --list\r\nERROR: ('jsonrpc_uri' or 'xmlrpc_uri') or 'domain' are not defined in '[global]' section of '/tmp/tmp.7wWKDelszq/cli.conf' nor in '/tmp/tmp.7wWKDelszq/default.conf'.\r\n```\r\n\r\nWith this PR, using 4.6.2, with a configuration (nothing changed):\r\n```\r\n$ cat ~/default.conf\r\n[global]\r\ndomain=ipa.test\r\nxmlrpc_uri=https://server.ipa.test/ipa/xml\r\n\r\n$ IPA_CONFDIR=~ ./freeipa.py --list\r\n{\r\n \"_meta\": {\r\n  \"hostvars\": {\r\n   \"replica.ipa.test\": {}, \r\n   \"server.ipa.test\": {}\r\n  }\r\n }, \r\n \"debian-servers\": {\r\n  \"hosts\": [\r\n   \"server.ipa.test\"\r\n  ]\r\n }, \r\n \"ipaservers\": {\r\n  \"hosts\": [\r\n   \"server.ipa.test\", \r\n   \"replica.ipa.test\"\r\n  ]\r\n }\r\n}\r\n```\r\n\r\nWith 4.5.X, the only change is when `IPA_CONFDIR` isn't set and default value (`/etc/ipa`) doesn't exist:\r\n```\r\n$ ./freeipa.py --list\r\nWARNING: IPA configuration directory (/etc/ipa) is missing. Environment variable IPA_CONFDIR could be used to override default path.\r\nTraceback (most recent call last):\r\n  File \"./freeipa.py\", line 113, in <module>\r\n    api = initialize()\r\n[...]\r\n    raise NetworkError(uri=server, error=str(e))\r\nipalib.errors.NetworkError: cannot connect to 'http://localhost:8888/ipa/json': [Errno 111] Connection refused\r\n```\r\n  ", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/33740", "title": "osx_say callback plugin: add espeak support, rename to say", "body": "##### SUMMARY\r\n- Add support for `espeak` (and `say` GNUstep tool)\r\n- Rename plugin\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nsay callback plugin\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0 (devel 326b208b19) last updated 2017/12/10 01:54:05 (GMT +200)\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\nTested with Python 2.7 and Python 3.6 using: `ANSIBLE_CALLBACK_WHITELIST=say ansible-playbook testplay.yml`.\r\n\r\nRelated: #33071", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "maorlipchuk": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/7190b186166e80654b0352f1a2b4ead32ff10cf5", "message": "Add missing storage domain properties (#34904)\n\n* Add additional properties to storage domains\n\n* add warn low space for additional storage properties\n\n* Fixing comments\n\n1. Fixing documentation\n2. Use default None\n3. Remove redundant if condition\n4. remove added discard since it was already added\n\n* Apply comments #2\n\nFix default value to None\nUse percentages instead of GB"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/6fe0215c8f78d6cd22aaac8175c20d3e92bd850d", "message": "Add additional mapping attributes for VM/Template registration (#32835)\n\n* Add VnicProfileMapping to register VM\n\nAdd vnic profile mappings to be supported in vm registration\n\n* Add VnicProfileMapping to register template\n\nAdd vnic profile mappings to be supported in template registration\n\n* Add reassign bad macs to register VM\n\nAdd reassign bad macs to be supported in vm registration.\n\n* Add additional mappings params for VM registration\n\nAs part of the effort to support DR with oVirt\nthe \"Register\" operation is being added with a new mapping parameter\nthat describes the configuration of the registration.\n\nThe idea of supporting DR site to site in oVirt is to have 2 active\nsetups using storage replication between the primary setup and the\nsecondary setup.\nBoth setups will have active DCs, clusters, and hosts, although those\nwill not be identical.\nThe user can define a mapping which will be used to recover its setup.\n\nEach mapping can be used to map any VM's attribute stored in the OVF\nwith its correlated entity.\nFor example, there could be a primary setup with a VM configured on cluster A.\nWe also keep an active secondary setup which only have cluster B.\nCluster B is compatible for that VM and in case of a DR scenario theoretically\nthe storage domain can be imported to the secondary setup and the use can\nregister the VM to cluster B.\n\nIn that case, we can automate the recovery process by defining a cluster mapping,\nso once the entity will be registered its OVF will indicate it belongs to\ncluster A but the mapping which will be sent will indicate that cluster B should\nbe valid for every thing that is configured on cluster A.\nThe engine should do the switch, and register the VM to cluster B in the secondary site.\n\nCluster mapping is just one example.\nThe following list describes the different mappings which were\nintroduced:\n  LUN mapping\n  Role mapping\n  Permissions mapping\n  Affinity group mapping\n  Affinity label mapping\n\nEach mapping will be used for its specific OVF's data once the register operation\nwill take place in the engine.\n\n* Add additional mappings params for Template registration\n\nAs part of the effort to support DR with oVirt\nthe \"Register\" operation is being added with a new mapping parameter\nthat describes the configuration of the registration.\n\nThe idea of supporting DR site to site in oVirt is to have 2 active\nsetups using storage replication between the primary setup and the\nsecondary setup.\nBoth setups will have active DCs, clusters, and hosts, although those\nwill not be identical.\nThe user can define a mapping which will be used to recover its setup.\n\nEach mapping can be used to map any Template's attribute stored in the OVF\nwith its correlated entity.\nFor example, there could be a primary setup with a Template configured on cluster A.\nWe also keep an active secondary setup which only have cluster B.\nCluster B is compatible for that Template and in case of a DR scenario theoretically\nthe storage domain can be imported to the secondary setup and the use can\nregister the Template to cluster B.\n\nIn that case, we can automate the recovery process by defining a cluster mapping,\nso once the entity will be registered its OVF will indicate it belongs to\ncluster A but the mapping which will be sent will indicate that cluster B should\nbe valid for every thing that is configured on cluster A.\nThe engine should do the switch, and register the Template to cluster B in the\nsecondary site.\n\nCluster mapping is just one example.\nThe following list describes the different mappings which were\nintroduced:\n  Role mapping\n  Permissions mapping\n\nEach mapping will be used for its specific OVF's data once the register operation\nwill take place in the engine.\n\n* Add support for update OVF store\n\nAdd support for task of update OVF store in a storage domain."}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "stravassac": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/8f80e6a302b1d64d60bcf835d9f99b1a5765b2fb", "message": "VMware: basic files operations networkless (#33261)\n\nThis module adds ability manage file operations with vmware guest using vmware tools."}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "zikalino": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/b0625caa5a07ece70f58c755d52a530971f1f5a6", "message": "adding azure_rm_mysqldatabase (#33567)\n\n* adding azure_rm_mysqldatabase\r\n\r\n* updates to azure_rm_mysqldatabase\r\n\r\n* updates to azure_rm_mysqldatabase\r\n\r\n* updates to azure_rm_mysqldatabase\r\n\r\n* updates to azure_rm_mysqldatabase\r\n\r\n* updates to azure_rm_mysqldatabase\r\n\r\n* updates to azure_rm_mysqldatabase\r\n\r\n* Updated docs around force_update"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/eee29be115b9dd0551a465e5c7586fde1d4fbb0a", "message": "adding azure_rm_postgresqldatabase (#33568)\n\n* adding azure_rm_postgresqldatabase\r\n\r\n* updates to azure_rm_postgresqldatabase\r\n\r\n* updates to azure_rm_postgresqldatabase\r\n\r\n* updates to azure_rm_postgresqldatabase\r\n\r\n* updates to azure_rm_postgresqldatabase\r\n\r\n* updates to azure_rm_postgresqldatabase\r\n\r\n* updates to azure_rm_postgresqldatabase\r\n\r\n* Updated docs around force_update"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/7d05a86bbca5accde08254c9909be17c0d0148be", "message": "[new module] Add Azure Container Instance support - cloud/azure/azure_rm_containerinstance (#32025)\n\n* first dirty container instance\r\n\r\n* added my name ;-)\r\n\r\n* more updates\r\n\r\n* more updates\r\n\r\n* removed unnecessary stuff\r\n\r\n* container instance updates\r\n\r\n* several fixes\r\n\r\n* undo changes in common\r\n\r\n* removed unnecessary references, fixed delete\r\n\r\n* added / updated parameters\r\n\r\n* updated samples & comments\r\n\r\n* updated docs, comments, samples and added registry credentials\r\n\r\n* added ip address and port\r\n\r\n* query existing container instance (but result not used yet)\r\n\r\n* some major changes to the module\r\n\r\n* more fixes\r\n\r\n* added requirement for containerinstance module\r\n\r\n* adding integration test\r\n\r\n* fixes for pull request\r\n\r\n* updated version\r\n\r\n* updated version to 2.5\r\n\r\n* updated version\r\n\r\n* updated integration.cloud.azure.txt as requested by test framework\r\n\r\n* removed due to merge reasons\r\n\r\n* updated requirements-azure.txt\r\n\r\n* undone azure-rm-common\r\n\r\n* lf\r\n\r\n* properly update test requirements\r\n\r\n* first dirty container instance\r\n\r\n* container instance updates\r\n\r\n* several fixes\r\n\r\n* review related updates\r\n\r\n* review related fixes\r\n\r\n* undo changes in common\r\n\r\n* added / updated parameters\r\n\r\n* query existing container instance (but result not used yet)\r\n\r\n* updated version to 2.5\r\n\r\n* updated version\r\n\r\n* removed due to merge reasons\r\n\r\n* updated requirements-azure.txt\r\n\r\n* undone azure-rm-common\r\n\r\n* properly update test requirements\r\n\r\n* minor fix - sanity\r\n\r\n* fix one issue after rebasing\r\n\r\n* removed files accidentally added while rebasing\r\n\r\n* removed checking for changes\r\n\r\n* several fixes\r\n\r\n* fixed sanity\r\n\r\n* updates as requested by reviewers\r\n\r\n* removed ci as it doesn't work\r\n\r\n* reenabled ci\r\n\r\n* renamed container instance, removed required: false\r\n\r\n* removed default: null\r\n\r\n* final updates according to the review\r\n\r\n* one more fix\r\n\r\n* first dirty container instance\r\n\r\n* added my name ;-)\r\n\r\n* more updates\r\n\r\n* more updates\r\n\r\n* removed unnecessary stuff\r\n\r\n* container instance updates\r\n\r\n* several fixes\r\n\r\n* undo changes in common\r\n\r\n* removed unnecessary references, fixed delete\r\n\r\n* added / updated parameters\r\n\r\n* updated samples & comments\r\n\r\n* updated docs, comments, samples and added registry credentials\r\n\r\n* added ip address and port\r\n\r\n* query existing container instance (but result not used yet)\r\n\r\n* some major changes to the module\r\n\r\n* more fixes\r\n\r\n* adding integration test\r\n\r\n* fixes for pull request\r\n\r\n* updated version\r\n\r\n* updated version to 2.5\r\n\r\n* updated version\r\n\r\n* updated integration.cloud.azure.txt as requested by test framework\r\n\r\n* removed due to merge reasons\r\n\r\n* updated requirements-azure.txt\r\n\r\n* undone azure-rm-common\r\n\r\n* lf\r\n\r\n* properly update test requirements\r\n\r\n* review related updates\r\n\r\n* first dirty container instance\r\n\r\n* container instance updates\r\n\r\n* several fixes\r\n\r\n* review related fixes\r\n\r\n* undo changes in common\r\n\r\n* added / updated parameters\r\n\r\n* query existing container instance (but result not used yet)\r\n\r\n* updated version to 2.5\r\n\r\n* updated version\r\n\r\n* removed due to merge reasons\r\n\r\n* updated requirements-azure.txt\r\n\r\n* undone azure-rm-common\r\n\r\n* properly update test requirements\r\n\r\n* minor fix - sanity\r\n\r\n* fix one issue after rebasing\r\n\r\n* removed files accidentally added while rebasing\r\n\r\n* removed checking for changes\r\n\r\n* several fixes\r\n\r\n* fixed sanity\r\n\r\n* updates as requested by reviewers\r\n\r\n* removed ci as it doesn't work\r\n\r\n* reenabled ci\r\n\r\n* renamed container instance, removed required: false\r\n\r\n* removed default: null\r\n\r\n* final updates according to the review\r\n\r\n* one more fix\r\n\r\n* changed location as default from resource group can't handle containers\r\n\r\n* updates to container instance\r\n\r\n* fixed mistakes during merge\r\n\r\n* one more fix\r\n\r\n* another mistake\r\n\r\n* container instance fixes\r\n\r\n* several fixes to container instance\r\n\r\n* return value fix\r\n\r\n* minor update\r\n\r\n* just one api version right now\r\n\r\n* fixed api version\r\n\r\n* container instance does not suppurt api version\r\n\r\n* removed unnecessary try blocks\r\n\r\n* removed tags related things\r\n\r\n* fixed pep8\r\n\r\n* final fixes?\r\n\r\n* final updates to the module\r\n\r\n* more fixes"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/ade02bcce5feda1e5352886652bc75fe3bfe0608", "message": "[new module] azure_rm_sqlserver_facts (#34608)\n\n* updates to azure_rm_sqlserver_facts\r\n\r\n* updates to azure_rm_sqlserver_facts\r\n\r\n* updates to azure_rm_sqlserver_facts\r\n\r\n* updates to azure_rm_sqlserver_facts\r\n\r\n* updates to azure_rm_sqlserver_facts\r\n\r\n* updates to azure_rm_sqlserver_facts\r\n\r\n* updates to azure_rm_sqlserver_facts\r\n\r\n* updates to azure_rm_sqlserver_facts\r\n\r\n* updates to azure_rm_sqlserver_facts\r\n\r\n* updates to azure_rm_sqlserver_facts"}], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35152", "title": "adding cli_default_profile", "body": "##### SUMMARY\r\nAdded missing cli_default_profile to Azure documentation.\r\nApparently lack of this field causes sanity tests to fail when submitting new modules.\r\n\r\n##### ISSUE TYPE\r\n - Docs Pull Request\r\n\r\n##### COMPONENT NAME\r\nAzure - all\r\n\r\n##### ANSIBLE VERSION\r\n2.4\r\n\r\n##### ADDITIONAL INFORMATION\r\n\r\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/35150", "title": "[new module] azure_rm_keyvault", "body": "##### SUMMARY\nAdding support for azure_rm_keyvault\n\n##### ISSUE TYPE\n - New Module Pull Request\n\n##### COMPONENT NAME\n\nazure_rm_keyvault\n\n##### ANSIBLE VERSION\n\n 2.4\n\n##### ADDITIONAL INFORMATION\n\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34639", "title": "[new module] azure_rm_containerregistrywebhook_facts", "body": "##### SUMMARY\nAdding support for azure_rm_containerregistrywebhook_facts\n\n##### ISSUE TYPE\n - New Module Pull Request\n\n##### COMPONENT NAME\n\nazure_rm_containerregistrywebhook_facts\n\n##### ANSIBLE VERSION\n\n 2.4\n\n##### ADDITIONAL INFORMATION\n\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34638", "title": "[new module] azure_rm_containerregistrywebhook", "body": "##### SUMMARY\nAdding support for azure_rm_containerregistrywebhook\n\n##### ISSUE TYPE\n - New Module Pull Request\n\n##### COMPONENT NAME\n\nazure_rm_containerregistrywebhook\n\n##### ANSIBLE VERSION\n\n 2.4\n\n##### ADDITIONAL INFORMATION\n\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34637", "title": "[new module] azure_rm_containerregistryreplication_facts", "body": "##### SUMMARY\nAdding support for azure_rm_containerregistryreplication_facts\n\n##### ISSUE TYPE\n - New Module Pull Request\n\n##### COMPONENT NAME\n\nazure_rm_containerregistryreplication_facts\n\n##### ANSIBLE VERSION\n\n 2.4\n\n##### ADDITIONAL INFORMATION\n\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34636", "title": "[new module] azure_rm_containerregistryreplication", "body": "##### SUMMARY\nAdding support for azure_rm_containerregistryreplication\n\n##### ISSUE TYPE\n - New Module Pull Request\n\n##### COMPONENT NAME\n\nazure_rm_containerregistryreplication\n\n##### ANSIBLE VERSION\n\n 2.4\n\n##### ADDITIONAL INFORMATION\n\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34635", "title": "[new module] azure_rm_containerinstance_facts", "body": "##### SUMMARY\nAdding support for azure_rm_containerinstance_facts\n\n##### ISSUE TYPE\n - New Module Pull Request\n\n##### COMPONENT NAME\n\nazure_rm_containerinstance_facts\n\n##### ANSIBLE VERSION\n\n 2.4\n\n##### ADDITIONAL INFORMATION\n\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34634", "title": "[new module] azure_rm_containerregistry_facts", "body": "##### SUMMARY\nAdding support for azure_rm_containerregistry_facts\n\n##### ISSUE TYPE\n - New Module Pull Request\n\n##### COMPONENT NAME\n\nazure_rm_containerregistry_facts\n\n##### ANSIBLE VERSION\n\n 2.4\n\n##### ADDITIONAL INFORMATION\n\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34620", "title": "[new module] azure_rm_postgresqlfirewallrule_facts", "body": "##### SUMMARY\nAdding support for azure_rm_postgresqlfirewallrule_facts\n\n##### ISSUE TYPE\n - New Module Pull Request\n\n##### COMPONENT NAME\n\nazure_rm_postgresqlfirewallrule_facts\n\n##### ANSIBLE VERSION\n\n 2.4\n\n##### ADDITIONAL INFORMATION\n\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34619", "title": "[new module] azure_rm_mysqlfirewallrule_facts", "body": "##### SUMMARY\nAdding support for azure_rm_mysqlfirewallrule_facts\n\n##### ISSUE TYPE\n - New Module Pull Request\n\n##### COMPONENT NAME\n\nazure_rm_mysqlfirewallrule_facts\n\n##### ANSIBLE VERSION\n\n 2.4\n\n##### ADDITIONAL INFORMATION\n\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34618", "title": "[new module] azure_rm_sqlfirewallrule_facts", "body": "##### SUMMARY\nAdding support for azure_rm_sqlfirewallrule_facts\n\n##### ISSUE TYPE\n - New Module Pull Request\n\n##### COMPONENT NAME\n\nazure_rm_sqlfirewallrule_facts\n\n##### ANSIBLE VERSION\n\n 2.4\n\n##### ADDITIONAL INFORMATION\n\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34617", "title": "[new module] azure_rm_postgresqlfirewallrule", "body": "##### SUMMARY\nAdding support for azure_rm_postgresqlfirewallrule\n\n##### ISSUE TYPE\n - New Module Pull Request\n\n##### COMPONENT NAME\n\nazure_rm_postgresqlfirewallrule\n\n##### ANSIBLE VERSION\n\n 2.4\n\n##### ADDITIONAL INFORMATION\n\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34616", "title": "[new module] azure_rm_mysqlfirewallrule", "body": "##### SUMMARY\nAdding support for azure_rm_mysqlfirewallrule\n\n##### ISSUE TYPE\n - New Module Pull Request\n\n##### COMPONENT NAME\n\nazure_rm_mysqlfirewallrule\n\n##### ANSIBLE VERSION\n\n 2.4\n\n##### ADDITIONAL INFORMATION\n\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34615", "title": "[new module] azure_rm_sqlfirewallrule", "body": "##### SUMMARY\nAdding support for azure_rm_sqlfirewallrule\n\n##### ISSUE TYPE\n - New Module Pull Request\n\n##### COMPONENT NAME\n\nazure_rm_sqlfirewallrule\n\n##### ANSIBLE VERSION\n\n 2.4\n\n##### ADDITIONAL INFORMATION\n\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34614", "title": "[new module] azure_rm_postgresqldatabase_facts", "body": "##### SUMMARY\nAdding support for azure_rm_postgresqldatabase_facts\n\n##### ISSUE TYPE\n - New Module Pull Request\n\n##### COMPONENT NAME\n\nazure_rm_postgresqldatabase_facts\n\n##### ANSIBLE VERSION\n\n 2.4\n\n##### ADDITIONAL INFORMATION\n\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34613", "title": "[new module] azure_rm_mysqldatabase_facts", "body": "##### SUMMARY\nAdding support for azure_rm_mysqldatabase_facts\n\n##### ISSUE TYPE\n - New Module Pull Request\n\n##### COMPONENT NAME\n\nazure_rm_mysqldatabase_facts\n\n##### ANSIBLE VERSION\n\n 2.4\n\n##### ADDITIONAL INFORMATION\n\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34612", "title": "[new module] azure_rm_sqldatabase_facts", "body": "##### SUMMARY\nAdding support for azure_rm_sqldatabase_facts\n\n##### ISSUE TYPE\n - New Module Pull Request\n\n##### COMPONENT NAME\n\nazure_rm_sqldatabase_facts\n\n##### ANSIBLE VERSION\n\n 2.4\n\n##### ADDITIONAL INFORMATION\n\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34611", "title": "[new module] azure_rm_sqldatabase", "body": "##### SUMMARY\nAdding support for azure_rm_sqldatabase\n\n##### ISSUE TYPE\n - New Module Pull Request\n\n##### COMPONENT NAME\n\nazure_rm_sqldatabase\n\n##### ANSIBLE VERSION\n\n 2.4\n\n##### ADDITIONAL INFORMATION\n\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34610", "title": "[new module] azure_rm_postgresqlserver_facts", "body": "##### SUMMARY\nAdding support for azure_rm_postgresqlserver_facts\n\n##### ISSUE TYPE\n - New Module Pull Request\n\n##### COMPONENT NAME\n\nazure_rm_postgresqlserver_facts\n\n##### ANSIBLE VERSION\n\n 2.4\n\n##### ADDITIONAL INFORMATION\n\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34609", "title": "[new module] azure_rm_mysqlserver_facts", "body": "##### SUMMARY\nAdding support for azure_rm_mysqlserver_facts\n\n##### ISSUE TYPE\n - New Module Pull Request\n\n##### COMPONENT NAME\n\nazure_rm_mysqlserver_facts\n\n##### ANSIBLE VERSION\n\n 2.4\n\n##### ADDITIONAL INFORMATION\n\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "brandond": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/240024ea4a9237216f8a21981ce0f7a1f3fdb111", "message": "Fix ec2_vpc_net tags (#34725)\n\n* Fix ec2_vpc_net tags\r\n\r\nPR #33105 broke the tags returned by ec2_vpc_net - it was returning the raw boto3 list instead of a dict as expected.\r\n\r\n* Add a test for tags"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "jollyra": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/2a6156a9d8529c0bc6b157d47d13c5187d9e8157", "message": "Fix syntax error in intro_inventory yaml example (#34960)"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "b4ldr": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/d72587084b4c43746cdb13abb262acf920079865", "message": "Update example uptime script to provide correct type for explicit individual hosts (#34740)"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "maxamillion": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/8f1ab70cf2bbe75624bfe9349f94eee694be69bd", "message": "add lib/ansible/plugins/connection/lxd.py maintainer in BOTMETA.yaml (#34936)\n\n* add lib/ansible/plugins/connection/lxd.py maintainer in BOTMETA.yaml\r\n\r\nSigned-off-by: Adam Miller <admiller@redhat.com>\r\n\r\n* github nick change for trstringer on team_azure in BOTMETA\r\n\r\nSigned-off-by: Adam Miller <admiller@redhat.com>"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/d860e13ae12e4ca3d656acfb503d245bb7fb0cf6", "message": "Add validate_certs to jira module (#34756)\n\nThe jira module uses ansible.module_utils.urls.fetch_url which will\nattempt to get that value of the validate_certs parameter from the\nmodule; if present it will honor it's value, otherwise it defaults\nto True.\n\nThis patch adds that parameter to jira so that it can be specified\nby the user and honored by ansible.module_utils.urls.fetch_url\n\nSigned-off-by: Adam Miller <admiller@redhat.com>"}], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35063", "title": "fix new EC2 C5 instance virtualization_type identification", "body": "Fixes #35051\r\n\r\nSigned-off-by: Adam Miller <admiller@redhat.com>\r\n\r\n##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nFix ansible_virtualization_type and ansible_virtualization_role not recognized for Amazon EC2 C5 Instances\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\nlib/ansible/module_utils/facts/virtual/linux.py\r\n\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n$ ansible --version\r\nansible 2.5.0 (facts/virtual/linux f56302b234) last updated 2018/01/18 14:50:29 (GMT -500)\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/admiller/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/admiller/src/dev/ansible/lib/ansible\r\n  executable location = /home/admiller/src/dev/ansible/bin/ansible\r\n  python version = 2.7.14 (default, Dec 11 2017, 14:52:53) [GCC 7.2.1 20170915 (Red Hat 7.2.1-2)]\r\n\r\n```\r\n\r\n\r\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34962", "title": "sysvinit service module", "body": "Signed-off-by: Adam Miller <admiller@redhat.com>\r\n\r\n##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nNew module to manage various aspects of services for System V Init beyond what just the generic `service` module provides.\r\n\r\nA couple of updates to module_utils in support of this.\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\nsysvinit\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.5.0 (sysvinit 4dbf2551cc) last updated 2018/01/16 15:44:01 (GMT -500)\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/admiller/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/admiller/src/dev/ansible/lib/ansible\r\n  executable location = /home/admiller/src/dev/ansible/bin/ansible\r\n  python version = 2.7.14 (default, Dec 11 2017, 14:52:53) [GCC 7.2.1 20170915 (Red Hat 7.2.1-2)]\r\n\r\n```\r\n\r\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "dsoper2": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/5044813c4c754dff097120c5855ee967d7b57d81", "message": "UCS IP address pool module and integration tests (#34748)\n\n* IP address pool module and integration tests\r\n\r\n* Examples corrected and imports moved to beginning of module.\r\n\r\n* Revert ucsmsdk import lines to avoid import sanity test failures.\r\n\r\n* Add comment around imports for ucsmsdk."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/b7906f9c2757af53c0b21d88d3f49a822ef6d768", "message": "Module renamed to ucs_mac_pool to match naming convention for other ucs modules. (#34826)\n\nDocumentation updated to match UCS Manager online help.\r\nCoding style updated to match other ucs modules."}], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35137", "title": "Ucs lan connectivity and integration tests", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nUCS LAN Connectivity Policy module and integration tests\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\nucs_lan_connectivity\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.5.0 (ucs_lan_connectivity f805a7ee18) last updated 2018/01/19 10:58:57 (GMT -500)\r\n  config file = None\r\n  configured module search path = [u'/Users/dsoper/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/dsoper/Documents/ansible/lib/ansible\r\n  executable location = /Users/dsoper/Documents/ansible/bin/ansible\r\n  python version = 2.7.12 (default, Oct 11 2016, 05:20:59) [GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.38)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/35136", "title": "Ucs vnic template and integration tests", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nUCS vNIC template support and integration tests\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\nucs_vnic_template\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.5.0 (ucs_vnic_template f54d9228e2) last updated 2018/01/20 13:26:28 (GMT -500)\r\n  config file = None\r\n  configured module search path = [u'/Users/dsoper/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/dsoper/Documents/ansible/lib/ansible\r\n  executable location = /Users/dsoper/Documents/ansible/bin/ansible\r\n  python version = 2.7.12 (default, Oct 11 2016, 05:20:59) [GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.38)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/35071", "title": "Ucs vlans and integration tests", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nConfiguration of UCS VLANs and integration tests.\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\nucs_vlans\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.5.0 (ucs_vlans 2bf84075e3) last updated 2018/01/18 17:09:26 (GMT -700)\r\n  config file = None\r\n  configured module search path = [u'/Users/dsoper/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/dsoper/Documents/ansible/lib/ansible\r\n  executable location = /Users/dsoper/Documents/ansible/bin/ansible\r\n  python version = 2.7.12 (default, Oct 11 2016, 05:20:59) [GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.38)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "osLEccse": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/59042d79f5e01cf1afcc7a9e17527676fbc86450", "message": "Update developing_api.rst to use correct inventory format for single explicit host (#34919)\n\nFix for #34918"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "TristanCacqueray": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/576335e53dc7721811a9dfe02b29a36ec7f27e56", "message": "Add GALAXY_TOKEN config option (#34621)\n\nThis change lets user store token in configuration file or environment to\r\nprevent exposing the secret on the command line."}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "kwerey": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/92b3d792837f65e6264ce4b4a4fb1459dad94a6e", "message": "[cloudtrail] Only pass extra create_trail options if set in module params (#34745)\n\n* Fixes #34700, only passes extra create_trail options when explicitly set"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "bcoca": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/bbd6b8bb42cc8fa48157ce5db0efb0a836c94917", "message": "Temporary (#31677)\n\n* allow shells to have per host options, remote_tmp\r\n\r\nadded language to shell\r\nremoved module lang setting from general as  plugins have it now\r\nuse get to avoid bad powershell plugin\r\nmore resilient tmp discovery, fall back to `pwd`\r\nadd shell to docs\r\nfixed options for when frags are only options\r\nadded shell set ops in t_e and fixed option frags\r\nnormalize tmp dir usag4e\r\n\r\n- pass tmpdir/tmp/temp options as env var to commands, making it default for tempfile\r\n- adjusted ansiballz tmpdir\r\n- default local tempfile usage to the configured local tmp\r\n- set env temp in action\r\n\r\nadd options to powershell\r\nshift temporary to internal envvar/params\r\nensure tempdir is set if we pass var\r\nensure basic and url use expected tempdir\r\nensure localhost uses local tmp\r\ngive /var/tmp priority, less perms issues\r\nmore consistent tempfile mgmt for ansiballz\r\nmade async_dir configurable\r\nbetter action handling, allow for finally rm tmp\r\nfixed tmp issue and no more tempdir in ballz\r\nhostvarize world readable and admin users\r\nalways set shell tempdir\r\nadded comment to discourage use of exception/flow control\r\n\r\n* Mostly revert expand_user as it's not quite working.\r\n\r\nThis was an additional feature anyhow.\r\n\r\nKept the use of pwd as a fallback but moved it to a second ssh\r\nconnection.  This is not optimal but getting that to work in a single\r\nssh connection was part of the problem holding this up.\r\n\r\n(cherry picked from commit 395b714120522f15e4c90a346f5e8e8d79213aca)\r\n\r\n* fixed script and other action plugins\r\n\r\nensure tmpdir deletion\r\nallow for connections that don't support new options (legacy, 3rd party)\r\nfixed tests"}], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34759", "title": "draft async action", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Feature Pull Request\r\n\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\nasync\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```2.5\r\n\r\n```\r\n\r\n", "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34462", "title": "Better document connection: local", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nclarify some issues with `connection: local`\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Docs Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\ndocs\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n2.5\r\n```\r\n", "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34104", "title": "add 'never' tag", "body": "##### SUMMARY\r\nskips a task unless a tag on the task is explicitly targeted\r\n\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\ntags\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n2.5\r\n```\r\n", "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/33959", "title": "dict2items filter", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\ntransforms a dict into a list of dicts with each element having a 'key' and 'value' key with the key and value of the original dict as values.\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Feature Pull Request\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\nfilters/dict2items\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n2.5\r\n```", "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/33793", "title": "conditional cleanup", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module/plugin/module/task -->\r\nconditioanl\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n2.5\r\n```\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/33653", "title": "caller to preprocess must be None aware", "body": "##### SUMMARY\r\nalso removed unused copy of method\r\n\r\nfixes #33650\r\n\r\n\r\n<!--- Describe the change, including rationale and design decisions -->\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module/plugin/module/task -->\r\nvars manager\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n2.4/2.5\r\n```", "author_association": "MEMBER"}], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/5426925", "body": "you have to actively use it, its not going to automatically encrypt your\nrepo on next run.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5426925/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/5546765", "body": "this makes it very hard to selectively run plays.\ni.e:\nplay A, play B and play C all need facts, but when i run play X (which\nincludes all 3) I only need to gather 1 time.\n\nIf i have to set B and C to false, then I cannot run them individually.\n\nIf not I gather facts x2 that I don't need to.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5546765/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/6204405", "body": "would you be against using the following instead?\n\n```\ndiff --git a/library/files/file b/library/files/file\nindex d758d54..17f90a9 100644\n--- a/library/files/file\n+++ b/library/files/file\n@@ -192,14 +192,12 @@ def main():\n         if state == 'hard':\n             if not os.path.isabs(src):\n                 module.fail_json(msg=\"absolute paths are required\")\n-        elif prev_state == 'directory':\n-            if not force:\n-                module.fail_json(path=path, msg='refusing to convert between %s and %s for %s' % (prev_state, state, src))\n-            elif len(os.listdir(path)) > 0:\n+        elif prev_state in ['file', 'hard', 'directory'] and not force:\n+            module.fail_json(path=path, msg='refusing to convert between %s and %s for %s' % (prev_state, state, src))\n+        elif prev_state == 'directory' and force:\n+            if len(os.listdir(path)) > 0:\n                 # refuse to replace a directory that has files in it\n                 module.fail_json(path=path, msg='the directory %s is not empty, refusing to convert it' % path)\n-        elif prev_state in ['file', 'hard'] and not force:\n-            module.fail_json(path=path, msg='refusing to convert between %s and %s for %s' % (prev_state, state, src))\n\n         if prev_state == 'absent':\n             changed = True\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/6204405/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/9683919", "body": "i think it should be in addtions to exc not instead\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/9683919/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/10720770", "body": "just the part that left the else: indented, fixed in #10701\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/10720770/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/10944360", "body": "we had to revert the change because this broke many working playbooks, when you have an 'implied' template there is no way to distinguish between a bare string (no quotes) and a undefined variable (no {{ }}).\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/10944360/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/11004069", "body": "yes, its in the queue to make this a configurable warning/error and deprecate the bad syntax to allow this eventually always be an error\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/11004069/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/11591842", "body": "I'll correct, but does not really affect the code in any real way\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/11591842/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/12343880", "body": "try now\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/12343880/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/13033518", "body": "ah, had not seen that PR yet\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/13033518/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}], "review_comments": []}, "berenddeboer": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/1f539e6601ecc842bf65c1119b64a21d9cafeaea", "message": "FreeBSD STABLE distribution not correctly parsed (#34770)"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "s-hertel": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/6c38443a9c1f79ebf131d120be0f36ccfbe963c6", "message": "elb_classic_lb_facts: port to boto3 - also fixes #25075 and #25000 (#27435)\n\n* port elb_classic_facts to boto3\r\n\r\nupdate module to use AnsibleAWSModule\r\n\r\n* Add RETURN docs for elb_classic_lb_facts\r\n\r\n* Remove superfluous exception handling around connection\r\n\r\nFix exit_json call and RETURN docs"}], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34510", "title": "add inventory caching", "body": "##### SUMMARY\r\nUsing virtualbox as an example.\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\ninventory plugins and cache plugins\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n2.5.0\r\n```\r\n\r\n  ", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34416", "title": "add aws_ec2 inventory plugin", "body": "##### SUMMARY\r\nI removed the group logic that is in https://github.com/ansible/ansible/pull/31910. I also removed inventory caching and opened a separate pull request for it: https://github.com/ansible/ansible/pull/34510.\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nlib/ansible/plugins/inventory/aws_ec2\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n2.5.0\r\n```", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "jmcgill298": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/32997a516044244831e58bf4e0490095b89ef8e0", "message": "ACI_BD: Add option to set mac-address (#34843)\n\n* Add option to set mac-address\r\n\r\n* Fix missing version_added\r\n\r\n* Fix booleans"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/179012caf339d403bb8ee04d4e567b79dc50e76d", "message": "ACI_DOMAIN: Additional params per MIM (#34839)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/05c960cf92694c304e0ae9acec5d5521437c9ef3", "message": "MIM URL: Update url for mim (#34844)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/002fad53a1d12418af9f34d016f4f86847523b80", "message": "ACI_SWITCH_LEAF_SELECTOR: Add description options (#34841)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/aa9fc9313f36407cd376fd8a0775f7be3ba3988c", "message": "Aci access port to interface policy leaf profile (#34842)\n\n* ACI_ACC_PORT_TO_INTF_POL_LEAF_PROF: Change from/to to standard used elsewhere\n\n* ACI_ACC_PORT_TO_INTF_POL_LEAF_PROF: Add description options\n\n* ACI_ACC_PORT_TO_INTF_POL_LEAF_PROF: Add missing trailing commas"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/3c7e639dde114ecf193043e24129a2bf988889a1", "message": "ACI_AEP: Allow toggling of infrastructure vlan (#34840)\n\n* ACI_AEP: Allow toggling of infrastructure vlan\n\n* ACI_DOMAIN: fix accidental 'r' removal"}], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34845", "title": "ACI_EPG_TO_DOMAIN: Add note about Openstack VMMs", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nAdd note about Openstack VMM domains per request.\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\nThis fixes #34211\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Docs Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\naci_epg_to_domain\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n2.4.2\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\nhttps://github.com/ansible/ansible/issues/34211\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "jimi-c": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/b107e397cbd75d8e095b08495da2ac2aad3ef96f", "message": "Cache tasks as they are queued instead of en masse (#34752)\n\n* Cache tasks as they are queued instead of en masse\r\n\r\nThis also moves the task caching from the PlayIterator to the\r\nStrategyBase class, where it makes more sense (and makes it easier\r\nto not have to change the strategy class methods leading to an API\r\nchange).\r\n\r\nFixes #31673\r\n\r\n* Cleaning up unit tests due to 502ca780"}], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/3831882", "body": "The only modules that set strings in this case aren't registering facts, so it's more of a corner case than anything.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/3831882/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/3990840", "body": "This has been reverted, while leaving the second portion regarding the duplicate checking.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/3990840/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/4036948", "body": "Yep, I was chasing this down based on a report on irc. Thanks!\nOn Sep 6, 2013 6:27 PM, \"reedobrien\" notifications@github.com wrote:\n\n> This commit breaks reading and using the set inventory parameter\n> ansible_python_interpreter and perhaps other parameters as well. However,\n> we did not test others only that this commit prevents the correct\n> interpreter and its packages from getting used.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ansible/ansible/commit/ae9e38daf831505790ac8a8cbdd3f80b79aa1b78#commitcomment-4036836\n> .\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4036948/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/4066693", "body": "@analytically, then I'm guessing it would have still been broken with the previous lines of code? If you could test that and let me know, I'd appreciate it.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4066693/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/4143663", "body": "Ooops, give me a few minutes and I'll get this fixed.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4143663/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/4143732", "body": "This should be ok now.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4143732/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/4148181", "body": "It was never distributed and just merged in. I moved it before pushing it up to github, so that should not be an issue.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4148181/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/4224077", "body": "I tested on Ubuntu's 12.04 and 13.04. Is your script an upstart script? Does https://github.com/ansible/ansible/pull/4310 address this issue at all?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4224077/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/4225199", "body": "Yeah just let me know, I can fire up a debian box for testing if need be as well.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4225199/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/4232894", "body": "Thanks, I'll take a look at it as soon as possible.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4232894/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/4717990", "body": "Go ahead and send the PR for the playbook/init.py change, but I don't think the bool cast is required. I'll test it with both though when I see your PR. Thanks!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4717990/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/6010362", "body": "@dirtyharrycallahan yeah, I was discussing it with @jctanner, I wasn't aware of the unit tests for this that had some mock interfaces which need to be updated. I'll push a fix for it tonight. Thanks!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/6010362/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/6206386", "body": "Not at all, I think that's a bit cleaner.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/6206386/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/6234746", "body": "Was this an issue when LANG was being set to C?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/6234746/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/6239944", "body": "Ok, you can also set the locale in your ansible.cfg via the `module_lang =` option. The above patch is not how 1.6 works, as we changed it slightly before the release so that the environment is set on the command line to execute the module rather than inside the module itself. This means you can override the locales per-task by setting the environment as follows:\n\n<pre>\n  - module: foo=bar\n    environment:\n      LANG: \"C\"\n      LC_CTYPE: \"en_CA.UTF-8\"\n</pre>\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/6239944/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/6780975", "body": "Whoops, I'll fix that.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/6780975/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/6780999", "body": "Done.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/6780999/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/6863225", "body": "@chestel while testing on the CentOS 7 BETA, I noticed it included a space there, so it was not working for that distribution. So this looks like it's going t be an annoying bug to fix to cover multiple scenarios :-/\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/6863225/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/6863228", "body": "If you have not already, could you open a new issue for this?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/6863228/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/7099542", "body": "Typically if the variable has an '=' in it, it should be wrapped in a quote (ie. `\"{{ tmpfs_tar_options }}\"`). In this case I'm  not sure that there's a way to do that since the shell/command modules use a free-form syntax. So right now I would suggest moving the `--xattrs-include='*'` option out of that variable and directly into the shell line to work-around this.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7099542/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/7125282", "body": "You are correct, they should. If you have not already, could you send us a PR for that so you can get credit? Thanks!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7125282/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/7191490", "body": "@hacosta where?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7191490/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/7194025", "body": "@hacosta Ahh, no, the quotes should be removed around it, so this is just a straight up string comparison. It doesn't matter which quotes are used here.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7194025/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/7404435", "body": "This was included in 1.7.1:\n\nhttps://github.com/ansible/ansible/commit/293b11e45d340b56b6ff72d8c7f3701d60abf6dc\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7404435/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/7460618", "body": "The pattern can be a list of patterns, which in the above case would be a list of names, so the result would be filtered based on that list. If you believe you're experiencing an issue with this, please open up an issue (if you haven't done so yet) with an example playbook/inventory that shows the problem you're seeing. Thanks!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7460618/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/7611947", "body": "Ahh yes, I copied this pretty much directly from the python source code, so as to override that function. I can add a check to this for the python version.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7611947/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/7643311", "body": "@mpeters yes, I will fix this today.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7643311/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/7643692", "body": "@mpeters just pushed a fix for this, so it should be resolved now.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7643692/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/7643889", "body": "That's my fault, I didn't catch that the param was not added to the argument spec. This has been corrected now.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7643889/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/7691582", "body": "We wanted to have a one-time use value for the omit variable, to prevent accidental re-use or malicious omitting of parameters via external variables like facts, etc.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7691582/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/7738237", "body": "@mpeters could you open a new issue for this please?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7738237/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/7738298", "body": "@mpeters looking at the commit, I would think the commit raised in the original issue would have been the commit that broke things? Did you bisect specifically to this commit?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7738298/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/7738373", "body": "Nevermind, I did bisect it to 10afaee108f9fd04ad45155b7977144304d77a1d as well.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7738373/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/7738535", "body": "Thanks!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7738535/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/10335917", "body": "@apollo13 thanks, I've made that fix in the code now (bda83fdf84068bcd3720f5c6d82c21a7d5e66594)\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/10335917/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/11766181", "body": "In regards to which line?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/11766181/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/11778637", "body": "Fair enough, changed to `None` to be safe.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/11778637/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/13147506", "body": "Whoops, I'll fix that. I had tried something else there and removed it, but forgot to unindent that one line.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/13147506/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/13147592", "body": "Fixed.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/13147592/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/13289324", "body": "@jshrake I'm unclear what you mean, as we have set that to 3 params now?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/13289324/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "OWNER"}], "review_comments": []}, "jctanner": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/b10d5f34ea644e2896d33a08448fbd654c24bc72", "message": "Extend validate-modules to check the next to last line (#34819)\n\n* Add validation for the next to last line of a module\r\n\r\n* Fix last error code\r\n\r\n* Reduce to a single conditional\r\n\r\n* Fix conditionals\r\n\r\n* Move the final warnings statement to main() in mysql_replication"}], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34891", "title": "Tests symlinks", "body": "##### SUMMARY\r\nA plugin or plugin tests author may want to develop content in a repo separate from ansible/ansible. With this patch, they could symlink from the `ansible/ansible/test/...` to the separate repo's checkout and ansible-test will find their test targets.\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nansible-test\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n2.5\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "MEMBER"}], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/4310131", "body": "@haskjold this was superseded by https://github.com/ansible/ansible/commit/b7f229d3 , which will cover both centos and rhel4\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4310131/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/4432530", "body": "@dbtucker, please see https://github.com/ansible/ansible/issues/4666\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4432530/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/4480799", "body": "@dekked please file a bug with the appropriate information.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4480799/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/4839707", "body": "@schrock-meteor please file a separate bug. Should be an easy fix.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4839707/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/5599970", "body": "@mtr would you mind opening a bug?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5599970/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/5613205", "body": "@nejko please open a bug and we will take a look.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5613205/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/6018596", "body": "@jeromew open a bug please. We'll need to make sure we add coverage in the tests for that too.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/6018596/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}], "review_comments": []}, "danielmellado": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/ed806f0feeef1e7c70e13a40e4f1edd4e71e9a25", "message": "Add support for heat stack metadata (#34573)\n\nThis commit adds support for heat tag metadata when creating a new\r\nstack."}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "d-riecken": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/5540e2f8a917d68d8abe7abbffb8e7b1e3a80302", "message": "cloudstack: inventory: Added feature list by tag (#31319)"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "snecklifter": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/7644042d21ffce973edb2f809d0c2e9d7b501a75", "message": "Update ManageIQ Azure Tenant ID parameter (#34806)\n\nCurrently the ManageIQ API does not support azure_tenant_id but\nthis is in the process of being fixed. This commit changes\nthe recently-committed parameter to allow for the upcoming change."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/cf86c6aaf6ff72d05dbaa0c77943fddcce3c9e64", "message": "Add ManageIQ Azure provider (#34708)\n\nThis commit adds support for creating Azure providers on ManageIQ."}], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35043", "title": "Add OpenStack Director provider", "body": "##### SUMMARY\r\nAdds the ability to create an OpenStack Director provider in\r\nManageIQ.\r\n\r\n##### ISSUE TYPE\r\n - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\nremote_management/manageiq\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0 (add-director-provider 382471890b) last updated 2018/01/18 12:14:40 (GMT +100)\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n\r\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34932", "title": "Add ManageIQ OpenStack provider", "body": "##### SUMMARY\r\nAdds the capability to create OpenStack providers. Because one\r\nof the parameters, keystone_v3_domain_id, is not currently\r\nexposed, it is added as an alias of azure_tenant_id which currently\r\nmaps to uid_ems. Work is in progress to fix this.\r\n\r\nManageIQ/manageiq#16802\r\nManageIQ/manageiq-api#279\r\nManageIQ/manageiq-providers-openstack#196\r\n\r\n##### ISSUE TYPE\r\n - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\nremote_management/manageiq\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0 (add-openstack-provider 49c280d907) last updated 2018/01/16 14:02:22 (GMT +100)\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\nI am going to keep adding providers until @cben refactors this code :D\r\n\r\nIf using an alias for azure_tenant_id is considered a duff move then perhaps re-instate uid_ems and just use that in the interim. Meh.", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "paulRbr": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/9302e8d2a492b66ad328e77a4bca6e99bda21dff", "message": "contrib(inventory): adds a dynamic inventory for Scaleway cloud (#30313)\n\nprovider\r\n\r\nProvides a dynamic inventory plugin for Scaleway cloud provider with\r\nthe following features:\r\n\r\n- Configurable scaleway.ini file\r\n- Cache API responses\r\n- Choose public or private IPs\r\n- Create groups per Scaleway 'tags'\r\n- Create groups per Scaleway regions"}], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34943", "title": "docs: fix module HashiVault indicating \"approle\" auth meth", "body": "\r\n##### SUMMARY\r\n\r\n**lookup plugin: `hashi_vault`**\r\n\r\nThe \"approle\" auth method has been added in #22403 (merged in Dec 2017) and will only be part of Ansible 2.5.\r\n\r\nWhile looking at the [current documentation](https://docs.ansible.com/ansible/devel/plugins/lookup/hashi_vault.html) I was confused on why I could not use this method in the latest 2.4 release. Thus the need for this documentation changes.\r\n\r\n##### COMPONENT NAME\r\n\r\n**lookup plugin: `hashi_vault`**\r\n\r\n##### ANSIBLE VERSION\r\n\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n\"ansible 2.4.2.0\"\r\n```\r\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "dpassante": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/085a25057535802eedea305b8cfda6dd8cbc9d75", "message": "Add new Cloudstack module cs_vpc_offering (#34797)\n\n* Add new Cloudstack module cs_vpc_offering\r\n\r\n* fix documentation\r\n\r\n* fix returns list\r\n\r\n* state=absent example minimalization"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "samerd": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/f8884f12bcda607dc0b8a993aa0b9ade1f3f191b", "message": "Mellanox OS name change: MLNXOS changed to ONYX (#34753)\n\n* Mellanox OS name change: MLNXOS changed to ONYX\r\n\r\nSigned-off-by: Samer Deeb <samerd@mellanox.com>\r\n\r\n* Fix alphabetical order of modules metadata\r\n\r\nSigned-off-by: Samer Deeb <samerd@mellanox.com>"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/cb206abea36427ca4292b5a14986d6316224d7bc", "message": "Support advertised networks in bgp protocol (#34728)\n\nSigned-off-by: Samer Deeb <samerd@mellanox.com>"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/fcf6da0a9df6c8be6c1913d5f89d5cca40602cd8", "message": "Add ospf protocol support for Mellanox MLNXOS network devices (#34717)\n\n* Add new module for managing ospf protocol on mlnxos devices\r\n\r\nSigned-off-by: Samer Deeb <samerd@mellanox.com>\r\n\r\n* Fix test name, and documentation.\r\n\r\nSigned-off-by: Samer Deeb <samerd@mellanox.com>"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "d-vb": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/57ff84251ea4d7c317c8cc5e50c906f9dca8c0f8", "message": "Implemented Trigger Repetition (#32938)\n\n* Implemented Trigger Repetition\r\n\r\n* Refactorings and integration tests for Trigger Repetition\r\n\r\n* Suggestions of first review\r\n\r\n* Changes of second review"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "chriskarel": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/bb9dcb0d2ba6c8eecd82ae4e276c3b3b763c5adb", "message": "Adding \"-SyncWindow 0\" flag to Compare-Object call (#34656)\n\nAdding \"-SyncWindow 0\" flag to the Compare-Object call used to determine if the existing and proposed IP address lists are the same.  This makes the array comparison mark changes in order as a difference.\r\n\r\nFix for bug #34651"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "andreaso": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/185f28eceea576722c1ab9daa78395aba2cefabd", "message": "Add andreaso (me) as cloudflare_dns module maintainer (#34743)"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/7ac061139b3f924015a4e3b2a174dc7002d067fe", "message": "Sort out parameter requirements for cloudflare_dns (#31800)\n\nThis module is mostly written to make room for the option of not\nsetting the `value` parameter while `state=absent`. That choice being\na feature, since it allows both for the removal of individual records\nas well as the removal of full record sets.\n\nThe opposite goes for the `record` parameter, which needs to be defined\nat least by its default value for the module to be able to produce any\nmeaningful result. Hence making it explicit as part of required_if.\n\nThe MX record type is already plenty covered. In addition to the\npriority parameter having a default value, the `ensure_dns_record`\nmethod does its own parameter checking.\n\nSRV records on the other hand do need additional parameter\nchecking. Primarily with the `delete_dns_records` method in mind.\n\nFixes #23957"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "xuxinkun": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/ca4eb07f46e7e3112757cb1edc7bd71fdd6dacad", "message": "Adds kubectl and oc connection plugins (#26668)"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "reversecipher": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/7fbe19c04745a3351f5915a8109e3c71bcb938c8", "message": "vmware_guest: fix dvs idempotency issue (#34208)\n\n* vmware_guest: fix dvs idempotency issue\n\n* Rewrite VDS section\n\n* Fix PEP 8 error"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "ryansb": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/b60c67d3296662ac7ce4b8f95bb73fc600024526", "message": "Remove double-specified EC2 ASG test parameters (#34714)\n\nIn the ec2_asg integration tests there are a couple places where\r\nparameters are specified twice (as bot `tag.Name` and `name:`) and\r\nothers where those parameters aren't needed for the state requested."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/95ff8f1a90f9008dd8ae91df4655b4cc39cb210e", "message": "Change cow path selection variable from COWPATH to COW_PATH (#34063)\n\nFor consistency with other cow-related options, such as\n`ANSIBLE_COW_SELECTION`, add an underscore to the new `ANSIBLE_COWPATH`\noption."}, {"url": "https://api.github.com/repos/ansible/ansible/commits/60b3a191e6c712200d432c411aa8bf9952f17e8b", "message": "Add terraform module to changelog"}, {"url": "https://api.github.com/repos/ansible/ansible/commits/9233520b3136b5fa20ecc2d290dc0a816b3432c5", "message": "New module: Terraform (#31214)\n\n* First pass at Terraform module\r\n\r\n* Support output variables\r\n\r\n* Support idempotent plan checks and external plan files\r\n\r\n* Add check mode support\r\n\r\n* Support custom statefile location & remove color-coding from shell output\r\n\r\n* Docs\r\n\r\n* Let missing statefile hard-fail\r\n\r\n* Update to support present/planned/absent states\r\n\r\n* PEP8\r\n\r\n* Add docs & fix python 2.6 incompatibility\r\n\r\n* PEP8\r\n\r\n* PEP8"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "charliejllewellyn": {"issues": [], "commits": [{"url": "https://api.github.com/repos/ansible/ansible/commits/6643fe821e51b22ec1d08ed8efcc10d757251de3", "message": "Fix storage endpoint for Azure Stack (#33946)\n\n* Fix storage endpoint for Azure Stack\r\n\r\nhttps://github.com/Azure/msrestazure-for-python/issues/64\r\n\r\n* corrected visual indentation"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "ivanbojer": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35203", "title": "new module panos_query_rules", "body": "##### SUMMARY\r\n- Security policies allow you to enforce rules and take action, and can be as general or specific as needed. The policy rules are compared against the incoming traffic in sequence, and because the first rule that matches the traffic is applied, the more specific rules must precede the more general ones.\r\n\r\n##### ISSUE TYPE\r\n - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\npanos_query_rule\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.2.0\r\n  config file = None\r\n  configured module search path = [u'/Users/ibojer/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/ibojer/.virtualenvs/ansible/lib/python2.7/site-packages/ansible\r\n  executable location = /Users/ibojer/.virtualenvs/ansible/bin/ansible\r\n  python version = 2.7.13 (default, Feb  6 2017, 11:22:10) [GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.42.1)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/35202", "title": "new panos_match_rule module", "body": "##### SUMMARY\r\n- Security policies allow you to enforce rules and take action, and can be as general or specific as needed. The policy rules are compared against the incoming traffic in sequence, and because the first rule that matches the traffic is applied, the more specific rules must precede the more general ones.\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\npanos_match_rule.py\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.2.0\r\n  config file = None\r\n  configured module search path = [u'/Users/ibojer/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/ibojer/.virtualenvs/ansible/lib/python2.7/site-packages/ansible\r\n  executable location = /Users/ibojer/.virtualenvs/ansible/bin/ansible\r\n  python version = 2.7.13 (default, Feb  6 2017, 11:22:10) [GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.42.1)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n\r\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/35201", "title": "new module that allows for adding DynamicAddressGroup tags to the firewall", "body": "##### SUMMARY\r\nCreate the ip address to tag associations. Tags will in turn be used to create DAG's\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\npanos_dag_tags.py\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.2.0\r\n  config file = None\r\n  configured module search path = [u'/Users/ibojer/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/ibojer/.virtualenvs/ansible/lib/python2.7/site-packages/ansible\r\n  executable location = /Users/ibojer/.virtualenvs/ansible/bin/ansible\r\n  python version = 2.7.13 (default, Feb  6 2017, 11:22:10) [GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.42.1)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n\r\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34433", "title": "remove panos_security_policy", "body": "##### SUMMARY\r\nremoved panos_security_policy deprecated module in lieu of new panos_security_rule module. The old module uses deprecated API's that do not exist anymore.\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\npanos_security_policy\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.2.0\r\n  config file = None\r\n  configured module search path = [u'/Users/ibojer/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/ibojer/.virtualenvs/ansible/lib/python2.7/site-packages/ansible\r\n  executable location = /Users/ibojer/.virtualenvs/ansible/bin/ansible\r\n  python version = 2.7.13 (default, Feb  6 2017, 11:22:10) [GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.42.1)]\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34432", "title": "removed panos_nat_policy", "body": "##### SUMMARY\r\nremoved panos_nat_policy deprecated module in lieu of new panos_nat_rule module. The old module uses deprecated API's that do not exist anymore.\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\npanos_nat_policy\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.2.0\r\n  config file = None\r\n  configured module search path = [u'/Users/ibojer/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/ibojer/.virtualenvs/ansible/lib/python2.7/site-packages/ansible\r\n  executable location = /Users/ibojer/.virtualenvs/ansible/bin/ansible\r\n  python version = 2.7.13 (default, Feb  6 2017, 11:22:10) [GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.42.1)]\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34428", "title": "new module panos_op.py", "body": "##### SUMMARY\r\nThis module will allow user to pass and execute any supported OP command on the PANW device.\r\n\r\n##### ISSUE TYPE\r\n - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\npanos_op\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.2.0\r\n  config file = None\r\n  configured module search path = [u'/Users/ibojer/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/ibojer/.virtualenvs/ansible/lib/python2.7/site-packages/ansible\r\n  executable location = /Users/ibojer/.virtualenvs/ansible/bin/ansible\r\n  python version = 2.7.13 (default, Feb  6 2017, 11:22:10) [GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.42.1)]\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "mykaul": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35194", "title": "Adds the oVirt High Performance (high_performance) VM type.", "body": "##### SUMMARY\r\nAdds the high performance VM type to oVirt.\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\noVirt\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/ykaul/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.14 (default, Jan 17 2018, 14:28:32) [GCC 7.2.1 20170915 (Red Hat 7.2.1-2)]\r\n\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "itewk": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35182", "title": "manageiq_config.py - add ability to modify ManageIQ config", "body": "##### SUMMARY\r\nAdds the ability to modify ManageIQ config. The ability to manage the config of a ManageIQ appliance is not exposed via the REST API therefor this module uses the rails runner to run the `MiqServer.my_server.get_config` and `MiqServer.my_server.set_config` functions to acomplish it's task.\r\n\r\nThis module is very important to being able to fully automate the deployment and configuration management of ManageIQ appliances because otherwise a user has to manually log into the UI of each and every appliance and go to the advanced settings tab to modify settings like memory thresholds and SMTP configuration.\r\n\r\n##### ISSUE TYPE\r\n - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\nmanageiq_config\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.1.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/ian/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, May  3 2017, 07:55:04) [GCC 4.8.5 20150623 (Red Hat 4.8.5-14)]\r\n\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\n```\r\n# set the smtp settings\r\n- manageiq_config:\r\n    name: smtp\r\n    value:\r\n      from: cfme@example.com\r\n      host: postfix.example.com\r\n      port: 25\r\n      domain: example.com\r\n\r\n# set generic worker memory threshold\r\n- manageiq_config:\r\n    name: workers\r\n    value:\r\n      worker_base:\r\n        queue_worker_base:\r\n          generic_worker:\r\n            memory_threshold: '900.megabytes'\r\n```\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "stefanhorning": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35180", "title": "Added metrics_collection management to ec2_asg module to switch ASG m\u2026", "body": "\u2026etrics on and off.\r\n\r\n##### SUMMARY\r\nAdded metric_collection functionality to ec2_asg module.\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nec2_asg module\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.2.0\r\n  config file = None\r\n  ansible python module location = /usr/local/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.12 (default, Nov 20 2017, 18:23:56) [GCC 5.4.0 20160609]\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\n\r\nUsed following boto3 method (for reference): http://boto3.readthedocs.io/en/latest/reference/services/autoscaling.html#AutoScaling.Client.enable_metrics_collection", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "ravibhure": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35176", "title": "Fix python3 interpreter issue (#34811)", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n```When using python3 as ansible interpreter the haproxy fails while setting the backend to a specific state.```\r\n* update python3 `Type` to fix this.\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\nHAProxy module\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "cprh": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35175", "title": "Support for Services in the IPA module", "body": "##### SUMMARY\r\nThis change is an addition to the IPA module. It adds support for managing IPA services (addition, deletion, and 'ManagedBy' management). It extend the existing feature of the module, code based on the existing ones.\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nModule: ipa\r\n\r\n##### ANSIBLE VERSION\r\n\r\n```\r\nansible 2.4.2.0\r\n  config file = /home/remote/cparent/.ansible.cfg\r\n  configured module search path = [u'/home/remote/cparent/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.14 (default, Jan 17 2018, 14:28:32) [GCC 7.2.1 20170915 (Red Hat 7.2.1-2)]\r\n\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n\r\nThe addition of ipa_service to the ipa modules makes it possible to execute the following:\r\n\r\n```\r\n# Ensure service is present\r\n- ipa_service:\r\n    name: http/host01.example.com\r\n    state: present\r\n    ipa_host: ipa.example.com\r\n    ipa_user: admin\r\n    ipa_pass: topsecret\r\n\r\n# Ensure service is absent\r\n- ipa_service:\r\n    name: http/host01.example.com\r\n    state: absent\r\n    ipa_host: ipa.example.com\r\n    ipa_user: admin\r\n    ipa_pass: topsecret\r\n\r\n# Changing Managing hosts list\r\n- ipa_service:\r\n    name: http/host01.example.com\r\n    host:\r\n       - host01.example.com\r\n       - host02.example.com\r\n    ipa_host: ipa.example.com\r\n    ipa_user: admin\r\n    ipa_pass: topsecret\r\n\r\n```\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "bjakubiak": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35171", "title": "wait_for works with tcp6 disabled, fixes #23456", "body": "##### SUMMARY\r\nFixes #23456. wait_for works with tcp6 disabled in drain mode.\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nwait_for\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0 (devel 347b5d1e50) last updated 2018/01/21 19:11:24 (GMT +200)\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nIgnores missing file under /proc/net instead of throwing error. Error thrown was intercepted later, and was treated the same way as still existing connections.\r\n\r\n```\r\n# Provided tcp6 is disabled, so there is no /proc/net/tcp6 file. And there is nothing listening on port 80.\r\n% ansible localhost -m wait_for -a 'state=drained port=80 sleep=2 timeout=10'\r\nlocalhost | FAILED! => {\r\n    \"attempts\": 1,\r\n    \"changed\": false,\r\n    \"elapsed\": 10,\r\n    \"failed\": true,\r\n    \"msg\": \"Timeout when waiting for 127.0.0.1:80 to drain\"\r\n}\r\n# after change:\r\n% ansible localhost -m wait_for -a 'state=drained port=80 sleep=2 timeout=10'\r\nlocalhost | SUCCESS => {\r\n    \"attempts\": 1,\r\n    \"changed\": false,\r\n    \"elapsed\": 0,\r\n    \"failed\": false,\r\n    \"path\": null,\r\n    \"port\": 80,\r\n    \"search_regex\": null,\r\n    \"state\": \"drained\"\r\n}\r\n```\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "jontow": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35160", "title": "add DragonFlyBSD support to modules/system/user.py", "body": "##### SUMMARY\r\nDuplicate existing FreeBsdUser class as DragonFlyUser, correctly setting platform name.\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\nsystem/user\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.5.0 (devel 97b51f6187) last updated 2018/01/21 18:28:36 (GMT -400)\r\n  config file = None\r\n  configured module search path = ['/Users/jontow/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/jontow/GIT-external/ansible/lib/ansible\r\n  executable location = /Users/jontow/GIT-external/ansible/bin/ansible\r\n  python version = 3.6.4 (default, Jan  4 2018, 20:49:52) [GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.39.2)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\nThis is required on DragonFly, or it fails with an error like 'Failed to find required executable usermod' (DragonFly uses 'pw', like FreeBSD).\r\nInstead of attempting something fancy like loading the FreeBsdUser class and overriding just the platform, I chose to follow existing convention and create a new class, since it is technically a separate platform that can diverge over time.\r\nTo trigger this bug, simply define a user that gets applied on a DragonFlyBSD host, like so:\r\n```\r\n---\r\n- user:\r\n    name: jontow\r\n    comment: \"jontow\"\r\n    groups: \"{{ admin_groups }}\"\r\n    append: yes\r\n    shell: \"{{ zsh_path }}\"\r\n    update_password: on_create\r\n    password: '...'\r\n```\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\nBefore:\r\n```\r\nTASK [common : user] *********************************************************************************************************************************************\r\ntask path: /Users/jontow/GIT-je/ansible/roles/common/tasks/users/jontow.yml:2\r\nfatal: [dbuild.je]: FAILED! => {\"attempts\": 1, \"changed\": false, \"failed\": true, \"msg\": \"Failed to find required executable usermod in paths: /home/jontow/.rbenv/bin:/home/jontow/.cargo/bin:/sbin:/bin:/usr/sbin:/usr/bin:/usr/games:/usr/local/sbin:/usr/local/bin:/usr/pkg/sbin:/usr/pkg/bin:/home/jontow/bin:/sbin:/bin:/usr/sbin:/usr/bin:/usr/games:/usr/local/bin:/usr/local/sbin:/usr/pkg/bin:/usr/X11R6/bin:/home/argus/bin:/home/argus/sbin:/home/jontow/bin\"}\r\n```\r\n\r\nAfter:\r\n```\r\nTASK [common : user] *********************************************************************************************************************************************\r\ntask path: /Users/jontow/GIT-je/ansible/roles/common/tasks/users/jontow.yml:2\r\nok: [dbuild.je] => {\"append\": true, \"attempts\": 1, \"changed\": false, \"comment\": \"Jonathan Towne\", \"failed\": false, \"group\": 1000, \"groups\": \"wheel\", \"home\": \"/home/jontow\", \"move_home\": false, \"name\": \"jontow\", \"password\": \"NOT_LOGGING_PASSWORD\", \"shell\": \"/usr/local/bin/zsh\", \"state\": \"present\", \"uid\": 1000}\r\n```", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "pmarques": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35156", "title": "Update Azure dynamic inventory authentication using user / pass", "body": "##### SUMMARY\r\n\r\nIf user password contains a '<' or '>' (greater or less then char) the dynamic inventory fails with this error:\r\n```\r\n, InvalidClientIdError: (invalid_request) AADSTS90013: Invalid input received from the user.\r\nTrace ID: *****\r\nCorrelation ID: *********\r\nTimestamp: 2018-01-21 19:39:44Z\r\n```\r\n\r\n##### ISSUE TYPE\r\n\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n\r\ncontrib/inventory/azure_rm.py\r\n\r\n##### ADDITIONAL INFORMATION\r\n\r\nThis update comes after this discussion:\r\n * https://github.com/Azure/azure-sdk-for-python/issues/1629#issuecomment-357558411\r\n\r\nThis patch applies recommendations from Microsoft documentation:\r\n * https://docs.microsoft.com/en-us/python/azure/python-sdk-azure-authenticate?view=azure-python#mgmt-auth-legacy", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34980", "title": "Remove unused import from azure dyn inventory", "body": "##### SUMMARY\r\n\r\nRemove unused import from azure_rm dynamic inventory\r\n\r\n##### ISSUE TYPE\r\n\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n\r\ncontrib/inventory/azure_rm.py\r\n\r\n##### ADDITIONAL INFORMATION\r\n\r\nThe module is importing a package that is not used and not installed by default.\r\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "CFSworks": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35153", "title": "Fix Digital Ocean inventory script pagination handling", "body": "##### SUMMARY\r\nThis fixes the pagination code in the Digital Ocean inventory script. It was fetching and combining pages correctly, but then returning the wrong dict to the caller.\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n`contrib/inventory/digital_ocean.py`", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "saito-hideki": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35129", "title": "Fix dynamic inventory for vagrant does not work on python3", "body": "##### SUMMARY\r\n\r\nThe dynamic inventory script for vagrant does not work on python3 with some errors\r\n\r\n##### ISSUE TYPE\r\n\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n\r\n-  Dynamic inventory script for vagrant(contrib/inventory/vagrant.py)\r\n\r\n##### ANSIBLE VERSION\r\n\r\n```\r\n$ ansble --version\r\nansible 2.5.0\r\n  config file = /Users/hsaito/.ansible.cfg\r\n  configured module search path = ['/Users/hsaito/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/hsaito/.virtualenvs/devel/lib/python3.6/site-packages/ansible-2.5.0-py3.6.egg/ansible\r\n  executable location = /Users/hsaito/.virtualenvs/devel/bin/ansible\r\n  python version = 3.6.3 (default, Nov  3 2017, 19:37:38) [GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.38)]\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\n\r\nWhen I tried to launch vagrant.py with --list option, the following error occurred on python3.6.3 runtime environment:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/Users/hsaito/work/src/ansible/contrib/inventory/vagrant.py\", line 41, in <module>\r\n    from cStringIO import StringIO\r\nModuleNotFoundError: No module named 'cStringIO'\r\n```\r\n\r\nEven if I fixed above error, and then re-ran vagrant.py, I have different error as follows:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"./vagrant.py\", line 113, in <module>\r\n    ssh_config = get_ssh_config()\r\n  File \"./vagrant.py\", line 75, in get_ssh_config\r\n    return dict((k, get_a_ssh_config(k)) for k in list_running_boxes())\r\n  File \"./vagrant.py\", line 80, in list_running_boxes\r\n    output = subprocess.check_output([\"vagrant\", \"status\"]).split('\\n')\r\nTypeError: a bytes-like object is required, not 'str'\r\n```", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "carlbuchmann": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35118", "title": "fix when using vrf option", "body": "ping did not include \"vrf\" keyword in command and would fail.\r\n\r\n##### SUMMARY\r\nping did not include \"vrf\" keyword in command and would fail.\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nios_config, vrf option\r\n\r\n##### ANSIBLE VERSION\r\nansible 2.4.2.0\r\n\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nTask:\r\n    - name: Test reachability to branch wan loopback IPs using mgmt vrf\r\n      ios_ping:\r\n        provider: \"{{ ioscli }}\"\r\n        dest: '{{ item }}'\r\n        vrf: mgmt\r\n      with_items:\r\n        - 172.16.1.201\r\n\r\n\r\n\r\nBefore Fix:\r\nfailed: [hq-wan-mpls] (item=172.16.1.201) => {\r\n    \"changed\": false,\r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"auth_pass\": null,\r\n            \"authorize\": null,\r\n            \"count\": null,\r\n            \"dest\": \"172.16.1.201\",\r\n            \"host\": null,\r\n            \"password\": null,\r\n            \"port\": null,\r\n            \"provider\": {\r\n                \"auth_pass\": null,\r\n                \"authorize\": null,\r\n                \"host\": \"hq-wan-mpls\",\r\n                \"password\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\",\r\n                \"port\": 22,\r\n                \"ssh_keyfile\": null,\r\n                \"timeout\": null,\r\n                \"username\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\"\r\n            },\r\n            \"source\": null,\r\n            \"ssh_keyfile\": null,\r\n            \"state\": \"present\",\r\n            \"timeout\": null,\r\n            \"username\": null,\r\n            \"vrf\": \"mgmt\"\r\n        }\r\n    },\r\n    \"item\": \"172.16.1.201\",\r\n    \"msg\": \"timeout trying to send command: ping mgmt 172.16.1.201\",\r\n    \"rc\": 1\r\n}\r\n\r\n\r\nAfter Fix:\r\nok: [hq-wan-mpls] => (item=172.16.1.201) => {\r\n    \"changed\": false,\r\n    \"commands\": [\r\n        \"ping vrf mgmt 172.16.1.201\"\r\n    ],\r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"auth_pass\": null,\r\n            \"authorize\": null,\r\n            \"count\": null,\r\n            \"dest\": \"172.16.1.201\",\r\n            \"host\": null,\r\n            \"password\": null,\r\n            \"port\": null,\r\n            \"provider\": {\r\n                \"auth_pass\": null,\r\n                \"authorize\": null,\r\n                \"host\": \"hq-wan-mpls\",\r\n                \"password\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\",\r\n                \"port\": 22,\r\n                \"ssh_keyfile\": null,\r\n                \"timeout\": null,\r\n                \"username\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\"\r\n            },\r\n            \"source\": null,\r\n            \"ssh_keyfile\": null,\r\n            \"state\": \"present\",\r\n            \"timeout\": null,\r\n            \"username\": null,\r\n            \"vrf\": \"mgmt\"\r\n        }\r\n    },\r\n    \"item\": \"172.16.1.201\",\r\n    \"packet_loss\": \"0%\",\r\n    \"packets_rx\": 5,\r\n    \"packets_tx\": 5,\r\n    \"rtt\": {\r\n        \"avg\": 1,\r\n        \"max\": 2,\r\n        \"min\": 1\r\n    }\r\n}\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "hc42": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35111", "title": "New module: ezjail - manage FreeBSD jails with ezjail", "body": "##### SUMMARY\r\nI created this module to be able to define the state of an FreeBSD jail, managed with Ezjail, in a playbook or role. The module should only do the minimal work of creating or deleting and starting or stopping a jail (similar to the service module). This enables me to quickly setup jails for applications. The installation and configuration of the jailhost should be done by in a playbook since this differs as different people have different preferences and different use cases. This module should be as general as possible.\r\nSee https://github.com/hc42/ansible-ezjail for a test playbook. There is also a vagrant file to setup a FreeBSD VM and test the playbook on it.\r\n\r\n##### ISSUE TYPE\r\n - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\nnew module: ezjail (system)\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0 (devel 6b14eb2dec) last updated 2018/01/19 21:44:10 (GMT +200)\r\n  config file = None\r\n  configured module search path = ['~/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = ~/ansible-hc/lib/ansible\r\n  executable location = ~/ansible-hc/bin/ansible\r\n  python version = 3.6.4 (default, Jan 12 2018, 19:29:13) [GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.39.2)]\r\n```", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "rpieterick": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35106", "title": "New module: jboss_config", "body": "##### SUMMARY\r\nNew module to manage JBoss configuration via the JBoss REST management API.\r\n\r\n##### ISSUE TYPE\r\n - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\njboss_config\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.3.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = Default w/o overrides\r\n  python version = 2.7.5 (default, May  3 2017, 07:55:04) [GCC 4.8.5 20150623 (Red Hat 4.8.5-14)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nBelow is the output from a playbook with the system properties examples:\r\n```\r\nPLAY [localhost] ***************************************************************\r\n\r\nTASK [Gathering Facts] *********************************************************\r\nok: [localhost]\r\n\r\nTASK [remove system properties] ************************************************\r\nchanged: [localhost] => {\"changed\": true, \"reload_required\": false, \"reloaded\": false, \"result\": {\"added\": [], \"removed\": [{\"address\": [\"system-property\", \"org.apache.coyote.http11.Http11Protocol.MAX_HEADER_SIZE\"], \"new\": null, \"old\": {\"value\": \"32768\"}}, {\"address\": [\"system-property\", \"org.apache.coyote.ajp.MAX_PACKET_SIZE\"], \"new\": null, \"old\": {\"value\": \"8190\"}}], \"updated\": []}}\r\n\r\nTASK [system properties] *******************************************************\r\nchanged: [localhost] => {\"changed\": true, \"reload_required\": false, \"reloaded\": false, \"result\": {\"added\": [{\"address\": [\"system-property\", \"org.apache.coyote.http11.Http11Protocol.MAX_HEADER_SIZE\"], \"new\": {\"value\": \"65535\"}}, {\"address\": [\"system-property\", \"org.apache.coyote.ajp.MAX_PACKET_SIZE\"], \"new\": {\"value\": \"16380\"}}], \"removed\": [], \"updated\": []}}\r\n\r\nTASK [system properties change] ************************************************\r\nchanged: [localhost] => {\"changed\": true, \"reload_required\": false, \"reloaded\": false, \"result\": {\"added\": [], \"removed\": [], \"updated\": [{\"address\": [\"system-property\", \"org.apache.coyote.http11.Http11Protocol.MAX_HEADER_SIZE\"], \"new\": {\"value\": \"32768\"}, \"old\": {\"value\": \"65535\"}}, {\"address\": [\"system-property\", \"org.apache.coyote.ajp.MAX_PACKET_SIZE\"], \"new\": {\"value\": \"8190\"}, \"old\": {\"value\": \"16380\"}}]}}\r\n\r\nPLAY RECAP *********************************************************************\r\nlocalhost                  : ok=4    changed=3    unreachable=0    failed=0\r\n```", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "parkervcp": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35105", "title": "ini children order callout", "body": "If you don't get the order correct for child:parent then it will parse as yml and fail.\r\n\r\n##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Feature Pull Request\r\n - New Module Pull Request\r\n - Bugfix Pull Request\r\n - Docs Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "ericwb": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35104", "title": "ios_facts: consistently use type of string not str", "body": "##### SUMMARY\r\nThe return documentation for ios_facts used an inconsistent mix\r\nof str and string to denote a string data type.\r\n\r\nThis patch modifies all to be \"string\".\r\n\r\n##### ISSUE TYPE\r\nDocs Pull Request\r\n\r\n##### COMPONENT NAME\r\nios_facts\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/browne/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.5/dist-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.5.2 (default, Nov 23 2017, 16:37:01) [GCC 5.4.0 20160609]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/35101", "title": "Add missing documentation on return of snmp_facts", "body": "##### SUMMARY\r\nThe snmp_facts module lacked any information on what kind\r\nof data can be expected on the return of successful execution.\r\n\r\nThis patch expands the docs to included info on return output\r\nincluding sample data and full descriptions.\r\n\r\n##### ISSUE TYPE\r\nDocs Pull Request\r\n\r\n##### COMPONENT NAME\r\nsnmp_facts\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/browne/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.5/dist-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.5.2 (default, Nov 23 2017, 16:37:01) [GCC 5.4.0 20160609]\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "mkrizek": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35099", "title": "[WIP] Fix jinja2>=2.9 nested include vars", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nThis fixes a bug when parent's local vars where not available in nested\r\nincludes. The bug can only be seen with jinja>=2.9 which changes\r\nhow the variable scopes worked.\r\n\r\nFixes #34886\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\ntemplate\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\ndevel\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34568", "title": "Throw error if with_* is given as a module arg", "body": "##### SUMMARY\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nmod_args\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\ndevel\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34344", "title": "[WIP] Treat meta tasks as regular", "body": "##### SUMMARY\r\nFirst hacky iteration of moving executing meta tasks through workers, the same way as regular tasks.\r\n\r\nFixes https://github.com/ansible/ansible/issues/27520 https://github.com/ansible/ansible/issues/33505\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nmeta tasks\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\ndevel\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nThis fixes the following scenarios:\r\n```\r\n- hosts: el7host\r\n  gather_facts: no\r\n  tasks:\r\n    - ping:\r\n    - meta: reset_connection\r\n    - ping:\r\n\r\n- hosts: el7host\r\n  gather_facts: no\r\n  remote_user: \"{{ test_user }}\"\r\n  tasks:\r\n    - ping:\r\n    - meta: reset_connection\r\n    - ping:\r\n\r\n- hosts: el7host\r\n  gather_facts: no\r\n  strategy: free\r\n  tasks:\r\n    - ping:\r\n    - meta: reset_connection\r\n    - ping:\r\n\r\n- hosts: el7host\r\n  gather_facts: no\r\n  remote_user: \"{{ test_user }}\"\r\n  strategy: free\r\n  tasks:\r\n    - ping:\r\n    - meta: reset_connection\r\n    - ping:\r\n```", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34140", "title": "Fix callback._dump_results to dump vaulted data", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nFixes https://github.com/ansible/ansible/issues/33925\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nlib/ansible/parsing\r\ncallback\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\ndevel\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/33809", "title": "Test for fix using loop_control with delegate_to", "body": "##### SUMMARY\r\nUpdate: The previous fix pushed in #34008, so at least adding tests here.\r\n\r\nThe value of `task.loop_control.loop_var` may be `None`, so we need to default it to `\"item\"`.\r\n\r\nFixes https://github.com/ansible/ansible/issues/33398 https://github.com/ansible/ansible/issues/33981\r\n\r\n##### ISSUE TYPE\r\n\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nvars/manager.py\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\ndevel\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/33763", "title": "redhat_subscription: do not use defaults from the conf file", "body": "##### SUMMARY\r\nAs noted by @kahowell in https://github.com/ansible/ansible/issues/25664#issuecomment-308442955, we seem to be better off not taking defaults from `/etc/rhsm/rhsm.conf` and only pass params to subscription-manager that were explicitly passed to the module.\r\n\r\n##### ISSUE TYPE\r\n\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nredhat_subscription\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n2.5\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "pfink": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35098", "title": "Fix typo in vars.rst", "body": "", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "Glandos": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35095", "title": "Make a list for default value of prompts", "body": "Otherwise, expect() fails.\r\n\r\n##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\ntelnet action\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "lachlancooper": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35081", "title": "Fix minor issues with docker_login docs", "body": "##### SUMMARY\r\nThe docker_login parameter docs have some minor issues. This fixes some of them.\r\n\r\n##### ISSUE TYP\r\n - Docs Pull Request\r\n\r\n##### COMPONENT NAME\r\ndocker_login\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.2.0\r\n```\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "aajdinov": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35079", "title": "New module: manage 1&1 public ip (cloud/oneandone/oneandone_public_ip)", "body": "##### SUMMARY\r\n\r\nAdding a new cloud module to support oneandone public ip management. Also included in the PR is an update made to oneandone_server module to support server types, wait interval, and custom url, as well as a small update to oneandone module util.\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\noneandone_public_ip cloud module\r\noneandone_server cloud module\r\noneandone module_util\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0 (oneandone_cloud_provider_bulk_one 609d2a27a5) last updated 2018/01/18 07:54:49 (GMT +200)\r\n  config file = /etc/ansible/ansible.cfg\r\n  python version = 2.7.12 (default, Nov 20 2017, 18:23:56) [GCC 5.4.0 20160609]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nBelow is the output from one of the test playbooks utilizing the new module:\r\n```\r\nPLAY [localhost] ******************************************************\r\n\r\nTASK [Gathering Facts] **********************************************\r\nok: [localhost]\r\n\r\nTASK [Create a public IP] ********************************************\r\nchanged: [localhost]\r\n\r\nPLAY RECAP *********************************************************\r\nlocalhost                  : ok=2    changed=1    unreachable=0    failed=0  \r\n```\r\n", "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/35076", "title": "New module: manage 1&1 private network (cloud/oneandone/oneandone_private_network)", "body": "##### SUMMARY\r\nAdding a new cloud module to support oneandone private network management. Also included in the PR is an update made to oneandone_server module to support server types, wait interval, and custom url, as well as a small update to oneandone module util.\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\noneandone_private_network cloud module\r\noneandone_server cloud module\r\noneandone module_util\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0 (oneandone_cloud_provider_bulk_one 609d2a27a5) last updated 2018/01/18 07:54:49 (GMT +200)\r\n  config file = /etc/ansible/ansible.cfg\r\n  python version = 2.7.12 (default, Nov 20 2017, 18:23:56) [GCC 5.4.0 20160609]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nBelow is the output from one of the test playbooks utilizing the new module:\r\n```\r\nPLAY [localhost] ******************************************************\r\n\r\nTASK [Gathering Facts] **********************************************\r\nok: [localhost]\r\n\r\nTASK [Create a private network] *************************************\r\nchanged: [localhost]\r\n\r\nTASK [Update a private network] ************************************\r\nchanged: [localhost]\r\n\r\nPLAY RECAP *********************************************************\r\nlocalhost                  : ok=3    changed=2    unreachable=0    failed=0  \r\n```\r\n", "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/35068", "title": "New module: manage 1&1 monitoring policy (cloud/oneandone/oneandone_monitoring_policy)", "body": "##### SUMMARY\r\nAdding a new cloud module to support oneandone monitoring policy management. Also included in the PR is an update made to oneandone_server module to support server types, wait interval, and custom url, as well as a small update to oneandone module util.\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\noneandone_monitoring_policy cloud module\r\noneandone_server cloud module\r\noneandone module_util\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0 (oneandone_cloud_provider_bulk_one 609d2a27a5) last updated 2018/01/18 07:54:49 (GMT +200)\r\n  config file = /etc/ansible/ansible.cfg\r\n  python version = 2.7.12 (default, Nov 20 2017, 18:23:56) [GCC 5.4.0 20160609]\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\nBelow is the output from one of the test playbooks utilizing the new module:\r\n```\r\nMonitoring policy create\r\n===================\r\n\r\nPLAY [localhost] **************************************************************\r\n\r\nTASK [Gathering Facts] ******************************************************\r\nok: [localhost]\r\n\r\nTASK [Create a monitoring policy] *******************************************\r\nchanged: [localhost]\r\n\r\nPLAY RECAP *****************************************************************\r\nlocalhost                  : ok=2    changed=1    unreachable=0    failed=0   \r\n```\r\n", "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/35067", "title": "New module: manage 1&1 load balancer (cloud/oneandone/oneandone_load_balancer)", "body": "##### SUMMARY\r\nAdding a new cloud module to support oneandone load balancer management. Also included in the PR is an update made to oneandone_server module to support server types, wait interval, and custom url, as well as a small update to oneandone module util.\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\noneandone_load_balancer cloud module\r\noneandone_server cloud module\r\noneandone module_util\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0 (oneandone_cloud_provider_bulk_one 609d2a27a5) last updated 2018/01/18 07:54:49 (GMT +200)\r\n  config file = /etc/ansible/ansible.cfg\r\n  python version = 2.7.12 (default, Nov 20 2017, 18:23:56) [GCC 5.4.0 20160609]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nBelow is the output from one of the test playbooks utilizing the new module:\r\n```\r\nLoad balancer create\r\n=================\r\n\r\nPLAY [localhost] ****************************************************************\r\n\r\nTASK [Gathering Facts] ********************************************************\r\nok: [localhost]\r\n\r\nTASK [Create a load balancer] ************************************************\r\nchanged: [localhost]\r\n\r\nPLAY RECAP ******************************************************************\r\nlocalhost                  : ok=2    changed=1    unreachable=0    failed=0  \r\n\r\n```\r\n", "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/35066", "title": "New module: manage 1&1 firewall policy (cloud/oneandone/oneandone_firewall_policy)", "body": "##### SUMMARY\r\nAdding a new cloud module to support oneandone firewall policy management. Also included in the PR is an update made to oneandone_server module to support server types, wait interval, and custom url, as well as a small update to oneandone module util.\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\noneandone_firewall_policy cloud module\r\noneandone_server cloud module\r\noneandone module_util\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0 (oneandone_cloud_provider_bulk_one 609d2a27a5) last updated 2018/01/18 07:54:49 (GMT +200)\r\n  config file = /etc/ansible/ansible.cfg\r\n  python version = 2.7.12 (default, Nov 20 2017, 18:23:56) [GCC 5.4.0 20160609]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nBelow is the output from one of the test playbooks utilizing the new module:\r\n```\r\nFirewall policy create\r\n=================\r\n\r\nPLAY [localhost] ***************************************************************\r\n\r\nTASK [Gathering Facts] *******************************************************\r\nok: [localhost]\r\n\r\nTASK [Create a firewall policy] ************************************************\r\nchanged: [localhost]\r\n\r\nPLAY RECAP ******************************************************************\r\nlocalhost                  : ok=2    changed=1    unreachable=0    failed=0   \r\n```\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "evrardjp": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35053", "title": "New module etcd3", "body": "This module uses etcd3 python library to do k/v manipulation on\r\nan etcd3 cluster using version3 api.\r\n\r\n##### SUMMARY\r\nThis adds an etcd3 module to ansible.\r\nIt uses a native version 3 calls to modify key/values on the cluster.\r\n\r\n##### ISSUE TYPE\r\n - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\netcd3\r\n\r\n##### ANSIBLE VERSION\r\n\r\ndevel\r\n\r\n##### ADDITIONAL INFORMATION\r\n\r\nNone", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34790", "title": "Fix precedence issue.", "body": "##### SUMMARY\r\nAnsible 2.4 changed the CLI precedence issue vs ansible 2.3, which leads to unexpected behavior, see also:\r\n\r\nhttps://github.com/evrardjp/ansible-pocs/tree/acd15abbc3ba126fdd6595c845fef3d5dc24a84d\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n\r\nCore\r\n\r\n##### ANSIBLE VERSION\r\n\r\n```\r\nansible 2.4.3 (fix_precedence_issue 2c46e15da6) last updated 2018/01/11 17:56:58 (GMT +100)\r\n  config file = /Users/jean0000/.ansible.cfg\r\n  configured module search path = [u'/Users/jean0000/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/jean0000/ansible/lib/ansible\r\n  executable location = /Users/jean0000/ansible/bin/ansible\r\n  python version = 2.7.10 (default, Jul 15 2017, 17:16:57) [GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.31)]\r\n```\r\n\r\nHappens to have the same issue in 2.4.2.0 too.\r\n\r\n##### ADDITIONAL INFORMATION\r\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34452", "title": "Adds the non-deprecated ansible_host var", "body": "#### SUMMARY\r\n\r\nOpenStack dynamic inventory is still using the deprecated\r\nansible_ssh_host. This patch adds ansible_host until such\r\ntime as ansible_ssh_host is removed\r\n\r\n#### ISSUE TYPE\r\n\r\n- Bugfix Pull Request\r\n\r\n#### COMPONENT NAME\r\n```\r\ncontrib/inventory/openstack.py\r\n```\r\n#### ANSIBLE VERSION\r\n```\r\nansible 2.3.2.0\r\n```\r\n\r\n##### ADDITIONAL INFORMATION", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "yuwzho": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35038", "title": "Fixes 27878: subnet should in the virtual network resource group", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\nFixes #27878\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n2.4\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/35037", "title": "Fix #29593 delete subnet should be idempotent", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\nFixes #29593\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n2.4\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34923", "title": "pin sdk version for Azure Client and Model", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nThis pull request wants to pin the Azure SDK version for both API and models.\r\n\r\nIt uses a dict `AZURE_PKG_VERSION` in `azure_rm_common` to define the version and package name, and provide two functions: `get_client` and `load_sdk_model`. Both of the two method parse `AZURE_PKG_VERSION` to load the corresponding version of model/client from SDK library.\r\n\r\nEvery modules extends the azure_rm_common, using the `self.XXX_client` as the service client to call Azure API. At the same time, modules the `load_sdk_model` to load models rather than using `from azure.mgmt.XXX import YYYY`. But the usage of model in the file no need to change. This should be the minimal change to pin the SDK version and easy to maintain.\r\n\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n2.4\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "NickWilde1990": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35022", "title": "Fix typo in examples in Lookup/password plugin.", "body": "##### SUMMARY\r\nResolve typo in documentation examples section. Secondarily, fix a couple other typos.\r\n\r\n\r\n##### ISSUE TYPE\r\n - Docs Pull Request\r\n\r\n##### COMPONENT NAME\r\nDocs: Lookup/password", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "abadger": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35016", "title": "Fix copy for implicit relative paths", "body": "##### SUMMARY\r\ncopy currently fails if you specify a destination without any directory\r\ncomponent.  This is because we take the dirname of the destination for\r\nsome processing and no dirname causes issues.\r\n\r\nThis corrects that by prepending \"./\" if there is no directory component\r\nin dest.\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nlib/ansible/modules/file/copy.py\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\ndevel and earlier\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nThis has been behaviour for a long time (at least as far back as 1.9).", "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34976", "title": "Remove AnsibleUnicode special handling", "body": "##### SUMMARY\r\nThis is code that we're not sure is needed anymore.  Run it through our CI system to gather some preliminary information about whether it could be removed.\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\ndataloader\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\ndevel\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nI think I wrote this code because we had a traceback at some point with pyyaml not able to handle our AnsibleUnicode type (the C library was doing an exact match to python's unicode type rather than testing with the object inheritance hierarchy.)   Neither jimi nor I are sure when AnsibleUnicode gets passed into this function, though, so we think it may be safe to remove this code now.", "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34914", "title": "Implement plugin filtering", "body": "##### SUMMARY\r\nAdds ability to blacklist modules by name.\r\n\r\n##### ISSUE TYPE\r\n\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\nlib/ansible/plugins/loader.py\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\ndevel\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nStill needs documentation and tests.", "author_association": "MEMBER"}], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/8245571", "body": "That would work.  It's not necessary to test the group as the mode and owner should exercise all the same code paths.  If we do need to test groups it would probably be simpler to choose a group that exists on both Red Hat and Debian based systems.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/8245571/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/8648186", "body": "It is merged into \"master\"  (devel branch is our master).  It's simply waiting on our next release which we hope to have out soon.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/8648186/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/9264305", "body": "To clarify: This fixes https://github.com/ansible/ansible-modules-core/issues/546\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/9264305/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/12109229", "body": "Note: I might not see a comment on a commit, get a lot of github mail about bugs and such so commit comments might get missed in the flood.\n\nAnsible modules can't perform relative python imports.  They are constructed on the controller machine by concatenating the referenced files to the end of the module and then that file is copied to the remote machine and executed.\n\nA new feature could be implemented to either have modules do real python imports or to make other paths than ansible.module_utils available for special handling using the concatenation method.  Both of those require some discussion before we'd want to implement them though.  You could bring it up on the devel mailing list or the #ansible-devel IRC channel.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/12109229/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}], "review_comments": []}, "rambleraptor": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35014", "title": "GCP: DNS Managed Zones", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nThis adds support for creating managed zones on GCP, along with a test runner and future utilities for adding more GCP resources.\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\ngcp_dns_managed_zone\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n2.5\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nThis code was autogenerated using [Magic Modules](https://github.com/GoogleCloudPlatform/magic-modules)\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "lrivallain": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/35004", "title": "vmware: Add new module 'vmware_datastore_host'", "body": "##### SUMMARY\r\nNew Module: vmware_datastore_host - mount/umount datastore (both vmfs and nfs) on host(s)\r\n\r\n##### ISSUE TYPE\r\n- New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\nlib/ansible/modules/cloud/vmware/vmware_datastore_host.py\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0 (vmware_datastore ed922c2249) last updated 2018/01/16 21:33:51 (GMT +200)\r\n  config file = None\r\n  configured module search path = ['~/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = ~/wd/ansible/lib/ansible\r\n  executable location = ~/wd/ansible/bin/ansible\r\n  python version = 3.6.3 (default, Nov  3 2017, 19:47:38) [GCC 4.2.1 Compatible Apple LLVM 8.1.0 (clang-802.0.42)]\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\n```\r\n- name: Mount VMFS datastores to ESXi\r\n  vmware_datastore_host:\r\n      hostname: '{{ vcenter_hostname }}'\r\n      username: '{{ vcenter_user }}'\r\n      password: '{{ vcenter_pass }}'\r\n      datacenter_name: '{{ datacenter }}'\r\n      datastore_name: '{{ item.name }}'\r\n      datastore_type: '{{ item.type }}'\r\n      vmfs_device_name: 'naa.XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\r\n      vmfs_version: 6\r\n      esxi_hostname: '{{ inventory_hostname }}'\r\n      state: present\r\n  delegate_to: localhost\r\n- name: Mount NFS datastores to ESXi\r\n  vmware_datastore_host:\r\n      hostname: '{{ vcenter_hostname }}'\r\n      username: '{{ vcenter_user }}'\r\n      password: '{{ vcenter_pass }}'\r\n      datacenter_name: '{{ datacenter }}'\r\n      datastore_name: '{{ item.name }}'\r\n      datastore_type: '{{ item.type }}'\r\n      nfs_server: '{{ item.server }}'\r\n      nfs_path: '{{ item.path }}'\r\n      nfs_ro: no\r\n      esxi_hostname: '{{ inventory_hostname }}'\r\n      state: present\r\n  delegate_to: localhost\r\n  with_items:\r\n      - { 'name': 'NasDS_vol01', 'server': 'nas01', 'path': '/mnt/vol01', 'type': 'nfs'}\r\n      - { 'name': 'NasDS_vol02', 'server': 'nas01', 'path': '/mnt/vol02', 'type': 'nfs'}\r\n- name: Remove/Umount Datastores from ESXi\r\n  vmware_datastore_host:\r\n      hostname: '{{ vcenter_hostname }}'\r\n      username: '{{ vcenter_user }}'\r\n      password: '{{ vcenter_pass }}'\r\n      datacenter_name: '{{ datacenter }}'\r\n      datastore_name: NasDS_vol01\r\n      esxi_hostname: '{{ inventory_hostname }}'\r\n      state: absent\r\n  delegate_to: localhost\r\n```", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "nerzhul": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34940", "title": "vault: add the faulty string parse_vaulttext output when error occurs", "body": "Show the errorneous string when the string was malformed\r\n\r\nThis permit to troubleshoot wrong vault-encrypted strings easily by searching through ansible inventory\r\n\r\n##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nBe more explicit when ansible-vault string is wrong on decoding, permitting to find which string cause the problem in the inventory.\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\nvaults\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n2.4.2.0\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\nHere is the original output, it's not very useful especially when multiple users manipulate inventory (through a nice git repository), because we don't know where is the problem (and here the problem is in a map('extract', 'hostvars', 'blah') included in one of the following variable, then version far from the error).\r\n```\r\nfatal: [xxx8879]: FAILED! => {\r\n    \"changed\": false,\r\n    \"msg\": \"AnsibleVaultFormatError: {{ haproxy_generic_backend + haproxy_custom_backend }}: {{ app_haproxy_custom_backend | default([]) }}: {{ env_haproxy_front_backend_profile | haproxy_backends(hostvars) }}: Vault vaulttext format error: need more than 1 value to unpack.\r\n}\r\n```\r\n\r\nNew output is more useful\r\n```\r\nfatal: [loadvlinf8417]: FAILED! => {\r\n    \"changed\": false,\r\n    \"msg\": \"AnsibleVaultFormatError: {{ haproxy_generic_backend + haproxy_custom_backend }}: {{ app_haproxy_custom_backend | default([]) }}: {{ env_haproxy_front_backend_profile | haproxy_backends(hostvars) }}: Vault vaulttext format error: need more than 1 value to unpack. String was: 33386662663566663338656430386266663038653332386234343335323237663862303933653134643861366135320a3230383537333862353664333613132666333336238306535303063613134306366613339313364333261633434343762306561326133306234376338623037\"\r\n}\r\n```\r\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "robertdebock": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34938", "title": "Update documentation for package.py to address use with apt", "body": "apt uses \"=\" instead of \"-\". Explaining in DOCUMENTATION and added two EXAMPLES.\r\n\r\nThis issue has been described in #29705. This pull request does not fix the behaviour, it just explains it.\r\n\r\n##### SUMMARY\r\nUpdating the documentation will help other users.\r\n\r\nDoes not fix, but hopefully helps users suffering issue #29705.\r\n\r\n##### ISSUE TYPE\r\n- Docs Pull Request\r\n\r\n##### COMPONENT NAME\r\npackage\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible --version\r\nansible 2.4.2.0\r\n  config file = /Users/username/Documents/ansible/ansible.cfg\r\n  configured module search path = [u'/Users/username/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python2.7/site-packages/ansible\r\n  executable location = /Users/username/Library/Python/2.7/bin/ansible\r\n  python version = 2.7.14 (default, Sep 25 2017, 09:53:22) [GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.37)]\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\nAccording to the (current) documentation, a dash (\"-\") should work, but it does not:\r\n```\r\nansible -m package -a \"name=libsemanage-common-2.3-1\" reference-debian-8\r\nreference-debian-8 | FAILED! => {\r\n    \"changed\": false, \r\n    \"msg\": \"No package matching 'libsemanage-common-2.3-1' is available\"\r\n}\r\n```\r\n\r\nWhat does work is an equal (\"=\") sign:\r\n```\r\nansible -m package -a \"name=libsemanage-common=2.3-1\" reference-debian-8\r\nreference-debian-8 | SUCCESS => {\r\n    \"cache_update_time\": 1516107446, \r\n    \"cache_updated\": false, \r\n    \"changed\": false\r\n}\r\n```\r\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "skg-net": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34915", "title": "Added support for new Ansible Infra (network_cli plugin, cliconf, module utils cleanup and test) for dellos10 Support t", "body": "##### SUMMARY\r\nAdded support for new Ansible Infra for dellos10\r\n   * network_cli plugin\r\n   * cliconf \r\n   * module utils cleanup \r\n   * unit and integration test\r\n\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n\r\n##### COMPONENT NAME\r\nansible/modules/network/dellos10/*\r\n\r\n##### ANSIBLE VERSION\r\n(network_cli) skg@SKG ~/dev/network_cli/ansible $ ansible --version\r\nansible 2.5.0 (network_cli c787447637) last updated 2018/01/15 18:46:58 (GMT -700)\r\n  config file = /home/skg/.ansible.cfg\r\n  configured module search path = [u'/home/skg/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/skg/dev/network_cli/ansible/lib/ansible\r\n  executable location = /home/skg/dev/network_cli/ansible/bin/ansible\r\n  python version = 2.7.12 (default, Nov 19 2016, 06:48:10) [GCC 5.4.0 20160609]\r\n(network_cli) skg@SKG ~/dev/network_cli/ansible $ \r\n\r\n##### ADDITIONAL INFORMATION\r\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "amuraleedhar": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34910", "title": "Change the License from BSD to GPL", "body": "##### SUMMARY\r\nChanging BSD to GPL for license as Suggested by John\r\n\r\n##### ISSUE TYPE\r\n - Docs Pull Request\r\n\r\n##### COMPONENT NAME\r\nlib/ansible/module_utils/network/enos/enos.py\r\n\r\n##### ANSIBLE VERSION\r\nansible 2.5.0\r\nconfig file = /etc/ansible/ansible.cfg\r\nconfigured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\nansible python module location = /usr/local/lib/python2.7/dist-packages/ansible-2.5.0-py2.7.egg/ansible\r\nexecutable location = /usr/local/bin/ansible\r\npython version = 2.7.6 (default, Oct 26 2016, 20:30:19) [GCC 4.8.4]\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nThis is an effort to support Lenovo ENOS Switches in Ansible\r\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34909", "title": "Changing BSD to GPL", "body": "##### SUMMARY\r\nChanging BSD to GPL for license as Suggested by John\r\n\r\n##### ISSUE TYPE\r\n - Docs Pull Request\r\n\r\n##### COMPONENT NAME\r\nlib/ansible/plugins/terminal/enos.py\r\n\r\n##### ANSIBLE VERSION\r\nansible 2.5.0\r\nconfig file = /etc/ansible/ansible.cfg\r\nconfigured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\nansible python module location = /usr/local/lib/python2.7/dist-packages/ansible-2.5.0-py2.7.egg/ansible\r\nexecutable location = /usr/local/bin/ansible\r\npython version = 2.7.6 (default, Oct 26 2016, 20:30:19) [GCC 4.8.4]\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nThis is an effort to support Lenovo ENOS Switches in Ansible\r\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34889", "title": "Changing BSD to GPL", "body": "##### SUMMARY\r\nChanging BSD to GPL for license as Suggested by John\r\n\r\n##### ISSUE TYPE\r\n - Docs Pull Request\r\n\r\n##### COMPONENT NAME\r\nlib/ansible/plugins/cliconf/enos.py\r\n\r\n##### ANSIBLE VERSION\r\nansible 2.5.0\r\nconfig file = /etc/ansible/ansible.cfg\r\nconfigured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\nansible python module location = /usr/local/lib/python2.7/dist-packages/ansible-2.5.0-py2.7.egg/ansible\r\nexecutable location = /usr/local/bin/ansible\r\npython version = 2.7.6 (default, Oct 26 2016, 20:30:19) [GCC 4.8.4]\r\n\r\nADDITIONAL INFORMATION\r\nThis is an effort to support Lenovo ENOS Switches in Ansible", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34888", "title": "Changing BSD to GPL", "body": "##### SUMMARY\r\nChanging BSD to GPL for license as Suggested by John\r\n\r\n##### ISSUE TYPE\r\n\r\n - Docs Pull Request\r\n\r\n##### COMPONENT NAME\r\nlib/ansible/plugins/action/enos.py\r\n\r\n##### ANSIBLE VERSION\r\nansible 2.5.0\r\nconfig file = /etc/ansible/ansible.cfg\r\nconfigured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\nansible python module location = /usr/local/lib/python2.7/dist-packages/ansible-2.5.0-py2.7.egg/ansible\r\nexecutable location = /usr/local/bin/ansible\r\npython version = 2.7.6 (default, Oct 26 2016, 20:30:19) [GCC 4.8.4]\r\n\r\n##### ADDITIONAL INFORMATION\r\nThis is an effort to support Lenovo ENOS Switches in Ansible", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34793", "title": "Changing order of load and loadfp", "body": "##### SUMMARY\r\nAs Ganesh suggested in review comment loadfp api which does not handle relative path and templates correctly, I am interchanging its positions in code. Tested it for working fine. \r\n\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nlib/ansible/modules/network/enos/enos_config.py\r\n\r\n##### ANSIBLE VERSION\r\nansible 2.5.0\r\nconfig file = /etc/ansible/ansible.cfg\r\nconfigured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\nansible python module location = /usr/local/lib/python2.7/dist-packages/ansible-2.5.0-py2.7.egg/ansible\r\nexecutable location = /usr/local/bin/ansible\r\npython version = 2.7.6 (default, Oct 26 2016, 20:30:19) [GCC 4.8.4]\r\n\r\n##### ADDITIONAL INFORMATION\r\nThis is an effort to support Lenovo ENOS Switches in Ansible\r\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34789", "title": "Adding enos_config.py action plugin to create backup properly", "body": "##### SUMMARY\r\nThis action plugin created for enos_config to create a folder and appropriate file for the config backup operation. The file name will bear the ip address and date and time stamp on it. Inside it will have the running config the time.\r\nThis is an issue reported by Ganesh of Ansible team during a review.\r\n\r\n##### ISSUE TYPE\r\n- Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nlib/ansible/plugins/action/enos_config.py\r\n\r\n##### ANSIBLE VERSION\r\nansible 2.5.0\r\nconfig file = /etc/ansible/ansible.cfg\r\nconfigured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\nansible python module location = /usr/local/lib/python2.7/dist-packages/ansible-2.5.0-py2.7.egg/ansible\r\nexecutable location = /usr/local/bin/ansible\r\npython version = 2.7.6 (default, Oct 26 2016, 20:30:19) [GCC 4.8.4]\r\n\r\n##### ADDITIONAL INFORMATION\r\nThis is an effort to support Lenovo ENOS Switches in Ansible\r\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "MikeKlebolt": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34887", "title": "Fixes commit a28eb94, which broke validate_certs = False for python <\u2026", "body": "##### SUMMARY\r\nFixes commit a28eb94f1a37d0293e05e289b95835ea47832e73, which broke validate_certs = False for python < 2.7.9\r\n\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nvsphere_guest\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0 (devel 3950f5b9ce) last updated 2018/01/15 16:55:05 (GMT +000)\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /data01/ansible/lib/ansible\r\n  executable location = /data01/ansible/bin/ansible\r\n  python version = 2.6.6 (r266:84292, Aug  9 2016, 06:11:56) [GCC 4.4.7 20120313 (Red Hat 4.4.7-17)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nIf the vsphere_guest module is used with validate_certs = False and your python version is < 2.7.9.  The following line is evaluated in the module which results in the module failing. \r\n```\r\n    if not validate_certs:\r\n        ssl._create_default_https_context = ssl._create_unverified_context\r\n```\r\n\r\n**diff**\r\n```diff\r\n-    if not validate_certs:\r\n+    if not validate_certs and sys.version_info > (2,7,9):\r\n        ssl._create_default_https_context = ssl._create_unverified_context\r\n```\r\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "tbouvet": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34882", "title": "Fix credentials for Tower API V2", "body": "##### SUMMARY\r\nWhen passing **params directly to credential.modify(), you get a rejection\r\n by the API due to fields that it doesn't accept (such as 'state'). Fix for API V2\r\n\r\nFixes #31655\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nansible_tower\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/usr/share/ansible/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.12 (default, Nov 20 2017, 18:23:56) [GCC 5.4.0 20160609]\r\n```\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "Dhivyap": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34880", "title": "Ansible 2.5 feature support for dellos9", "body": "##### SUMMARY\r\n\r\nAnsible 2.5 feature support for dellos9\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nansible/modules/network/dellos9/*\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0 (devel 43a081d1c9) last updated 2018/01/15 19:50:55 (GMT +550)\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /root/dhivya/dd/ansible/lib/ansible\r\n  executable location = /root/dhivya/dd/ansible/bin/ansible\r\n  python version = 2.7.6 (default, Oct 26 2016, 20:30:19) [GCC 4.8.4]\r\n\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n\r\nWith the new Ansible 2.5 infra changes, the dellos9 modules doesn't work (the new infra changes are not backward compatible), so added the below changes to support it.\r\n\r\nAdded the new cliconf plugin for DellOS9\r\nModified the action plugin for DellOS9\r\nModified the modules to work with the new infra.\r\nAdded Unit Testcases for DellOS9 modules", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "florv": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34877", "title": "[cloud] Don't assume a non-AWS S3 url is Walrus", "body": "##### SUMMARY\r\n\r\nCurrently Ansible assumes that if an S3 URL is not Amazon AWS then it is a Walrus instance and enables quirks specific to Walrus by calling `connect_walrus()` provided by boto.\r\n\r\nThe Walrus quirks prevents the s3_bucket module from connecting to other\r\nimplementations of S3 like Pithos. This pull request adds the \"walrus\" option which allows the user to enable those quirks when needed.\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\ns3_bucket\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.0 (s3_bucket 3ce7cdc319) last updated 2018/01/15 14:53:04 (GMT +200)\r\n  config file = \r\n  configured module search path = [u'$HOME/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = $HOME/src/ansible/lib/ansible\r\n  executable location = $HOME/src/ansible/bin/ansible\r\n  python version = 2.7.13 (default, Nov 24 2017, 17:33:09) [GCC 6.3.0 20170516]\r\n```", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "hatuomin": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34873", "title": "Netact cm command2", "body": "##### SUMMARY\r\nIntroduce new Ansible network module netact_cm_command for configuring mobile networks\r\n\r\nThis module runs various configuration management operations toward network equipment (GSM, 3G, 4G, etc) using Nokia NetAct Configuration Management system, and allows management of supported mobile networks with Ansible playbooks using this module.\r\n\r\nFor more information about Nokia NetAct, please\tsee: \r\n\r\nhttps://networks.nokia.com/solutions/netact\r\n\r\n\r\n<!--- Describe the change, including rationale and design decisions -->\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n - New Module Pull Request\r\n<!--- Pick one below and delete the rest: -->\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\nnetact_cm_command\r\n##### ANSIBLE VERSION\r\nansible 2.5.0 \r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "yuji-k64613": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34865", "title": "Update archive.py (#34569)", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nFixes #34569 \r\n\r\n\"filecmp.cmp\" does not work correctly if two files compared are both 0 byte.\r\nTherefore, I revised the script to compare absolute file paths instead of using \"filecmp.cmp\".\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\nlib/ansible/modules/files/archive.py\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.5.0 (devel d05092bf8d) last updated 2018/01/13 17:30:27 (GMT +900)\r\n  config file = None\r\n  configured module search path = [u'/home/vagrant/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/vagrant/ansible/lib/ansible\r\n  executable location = /home/vagrant/ansible/bin/ansible\r\n  python version = 2.7.5 (default, Aug  4 2017, 00:39:18) [GCC 4.8.5 20150623 (Red Hat 4.8.5-16)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "pascalheraud": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34837", "title": "New module to manage OVH's failover IPs.", "body": "##### SUMMARY\r\nThis new module allows to handle IP address into OVH provider.\r\nIt uses OVH python API and its main goal for now is to switch an IP between hosts (services).\r\nThe module is mainly inspired from the other module I did for OVH (ovh_ip_loadbalancing_backend)\r\n\r\n\r\n##### ISSUE TYPE\r\n - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\nclould/ovh_ip_failover\r\n\r\n##### ANSIBLE VERSION\r\nansible 2.5.0\r\n```\r\n\r\n```\r\n\r\n\r\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "nurfet-becirevic": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34834", "title": "profitbricks: support for update state, check mode, custom API URL & other improvements", "body": "##### SUMMARY\r\nThis update contains new features and other changes including:\r\n\r\n- Added support for update state. The following ProfitBricks components can be updated now: datacenters, servers,  NICs and volumes.\r\n- Added support for check mode.\r\n- Added support for custom ProfitBricks  API URL.\r\n- Removed redundant module `profitbricks_volume_attachments`. The module functionality is handled by `profitbricks` module.\r\n- Added `profitbricks` module to `module_utils` grouping common stuff from ProfitBricks  cloud modules.\r\n- Added ProfitBricks credential parameters `username` & `password` replacing `subscription_user` and `subscription_password` which are defined as aliases now.\r\n- Other ProfitBricks related updates: support for API v4, request headers info, missing parameters in the modules etc.\r\n- Fixed/updated documentation.\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nvarious ProfitBricks modules\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n2.5\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n```\r\nSeveral new ProfitBricks modules and dynamic inventory are waiting in the queue for PR. They have been omitted here to facilitate the review.  \r\n```\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "giorgos-nikolopoulos": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34800", "title": "Netscaler various fixes", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nThis PR introduces the following fixes and enhancements\r\n\r\n* Add \"state\" suboption for netscaler_servicegroup servicemembers\r\n* Fix servicemember modification algorithm in netscaler_servicegroup\r\n* Fix monitorbindings modification algorithm in netscaler_servicegroup\r\n* Add options for gracefully disabling netscaler_server\r\n* Add default lb vserver option in netscaler_cs_vserver\r\n* Add documentation for ssl_certkey option in netscaler_cs_vserver\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n\r\n\r\n - Bugfix Pull Request\r\n\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\n\r\n* lib/ansible/modules/network/netscaler/netscaler_servicegroup.py\r\n* lib/ansible/modules/network/netscaler/netscaler_server.py\r\n* lib/ansible/modules/network/netscaler/netscaler_cs_vserver.py\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.5.0 (netscaler_various_fixes 787fc58c4b) last updated 2018/01/11 19:33:09 (GMT +300)\r\n  config file = /home/georgen/.ansible.cfg\r\n  configured module search path = [u'/home/georgen/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/georgen/repos/ansible_fork/lib/ansible\r\n  executable location = /home/georgen/repos/ansible_fork/bin/ansible\r\n  python version = 2.7.12 (default, Nov 20 2017, 18:23:56) [GCC 5.4.0 20160609]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\nUnit tests were also updated for the relevant modules.\r\n\r\nThe following test files were modified.\r\n\r\n* test/units/modules/network/netscaler/test_netscaler_cs_vserver.py\r\n* test/units/modules/network/netscaler/test_netscaler_server.py\r\n* test/units/modules/network/netscaler/test_netscaler_servicegroup.py\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "deiwin": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34798", "title": "ecs_ecr: Fix AWS ECR repository creation ", "body": "##### SUMMARY\r\nRemove the superfluous registry ID from create repository call, because it's not supported.\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\necs_ecr\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible-playbook 2.4.2.0\r\n  config file = [redacted]\r\n  configured module search path = [u'[redacted]', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/local/bin/ansible-playbook\r\n  python version = 2.7.12 (default, Nov 20 2017, 18:23:56) [GCC 5.4.0 20160609]\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\n[Boto3 documentation][1] specifies 'repositoryName' as the only expected\r\nargument. The `**build_kwargs(registry_id)` part also adds 'registryId' which,\r\nwhen executed, fails with: 'Unknown parameter in input: \u201cregistryId\u201d, must be\r\none of: repositoryName'.\r\n\r\n[AWS API documentation][2] also lists only the 'repositoryName' parameter. I.e.\r\nthis is not a problem with the boto3 library.\r\n\r\nThe default registry ID for the account that's making the request will be used\r\nwhen creating the rpository. This means that if the `registry_id` specified by\r\nthe user is different from the default registry ID, then the policy changes\r\nfollowing the repository creation would fail, because the repository will have\r\nbeen created in one repository but subsequent calls try to modify it in\r\nanother. Added a safeguard against this scenario.\r\n\r\n[1]: https://boto3.readthedocs.io/en/latest/reference/services/ecr.html#ECR.Client.create_repository\r\n[2]: https://docs.aws.amazon.com/AmazonECR/latest/APIReference/API_CreateRepository.html\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "bngsudheer": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34781", "title": "file: clarify recursive", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nIf recursive is set to yes, the module changes the attributes of the directory recursively even though state: directory is not set.\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n - Docs Pull Request\r\n\r\n##### COMPONENT NAME\r\nfile\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\ndevel\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "wilsonge": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34774", "title": "Check existence of resource group before trying to write to it", "body": "##### SUMMARY\r\nTries to check for the existence of a resource group nicely before trying to write it using `create_or_update`. This drops the requirement of the azure module to have the `Microsoft.Resources/subscriptions/resourcegroups/write` which anyone with a `Contributor` access level doesn't (however they might well have permission to deploy an ARM template into that Resource Group\r\n\r\nNote this could probably be rolled out over most the modules in the azure stack. But I thought it would be easier to get feedback on this one (as this is the one I'm most interested in) and if it gathers interest then I can roll it out across the other modules.\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nazure_rm_deployment.py\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n<username>@ ~ () $ ansible --version\r\nansible 2.4.2.0\r\n  config file = None\r\n  configured module search path = [u'/Users/<username>/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/Cellar/ansible/2.4.2.0_2/libexec/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.10 (default, Jul 15 2017, 17:16:57) [GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.31)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n```\r\n\r\n```\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "Jonnymcc": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34742", "title": "Add hash making inventory caches unique to inventory script ran", "body": "##### SUMMARY\r\nAdds a unique hash to cache filenames so that running different inventory scripts results in unique caches.\r\n\r\nWe use multiple inventories within the same AWS account and what is happening is that after subsequent runs the second inventory script ran uses the cache from the first.\r\n```\r\ninventory/\r\n\u251c\u2500\u2500 ec2.py\r\n\u251c\u2500\u2500 production_us-east-1\r\n|  \u00a0\u00a0 \u251c\u2500\u2500 ec2.ini\r\n|  \u00a0\u00a0 \u2514\u2500\u2500 ec2.py -> ../ec2.py\r\n\u2514\u2500\u2500 production_us-west-2\r\n   \u00a0\u00a0 \u251c\u2500\u2500 ec2.ini\r\n  \u00a0 \u00a0 \u2514\u2500\u2500 ec2.py -> ../ec2.py\r\n```\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\ncontrib/ec2.py\r\n\r\n##### ANSIBLE VERSION\r\nVersion being used with the problem.\r\n```\r\nansible 2.4.2.0\r\n  config file = /Users/jonnymcc/hbo/SRE-Grafana/ansible/ansible.cfg\r\n  configured module search path = [u'/Users/jonnymcc/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.14 (default, Sep 25 2017, 09:53:17) [GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.42.1)]\r\n```\r\n\r\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "dekimsey": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34712", "title": "[fix] foreman.py unsupported entity error handling", "body": "##### SUMMARY\r\n\r\nThe foreman.py module should raise on error when an unsupported entity is passed. However, the module.fail_json arguments were not correct, and instead it would generate an opaque stack trace.\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nforeman.py\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.3.3.0\r\n  config file = /Users/dkimsey/ansible/ansible.cfg\r\n  configured module search path = ['library/']\r\n  python version = 3.6.2 (default, Jul 17 2017, 16:44:45) [GCC 4.2.1 Compatible Apple LLVM 8.1.0 (clang-802.0.42)]\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\nGiven:\r\n```\r\nlocal_action:\r\n  module: foreman\r\n  server_url: 'https://{{katello_hostname}}'\r\n  username: user\r\n  password: pass\r\n  entity: host\r\n  params:\r\n    location: 'The Other DC'\r\n```\r\n\r\nCurrent implementation:\r\n```\r\nAn exception occurred during task execution. To see the full traceback, use -vvv. The error was: AssertionError: implementation error -- msg to explain the error is required\r\nfatal: [foo-001.example.com -> localhost]: FAILED! => {\"changed\": false, \"failed\": true, \"module_stderr\": \"Traceback (most recent call last):\\n  File \\\"/var/folders/rn/9821bpds6c3_4t2_x7kmd54d2n5085/T/ansible_eu21i9_m/ansible_module_foreman.py\\\", line 159, in <module>\\n    main()\\n  File \\\"/var/folders/rn/9821bpds6c3_4t2_x7kmd54d2n5085/T/ansible_eu21i9_m/ansible_module_foreman.py\\\", line 153, in main\\n    module.fail_json(changed=False, result=\\\"Unsupported entity supplied\\\")\\n  File \\\"/var/folders/rn/9821bpds6c3_4t2_x7kmd54d2n5085/T/ansible_eu21i9_m/ansible_modlib.zip/ansible/module_utils/basic.py\\\", line 1993, in fail_json\\nAssertionError: implementation error -- msg to explain the error is required\\n\", \"module_stdout\": \"\", \"msg\": \"MODULE FAILURE\", \"rc\": 1}\r\n```\r\n\r\nAfter this patch:\r\n```\r\nfatal: [foo-001.example.com -> localhost]: FAILED! => {\"changed\": false, \"failed\": true, \"msg\": \"Unsupported entity (host) supplied\"}\r\n```\r\n\r\nAlso, the module documentation is unclear that only the entity \"organization\" is supported. Support for other entities appears to be NYI. I did not alter the documentation to reflect that.\r\n\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "tomvachon": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34710", "title": "Azure rm routetable", "body": "##### SUMMARY\r\nAzure Route Table Module\r\n\r\nModule does not exist at this time and is needed\r\n\r\n##### ISSUE TYPE\r\n - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\nazure_rm_routetable\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.3.1.0\r\n  config file =\r\n  configured module search path = Default w/o overrides\r\n  python version = 2.7.14 (default, Jan  6 2018, 12:16:16) [GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.39.2)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nThe Ansible Azure modules have **incredible difficulty** running on 2.4 or higher (even most issues on 2.3 are around libraries).  They do need a complete re-look for those reason and this is why I developed on 2.3 (but it shouldn't be 2.3 specific code)", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "abelbabel": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34694", "title": "fix of some problems with user modification with skeleton informations under FreeBSD", "body": "##### SUMMARY\r\nFreeBSD handles skeleton files somehow different than other OSs. Skeleton files in /etc/skel/ are prefixed with \"dot\". When adding or modifying a user with `pw` and argument `-m` files from the skeleton directory will be copied to the home directory of the user and the \"dot\" prefix will be removed. Ansible's own create_homedir() function only copies the skeleton files without renaming them properly under FreeBSD.\r\n\r\nWith this patch/bug fix the home directory of an existing user without existing home directory will be created properly under FreeBSD by using FreeBSD's own functions.\r\n\r\n<!--- Describe the change, including rationale and design decisions -->\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\nuser\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\ndevel\r\n```", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "grumpymatt": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34662", "title": "Fixes python keyerror if no port is specified and default should be used", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nReceived python keyerror when port value was missing. Used python dict get method to properly default the port value\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.5.0 (devel d1846425db) last updated 2018/01/09 19:53:23 (GMT +000)\r\n  config file = /home/itmxg01/ansible/vmware-provisioning/ansible.cfg\r\n  configured module search path = [u'/home/itmxg01/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/itmxg01/ansible/ansible/lib/ansible\r\n  executable location = /home/itmxg01/ansible/ansible/bin/ansible\r\n  python version = 2.7.5 (default, Aug  4 2017, 00:39:18) [GCC 4.8.5 20150623 (Red Hat 4.8.5-16)]\r\n\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "bendoh": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34659", "title": "Exclude explicit paths from file walk, return 'excluded' list", "body": "##### SUMMARY\r\nFixes #34316 \r\n\r\nPreviously, only files which were specified for exclusion would actually be excluded if they were found to match a glob of files to _include_ in the archive; If the files specified for exclusion were  within the tree of a _directory_ that was specified for inclusion in the archive, they would be incorrectly included.\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\narchive\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.0\r\n  config file = None\r\n  configured module search path = [u'/Users/bdoherty/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Library/Python/2.7/site-packages/ansible-2.4.0-py2.7.egg/ansible\r\n  executable location = /Users/bdoherty/vc/ansible/bin/ansible\r\n  python version = 2.7.10 (default, Feb  7 2017, 00:08:15) [GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.34)]\r\n```\r\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "leigh-j": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34642", "title": "Fixes #12353 adds new option to galaxy cli to preserve scm meta ", "body": "Fixes #12353 #20977 adds new option to galaxy cli to preserve scm meta \r\n\r\n##### SUMMARY\r\nThis change adds a new option to the ansible-galaxy cli to preserve scm meta. There are three main parts\r\n\r\n- additional arg added to ansible galaxy install as below\r\n```\r\n$ ansible-galaxy install --help\r\nUsage: ansible-galaxy install [options] [-r FILE | role_name(s)[,version] | scm+role_repo_url[,version] | tar_file(s)]\r\n\r\nOptions:\r\n  -f, --force           Force overwriting an existing role\r\n  -h, --help            show this help message and exit\r\n  -c, --ignore-certs    Ignore SSL certificate validation errors.\r\n  -i, --ignore-errors   Ignore errors and continue with the next specified\r\n                        role.\r\n  -g, --keep-scm-meta   If a role source is scm and has a version, get a clone\r\n                        of the role instead of archiving it.\r\n```\r\n\r\n- update galaxy.role to pass on options from cli\r\n- added step that does a straight tar instead of git/hg archive, \r\n```\r\nif keep_scm_meta:\r\n        with tarfile.open(temp_file.name, \"w\") as tar:\r\n              tar.add(os.path.join(tempdir, name),arcname=name)\r\n```\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\ngalaxy cli\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0 (clone-repo 21cbb2dd24) last updated 2018/01/10 00:11:19 (GMT +1100)\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/ljenkin/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/ljenkin/git/ansible/ansible/lib/ansible\r\n  executable location = /home/ljenkin/git/ansible/ansible/bin/ansible\r\n  python version = 2.7.14 (default, Dec 11 2017, 14:52:53) [GCC 7.2.1 20170915 (Red Hat 7.2.1-2)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n\r\nThere is discussion on if this should be a role spec or command line arg, This change can easily be done as either but is using an arg as that makes sense for me.\r\n\r\nSide effect of this is galaxy meta shows up in checked out repos, I think this is fine and can be handled by a git ignore.\r\n```\r\n$ git status\r\nUntracked files:\r\n\tmeta/.galaxy_install_info\r\n```\r\n\r\nBeing a command line arg this is an all or none approach, a change to the role spec would enable a more selective approach but require changes to requirements files.\r\n\r\n  ", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "radixdlt": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34576", "title": "azure_rm_virtualmachine_scaleset: Add reference to VNET resource group", "body": "##### SUMMARY\r\nPort of #26052 for azure_rm_virtualmachine_scaleset\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nlib/ansible/modules/cloud/azure/azure_rm_virtualmachine_scaleset.py\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n2.5.0\r\n```\r\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "Boreeas": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34574", "title": "pacman: recognize if a target package is provided by another package", "body": "##### SUMMARY\r\nPackages that are provided by a different package (example: 'cron' is provided by 'cronie') are not recognized by the pacman module and always assumed uninstalled. In particular, this leads to crashes when trying to install the package because pacman output is not in the expected format.\r\n\r\nIf querying package information for the target package fails, we look through all installed packages and try to find one that provides the target instead, then proceed with this package's name and version.\r\n\r\nFixes #24110\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\npacman\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0 (devel 29b781f46e) last updated 2018/01/08 15:20:39 (GMT +200)\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/boreeas/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/boreeas/Projects/Python/ansible/lib/ansible\r\n  executable location = ../Python/ansible/bin/ansible\r\n  python version = 2.7.14 (default, Sep 20 2017, 01:25:59) [GCC 7.2.0]\r\n\r\n```\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "nathanwebsterdotme": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34526", "title": "sqs_queue BOTO3 + FIFO + tagging", "body": "\u2026FIFO queue types and Tagging.\r\n\r\n##### SUMMARY\r\nRefactor role to use BOTO3 and add in support for FIFO queue types and allow tagging of sqs queues too.  Maintains backwards compatibility with previous variables used with previous module.\r\n\r\nFixes #26592 - Enables support for deploying FIFO queues. \r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nsqs_queue\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.3 (stable-2.4 cf31e47cdc) last updated 2018/01/05 23:30:34 (GMT +100)\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\nRefactored using Boto3 so we can use FIFO queues and Tags.\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "Ghilli3": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34518", "title": "Fortinet FortiManager Scripting Module", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nAdding functionality from playbooks to add/delete/execute CLI or TCL scripts on a FortiManager (FMGR) to run against any number of devices managed by the FMGR.\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - New Module Pull Request\r\n\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\nfmgr_script.py\r\nfortimanager.py\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/cse/PycharmProjects/ansible/lib/ansible/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.12 (default, Nov 20 2017, 18:23:56) [GCC 5.4.0 20160609]```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\nFully developed in-house by Fortinet based on other modules by Fortinet (fortios_config.py) but for a different product.\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "huiyiqun": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34509", "title": "add enable_ipv6 option for docker_network", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\n\r\ndocker_network\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n\r\n  ", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "iredmail": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34489", "title": "mysql_db module: use option `--defaults-file` instead of `--defaults-\u2026", "body": "refer to issue #34488 ", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "tyler-8": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34486", "title": "Add examples and language to better showcase the 'parents' parameter in ios_config", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nThe parents parameter isn't well showcased in the examples or documentation. I added two more examples that show slightly more complex ways to use it.\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Docs Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\nios_config\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n>>> ansible.__version__\r\n'2.5.0'\r\n```", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "markgoddard": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34472", "title": "Support project parameter for os_security_group module", "body": "##### SUMMARY\r\n\r\nMany OpenStack modules provide the ability to register a resource in a\r\nproject other than the one being used to authenticate with, by adding a\r\nproject parameter to the module. Examples include os_network, os_subnet,\r\nand os_router. This change adds a project parameter to the\r\nos_security_group module.\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nos_security_group\r\nos_security_group_rule", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "dbckz": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34395", "title": "include interface info in ansible_interfaces", "body": "##### SUMMARY\r\nFixes #30246 by implementing the changes @n-st suggested there\r\n\r\ngather_facts currently creates a list `ansible_interfaces` of all interfaces on a host, and for each interface creates a dict `ansible_<interface_name>` containing the details of that interface. This PR changes `ansible_interfaces` to a dict, with interface names for keys, and the corresponding interface details for the value.\r\n\r\nThe rationale for this change is copied verbatim from #30246:\r\n\r\n*I propose making the network interface facts available as a dictionary* (similar to what's done for disk devices) in the existing ansible_interfaces (which is currently only a list of names).\r\nThe dictionary approach is preferable, as it:\r\n- reduces clutter in the hierarchy root,\r\n- avoids name collisions (imagine someone named their network interface \"dns\", for example), and\r\n- makes it much easier and \"cleaner\" to access those facts dynamically (see example playbook).\r\n\r\nThis change can be implemented in a backwards-compatible way due to the sematics of Python iterators:\r\nfor x in [\"lo\", \"eth0\"] iterates over list items, i.e. lo and eth0\r\nfor x in {\"lo\": {\u2026}, \"eth0\": {\u2026}} iterates over dictionary keys, i.e. lo and eth0\r\n\r\n\r\nNOTE: of course the `ansible_<interface_name>` facts are left untouched for backward compatibility.\r\n\r\n##### ISSUE TYPE\r\n- Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\n`setup` module\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0 (ansible_interfaces 27e058953c) last updated 2018/01/03 13:26:48 (GMT +100)\r\n  config file = None\r\n  configured module search path = [u'/Users/buckleyd/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/buckleyd/projects/github/ansible/lib/ansible\r\n  executable location = /Users/buckleyd/projects/github/ansible/bin/ansible\r\n  python version = 2.7.10 (default, Oct 23 2015, 19:19:21) [GCC 4.2.1 Compatible Apple LLVM 7.0.0 (clang-700.0.59.5)]\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\nCurrent implementation makes it non-trivial to iterate through the network interfaces and grab e.g. IP information. We can get around this by building an object in-play such as:\r\n```\r\n- name: Create interfaces dictionary\r\n  set_fact:\r\n    interfaces: \"{{ interfaces | default({}) | combine( {item: hostvars[inventory_hostname]['ansible_' + item ]} ) }}\"\r\n  with_items: \"{{ ansible_interfaces | replace('-', '_') }}\"\r\n```\r\nbut this is ugly, and can cost significant time/memory if there are many interfaces.\r\n\r\nBefore change:\r\n```\r\n\"ansible_interfaces\": [\r\n            \"awdl0\",\r\n            \"bridge0\",\r\n            ...\r\n        ]\r\n```\r\n\r\nAfter change:\r\n```\r\n\"ansible_interfaces\": {\r\n        \"awdl0\": {\r\n            \"device\": \"awdl0\",\r\n            \"flags\": [\r\n                \"BROADCAST\",\r\n                \"PROMISC\",\r\n                \"SIMPLEX\",\r\n                \"MULTICAST\"\r\n            ],\r\n            \"ipv4\": [],\r\n            \"ipv6\": [],\r\n            ...\r\n        },\r\n        \"bridge0\": {\r\n            \"device\": \"bridge0\",\r\n            \"flags\": [\r\n                \"UP\",\r\n                \"BROADCAST\",\r\n                \"SMART\",\r\n                \"RUNNING\",\r\n                \"SIMPLEX\",\r\n                \"MULTICAST\"\r\n            ],\r\n            \"ipv4\": [],\r\n            \"ipv6\": [],\r\n            ...\r\n        },\r\n        ...\r\n    }\r\n```\r\n\r\n  ", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "tmshn": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34390", "title": "timezone module: Enhanced update command for Debian/Ubuntu", "body": "##### BACKGROUND\r\n\r\nIn debian/ubuntu, there are 2 way to update timezone setting:\r\n\r\n1. Edit /etc/timezone then `dpkg-reconfigure tzdata`\r\n1. Symlink tz file to /etc/localtime then `dpkg-reconfigure tzdata`\r\n\r\nThe first one can be found in [ubuntu's doc](https://help.ubuntu.com/community/UbuntuTime#Using_the_Command_Line_.28terminal.29), and I'd been believing it's better way.\r\n\r\nHowever actually, as commented by @sumpfralle in https://github.com/ansible/ansible/pull/27546#issuecomment-347062382, the second one takes precedence over the first one and is better way to modify timezone.\r\n\r\nSee also:\r\n- Comment No. 9 in https://bugs.launchpad.net/ubuntu/+source/tzdata/+bug/1554806\r\n- https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=848143#10\r\n- https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=813226#10\r\n\r\n##### SUMMARY\r\n\r\nStarting from https://github.com/ansible/ansible/pull/27546, the module deletes /etc/localtime to avoid conflicts between /etc/localtime and /etc/timezone.\r\n\r\nThis pull request modifies this behavior: instead of deleting /etc/localtime, update it to the desired state in addition to modify /etc/timezone.\r\n\r\n##### ISSUE TYPE\r\n\r\n- Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n\r\ntimezone module\r\n\r\n##### ANSIBLE VERSION\r\n\r\n```\r\nansible 2.5.0 (timezone-debian a0d2e34f9a) last updated 2018/01/03 18:19:41 (GMT +900)\r\n  config file = None\r\n  configured module search path = [u'/Users/01014505/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/01014505/Documents/dev/oss/ansible/lib/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.13 (default, Dec 17 2016, 23:03:43) [GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.42.1)]\r\n```\r\n\r\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "siaomingjeng": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34382", "title": "LB backend pool support for Azure NIC module", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nazure_rm_networkinterface:\r\n1. Support creating Azure network interface using subnet from a different resource group (Fixes #29607);\r\n2. Support load balancer backend address pool. (mentioned in #2586)\r\n\r\nazure_rm_loadbalancer:\r\n1. Add support to use private ip as frontend\r\n2. Fix tags did not work\r\n3. Add inbound NAT rule support\r\n4. Add support for naming frontend, backend, rule and inbound NAT rule\r\n5. Support get private IP from a subnet which is in a different resource group\r\n\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Feature Pull Request\r\n - Bugfix Pull Request\r\n\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module/plugin/module/task -->\r\nlib/ansible/modules/cloud/azure/azure_rm_networkinterface.py\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \u201cansible --version\u201d between quotes below -->\r\n```\r\nansible 2.4.1.0\r\n  config file = None\r\n  configured module search path = [u'/home/raymond/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Aug  4 2017, 00:39:18) [GCC 4.8.5 20150623 (Red Hat 4.8.5-16)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nEXAMPLES = '''\r\n    - name: Create a network interface in a resource_group with the subnet from a different resource group and a load balancer backend pool.\r\n      azure_rm_networkinterface:\r\n            name: nic001\r\n            resource_group: Testing\r\n            subnet_resource_group: Testing2\r\n            virtual_network_name: vnet001\r\n            subnet_name: subnet001\r\n            load_balancer: loadbalancer001\r\n            load_balancer_backend_pool: backend001\r\n\r\n  Final Testing Ansible Version:\r\n    ansible 2.5\r\n    ansible 2.4.1", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "shaicoleman": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34373", "title": "Update lxd_container example to use simplestreams", "body": "##### SUMMARY\r\nThere's a 404 error with the lxd protocol in the docs\r\nhttp://docs.ansible.com/ansible/latest/lxd_container_module.html\r\n\r\n##### ISSUE TYPE\r\n - Docs Pull Request\r\n\r\n##### COMPONENT NAME\r\nlxd_container\r\n\r\n##### ANSIBLE VERSION\r\nansible 2.4.2.0\r\n\r\n##### ADDITIONAL INFORMATION\r\nWhen running the example in the docs, the following error is returned:\r\n```\r\nfatal: [localhost]: FAILED! => {\"actions\": [], \"changed\": false, \"msg\": \"Failed to fetch https://images.linuxcontainers.org/1.0/images/ubuntu%2Fxenial%2Famd64: 404 Not Found\"}\r\n```", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "jorgegviana": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34369", "title": "Add support for awsvpc on ecs_taskdefinition module and ecs_service", "body": "##### SUMMARY\r\nAdd support for awsvpc on ecs_taskdefinition module and network_configuration parameter to ecs_service (required for awsvpc).\r\n\r\nAdd option 'awsvpc' for network_configuration parameter in ecs_taskdefinition module\r\nAdd parameter network_configuration in ecs_service (required to create a service using awsvpn network mode)\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\necs_taskdefinition\r\necs_service\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/Users/jviana/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.12 (default, Jun 29 2016, 14:05:02) [GCC 4.2.1 Compatible Apple LLVM 7.3.0 (clang-703.0.31)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "grastogi23": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34366", "title": "New module to setup cluster cloud details settings for clouds like Az\u2026", "body": "\u2026ure.\r\n\r\n##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nNew module to setup cluster cloud details settings for clouds like Azure.\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\navi_clusterclouddetails\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.5.0\r\n  config file = /home/grastogi/.ansible.cfg\r\n  configured module search path = [u'/home/grastogi/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/grastogi/trace/ansible2.5/local/lib/python2.7/site-packages/ansible\r\n  executable location = /home/grastogi/trace/ansible2.5/bin/ansible\r\n  python version = 2.7.6 (default, Jun 22 2015, 17:58:13) [GCC 4.8.2]\r\n\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34363", "title": "New module to setup WAF profile.", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nNew module to setup WAF profile.\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\navi_wafprofile\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.5.0\r\n  config file = /home/grastogi/.ansible.cfg\r\n  configured module search path = [u'/home/grastogi/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/grastogi/trace/ansible2.5/local/lib/python2.7/site-packages/ansible\r\n  executable location = /home/grastogi/trace/ansible2.5/bin/ansible\r\n  python version = 2.7.6 (default, Jun 22 2015, 17:58:13) [GCC 4.8.2]\r\n\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "Vebryn": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34353", "title": "bug into snmp_facts on some cisco", "body": "Hi,\r\n\r\nsnmp_facts module gets informations from network equipement using snmp. On some Cisco, name field is wrong.\r\n\r\n```\r\n        \"2\": {\r\n            \"adminstatus\": \"up\", \r\n            \"description\": \"plop\", \r\n            \"ifindex\": \"1106333\", \r\n            \"ipv4\": [\r\n                {\r\n                    \"address\": \"10.10.2.1\", \r\n                    \"netmask\": \"255.255.255.0\"\r\n                }\r\n            ], \r\n            \"mac\": \"aca015ba46b7\", \r\n            \"mtu\": \"1500\", \r\n            \"name\": \"0\",\r\n            \"operstatus\": \"up\", \r\n            \"speed\": \"1500\"\r\n        }, \r\n```\r\n\r\nUsing snmpget, value is correct.\r\n\r\n`iso.3.6.1.2.1.2.2.1.2.2 = STRING: \"FastEthernet0/1\"`\r\n\r\nBest regards", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "karlmdavis": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34349", "title": "Replace MD5 with SHA-1 in jenkins_plugins module.", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nFixes Issue #34304.\r\n\r\nThe `hashlib.md5(...)` function is disabled on systems running in FIPS 140-2 mode. To accommodate that, this commit just switches to a hash function (`hashlib.sha1(...)`) that is allowed by FIPS 140-2.\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\n`jenkins_plugin`\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n$ ansible --version\r\nansible 2.4.1.0\r\n  config file = None\r\n  configured module search path = [u'/home/karl/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/karl/workspaces/cms/bluebutton-ansible-playbooks-data.git/venv/local/lib/python2.7/site-packages/ansible\r\n  executable location = /home/karl/workspaces/cms/bluebutton-ansible-playbooks-data.git/venv/bin/ansible\r\n  python version = 2.7.6 (default, Nov 23 2017, 15:49:48) [GCC 4.8.4]\r\n```\r\n\r\nBut this PR is based off `devel`.\r\n\r\n##### ADDITIONAL INFORMATION\r\nApplied the same patch against `v2.4.1.0` and confirmed that it resolved the problem described in Issue #34304.", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "Heusini": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34348", "title": "Added poweroff_guest and reboot_guest", "body": "##### SUMMARY\r\nAdded the option to poweroff_guest and reboot_guest so you can make gracefull VM shutdowns or reboots \r\n\r\n\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nmodules/cloud/vmware/vsphere_guest.py\r\n\r\n##### ANSIBLE VERSION\r\n```\r\ndevel\r\n```\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "McNetic": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34332", "title": "Fix changing of nic parameters in vmware_guest", "body": "##### SUMMARY\r\nCurrently, changing the parameters of a nic via vmware_guest does not correctly us pyvmomi api. This pull request fixes that and thus makes it possible for example to change a nic's mac address.\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nvmware_guest\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n  config file = /root/ansible/ansible.cfg\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.13 (default, Nov 24 2017, 17:33:09) [GCC 6.3.0 20170516]\r\n\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "cdown": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34322", "title": "pacman: Add assume_installed for virtual packages", "body": "##### SUMMARY\r\n\r\nThis is useful to avoid old-style dummy packages when there are\r\noverreaching dependencies on a parent.\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\n\r\npacman\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n% ansible --version\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/cdown/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/sbin/ansible\r\n  python version = 2.7.14 (default, Sep 20 2017, 01:25:59) [GCC 7.2.0]\r\n```", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "Yannig": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34318", "title": "Fix for with_ini when used with YAML parameters.", "body": "##### SUMMARY\r\n\r\nLookup ini is not working with current example in Ansible documentation.\r\nFix the bug in the lookup plugin and add a new test in integration test.\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n\r\nlookup ini\r\n\r\n##### ANSIBLE VERSION\r\n\r\n```\r\nansible 2.5.0 (fix-with-ini 95b77fdb9d) last updated 2017/12/31 08:09:24 (GMT +200)\r\n  config file = /home/yannig/.ansible.cfg\r\n  configured module search path = [u'/home/yannig/dev/common/playbooks/library']\r\n  ansible python module location = /home/yannig/dev/ansible/lib/ansible\r\n  executable location = /home/yannig/dev/ansible/bin/ansible\r\n  python version = 2.7.13 (default, Nov 23 2017, 15:37:09) [GCC 6.3.0 20170406]\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\n\r\nCreate a playbook **test.yml** with the following content:\r\n\r\n```yaml\r\n- name: \"test\"\r\n  hosts: localhost\r\n  gather_facts: no\r\n  tasks:\r\n    - name: \"Test ini lookup\"\r\n      debug: var=item\r\n      with_ini:\r\n        - .*\r\n        - section: section1\r\n        - file: test.ini\r\n        - re: true\r\n```\r\n\r\nYou will need a file **test.ini** with the following content:\r\n\r\n```ini\r\n[section1]\r\na=1\r\nb=2\r\n[section2]\r\na=1\r\nb=2\r\nc=3\r\n```\r\n\r\nLaunch this playbook (**ansible-playbook test.yml**).\r\n\r\nWhat you get:\r\n\r\n```\r\n[WARNING]: Unable to find 'ansible.ini' in expected paths.\r\n\r\nfatal: [localhost]: FAILED! => {\"msg\": \"Invalid filename: 'None'\"}\r\nmsg:\r\nInvalid filename: 'None'\r\n        to retry, use: --limit @/home/yannig/tmp/test.retry\r\n```\r\n\r\nExpected result:\r\n\r\n```\r\nok: [localhost] => (item=1) => {\r\n    \"changed\": false, \r\n    \"item\": \"1\"\r\n}\r\nok: [localhost] => (item=2) => {\r\n    \"changed\": false, \r\n    \"item\": \"2\"\r\n}\r\n```\r\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "ktstevenson": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34310", "title": "docfix in cloud/amazon/rds module", "body": "Update description to reflect that the \"upgrade\" option can also be used with\r\nthe modify command.\r\n\r\n##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nFixes a minor omission in the documentation of the rds module.\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Docs Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\nrds_module\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n  config file = None\r\n  configured module search path = [u'/Users/ktstevenson/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.11 (default, Jun 17 2016, 20:01:51) [GCC 4.2.1 Compatible Apple LLVM 7.3.0 (clang-703.0.31)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\nThe documentation currently says that the \"upgrade\" option can only be used with the create and replicate commands. It also appears to work with the modify command, at least for postgres databases.\r\n\r\nThis code works:\r\n```\r\n- name: Set database database parameters\r\n      rds:\r\n        command: modify\r\n        instance_name: \"{{ dbInstanceName }}\"\r\n        region: us-east-1\r\n        upgrade: yes\r\n```\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\nN/A\r\n```\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "zmyrgel": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34299", "title": "Improve editor selection while executing vault commnad", "body": "Imrove editor selection by first looking command pointed by VISUAL, then EDITOR\r\nand falling back on using 'vi' if commands pointed b yVISUAL and EDITOR are not\r\nfound.\r\nAlso give better error message when no executable editor is not found in path.\r\n\r\n##### SUMMARY\r\nCurrent code doesn't look editor set by VISUAL env variable. VISUAL should take precedence over EDITOR. Also the code doesn't check if the actual command exists and is executable resulting in vague \"File not found\" error if no editor is found.\r\nThis fixes both issues and Fixes #34295\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nansible\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.2.0\r\n  config file = /home/tmy/.ansible.cfg\r\n  configured module search path = [u'/home/tmy/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib64/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.14 (default, Sep 22 2017, 11:31:09) [GCC 7.2.0]\r\n\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "esimone74": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34294", "title": "Add Mesos Marathon application module for being managable with Ansible", "body": " - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\nmarathon_app\r\n\r\n```yaml\r\n- name: Create a Marathon application\r\n  marathon_app:\r\n    marathon_uri: http://marathon.mesos:8080\r\n    inline_data:\r\n      id: /foo\r\n      instances: 5\r\n      cmd: \"sleep infinity\"\r\n      cpus: 0.1\r\n      mem: 16\r\n    state: present\r\n```\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.0\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nThis module provide a way to manage Marathon applications inside a Mesos cluster through Ansible.\r\nThe module use the [Marathon REST API](http://mesosphere.github.io/marathon/api-console/index.html)\r\n\r\n```yaml\r\n- name: Scale a Marathon application\r\n  marathon_app:\r\n    url: https://admin:secret@marathon.mesos:8443\r\n    inline_data:\r\n      id: /foo\r\n      instances: 10\r\n    state: update\r\n    wait: yes\r\n```", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "jvanderhoof": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34280", "title": "Conjur Lookup Plugin", "body": "##### SUMMARY\r\nThis PR adds an Ansible Lookup Plugin which allows Ansible to retrieve secrets from Conjur using the Ansible controller's Conjur identity.\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nConjur Variable (ex. `lookup('conjur_variable', 'db/password')`\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.3.2.0\r\n  config file =\r\n  configured module search path = Default w/o overrides\r\n  python version = 2.7.13 (default, Dec 17 2016, 23:03:43) [GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.42.1)]\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\nThis lookup plugin requires Conjur (https://www.conjur.org/) to be running and accessible from the machine executing the playbook using the Conjur lookup plugin.\r\n\r\nI wrote a small project to simplify building and validating this plugin: https://github.com/jvanderhoof/ansible-testing. It uses Docker Compose provide all the parts necessary.\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "cyrus-mc": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34279", "title": "Support for boto3 library", "body": "##### SUMMARY\r\n\r\nIn order to support assumerole the AWS dynamic inventory needs to be converted to boto3.\r\n\r\nFixes #25718\r\n\r\n##### ISSUE TYPE\r\n\r\n - Bugfix Pull Request\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "gregsidelinger": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34278", "title": "tower_job_template: Fixing ask_credential and ask_inventory support", "body": "##### SUMMARY\r\nask_credential and ask_inventory need to mapped to the correct tower api attributes.\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\ntower_job_template\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible --version\r\nansible 2.5.0\r\n  config file = /Users/sidelig/.ansible.cfg\r\n  configured module search path = [u'/Users/sidelig/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/sidelig/.virtualenvs/ansible-dev/lib/python2.7/site-packages/ansible\r\n  executable location = /Users/sidelig/.virtualenvs/ansible-dev/bin/ansible\r\n  python version = 2.7.10 (default, Feb  7 2017, 00:08:15) [GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.34)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nask_credential and ask_inventory where not being saved to Tower 3.1.3.  The Tower API docs show these as the correct attributes to set.\r\n```\r\nask_inventory_on_launch: (boolean, default=False)\r\nask_credential_on_launch: (boolean, default=False)\r\n```", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34202", "title": "tower_group: add update_cache_timeout option", "body": "The tower_cli supports update_cache_timeout so I'm not sure why it was left out.  I've created 50 groups in tower 3.1.3 to test the patch with and without a update_cache_timeout set.\r\n\r\n##### SUMMARY\r\nAdd update_cache_timeout support to the tower_group module.\r\n\r\n\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\ntower_group\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.3.1.0\r\n  configured module search path = Default w/o overrides\r\n  python version = 2.7.10 (default, Feb  7 2017, 00:08:15) [GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.34)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nThe tower_cli has support for the update_cache_timeout option and by adding the option the tower_group module passes it on.\r\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "steiza": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34277", "title": "Add module for interacting with AWS-hosted Elasticsearch", "body": "##### SUMMARY\r\nI've been using this to manage AWS-hosted Elasticsearch and thought I would post it to see if it would be useful to others.\r\n\r\nI haven't submitted a PR for ansible before, but I did read over the Contributing pages - feedback welcome!\r\n\r\n##### ISSUE TYPE\r\n - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\ncloud/amazon/elasticsearch.py\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n[14:30:31] ~$ ansible --version\r\nansible 2.4.2.0\r\n  config file = /Users/zachsteindler/.ansible.cfg\r\n  configured module search path = [u'/Users/zachsteindler/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/ansible\r\n  executable location = /Library/Frameworks/Python.framework/Versions/2.7/bin/ansible\r\n  python version = 2.7.13 (v2.7.13:a06454b1afa1, Dec 17 2016, 12:39:47) [GCC 4.2.1 (Apple Inc. build 5666) (dot 3)]\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\nN/A", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "brouberol": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34273", "title": "Change DataDog to Datadog", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nUpdate `datadog_event` module documentation to use the preferred \"Datadog\" spelling.\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Docs Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\n`datadog_event`\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.1.0\r\n  config file = /home/br/code/playbooks/gallifrey/ansible.cfg\r\n  configured module search path = [u'/home/br/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/br/.virtualenvs/ansible/lib/python2.7/site-packages/ansible\r\n  executable location = /home/br/bin/ansible\r\n  python version = 2.7.14 (default, Dec 11 2017, 14:52:53) [GCC 7.2.1 20170915 (Red Hat 7.2.1-2)]\r\n```\r\n\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "pari-": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34256", "title": "task_executor.py: Raise 'conditional exception' in case of 'include_*'", "body": "##### SUMMARY\r\nThis protection was initially added as a solution to #12843 at a time\r\nwhen there only was 'include'.\r\n\r\nAfter final integration of 483df9c5f83befbef85796090c0f61de6436b130, the protection is not feasible anymore - since\r\nwe've introduced 'import_*' for explicit, \"dynamic including\".\r\n\r\nWhile this PR does not touch the meanwhile deprecated 'include'-behaviour,\r\nit does change the behavior of 'include_task' and 'include_role', since these\r\n(according to documentation) are supposed to apply i.e. conditions to the\r\nstatement itself, and not to the set of included objectives (which implies\r\nraising an exception when failing to properly evaluate conditions, instead\r\nof silently catching it).\r\n\r\nFixes #33632\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nexecutor/task_executor.py\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0 (fix_33632 e4d3715d36) last updated 2017/12/27 13:37:35 (GMT +200)\r\n  config file = /Users/pringl/development/cm-infra/ansible.cfg\r\n  configured module search path = [u'/usr/share/ansible']\r\n  ansible python module location = /Users/pringl/development/ansible/lib/ansible\r\n  executable location = /Users/pringl/development/ansible/bin/ansible\r\n  python version = 2.7.13 (default, Jun 15 2017, 10:33:06) [GCC 4.2.1 Compatible Apple LLVM 8.1.0 (clang-802.0.42)]\r\n```", "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/34031", "title": "lib/ansible/plugins/action/copy.py: Attend to potentially failing module calls", "body": "##### SUMMARY\r\nAs stated in (#33785) when trying use a bogus `directory_mode`, the runtime behaviour is anything but what one would expect.\r\nWhile #33785 is only the symptom, the actual cause are exceptions which are raised, but not handled properly and therefor become masked. \r\n\r\nThe same kind of issue was already handled for the 'Copy symlinks over'-snippet, which is also why I aligned my changes to the very same way.\r\n\r\nFixes #33785\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nplugins/action/copy.py\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0 (fix_33785 ccae57bf86) last updated 2017/12/19 12:34:27 (GMT +200)\r\n  config file = /Users/pringl/development/cm-infra/ansible.cfg\r\n  configured module search path = [u'/Users/pringl/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/pringl/development/ansible/lib/ansible\r\n  executable location = /Users/pringl/development/ansible/bin/ansible\r\n  python version = 2.7.13 (default, Jun 15 2017, 10:33:06) [GCC 4.2.1 Compatible Apple LLVM 8.1.0 (clang-802.0.42)]\r\n```\r\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "RafPe": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34255", "title": "Adds external param for gitlab_user module", "body": "##### SUMMARY\r\nAdds support for `external` parameter for gitlab_user module allowing create/update user with this new property.\r\n\r\n##### ISSUE TYPE\r\n - Existing Module Pull Request\r\n\r\n##### COMPONENT NAME\r\n* gitlab_user\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.1.0\r\n  config file = /Users/rafpe/config/ansible.cfg\r\n  configured module search path = [u'/Users/rafpe/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/Cellar/ansible/2.4.1.0/libexec/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.14 (default, Sep 25 2017, 09:53:22) [GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.37)]\r\n\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nn/a", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "innossh": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34250", "title": "Credential in tower_project module should be optional", "body": "##### SUMMARY\r\n\r\n`scm_credential` option of tower_project module is not required as described in the document.\r\nhttp://docs.ansible.com/ansible/latest/tower_project_module.html\r\n\r\nBut I ran into the following error when I executed the task creating the new project on AWX.\r\n\r\ntask\r\n```yaml\r\n- tower_project:\r\n    name: some project\r\n    organization: Default\r\n    state: present\r\n    scm_type: git\r\n    scm_url: \"{{ some_public_repository_url }}\"\r\n    tower_config_file: \"{{ tower_cli_config_path }}\"\r\n```\r\n\r\nerror\r\n```\r\nTASK [tower_project] ***************************************************************************************************************\r\nfatal: [awx-01]: FAILED! => {\"changed\": false, \"module_stderr\": \"Shared connection to 127.0.0.1 closed.\\r\\n\", \"module_stdout\": \"Traceback (most recent call last):\\r\\n  File \\\"/tmp/ansible_9wM5nX/ansible_module_tower_project.py\\\", line 233, in <module>\\r\\n    main()\\r\\n  File \\\"/tmp/ansible_9wM5nX/ansible_module_tower_project.py\\\", line 210, in main\\r\\n    cred = cred_res.get(name=scm_credential)\\r\\n  File \\\"/usr/lib/python2.7/site-packages/tower_cli/models/base.py\\\", line 484, in get\\r\\n    response = self.read(pk=pk, fail_on_no_results=True, fail_on_multiple_results=True, **kwargs)\\r\\n  File \\\"/usr/lib/python2.7/site-packages/tower_cli/models/base.py\\\", line 310, in read\\r\\n    'fields. Please tighten your criteria.' % resp['count'])\\r\\ntower_cli.exceptions.MultipleResults: Expected one result, got 2. Possibly caused by not providing required fields. Please tighten your criteria.\\r\\n\", \"msg\": \"MODULE FAILURE\", \"rc\": 0}\r\n```\r\n\r\nThe error occurred because the credential is always referenced even if `scm_credential` option isn't set. (BTW, I have two credentials on AWX and I don't use them this time.)\r\nFinally I've fixed the code in order to make `scm_credential` optional correctly. Could you check and merge this PR?\r\n\r\n##### ISSUE TYPE\r\n\r\n- Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n\r\ntower_project\r\n\r\n##### ANSIBLE VERSION\r\n\r\n```\r\nansible 2.4.2.0\r\n```\r\n", "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/33824", "title": "Set 'changed' to False if the installed jenkins plugin isn't changed", "body": "##### SUMMARY\r\n\r\n`changed` is always `True` when we run the playbook with check mode even if the specified version of jenkins plugin is already installed.\r\n\r\nAfter this PR is merged, `changed` will be `False` if the specified version of jenkins plugin is already installed and the attributes of existing `jpi` file is not different from the attributes in the task options.\r\nI deleted some codes because `set_fs_attributes_if_different` supports to check mode.\r\n\r\n##### ISSUE TYPE\r\n\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n\r\njenkins_plugin\r\n\r\n##### ANSIBLE VERSION\r\n\r\n```\r\nansible 2.4.2.0\r\n```\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "nikhil-zadoo": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34247", "title": "added a new module to enable/disable balancer manager for apache 2.2", "body": "##### SUMMARY\r\nCreated a module for apache 2.2 balancer manager. the module makes it possible to enable/disable balancer manager for apache 2.2. there is already a module present for apache 2.4 on the ansible repo, though not for apache 2.2.\r\n\r\n##### COMPONENT NAME\r\nmodule name - apache22_mod_proxy\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible --version\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/ansible/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Aug  4 2017, 00:39:18) [GCC 4.8.5 20150623 (Red Hat 4.8.5-16)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nNONE\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "rrey": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34246", "title": "Introduce grafana callback plugin.", "body": "##### SUMMARY\r\n\r\nThe grafana plugin plublishes annotations to the HTTP API available in\r\nGrafana 4.6+\r\n\r\nThe callback publishes:\r\n* An annotation on playbook start, tagged with \"ansible\",\r\n \"ansible_event_start\" and playbook name, example:\r\n\r\n```\r\n{\r\n    \"text\": \"Started playbook test.yml\\n\\nFrom 'pc45.home'\\nBy user 'remirey'\\n\",\r\n    \"tags\": [\"ansible\", \"ansible_event_start\", \"test.yml\"],\r\n    \"time\": 1514291163000\r\n}\r\n```\r\n\r\n* An annotation on error containing the host and task who failed and\r\n  tagged with \"ansible\", \"ansible_event_failure\" and playbook name, example:\r\n\r\n```\r\n{\r\n    \"text\": \"Playbook test.yml Failure !\\n\\nFrom 'pc45.home'\\nBy user 'remirey'\\n\\n'TASK: simulate failure' failed on localhost\\n\\ndebug: {\\\"changed\\\": false, \\\"msg\\\": \\\"Some random failure\\\"}\\n\",\r\n    \"tags\": [\"ansible\", \"ansible_event_failure\", \"test.yml\"],\r\n    \"time\": 1514291165000\r\n}\r\n```\r\n\r\n* A region annotation emitted on playbook stats, tagged with \"ansible\",\r\n  \"ansible_report\" and playbook name, example:\r\n\r\n```\r\n{\r\n    \"text\": \"Playbook test.yml\\nDuration: 1.641703\\nStatus: FAILED\\n\\nFrom 'pc45.home'\\nBy user 'remirey'\\n\\nResult:\\n{\\\"localhost\\\": {\\\"unreachable\\\": 0, \\\"skipped\\\": 0, \\\"ok\\\": 2, \\\"changed\\\": 1, \\\"failures\\\": 1}}\\n\",\r\n    \"tags\": [\"ansible\", \"ansible_report\", \"test.yml\"],\r\n    \"isRegion\": true,\r\n    \"timeEnd\": 1514291165000,\r\n    \"time\": 1514291163000\r\n}\r\n```\r\n\r\n##### ISSUE TYPE\r\n\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\n\r\nplugins/callback/grafana.py\r\n\r\n##### ANSIBLE VERSION\r\nN/A\r\n\r\n##### ADDITIONAL INFORMATION\r\n\r\nFixes #34225", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "petrovicboban": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34238", "title": "Added new return status fields for mongodb_user module", "body": "##### SUMMARY\r\nAs it is right now, mongodb_user module has the same status when I add new user or when I just change roles for existing user. In both cases, `changed` is set to `true`, which is fine, but in some cases, there may be need to find out if we changed roles for existing user or if we created new user. New status fields (booleans) `roles_changed` and `new_user` allow such thing.\r\n\r\n```\r\nok: [localhost] => {\r\n    \"msg\": {\r\n        \"changed\": true,\r\n        \"failed\": false,\r\n        \"new_user\": false,\r\n        \"roles_changed\": true,\r\n        \"user\": \"bob3\"\r\n    }\r\n}\r\n```\r\n\r\nIt's important to say that this change is compatible to previous version. All existing status fields are there, the same as before.\r\n\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n\r\n##### COMPONENT NAME\r\nmongodb_user module\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.1.0\r\n  config file = /Users/boban/.ansible.cfg\r\n  configured module search path = [u'/Users/boban/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Library/Python/2.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.10 (default, Oct 23 2015, 19:19:21) [GCC 4.2.1 Compatible Apple LLVM 7.0.0 (clang-700.0.59.5)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nIt's important to say that this change is compatible to previous version. All existing status fields are there, the same as before.\r\n\r\nNew return status:  \r\n```\r\nok: [localhost] => {\r\n    \"msg\": {\r\n        \"changed\": true,\r\n        \"failed\": false,\r\n        \"new_user\": false,\r\n        \"roles_changed\": true,\r\n        \"user\": \"bob3\"\r\n    }\r\n}\r\n```\r\nOld return status:  \r\n```\r\nok: [localhost] => {\r\n    \"msg\": {\r\n        \"changed\": true,\r\n        \"failed\": false,\r\n        \"user\": \"bob3\"\r\n    }\r\n}\r\n```", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "odra": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34228", "title": "Hardlink follow", "body": "##### SUMMARY\r\n\r\nUses `os.readlink` to retrieve the link's full path when hard linking a soft link (using `follow: true`).\r\n\r\nFixes #33911 \r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\nBugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\nFile\r\n\r\n##### ANSIBLE VERSION\r\n\r\n```\r\nansible 2.5.0\r\n  config file = None\r\n  configured module search path = [u'/home/lrossetti/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/lrossetti/Work/ansible/venv/lib/python2.7/site-packages/ansible-2.5.0-py2.7.egg/ansible\r\n  executable location = /home/lrossetti/Work/ansible/venv/bin/ansible\r\n  python version = 2.7.14 (default, Nov  3 2017, 10:55:25) [GCC 7.2.1 20170915 (Red Hat 7.2.1-2)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\nI created an additional task in the module's integration test, sample usage:\r\n\r\n```\r\n-\r\n  hosts: localhost\r\n  tasks:\r\n    - \r\n      name: Run hard link test\r\n      include_role:\r\n        name: file_test\r\n        tasks_from: hard_link_follow.yml\r\n  vars:\r\n    output_dir: ~/tmp\r\n\r\n```\r\n\r\nNote: not sure if this is the best approach to test this, I tried to use the file role test (main.yml) but it failed a couple of times to me + this test felt like it should be an isolated test case on its own.", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "BondAnthony": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34217", "title": "DigitalOcean Inventory: Removed sort from json dump", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nRemove sort_keys from json.dumps since the resulting keys are strings and integers. Currently this works without an issues when using python 2. When running the same code under python3 the inventory script is unable to complete successfully because key sorting is attempting to sort a string against an integer.\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\ncontrib/inventory/digital_ocean.py\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.5.0 (test/block-storage ee4235019f) last updated 2017/12/22 17:09:40 (GMT -400)\r\n  config file = /Users/abond/Dev/github/ansible.cfg\r\n  configured module search path = ['/Users/abond/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/abond/Dev/github/ansible/lib/ansible\r\n  executable location = /Users/abond/Dev/github/ansible/bin/ansible\r\n  python version = 3.6.4 (default, Dec 19 2017, 15:24:51) [GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.39.2)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n/usr/local/bin/python3 /Users/abond/Dev/github/ansible/contrib/inventory/digital_ocean.py --pretty\r\nTraceback (most recent call last):\r\n  File \"/Users/abond/Dev/github/ansible/contrib/inventory/digital_ocean.py\", line 543, in <module>\r\n    DigitalOceanInventory()\r\n  File \"/Users/abond/Dev/github/ansible/contrib/inventory/digital_ocean.py\", line 313, in __init__\r\n    self.write_to_cache()\r\n  File \"/Users/abond/Dev/github/ansible/contrib/inventory/digital_ocean.py\", line 519, in write_to_cache\r\n    json_data = json.dumps(data, sort_keys=True, indent=2)\r\n  File \"/usr/local/Cellar/python3/3.6.4/Frameworks/Python.framework/Versions/3.6/lib/python3.6/json/__init__.py\", line 238, in dumps\r\n    **kw).encode(obj)\r\n  File \"/usr/local/Cellar/python3/3.6.4/Frameworks/Python.framework/Versions/3.6/lib/python3.6/json/encoder.py\", line 201, in encode\r\n    chunks = list(chunks)\r\n  File \"/usr/local/Cellar/python3/3.6.4/Frameworks/Python.framework/Versions/3.6/lib/python3.6/json/encoder.py\", line 430, in _iterencode\r\n    yield from _iterencode_dict(o, _current_indent_level)\r\n  File \"/usr/local/Cellar/python3/3.6.4/Frameworks/Python.framework/Versions/3.6/lib/python3.6/json/encoder.py\", line 404, in _iterencode_dict\r\n    yield from chunks\r\n  File \"/usr/local/Cellar/python3/3.6.4/Frameworks/Python.framework/Versions/3.6/lib/python3.6/json/encoder.py\", line 353, in _iterencode_dict\r\n    items = sorted(dct.items(), key=lambda kv: kv[0])\r\nTypeError: '<' not supported between instances of 'int' and 'str'\r\n```\r\n\r\nAfter removing `sort_keys=True` the inventory script will respond accordingly.", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "bobbywatson3": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34200", "title": "Accept interfaces without address family or method", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nInterfaces do not require address family or method to be set. Without this patch, this module cannot parse inventory files that don't have the address family or method set.\r\nfixes #30768 \r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\ninterfaces_file\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.2.0\r\n  config file = None\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.13 (default, Dec 22 2016, 09:22:15) [GCC 6.2.1 20160822]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n\r\nExample interfaces file that triggers bug:\r\n```\r\nauto lo\r\niface lo inet loopback\r\n\r\nauto eth0\r\niface eth0 inet dhcp\r\n\r\nauto br0\r\niface br0\r\n```\r\n\r\nError seen before change\r\n```\r\nTASK [Add interface option] ************************************************************************\r\nfatal: [172.x.x.x]: FAILED! => {\"changed\": false, \"module_stderr\": \"Shared connection to 172.x.x.x closed.\\r\\n\", \"module_stdout\": \"\\r\\nTraceback (most recent call last):\\r\\n  File \\\"/tmp/ansible_vhT1bm/ansible_module_interfaces_file.py\\\", line 385, in <module>\\r\\n    main()\\r\\n  File \\\"/tmp/ansible_vhT1bm/ansible_module_interfaces_file.py\\\", line 366, in main\\r\\n    lines, ifaces = read_interfaces_file(module, dest)\\r\\n  File \\\"/tmp/ansible_vhT1bm/ansible_module_interfaces_file.py\\\", line 177, in read_interfaces_file\\r\\n    return read_interfaces_lines(module, f)\\r\\n  File \\\"/tmp/ansible_vhT1bm/ansible_module_interfaces_file.py\\\", line 211, in read_interfaces_lines\\r\\n    iface_name, address_family_name, method_name = words[1:4]\\r\\nValueError: need more than 1 value to unpack\\r\\n\", \"msg\": \"MODULE FAILURE\", \"rc\": 0}\r\n```\r\nAfter change:\r\n```\r\nTASK [Add interface option] ************************************************************************\r\nok: [172.x.x.x]\r\n```\r\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "keithresar": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34169", "title": "Add want_ssh_ansible_host flag to foreman dynamic inventory", "body": "##### SUMMARY\r\nAdd flag to the foreman inventory script to optionally populate the `ansible_ssh_host` data field.\r\n\r\nThis permits connectivity via foreman defined IP address rather than requiring valid hostname resolution.\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\ninventory / foreman.py\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.1.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/resark/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, May  3 2017, 07:55:04) [GCC 4.8.5 20150623 (Red Hat 4.8.5-14)]\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\nEnabling the flag in `foreman.ini` (default is False which disables this behaviour):\r\n```\r\nwant_ansible_ssh_host = True\r\n```\r\nPopulates the `ansible_ssh_host` field in inventory output, like:\r\n```\r\n{\r\n  \"_meta\": {\r\n    \"hostvars\": {\r\n      \"my-hostname\": {\r\n        \"ansible_ssh_host\": \"192.168.0.101\",\r\n        ...\r\n      }\r\n  }\r\n ...\r\n}\r\n```\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "psykotox": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34146", "title": "locale_gen: Use /usr/share/i18n/SUPPORTED if exists", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nUse /usr/share/i18n/SUPPORTED if exists.\r\nMany distributions or distribution images (scaleway hosting provider by exemple) do not have a /etc/locale.gen file filled with all the available locales. It is preferable to use the /usr/share/i18n/SUPPORTED file when it is available.\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n \r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\nlocale_gen\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.3.0.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = Default w/o overrides\r\n  python version = 2.7.3 (default, Mar 13 2014, 11:03:55) [GCC 4.7.2]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "DaveOsment": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34145", "title": "Feature/Added support for China and US Gov To Lambda Module", "body": "##### SUMMARY\r\nThis update enables the Ansible 'Lambda' Module in Ansible 2.3 to support the creation of Lambda resources in the China and US Gov AWS Regions by catering for AWS ARN Partitions other than 'arn:aws'.\r\n\r\nIn summary, it adds support for the following\r\n\r\n- aws - Public AWS partition\r\n- aws-cn - AWS China\r\n- aws-us-gov - AWS GovCloud\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nWithout this update, it is not possible to create Lambda Functions in AWS China Regions or AWS GovCloud Regions\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "PikachuEXE": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34130", "title": "Backport fix in PR #30712 into 2.4", "body": "Backport fix in PR #30712 into 2.4\r\n\r\n##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\n[fix] issue #29886 - it misses oom_killer in host_config_params\r\nso it was never passed to docker API.\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\ndocker_container\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n  ansible python module location = /usr/local/Cellar/ansible/2.4.2.0_1/libexec/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.14 (default, Sep 25 2017, 09:53:22) [GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.37)]\r\n```\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "franciscogimeno": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34120", "title": "Added client certificate support to access K8S API", "body": "##### SUMMARY\r\nAdd client certificate support to access K8S API in kubernetes module.\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\nkubernetes\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.5\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nIt's intended for ansible 2.5\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "jappievw": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34114", "title": "mysql_user module not idempotent for MySQL 5.7.6 with special privilege REQUIRESSL", "body": "##### SUMMARY\r\nMySQL 5.7.6 and higher changed the way non privileges can be configured for a user. The `REQUIRE SSL` specification is not included any longer in the `SHOW GRANTS FOR ...` query.\r\n\r\nIn order to keep this module idempotent, I propose a few changes:\r\n- Changed special privilege `REQUIRESSL` to become a dedicated option `require_ssl` as it can't be treated as a privilege any longer.\r\n- Changed the version checking to become better readable.\r\n- Changed the implementation to verify whether SSL is required for a user.\r\n- Deprecated the `REQUIRESSL` special privilege, but remain backwards compatible.\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nmysql_user\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0 (feature/mysql_user_require_ssl_compatibility d54f9fcaa4) last updated 2017/12/20 22:22:19 (GMT +200)\r\n  config file = None\r\n  configured module search path = [u'/Users/jaspervanwanrooy/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/jaspervanwanrooy/development/ansible/lib/ansible\r\n  executable location = /Users/jaspervanwanrooy/development/ansible/bin/ansible\r\n  python version = 2.7.14 (default, Sep 25 2017, 09:53:22) [GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.37)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nSteps to reproduce the issue where the REQUIRESSL privilege is not idempotent:\r\n- Start the docker compose stack as shown below. It starts 7 MySQL/MariaDB database servers.\r\n- Run the playbook for the first time: `ansible-playbook -vv --inventory=ssl-test-inventory.yml ssl-test-playbook.yml`. It should give `changed=1` for all database servers. The first debug message shows the output of `SHOW GRANTS ...` which is currently used to validate whether the user requires ssl. The second one shows my proposed way to validate whether the user requires ssl.\r\n- Run the playbook again. All hosts have `changed=0`, except for host `mysql57`, which has `changed=1`. That's due to the way the require ssl state is validated.\r\n\r\n`docker-compose.yml` for quite a few different databases.\r\n```yaml\r\nversion: '3'\r\nservices:\r\n  mysql55:\r\n    image: mysql:5.5.58\r\n    ports:\r\n      - \"3305:3306\"\r\n    environment:\r\n      MYSQL_ROOT_PASSWORD: \"root\"\r\n  mysql56:\r\n    image: mysql:5.6.38\r\n    ports:\r\n      - \"3306:3306\"\r\n    environment:\r\n      MYSQL_ROOT_PASSWORD: \"root\"\r\n  mysql57:\r\n    image: mysql:5.7.20\r\n    ports:\r\n      - \"3307:3306\"\r\n    environment:\r\n      MYSQL_ROOT_PASSWORD: \"root\"\r\n  mariadb55:\r\n    image: mariadb:5.5.58\r\n    ports:\r\n      - \"3309:3306\"\r\n    environment:\r\n      MYSQL_ROOT_PASSWORD: \"root\"\r\n  mariadb100:\r\n    image: mariadb:10.0.33\r\n    ports:\r\n      - \"3310:3306\"\r\n    environment:\r\n      MYSQL_ROOT_PASSWORD: \"root\"\r\n  mariadb101:\r\n    image: mariadb:10.1.29\r\n    ports:\r\n      - \"3311:3306\"\r\n    environment:\r\n      MYSQL_ROOT_PASSWORD: \"root\"\r\n  mariadb102:\r\n    image: mariadb:10.2.11\r\n    ports:\r\n      - \"3312:3306\"\r\n    environment:\r\n      MYSQL_ROOT_PASSWORD: \"root\"\r\n```\r\n\r\n`ssl-test-inventory.yml`\r\n```yaml\r\nall:\r\n  hosts:\r\n    mysql55:\r\n      mysql_port: 3305\r\n    mysql56:\r\n      mysql_port: 3306\r\n    mysql57:\r\n      mysql_port: 3307\r\n    mariadb55:\r\n      mysql_port: 3309\r\n    mariadb100:\r\n      mysql_port: 3310\r\n    mariadb101:\r\n      mysql_port: 3311\r\n    mariadb102:\r\n      mysql_port: 3312\r\n```\r\n\r\n`ssl-test-playbook.yml`\r\n```yaml\r\n- hosts: all\r\n  connection: local\r\n  tasks:\r\n    - mysql_user:\r\n        name: testuser\r\n        password: testpassword\r\n        host: \"%\"\r\n        priv: \"*.*:SELECT,REQUIRESSL\"\r\n        login_host: \"127.0.0.1\"\r\n        login_user: \"root\"\r\n        login_password: \"root\"\r\n        login_port: \"{{ mysql_port }}\"\r\n        state: present\r\n    - command: \"mysql --host=127.0.0.1 --user=root --password=root --port={{ mysql_port }} -e \\\"SHOW GRANTS FOR 'testuser'@'%'\\\"\"\r\n      changed_when: False\r\n      register: users\r\n    - debug: var=users.stdout_lines\r\n    - command: \"mysql --host=127.0.0.1 --user=root --password=root --port={{ mysql_port }} -e \\\"SELECT Ssl_Type FROM mysql.user WHERE User='testuser' and Host='%'\\\"\"\r\n      changed_when: False\r\n      register: users\r\n    - debug: var=users.stdout_lines\r\n```\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "poettler-ric": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34111", "title": "Added allowerasing flag to dnf module", "body": "##### SUMMARY\r\nI just added another flag to the dnf module to let the user set whether he wants to allow replacing packages in order to fulfill the requested package installation. The default is still ```False```.\r\n\r\nThe motivation was to enable me to install libvirt and zfs (zfs on linux) since Fedora made zfs-fuse (no commits since Nov 2015) a dependency for libvirt.\r\nSee:\r\n- https://github.com/zfsonlinux/zfs/issues/6585\r\n- https://src.fedoraproject.org/rpms/libvirt/c/e5075407b1a7bd43755dfd33b9528bab60d1123e?branch=f26\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\ndnf module\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0 (allowerasing 15de290d74) last updated 2017/12/20 21:56:02 (GMT +200)\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/richi/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/richi/projects/ansible/lib/ansible\r\n  executable location = /home/richi/projects/ansible/bin/ansible\r\n  python version = 2.7.13 (default, Dec  1 2017, 09:21:53) [GCC 6.4.1 20170727 (Red Hat 6.4.1-1)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "pymag09": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34086", "title": "Add inventory cache", "body": "SUMMARY\r\n\r\nAlong with `bulk_load`, cache feature could be implemented as a last resort.\r\nCache introduce eventual consistency, therefor `cache_ttl` have to be as short as possible (by default 30 seconds).\r\nBasically it makes sense in environment where central ansible server executes consul_io.py very often, multiple times during `cache_ttl`. \r\n\r\nSince majority of time is spent on network communication there are other ways how to speed up.\r\nFrom this point of view, current PR is, kide of, controversial. Feel free to decline it if you share this point of view.\r\n\r\nCache mechanism is based on sessions in consul. It allows to create temporary keys, which is perfect for cache invalidation.\r\nISSUE TYPE\r\n\r\n    Feature Pull Request\r\n\r\n\r\nCOMPONENT NAME\r\n    \r\n    dynamic inventory. consul_io.py", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "Colins-Git": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34071", "title": "Update nmcli.py to support creation and modification of bridge and bridge slaves", "body": "Support for creation and modification of bridge and bridge slaves for nmcli\r\nAlso fix #31737\r\n\r\n##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nSupport for creation and modification of bridge and bridge slaves for nmcli\r\nAlso fix #31737\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Feature Pull Request\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\nnmcli\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n  config file = /home/ansible/Ansible/ansible.cfg\r\n  configured module search path = [u'/home/ansible/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.14 (default, Nov  3 2017, 10:55:25) [GCC 7.2.1 20170915 (Red Hat 7.2.1-2)]\r\n\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "robert-bo-davis": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34051", "title": "Use an appropriate regex to sanitize hostname.", "body": "##### SUMMARY\r\nFixes #21167\r\n\r\nWhen I tried to use an instance tag in ec2 containing the FQDN of my hosts as a custom hostname field in awx by setting the `hostname_variable = tag_Name` variable, my hostnames were mangled. I dug into the problem and found this block. \r\n\r\nValid characters for FQDNs are `[a-z0-9\\.\\-]`. The `to_safe()` method replaces the valid characters `.` and `-` with the invalid character `_` which causes breakage.\r\n\r\nMy solution uses a corrected regex to sanitize hostname.\r\n\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\ncontrib/inventory/ec2.py\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.1.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Aug  4 2017, 00:39:18) [GCC 4.8.5 20150623 (Red Hat 4.8.5-16)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nN/A", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "pmargara": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34048", "title": "cloud:ovirt:ovirt_vms.py:  Added 'quota_id','sso', 'boot_menu', 'usb_support', 'serial_console' fields to ovirt_vms module", "body": "##### SUMMARY\r\n- By adding a 'quota_id' parameter in the ovirt_vms module the administrator could now create VMs by assigning them to a specific quota instead of on the default one, this is very useful when the quota mode of ovirt cluster is set to enforced and every users (or group of) have a specific quota to use.\r\n\r\n- By adding a 'sso' parameter in the ovirt_vms module the administrator could now specify if SSO should be enabled or disabled.\r\n\r\n- By adding a 'boot_menu' parameter in the ovirt_vms module the administrator could now specify if the boot menu should be enabled or disabled.\r\n\r\n- By adding a 'usb_support' parameter in the ovirt_vms module the administrator could now specify if the USB support should be enabled or disabled.\r\n\r\n- By adding a 'serial_console' parameter in the ovirt_vms module the administrator could now specify if VirtIO serial console should be enabled or disabled.\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\n- lib/ansible/modules/cloud/ovirt/ovirt_vms.py\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0 (devel d859fdb3a6) last updated 2017/12/19 17:59:51 (GMT +200)\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/paolomargara/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/paolomargara/workspace-neon/ansible-mrg/lib/ansible\r\n  executable location = /home/paolomargara/workspace-neon/ansible-mrg/bin/ansible\r\n  python version = 2.7.12 (default, Nov 20 2017, 18:23:56) [GCC 5.4.0 20160609]\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\nExample: defining a specific quota for a VM\r\n```\r\n- ovirt_quotas_facts:\r\n    data_center: Default\r\n    name: myquota\r\n- ovirt_vms:\r\n    sso: False\r\n    boot_menu: True\r\n    usb_support: True\r\n    serial_console: True\r\n    quota_id: \"{{ ovirt_quotas[0]['id'] }}\"\r\n```", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "zeten30": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34033", "title": "Allow to specify different units for lvg pesize (physical extent size)", "body": "##### SUMMARY\r\nAllow to specify different units for lvg pesize (physical extent size)\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nmodules/system/lvg.py\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/brq/mzink/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.14 (default, Dec 11 2017, 14:52:53) [GCC 7.2.1 20170915 (Red Hat 7.2.1-2)]\r\n```", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "t794104": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34030", "title": "Added icinga service module", "body": "SUMMARY\r\n\r\nThis module (icinga2_service) allows the use of the Icinga2 REST API (https://www.icinga.com/docs/icinga2/latest/doc/12-icinga2-api/) to manage the services of a host in Icinga2.\r\n\r\nISSUE TYPE\r\n\r\n    New Module Pull Request\r\n\r\nCOMPONENT NAME\r\n\r\n    icinga2_service\r\n\r\nANSIBLE VERSION\r\n\r\n    2.5.0\r\n\r\nADDITIONAL INFORMATION\r\n\r\nmodules done\r\n - icinga2_host (manage host to monitor)\r\n\r\nmodules to follow are\r\n - icinga2_service (manage services to monitor)\r\n\r\nAll 3 modules together will make it possible for a playbook to make sure the host(s) are monitored, they are down while running the playbook (no alarms are send) and manage the services that need to be monitored.\r\n\r\nPlease let me know if I can improve / help this along in any way.", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "5ghz": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34027", "title": "Add support direct rule", "body": "##### SUMMARY\r\nAdd support Direct rule operations add/remove\r\nOperation syntax\r\n Add Chain\r\n```\r\n    -  firewalld:\r\n          chain: sshg\r\n          fw_family: ipv4\r\n          table: filter\r\n          permanent: true\r\n          state: enabled\r\n```\r\nAdd rule to chain\r\n```\r\n    -  firewalld:\r\n          chain: sshg\r\n          fw_family: ipv4\r\n          table: filter\r\n          direct_rule: '-m tcp -p tcp --dport 332 -j ACCEPT'\r\n          permanent: true\r\n          state: enabled\r\n```\r\nRemove rule from chain\r\n```\r\n    - firewalld:\r\n          chain: sshg\r\n          fw_family: ipv4\r\n          table: filter\r\n          direct_rule: '-m tcp -p tcp --dport 332 -j ACCEPT'\r\n          permanent: true \r\n          state: disabled\r\n```\r\nRemove chain\r\n```\r\n    -  firewalld:\r\n          chain: sshg\r\n          fw_family: ipv4\r\n          table: filter\r\n          permanent: true\r\n```\r\n\r\nAdd passthrough\r\n```\r\n    - firewalld:\r\n          fw_family: ipv4\r\n          direct_rule: '-I FORWARD -o bridge3 -j ACCEPT'\r\n          permanent: true\r\n          state: enabled\r\n```\r\nRemove passthrough\r\n```\r\n    - firewalld:\r\n          fw_family: ipv4\r\n          direct_rule: '-I FORWARD -o bridge3 -j ACCEPT'\r\n          permanent: true\r\n          state: disabled\r\n```\r\n\r\nContact: pershin87@yandex.ru\r\n##### ISSUE TYPE\r\nFeature Pull Request\r\n\r\n##### COMPONENT NAME\r\nfirewalld module\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/vpershin/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.12 (default, Nov 20 2017, 18:23:56) [GCC 5.4.0 20160609]\r\n```\r\n\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "BR0kEN-": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34005", "title": "Fixes #24864 installing plugin dependencies when \"state=latest\" or none", "body": "##### SUMMARY\r\n\r\nThe check for the `version=latest` was missing. The `state=latest` leads to an impossibility to have something, except the `version=latest`.\r\n\r\n##### ISSUE TYPE\r\nBugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\njenkins_plugin\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n(venv) BR0kEN@Macintosh:~/ansible (issue-24864) $ ansible --version\r\nansible 2.5.0 (issue-24864 afcd305e9e) last updated 2017/12/18 23:40:33 (GMT +400)\r\n  config file = None\r\n  configured module search path = [u'/Users/BR0kEN/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/BR0kEN/ansible/lib/ansible\r\n  executable location = /Users/BR0kEN/ansible/bin/ansible\r\n  python version = 2.7.14 (default, Sep 25 2017, 09:53:22) [GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.37)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nhttps://github.com/ansible/ansible/issues/24864", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "danieljaouen": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/34002", "title": "Homebrew Cask: Add accept_external_apps option (Fixes #33975)", "body": "##### SUMMARY\r\nHomebrew Cask: Add accept_external_apps option (Fixes #33975)\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nlib/ansible/modules/packaging/os/homebrew_cask.py\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n\u00b1 ansible --version\r\nansible 2.5.0 (homebrew_cask_external_apps 77a381372d) last updated 2017/12/18 12:51:38 (GMT -400)\r\n  config file = /Users/dan/.ansible.cfg\r\n  configured module search path = ['/Users/dan/src/ansible/library']\r\n  ansible python module location = /Users/dan/src/ansible/lib/ansible\r\n  executable location = /Users/dan/src/ansible/bin/ansible\r\n  python version = 3.6.3 (default, Oct 21 2017, 11:37:52) [GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.42.1)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nN/A", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "pneerincx": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/33998", "title": "Bugfix for #17492: Do not prepend PWD when path is in form user@server:path or server:path", "body": "##### SUMMARY\r\nThis fixes #17492. There are several instances where the _get_absolute_path function is called. This should only happen for relative paths on a local file system and hence\r\n * not for paths on a remote server\r\n * nor for absolute paths.\r\nIn some cases the code in the synchronize.py plugin would check for presence of a colon (path on remote server) and if the path starts with a slash forward (absolute path). In two cases the code would only check for absolute paths, but failed to check for remote paths. This results in ${PWD} getting prepended to the remote path leading to something like /path/to/PWD/user@server:/path/to/what/needs/to/be/synced. \r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nsynchronize plugin\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.2.0\r\n```\r\n##### ADDITIONAL INFORMATION\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "dixudx": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/33986", "title": "add new fact \"goarch\"", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n`Golang` is widely used. The value of `GOARCH` is different from `ansible_architecture`. Currently `ansible` does not provide a way to get `GOARCH`, which is quite useful when deploying/downloading golang-related applications.\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module, plugin, module or task -->\r\nAdd new fact `ansible_goarch`\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "gurch101": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/33984", "title": "Add Digital Ocean Droplet module", "body": "##### SUMMARY\r\nCreate a new digital ocean droplet API to remove dopy dependency.\r\nAlso enable all digital ocean v2 parameters for droplet creation.\r\n\r\n##### ISSUE TYPE\r\n - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\ndigital_ocean_droplet\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.1.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/gurch/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.12 (default, Nov 20 2017, 18:23:56) [GCC 5.4.0 20160609]\r\n```\r\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "redmanz": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/33978", "title": "win_firewall options added", "body": "##### SUMMARY\r\nAdded additional functionality to the win_firewall module:\r\nUpdated the module to use more of the PowerShell Set-NetFirewallProfile Parameters rather than just enable or disable by firewall profile. \r\n\r\nExtra parameters added:\r\n\r\n- defaultinboundaction \r\n- defaultoutboundaction\r\n-  allowinboundrules\r\n- allowlocalfirewallrules\r\n- allowlocalipsecrules\r\n- allowuserapps\r\n- allowuserports\r\n- allowunicastresponsetomulticast\r\n- notifyonlisten\r\n- enablestealthmodeforipsec\r\n- logfilename\r\n- logmaxsizekilobytes\r\n- logallowed\r\n- logblocked\r\n- logignored\r\n\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\n win_firewall \r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.1.0\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n\r\nAdded extra functionally to the module to behave like the powershell Set-NetFirewallProfile cmdlet \r\n\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n#!powershell\t\t #!powershell\r\n # This file is part of Ansible\t\t # This file is part of Ansible\r\n \t\t \r\n+# Copyright 2017, Jamie Thompson <jamiet@datacom.co.nz>\r\n # Copyright 2017, Michael Eaton <meaton@iforium.com>\t\t # Copyright 2017, Michael Eaton <meaton@iforium.com>\r\n #\t\t #\r\n # Ansible is free software: you can redistribute it and/or modify\t\t # Ansible is free software: you can redistribute it and/or modify\r\n @@ -28,51 +29,126 @@ $check_mode = Get-AnsibleParam -obj $params -name \"_ansible_check_mode\" -type \"b\r\n $profiles = Get-AnsibleParam -obj $params -name \"profiles\" -type \"list\" -default @(\"Domain\", \"Private\", \"Public\")\t\t $profiles = Get-AnsibleParam -obj $params -name \"profiles\" -type \"list\" -default @(\"Domain\", \"Private\", \"Public\")\r\n $state = Get-AnsibleParam -obj $params -name \"state\" -type \"str\" -failifempty $true -validateset 'disabled','enabled'\t\t $state = Get-AnsibleParam -obj $params -name \"state\" -type \"str\" -failifempty $true -validateset 'disabled','enabled'\r\n \t\t \r\n+$DefaultInboundAction = Get-AnsibleParam -obj $params -name \"defaultinboundaction\" -validateset 'block','allow','notconfigured' -failifempty $false\r\n+$DefaultOutboundAction = Get-AnsibleParam -obj $params -name \"defaultoutboundaction\" -validateset 'block','allow','notconfigured' -failifempty $false\r\n+$AllowInboundRules = Get-AnsibleParam -obj $params -name \"allowinboundrules\" -validateset 'true','false','notconfigured' -failifempty $false\r\n+$AllowLocalFirewallRules = Get-AnsibleParam -obj $params -name \"allowlocalfirewallrules\" -validateset 'true','false','notconfigured' -failifempty $false\r\n+$AllowLocalIPsecRules = Get-AnsibleParam -obj $params -name \"allowlocalipsecrules\" -validateset 'true','false','notconfigured' -failifempty $false\r\n+$AllowUserApps = Get-AnsibleParam -obj $params -name \"allowuserapps\" -validateset 'true','false','notconfigured' -failifempty $false\r\n+$AllowUserPorts = Get-AnsibleParam -obj $params -name \"allowuserports\" -validateset 'true','false','notconfigured' -failifempty $false\r\n+$AllowUnicastResponseToMulticast = Get-AnsibleParam -obj $params -name \"allowunicastresponsetomulticast\" -validateset 'true','false','notconfigured' -failifempty $false\r\n+$NotifyOnListen = Get-AnsibleParam -obj $params -name \"notifyonlisten\" -validateset 'true','false','notconfigured' -failifempty $false\r\n+$EnableStealthModeForIPsec = Get-AnsibleParam -obj $params -name \"enablestealthmodeforipsec\" -validateset 'true','false','notconfigured' -failifempty $false\r\n+$LogFileName = Get-AnsibleParam -obj $params -name \"logfilename\" -failifempty $false -type \"str\"\r\n+$LogMaxSizeKilobytes = Get-AnsibleParam -obj $params -name \"logmaxsizekilobytes\" -failifempty $false\r\n+$LogAllowed = Get-AnsibleParam -obj $params -name \"logallowed\" -validateset 'true','false','notconfigured' -failifempty $false\r\n+$LogBlocked = Get-AnsibleParam -obj $params -name \"logblocked\" -validateset 'true','false','notconfigured' -failifempty $false\r\n+$LogIgnored = Get-AnsibleParam -obj $params -name \"logignored\" -validateset 'true','false','notconfigured' -failifempty $false\r\n+#$DisabledInterfaceAliases = $null\r\n+#$PolicyStore = $null\r\n+\r\n+# Firewall Options hashtable\r\n+$NetFirewallProfile =\r\n+@([pscustomobject]@{option=\"DefaultInboundAction\";value=$DefaultInboundAction;DataType=\"GpoBoolean\"},\r\n+[pscustomobject]@{option=\"DefaultOutboundAction\";value=$DefaultOutboundAction;DataType=\"GpoBoolean\"},\r\n+[pscustomobject]@{option=\"AllowInboundRules\";value=$AllowInboundRules;DataType=\"GpoBoolean\"},\r\n+[pscustomobject]@{option=\"AllowLocalFirewallRules\";value=$AllowLocalFirewallRules;DataType=\"GpoBoolean\"},\r\n+[pscustomobject]@{option=\"AllowLocalIPsecRules\";value=$AllowLocalIPsecRules;DataType=\"GpoBoolean\"},\r\n+[pscustomobject]@{option=\"AllowUserApps\";value=$AllowUserApps;DataType=\"GpoBoolean\"},\r\n+[pscustomobject]@{option=\"AllowUserPorts\";value=$AllowUserPorts;DataType=\"GpoBoolean\"},\r\n+[pscustomobject]@{option=\"AllowUnicastResponseToMulticast\";value=$AllowUnicastResponseToMulticast;DataType=\"GpoBoolean\"},\r\n+[pscustomobject]@{option=\"NotifyOnListen\";value=$NotifyOnListen;DataType=\"GpoBoolean\"},\r\n+[pscustomobject]@{option=\"EnableStealthModeForIPsec\";value=$EnableStealthModeForIPsec;DataType=\"GpoBoolean\"},\r\n+[pscustomobject]@{option=\"LogFileName\";value=$LogFileName;DataType=\"String\"},\r\n+[pscustomobject]@{option=\"LogMaxSizeKilobytes\";value=$LogMaxSizeKilobytes;DataType=\"UInt64\"},\r\n+[pscustomobject]@{option=\"LogAllowed\";value=$LogAllowed;DataType=\"GpoBoolean\"},\r\n+[pscustomobject]@{option=\"LogBlocked\";value=$LogBlocked;DataType=\"GpoBoolean\"},\r\n+[pscustomobject]@{option=\"LogIgnored\";value=$LogIgnored;DataType=\"String\"},\r\n+[pscustomobject]@{option=\"DisabledInterfaceAliases\";value=$DisabledInterfaceAliases;DataType=\"String\"},\r\n+[pscustomobject]@{option=\"Enabled\";value=$state;DataType=\"GpoBoolean\"},\r\n+[pscustomobject]@{option=\"PolicyStore\";value=$PolicyStore;DataType=\"String\"}\r\n+)\r\n+\r\n+# Create hash table of required settings\r\n+ $settings = $null\r\n+ $settings = @{}\r\n+\r\n+ # Add String values to the settings hashtable\r\n+  foreach ($option in $NetFirewallProfile | where {$_.value -ne $null -and $_.DataType -eq \"String\"}) {\r\n+   $settings.Add(\"$($option.option)\", \"$($option.value)\")\r\n+    }\r\n+\r\n+# Add GPOBoolean values to the settings hashtable (really just strings in this case) should use [Microsoft.PowerShell.Cmdletization.GeneratedTypes.NetSecurity.GpoBoolean]\r\n+  foreach ($option in $NetFirewallProfile | where {$_.value -ne $null -and $_.DataType -eq \"GpoBoolean\"}) {\r\n+       if($option.value -eq 'enabled') {\r\n+             $settings.Add(\"$($option.option)\", \"true\")\r\n+    } elseif($option.value -eq 'disabled') {\r\n+             $settings.Add(\"$($option.option)\", \"false\")\r\n+    } else{\r\n+              $settings.Add(\"$($option.option)\", \"$($option.value)\")\r\n+              }\r\n+          }\r\n+# Add uint64 values to the settings hashtable\r\n+  foreach ($option in $NetFirewallProfile | where {$_.value -ne $null -and $_.DataType -eq \"UInt64\"}) {\r\n+   $settings.Add(\"$($option.option)\", ([uint64]::Parse($option.value)))\r\n+    }\r\n+\r\n $result = @{\t\t $result = @{\r\n     changed = $false\t\t     changed = $false\r\n     profiles = $profiles\t\t     profiles = $profiles\r\n     state = $state\t\t     state = $state\r\n }\t\t }\r\n \t\t \r\n if ($PSVersionTable.PSVersion -lt [Version]\"5.0\") {\t\t if ($PSVersionTable.PSVersion -lt [Version]\"5.0\") {\r\n-    Fail-Json $result \"win_firewall requires Windows Management Framework 5 or higher.\"\t\t+     \"win_firewall requires Windows Management Framework 5 or higher.\"\r\n }\t\t }\r\n \t\t \r\n Try {\t\t Try {\r\n \t\t \r\n     ForEach ($profile in $firewall_profiles) {\t\t     ForEach ($profile in $firewall_profiles) {\r\n+        # build hashtable to store only the settings that actually need changing based on Firewall Profile\r\n+         $splat += @{\r\n+              $profile = @{}\r\n+                 }\r\n+\r\n+        # Get current firewall profile state\r\n+        $currentstate = (Get-NetFirewallProfile -Name $profile)\r\n+        $changerequired = 0\r\n \t\t \r\n-        $currentstate = (Get-NetFirewallProfile -Name $profile).Enabled\t\t\r\n         $result.$profile = @{\t\t         $result.$profile = @{\r\n-            enabled = ($currentstate -eq 1)\t\t\r\n             considered = ($profiles -contains $profile)\t\t             considered = ($profiles -contains $profile)\r\n-            currentstate = $currentstate\t\t+            currentstate = $currentstate.Enabled\r\n-        }\t\t+            changerequired = $changerequired\r\n-\t\t\r\n-        if ($profiles -notcontains $profile) {\t\t\r\n-            continue\t\t\r\n         }\t\t         }\r\n \t\t \r\n-        if ($state -eq 'enabled') {\t\t+         ForEach ($name in $settings.Keys) {\r\n-\t\t+                  $result.$profile.add( \"$($name)\",(Get-Variable -name currentstate).value.$($name))\r\n-            if ($currentstate -eq $false) {\t\t+                  if( (Get-Variable -name currentstate).value.$($name) -eq $settings.$name){\r\n-                Set-NetFirewallProfile -name $profile -Enabled true -WhatIf:$check_mode\t\t+                     \"Already set\"}\r\n-                $result.changed = $true\t\t+                else{\r\n-                $result.$profile.enabled = $true\t\t+                     # Accumulate the settings that require changing\r\n-            }\t\t+                     $splat.$profile.add(\"$($name)\",$settings.$name)\r\n-\t\t+                     # Flag a change is required\r\n-        } else {\t\t+                     $result.$profile.changerequired++ }\r\n-\t\t+           }\r\n-            if ($currentstate -eq $true) {\t\t+\r\n-                Set-NetFirewallProfile -name $profile -Enabled false -WhatIf:$check_mode\t\t+          # only action the firewall profiles requested\r\n-                $result.changed = $true\t\t+          if ($profiles -notcontains $profile) {\r\n-                $result.$profile.enabled = $false\t\t+              continue\r\n-            }\t\t+              }\r\n-\t\t+\r\n-        }\t\t+                  if ($result.$profile.changerequired -ge '1'){\r\n+                  $splat = $splat.$profile\r\n+                      Set-NetFirewallProfile -name $profile @splat -WhatIf:$check_mode\r\n+                      $result.changed = $true\r\n+                      \"Changed\"\r\n+                  } else {\r\n+                  \"No Change\"\r\n+                  }\r\n     }\t\t     }\r\n-} Catch {\t\t+\r\n-    Fail-Json $result \"an error occurred when attempting to change firewall status for profile $profile $($_.Exception.Message)\"\t\t+      } Catch {\r\n+                \"an error occurred when attempting to change firewall status for profile $profile $($_.Exception.Message)\"\r\n }\t\t }\r\n \t\t \r\n Exit-Json $result\t\t Exit-Json $result\r\nView   \r\n120  lib/ansible/modules/windows/win_firewall.py\r\n@@ -1,6 +1,7 @@\r\n #!/usr/bin/python\t\t #!/usr/bin/python\r\n # -*- coding: utf-8 -*-\t\t # -*- coding: utf-8 -*-\r\n \t\t \r\n+# Copyright 2017, Jamie Thompson <jamiet@datacom.co.nz>\r\n # (c) 2017, Michael Eaton <meaton@iforium.com>\t\t # (c) 2017, Michael Eaton <meaton@iforium.com>\r\n #\t\t #\r\n # This file is part of Ansible\t\t # This file is part of Ansible\r\n @@ -21,7 +22,7 @@\r\n # this is a windows documentation stub.  actual code lives in the .ps1\t\t # this is a windows documentation stub.  actual code lives in the .ps1\r\n # file of the same name\t\t # file of the same name\r\n \t\t \r\n-ANSIBLE_METADATA = {'metadata_version': '1.1',\t\t+ANSIBLE_METADATA = {'metadata_version': '1.2',\r\n                     'status': ['preview'],\t\t                     'status': ['preview'],\r\n                     'supported_by': 'community'}\t\t                     'supported_by': 'community'}\r\n \t\t \r\n @@ -47,6 +48,104 @@\r\n     choices:\t\t     choices:\r\n     - enabled\t\t     - enabled\r\n     - disabled\t\t     - disabled\r\n+  defaultinboundaction:\r\n+    description:\r\n+    - Specifies how to filter inbound traffic.\r\n+    choices:\r\n+    - block\r\n+    - allow\r\n+    - notconfigured\r\n+  defaultoutboundaction:\r\n+    description:\r\n+    - Specifies how to filter outbound traffic.\r\n+    choices:\r\n+    - block\r\n+    - allow\r\n+    - notconfigured\r\n+  allowinboundrules:\r\n+    description:\r\n+    - Specifies that the firewall blocks inbound traffic.\r\n+    choices:\r\n+    - true\r\n+    - false\r\n+    - notconfigured\r\n+  allowlocalfirewallrules:\r\n+    description:\r\n+    - Specifies that the local firewall rules should be merged into the effective policy along with Group Policy settings.\r\n+    choices:\r\n+    - true\r\n+    - false\r\n+    - notconfigured\r\n+  allowlocalipsecrules:\r\n+    description:\r\n+    - Specifies that the local IPsec rules should be merged into the effective policy along with Group Policy settings.\r\n+    choices:\r\n+    - true\r\n+    - false\r\n+    - notconfigured\r\n+  allowuserapps:\r\n+    description:\r\n+    - Specifies that the local IPsec rules should be merged into the effective policy along with Group Policy settings.\r\n+    choices:\r\n+    - true\r\n+    - false\r\n+    - notconfigured\r\n+  allowuserports:\r\n+    description:\r\n+    - Determines how the Windows XP policy is applied to the newer Windows Firewall. Defines how to use the policy merge field for older operating systems.\r\n+    choices:\r\n+    - true\r\n+    - false\r\n+    - notconfigured\r\n+  allowunicastresponsetomulticast:\r\n+    description:\r\n+    - Allows unicast responses to multi-cast traffic.\r\n+    choices:\r\n+    - true\r\n+    - false\r\n+    - notconfigured\r\n+  notifyonlisten:\r\n+    description:\r\n+    - Allows the notification of listening for inbound connections by a service.\r\n+    choices:\r\n+    - true\r\n+    - false\r\n+    - notconfigured\r\n+  enablestealthmodeforipsec:\r\n+    description:\r\n+    - Enables stealth mode for IPsec traffic.\r\n+    choices:\r\n+    - true\r\n+    - false\r\n+    - notconfigured\r\n+  logfilename:\r\n+    description:\r\n+    - Specifies the path and filename of the file to which Windows Server writes log entries.\r\n+    - '%windir%\\system32\\logfiles\\firewall\\pfirewall.log'\r\n+  logmaxsizekilobytes:\r\n+    description:\r\n+    - Specifies the maximum file size of the log, in kilobytes. The acceptable values for this parameter are: 1 through 32767\r\n+  logallowed:\r\n+    description:\r\n+    - Specifies how to log the allowed packets in the location specified by the LogFileName parameter.\r\n+    choices:\r\n+    - true\r\n+    - false\r\n+    - notconfigured\r\n+  logblocked:\r\n+    description:\r\n+    - Specifies how to log the dropped packets in the location specified by the LogFileName parameter.\r\n+    choices:\r\n+    - true\r\n+    - false\r\n+    - notconfigured\r\n+  logignored:\r\n+    description:\r\n+    - Specifies how to log the ignored packets in the location specified by the LogFileName parameter.\r\n+    choices:\r\n+    - true\r\n+    - false\r\n+    - notconfigured\r\n requirements:\t\t requirements:\r\n   - This module requires Windows Management Framework 5 or later.\t\t   - This module requires Windows Management Framework 5 or later.\r\n author: Michael Eaton (@if-meaton)\t\t author: Michael Eaton (@if-meaton)\r\n @@ -68,6 +167,20 @@\r\n     profiles:\t\t     profiles:\r\n     - Domain\t\t     - Domain\r\n   tags: disable_firewall\t\t   tags: disable_firewall\r\n+\r\n+- name: Apply Domain Firewall settings\r\n+  win_firewall:\r\n+    profiles: Domain\r\n+    state: enabled\r\n+    defaultinboundaction: block\r\n+    defaultoutboundaction: allow\r\n+    notifyonlisten: true\r\n+    allowlocalfirewallrules: true\r\n+    allowlocalipsecrules: true\r\n+    logblocked: true\r\n+    logallowed: true\r\n+    logmaxsizekilobytes: 16364\r\n+    logfilename: \"%systemroot%\\\\system32\\\\logfiles\\\\firewall\\\\domainfw.log\"\r\n '''\t\t '''\r\n \t\t \r\n RETURN = r'''\t\t RETURN = r'''\r\n @@ -86,4 +199,9 @@\r\n     returned: always\t\t     returned: always\r\n     type: list\t\t     type: list\r\n     sample: enabled\t\t     sample: enabled\r\n+msg:\r\n+    description: Possible error message on failure\r\n+    returned: failed\r\n+    type: string\r\n+    sample: \"an error occurred when attempting to change firewall status for profile <profilename>\"\r\n```\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "hhassoun": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/33977", "title": "Allow propagation policy as a param to DELETE requests", "body": "##### SUMMARY\r\n\r\nThe kubernetes.py module doesn't not currently support a parameter for propagation policy on DELETE requests.\r\nThe Kuberenetes API has different default policies for different objects.\r\n\r\nThis change adds a parameter for a propagation policy on delete requests. Namely, deployments default policy as of Kubernetes version 1.7 is to leave orphan replicasets and pods. This change will permit passing a policy parameter to cascade the delete request onto child objects.\r\n \r\n##### ISSUE TYPE\r\n\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\n\r\nlib/ansible/modules/clustering/kubernetes.py\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n2.4\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n\r\nPlease refer to https://kubernetes.io/docs/concepts/workloads/controllers/garbage-collection/ for more information\r\n\r\n```\r\nBefore this change, object deletion tasks uses the default K8S propagation delete policy.\r\n\r\nAfter this change, an optional parameter can be passed to the API to allow the overriding of the default propagation policy. Refer to the updated module document for additional details.\r\n\r\n```", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "fazlearefin": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/33938", "title": "Update playbooks_filters.rst", "body": "Add instructions on using custom character in comment filter\r\n\r\n##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Docs Pull Request\r\n\r\n##### COMPONENT NAME\r\nplaybooks_filters.rst\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\n\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "k0ste": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/33937", "title": "setup: facts: linux: respect partitions if device is nvme, cciss or loop.", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\n\r\nCurrent match don't work with \"non-standard\" devices like NVMe.\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module/plugin/module/task -->\r\n\r\nsetup\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.3.2.0\r\n  config file = /home/k0ste/.ansible.cfg\r\n  configured module search path = [u'/home/k0ste/ansible/my_modules', u'/home/k0ste/ceph-ansible/library']\r\n  python version = 2.7.14 (default, Sep 20 2017, 01:25:59) [GCC 7.2.0]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n\r\nBefore:\r\n\r\n```json\r\n        \"ansible_devices\": {\r\n            \"nvme0n1\": {\r\n                \"holders\": [], \r\n                \"host\": \"Non-Volatile memory controller: Lite-On Technology Corporation M8Pe Series NVMe SSD (rev 01)\", \r\n                \"model\": \"PLEXTOR PX-128M8PeY\", \r\n                \"partitions\": {}, \r\n                \"removable\": \"0\", \r\n                \"rotational\": \"0\", \r\n                \"sas_address\": null, \r\n                \"sas_device_handle\": null, \r\n                \"scheduler_mode\": \"\", \r\n                \"sectors\": \"250069680\", \r\n                \"sectorsize\": \"512\", \r\n                \"size\": \"119.24 GB\", \r\n                \"support_discard\": \"512\", \r\n                \"vendor\": null\r\n            }, \r\n            \"nvme1n1\": {\r\n                \"holders\": [], \r\n                \"host\": \"Non-Volatile memory controller: Intel Corporation PCIe Data Center SSD (rev 01)\", \r\n                \"model\": \"INTEL SSDPEDMD400G4\", \r\n                \"partitions\": {}, \r\n                \"removable\": \"0\", \r\n                \"rotational\": \"0\", \r\n                \"sas_address\": null, \r\n                \"sas_device_handle\": null, \r\n                \"scheduler_mode\": \"\", \r\n                \"sectors\": \"781422768\", \r\n                \"sectorsize\": \"512\", \r\n                \"size\": \"372.61 GB\", \r\n                \"support_discard\": \"512\", \r\n                \"vendor\": null\r\n            }, \r\n            \"nvme2n1\": {\r\n                \"holders\": [], \r\n                \"host\": \"Non-Volatile memory controller: Lite-On Technology Corporation M8Pe Series NVMe SSD (rev 01)\", \r\n                \"model\": \"PLEXTOR PX-1TM8PeY\", \r\n                \"partitions\": {}, \r\n                \"removable\": \"0\", \r\n                \"rotational\": \"0\", \r\n                \"sas_address\": null, \r\n                \"sas_device_handle\": null, \r\n                \"scheduler_mode\": \"\", \r\n                \"sectors\": \"2000409264\", \r\n                \"sectorsize\": \"512\", \r\n                \"size\": \"953.87 GB\", \r\n                \"support_discard\": \"512\", \r\n                \"vendor\": null\r\n            }, \r\n```\r\n\r\nAfter:\r\n\r\n```json\r\n        \"ansible_devices\": {\r\n            \"nvme0n1\": {\r\n                \"holders\": [], \r\n                \"host\": \"Non-Volatile memory controller: Lite-On Technology Corporation M8Pe Series NVMe SSD (rev 01)\", \r\n                \"model\": \"PLEXTOR PX-128M8PeY\", \r\n                \"partitions\": {\r\n                    \"nvme0n1p1\": {\r\n                        \"holders\": [], \r\n                        \"sectors\": \"58720256\", \r\n                        \"sectorsize\": 512, \r\n                        \"size\": \"28.00 GB\", \r\n                        \"start\": \"2048\", \r\n                        \"uuid\": null\r\n                    }, \r\n                    \"nvme0n1p2\": {\r\n                        \"holders\": [], \r\n                        \"sectors\": \"2097152\", \r\n                        \"sectorsize\": 512, \r\n                        \"size\": \"1.00 GB\", \r\n                        \"start\": \"58722304\", \r\n                        \"uuid\": null\r\n                    }, \r\n                    \"nvme0n1p3\": {\r\n                        \"holders\": [], \r\n                        \"sectors\": \"58720256\", \r\n                        \"sectorsize\": 512, \r\n                        \"size\": \"28.00 GB\", \r\n                        \"start\": \"60819456\", \r\n                        \"uuid\": null\r\n                    }, \r\n                    \"nvme0n1p4\": {\r\n                        \"holders\": [], \r\n                        \"sectors\": \"2097152\", \r\n                        \"sectorsize\": 512, \r\n                        \"size\": \"1.00 GB\", \r\n                        \"start\": \"119539712\", \r\n                        \"uuid\": null\r\n                    }, \r\n                    \"nvme0n1p5\": {\r\n                        \"holders\": [], \r\n                        \"sectors\": \"58720256\", \r\n                        \"sectorsize\": 512, \r\n                        \"size\": \"28.00 GB\", \r\n                        \"start\": \"121636864\", \r\n                        \"uuid\": null\r\n                    }, \r\n                    \"nvme0n1p6\": {\r\n                        \"holders\": [], \r\n                        \"sectors\": \"2097152\", \r\n                        \"sectorsize\": 512, \r\n                        \"size\": \"1.00 GB\", \r\n                        \"start\": \"180357120\", \r\n                        \"uuid\": null\r\n                    }, \r\n                    \"nvme0n1p7\": {\r\n                        \"holders\": [], \r\n                        \"sectors\": \"58720256\", \r\n                        \"sectorsize\": 512, \r\n                        \"size\": \"28.00 GB\", \r\n                        \"start\": \"182454272\", \r\n                        \"uuid\": null\r\n                    }, \r\n                    \"nvme0n1p8\": {\r\n                        \"holders\": [], \r\n                        \"sectors\": \"2097152\", \r\n                        \"sectorsize\": 512, \r\n                        \"size\": \"1.00 GB\", \r\n                        \"start\": \"241174528\", \r\n                        \"uuid\": null\r\n                    }\r\n                }, \r\n                \"removable\": \"0\", \r\n                \"rotational\": \"0\", \r\n                \"sas_address\": null, \r\n                \"sas_device_handle\": null, \r\n                \"scheduler_mode\": \"\", \r\n                \"sectors\": \"250069680\", \r\n                \"sectorsize\": \"512\", \r\n                \"size\": \"119.24 GB\", \r\n                \"support_discard\": \"512\", \r\n                \"vendor\": null\r\n            }, \r\n            \"nvme1n1\": {\r\n                \"holders\": [], \r\n                \"host\": \"Non-Volatile memory controller: Intel Corporation PCIe Data Center SSD (rev 01)\", \r\n                \"model\": \"INTEL SSDPEDMD400G4\", \r\n                \"partitions\": {\r\n                    \"nvme1n1p1\": {\r\n                        \"holders\": [], \r\n                        \"sectors\": \"62914560\", \r\n                        \"sectorsize\": 512, \r\n                        \"size\": \"30.00 GB\", \r\n                        \"start\": \"2048\", \r\n                        \"uuid\": null\r\n                    }, \r\n                    \"nvme1n1p2\": {\r\n                        \"holders\": [], \r\n                        \"sectors\": \"2097152\", \r\n                        \"sectorsize\": 512, \r\n                        \"size\": \"1.00 GB\", \r\n                        \"start\": \"62916608\", \r\n                        \"uuid\": null\r\n                    }, \r\n                    \"nvme1n1p3\": {\r\n                        \"holders\": [], \r\n                        \"sectors\": \"62914560\", \r\n                        \"sectorsize\": 512, \r\n                        \"size\": \"30.00 GB\", \r\n                        \"start\": \"65013760\", \r\n                        \"uuid\": null\r\n                    }, \r\n                    \"nvme1n1p4\": {\r\n                        \"holders\": [], \r\n                        \"sectors\": \"2097152\", \r\n                        \"sectorsize\": 512, \r\n                        \"size\": \"1.00 GB\", \r\n                        \"start\": \"127928320\", \r\n                        \"uuid\": null\r\n                    }, \r\n                    \"nvme1n1p5\": {\r\n                        \"holders\": [], \r\n                        \"sectors\": \"62914560\", \r\n                        \"sectorsize\": 512, \r\n                        \"size\": \"30.00 GB\", \r\n                        \"start\": \"130025472\", \r\n                        \"uuid\": null\r\n                    }, \r\n                    \"nvme1n1p6\": {\r\n                        \"holders\": [], \r\n                        \"sectors\": \"2097152\", \r\n                        \"sectorsize\": 512, \r\n                        \"size\": \"1.00 GB\", \r\n                        \"start\": \"192940032\", \r\n                        \"uuid\": null\r\n                    }, \r\n                    \"nvme1n1p7\": {\r\n                        \"holders\": [], \r\n                        \"sectors\": \"62914560\", \r\n                        \"sectorsize\": 512, \r\n                        \"size\": \"30.00 GB\", \r\n                        \"start\": \"195037184\", \r\n                        \"uuid\": null\r\n                    }, \r\n                    \"nvme1n1p8\": {\r\n                        \"holders\": [], \r\n                        \"sectors\": \"2097152\", \r\n                        \"sectorsize\": 512, \r\n                        \"size\": \"1.00 GB\", \r\n                        \"start\": \"257951744\", \r\n                        \"uuid\": null\r\n                    }\r\n                }, \r\n                \"removable\": \"0\", \r\n                \"rotational\": \"0\", \r\n                \"sas_address\": null, \r\n                \"sas_device_handle\": null, \r\n                \"scheduler_mode\": \"\", \r\n                \"sectors\": \"781422768\", \r\n                \"sectorsize\": \"512\", \r\n                \"size\": \"372.61 GB\", \r\n                \"support_discard\": \"512\", \r\n                \"vendor\": null\r\n            }, \r\n            \"nvme2n1\": {\r\n                \"holders\": [], \r\n                \"host\": \"Non-Volatile memory controller: Lite-On Technology Corporation M8Pe Series NVMe SSD (rev 01)\", \r\n                \"model\": \"PLEXTOR PX-1TM8PeY\", \r\n                \"partitions\": {\r\n                    \"nvme2n1p1\": {\r\n                        \"holders\": [], \r\n                        \"sectors\": \"204800\", \r\n                        \"sectorsize\": 512, \r\n                        \"size\": \"100.00 MB\", \r\n                        \"start\": \"2048\", \r\n                        \"uuid\": \"aaaf3aa9-feab-4a6d-ada1-466f15e53494\"\r\n                    }, \r\n                    \"nvme2n1p2\": {\r\n                        \"holders\": [], \r\n                        \"sectors\": \"1935190671\", \r\n                        \"sectorsize\": 512, \r\n                        \"size\": \"922.77 GB\", \r\n                        \"start\": \"65218560\", \r\n                        \"uuid\": null\r\n                    }, \r\n                    \"nvme2n1p3\": {\r\n                        \"holders\": [], \r\n                        \"sectors\": \"62914560\", \r\n                        \"sectorsize\": 512, \r\n                        \"size\": \"30.00 GB\", \r\n                        \"start\": \"206848\", \r\n                        \"uuid\": null\r\n                    }, \r\n                    \"nvme2n1p4\": {\r\n                        \"holders\": [], \r\n                        \"sectors\": \"2097152\", \r\n                        \"sectorsize\": 512, \r\n                        \"size\": \"1.00 GB\", \r\n                        \"start\": \"63121408\", \r\n                        \"uuid\": null\r\n                    }\r\n                }, \r\n                \"removable\": \"0\", \r\n                \"rotational\": \"0\", \r\n                \"sas_address\": null, \r\n                \"sas_device_handle\": null, \r\n                \"scheduler_mode\": \"\", \r\n                \"sectors\": \"2000409264\", \r\n                \"sectorsize\": \"512\", \r\n                \"size\": \"953.87 GB\", \r\n                \"support_discard\": \"512\", \r\n                \"vendor\": null\r\n            }, \r\n```", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "doubleplush": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/33921", "title": "add new regex_split filter", "body": "##### SUMMARY\r\nAdds new split filter to allow splitting on regular expressions, in comparison to the built-in string split method, which only allows splitting on fixed strings.  Notably, this allows for splitting on an arbitrary number of separator characters using the regular expression pipe ('|').\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nfilters\r\n\r\n##### ANSIBLE VERSION\r\nansible 2.5.0\r\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "brutus333": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/33904", "title": "Added hostgroup child-parent relationship mapping", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nForeman hostgroup nesting matches very well Ansible groups child-parent relationship.\r\nThe patch is adding the possibility to define Ansible groups relations based on Foreman nested groups.\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module/plugin/module/task -->\r\ncontrib/inventory/foreman.py\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.3.2.0\r\n  config file = /work/staging/ansible.cfg\r\n  configured module search path = Default w/o overrides\r\n  python version = 2.7.11+ (default, Apr 17 2016, 14:00:29) [GCC 5.3.1 20160413]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "jdani": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/33888", "title": "Fixes #30599 Ini_file module: Options within no section managed", "body": "##### SUMMARY\r\nFixes #30599\r\nOptions within no sections aren't included, deleted or modified. These are just unmanged. This pull request solves this.\r\n\r\nThe fix consists in creating a fake section at the beginning of the execution and remove it just before the file is written. This way options with or without sections are treated in the same way, heving a consisten behaviour. Furthermore, creating fake sections is something that was already being done in the module.\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nini_file\r\n\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0 (30599_no_sect_options 6e4c36a4ad) last updated 2017/12/13 21:41:21 (GMT +200)\r\n  config file = None\r\n  configured module search path = [u'/home/jdani/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/jdani/freak/devel/ansible/lib/ansible\r\n  executable location = /home/jdani/freak/devel/ansible/bin/ansible\r\n  python version = 2.7.14 (default, Sep 23 2017, 22:06:14) [GCC 7.2.0]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "tim-werner": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/33862", "title": "make jira authentication Python3 compatible", "body": "##### SUMMARY\r\n\r\nFixes problem with jira module and Python3\r\n\r\n##### ISSUE TYPE\r\n\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nlib/ansible/modules/web_infrastructure/jira.py\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.0.0\r\npython version = 3.6.3 (default, Oct  6 2017, 11:37:43) [GCC 4.9.2]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\nFull traceback before change\r\n```\r\nThe full traceback is:\r\nTraceback (most recent call last):\r\n  File \"/home/twerner/ansible_venv/lib/python3.6/base64.py\", line 517, in _input_type_check\r\n    m = memoryview(s)\r\nTypeError: memoryview: a bytes-like object is required, not 'str'\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/tmp/ansible_zjezlbg5/ansible_module_jira.py\", line 431, in main\r\n    ret = method(restbase, user, passwd, module.params)\r\n  File \"/tmp/ansible_zjezlbg5/ansible_module_jira.py\", line 324, in fetch\r\n    ret = get(url, user, passwd, params['timeout'])\r\n  File \"/tmp/ansible_zjezlbg5/ansible_module_jira.py\", line 275, in get\r\n    return request(url, user, passwd, timeout)\r\n  File \"/tmp/ansible_zjezlbg5/ansible_module_jira.py\", line 247, in request\r\n    auth = base64.encodestring('%s:%s' % (user, passwd)).replace('\\n', '')\r\n  File \"/home/twerner/ansible_venv/lib/python3.6/base64.py\", line 547, in encodestring\r\n    return encodebytes(s)\r\n  File \"/home/twerner/ansible_venv/lib/python3.6/base64.py\", line 534, in encodebytes\r\n    _input_type_check(s)\r\n  File \"/home/twerner/ansible_venv/lib/python3.6/base64.py\", line 520, in _input_type_check\r\n    raise TypeError(msg) from err\r\nTypeError: expected bytes-like object, not str\r\n```\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "ajpaulson": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/33829", "title": "Updated Documentation and examples for clarity", "body": "##### SUMMARY\r\nThe documentation declared \"decrypt\" to default to False, the code actually defaults it to True, additional to this I've added an example for a single parameter at the end of a path as the bypath documentation could lead to confusion without this (at least, I got confused by this for longer than I care to admit)\r\n\r\n\r\n##### ISSUE TYPE\r\n - Docs Pull Request\r\n\r\n##### COMPONENT NAME\r\nlookup plugin - aws_ssm\r\n\r\n##### ANSIBLE VERSION\r\n\r\n```\r\nansible 2.4.2.0\r\n  config file = /root/.ansible.cfg\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.6 (default, Oct 26 2016, 20:30:19) [GCC 4.8.4]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nThere is no before or after command for my documentation change but following the documentation before my change I thought I needed to specify \"decrypt=True\" to decrypt a value and was surprised when it wasn't. \r\n\r\nI also was surprised to receive and empty response when passing a full path up to and including my parameter with the \"bypath\" option.", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "iturner": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/33826", "title": "tower_job_template: Add ask_inventory and ask_credential parameters to cli mapping.", "body": "##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\ntower_job_template\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.1.0\r\n  config file = /home/europa/IdeaProjects/vagrant_test_harness/ansible.cfg\r\n  configured module search path = [u'/home/europa/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Aug  4 2017, 00:39:18) [GCC 4.8.5 20150623 (Red Hat 4.8.5-16)]\r\n\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nThe \"ask_inventory\" and \"ask_credential\" parameters are not mapped to their Ansible cli equivalents of \"ask_inventory_on_launch\" and \"ask_credential_on_launch\".\r\n\r\nThere is no change to the Ansible command following this change.\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "tas50": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/33788", "title": "Fix the docs link to Ohai in the Ohai module", "body": "##### SUMMARY\r\nCorrect the docs link for Ohai\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nOhai module\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nN/A\r\n```\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "pthomison": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/33780", "title": "[new module] add/retrieve secrets from Thycotic secret server - database/misc/thycotic_secret", "body": "##### SUMMARY\r\nAdding a module which allows for the addition or retrieval of \"secrets\" from an instance of thycotic secret server\r\n\r\n##### ISSUE TYPE\r\n - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\nthycotic_secret\r\n\r\n##### ANSIBLE VERSION\r\nansible 2.5.0 (thycotic_module_dev df6e6887de) last updated 2017/12/11 10:07:49 (GMT -700)\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/pthomison/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/pthomison/Projects/thycotic_integration/ansible-with-thycotic-integration/lib/ansible\r\n  executable location = /home/pthomison/Projects/thycotic_integration/ansible-with-thycotic-integration/bin/ansible\r\n  python version = 2.7.14 (default, Nov  2 2017, 18:42:05) [GCC 7.2.1 20170915 (Red Hat 7.2.1-2)]\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nN/A", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "EtiennePerot": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/33754", "title": "docker_image: Fix up 'changed' event in force mode", "body": "##### SUMMARY\r\n\r\nThis makes the `docker_image` module have `changed=False` when force-rebuilding an image that ends up being identical to the one that was already built in the Docker build cache.\r\n\r\nThis is the same change as https://github.com/ansible/ansible/pull/19235 except it works for all image-building modes that the `docker_image` module supports (building the image locally, loading the image from an archive, or pulling the image from a repo), rather than only when pulling the image from a repo.\r\n\r\n##### ISSUE TYPE\r\n\r\n- Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n\r\n`docker_image.py`\r\n\r\n##### ANSIBLE VERSION\r\n\r\n`devel`", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "robinro": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/33748", "title": "Add identifier option to apache2_module", "body": "##### SUMMARY\r\n\r\nAdd a new option `identifier` to apache2_module.\r\n\r\nFixes #32690\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\napache2_module\r\n\r\n##### ANSIBLE VERSION\r\ndevel\r\n\r\n##### ADDITIONAL INFORMATION\r\nThere is a convention connecting the name passed to a2enmod and the one\r\nappearing in apache2ctl -M. Not all modules follow this convention and\r\nwe have added a growing list of implicit conversions, see\r\nhttps://github.com/ansible/ansible/blob/ba99e44b423f64227b94e0f201c4c340a989dc11/lib/ansible/modules/web_infrastructure/apache2_module.py#L145-L161\r\n\r\nAs a better long-term solution this adds an \"identifier\" option to be\r\nable to set both strings explicitly.", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "sirkubax": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/33704", "title": "Fix docs errors", "body": "##### SUMMARY\r\nI spent 2 days checking multiple options, and it seems that Docs does not match ansible code.\r\nPlease try to provide the working examp;es in the  docs.\r\n\r\n##### ISSUE TYPE\r\n - Docs Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module/plugin/module/task -->\r\nazure_rm_virtualmachine.py\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n```\r\n\r\n\r\n", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "asand3r": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/33701", "title": "ios_logging: Configure logging trap changes.", "body": "##### SUMMARY\r\nAdded support to configure logging trap with module ios_logging.\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nios_logging\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.4.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/asand3r/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Aug  4 2017, 00:39:18) [GCC 4.8.5 20150623 (Red Hat 4.8.5-16)]\r\n\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\nThe module ios_logging hasn't opportunity to configure logging trap on network devices, so I've add some code to add this functionality.\r\n![config_screen](https://user-images.githubusercontent.com/13959303/33757502-83e847b2-dc0b-11e7-846e-9b7c2e8ceb2b.png)\r\n![screen_dry_run](https://user-images.githubusercontent.com/13959303/33757505-878169c6-dc0b-11e7-82cd-066265c86c5e.png)\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "markusbloch": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/33692", "title": "add state parameter to patch module", "body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nAdd a state parameter to patch module. We sometimes need to apply and revert patches on many machines and therefore need a possibility to apply and (later on) revert patch files. So I added a state parameter (present/absent) to also revert a patch.\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module/plugin/module/task -->\r\npatch\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.5.0 (devel 60e6396c2a) last updated 2017/12/07 21:51:16 (GMT +200)\r\n  config file = None\r\n  configured module search path = [u'/home/markus/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/markus/ansible/lib/ansible\r\n  executable location = /home/markus/ansible/bin/ansible\r\n  python version = 2.7.9 (default, Jun 29 2016, 13:08:31) [GCC 4.9.2]\r\n```\r\n\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "duijf": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/33677", "title": "Allow apt downgrades", "body": "##### SUMMARY\r\n\r\nThis introduces an `allow_downgrades` option to the apt module. The reason we want this internally is because we feel `force` is too broad, but ocasionally want to use rollbacks.\r\n\r\n##### ISSUE TYPE\r\n\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\n\r\nAnsible apt module.\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0 (allow-apt-downgrades e4d648a02d) last updated 2017/12/07 15:58:00 (GMT +200)\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/laurens/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/laurens/repos/ansible/ansible/lib/ansible\r\n  executable location = /home/laurens/repos/ansible/ansible/bin/ansible\r\n  python version = 2.7.12 (default, Nov 20 2017, 18:23:56) [GCC 5.4.0 20160609]\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\n\r\nAfter this change, we can write the following task for a playbook:\r\n\r\n```\r\n- name: downgrade package\r\n  apt\r\n    package: foo=1.2\r\n    state: present\r\n    allow_downgrades: yes\r\n```", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "photoninger": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/33660", "title": "rhn_register: Fix for \"cannot marshal None unless..\"", "body": "when using only an activation key without any channels.\r\nAs already suggested by @mattclay in\r\nhttps://github.com/ansible/ansible/pull/25079\r\n\r\n##### SUMMARY\r\nrhn_register still throws an error with ansible-2.4.2.0 when using only an activationkey:\r\n```\r\nfatal: [MYHOST]: FAILED! => {\"changed\": false, \"msg\": \"Failed to\r\nregister with 'MY_SPACEWALKSERVER': cannot marshal None unless allow_none is\r\nenabled\"}\r\n```\r\nThis is Bug was reported in #24997\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nrhn_register\r\n\r\n##### ANSIBLE VERSION\r\n\r\n```\r\nansible 2.5.0 (fix_rhn_register 9fd7da88a1) last updated 2017/12/07 10:28:59 (GMT +200)\r\n```", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "MazeChaZer": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/33644", "title": "pacman module: Improve query performance", "body": "Fixes #31223\r\n\r\n##### SUMMARY\r\n\r\nPreviously, the pacman module would always run `pacman -Qi <package>` followed by `pacman -Si <package>`, even if the extended information from these commands aren't needed. This would considerably slow down the execution.\r\nFor me, this fix lowered the execution time of my playbook from 20m to 8m, both without any changes applied.\r\nThe behaviour of the module has not been changed and should be 100% backward-compatible.\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nmodule:pacman\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.0.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/jonas/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.14 (default, Sep 20 2017, 01:25:59) [GCC 7.2.0]\r\n```", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "colin-nolan": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/33634", "title": "Fix bug in `consul_acl` to allow an ACL's token to be changed", "body": "##### SUMMARY\r\nFixes a bug in `consul_acl`, where if an ACL with the same name had a different token, an assertion failed (i.e. the module was unable to handle an ACL's token changing).\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module/plugin/module/task -->\r\nconsul_acl\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.5.0\r\n  config file = None\r\n  configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.6/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.6.2 (default, Sep 13 2017, 14:26:54) [GCC 4.9.2]\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\nRegression tests added (although they're not currently ran as part of the CI - see #26229).", "author_association": "CONTRIBUTOR"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "Alexander198961": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/33613", "title": "implemented installroot option", "body": "SUMMARY\r\n\r\nadded installroot option to zypper module\r\nISSUE TYPE\r\n\r\n    Feature Pull Request\r\n\r\nCOMPONENT NAME\r\n\r\nmodule\r\nANSIBLE VERSION\r\n\r\nansible 2.4.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = Default w/o overrides\r\n  python version = 2.7.9 (default, Dec 21 2014, 11:02:59) [GCC\r\n\r\nADDITIONAL INFORMATION\r\n\r\nThis is fix for  https://github.com/ansible/ansible/pull/28651 (See this tread)\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "tripdubroot": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/33607", "title": "Az mod keyvault key", "body": "##### SUMMARY\r\nCreate Azure keyvault keys.\r\n\r\n##### ISSUE TYPE\r\n - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\nansible/lib/ansible/modules/cloud/azure/azure_rm_keyvaultkey.py\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0 (az-mod-keyvault-key 64ca512949) last updated 2017/12/05 20:43:55 (GMT -400)\r\n  config file = None\r\n  configured module search path = ['/home/tripdubroot/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/tripdubroot/src/ansible/lib/ansible\r\n  executable location = /home/tripdubroot/src/ansible/bin/ansible\r\n  python version = 3.6.3 (default, Oct  9 2017, 12:11:29) [GCC 7.2.1 20170915 (Red Hat 7.2.1-2)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nNeeds to have an existing keyvault. Expect integration tests to fail.\r\n", "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/33606", "title": "Az mod keyvault ops", "body": "##### SUMMARY\r\nCreate keyvault secrets.\r\n\r\n##### ISSUE TYPE\r\n - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\nansible/lib/ansible/modules/cloud/azure/azure_rm_keyvaultsecret.py\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0 (az-mod-keyvault-ops e2646b8709) last updated 2017/12/05 20:34:53 (GMT -400)\r\n  config file = None\r\n  configured module search path = ['/home/tripdubroot/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/tripdubroot/src/ansible/lib/ansible\r\n  executable location = /home/tripdubroot/src/ansible/bin/ansible\r\n  python version = 3.6.3 (default, Oct  9 2017, 12:11:29) [GCC 7.2.1 20170915 (Red Hat 7.2.1-2)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nTo test we will need an existing keyvault. I expect integration test to fail.\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "mamunozgonzalez": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/33591", "title": "Initial commit for fortios_cmdb", "body": "##### SUMMARY\r\nFortiOS and FortiGate products need to be supported by Ansible, also for cmdb operations. This module aims to support that.\r\n\r\nThe module let the user configure different endpoints of the Fortigate, by allowing to set configuration values.\r\n\r\n##### ISSUE TYPE\r\n - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\nfortios_cmdb_set\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.5.0 (fortios_cmdb 7782b9106e) last updated 2017/12/05 19:46:41 (GMT +200)\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/magonzalez/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/magonzalez/ansible/lib/ansible\r\n  executable location = /home/magonzalez/ansible/bin/ansible\r\n  python version = 2.7.14 (default, Sep 23 2017, 22:06:14) [GCC 7.2.0]\r\n```\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "TheAtomicOption": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/33588", "title": "minor sentence accuracy improvement", "body": "##### SUMMARY\r\nDiscussion of the parameter `12.04` in the explanatory paragraph should not be rounded since the function in the example, `version_compare()`, does not round. \r\n\r\n##### ISSUE TYPE\r\n - Docs Pull Request\r\n\r\n##### COMPONENT NAME\r\nDocs>Tests\r\n\r\n##### ANSIBLE VERSION\r\nDoesn't apply to a specific version. Sorry if this causes problems, but i'm making the edit directly on github so there's no simple way to include this.\r\n\r\n##### ADDITIONAL INFORMATION", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "ricardogpsf": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/33585", "title": "StoragePoolFactsModule for HPE OneView", "body": "##### SUMMARY\r\nAdded new oneview_storage_pool_facts module for retrieving [HPE OneView Storage Pools](http://h17007.www1.hpe.com/docs/enterprise/servers/oneview3.1/cic-api/en/api-docs/current/index.html#rest/storage-pools) resource and unit tests.\r\n\r\nRelated issue for more information: [HPE OneView support](https://github.com/ansible/ansible/issues/28354)\r\n\r\n##### ISSUE TYPE\r\n - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\n`oneview_storage_pool_facts`\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible --version\r\nansible 2.5.0 (hpe-oneview/storage-pool-facts ade6edbb36) last updated 2017/11/07 17:08:10 (GMT +000)\r\n  config file = None\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /oneview-ansible/ansible/lib/ansible\r\n  executable location = /oneview-ansible/ansible/bin/ansible\r\n  python version = 2.7.14 (default, Oct 10 2017, 02:49:49) [GCC 4.9.2]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nNotes:\r\n- To run the example you need an Oneview Appliance with some Storage Pool managed and to use the version 500 of Oneview REST API.\r\n\r\nExample of usage:\r\n```yaml\r\n- name: Gather facts about all Storage Pools\r\n  oneview_storage_pool_facts:\r\n    hostname: 10.101.42.57\r\n    username: administrator\r\n    password: serveradmin\r\n    api_version: 500\r\n  no_log: true\r\n  delegate_to: localhost\r\n\r\n- debug: var=storage_pools\r\n\r\n- name: Gather paginated, filtered and sorted facts about Storage Pools\r\n  oneview_storage_pool_facts:\r\n    params:\r\n      start: 0\r\n      count: 3\r\n      sort: 'name:descending'\r\n      filter: status='OK'\r\n    hostname: 10.101.42.57\r\n    username: administrator\r\n    password: serveradmin\r\n    api_version: 500\r\n  no_log: true\r\n  delegate_to: localhost\r\n\r\n- debug: var=storage_pools\r\n\r\n- name: Gather facts about a Storage Pool by name\r\n  oneview_storage_pool_facts:\r\n    name: \"CPG_FC-AO\"\r\n    hostname: 10.101.42.57\r\n    username: administrator\r\n    password: serveradmin\r\n    api_version: 500\r\n  no_log: true\r\n  delegate_to: localhost\r\n\r\n- debug: var=storage_pools\r\n\r\n- name: Gather facts about the reachable Storage Pools\r\n  oneview_storage_pool_facts:\r\n    options:\r\n      - reachableStoragePools\r\n    params:\r\n      sort: 'name:ascending'\r\n      filter: status='OK'\r\n      networks:\r\n        - /rest/network/123456A\r\n        - /rest/network/123456B\r\n    hostname: 10.101.42.57\r\n    username: administrator\r\n    password: serveradmin\r\n    api_version: 500\r\n  no_log: true\r\n  delegate_to: localhost\r\n\r\n- debug: var=storage_pools_reachable_storage_pools\r\n```\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "vrischmann": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/33579", "title": "docker_container: allow arbitrary log_driver", "body": "##### SUMMARY\r\n\r\nDocker supports [logging plugins](https://docs.docker.com/engine/admin/logging/plugins)\r\nso it no longer makes sense to limit the log_driver option to a fixed set of choices.\r\n\r\nThis change allows any log_driver value to be used.\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n\r\ndocker_container (`lib/ansible/modules/cloud/docker/docker_container.py`)\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.5.0 (devel b1f4ea6154) last updated 2017/12/05 12:28:34 (GMT +200)\r\n  config file = /Users/vincentrischmann/.ansible.cfg\r\n  configured module search path = [u'/Users/vincentrischmann/dev/devtools/ansible/library']\r\n  ansible python module location = /Users/vincentrischmann/dev/devtools/ansible/lib/ansible\r\n  executable location = /Users/vincentrischmann/dev/devtools/ansible/bin/ansible\r\n  python version = 2.7.14 (default, Sep 25 2017, 09:53:22) [GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.37)]\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\nTested with the following playbook:\r\n\r\n```---\r\n- hosts:\r\n    - foo.bar.com\r\n\r\n  tasks:\r\n    - name: create the container\r\n      docker_container:\r\n        name: redis1\r\n        image: redis\r\n        log_driver: kafka-log-driver\r\n        log_options:\r\n          kafka-brokers: foobar:9092\r\n          kafka-cluster-name: foo\r\n          topic: logs\r\n```\r\n\r\n`kafka-log-driver` is our in house log driver that we installed as a plugin.\r\n\r\nHere's the error without this patch:\r\n\r\n```\r\n[I] Vincents-MacBook-Pro ~/d/ansible (master \u271a) $ ansible-playbook -D -i hosts playbooks/foobar.yml                                                                                                                                   \r\n\r\nPLAY [foo.bar.com] **********************************************************************************************************************************************************************************************************************\r\n\r\nTASK [create the container] ******************************************************************************************************************************************************************************************************************\r\nfatal: [foo.bar.com]: FAILED! => {\"changed\": false, \"msg\": \"value of log_driver must be one of: none, json-file, syslog, journald, gelf, fluentd, awslogs, splunk, got: internal-log-driver\"}\r\n\tto retry, use: --limit @/Users/vincentrischmann/dev/ansible/playbooks/foobar.retry\r\n\r\nPLAY RECAP ***********************************************************************************************************************************************************************************************************************************\r\nfoo.bar.com           : ok=0    changed=0    unreachable=0    failed=1\r\n\r\n```\r\n\r\nWith the patch everything works fine:\r\n\r\n```\r\n[I] Vincents-MacBook-Pro ~/d/ansible (master \u271a) $ ansible-playbook -D -i hosts playbooks/foobar.yml                                                                                                                                   \r\n\r\nPLAY [foo.bar.com] **********************************************************************************************************************************************************************************************************************\r\n\r\nTASK [create the container] ******************************************************************************************************************************************************************************************************************\r\nchanged: [foo.bar.com]\r\n\r\nPLAY RECAP ***********************************************************************************************************************************************************************************************************************************\r\nfoo.bar.com           : ok=1    changed=1    unreachable=0    failed=0\r\n```", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "mtharp": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/33556", "title": "rabbitmq_policy: fix IndexError when no policies exist yet", "body": "##### SUMMARY\r\nFixes rabbitmq_policy crashing when no policies exist.\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nrabbitmq_policy\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.2.0\r\n  config file = None\r\n  configured module search path = ['/home/x/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/x/vo/lib64/python3.6/site-packages/ansible\r\n  executable location = /home/x/vo/bin/ansible\r\n  python version = 3.6.3 (default, Oct  9 2017, 12:07:10) [GCC 7.2.1 20170915 (Red Hat 7.2.1-2)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nReproducer:\r\n```\r\n$ ansible -i hosts foohost -mrabbitmq_policy -a \"name=foo pattern=bar tags={'ha-mode':'all'}\"\r\nfoohost | FAILED! => {\r\n    \"changed\": false,\r\n    \"module_stderr\": \"Shared connection to foohost closed.\\r\\n\",\r\n    \"module_stdout\": \"Traceback (most recent call last):\\r\\n  File \\\"/tmp/ansible_T4WhnK/ansible_module_rabbitmq_policy.py\\\", line 172, in <module>\\r\\n    main()\\r\\n  File \\\"/tmp/ansible_T4WhnK/ansible_module_rabbitmq_policy.py\\\", line 159, in main\\r\\n    if rabbitmq_policy.list():\\r\\n  File \\\"/tmp/ansible_T4WhnK/ansible_module_rabbitmq_policy.py\\\", line 116, in list\\r\\n    policy_name = policy.split('\\\\t')[1]\\r\\nIndexError: list index out of range\\r\\n\",\r\n    \"msg\": \"MODULE FAILURE\",\r\n    \"rc\": 0\r\n}\r\n\r\n```\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "jairojunior": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/33551", "title": "Fallback to environment variables to avoid repetition", "body": "##### SUMMARY\r\nSupports environment variables for host, port, token and validate_certs to avoid repetition in playbooks.\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nOpenShift module\r\n", "author_association": "MEMBER"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "jeffgreenca": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/33550", "title": "add error msg detail for purestorage module", "body": "##### SUMMARY\r\nWhen a volume or host is not found, include the name of the missing entity in the error message.\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\npurestorage storage module\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \"ansible --version\" between quotes below -->\r\n```\r\nansible 2.5.0 (devel 0addd53926) last updated 2017/09/15 07:22:10 (GMT -700)\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\nfatal: [localhost]: FAILED! => {\"changed\": false, \"failed\": true, \"msg\": \"Volume not found: somevolume1\"}\r\n```\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "sperreault": {"issues": [], "commits": [], "pull_requests": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/33548", "title": "add vim modeline to galaxy-templates", "body": "##### SUMMARY\r\nAdd vim modeline to ansible-galaxy templates to make vim behave properly with yaml files. This way quick edit of yaml files with vim are easier.\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nansible-galaxy\r\n##### ANSIBLE VERSION\r\n\r\n```\r\nansible 2.4.1.0\r\n  config file = None\r\n  configured module search path = [u'/Users/sperreau/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/sperreau/venv/ansible-2.4/lib/python2.7/site-packages/ansible\r\n  executable location = /Users/sperreau/venv/ansible-2.4/bin/ansible\r\n  python version = 2.7.14 (default, Oct 30 2017, 14:56:36) [GCC 4.2.1 Compatible Apple LLVM 6.0 (clang-600.0.57)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nJust added a modeline to the jinja2 tempaltes.\r\n", "author_association": "NONE"}], "issue_comments": [], "commit_comments": [], "review_comments": []}, "mpdehaan": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [{"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4444088", "body": "done\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4444088/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4399068", "body": "done\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4399068/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4399054", "body": "suggest a fix?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4399054/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4518269", "body": "I don't think this is a problem because setup.py was trying to install manpages and such before.\n\nIt runs pretty well directly out of checkout which is what the whole hacking script is designed to deal with.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4518269/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4433350", "body": "done, see lib/ansible/connection\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4433350/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4444090", "body": "basically done / obsolete\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4444090/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4433347", "body": "done\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4433347/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4444081", "body": "-P implemented, see \"examples\" on the doc site\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4444081/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4444078", "body": "this is already done in /usr/bin/ansible, do similar to playbooks\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4444078/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4444097", "body": "needs to kick off jobs everywhere and then poll, and then fail the jobs that do not complete in time\n\nsee code in /usr/bin/ansible for use as a baseline\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4444097/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4489311", "body": "done\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4489311/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4400040", "body": "possible uses:\n\nif this is the os\n\nif in this subnet or whatever\n\nif the last command returned X\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4400040/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4400147", "body": "also want to be able to do maybe\n\n```\n- action: blah\n  poll:  timeout=30 check_interval=5\n  onfail:   \n```\n\nso it's like a \"notify\" but different\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4400147/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4400174", "body": "Q: does fail mean stop unless there is an onfail?   \n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4400174/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4580225", "body": "more random thoughts:\n\n```\n- name: foo\n  switch:\n     - var: asdf\n         - case: $facter_fqdn \n           then: value\n         - case: $facter_fqdn  # this is a Python expression after replacing the dollar signs\n           then: bar                  # this too\n  action: module param1 param2 $asdf\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4580225/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4580394", "body": "Attempting to iterate on this:\n\n<pre>\n    - name: foo\n      calculate_vars:\n         - asdf\n             - if: $facter_fqdn.endswith(\".rtp.example.org\") \n               then: 'foo'\n             - elif: $facter_fqdn.startswith(\".atl.example.org\")  # this is a Python expression after replacing the dollar signs\n               then: 'bar'\n             - else: 'default'\n      action: module param1 param2 $asdf\n\n</pre>\n\n\n?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4580394/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4580523", "body": "calculate_vars should not be part of a task because vars should be reusable\n\n```\n-  calculate_vars:\n     - asdf\n         - if: $facter_fqdn.endswith(\".rtp.example.org\") \n           then: 'foo'\n         - elif: $facter_fqdn.startswith(\".atl.example.org\")  # this is a Python expression after replacing the dollar signs\n           then: 'bar'\n         - else: 'default'\n\n- tasks:\n      - name:  foo\n        action: module param1 param2 $asdf\n        onlyif:  expression goes here\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4580523/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4580563", "body": "```\n -  calculate_vars:\n     - if: $facter_fqdn.endswith(\".rtp.example.org\") \n       then:\n           asdf: 'foo'\n     - elif: $facter_fqdn.startswith(\".atl.example.org\")  # this is a Python expression after replacing the dollar signs\n       then:\n           asdf: 'bar'\n     - else:\n           asdf: 'default' \n\n- tasks:\n  - name:  foo\n    action: module param1 param2 $asdf\n    onlyif:  expression goes here\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4580563/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4580819", "body": "```\n - conditional_vars:\n    - apache:\n        - [ \" $facter_os == 'Debian' \" , 'apache' ]\n        - [ \" $facter_os == 'RedHat' \", 'httpd' ]\n\n- tasks:\n    - name:  install apache\n      action:  yum blarg $apache\n      onlyif: $facter_os == 'RedHat'\n   - name: install apache\n      action: apt blarg $apache\n      onlyif: $facter_os == 'Debian'\n```\n\n?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4580819/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4581323", "body": "Inside of tasks list, a list of both task (name+action) and conditional_set elements:\n\n```\n- conditional_set:\n    - \"$facter_os == 'Debian' \":\n        - install_apache: apt ensure=installed pkg=apache\n        - restart_apache: service httpd start\n    - \"$facter_os == 'RedHat' \":\n        - install_apache: yum ensure=installed pkg=httpd\n        - restart_apache: systemctl enable httpd.service\n    # possibly some error syntax  \n\n- name: install apache\n  action: $install_apache\n- name: restart apache\n  action: $restart_apache\n  onlyif: $somevar == X   # totally optional to use this\n```\n\npossibly some errorif syntax too\n\nand you can interlace conditional_sets and tasks all you want\n\nwe could also put in automagic such that if the action line starts with \"$\" and it wasn't evaluated we just skip the step\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4581323/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4582425", "body": "plan is to revisit these ideas after #57\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4582425/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4460335", "body": "more or less exists in module docs, but should indicate how to test them from CLI and a little more about req'd options\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4460335/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4489319", "body": "moving to website tracker\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4489319/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4513218", "body": "this is actually LESS needed since all modules now use the argsfile convention, but we still need them to choke properly on invalid arguments.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4513218/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4708105", "body": "duplicate\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4708105/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4489304", "body": "done\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4489304/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4511900", "body": "done, see mailing list thread\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4511900/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4489302", "body": "we can run playbooks in the examples dir for this\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4489302/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4490593", "body": "done\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4490593/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4497532", "body": "get exit code from paramiko if possible, ammend data structure results.  reduces module boilerplate\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4497532/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4511900", "body": "done, see mailing list thread\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4511900/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4512492", "body": "hacking/test-module see usage in that file, or ML thread\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4512492/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4512500", "body": "not possible with exec_command ?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4512500/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4512541", "body": "done\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4512541/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4512545", "body": "not that important\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4512545/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4512550", "body": "done!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4512550/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4513211", "body": "we reduced frequency, this seems better\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4513211/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4513218", "body": "this is actually LESS needed since all modules now use the argsfile convention, but we still need them to choke properly on invalid arguments.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4513218/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4518269", "body": "I don't think this is a problem because setup.py was trying to install manpages and such before.\n\nIt runs pretty well directly out of checkout which is what the whole hacking script is designed to deal with.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4518269/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4527054", "body": "APIs are NOT allowed to go away or change once written.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4527054/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4528077", "body": "bad idea, line nums\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4528077/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4528128", "body": "Thanks for the report.\n\nwe're going to remove asciidoc from the build steps and check in the manpage output, closing as a dup of #42\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4528128/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4533410", "body": "done\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4533410/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4533412", "body": "done\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4533412/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4540159", "body": "if called with no arguments return a hash of group names, each group having the list of hosts\n\nif called with the hostname as an argument, return the variables to feed to that host\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4540159/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4550621", "body": "done\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4550621/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4565210", "body": "decided against, I think this undermines modules too easily\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4565210/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4565784", "body": "not the case, great!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4565784/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4565800", "body": "yes, this is true.\n\nIf you have a statement that notifies \"handler apatchy\" and your handler is named \"apache\", it will not raise an error.  \n\nWe should fix this :)\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4565800/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4565854", "body": "done\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4565854/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4565856", "body": "done, notifiers already had them\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4565856/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4565860", "body": "done\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4565860/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4580141", "body": "http://yum.baseurl.org/gitweb?p=yum.git;a=blob;f=yum/parser.py;h=fccf528eb95670c19850c70126c250c60b74a695;hb=refs/heads/yum-3_2_X#l12\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4580141/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4580225", "body": "more random thoughts:\n\n```\n- name: foo\n  switch:\n     - var: asdf\n         - case: $facter_fqdn \n           then: value\n         - case: $facter_fqdn  # this is a Python expression after replacing the dollar signs\n           then: bar                  # this too\n  action: module param1 param2 $asdf\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4580225/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4580394", "body": "Attempting to iterate on this:\n\n<pre>\n    - name: foo\n      calculate_vars:\n         - asdf\n             - if: $facter_fqdn.endswith(\".rtp.example.org\") \n               then: 'foo'\n             - elif: $facter_fqdn.startswith(\".atl.example.org\")  # this is a Python expression after replacing the dollar signs\n               then: 'bar'\n             - else: 'default'\n      action: module param1 param2 $asdf\n\n</pre>\n\n\n?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4580394/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4580523", "body": "calculate_vars should not be part of a task because vars should be reusable\n\n```\n-  calculate_vars:\n     - asdf\n         - if: $facter_fqdn.endswith(\".rtp.example.org\") \n           then: 'foo'\n         - elif: $facter_fqdn.startswith(\".atl.example.org\")  # this is a Python expression after replacing the dollar signs\n           then: 'bar'\n         - else: 'default'\n\n- tasks:\n      - name:  foo\n        action: module param1 param2 $asdf\n        onlyif:  expression goes here\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4580523/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4580563", "body": "```\n -  calculate_vars:\n     - if: $facter_fqdn.endswith(\".rtp.example.org\") \n       then:\n           asdf: 'foo'\n     - elif: $facter_fqdn.startswith(\".atl.example.org\")  # this is a Python expression after replacing the dollar signs\n       then:\n           asdf: 'bar'\n     - else:\n           asdf: 'default' \n\n- tasks:\n  - name:  foo\n    action: module param1 param2 $asdf\n    onlyif:  expression goes here\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4580563/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4580819", "body": "```\n - conditional_vars:\n    - apache:\n        - [ \" $facter_os == 'Debian' \" , 'apache' ]\n        - [ \" $facter_os == 'RedHat' \", 'httpd' ]\n\n- tasks:\n    - name:  install apache\n      action:  yum blarg $apache\n      onlyif: $facter_os == 'RedHat'\n   - name: install apache\n      action: apt blarg $apache\n      onlyif: $facter_os == 'Debian'\n```\n\n?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4580819/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4581323", "body": "Inside of tasks list, a list of both task (name+action) and conditional_set elements:\n\n```\n- conditional_set:\n    - \"$facter_os == 'Debian' \":\n        - install_apache: apt ensure=installed pkg=apache\n        - restart_apache: service httpd start\n    - \"$facter_os == 'RedHat' \":\n        - install_apache: yum ensure=installed pkg=httpd\n        - restart_apache: systemctl enable httpd.service\n    # possibly some error syntax  \n\n- name: install apache\n  action: $install_apache\n- name: restart apache\n  action: $restart_apache\n  onlyif: $somevar == X   # totally optional to use this\n```\n\npossibly some errorif syntax too\n\nand you can interlace conditional_sets and tasks all you want\n\nwe could also put in automagic such that if the action line starts with \"$\" and it wasn't evaluated we just skip the step\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4581323/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4581811", "body": "the list syntax is \"import this if it exists\", pick the first one\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4581811/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4582297", "body": "should also allow \"onlyif: <expression>\" as part of this on task items\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4582297/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4582300", "body": "don't forget documenation for docs site (power tricks section)\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4582300/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4582317", "body": "this also implies allowing $ as a shortcut for {{ }}\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4582317/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4582425", "body": "plan is to revisit these ideas after #57\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4582425/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4588349", "body": "done\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4588349/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4588350", "body": "done\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4588350/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4588355", "body": "disagree, too fuzzy\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4588355/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4588366", "body": "consolidated with other ticket\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4588366/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4594149", "body": "what we may do is the top level vars and vars_files may be merged with the per task ones before being evaluated\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4594149/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4594360", "body": "once done, be sure we document this, it is a very nice case to make it easy to fully apply config prior to installation completion\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4594360/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4610125", "body": "done\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4610125/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4610126", "body": "done\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4610126/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4610128", "body": "done, is missing info on dark hosts apparently, but can work on that\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4610128/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4618791", "body": "need greatly reduced due to implementation of vars_files and being able to import a common vars file\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4618791/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4640827", "body": "done\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4640827/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4652854", "body": "runner is cleaned up, playbooks have some work to do yet\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4652854/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4670687", "body": "done\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4670687/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4676422", "body": "attempted doing this, not neccessary IMHO\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4676422/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4676423", "body": ".\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4676423/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4676424", "body": "added --override-hosts -O, see mailing list, takes comma delimited hosts\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4676424/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4676474", "body": "we have these, just need to use them\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4676474/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4685796", "body": "done\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4685796/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4700852", "body": "merged, thanks!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4700852/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4707459", "body": "decided against\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4707459/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4707463", "body": "decided against, YAGNI\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4707463/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4708059", "body": "merging w/ another ticket\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4708059/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5098339", "body": "awesome!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5098339/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5190013", "body": "this is closeable by #160, since we have that as a pull request I can go ahead and close that ticket.  Will look into testing PR tomorrow.  thanks again!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5190013/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4594360", "body": "once done, be sure we document this, it is a very nice case to make it easy to fully apply config prior to installation completion\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4594360/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4785551", "body": "no one is asking for this, would complicate usage explanations, passing on this for now\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4785551/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5347034", "body": "it's implemented, which you could verify by trying the doc example and seeing that the config argument is there :)\n\nDon't trust old ticket comments!  The maintainer of this project might be insane.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5347034/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4610125", "body": "done\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4610125/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4685796", "body": "done\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4685796/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4640827", "body": "done\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4640827/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4855149", "body": "done, see docs site\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4855149/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4855208", "body": "currently disagreeing with my own idea here\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4855208/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4855211", "body": "folks can just template this.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4855211/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4855214", "body": "I have this disabled, someone can patch if they want\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4855214/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4708064", "body": "name and ALSO package...\n\nshould also use standard functions like user/apt module\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4708064/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5082404", "body": "common functions not yet implemented, but will leave that for someone else.   aliases added.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5082404/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4676422", "body": "attempted doing this, not neccessary IMHO\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4676422/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4676423", "body": ".\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4676423/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4707459", "body": "decided against\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4707459/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4700852", "body": "merged, thanks!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4700852/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4707463", "body": "decided against, YAGNI\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4707463/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4855200", "body": "done\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4855200/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5076492", "body": "done, but needs user testing to say it works\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5076492/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5082340", "body": "pushed, yell if it's broke :)\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5082340/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4756738", "body": "looks good...\n\nminor git tip -- When you are working on features/fixes for pull requests, try and just use \"git rebase\" and not \"git pull / git  merge\" ... it will keep the merge commits out of the pull request so I don't have to cherry pick things by SHA to avoid the merge commits.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4756738/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4756971", "body": "ok, there's a small thing for this that I would like you to fix before I merge this.  There is no reason to have a new parameter \"target=\" for the link mode.\n\nPlease change this to just work like so:\n\nfile src=/file/to/symlink dest=/where/to/symlink/to state=link\n\nThis makes things much easier to remember than target= and dest= when every other module takes a 'src'.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4756971/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4757378", "body": "the other thing you need to do when submitting this is add a test to tests/TestRunner.py for testing the symlink additions.  We typically don't test things like users and groups there because they are relatively \"real\" tests, but it is safe to test the symlink feature there.\n\n\"make tests\", including the new additions, should continue to pass.  \n\nThis will let us know if the API or feature breaks in the future, and also serves to document the usage.\n\nIt would also be nice if you update the rst/examples.rst and rst/mdoules.rst docs when making changes to modules in the ansible/ansible.github.com project -- I can work on doing the docs rebuild.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4757378/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/6525189", "body": "implemented, so I can close this one, thanks!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/6525189/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4784995", "body": "ansible should just say \"warning: no hosts matched\" in this case.  It used to do this, it just needs to be reinstated\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4784995/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4855115", "body": "closing\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4855115/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4855138", "body": "fixed/pushed\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4855138/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4855140", "body": "done\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4855140/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4855149", "body": "done, see docs site\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4855149/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4855200", "body": "done\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4855200/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4855202", "body": "one user indicated they could get the system to hang with async yum + sudo.  Need to investigate this combo.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4855202/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4855208", "body": "currently disagreeing with my own idea here\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4855208/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4855210", "body": "not a priority, someone can patch if they like\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4855210/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4855211", "body": "folks can just template this.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4855211/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4855214", "body": "I have this disabled, someone can patch if they want\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4855214/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4855227", "body": "As a heads up, my patch to keep module_args as a string most of the way through runner seems to have allowed simplification of the quoting stuff... so if that code looks different, that's why\n\nTests seem to like it, let me know if you find otherwise\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4855227/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4857950", "body": "Will test and merge this shortly, thanks!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4857950/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4858066", "body": "merged, thanks!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4858066/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4867375", "body": "added a time.sleep(1) which solves it for now, we can, if needed, add some fancy IPC to async_wrapper instead of the time.sleep to fix it, but should not be needed\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4867375/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4867378", "body": "stderr is actually useful debug, so I disagree with that... \n\nthe async report didn't involve sudo, so we can close\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4867378/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4882761", "body": "should not delete file if present and state=link, should only be able to change an existing link.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4882761/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4944476", "body": "Outstanding catch.   Thanks very much.\n\nAt some point in the past we refactored the runner loop to avoid a multiprocessing glitch, and the join loop was executing in the for loop, not outside.  I've pushed a fix to correct this.\n\nThanks!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4944476/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4944497", "body": ".\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4944497/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4944555", "body": "sounds completely reasonable\n\nprobably should be done via constants like:\n\nVALID_TASK_OPTIONS = [ 'notify', ...]\nVALID_HANDLER_OPTIONS = []\n\netc\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4944555/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4944618", "body": "looks like I am unable to assign to someone outside the commit group, but if you'd like to fix it, that would be great.\n\nthanks again for all your work and feedback on Ansible, it is much appreciated.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4944618/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4944801", "body": "actually I'm not sure you need vars per task, because the first include can/should pass on those vars to the first instance of the include and then the second would get different vars.\n\nWhat it seems like you're saying is the vars to the includes are made available to templates and not the action statements\n\nI think we are templating the include files (or that was the plan), so I'm a bit confused but I haven't quite debugged it yet.\n\nIf you want to see why the interface variable isn't being passed down right with the include, I think that will solve the problem... does that make sense?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4944801/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4951834", "body": "\"The variables passed on to the include are 'leaked' to the play scope.\"\n\nOk, this makes perfect sense.   Thanks ... Looks like the code needs to make a copy of the hash inject_vars prior to the modifications to inject_vars and then make the template call using the copy.\n\nShould be an easy fix.   Will probably have a chance to look at this tonight unless you want to beat me to it.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4951834/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4952757", "body": "Ok, thanks, will look into merging this tonight.   I'm thinking maybe the string transfer could be replaced by passing them directly to the template module, possibly.  (So that any extra variables fed to the template module are treated as variables, and we automatically feed module_vars like that)\n\nMuch appreciated!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4952757/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4960198", "body": "playbooks should also take \n\nsudo: username\n\nin addition to:\n\nsudo: True\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4960198/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4960776", "body": "from discussion on list this needs to support state=XYZ style semantics versus being command oriented for this to get merged into core.\n\nI'm only going to allow the exemption for the command/shell module.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4960776/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4960803", "body": "since command is parsed as a regular string, not a key/value string, we probably have to apply magic to pull this out of the options line.\n\ncommand /sbin/foo a b c creates=XYZ and just parse the tokens out that include \"creates\", or require it to end with creates, or maybe even\n\n#creates=XYZ \n\nMaybe I like that better\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4960803/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4960876", "body": "mdehaan: some playbook wrapper syntax is an option\n15:16 mdehaan: creates: ....\n15:17 mdehaan: that first does a check to see which hosts have the file existing before running\n15:17 mdehaan: and could work with all module types\n15:17 mdehaan: a bit harder\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4960876/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4961140", "body": "Decided on this, maybe only_if_remote gets renamed:\n\n```\n- tasks:\n  - name: foo\n    action: command blarg a b c d\n    only_if_remote: test ! -f /etc/somefile\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4961140/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4858066", "body": "merged, thanks!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4858066/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4867375", "body": "added a time.sleep(1) which solves it for now, we can, if needed, add some fancy IPC to async_wrapper instead of the time.sleep to fix it, but should not be needed\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4867375/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4882761", "body": "should not delete file if present and state=link, should only be able to change an existing link.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4882761/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4944555", "body": "sounds completely reasonable\n\nprobably should be done via constants like:\n\nVALID_TASK_OPTIONS = [ 'notify', ...]\nVALID_HANDLER_OPTIONS = []\n\netc\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4944555/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4944618", "body": "looks like I am unable to assign to someone outside the commit group, but if you'd like to fix it, that would be great.\n\nthanks again for all your work and feedback on Ansible, it is much appreciated.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4944618/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5542329", "body": "suggest we defer this until after some playbook refactoring I intend to do a bit later...\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5542329/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/6319169", "body": "disagree with this actually, as you can comment things in YAML and that shouldn't be illegal\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/6319169/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4944801", "body": "actually I'm not sure you need vars per task, because the first include can/should pass on those vars to the first instance of the include and then the second would get different vars.\n\nWhat it seems like you're saying is the vars to the includes are made available to templates and not the action statements\n\nI think we are templating the include files (or that was the plan), so I'm a bit confused but I haven't quite debugged it yet.\n\nIf you want to see why the interface variable isn't being passed down right with the include, I think that will solve the problem... does that make sense?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4944801/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4951834", "body": "\"The variables passed on to the include are 'leaked' to the play scope.\"\n\nOk, this makes perfect sense.   Thanks ... Looks like the code needs to make a copy of the hash inject_vars prior to the modifications to inject_vars and then make the template call using the copy.\n\nShould be an easy fix.   Will probably have a chance to look at this tonight unless you want to beat me to it.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4951834/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4966233", "body": "fixed per merging of #114\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4966233/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4944476", "body": "Outstanding catch.   Thanks very much.\n\nAt some point in the past we refactored the runner loop to avoid a multiprocessing glitch, and the join loop was executing in the for loop, not outside.  I've pushed a fix to correct this.\n\nThanks!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4944476/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4944497", "body": ".\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4944497/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4952757", "body": "Ok, thanks, will look into merging this tonight.   I'm thinking maybe the string transfer could be replaced by passing them directly to the template module, possibly.  (So that any extra variables fed to the template module are treated as variables, and we automatically feed module_vars like that)\n\nMuch appreciated!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4952757/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4966222", "body": "ended up taking this verbatim, indeed a bit of a complicated corner case.   Good catch on finding this and this fix should be fine.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4966222/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4966225", "body": "also, thanks again!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4966225/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4960776", "body": "from discussion on list this needs to support state=XYZ style semantics versus being command oriented for this to get merged into core.\n\nI'm only going to allow the exemption for the command/shell module.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4960776/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4963405", "body": "looks like you need to update the pull request, having no idea how that works myself I've just reopened this one and can farm your branch.  will look later today/tonight.   Thanks!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4963405/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4960198", "body": "playbooks should also take \n\nsudo: username\n\nin addition to:\n\nsudo: True\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4960198/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5369608", "body": "not done, sudo w/ password works, but you can only sudo to root. \n\nOn Thursday, April 26, 2012 at 6:21 PM, Jim Richardson wrote:\n\n> Looking at the devel codebase, this is already done?\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/ansible/ansible/issues/117#issuecomment-5369488\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5369608/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5450127", "body": "seems to be no demand for this one, can be done with authorized_keys and logging in as whoever, will accept PR though\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5450127/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5461523", "body": "Patches are accepted.\n\nOn Wed, May 2, 2012 at 9:35 AM, wm-pseudo\nreply@reply.github.com\nwrote:\n\n> I can assure that this feature is badly needed in our case. We have centralized accounts and home directories for logging in, but our software must be run as a local non-root user. Please consider re-opening the issue and raising the priority.\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/ansible/ansible/issues/117#issuecomment-5461481\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5461523/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4960803", "body": "since command is parsed as a regular string, not a key/value string, we probably have to apply magic to pull this out of the options line.\n\ncommand /sbin/foo a b c creates=XYZ and just parse the tokens out that include \"creates\", or require it to end with creates, or maybe even\n\n#creates=XYZ \n\nMaybe I like that better\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4960803/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4960876", "body": "mdehaan: some playbook wrapper syntax is an option\n15:16 mdehaan: creates: ....\n15:17 mdehaan: that first does a check to see which hosts have the file existing before running\n15:17 mdehaan: and could work with all module types\n15:17 mdehaan: a bit harder\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4960876/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4961140", "body": "Decided on this, maybe only_if_remote gets renamed:\n\n```\n- tasks:\n  - name: foo\n    action: command blarg a b c d\n    only_if_remote: test ! -f /etc/somefile\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4961140/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4997657", "body": "ended up with just:\n\ncommand foo arg1 arg2 creates=N\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4997657/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5082453", "body": "if you don't want to merge this or get stuck, let me know, and I can see what it will take. \n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5082453/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5082550", "body": "Implemented in latest git for the copy, template, and also the new 'fetch' module.  \n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5082550/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5082634", "body": "done!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5082634/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5082695", "body": "actually using -k doesn't mean you want to use a sudo password, it would have to be another option that only works for sudo.\n\nReason being you may want to use SSH keys for the initial login and not need the password\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5082695/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5082700", "body": "may be worth seeing if python libraries for working with tarfiles are faster than the system call, can happen later though\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5082700/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5095972", "body": "see comment made on commit\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5095972/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5096118", "body": "excellent, will try things out and merge shortly\n\nthanks!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5096118/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5096950", "body": "nice, will take a look at this tonight.\n\nThanks!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5096950/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5098339", "body": "awesome!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5098339/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5098410", "body": "let's use some other seperator then, even though it may make less sense.\n\n\",port=\" would be pretty explicit and maybe even a little future proof ?\n\nwe'll also want to document whatever we decide in the docs project\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5098410/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5099026", "body": "we are going to make it username-hostname unique at least, in the proposal to remove the delete_files logic\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5099026/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5099458", "body": "Works for me.  If someone wants to make it work better with IPV6, hey can make additions on top of this patch.\n\nI suspect quite a few people will be using hostnames anyway.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5099458/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5099725", "body": "thanks for the heads up and good catch.\n\nfor future reference, docs project -- https://github.com/ansible/ansible.github.com \n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5099725/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5100297", "body": "sidenote, an argument for ,port= would be that it would eventually also allow per host connection preferences, eg ,connection=something_other_than_ssh\n\nHowever we can still do that keeping the colon for the port, even if we did that.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5100297/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5101071", "body": "Much easier to type, doesn't imply functionality that isn't there  (ssh://user:host/...) etc.   It's not a full URI.\n\nAnyway, this is good enough for now.\n\nOn Thursday, April 12, 2012 at 5:22 PM, surekap wrote:\n\n> If you want to do that, then why not use the url scheme: ssh://host:port or telnet://host:port\n> \n> See my code commit - its easily possible to allow connection schemes.\n> \n> ------Original Message------\n> From: Michael DeHaan\n> To: Sureka, Prateek\n> Subject: Re: [ansible] Allow port override in hosts file (#134)\n> Sent: Apr 13, 2012 2:18 AM\n> \n> sidenote, an argument for ,port= would be that it would eventually also allow per host connection preferences, eg ,connection=something_other_than_ssh\n> \n> However we can still do that keeping the colon for the port, even if we did that.\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/ansible/ansible/pull/134#issuecomment-5100297\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/ansible/ansible/pull/134#issuecomment-5101002\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5101071/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5106306", "body": "merged in.\n\nCan you provide some usage notes so I can include them in the docs?  (i.e. example values for each parameter?)\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5106306/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5106312", "body": "merged, thanks!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5106312/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5106386", "body": "Thanks...\n\nSorry to continue this discussion but I see a few things.  First off, I see you have scp.py in your branch, but it's not part of the pull request.  (commit ends in 'd0' per history in your branch)\n\nAlso, can you elaborate on when sftp wouldn't work?   Is it common to have it turned off on any particular distros?  Stock Fedora/CentOS does not have this problem and it's enabled stock.   I would rather avoid maintaining our own copy of a scp wrapper library (where did this come from originally, it may be widely used enough that we don't care).\n\nMy other minor issue is I see scp.py has a GPLv2+ copyright, Ansible is GPLv3+... though first question first :)\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5106386/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5106452", "body": "ok, yeah, these topics are mixed... how about we close this and you send me one pull request for the port stuff (which should be a very small patch) and we can leave the SCP stuff for a seperate discussion.  It is probably worth bringing up SCP on the mailing list.\n\nWhat may have happened is you sent me a pull request for the branch, and started to do something else on the same branch... whereas maybe the SCP stuff should have been on another branch and another pull request.\n\nAnyway, let me know if this is confusing.\n\nI want this in and fixed, so hang in there :)\n\nThanks.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5106452/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5106463", "body": "going to be resolved by #133\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5106463/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5106825", "body": "done\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5106825/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5106836", "body": "merged in, per comment on pull request, if you can give me an example one liner usage command for the docs that would be great.\n\nThanks!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5106836/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5176444", "body": "yeah, triggering/update will happen once per play.   That's the extent of the caching and should be more than good enough.   They are not accessed on demand.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5176444/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5176963", "body": "the setup module will contain a lot of python code to automatically return some extra variables, all the time, more or less.  There will not be additional external facts in the initial implementation.   Once we change the way content is transferred (to the tarball approach in another ticket, probably) that can be revisited to support executable facts.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5176963/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5214070", "body": "all templates are now local, remaining step is just the jinja2 extension to access the other host's variables.  This should only be legal for playbooks and probably needs to leverage SETUP_CACHE for now\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5214070/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5267506", "body": "this is now done on the integration branch, see email to list.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5267506/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5081852", "body": "urg, the fix to make parser options not dicts anymore and institute sorting via SortedOptParser or whatever has caused this to conflict.\n\nCan you git rebase off of the integration branch and resubmit this?\n\nThanks!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5081852/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5082453", "body": "if you don't want to merge this or get stuck, let me know, and I can see what it will take. \n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5082453/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5106312", "body": "merged, thanks!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5106312/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5082700", "body": "may be worth seeing if python libraries for working with tarfiles are faster than the system call, can happen later though\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5082700/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5122428", "body": "mgw, are you actively working on this one?  If not, I may wish to tackle it soon (like this weekend).   Let me know!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5122428/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5167600", "body": "closing this, I'll still review a pull request for it but it's not on the must-have features list...\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5167600/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5095972", "body": "see comment made on commit\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5095972/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5096118", "body": "excellent, will try things out and merge shortly\n\nthanks!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5096118/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5098410", "body": "let's use some other seperator then, even though it may make less sense.\n\n\",port=\" would be pretty explicit and maybe even a little future proof ?\n\nwe'll also want to document whatever we decide in the docs project\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5098410/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5099458", "body": "Works for me.  If someone wants to make it work better with IPV6, hey can make additions on top of this patch.\n\nI suspect quite a few people will be using hostnames anyway.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5099458/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5100297", "body": "sidenote, an argument for ,port= would be that it would eventually also allow per host connection preferences, eg ,connection=something_other_than_ssh\n\nHowever we can still do that keeping the colon for the port, even if we did that.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5100297/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5101071", "body": "Much easier to type, doesn't imply functionality that isn't there  (ssh://user:host/...) etc.   It's not a full URI.\n\nAnyway, this is good enough for now.\n\nOn Thursday, April 12, 2012 at 5:22 PM, surekap wrote:\n\n> If you want to do that, then why not use the url scheme: ssh://host:port or telnet://host:port\n> \n> See my code commit - its easily possible to allow connection schemes.\n> \n> ------Original Message------\n> From: Michael DeHaan\n> To: Sureka, Prateek\n> Subject: Re: [ansible] Allow port override in hosts file (#134)\n> Sent: Apr 13, 2012 2:18 AM\n> \n> sidenote, an argument for ,port= would be that it would eventually also allow per host connection preferences, eg ,connection=something_other_than_ssh\n> \n> However we can still do that keeping the colon for the port, even if we did that.\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/ansible/ansible/pull/134#issuecomment-5100297\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/ansible/ansible/pull/134#issuecomment-5101002\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5101071/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5106386", "body": "Thanks...\n\nSorry to continue this discussion but I see a few things.  First off, I see you have scp.py in your branch, but it's not part of the pull request.  (commit ends in 'd0' per history in your branch)\n\nAlso, can you elaborate on when sftp wouldn't work?   Is it common to have it turned off on any particular distros?  Stock Fedora/CentOS does not have this problem and it's enabled stock.   I would rather avoid maintaining our own copy of a scp wrapper library (where did this come from originally, it may be widely used enough that we don't care).\n\nMy other minor issue is I see scp.py has a GPLv2+ copyright, Ansible is GPLv3+... though first question first :)\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5106386/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5106452", "body": "ok, yeah, these topics are mixed... how about we close this and you send me one pull request for the port stuff (which should be a very small patch) and we can leave the SCP stuff for a seperate discussion.  It is probably worth bringing up SCP on the mailing list.\n\nWhat may have happened is you sent me a pull request for the branch, and started to do something else on the same branch... whereas maybe the SCP stuff should have been on another branch and another pull request.\n\nAnyway, let me know if this is confusing.\n\nI want this in and fixed, so hang in there :)\n\nThanks.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5106452/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5113778", "body": "Thanks will take a look at this probably tonight.   Much appreciated.\n\nI would like to hold off on the SCP in the \"YAGNI\" case, given \"I suspect some VM appliances or those not using OpenSSH may have issues\" need some concerete examples first, otherwise it just introduces more test/maintaince/bitrot surface.   Further, it's not true neccessarily that it would have less external components, paramiko is still integral, and the SFTP I imagine is not a brittle component of that if the main parts are functional -- we have encountered one person with a very old openssh (2007) that had it off, but I'd rather not bend over backwards to keep that operational -- especially when running an SSH that isn't patched up has a whole numerous other load of potential security problems (not for ansible, just in general).\n\nAll the ones I'm aware of are using openssh.\n\nRegardless, thanks very much for splitting this and glad to have you adding stuff.  \n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5113778/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5167600", "body": "closing this, I'll still review a pull request for it but it's not on the must-have features list...\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5167600/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5167623", "body": "#152 is opened as a prereq for the local templates\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5167623/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5174745", "body": "merged, thanks!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5174745/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5174822", "body": "Excuse my gentoo ignorance, but what do you mean by live?  Are you maintaining it for the distribution itself (If so, very nice, if not, still nice).\n\nIf the goal is to be able to make packages from the Makefile, if you want to send me a pull request, we can keep this in the main tree.\n\nAdding a makefile target to build the gentoo package may be worthwhile, maybe move the RPM and gentoo stuff into a \"pkg/distroname\" subdirectory or something.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5174822/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5174855", "body": "Dag -- I don't understand, are you talking about facter/ohai?  In which case they do their own thing... or the proposal to add our own?   Seems to not be about this ticket, apologies for confusion.\n\nThis is about storing the variables from the host when setup runs, so it will only happen once per node and then make those variables available to templates, so I think, basically, it does what you want... facts get evaluated once per playbook.  If you are using vars_files, actually twice.  But not three times.  Three is right out.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5174855/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5174881", "body": "ok, I see you have your whole project there with lots of stuff rolled up together.\n\nIf you can let me know some instructions for gentoo users to use this, I can see about putting it up on the web documentation.\n\nThanks!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5174881/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5176444", "body": "yeah, triggering/update will happen once per play.   That's the extent of the caching and should be more than good enough.   They are not accessed on demand.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5176444/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5176963", "body": "the setup module will contain a lot of python code to automatically return some extra variables, all the time, more or less.  There will not be additional external facts in the initial implementation.   Once we change the way content is transferred (to the tarball approach in another ticket, probably) that can be revisited to support executable facts.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5176963/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5177386", "body": "wonder if we can remove that length check, as we want to support nested variables (dicts, arrays, etc) anyway...\n\nmerging for error fix\n\nthanks\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5177386/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5185859", "body": "notes to self:\n- easier to just make all playbook templating local\n- setup module always transfers results back, even if not running from playbook\n- template module gets shorter too\n- template module should also take a=2 b=3 c=4 kind of arguments\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5185859/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5188555", "body": "actually I think this is useful for the way we inject vars in, I was wrong earlier\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5188555/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5189285", "body": "merged, can you give me an example command line execution for setting all of these so I can show it in the docs?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5189285/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5189989", "body": "added to the geting started page, thank you!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5189989/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5190003", "body": "this is waiting on the following issues:\n- local template support\n- built-in facts\n- possibly the getvar(host, varname) function -- but not critical\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5190003/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5190013", "body": "this is closeable by #160, since we have that as a pull request I can go ahead and close that ticket.  Will look into testing PR tomorrow.  thanks again!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5190013/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5200498", "body": "Yeah -- I have some refactoring of templating in mind, similar to what you've done for inventory.  Haven't got a change to address this just yet, but it's clear there's need to clean all of this up before we start taking on too many new features.  \n\nBasically replacing SETUP_CACHE with an object that keeps track of all the variables and things ask the template module to compute the values for things on demand.   \n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5200498/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5200501", "body": "merged in, thanks\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5200501/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5200608", "body": "needs update, no corresponding change to makefile\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5200608/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5200935", "body": "does not compute, please explain.\n\nremember unit tests are going to be run on people from all platforms, so it seems like \"make rpms\" is the test\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5200935/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5203025", "body": "probably good enough with your docs addition, may want to note that the \"revert to default\" behavior though, as I would expect that leaving it off would leave it as is instead.\n\nCan it be made to do that, that would be more consistent w/ the remainder of how operations work?\n\nleaving off the file mode will never change the mode back, etc\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5203025/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5204858", "body": "Yeah I don't think this is unit test kind of stuff, IMHO, and would rather not maintain it.   Most projects don't go that far.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5204858/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5204886", "body": "Yeah I don't think we need this second part ... I hate that you spent time on this, but when in doubt I'd suggest asking upstream first.\n\nWe _DO_ need the first 645e7c3 so I can cherry-pick this, or you can send me a seperate PR for just that.   Let me know.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5204886/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5204956", "body": "Thanks for catching this...\n\nI think 3 is the least error prone as well.   Sounds good.\n\nIf we can make playbooks also work like that... maybe it might eliminate a common class of YAML errors?   It's easy to typo.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5204956/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5209336", "body": "pull request is against the wrong branch and probably needs to be using rebase vs merge... anyway, please let me know what SHA's to merge. \n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5209336/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5212840", "body": "done\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5212840/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5212970", "body": "merged manually, will share with the mailing list shortly, thanks VERY much for this, this will be tremendously useful.   awesome!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5212970/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5212993", "body": "hey Tim, sorry to be annoying -- do you know if MANIFEST.in can also be moved over into the packaging dir?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5212993/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5212999", "body": "thanks BTW, very nice to have the top level root have less stuff in it.   \n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5212999/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5213190", "body": "yeah, maybe just context=default could do the right thing ... I don't imagine anyone would ever choose to name a context 'default'.\n\nThanks!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5213190/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5213200", "body": "We're quite interested in getting some basic bastion host support going... wasn't aware paramiko could do that easily.\n\nsomething you might be interested in working on?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5213200/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5213602", "body": "done, pushing shortly.\n\nnon-playbook still requires remote for now, but we can fix this via slurping the metadata file so we can load it into memory and get the facts.   (Playbook already has facts, so no problem)\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5213602/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5214070", "body": "all templates are now local, remaining step is just the jinja2 extension to access the other host's variables.  This should only be legal for playbooks and probably needs to leverage SETUP_CACHE for now\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5214070/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5214205", "body": "I moved this to packaging/debian to line up with the packaging/rpm directory.\n\nLet me know if I need to change anything with regards to how I execute those commands, I assume I do.\n\nI'm checking in your notes into the packaging/debian directory so folks will know how to build things.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5214205/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5219774", "body": "agreed.\n\nPyYAML is required only if using ansible-playbook and the inventory file, so it COULD be conditionally included, but there is no reason to not include this for the spec.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5219774/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5219811", "body": "added PyYAML to the spec file on the integration branch\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5219811/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5220121", "body": "looks good, will merge/test this tonight.  Thanks!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5220121/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5220999", "body": "sure, yeah it is listed in the docs as a requirement anyway.\n\nNo sense having people go out of their way to avoid it...\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5220999/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5222864", "body": "make tests not passing is probably because your machine doesn't have your own host in authorized_keys, I'll note that in a README in the test dir.\n\nThey should normally pass, but obviously this isn't a code change so no problem.   Thank you, will look into merging tonight.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5222864/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5223535", "body": "good catch, this  should use os.path.expanduser ...\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5223535/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5224316", "body": "this is true, integration branch doesn't have this issue at all anymore.   Want to test the integration branch early?  :)\n\nThis release is due Monday, FWIW\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5224316/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/1401943", "body": "hey, FYI... I had to revert this because it was not returning the path back to the function.  When running as users other than root, such as:\n\nansible all -m ping -u test\n\nyou can see it tries to transfer a file to a directory containing the unsubstituted $HOME\n\nNot sure of the best way to fix this but check it out with a non root user...\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/1401943/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/1822311", "body": "Likely, will fix, thanks\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/1822311/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/2006552", "body": "I'll fix it, I need my cows.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/2006552/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/2006561", "body": "done!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/2006561/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/2044646", "body": "I am pleased.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/2044646/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/2271852", "body": "actually I'm probably going to drop supervisorctl from core as it's a bit of a niche module.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/2271852/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/2536497", "body": "Can you open a bug ticket?  if you commit on the commits the discussion can\nbe hard to find.\n\nOn Thu, Jan 31, 2013 at 11:07 AM, Luca Cipriani notifications@github.comwrote:\n\n> is this in conflict with\n> https://github.com/ansible/ansible/blob/devel/lib/ansible/playbook/play.py#L38? Because I have a ERROR:\n> private_key_file is not a legal parameter in an Ansible Playbook Seems\n> you have removed the functionality.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ansible/ansible/commit/f5c6457de8a21ba5f22312d33cd315da4d6d0bf1#commitcomment-2536398.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/2536497/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/2638641", "body": "minor suggestion: flatten deserves to be a function in utils ...\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/2638641/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/2681502", "body": "I find being able to keep more on the same screen useful in this case.\n\nI also fixed an indentation error.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/2681502/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/2756271", "body": "I tested it and it did.  Please paste your playbook?\n\nOn Thu, Mar 7, 2013 at 12:31 AM, Simon Law notifications@github.com wrote:\n\n> Sorry to be nitpicky\u2026 Don't these two lines have to occur before sourceand\n> dest are assigned to?\n> \n> Tested the patch and it doesn't work. [image: :frowning:]\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ansible/ansible/commit/2bb305f6d57cc6b8158ac8f82b978a7def552d57#commitcomment-2756268\n> .\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/2756271/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/2756273", "body": "Ah hmm, my file already existed.  This is what you get for making me work\njet-lagged :)\n\nTo be clear, the complex arg stuff was really done to support the cloud\nformations module, it's not common that you'd actually code playbooks this\nway most of the time, but it's important that it should work.\n\nThe\n\ntemplate: src=value dest=value\n\nis how you normally write them...\n\nOn Thu, Mar 7, 2013 at 12:32 AM, Michael DeHaan michael.dehaan@gmail.comwrote:\n\n> I tested it and it did.  Please paste your playbook?\n> \n> On Thu, Mar 7, 2013 at 12:31 AM, Simon Law notifications@github.comwrote:\n> \n> > Sorry to be nitpicky\u2026 Don't these two lines have to occur before sourceand\n> > dest are assigned to?\n> > \n> > Tested the patch and it doesn't work. [image: :frowning:]\n> > \n> > \u2014\n> > Reply to this email directly or view it on GitHubhttps://github.com/ansible/ansible/commit/2bb305f6d57cc6b8158ac8f82b978a7def552d57#commitcomment-2756268\n> > .\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/2756273/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/2756357", "body": "Totally, I'm excited about the option too.\n\nIt's cleaner than this:\n\nfoo: >\n   asdf=xyz\n   jkl=123\n\nAnd much more friendly to being machine readable.\n\nIt's just new, so pounding some bugs out of it is something we needed to do\n:)\n\nI especially like it now that you don't have to use \"args:\" and can just\nsay:\n- template:\n     src: asdf\n     dest: bar\n\nEtc.  This is pretty recent though I've pushed notes on that to the\nadvanced playbooks page of the docs site.  We did it so \"args\" keeps\nworking too though.\n\nOn Thu, Mar 7, 2013 at 12:41 AM, Simon Law notifications@github.com wrote:\n\n> I understand completely. Thanks for the support.\n> \n> Our use case is that we have some very long lines, and we use the complex\n> arguments so that our template lines are readable. We could have folded our\n> long lines, but the complex arguments looked the most aesthetically\n> pleasing.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ansible/ansible/commit/2bb305f6d57cc6b8158ac8f82b978a7def552d57#commitcomment-2756294\n> .\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/2756357/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/2967713", "body": "insert before or after just says where it should be.\n\nThat being said, I've said it, and I'll say it again... if you can have\nauthorative control over the file, use 'template' and not 'lineinfile' and\nit is a much easier thing to deal with.\n\nYou will also know you don't have outside things leaving the file in a\nstate you are unaware of.\n\nOn Mon, Apr 8, 2013 at 12:00 PM, Serge S. Koval notifications@github.comwrote:\n\n> I see. I was using documentation from the website and it was not\n> mentioning that line will be inserted if insertbefore/after is omitted.\n> \n> Thanks for quick response.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ansible/ansible/commit/f9b70822d24ef1480c7e744f7c8d8627f7051792#commitcomment-2967327\n> .\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/2967713/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/3617243", "body": "I've reverted this.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/3617243/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/3628913", "body": "I'd be happy to, but let's not comment on commits as that is hard for me to remember where the discussions are.\n\nCan you stop by the mailing list?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/3628913/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/3831767", "body": "Does this return meaningful data when yum is used with with_items now?   Looks like nothing is done in the \"not dict\" code path, where in that case we might want to still register the overall value.\n\nCould be reading it wrong.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/3831767/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/3990731", "body": "When you say defaults are combined directly into role parameters are inventory variables still lower priority?\n\nThis seems like that could possibly undo that behavior (making them non-defaults) since role variables are higher precedence than inventory.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/3990731/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/4148097", "body": "FYI: This may mess with \"make installed\" packages finding an old version since \"net_infrastructure\" is alphabetically first.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4148097/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/4411887", "body": "I would think we would just want to \".lower()\" on the string input here?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4411887/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/4411923", "body": "might want to remove the tight-loop vvvv call as that's going to slow down xfer and be a bit excessive in terms of output?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4411923/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/4432804", "body": "The correct way to say \"with_items\" BTW is\n\n\"with_items: pkg_list\"\n\nOn Fri, Oct 25, 2013 at 6:50 PM, jctanner notifications@github.com wrote:\n\n> @dbtucker https://github.com/dbtucker, please see #4666https://github.com/ansible/ansible/issues/4666\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/ansible/ansible/commit/7ac5e462efbc850dd39ce5746accf3012530ed98#commitcomment-4432530\n> .\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4432804/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/4718049", "body": "BTW, I'd rather you didn't comment on commits, it's easy to lose track of the emails.\n\nMuch better to comment on tickets, thanks!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4718049/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/4965983", "body": "The not creating the above error is more important.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4965983/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/5498443", "body": "FYI for others, this is because this includes the destructive tests as well and we want to add more granular targets.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5498443/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/5550332", "body": "Hi guys, comments on commits are going to get lost.   As there is already a ticket, it's easier to comment on the ticket.\n\nBrian's case is a bit of an invalid use case for comparison because he has some massively overloaded machines that take 5 minutes to gather facts on (perhaps making that a massively VALID case, but...) it's not the norm.\n\nUltimately the above behavior blocked the ability of a fact to change which was very very non-intuitive since in most cases people are not going to know they have to set gather_facts: True to force this, unless they very very deeply know the code.   \n\nIt was never documented and the \"tri-state boolean\" is well meaning but also a bit of an abomination.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5550332/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/5641057", "body": "Why did this get renamed?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5641057/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/5653345", "body": "FYI:  The commit message here really means \"mark safe commands\", as there is no way for input here to come from the user.  \n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5653345/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/5682908", "body": "I'm having to back this out as it has a dict comprehension in it, which makes the docs not buildable (or the module usable) on older pythons.   This will need to be updated, unfortunately to not use the dict comprehension.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5682908/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "skvidal": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [{"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4580668", "body": "So that seems to make simple things harder.\n\nthe obvious cases you'd see here are in pseudo-code:\n\nif $distrover == \"6\":\n    install somepkg\n    service  someprocess start\nelif $distrover == \"5\":\n    install someotherpkg\n    service  someotherprocess start\nelse:\n     error_print(\"$distrover doesn't match anything\")\n\nThat seems likely to be the most common case - being able to define a task is much like a function - and those are great - but the 'run these two things' seem like a really common case. With most languages it is very important to make the common things trivial and the uncommon things possible.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4580668/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4581071", "body": "it still feels like everything is defined far away from where you use it. I would expect the tasks section to get larger along  with the conditional_vars, too.\n\nso, conceptually something like this seems more reasonable for day-to-day use:\n\n```\n- name:  install apache\n- action: \n    if   \" $facter_os == 'Debian' \":\n        apt ensure=installed pkg=apache\n        service httpd start\n    elif  $facter_os == 'RedHat':\n        yum ensure=installed pkg=httpd\n        systemctl enable httpd.service\n    else:\n        error_msg(\"Could not action for facter_os = $facter_os\")\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4581071/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4580668", "body": "So that seems to make simple things harder.\n\nthe obvious cases you'd see here are in pseudo-code:\n\nif $distrover == \"6\":\n    install somepkg\n    service  someprocess start\nelif $distrover == \"5\":\n    install someotherpkg\n    service  someotherprocess start\nelse:\n     error_print(\"$distrover doesn't match anything\")\n\nThat seems likely to be the most common case - being able to define a task is much like a function - and those are great - but the 'run these two things' seem like a really common case. With most languages it is very important to make the common things trivial and the uncommon things possible.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4580668/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4581071", "body": "it still feels like everything is defined far away from where you use it. I would expect the tasks section to get larger along  with the conditional_vars, too.\n\nso, conceptually something like this seems more reasonable for day-to-day use:\n\n```\n- name:  install apache\n- action: \n    if   \" $facter_os == 'Debian' \":\n        apt ensure=installed pkg=apache\n        service httpd start\n    elif  $facter_os == 'RedHat':\n        yum ensure=installed pkg=httpd\n        systemctl enable httpd.service\n    else:\n        error_msg(\"Could not action for facter_os = $facter_os\")\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4581071/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4963380", "body": "I added state=[running|shutdown] and it returns changed.\nthe other commands are query commands for the most part and do not return changed information.;\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4963380/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "commit_comments": [], "review_comments": []}, "sfromm": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [{"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5098264", "body": "i'll take this\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5098264/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5492879", "body": "I'll take this.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5492879/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5097259", "body": "I updated my localconnection branch.  Take a look and let me know if that works.  Thanks.  :-)\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5097259/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5098264", "body": "i'll take this\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5098264/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5098351", "body": "it appears 8a177ec will have a problem if someone specifies an ipv6 address in their inventory file.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5098351/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5098400", "body": "pull request submitted.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5098400/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5097259", "body": "I updated my localconnection branch.  Take a look and let me know if that works.  Thanks.  :-)\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5097259/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5202884", "body": "Set the setype to some non-default value:\n\n```\n$ ansible test -i ../ansible-playbooks/ansible_hosts -m file -a \"setype=default_t path=/etc/exports\"\nlimbo | success >> {\n    \"changed\": true, \n    \"group\": \"root\", \n    \"mode\": 420, \n    \"path\": \"/etc/exports\", \n    \"secontext\": \"system_u:object_r:default_t:s0\", \n    \"state\": \"file\", \n    \"user\": \"root\"\n}\n```\n\nIf I remove the setype option, it will revert to the default:\n\n```\n$ ansible test -i ../ansible-playbooks/ansible_hosts -m file -a \"path=/etc/exports\"\nlimbo | success >> {\n    \"changed\": true, \n    \"group\": \"root\", \n    \"mode\": 420, \n    \"path\": \"/etc/exports\", \n    \"secontext\": \"system_u:object_r:exports_t:s0\", \n    \"state\": \"file\", \n    \"user\": \"root\"\n}\n```\n\nWould it help if I included an example playbook that exercised these options, similar to user_commands.yml?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5202884/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5203253", "body": "Yes, I can change the file module so that if you drop an selinux option it doesn't revert the context to default.  \n\nAn explicit option that sets the file's context to the default from the policy (if available) would be nice to have.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5203253/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "commit_comments": [], "review_comments": []}, "jkleint": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [{"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5334788", "body": "Is this the same capability mentioned as \"Local Playbooks\" in the documentation?\nhttp://ansible.github.com/playbooks.html#local-playbooks\nI'd like this capability, too, but if it's not implemented don't tease me with the docs.  ;)\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5334788/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "commit_comments": [], "review_comments": []}, "colinstreicher": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [{"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4944827", "body": "awesome, thanks :)\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4944827/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4944827", "body": "awesome, thanks :)\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4944827/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commit_comments": [], "review_comments": []}, "jhoekx": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [{"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4948311", "body": "I will try to explain it better.\n\nTemplating the include file is working OK, with the correct variables. It's the values used in the templates that are wrong. In my example above, both ifcfg-eth0 and ifcfg-eth1 will be identical.\n\nThe variables passed on to the include are 'leaked' to the play scope.\n\nThis is the code responsible for handling the includes:\n\n``` python\n        inject_vars = self._get_vars(play, dirname)\n        for i,x in enumerate(include_tokens):\n            if x.find(\"=\") != -1:\n                (k,v) = x.split(\"=\")\n                inject_vars[k] = v\n```\n\n`inject_vars` is per play. If variables have the same name, they will be overwritten. For use in the playbook includes, that does not matter. The first included file is fully templated before the variables of the second one are read. For remote execution, it does matter. Setup transfers the variables to /etc/ansible/setup. This happens after the whole play has been processed.\n\nA complete, simple example:\n\nThe main playbook:\n\n``` yaml\n---\n- hosts: rh5man\n  tasks:\n  - include: hello.yml nr=1 value=\"worldA\"\n  - include: hello.yml nr=2 value=\"worldB\"\n```\n\nhello.yml:\n\n``` yaml\n---\n- name: Print hello {{ nr }}\n  action: template src=res/hello.txt dest=/root/hello-{{ nr }}.txt\n```\n\nhello.txt:\n\n```\n{{ value }}\n\n```\n\nThe result:\n\n``` bash\n[root@rh5man ~]# tail hello-*\n==> hello-1.txt <==\nworldB\n==> hello-2.txt <==\nworldB\n```\n\nThe expected result:\n\n``` bash\n[root@rh5man ~]# tail hello-*\n==> hello-1.txt <==\nworldA\n==> hello-2.txt <==\nworldB\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4948311/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4948311", "body": "I will try to explain it better.\n\nTemplating the include file is working OK, with the correct variables. It's the values used in the templates that are wrong. In my example above, both ifcfg-eth0 and ifcfg-eth1 will be identical.\n\nThe variables passed on to the include are 'leaked' to the play scope.\n\nThis is the code responsible for handling the includes:\n\n``` python\n        inject_vars = self._get_vars(play, dirname)\n        for i,x in enumerate(include_tokens):\n            if x.find(\"=\") != -1:\n                (k,v) = x.split(\"=\")\n                inject_vars[k] = v\n```\n\n`inject_vars` is per play. If variables have the same name, they will be overwritten. For use in the playbook includes, that does not matter. The first included file is fully templated before the variables of the second one are read. For remote execution, it does matter. Setup transfers the variables to /etc/ansible/setup. This happens after the whole play has been processed.\n\nA complete, simple example:\n\nThe main playbook:\n\n``` yaml\n---\n- hosts: rh5man\n  tasks:\n  - include: hello.yml nr=1 value=\"worldA\"\n  - include: hello.yml nr=2 value=\"worldB\"\n```\n\nhello.yml:\n\n``` yaml\n---\n- name: Print hello {{ nr }}\n  action: template src=res/hello.txt dest=/root/hello-{{ nr }}.txt\n```\n\nhello.txt:\n\n```\n{{ value }}\n\n```\n\nThe result:\n\n``` bash\n[root@rh5man ~]# tail hello-*\n==> hello-1.txt <==\nworldB\n==> hello-2.txt <==\nworldB\n```\n\nThe expected result:\n\n``` bash\n[root@rh5man ~]# tail hello-*\n==> hello-1.txt <==\nworldA\n==> hello-2.txt <==\nworldB\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/4948311/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5224191", "body": "This was already fixed in integration  by 9e0b7ee6292afaf0568a7795bed46b99e9a7e7e4 and all code in there has been removed by the recent refactoring.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5224191/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5224244", "body": "You need to change the symlink /usr/bin/python to point to /usr/bin/python2 instead of /usr/bin/python3 for tests to pass on Arch.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5224244/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5224779", "body": "@leucos, are you on master or integration? 6f09b41eb5851cab2c0b8d8e91998977405e98b4 fixes all tests for me. I'm also on Arch.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5224779/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "commit_comments": [], "review_comments": []}, "weaselkeeper": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [{"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5369488", "body": "Looking at the devel codebase, this is already done? \n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5369488/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "commit_comments": [], "review_comments": []}, "wm-pseudo": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [{"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5461481", "body": "I can assure that this feature is badly needed in our case. We have centralized accounts and home directories for logging in, but our software must be run as a local non-root user. Please consider re-opening the issue and raising the priority.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5461481/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commit_comments": [], "review_comments": []}, "surekap": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [{"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5096106", "body": "Yes. I tested it. It works with hostnames and host.domain syntax as well.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5096106/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5099417", "body": "I personally think its best to stick to the [RFC3986](http://tools.ietf.org/html/rfc3986) standard to avoid having to learn a new syntax. According to the spec, IPv6 URLS should be enclosed in box brackets \"[]\". Hence: [ff:ff:ff:ff:ff:ff:ff:ff]:22 is valid syntax.\n\nI suggest we use regexes if necessary to pull out the ipv6 address.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5099417/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5099689", "body": "Or even better - the urlparse module\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5099689/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5101002", "body": "If you want to do that, then why not use the url scheme: ssh://host:port or telnet://host:port\n\nSee my code commit - its easily possible to allow connection schemes.\n\n------Original Message------\nFrom: Michael DeHaan\nTo: Sureka, Prateek\nSubject: Re: [ansible] Allow port override in hosts file (#134)\nSent: Apr 13, 2012 2:18 AM\n\nsidenote, an argument for ,port= would be that it would eventually also allow per host connection preferences, eg ,connection=something_other_than_ssh\n\nHowever we can still do that keeping the colon for the port, even if we did that.\n\n---\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/ansible/ansible/pull/134#issuecomment-5100297\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5101002/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5096106", "body": "Yes. I tested it. It works with hostnames and host.domain syntax as well.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5096106/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5099417", "body": "I personally think its best to stick to the [RFC3986](http://tools.ietf.org/html/rfc3986) standard to avoid having to learn a new syntax. According to the spec, IPv6 URLS should be enclosed in box brackets \"[]\". Hence: [ff:ff:ff:ff:ff:ff:ff:ff]:22 is valid syntax.\n\nI suggest we use regexes if necessary to pull out the ipv6 address.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5099417/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5099689", "body": "Or even better - the urlparse module\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5099689/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5101002", "body": "If you want to do that, then why not use the url scheme: ssh://host:port or telnet://host:port\n\nSee my code commit - its easily possible to allow connection schemes.\n\n------Original Message------\nFrom: Michael DeHaan\nTo: Sureka, Prateek\nSubject: Re: [ansible] Allow port override in hosts file (#134)\nSent: Apr 13, 2012 2:18 AM\n\nsidenote, an argument for ,port= would be that it would eventually also allow per host connection preferences, eg ,connection=something_other_than_ssh\n\nHowever we can still do that keeping the colon for the port, even if we did that.\n\n---\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/ansible/ansible/pull/134#issuecomment-5100297\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5101002/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5108606", "body": "My simple case for SCP is that it makes ansible more resilient and able to depend less on external components.\n\nI checked Debian Lenny and Squeeze and they seem to have it on, but I suspect some VM appliances or those not using OpenSSH may have issues.\n\nI agree that we shouldn't have to maintain a new library - I sent out the link from where I got the file (original credits are intact).\nhttp://bazaar.launchpad.net/~jbardin-deactivatedaccount/paramiko/paramiko_scp/view/head:/paramiko/scp.py\n\nIt is GPLv2+ but liberally allows repackaging as GPLv3+ at your option:\n\n# This program is free software; you can redistribute it and/or modify\n\n# it under the terms of the GNU General Public License as published by\n\n# the Free Software Foundation; either version 2 of the License, or\n\n# (at your option) any later version.\n\nAt any rate, in case you don't want a separate file/library, the nuts and bolts of scp seems minimal enough that we can inline it into connections.py (at the cost of some code complexity).\n\nOn 13-Apr-2012, at 6:17 AM, Michael DeHaan wrote:\n\n> Thanks...\n> \n> Sorry to continue this discussion but I see a few things.  First off, I see you have scp.py in your branch, but it's not part of the pull request.  (commit ends in 'd0' per history in your branch)\n> \n> Also, can you elaborate on when sftp wouldn't work?   Is it common to have it turned off on any particular distros?  Stock Fedora/CentOS does not have this problem and it's enabled stock.   I would rather avoid maintaining our own copy of a scp wrapper library (where did this come from originally, it may be widely used enough that we don't care).\n> \n> My other minor issue is I see scp.py has a GPLv2+ copyright, Ansible is GPLv3+... though first question first :)\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/ansible/ansible/pull/134#issuecomment-5106386\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5108606/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5108608", "body": "Created a new pull request (with just the urlparse code).\n\nOn 13-Apr-2012, at 6:23 AM, Michael DeHaan wrote:\n\n> ok, yeah, these topics are mixed... how about we close this and you send me one pull request for the port stuff (which should be a very small patch) and we can leave the SCP stuff for a seperate discussion.  It is probably worth bringing up SCP on the mailing list.\n> \n> What may have happened is you sent me a pull request for the branch, and started to do something else on the same branch... whereas maybe the SCP stuff should have been on another branch and another pull request.\n> \n> Anyway, let me know if this is confusing.\n> \n> I want this in and fixed, so hang in there :)\n> \n> Thanks.\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/ansible/ansible/pull/134#issuecomment-5106452\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5108608/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commit_comments": [], "review_comments": []}, "mgwilliams": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [{"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5167614", "body": "Yes, I'm working on it... I was away since Wednesday, so a bit backed up.\n\nOn Mon, Apr 16, 2012 at 11:21 PM, Michael DeHaan\nreply@reply.github.com\nwrote:\n\n> closing this, I'll still review a pull request for it but it's not on the must-have features list...\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/ansible/ansible/issues/133#issuecomment-5167600\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5167614/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5167614", "body": "Yes, I'm working on it... I was away since Wednesday, so a bit backed up.\n\nOn Mon, Apr 16, 2012 at 11:21 PM, Michael DeHaan\nreply@reply.github.com\nwrote:\n\n> closing this, I'll still review a pull request for it but it's not on the must-have features list...\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/ansible/ansible/issues/133#issuecomment-5167600\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5167614/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commit_comments": [], "review_comments": []}, "uu": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [{"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5175290", "body": "<pre>\nHi, that's not necessary  :) \n\nebuild is a recipe for how to build up the app. Like ports in *BSD.  Live means it gets the source from VCS and thus has no tagged version. Whenever installed \u2013 it's fresh pulled from repo. Probably, I'll add a tagged one soon which will fetch tarballs from github.\n\nSome developers has a quick instruction on how to install it in gentoo. For ansible it can look like:\n\n1. Install layman \n Enable git useflag\necho 'app-portage/layman git' >> /etc/portage/package.use\n Verify layman version and useflags and install it\nemerge -av layman\n\n2. Add ubuilds repository definition to list in \"/etc/layman/layman.cfg\"\n\noverlays: http://www.gentoo.org/proj/en/overlays/repositories.xml\n                http://github.com/uu/ubuilds/raw/master/ubuilds.xml\n3. Fetch + list repositories \n Update and list all available repositories\nlayman -L\n\n4.  Add ubuilds overlay \nlayman -a ubuilds\n\n5. Update \"/etc/make.conf\" to include the layman-managed repositories \n add this line at the end\nsource /var/lib/layman/make.conf\n\n6. Install ansible\n\nemerge -av ansible\n\nThat's it! :)\n\nOr, it's okay to add \u201cGentoo ebuilds are <a href='http://github.com/uu/ubuilds.git'>here</a>\u201d  to some docs. Who needs it, already knows instruction listed above. Thanks.\n</pre>\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5175290/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commit_comments": [], "review_comments": []}, "tbielawa": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [{"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5180937", "body": "Updated bugzilla:\n\nhttps://bugzilla.redhat.com/show_bug.cgi?id=809882#c3\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5180937/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5203204", "body": "These changes have been merged into #169\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5203204/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5203806", "body": "This is a consistency thing. Store a canonical test for the build-system with the rest of the unit tests.\n\nIt ends up letting you run one command to:\n- Build the rpm && srpm\n- Capture the build logs for both (instead of screen vomit)\n- See the individual build results\n- Check that the files are building with the correct names && versions\n\nSo there is some actual sanity checking introduced. Let me know if you're not interested.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5203806/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "commit_comments": [], "review_comments": []}, "laroche": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [{"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5217563", "body": "Installing ansible on a stripped down installation shows that even basic commands need PyYAML\ninstalled, so I think this should be added as an \"Requires:\" to the spec file.\n\nbest regards,\n\nFlorian La Roche\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5217563/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5220650", "body": "Even for ping, PyYAML seems to get dragged in:\n\nansible 10.251.252.20 -m ping\nTraceback (most recent call last):\n  File \"/usr/bin/ansible\", line 27, in <module>\n    import ansible.runner\n  File \"/usr/lib/python2.6/site-packages/ansible/runner.py\", line 35, in <module>\n    from ansible import utils\n  File \"/usr/lib/python2.6/site-packages/ansible/utils.py\", line 25, in <module>\n    import yaml\nImportError: No module named yaml\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5220650/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commit_comments": [], "review_comments": []}, "leucos": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [{"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5221691", "body": "Note that tests doesn't pass. Since they didn't before on my machine, and since no python has been written, the PR shouldn't harm any kitten around.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5221691/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5222501", "body": "# Installing on Arch with AUR\n\nansible is available on [AUR](https://aur.archlinux.org/packages.php?ID=58621)\n\n## Installing with yaourt\n\n```\nyaourt -S ansible-git\n```\n\n## Installing with pacman\n\n```\ncurl https://aur.archlinux.org/packages/an/ansible-git/PKGBUILD -sfO && \\\nmakepkg -sic\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5222501/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5224608", "body": "Thanks jhoekx, I've already done that. Most of the tests work but some don't. I will investigate further later on and open a specific issue on this if it persists.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5224608/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5227063", "body": "@jhoekx tests on integration branch runs fine, but 4 of them fail on master branch : https://gist.github.com/2422412 (note : no facter here, might be one of the causes)\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/issues/comments/5227063/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/2554038", "body": "Seems that this commit breaks devel for me :\n\n```\n((a79373f...)|BISECTING) $ python2 bin/ansible-playbook -l goat ~/.ansible/playbooks/tmux/setup.yml \n\nPLAY [ubuntu] ********************* \n\nGATHERING FACTS ********************* \nok: [goat]\n\nTASK: [Tmux | Installs tmux] ********************* \nfatal: [goat] => Traceback (most recent call last):\n  File \"/home/leucos/dev/ansible/lib/ansible/runner/__init__.py\", line 237, in _executor\n    exec_rc = self._executor_internal(host)\n  File \"/home/leucos/dev/ansible/lib/ansible/runner/__init__.py\", line 293, in _executor_internal\n    return self._executor_internal_inner(host, self.module_name, self.module_args, inject, port)\n  File \"/home/leucos/dev/ansible/lib/ansible/runner/__init__.py\", line 353, in _executor_internal_inner\n    if not getattr(handler, 'BYPASS_HOST_LOOP', False) and not utils.check_conditional(conditional):\n  File \"/home/leucos/dev/ansible/lib/ansible/utils/__init__.py\", line 155, in check_conditional\n    return eval(conditional.replace(\"\\n\", \"\\\\n\"))\nAttributeError: 'bool' object has no attribute 'replace'\n\n\nFATAL: all hosts have already failed -- aborting\n\nPLAY RECAP ********************* \ngoat                           : ok=1    changed=0    unreachable=1    failed=0    \n\n\n((a79373f...)|BISECTING) $\n```\n\nI'll try to set up a minimal example to reproduce.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/2554038/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "pas256": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/1773303", "body": "That's a smarter fix - thanks\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/1773303/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "serbaut": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/1822272", "body": "I think you are missing 'ansible.runner.action_plugins' here.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/1822272/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "jejohns": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/2006548", "body": "This broke cowsay for everyone else. :(\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/2006548/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/2006560", "body": "Thank you! This is breaking our cowsay SLA.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/2006560/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "mastrolinux": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/2536398", "body": "is this in conflict with https://github.com/ansible/ansible/blob/devel/lib/ansible/playbook/play.py#L38 ? Because I have a `ERROR: private_key_file is not a legal parameter in an Ansible Playbook` Seems you have removed the functionality.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/2536398/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "briceburg": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/2633554", "body": "+1 muchos gracias! Works with $PIPE as well.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/2633554/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "jmrodri": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/2681378", "body": "I know it's old, but the above looked easier to read :) It probably wasted a lot of space in a file, but it's definitely easier to look at. :D \n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/2681378/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/2681801", "body": "I figured there was a reason.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/2681801/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "sfllaw": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/2756294", "body": "I understand completely. Thanks for the support.\n\nOur use case is that we have some very long lines, and we use the complex arguments so that our template lines are readable. We could have folded our long lines, but the complex arguments looked the most aesthetically pleasing.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/2756294/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "blair": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/2822649", "body": "Reading the URL at Amazon, isn't this the reverse logic?  EBS volumes should use /dev/sdf while local storage should use /dev/sdb?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/2822649/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "tima": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/2862436", "body": "This commit broke a unit test:\n\n```\nRegression\n\nTestRunner.TestRunner.test_lineinfile (from nosetests)\n\nError Message\n\n-------------------- >> begin captured stdout << ---------------------\nDEBUG: using args=dest=/.statelite/tmpfs/data/VCS/est-ax010-d/logs01/jenkins/workspace/ansible-devel/test/test_data/rocannon.out.txt regexp='^First: ' line='First: Line added by default at the end of the file.'\nRESULTS={'dark': {}, 'contacted': {'localhost': {u'msg': u'', 'invocation': {'module_name': 'lineinfile', 'module_args': \"dest=/.statelite/tmpfs/data/VCS/est-ax010-d/logs01/jenkins/workspace/ansible-devel/test/test_data/rocannon.out.txt regexp='^First: ' line='First: Line added by default at the end of the file.'\"}, u'changed': False}}}\n\n--------------------- >> end captured stdout << ----------------------\n\nStacktrace\n\nTraceback (most recent call last):\n  File \"/efs/dist/python/core/2.6.5/exec/lib/python2.6/unittest.py\", line 279, in run\n    testMethod()\n  File \"/.statelite/tmpfs/data/VCS/est-ax010-d/logs01/jenkins/workspace/ansible-devel/test/TestRunner.py\", line 308, in test_lineinfile\n    assert result['changed'] == True\nAssertionError: \n-------------------- >> begin captured stdout << ---------------------\nDEBUG: using args=dest=/.statelite/tmpfs/data/VCS/est-ax010-d/logs01/jenkins/workspace/ansible-devel/test/test_data/rocannon.out.txt regexp='^First: ' line='First: Line added by default at the end of the file.'\nRESULTS={'dark': {}, 'contacted': {'localhost': {u'msg': u'', 'invocation': {'module_name': 'lineinfile', 'module_args': \"dest=/.statelite/tmpfs/data/VCS/est-ax010-d/logs01/jenkins/workspace/ansible-devel/test/test_data/rocannon.out.txt regexp='^First: ' line='First: Line added by default at the end of the file.'\"}, u'changed': False}}}\n\n--------------------- >> end captured stdout << ----------------------\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/2862436/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/2862663", "body": "Assuming I understand the intent of this code, I think is where the problem is: \n\n```\n# Do nothing if regexp didn't match\n    elif index[1] == -1:\n        msg = ''\n        changed = False \n```\n\nIt looks like the regexp match is being stored in index[0] and not index[1] based on this preceding code there:\n\n```\n# index[0] is the line num where regexp has been found\n# index[1] is the line num where insertafter/inserbefore has been found\nindex = [-1, -1]\nm = None\nfor lineno in range(0, len(lines)):\n    match_found = mre.search(lines[lineno])\n    if match_found:\n        index[0] = lineno\n        m = match_found\n    elif insre is not None and insre.search(lines[lineno]):\n        if insertafter:\n            # + 1 for the next line\n            index[1] = lineno + 1\n        if insertbefore:\n            # + 1 for the previous line\n            index[1] = lineno\n```\n\nEither the comment is wrong or the logic.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/2862663/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "Tinche": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/2870423", "body": "Probably it's the comment that's wrong; the author was probably referring to the insert\\* regexp.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/2870423/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/2967177", "body": "That's how it's supposed to work, I believe. The module never actually looks for the line, it looks for the regexp. The regexp should generally be related to the line.\n\nThink of it like this: the lineinfile module ensures your line is in the file. The regexp allows you to be smart about it.\n\nIn 1.1 though, you can use backrefs=yes and you'll get your desired behaviour (you don't actually have to use capturing groups or backreferences in your regexp/line). The main doc site hasn't been updated yet so I suggest you look in the lineinfile module itself here on github, the documentation is at the top.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/2967177/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "gw0": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/2954275", "body": "I think this is a useful advanced usage pattern that shows how Ansible can work in practice. Imho it should be placed in a \"advanced usage examples\" subpage with a notice describing how the scope changes.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/2954275/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "mrjoes": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/2966968", "body": "I'm sorry, but this particular change broke lineinfile with state='present'.\n\nConsider following example: lineinfile: dest=file.txt state=present regexp='abcd' line='1234'\n\nExpected behaviour: if 'abcd' is present, it should be replaced by '1234'.\nWhat actually happens:\n1. If line is found in the file, it will be replaced by the '1234'\n2. If line is not found in the file, it will be appended to the end of the file\n\nAssuming that all scripts should be re-runnable, every single run of the deployment script will append extra line to the configuration file and in lots of cases will prevent dependant programs from working.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/2966968/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/2967327", "body": "I see. I was using documentation from the website and it was not mentioning that line will be inserted if insertbefore/after is omitted.\n\nThanks for quick response.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/2967327/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "pwi": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/3034154", "body": "Hi,\n\nRan into this commit when trying to track down tmp files left on remote machines after a copy action.  The change from rename to copy is what's causing it, however I don't think adding a remove after the copy is the right fix.  The function is \"atomic_replace\" but a copy/move operation isn't atomic (os.rename is).\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/3034154/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "devdave": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/3064604", "body": "This can be problematic as `/usr/bin/env python` will correctly call an active virtualenv ( that houses boto + ansible ) but not when boto is not installed to the system libraries.  Also most example recipes of using ec2 show it in combination with local_action which would justify it's non-conformant shabang.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/3064604/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "glensc": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/3251193", "body": "formatting error :)\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/3251193/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "analytically": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/3462322", "body": "This breaks my build: \n\n```\nfailed: [82.196.9.193] => (item=http://www.dotdeb.org/dotdeb.gpg) => {\"failed\": true, \"item\": \"http://www.dotdeb.org/dotdeb.gpg\", \"parsed\": false}\ninvalid output was: Traceback (most recent call last):\n  File \"/root/.ansible/tmp/ansible-1371676427.12-149426090685632/apt_key\", line 1115, in <module>\n    main()\n  File \"/root/.ansible/tmp/ansible-1371676427.12-149426090685632/apt_key\", line 180, in main\n    add_key(module, (file if file else \"-\"), data)\nTypeError: add_key() takes exactly 2 arguments (3 given)\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/3462322/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/4066143", "body": "This breaks ansible for me! \n\n`\n  File \"/usr/local/lib/python2.7/dist-packages/ansible/runner/__init__.py\", line 382, in _executor\n    exec_rc = self._executor_internal(host, new_stdin)\n  File \"/usr/local/lib/python2.7/dist-packages/ansible/runner/__init__.py\", line 471, in _executor_internal\n    return self._executor_internal_inner(host, self.module_name, self.module_args, inject, port, complex_args=complex_args)\n  File \"/usr/local/lib/python2.7/dist-packages/ansible/runner/__init__.py\", line 654, in _executor_internal_inner\n    result = handler.run(conn, tmp, module_name, module_args, inject, complex_args)\n  File \"/usr/local/lib/python2.7/dist-packages/ansible/runner/action_plugins/template.py\", line 91, in run\n    local_md5 = utils.md5s(resultant)\n  File \"/usr/local/lib/python2.7/dist-packages/ansible/utils/__init__.py\", line 409, in md5s\n    digest.update(buf.read())\nUnicodeEncodeError: 'ascii' codec can't encode character u'\\ufb01' in position 2671: ordinal not in range(128)\n`\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4066143/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/4074796", "body": "No, it works fine with the previous lines of code.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4074796/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/6055115", "body": "Since this change I'm getting:\n\n```\nfailed: [localhost] => {\"failed\": true, \"parsed\": false}\ninvalid output was: SUDO-SUCCESS-umwahcfjzseghjcnmptdvqqgecosntvk\nTraceback (most recent call last):\n  File \"/home/mathias/.ansible/tmp/ansible-tmp-1397825296.08-25437297859926/docker\", line 1919, in <module>\n    main()\n  File \"/home/mathias/.ansible/tmp/ansible-tmp-1397825296.08-25437297859926/docker\", line 697, in main\n    manager.start_containers(deployed_containers)\n  File \"/home/mathias/.ansible/tmp/ansible-tmp-1397825296.08-25437297859926/docker\", line 579, in start_containers\n    self.client.start(i['Id'], **params)\nTypeError: start() got an unexpected keyword argument 'dns'\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/6055115/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "ccollicutt": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/3471502", "body": "Breaks for me too:\n\n``` shell\nfailed: [curtis_test_meter] => {\"failed\": true, \"parsed\": false}\ninvalid output was: Traceback (most recent call last):\n  File \"/home/vagrant/.ansible/tmp/ansible-1371759756.28-177588468087411/apt_key\", line 1115, in <module>\n    main()\n  File \"/home/vagrant/.ansible/tmp/ansible-1371759756.28-177588468087411/apt_key\", line 180, in main\n    add_key(module, (file if file else \"-\"), data)\nTypeError: add_key() takes exactly 2 arguments (3 given)\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/3471502/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "sklaus": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/3475532", "body": "The white space indention on line 248 to 251 is wrong. This change is not working and should be reverted.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/3475532/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "steffkes": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/3511844", "body": "@mpdehaan fixed that one with f3093cbb1a4171297c61dbc28794a9bccab9637c right now, thanks again :) \n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/3511844/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "tyll": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/3563538", "body": "This should IMHO be `os.makedirs(path, 0700)`\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/3563538/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/3563546", "body": "The lockfile is not removed after using. I am not sure, what would be best here, because just removing files from the users homedir would be wrong, since there is no check that the lockfile was created by ansible.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/3563546/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/3564174", "body": "The path to the keyfile should probably be add to config, since openssh also allows to specify a different one. Also there might be global known hosts file which default to:\n/etc/ssh/ssh_known_hosts, /etc/ssh/ssh_known_hosts2 (see man ssh_config,GlobalKnownHostsFile and UserKnownHostsFile )\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/3564174/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "ipauldev": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/3614600", "body": "This commit causes the following issue on my machine when running a playbook with an imported inventory file:\n\n```\n<myserver.mydomain.com> ESTABLISH CONNECTION FOR USER: cq\n<myserver.mydomain.com> EXEC ['ssh', '-tt', '-q', '-o', 'ControlMaster=auto', '-o', 'ControlPersist=60s', '-o', 'ControlPath=/tmp/ansible-ssh-%h-%p-%r', '-o', 'Port=22', '-o', 'KbdInteractiveAuthentication=no', '-o', 'PasswordAuthentication=no', '-o', 'User=cq', '-o', 'ConnectTimeout=10', 'myserver.mydomain.com', \"/bin/sh -c 'mkdir -p /home/ipauldev/.ansible/tmp/ansible-1373558723.98-238619182609175 && chmod a+rx /home/ipauldev/.ansible/tmp/ansible-1373558723.98-238619182609175 && echo /home/ipauldev/.ansible/tmp/ansible-1373558723.98-238619182609175'\"]\n<myserver.mydomain.com> REMOTE_MODULE setup  CHECKMODE=True\n<myserver.mydomain.com> PUT /tmp/tmp90a9wE TO mkdir: cannot create directory `/home/ipauldev': Permission denied/setup\n<myserver.mydomain.com> EXEC ['ssh', '-tt', '-q', '-o', 'ControlMaster=auto', '-o', 'ControlPersist=60s', '-o', 'ControlPath=/tmp/ansible-ssh-%h-%p-%r', '-o', 'Port=22', '-o', 'KbdInteractiveAuthentication=no', '-o', 'PasswordAuthentication=no', '-o', 'User=cq', '-o', 'ConnectTimeout=10', 'myserver.mydomain.com', '/bin/sh -c \\'/usr/bin/python mkdir: cannot create directory `/home/ipauldev\\'\"\\'\"\\': Permission denied/setup\\'']\n\nfailed: [myserver.mydomain.com] => {\"failed\": true, \"parsed\": false}\ninvalid output was: /bin/sh: 1: Syntax error: EOF in backquote substitution\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/3614600/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "mmonaco": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/3628515", "body": "Hey,\n\nCould you elaborate on this? The target of a symlink is just an arbitrary (nonempty for some OSs) string. So why does an abs_src need to be calculated in the first place, and why does it need to exist?\n\nThanks,\nMatt\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/3628515/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "reedobrien": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/4036836", "body": "This commit breaks reading and using the set inventory parameter ansible_python_interpreter and perhaps other parameters as well. However, we did not test others only that this commit prevents the correct interpreter and its packages from getting used.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4036836/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "dekked": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/4143585", "body": "This commit broke ansible-playbook for me.\n\n```\nTraceback (most recent call last):\n  File \"/usr/local/bin/ansible-playbook\", line 268, in <module>\n    sys.exit(main(sys.argv[1:]))\n  File \"/usr/local/bin/ansible-playbook\", line 208, in main\n    pb.run()\n  File \"/usr/local/lib/python2.7/dist-packages/ansible/playbook/__init__.py\", line 228, in run\n    play = Play(self, play_ds, play_basedir)\n  File \"/usr/local/lib/python2.7/dist-packages/ansible/playbook/play.py\", line 79, in __init__\n    ds = self._load_roles(self.roles, ds)\n  File \"/usr/local/lib/python2.7/dist-packages/ansible/playbook/play.py\", line 289, in _load_roles\n    nt = dict(include=pipes.quote(task), vars=role_vars, default_vars=default_vars, role_name=role['role'])\nTypeError: string indices must be integers, not str\n```\n\nLooks like `role_name=role['role']` doesn't work because `role` is a string, the actual name of the role.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4143585/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/4480515", "body": "Something stopped working after this commit, particularly when I have a variable that is a JSON (starts with \"{\").\n\nI was passing `instance_tags: \"{{ instance_tags|to_json }}\"` to the ec2 module inside a role, where:\n\n```\n    - role: launch_instance\n      instance_tags:\n        Name: the_name\n        other: value\n```\n\nAnd it doesn't work anymore.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4480515/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/4480560", "body": "The traceback:\n\n``` python\nfailed: [127.0.0.1] => {\"failed\": true, \"item\": \"\", \"parsed\": false}\ninvalid output was: Traceback (most recent call last):\n  File \"/home/alan/.ansible/tmp/ansible-1383240982.97-5472711050697/ec2\", line 1587, in <module>\n    main()\n  File \"/home/alan/.ansible/tmp/ansible-1383240982.97-5472711050697/ec2\", line 645, in main\n    (instance_dict_array, new_instance_ids, changed) = create_instances(module, ec2)\n  File \"/home/alan/.ansible/tmp/ansible-1383240982.97-5472711050697/ec2\", line 479, in create_instances\n    ec2.create_tags(instids, module.from_json(instance_tags))\n  File \"/home/alan/.ansible/tmp/ansible-1383240982.97-5472711050697/ec2\", line 1402, in from_json\n    return json.loads(data)\n  File \"/usr/lib/python2.7/json/__init__.py\", line 328, in loads\n    return _default_decoder.decode(s)\n  File \"/usr/lib/python2.7/json/decoder.py\", line 365, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\nTypeError: expected string or buffer\n\n\nFATAL: all hosts have already failed -- aborting\n\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4480560/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/4481292", "body": "Filed here https://github.com/ansible/ansible/issues/4753\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4481292/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "orkaa": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/4223951", "body": "Hey jimi-c,\n\nCan you tell me which OS you used to test this? It's not working on debian at all. Especially lines:\n\n``` python\nelif self.enable and line.find('do not exist') != -1: \n```\n\nand\n\n``` python\nelif not self.enable and line.find('already exist') != -1:\n```\n\nDebian output from dry running update-rc.d is:\n\n``` bash\nroot@localhost:/# update-rc.d -n <my_script> enable\nupdate-rc.d: using dependency based boot sequencing\nupdate-rc.d: error: no runlevel symlinks to modify, aborting!\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4223951/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/4224595", "body": "No, it's debian's sysv script located in \"/etc/init.d/<script>\". Ansible tries to manage it with update-rc.d but fails to recognize it needs changes and as a consequence \"- service: name=<script> enabled=yes\" doesn't create the necessary links to /etc/rc.d\n\nI'll test how it behaves on ubuntu and try to fix it on debian (squeeze). \n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4224595/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/4232839", "body": "jimi-c, I opened a pull request, please test if it works for you.\n\nhttps://github.com/ansible/ansible/pull/4336\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4232839/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "hura": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/4303152", "body": "Will this stay the way? ie if I pass:\n\n```\nmysql_user:\n  (yada yada)\n  password: null\n```\n\nin my playbook, then this will not change a user's password. Which is nice since this is wanted sometimes (to keep track of privileges only and let the user change the password). Can this be documented or is this just coincidence?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4303152/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "haskjold": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/4310066", "body": "Hi\n\nPlease also match this against lsb id for RHEL4 as \"ip -6 route get\" causes kernel panics also on RHEL4.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4310066/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "ligustah": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/4355256", "body": "This breaks when no key_id is provided (which is the default).\n`TypeError: int() can't convert non-string with explicit base`\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4355256/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/4453575", "body": "I may be wrong here, but your new db_import function looks merely like a copy of db_dump, and hence doesn't actually import anything. At least it wouldn't do the import in my tests and I doubt mysqldump can be used to import dumps.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4453575/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "mmoya": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/4355464", "body": "Uploading fix ASAP... I missed the `key_id` is optional thing. Thanks for the report.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4355464/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "jcftang": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/4374929", "body": "it might be better to check for ubuntudistribution first, this change currently breaks when repo='ppa:someuser/somerepo' is given to the module.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4374929/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "dbtucker": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/4432519", "body": "This is NOT a good solution.   Imagine the case where a series of packages from a common provider are installed ... so that a prefix is needed.\nvars:\n    pkg_list:\n      - module1\n      - module2\n\n  tasks:\n    - name: Install MyCorp packages \n      action: yum pkg=MyCorp-${item} state=installed          ## This doesn't work\n      with_items: ${pkg_list}\n\nThis fails with an error of the form \"No package matching module2 is available\".\n\nIf it's too hard to properly evaluate the \"pkg=\" specification independently for each item during the join, could we at least make it optional so that the iterative loop is at least available.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4432519/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "narcisbcn": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/4486738", "body": "First of all thanks of your module.\n\nWhen I try to use it I got the following error:\n\nTask:\nrpm_key state=absent key=/etc/pki/rpm-gpg/RPM-GPG-KEY-mysql\n\nResult:\nERROR: expecting dict; got: rpm_key state=absent key=/etc/pki/rpm-gpg/RPM-GPG-KEY-mysql\n\nI tried with quotes and without because I see you check it is a str.\nMy ansible version is: \nansible --version\nansible 1.3.3\n\nHave you ever seen it before?\nThanks.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4486738/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "matze": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/4625721", "body": "Why not using a more idiomatic approach such as\n\n``` python\nimage = image.split('/')[-1]\n```\n\nThe same could be used for the port split.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4625721/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "intellectronica": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/4632724", "body": "@matze you're right, that's a nicer way to write this. I might make that change in a subsequent branch.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4632724/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "indwic": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/4717970", "body": "Sorry after some test again, something is miss. \nlib/ansible/playbook/**init**.py change is needed and\nipv6      = bool(module.params['ipv6'])  is still needed\nipv6=dict(required=False, default=False, type='bool'), this ok\n\nCurrent commit now always false (ipv4)\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4717970/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "JensRantil": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/4769302", "body": "This commit broke support for zsh < 4.3.11. See #5026.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4769302/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "schrock-meteor": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/4839657", "body": "Getting an error here:  If wait isn't set, initial_state is not declared before it's used:\n\ninvalid output was: Traceback (most recent call last):\n  File \"/home/rawr/.ansible/tmp/ansible-1386807871.34-9619501383113/ec2_elb\", line 1411, in <module>\n    main()\n  File \"/home/rawr/.ansible/tmp/ansible-1386807871.34-9619501383113/ec2_elb\", line 336, in main\n    elb_man.deregister(wait)\n  File \"/home/rawr/.ansible/tmp/ansible-1386807871.34-9619501383113/ec2_elb\", line 144, in deregister\n    if initial_state and initial_state.state == 'InService':\nUnboundLocalError: local variable 'initial_state' referenced before assignment\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4839657/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "claco": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/4863251", "body": "@sivel  Is there a way to have this module NOT append the count to the name? I want to create 1 of something. I specify no count, but the name pattern turns this server into `myserver1` when I just want `myserver`.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4863251/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/4863449", "body": "Good, so it's not just me being crazy. :-) Thanks!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4863449/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/4863467", "body": "Also, this is mostly a problem of my own doing. I had used meta[\"group\"] already, without setting group in the rax module. So up until 1.4, I accidentally worked. No, even if I don't specify the group attribute in the module, it sees the group, and ends up creating a second server of the same name, same meta, etc.  Deleting my existing group keys and using something else worked like a champ.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4863467/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "danielwg": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/4965917", "body": "On OSX, without this patch, I can't use  \"$HOME/...\" in config paths. (only '~/..' works). \n\n```\nPython 2.7.2 (default, Oct 11 2012, 20:14:37)\n[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import os\n>>> os.path.expanduser(\"$HOME/.ansible\")\n'$HOME/.ansible'\n>>> os.path.expanduser(\"~/.ansible\")\n'/Users/daniel/.ansible'\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/4965917/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "LucianoCavalheiro": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/5004720", "body": "Matt,\n\nWhould you mind to explain/confirm the rationale behind the 'echo' in this line? It is actually breaking output capturing with registered variables using the 'script' module.\n\nI could not found any use of this information elsewhere. So, I'm willing to propose a patch which removes the echo, but I would like to heard from you before breaking something I could not see.\n\nLuciano\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5004720/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/5005118", "body": "@sivel At first, thanks for answering. I found this is checked on each connection plugin. \nFor instance on the ssh plugin we have:\n\n```\n             while not sudo_output.endswith(prompt) and success_key not in sudo_output:\n```\n\nHowever, at least for my box, this loop do not consumes the success_key produced by the 'echo'. Instead, it matches the one embedded in the prompt itself (\"sudo_output='[sudo via ansible, key=xmdisqglbeuhnozcvhsgosezlohvxtit]' password: '\"). So the output produced by the echo is never consumed anywhere. If this is the case, the echo would be suppressed.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5005118/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/5005380", "body": "@sivel Correction: in the case of password-less sudo, the prompt will never be presented so success_key will be consumed correctly. However, in password-enabled sudo (my case), the loop will be ended when the prompt is presented and so success_key will not be consumed.\n\nSo, the fix would involves detecting sudo requires a password and then doing an extra read to consume the success_key. \nWould you agree? \n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5005380/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "triviski": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/5045201", "body": "This change is causing all of my git checkouts to fail if the host key is already added to the known_hosts file.  The first time I checkout repo with accept_hostkey=yes it adds the key and works.  But if i tried it again, no matter what it fails with the following message:\n\nmsg: unsupported parameter for module: accept_hostkey\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5045201/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "mrbanzai": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/5145940", "body": "Unconditionally checking the git host key makes it impossible for me to do git checkouts in a playbook (and `accept_hostkey` doesn't work for my case anyway because the port isn't used when fetching the host key to add).  Was there a specific need for checking it unconditionally?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5145940/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/5145962", "body": "For context, I was working around the issue by explicitly disabled host key checks for that host in a local SSH config on the box, but this check prevents that from working (as it checks for the host key, even if SSH itself wouldn't care).\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5145962/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "mnot": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/5304415", "body": "AFAICT this didn't make it into any release of 1.3, but it is in 1.4.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5304415/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "ches": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/5309182", "body": "Any reference to why this is or what considerations may be needed? Given that the module ought to be able to wrap docker-py pretty lightly and the lib is officially maintained by Docker...\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5309182/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "fesplugas": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/5426147", "body": "Is this option going to be enabled? We have a CI server deploying our application with ansible and we need a way to provide a password in order to decrypt the encrypted files.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5426147/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/5431057", "body": "We are using TravisCI, and it's not possible to actively provide a password to decrypt the vault.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5431057/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/5531675", "body": ":beers: Awesome work!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5531675/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/5531679", "body": ":heart: This is something I was really missing.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5531679/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/5639260", "body": "I'm having an error here:\n\n```\nfailed: [127.0.0.1] => {\"failed\": true, \"parsed\": false}\ninvalid output was: Traceback (most recent call last):\n  File \"/Users/fesplugas/.ansible/tmp/ansible-tmp-1394570206.78-108897136598313/setup\", line 3442, in <module>\n    main()\n  File \"/Users/fesplugas/.ansible/tmp/ansible-tmp-1394570206.78-108897136598313/setup\", line 2359, in main\n    data = run_setup(module)\n  File \"/Users/fesplugas/.ansible/tmp/ansible-tmp-1394570206.78-108897136598313/setup\", line 2300, in run_setup\n    facts = ansible_facts(module)\n  File \"/Users/fesplugas/.ansible/tmp/ansible-tmp-1394570206.78-108897136598313/setup\", line 2291, in ansible_facts\n    facts.update(Network(module).populate())\nTypeError: __init__() takes exactly 1 argument (2 given)\n```\n\nRemoving the \"module\" parameter fixes the error, but I guess this might be here for a reason.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5639260/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "patrickheeney": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/5458783", "body": "Couldn't the route53 module take care of wrapping values with quotes before sending it instead of having to remember to do it user side?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5458783/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/5839937", "body": "Don't you need to `apache2 reload` after enabling or disabling a module for it to work?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5839937/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "jkramarz": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/5587524", "body": "Breaks https://github.com/ansible/ansible/issues/6314\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5587524/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "mtr": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/5598081", "body": "This code cancels the fixes from 7e23ed345fa405885cf472c21e04727765235bca and makes it impossible to add users with names including non-ASCII characters (like the Norwegian \u00e6\u00f8\u00e5), using the user module.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5598081/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/5618067", "body": "@jctanner I will as soon as I find some time available to do it.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5618067/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "nejko": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/5613069", "body": "I think this change is wrong. pip does not require -e option for all VCS URLs, see http://www.pip-installer.org/en/latest/reference/pip_install.html. In fact, it only requires -e in some cases. So it would be great if pip module would allow installing packages in non-editable mode. Can you please reverse this? I think it is perfectly OK if users have to explicitely state -e option in extra_args. Thanks.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5613069/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/5613241", "body": "https://github.com/ansible/ansible/issues/6360\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5613241/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "renaudguerin": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/5648439", "body": "Seems to me that this breaks a large number of modules that construct a shell pipeline and try to run it with run_command. Do they all need to be updated with use_unsafe_shell=True ?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5648439/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/5648861", "body": "The following should give a (non-exhaustive) first idea of what's likely broken after the change to run_command :\ngit grep '(run_command|cmd).*[|<>]' \n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5648861/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "dmkoch": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/5650220", "body": "This breaks the git module when running with sudo.  I am sshing as root but sudoing to an ordinary user. The task fails with stderr: fatal: failed to stat '.': Permission denied. Seems to be trying to stat by root's cwd somewhere.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5650220/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "garlandkr": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/5683517", "body": "Why is there a semicolon at the end of this line?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5683517/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "kamazee": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/5880219", "body": "Just thought about doing pretty same thing. Can't wait to see this commit in a release! Thanks!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5880219/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "mpetrive": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/5886179", "body": "Good fix.  This completely broke my common role(s).  Will this be in the next release?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5886179/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "clifford-github": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/5908278", "body": "Hi,\n\nin our case '/etc/ssh/ssh_known_hosts' is only readable by root. So during execution we get:\n\n```\n...\n  File \"/usr/lib/python2.6/site-packages/ansible/runner/connection_plugins/ssh.py\", line 136, in not_in_host_file\n    host_fh = open(hf)\nIOError: [Errno 13] Permission denied: '/etc/ssh/ssh_known_hosts'\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5908278/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "kcberg": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/5921552", "body": "This generates a syntax error.\nShould be..\nreturn \"%s -l %s\" % (pipes.quote(CRONCMD), pipes.quote(self.user))\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/5921552/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "dirtyharrycallahan": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/6009249", "body": "Looks like this may have caused four unit tests to fail.\n\nError Message\n\n_execute_module() got an unexpected keyword argument 'complex_args'\nStacktrace\n\nTraceback (most recent call last):\n  File \"/usr/lib64/python2.6/unittest.py\", line 278, in run\n    testMethod()\n  File \"/var/lib/jenkins/jobs/ansible-devel/workspace/test/units/TestSynchronize.py\", line 60, in test_synchronize_action_basic\n    x.run(conn, \"/tmp\", \"synchronize\", \"src=/tmp/foo dest=/tmp/bar\", inject)\n  File \"/var/lib/jenkins/jobs/ansible-devel/workspace/lib/ansible/runner/action_plugins/synchronize.py\", line 206, in run\n    result = self.runner._execute_module(conn, tmp, 'synchronize', module_args, complex_args=options, inject=inject)\nTypeError: _execute_module() got an unexpected keyword argument 'complex_args'\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/6009249/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/12180272", "body": "This contains many typos such as \"convinience.\"\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/12180272/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "jeromew": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/6018360", "body": "@jimi-c this commit breaks rsync_path for me.\n\n```\nrsync_path: sudo -u {{ user }} rsync\n```\n\n```\nfailed: [...] => {\"cmd\": \"rsync --delay-updates -FF --compress --timeout=120 --archive --rsh 'ssh  -o StrictHostKeyChecking=no' --rsync-path '\\\"sudo -u node rsync\\\"' --out-format='<<CHANGED>>%i %n%L' {..src..} {..dest..}\", \"failed\": true, \"item\": \"\", \"rc\": 12}\nmsg: bash: sudo -u node rsync: command not found\nrsync: connection unexpectedly closed (0 bytes received so far) [sender]\n```\n\nby reverting the commit, everything works again.\n\nThe double quotes added in the action_plugin seem to duplicate the quoting that is already done in the module :\n\n```\n if rsync_path:\n        cmd = cmd + \" --rsync-path '%s'\" %(rsync_path)\n```\n\nI suspect that the quotes in the action module where needed so that the rsync_path was quoted in the k=v string.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/6018360/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "mattjbray": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/6058141", "body": "See #6991\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/6058141/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "michaelkrieger": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/6234408", "body": "This commit has a trickle of side effects which are inappropriate as it requires explicit configuration that wouldn't otherwise be necessary.\n\nMy systems have en_CA.UTF8 as their default and only language.\nSo now I need to override this, meanwhile my environment on all systems already has the following when I run ansible\n     LANG=en_CA.UTF-8\n     LANGUAGE=en_CA:en\n\nSo running the default installation, I get returns riddled with errors (as follows) unless I override the language in ansible.cfg.\n\nThis should instead take the environment of the user running ansible unless explicitly overridden in ansible.cfg!\n\n => {\"changed\": false, \"msg\": \"Reading package lists...\\nBuilding dependency tree...\\nReading state information...\\nReading extended state information...\\nInitializing package states...\\nReading task descriptions...\\nNo packages will be installed, upgraded, or removed.\\n0 packages upgraded, 0 newly installed, 0 to remove and 0 not upgraded.\\nNeed to get 0 B of archives. After unpacking 0 B will be used.\\nReading package lists...\\nBuilding dependency tree...\\nReading state information...\\nReading extended state information...\\nInitializing package states...\\nReading task descriptions...\\n\", \"stderr\": \"Traceback (most recent call last):\\n  File \\\"/usr/bin/apt-listchanges\\\", line 33, in <module>\\n    from ALChacks import _\\n  File \\\"/usr/share/apt-listchanges/ALChacks.py\\\", line 32, in <module>\\n    sys.stderr.write(_(\\\"Can't set locale; make sure $LC__ and $LANG are correct!\\n\\\"))\\nNameError: name '_' is not defined\\nperl: warning: Setting locale failed.\\nperl: warning: Please check that your locale settings:\\n\\tLANGUAGE = (unset),\\n\\tLC_ALL = (unset),\\n\\tLC_CTYPE = \\\"en_US.UTF-8\\\",\\n\\tLANG = \\\"en_US.UTF-8\\\"\\n    are supported and installed on your system.\\nperl: warning: Falling back to the standard locale (\\\"C\\\").\\nlocale: Cannot set LC_CTYPE to default locale: No such file or directory\\nlocale: Cannot set LC_MESSAGES to default locale: No such file or directory\\nlocale: Cannot set LC_ALL to default locale: No such file or directory\\nperl: warning: Setting locale failed.\\nperl: warning: Please check that your locale settings:\\n\\tLANGUAGE = (unset),\\n\\tLC_ALL = (unset),\\n\\tLC_CTYPE = \\\"en_US.UTF-8\\\",\\n\\tLANG = \\\"en_US.UTF-8\\\"\\n    are supported and installed on your system.\\nperl: warning: Falling back to the standard locale (\\\"C\\\").\\n\", \"stdout\": \"Reading package lists...\\nBuilding dependency tree...\\nReading state information...\\nReading extended state information...\\nInitializing package states...\\nReading task descriptions...\\nNo packages will be installed, upgraded, or removed.\\n0 packages upgraded, 0 newly installed, 0 to remove and 0 not upgraded.\\nNeed to get 0 B of archives. After unpacking 0 B will be used.\\nReading package lists...\\nBuilding dependency tree...\\nReading state information...\\nReading extended state information...\\nInitializing package states...\\nReading task descriptions...\\n\"}\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/6234408/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/6234804", "body": "Precisely- if I undo the change... \nBasically you are assuming that en_US.UTF-8 is a valid locale on the destination host, which if it isn't, when running scripts on the remote system will show not found for the locale and throw all these errors.  While en_US is popular, I'm sure outside of the US (en_GB, en_CA, etc) there may not be US locales on the system enabled.\n\nI altered lib/python2.7/dist-packages/ansible-1.6-py2.7.egg/ansible/constants.py to test:\n\nDEFAULT_MODULE_LANG       = get_config(p, DEFAULTS, 'module_lang',      'ANSIBLE_MODULE_LANG',      'C')\nok: [raven] => {\"changed\": false, \"msg\": \"Reading package lists...\\nBuilding dependency tree...\\nReading state information...\\nReading extended state information...\\nInitializing package states...\\nReading task descriptions...\\nNo packages will be installed, upgraded, or removed.\\n0 packages upgraded, 0 newly installed, 0 to remove and 0 not upgraded.\\nNeed to get 0 B of archives. After unpacking 0 B will be used.\\nReading package lists...\\nBuilding dependency tree...\\nReading state information...\\nReading extended state information...\\nInitializing package states...\\nReading task descriptions...\\n\", \"stderr\": \"\", \"stdout\": \"Reading package lists...\\nBuilding dependency tree...\\nReading state information...\\nReading extended state information...\\nInitializing package states...\\nReading task descriptions...\\nNo packages will be installed, upgraded, or removed.\\n0 packages upgraded, 0 newly installed, 0 to remove and 0 not upgraded.\\nNeed to get 0 B of archives. After unpacking 0 B will be used.\\nReading package lists...\\nBuilding dependency tree...\\nReading state information...\\nReading extended state information...\\nInitializing package states...\\nReading task descriptions...\\n\"}\n\nDEFAULT_MODULE_LANG       = get_config(p, DEFAULTS, 'module_lang',      'ANSIBLE_MODULE_LANG',      'en_US.UTF-8')\nok: [raven] => {\"changed\": false, \"msg\": \"Reading package lists...\\nBuilding dependency tree...\\nReading state information...\\nReading extended state information...\\nInitializing package states...\\nReading task descriptions...\\nNo packages will be installed, upgraded, or removed.\\n0 packages upgraded, 0 newly installed, 0 to remove and 0 not upgraded.\\nNeed to get 0 B of archives. After unpacking 0 B will be used.\\nReading package lists...\\nBuilding dependency tree...\\nReading state information...\\nReading extended state information...\\nInitializing package states...\\nReading task descriptions...\\n\", \"stderr\": \"Traceback (most recent call last):\\n  File \\\"/usr/bin/apt-listchanges\\\", line 33, in <module>\\n    from ALChacks import _\\n  File \\\"/usr/share/apt-listchanges/ALChacks.py\\\", line 32, in <module>\\n    sys.stderr.write(_(\\\"Can't set locale; make sure $LC__ and $LANG are correct!\\n\\\"))\\nNameError: name '_' is not defined\\nperl: warning: Setting locale failed.\\nperl: warning: Please check that your locale settings:\\n\\tLANGUAGE = (unset),\\n\\tLC_ALL = (unset),\\n\\tLC_CTYPE = \\\"en_US.UTF-8\\\",\\n\\tLANG = \\\"en_US.UTF-8\\\"\\n    are supported and installed on your system.\\nperl: warning: Falling back to the standard locale (\\\"C\\\").\\nlocale: Cannot set LC_CTYPE to default locale: No such file or directory\\nlocale: Cannot set LC_MESSAGES to default locale: No such file or directory\\nlocale: Cannot set LC_ALL to default locale: No such file or directory\\nperl: warning: Setting locale failed.\\nperl: warning: Please check that your locale settings:\\n\\tLANGUAGE = (unset),\\n\\tLC_ALL = (unset),\\n\\tLC_CTYPE = \\\"en_US.UTF-8\\\",\\n\\tLANG = \\\"en_US.UTF-8\\\"\\n    are supported and installed on your system.\\nperl: warning: Falling back to the standard locale (\\\"C\\\").\\n\", \"stdout\": \"Reading package lists...\\nBuilding dependency tree...\\nReading state information...\\nReading extended state information...\\nInitializing package states...\\nReading task descriptions...\\nNo packages will be installed, upgraded, or removed.\\n0 packages upgraded, 0 newly installed, 0 to remove and 0 not upgraded.\\nNeed to get 0 B of archives. After unpacking 0 B will be used.\\nReading package lists...\\nBuilding dependency tree...\\nReading state information...\\nReading extended state information...\\nInitializing package states...\\nReading task descriptions...\\n\"}\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/6234804/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "vadimkuznetsov": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/6523192", "body": "NameError: global name 'exc' is not defined\nDo you mean exceptions.Unauthorized?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/6523192/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/6523224", "body": "NameError: global name 'exc' is not defined\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/6523224/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/6523226", "body": "NameError: global name 'exc' is not defined\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/6523226/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/6523233", "body": "NameError: global name 'exc' is not defined\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/6523233/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "debrice": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/6704613", "body": "Since this change I'm getting\n\n```\nfailed: [localhost] => (item=ubuntu/logstash1) => {\"failed\": true, \"item\": \"ubuntu/logstash1\", \"parsed\": false}\ninvalid output was: SUDO-SUCCESS-ygrosbmxvftnpsrwvtgpncvaqzweazux\nTraceback (most recent call last):\n  File \"/home/brice/.ansible/tmp/ansible-tmp-1403046155.99-7077217954574/docker\", line 1971, in <module>\n    main()\n  File \"/home/brice/.ansible/tmp/ansible-tmp-1403046155.99-7077217954574/docker\", line 693, in main\n    containers = manager.create_containers(1)\n  File \"/home/brice/.ansible/tmp/ansible-tmp-1403046155.99-7077217954574/docker\", line 548, in create_containers\n    if docker.utils.compare_version('1.10', self.client.version()['ApiVersion']) < 0:\nKeyError: 'ApiVersion'\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/6704613/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "Yasushi": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/6753027", "body": "win32_Physicalmemory?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/6753027/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "thomas-mangin": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/6775081", "body": "Hello, a small harmless typo \"self.user or\" is repeated, it should be :\nself.common_args += [\"-o\", \"User=\" + (self.user or pwd.getpwuid(os.geteuid())[0])]\nThank you for taking the time to review the patch I had.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/6775081/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "chestel": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/6853116", "body": "Hi Jim,\n\nThis seems to stop the hostname module working for me on Redhat / Oracle Linux 6.\n\nCan you give some more detail on why this change was made?\n\nBest,\nLeo\n\nTest:\nimport ansible/module_utils/basic.py\nget_distribution()\n\nOld result:\n'Red hat enterprise linux server'\n\nNew result:\n'Red'\n\nModule error with new version:\nmsg: hostname module cannot be used on platform Linux (Red)\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/6853116/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/6866989", "body": "Hi Jim - I've opened an issue:\n\nhttps://github.com/ansible/ansible/issues/8014\n\nCheers,\nLeo\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/6866989/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "Trozz": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/6858451", "body": "editor added extra lines.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/6858451/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "acaire": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/7042976", "body": "What benefit comes from removing the module?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7042976/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "AlexRiedler": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/7073914", "body": "Should we take the advice of a marketing manager ? This seems like a bad idea, I'll try to reach out to the guys and gals at Pager Duty and see if they will change or revoke their statement.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7073914/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "renard": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/7096845", "body": "Until that commit I used to have:\n\n``` yaml\ntmpfs_tar_options: \"--preserve-permissions --numeric-owner --auto-compress --xattrs --xattrs-include='*' --selinux --acls\"\n```\n\n``` yaml\n- name: create archive\n  shell: >-\n    tar {{ tmpfs_tar_options }}\n    {% for item in tmpfs_tar_exclude %} --exclude '{{ item }}'{% endfor %}\n    {% for item in tmpfs_tar_exclude_extra|default([]) %} --exclude '{{ item }}'{% endfor %}\n    --exclude '{{tmpfs_target[1:]}}'\n    --directory /\n    --create --file /{{tmpfs_target}}/{{ansible_hostname}}_rootfs{{ tmpfs_tar_ext }} .\n```\n\nThe error message is not very clear:\n\n```\nA variable inserted a new parameter into the module args. Be sure to quote variables if they contain equal signs (for example: \"{{var}}\").\n```\n\nSee #8233\n\nMaybe I do not declare correctly my variable. Anyway how should I declare a variable with an equal sign in a string?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7096845/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/7100079", "body": "Ok thanks for the tip.\nI managed to handle `--xattrs-include '*'` in that particular case.\n\nBy the way what is the new evolution with ansible and remote Jinga2 tasks? What is the best way to do them?\n\nIn that particular case, should I generate a remote script and execute it or should I do a very different approch?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7100079/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/9727666", "body": "this returns an error:\n\n```\nTraceback (most recent call last):\n  File \"/home/renard/Developer/ansible/ansible/bin/ansible-playbook\", line 334, in <module>\n    sys.exit(main(sys.argv[1:]))\n  File \"/home/renard/Developer/ansible/ansible/bin/ansible-playbook\", line 135, in main\n    (sshpass, sudopass, su_pass, vault_pass) = utils.ask_passwords(ask_pass=options.ask_pass, ask_sudo_pass=options.ask_sudo_pass, ask_su_pass=options.ask_su_pass, ask_vault_pass=options.ask_vault_pass)\n  File \"/home/renard/Developer/ansible/ansible/lib/ansible/utils/__init__.py\", line 1132, in ask_passwords\n    return (sshpass, sudopass, supass, vaultpass)\nUnboundLocalError: local variable 'supass' referenced before assignment\n```\n\nYou should add:\n\n``` python\nsupass=None\n```\n\non line 1114.\n\nAnd the same with `vaultpass`\n\nDid you test the patch before merge?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/9727666/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/9727750", "body": "or better replace `supass` by `su_pass` and `vaultpass` with `vault_pass`\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/9727750/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "hughsaunders": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/7098603", "body": "does ignore_quotes actually do anything? can't find a reference to it in https://github.com/python/cpython/blob/2.7/Lib/shlex.py\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7098603/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "tksmd": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/7109780", "body": "I think the new_module_args here should include original_basename parameter as follows:\n\n```\n                 new_module_args = dict(\n                     src=tmp_src,\n                     dest=dest,\n                     original_basename=source_rel\n                 )\n```\n\nOtherwise, when we copy local directory to remote and some files already exist on remote side, we'll get the error like this \n\n```\nTraceback (most recent call last):\n  File \"<stdin>\", line 1588, in <module>\n  File \"<stdin>\", line 178, in main\n  File \"<stdin>\", line 846, in set_fs_attributes_if_different\n  File \"<stdin>\", line 759, in set_owner_if_different\n  File \"<stdin>\", line 686, in user_and_group\nOSError: [Errno 2] No such file or directory: '/usr/local/nginx/empty.html'\n```\n\nIn the above example, we tried to copy with the following task definition\n\n```\n- name: copy nginx static html,css,js\n  copy: src=usr/local/nginx/html dest=/usr/local/nginx force=yes owner=root group=root mode=0644\n```\n\nand the directory structure under usr/local/nginx/html directory is \n\n```\n$ cd <role name>/files/usr/local/nginx/html\n$ tree -L 1\n.\n\u251c\u2500\u2500 empty.html\n\u251c\u2500\u2500 en\n\u251c\u2500\u2500 ja\n\u251c\u2500\u2500 robots.txt\n\u2514\u2500\u2500 static\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7109780/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/7127185", "body": "Hi, @jimi-c , Thank you for your comment. I've already sent PR a few times :smile: but I sent PR for this issue. See here. https://github.com/ansible/ansible/pull/8271\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7127185/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "kristofferwiklund": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/7118533", "body": "Name is required if one tries to add a new cronjob. Maybe the docs should reflect that?\n\n```\nif name is None and do_install:\n    module.fail_json(msg=\"You must specify 'name' to install a new cron job\")\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7118533/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "hacosta": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/7191043", "body": "This looks like a typo:\n\n+- name: assert the include set the correct fact for the double quoted param\n- assert:\n- that:\n- \\- double_quoted_param == \"this is a param with double quotes\"\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7191043/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/7192324", "body": "Err i copied the wrong section:\n\n+- name: assert the include set the correct fact for the single quoted param\n- assert:\n- that:\n- \\- single_quoted_param == \"this is a param with single quotes\"\n\nThere should be single quotes there\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7192324/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "Tenzer": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/7296985", "body": "Is there a reason to first check that the destination is a directory and then check if it exists? If it's a directory I think it would be safe to assume that it also exists.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7296985/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "tsing": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/7401900", "body": "Should be `return image.rsplit(':', 1)` ? \n\nWhen the image is something like: `http://www.example.com:port/image_name:tag`, we will got error\n\n```\n    image, tag = self.get_split_full_image_tag(params['image'])\nValueError: too many values to unpack\n```\n\n@kolloch\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7401900/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "davehatton": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/7441091", "body": "Just to note, this is missing support for xfs = -f. \nxfs is the default for RHEL7.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7441091/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "ryanpetrello": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/7458942", "body": "I'm fairly certain this causes a bug I'm currently experiencing in host parsing.  Shouldn't this line instead read:\n\nhosts = self._trim_unavailable_hosts(self.inventory.list_hosts(task.play.hosts))\n\nIt seems to me that `inventory.Inventory.list_hosts` takes the group pattern (e.g., 'all', 'web servers'), not the actual list of hosts, which is what you're passing.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7458942/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "kolloch": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/7459966", "body": "I wasn't aware of that syntax. Somehow I cannot find a reference of all allowed values.\n\nYour code unfortunately breaks for the case that no version is specified. In this case \"latest\" should be assumed.\n\nI guess we first have to split the string at the right-most \"/\" first (if it exists) to get repository, image:tag.\n\nThan we have to split image:tag again at the \":\" if it exists...\n\nI very rarely program in Python, so if you are up to it, it would be great if you did this right.\n\nAnother alternative would be to specify the tag/repository in a different parameter to the ansible module altogether and leave the parsing to the user ;)\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7459966/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "quiver": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/7604046", "body": "`self.source_address` argument is new in Py2.7.\nhttps://docs.python.org/2/library/socket.html#socket.create_connection\n`source_address` does not seem to be used in any part of Ansible. If there's no explicit need for this argument, just dropping this should suffice.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7604046/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "mpeters": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/7632047", "body": "Just a note that this is causing just about anything with an https url to fail on Python < 2.7 (my version is 2.6.9)\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7632047/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/7632120", "body": "For instance a task like this:\n\n```\n- rpm_key: state=present key=https://jenkins-ci.org/redhat/jenkins-ci.org.key\n```\n\nFails with a traceback message like this:\n\n```\nfailed: [marketplace-ci] => {\"failed\": true, \"parsed\": false}\ninvalid output was: SUDO-SUCCESS-coghjuyqmqziyeqgptjyvucytexitryk\nTraceback (most recent call last):\n  File \"/home/sg/.ansible/tmp/ansible-tmp-1409693640.57-226378838970096/rpm_key\", line 2101, in <module>\n    main()\n  File \"/home/sg/.ansible/tmp/ansible-tmp-1409693640.57-226378838970096/rpm_key\", line 199, in main\n    RpmKey(module)\n  File \"/home/sg/.ansible/tmp/ansible-tmp-1409693640.57-226378838970096/rpm_key\", line 87, in __init__\n    keyfile = self.fetch_key(key)\n  File \"/home/sg/.ansible/tmp/ansible-tmp-1409693640.57-226378838970096/rpm_key\", line 120, in fetch_key\n    rsp, info = fetch_url(self.module, url)\n  File \"/home/sg/.ansible/tmp/ansible-tmp-1409693640.57-226378838970096/rpm_key\", line 2089, in fetch_url\n    r = urllib2.urlopen(request, None, timeout)\n  File \"/usr/lib64/python2.6/urllib2.py\", line 126, in urlopen\n    return _opener.open(url, data, timeout)\n  File \"/usr/lib64/python2.6/urllib2.py\", line 391, in open\n    response = self._open(req, data)\n  File \"/usr/lib64/python2.6/urllib2.py\", line 409, in _open\n    '_open', req)\n  File \"/usr/lib64/python2.6/urllib2.py\", line 369, in _call_chain\n    result = func(*args)\n  File \"/home/sg/.ansible/tmp/ansible-tmp-1409693640.57-226378838970096/rpm_key\", line 1752, in https_open\n    return self.do_open(CustomHTTPSConnection, req)\n  File \"/usr/lib64/python2.6/urllib2.py\", line 1162, in do_open\n    h.request(req.get_method(), req.get_selector(), req.data, headers)\n  File \"/usr/lib64/python2.6/httplib.py\", line 914, in request\n    self._send_request(method, url, body, headers)\n  File \"/usr/lib64/python2.6/httplib.py\", line 951, in _send_request\n    self.endheaders()\n  File \"/usr/lib64/python2.6/httplib.py\", line 908, in endheaders\n    self._send_output()\n  File \"/usr/lib64/python2.6/httplib.py\", line 780, in _send_output\n    self.send(msg)\n  File \"/usr/lib64/python2.6/httplib.py\", line 739, in send\n    self.connect()\n  File \"/home/sg/.ansible/tmp/ansible-tmp-1409693640.57-226378838970096/rpm_key\", line 1743, in connect\n    sock = socket.create_connection((self.host, self.port), self.timeout, self.source_address)\nAttributeError: CustomHTTPSConnection instance has no attribute 'source_address'\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7632120/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/7646028", "body": "@jimi-c Awesome, it's resolved. Thanks!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7646028/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/7737386", "body": "This commit seems to break hostvars between tasks when a register is used. For example, this playbook will output something for `ansible_default_ipv4.address` for the first host before the registered task. And will just output the templated var immediately after. If you debug the hostvars hash at that point (too big for here) you'll notice that it loses most of it's variables.\n\n```\n- hosts: all[0]\n  gather_facts: true\n  remote_user: sg\n  tasks:\n  - debug: var=hostvars[groups.all[0]].ansible_default_ipv4.address\n  - command: ls /tmp\n    register: foo\n  - debug: var=hostvars[groups.all[0]].ansible_default_ipv4.address\n```\n\nThe output looks like this:\n\n```\nPLAY [all[0]] ***************************************************************** \n\nGATHERING FACTS *************************************************************** \nok: [ec2-54-167-185-191.compute-1.amazonaws.com]\n\nTASK: [debug var=hostvars[groups.all[0]].ansible_default_ipv4.address] ******** \nok: [ec2-54-167-185-191.compute-1.amazonaws.com] => {\n    \"hostvars[groups.all[0]].ansible_default_ipv4.address\": \"10.101.201.36\"\n}\n\nTASK: [command ls /tmp] ******************************************************* \nchanged: [ec2-54-167-185-191.compute-1.amazonaws.com]\n\nTASK: [debug var=hostvars[groups.all[0]].ansible_default_ipv4.address] ******** \nok: [ec2-54-167-185-191.compute-1.amazonaws.com] => {\n    \"hostvars[groups.all[0]].ansible_default_ipv4.address\": \"{{ hostvars[groups.all[0]].ansible_default_ipv4.address }}\"\n}\n\nPLAY RECAP ******************************************************************** \nec2-54-167-185-191.compute-1.amazonaws.com : ok=4    changed=1    unreachable=0    failed=0\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7737386/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/7738457", "body": "Yeah I did bisect to this commit. I'll open a new ticket for this and just reference this commit in that bug.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7738457/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/7738523", "body": "Submitted bug # #8968\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7738523/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "leth": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/7639675", "body": "I'm getting a KeyError from this line now, I'm not sure why.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7639675/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "apollo13": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/7689507", "body": "@jimi-c Why not just use `object()` as sentinel for omit token?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7689507/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/7692725", "body": "Object() is exactly  that :)\nOn Sep 8, 2014 2:36 AM, \"James Cammarata\" notifications@github.com wrote:\n\n> We wanted to have a one-time use value for the omit variable, to prevent\n> accidental re-use or malicious omitting of parameters via external\n> variables like facts, etc.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/ansible/ansible/commit/f8a30faeee70947827df5914ecc78db578499ee6#commitcomment-7691582\n> .\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/7692725/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/10264771", "body": "@jimi-c This results in:\n\n```\nTraceback (most recent call last):\n  File \"/home/florian/sources/ansible/v2/bin/ansible-playbook\", line 139, in <module>\n    sys.exit(main(sys.argv[1:]))\n  File \"/home/florian/sources/ansible/v2/bin/ansible-playbook\", line 132, in main\n    return pbex.run()\n  File \"/home/florian/sources/ansible/v2/ansible/executor/playbook_executor.py\", line 80, in run\n    result = self._tqm.run(play=play)\n  File \"/home/florian/sources/ansible/v2/ansible/executor/task_queue_manager.py\", line 157, in run\n    return strategy.run(iterator, connection_info)\n  File \"/home/florian/sources/ansible/v2/ansible/plugins/strategies/linear.py\", line 239, in run\n    include_file = self._loader.path_dwim_relative(original_task._role._role_path, 'tasks', include_file)\nUnboundLocalError: local variable 'include_file' referenced before assignment\n```\n\nFixed locally by using (not sure if that is the proper fix though):\n\n```\ninclude_file = self._loader.path_dwim_relative(original_task._role._role_path, 'tasks', include_result['include'])\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/10264771/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "reedloden": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/8092224", "body": "s/moudules/modules/\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/8092224/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/8092232", "body": "s/moudules/modules/\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/8092232/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "lorin": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/8092249", "body": "Dang it. Fixed here: https://github.com/ansible/ansible/pull/9297\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/8092249/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}], "review_comments": []}, "Gerst20051": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/8160562", "body": "is this still a problem? i just got this same error...\n\n```\n{\"failed\": true, \"parsed\": false} invalid output was: SUDO-SUCCESS-osqmplcqvgifiptpjrpvyzmcdwgyjfoj\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/8160562/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/9574701", "body": ":+1: \n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/9574701/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/9637512", "body": ":+1: \n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/9637512/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "wfranzini": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/8241679", "body": "Debian has nogroup maybe something like the following may be useful::\n\n``` yaml\n- name: ..\n    set_fact: nobody_group='nogroup;\n    when: ansible_os_family == 'Debian'\n\n - name: nobody group on redhat\n     set_fact: nobody_group=nobody\n     when: ansible_os_family == 'RedHat'\n\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/8241679/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "praveenkumar": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/8647988", "body": "This is really a serious issue for me which still not merged to latest release and lying in devel branch. Can someone please let me know what stopping it to merge master or stable release.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/8647988/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/8648204", "body": "Great to hear, I am waiting for next release then :)\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/8648204/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "dlbewley": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/8863414", "body": "This line does not show up in the [rendered web page](http://docs.ansible.com/playbooks_best_practices.html#directory-layout).\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/8863414/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "basictheprogram": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/9194097", "body": "I'll struggle through the git stuff to merge it and test it against my OpenIndiana test systems. I like your approach better then mine. \n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/9194097/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "gildegoma": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/9220099", "body": "@maspwr I ended up with \"this is faster\", which is maybe less _controversial_ than \"this is a lot faster\". Do you agree?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/9220099/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/9223915", "body": "@maspwr :tongue:uage :) \nI think, that I'll let the choice to the Ansible maintainers :books: \n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/9223915/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "maspwr": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/9223594", "body": "Yeah, seems fine to me!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/9223594/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/9223647", "body": "No Oxford comma!? ;)\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/9223647/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "htgoebel": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/9336836", "body": "I doubt, this is a correct solution. Either `term` already is a string, then this will do nothing. Or `term` is a list, then this will create garbage: like `\"['echo', 'foo']\"` (while it should be `\"echo foo\"`\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/9336836/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "kavu": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/9528897", "body": "Thank you for everything! And good luck!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/9528897/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/10867687", "body": "To avoid copy-pasting I am using `api_lookup_role_by_name` with additional parameter, quieting output during API call.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/10867687/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/10867693", "body": "`parser` is undefined in this function, I think we can delete this statement safely.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/10867693/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/10867700", "body": "I am not sure if it's ok to use `print print print`. Should I define a multiline-string template and interpolate values with it?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/10867700/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}]}, "gandikun": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/9668738", "body": "Thank You for your hard time :')\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/9668738/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "wolfgangkarall": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/10357124", "body": "The first hunk of this change makes the raw module use ssh -v all the time:\n\n```\n$ ansible somehost -m raw -a uptime\nsomehost | success | rc=0 >>\n 12:46am  up 95 day(s), 10:12,  10 users,  load average: 0.04, 0.04, 0.19\nOpenSSH_6.7p1 Debian-3, OpenSSL 1.0.1k 8 Jan 2015\ndebug1: Reading configuration data /home/user/.ssh/config\ndebug1: /home/user/.ssh/config line 1: Applying options for *\ndebug1: /home/user/.ssh/config line 462: Applying options for somehost\ndebug1: Reading configuration data /home/user/.ssh/config\ndebug1: /home/user/.ssh/config line 1: Applying options for *\ndebug1: Reading configuration data /etc/ssh/ssh_config\ndebug1: /etc/ssh/ssh_config line 19: Applying options for *\ndebug1: auto-mux: Trying existing master\ndebug1: mux_client_request_session: master session id: 2\nShared connection to somehost closed.\n```\n\nThe moment I change back the `-v` to `-q` I get:\n\n```\n$ ansible somehost -m raw -a uptime\nsomehost | success | rc=0 >>\n 12:46am  up 95 day(s), 10:13,  10 users,  load average: 0.01, 0.03, 0.17\n```\n\nUsing the command/shell modules everything works just fine, it's just\nthe raw module showing this behavior.\n\n@msabramo any idea why that might be?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/10357124/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "ergonlogic": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/10693682", "body": "There's a typo here:\n\n```\nself.facts['architectrure' = 'Not Available'\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/10693682/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/10693978", "body": "There's still a typo here: `architectrure`\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/10693978/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "georgegeka": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/10720301", "body": "This commit is a bug , because if the host is not in inject['hostvars'] you will never fail back to the inventory\nthus , delegate_to will never use the correct user .... \n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/10720301/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/10721256", "body": "Thank you\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/10721256/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "rosowiecki": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/10760458", "body": "UUID getting code causes gathering facts to fail on systems without lsblk, see issue #10746\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/10760458/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/10761404", "body": "TimeoutError is not caught here? #10746\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/10761404/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/10798875", "body": "#10779 I found out that using module.run_command (subprocess, more precisely) breaks timeout handling decorator.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/10798875/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "romain-dartigues": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/10792907", "body": "Hi, running @pyflakes showed:\n\n```\napache-libcloud.py:252: undefined name 'instance'\napache-libcloud.py:253: undefined name 'instance'\n```\n\nAnd reading your script i'm not sure what instance was supposed to be (`node` maybe?)\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/10792907/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "vermut": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/10940520", "body": "Can you explain - why? Ansible ignores undefined variables again.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/10940520/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/10957662", "body": "Is there a possibility to leave it barking at least at clearly undefined variables like\n\nsomething: \"{{ non_existent_var }}\" ?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/10957662/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "sebgoa": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/10941468", "body": "@romain-dartigues it's been a while since I did this. I originally based it of the ec2 inventory script, which has evolved a lot since then.\nI had some pending PR that never got merged\n\nlike https://github.com/ansible/ansible/pull/9765\n\nand stopped working on it. I would have to look at it again.\n\npinging @resmo he may be interested to pick it up now that there is a cloudstack module in core.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/10941468/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "g--": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/11315636", "body": "It's a shame this had to be reverted.  Is there news on why and if it's going to make it in 1.9.3?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/11315636/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "tkellen": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/11496925", "body": "Does this fix the fact that ask_sudo_pass is no longer respected in `ansible.cfg` for version 1.9.1? If yes, is there a plan for when a fixed version will be released? \n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/11496925/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/11496932", "body": "PS: Thanks for all your work on this!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/11496932/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/11906016", "body": "<3\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/11906016/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "hvpareja": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/11523798", "body": "Hello, I don't think this change is appropriate. It is altering the name of my instances.\n\nSay that I want to deploy my code in:\n\n```\n- hosts: tag_Name_MDI-image-gallery-QA\n```\n\nI'd get `tag_Name_MDI_image_gallery_QA` instead and obviously they are not going to be found in the inventory. I think we shouldn't be altering the information retrieved from AWS.\n\nRegards\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/11523798/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/11524643", "body": "@bennojoy https://github.com/ansible/ansible/pull/11165 ;)\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/11524643/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "bennojoy": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/11524548", "body": "@hvpareja  the things is - in the group names breaks things, but i think there is a feature request to make this configurable in ec2.ini \n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/11524548/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "adam-perry": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/11668219", "body": "tkellen, I made these changes on my ansible install and it works as described.\n\nBrian, thank you.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/11668219/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "kapilt": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/11759020", "body": "using a mutable default arg is a disaster waiting to happen. \n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/11759020/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "garthk": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/12098362", "body": "This path through the code prohibits relative imports in Python modules dropped into `library/`. What's the intent?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/12098362/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "srvg": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/12150306", "body": "I'm a bit confused by the code in this dir. How does it relate to the stable-1.9 branch?\nPerhaps add some explanation about that?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/12150306/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "MEMBER"}], "review_comments": []}, "muffl0n": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/12342209", "body": "I'm getting an AttributeError since this change:\n\n```\n$ ansible -i hosts localhost -m setup -vvv\nUsing  as config file\nUnexpected Exception: Values instance has no attribute 'step'\nthe full traceback was:\n\nTraceback (most recent call last):\n  File \"/tmp/ansible/bin/ansible\", line 77, in <module>\n    sys.exit(cli.run())\n  File \"/tmp/ansible/lib/ansible/cli/adhoc.py\", line 150, in run\n    result = self._tqm.run(play)\n  File \"/tmp/ansible/lib/ansible/executor/task_queue_manager.py\", line 184, in run\n    strategy = strategy_loader.get(new_play.strategy, self)\n  File \"/tmp/ansible/lib/ansible/plugins/__init__.py\", line 287, in get\n    obj = getattr(self._module_cache[path], self.class_name)(*args, **kwargs)\n  File \"/tmp/ansible/lib/ansible/plugins/strategies/__init__.py\", line 72, in __init__\n    self._step              = tqm._options.step\nAttributeError: Values instance has no attribute 'step'\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/12342209/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/12357626", "body": "Works, thank you!\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/12357626/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "wincent": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/12620927", "body": "`ansible-playbook` is dying for me with a syntax error on this line:\n\n```\nUnexpected Exception: invalid syntax (__init__.py, line 254)\nthe full traceback was:\n\nTraceback (most recent call last):\n  File \"/Users/glh/code/ansible-configs/vendor/ansible/bin/ansible-playbook\", line 64, in <module>\n    from ansible.cli.playbook import PlaybookCLI as mycli\n  File \"/Users/glh/code/ansible-configs/vendor/ansible/lib/ansible/cli/playbook.py\", line 28, in <module>\n    from ansible.executor.playbook_executor import PlaybookExecutor\n  File \"/Users/glh/code/ansible-configs/vendor/ansible/lib/ansible/executor/playbook_executor.py\", line 29, in <module>\n    from ansible.executor.task_queue_manager import TaskQueueManager\n  File \"/Users/glh/code/ansible-configs/vendor/ansible/lib/ansible/executor/task_queue_manager.py\", line 29, in <module>\n    from ansible.executor.play_iterator import PlayIterator\n  File \"/Users/glh/code/ansible-configs/vendor/ansible/lib/ansible/executor/play_iterator.py\", line 27, in <module>\n    from ansible.playbook.block import Block\n  File \"/Users/glh/code/ansible-configs/vendor/ansible/lib/ansible/playbook/__init__.py\", line 27, in <module>\n    from ansible.playbook.play import Play\n  File \"/Users/glh/code/ansible-configs/vendor/ansible/lib/ansible/playbook/play.py\", line 27, in <module>\n    from ansible.playbook.base import Base\n  File \"/Users/glh/code/ansible-configs/vendor/ansible/lib/ansible/playbook/base.py\", line 37, in <module>\n    from ansible.template import Templar\n  File \"/Users/glh/code/ansible-configs/vendor/ansible/lib/ansible/template/__init__.py\", line 254\n    loop_terms = listify_lookup_plugin_terms(terms=8args, templar=self, loader=self._loader, fail_on_undefined=True)\n                                                       ^\nSyntaxError: invalid syntax\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/12620927/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/12621073", "body": "@bcoca: Actually, I still get the syntax error with this new version too:\n\n```\nUnexpected Exception: invalid syntax (__init__.py, line 254)\nthe full traceback was:\n\nTraceback (most recent call last):\n  File \"/Users/glh/code/ansible-configs/vendor/ansible/bin/ansible-playbook\", line 64, in <module>\n    from ansible.cli.playbook import PlaybookCLI as mycli\n  File \"/Users/glh/code/ansible-configs/vendor/ansible/lib/ansible/cli/playbook.py\", line 28, in <module>\n    from ansible.executor.playbook_executor import PlaybookExecutor\n  File \"/Users/glh/code/ansible-configs/vendor/ansible/lib/ansible/executor/playbook_executor.py\", line 29, in <module>\n    from ansible.executor.task_queue_manager import TaskQueueManager\n  File \"/Users/glh/code/ansible-configs/vendor/ansible/lib/ansible/executor/task_queue_manager.py\", line 29, in <module>\n    from ansible.executor.play_iterator import PlayIterator\n  File \"/Users/glh/code/ansible-configs/vendor/ansible/lib/ansible/executor/play_iterator.py\", line 27, in <module>\n    from ansible.playbook.block import Block\n  File \"/Users/glh/code/ansible-configs/vendor/ansible/lib/ansible/playbook/__init__.py\", line 27, in <module>\n    from ansible.playbook.play import Play\n  File \"/Users/glh/code/ansible-configs/vendor/ansible/lib/ansible/playbook/play.py\", line 27, in <module>\n    from ansible.playbook.base import Base\n  File \"/Users/glh/code/ansible-configs/vendor/ansible/lib/ansible/playbook/base.py\", line 37, in <module>\n    from ansible.template import Templar\n  File \"/Users/glh/code/ansible-configs/vendor/ansible/lib/ansible/template/__init__.py\", line 254\n    loop_terms = listify_lookup_plugin_terms(terms=*args, templar=self, loader=self._loader, fail_on_undefined=True)\n                                                   ^\nSyntaxError: invalid syntax\n```\n\nMaybe the version in my PR (https://github.com/ansible/ansible/pull/11916) was right after all.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/12621073/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/12621351", "body": "`loop_terms` is still referenced on the following line.\n\nRunning this code results in:\n\n```\nAn exception occurred during task execution. The full traceback is:\nTraceback (most recent call last):\n  File \"/Users/glh/code/ansible-configs/vendor/ansible/lib/ansible/executor/process/worker.py\", line 118, in run\n    executor_result = TaskExecutor(host, task, job_vars, new_play_context, self._new_stdin, self._loader, shared_loader_obj).run()\n  File \"/Users/glh/code/ansible-configs/vendor/ansible/lib/ansible/executor/task_executor.py\", line 86, in run\n    items = self._get_loop_items()\n  File \"/Users/glh/code/ansible-configs/vendor/ansible/lib/ansible/executor/task_executor.py\", line 156, in _get_loop_items\n    items = self._shared_loader_obj.lookup_loader.get(self._task.loop, loader=self._loader, templar=templar).run(terms=loop_terms, variables=vars_copy)\nNameError: global name 'loop_terms' is not defined\n```\n\nThis seems inadequately tested, given the sytnax error that you've already fixed @bcoca. Perhaps this whole commit should just be reverted and shipped later after it's been polished up a bit more.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/12621351/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/12621616", "body": "@bcoca: even with your latest fix (https://github.com/ansible/ansible/commit/3e5dbd045fdd6293edf190875c1b3269cdb6446e), I'm still seeing this commit cause Ansible to blow up.\n\nFor example, I'm trying to verify your fix for https://github.com/ansible/ansible/issues/11902, and when I run using the latest HEAD (3e5dbd045fdd6293edf190875c1b3269cdb6446e), the task blows up like this (unfortunately no stack trace):\n\n```\nfatal: [example.com]: FAILED! => {\"failed\": true, \"msg\": \"ERROR! the field 'args' has an invalid value, which appears to include a variable that is undefined. The error was: 'unicode object' has no attribute 'bitbucket_url'\"}\n```\n\nI'm suspicious of this commit. I'm just going to revert it locally until the dust settles.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/12621616/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "MichaelDrogalis": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/12651152", "body": "This line breaks Ansible on devel.\n\n```\nmichaels-mbp-4:ansible michael$ ansible\nUnexpected Exception: cannot import name Templar\nthe full traceback was:\n\nTraceback (most recent call last):\n  File \"/Users/michael/clones/ansible/bin/ansible\", line 66, in\n...\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/12651152/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "skyluc": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/12666395", "body": "I'm not sure what was the intention of this change, but it breaks the behavoir of the env lookup.\n\nThe output of `lookup('env','HOME')` seems to be an array with 4 empty elements (`,,,`), instead of the locaton of the home folder.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/12666395/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "loisaidasam": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/12699494", "body": ":open_mouth: \n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/12699494/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "Eugeny": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/12703972", "body": "wtf\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/12703972/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "benjixx": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/12756079", "body": "Looks like a duplicate line introduced by copy-paste.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/12756079/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/12964689", "body": "Looks like this condition should not be negated.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/12964689/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/12964690", "body": "Looks like this condition should not be negated.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/12964690/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/13145166", "body": "Looks like indentation has been accidentally changed.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/13145166/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "amenonsen": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/12875020", "body": "its is \u2192 it is\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/12875020/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/12875021", "body": "is it is \u2192 if it is\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/12875021/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/12875602", "body": "BTW, this should be `CIPHER_WRITE_WHITELIST`, but don't bother to fix it, because this code will change a little in my PR, and I'll take care of it.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/12875602/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "mgedmin": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/13152975", "body": "This commit broke template lookups from included files: see https://github.com/ansible/ansible/issues/12303\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/13152975/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "jshrake": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/13274336", "body": "This change requires updating the call site at https://github.com/ansible/ansible/blob/devel/lib/ansible/inventory/dir.py#L112\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/13274336/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "review_comments": []}, "petrmifek": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [{"url": "https://api.github.com/repos/ansible/ansible/comments/13296917", "body": "Hi. Unfortunatelly this breaks the module at both OS X 10.10 and 10.11. The rsync is 2.6.9 on both systems.\n\nThe Linux/newer rsync compatible way to fix this would be to use\n\n```\nreturn '[%s@%s]:%s' % (user, host, path)\n```\n\nThat works both on 2.6.9@OSX and 3.1.1@Debian. Does it make sense?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/13296917/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/comments/13297698", "body": "Hmm, I spoke a bit too soon. While the above fixes it for some cases (IPv6 address instead of hostname), it's still broken in many various ways depending on the contents of the rsync's SRC and DEST parameters.\n\nSo, the possibilities are:\n1. upgrade rsync on OS X (doable on server, worse on clients)\n2. use selective brackets here based on some ipv6  flag\n\nSince the bundled rsync on OS X actually supports ipv6 through AAAA dns and work well enough with the `[user@::1]` format when IPv6 address is provided, I'd guess the second option would be better though a bit more complex. It should be compatible with newer rsync as well...\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/comments/13297698/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}], "review_comments": []}, "fivethreeo": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/127829445", "body": "Maybe alter the snake_dict_to_camel_dict take a kwarg, uppercase_first.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/127829445/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/127851025", "body": "Changed snake_dict_to_camel_dict to take a capitalize_first kwarg, change the one in ansible.module_utils.ec2?", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/127851025/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}]}, "stympy": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/111571425", "body": "Yes, we use the 201 status code (created) as the successful response for this API endpoint, rather than 200. ", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/111571425/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}]}, "garethr": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/10195117", "body": "Thanks, I've corrected the documentation and the example. I agree, `name` provides a better interface.\n\nI've left the internal variable name as `group_name` however as that maps to the actual AWS name. Making this more explicit if you're in the code feels useful to me.\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/10195117/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}]}, "bendiken": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/9828698", "body": "The list of supported protocol names surely is sourced from `/etc/protocols` and/or `/etc/services`, so adding support for protocol names one by one might not be a tenable approach?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/9828698/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}]}, "pol": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/5196396", "body": "This is confusing or wrong, is it considered changed when it is true or false?\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/5196396/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/5196582", "body": "Grammar is clumsy, recommended change:\n\nUse the \"changed_when\" option to override the default module \"change\" reporting.  The \"changed_when\" option takes a Python expression.  ...\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/5196582/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}]}, "retr0h": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/121245586", "body": "Wouldn't it be better to pass cmd_output through decode?  Therefore, we don't need to handle bytes directly?\r\n\r\n```\r\ncmd_output = cmd_output.decode('utf-8')\r\n```\r\n\r\nThen we can keep the code exactly as is.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/121245586/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}]}, "pwnall": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/93417349", "body": "I would like this hunk in a separate PR.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/93417349/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}]}, "calfonso": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/116243595", "body": "Is this section needed for parity with previous versions of this document? If not, is it needed if it doesn't provide any info or than no info?", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/116243595/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/117328552", "body": "s/tha/the", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/117328552/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/117331101", "body": "reduction of", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/117331101/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/132195541", "body": "@jedelman8 you're right. @schunduri ^", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/132195541/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/148936822", "body": "@thaumos @itdependsnetworks we had already started on NXOS for 2.4, it's not a new platform we are adding. We ran out of time for 2.4, so picking up some of the stuff we didn't get done. We are not changing how DI is designed in 2.5.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/148936822/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/149092513", "body": "@itdependsnetworks I'm not aware of the time constraint around documentation. The documentation discussion was about how we want to advertise DI modules and the direction we should have other people take when implementing modules. For the platforms we already implemented using DI, we are taking time to finish up some features we didn't get to. What else do you want to know?", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/149092513/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}]}, "flaper87": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/121265531", "body": "\ud83d\udc4d ", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/121265531/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/121265534", "body": "done", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/121265534/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/121265548", "body": "mmhh, tbh, it should work but I'll double check ", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/121265548/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/121265592", "body": "There could be but this is something `pyhelm` doesn't support right now. We can add it once the feature is added there. Thoughts?", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/121265592/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/121265596", "body": "\ud83d\udc4d ", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/121265596/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/123185073", "body": "@ryansb so, yeah, this should work. Want to resolve this?", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/123185073/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/156591311", "body": "I think it's fine to keep this here for now but, I wonder if this check (and similar checks in the future) should go into the `OpenShift` client as they are specific to `OpenShift` and not `Kubernetes`.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/156591311/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/156593100", "body": "Out of curiosity, what are the benefits of using the openshift restclient instead of the kubernetes client?\r\n\r\nIIUC, the openshift client models are generated using OpenShift origin, which doesn't necessarily have the latest supported API by upstream `Kubernetes`. This has caused me some problems in the past where I've needed newer APIs that weren't supported by the openshift client. This is not to say that upstream kubernetes-client is better or worse but I'd like to find a way for us to be able to consume the latest released version of kubernetes. Am I missing something? \r\n", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/156593100/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/156689698", "body": "@chouseknecht thanks a bunch, it makes sense to me.\r\n\r\nFWIW, I'm happy to help with the maintenance of the openshift client too. I'd like to help keeping the ansible module and the openshift client aligned with upstream kubernetes.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/156689698/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/156690412", "body": "@chouseknecht makes sense. Also, as a first iteration, this is already good so I wouldn't stress it to find a better abstraction at this stage. I think once this module matures, we can start thinking about splitting some of this logic.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/156690412/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/158050724", "body": "It would be great if we could support authentication from the POD as well. I've some scenarios where I'm running `k8s` tasks from a `k8s` POD and I need to access the `k8s` API - to create a configmap, for example.\r\n\r\nI've a script that does this:\r\n\r\n```python\r\n     try:\r\n         config.load_incluster_config()\r\n     except config.config_exception.ConfigException:\r\n         config.load_kube_config()\r\n```\r\n\r\nWonder if we could do something similar. Try to load the `incluster` config and then fallback to loading the kube config file. All this, of course, if no specific configs have been specified in the task itself.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/158050724/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/160080183", "body": "nit: it will be hard to keep these arguments up-to-date- with those from `AnsibleModule` if they ever change. Perhaps we could just have `*args, **kwargs` here and pass it to the `AnsibleModule` init call. If unsupported params are passed through, the `AnsibleModule` will fail to initialize.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/160080183/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "CONTRIBUTOR"}]}, "sourcejedi": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/121994701", "body": "We also expect `dest: '{{ output_dir }}/new_sub_dir1/foo.txt'` to fail, right?", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/121994701/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/121998457", "body": "I like that all these test cases show two levels of parent directory being created: `new_sub_dir1/` and then `subdir2/`.\r\n\r\nThat aspect is not necessarily clear when you're looking at the task names / comments.  But you can tell it's deliberate once you find the check for `/new_sub_dir1/sub_dir2/{{ item.check }}`.  So I think it's OK :).", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/121998457/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/121999832", "body": "I think this is very nice and clear.  Thank you!", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/121999832/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/122020351", "body": "I notice it is still silent on my original case, where `src` is a file and `dest` is a non-existing directory, indicated by a trailing slash.\r\n\r\nSo I would still have gone and tested `dest: /etc/smokeping/config.d/`, hoping it was equivalent to `cp Targets /etc/smokeping/config.d/`.\r\n\r\nBelatedly, I remember `cp Targets -t /etc/smokeping/config.d` will also fail if the target is not an existing directory.  I will file an RFE for a `dest_dir` parameter.\r\n\r\nI also notice the old \"If I(src) is a directory, this must be a directory too\" is incomplete.  Ansible refuses to replace any existing directories with a file, whether they are the top-level `dest` or a sub-directory.  This is sensible behaviour and matches unix `cp`.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/122020351/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/122427338", "body": "So this is now incomplete in a different way.\r\n\r\nParent directories of `dest` are created automatically, if 1) `dest` ends in `/` OR 2) `src` is a directory.\r\n\r\nThe previous commit only mentioned case <del>1)</del>2).  This new version only mentions case <del>2)</del>1).\r\n\r\nI wrote a line in my RFE for `dest_dir`, #25717.  I think fully documenting the behaviour of `dest` will not remove all confusion, because the behaviour is inherently confusing.  The `dest_dir` RFE is my best attempt, to provide a less confusing behaviour, and save people from having to think about what `dest` does.  Maybe there's a better way, but I didn't think of one.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/122427338/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/122432283", "body": "> I also notice the old \"If I(src) is a directory, this must be a directory too\" is incomplete. Ansible refuses to replace any existing <del>directories with a file</del> files with a directory, whether they are the top-level dest or a sub-directory. This is sensible behaviour and matches unix cp.\r\n\r\nHuh.  Existing _directories_ always cause the file to be copied into the directory, whether they are the top-level dest or a sub-directory.  This is more clear-cut as a bug.  Especially, because if you create a directory inside it as well, which blocks the file, it fails with \"attempted to take checksum of directory\".  Filed as #25792", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/122432283/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/122573920", "body": "Great, thanks for your work.  Good documentation is really valuable.\r\n\r\nI think having that sentence at the end works really well.  So while I was thinking about it, I had a final nitpick.  (Sorry!)\r\n\"then parent directory\" is not quite correct grammar.  I suggest \"If I(src) and I(dest) are files, the parent directory of I(dest) isn't created:\".", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/122573920/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}]}, "evaryont": {"issues": [], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": [{"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/140641072", "body": "Typo here.", "reactions": {"url": "https://api.github.com/repos/ansible/ansible/pulls/comments/140641072/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}]}}}}