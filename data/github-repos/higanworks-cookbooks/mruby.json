{"_default": {"1": {"timuckun": {"issues": [{"url": "https://api.github.com/repos/higanworks-cookbooks/mruby/issues/1", "title": "Problems provisioning with vagrant and berkshelf", "body": "Berksfile\n\n``` ruby\nsite :opscode\nmetadata\ncookbook 'mruby', git: 'https://github.com/higanworks-cookbooks/mruby.git'\n```\n\nVagrantfile\n\n``` ruby\nconfig.vm.provision :chef_solo do |chef|\n    chef.cookbooks_path = './chef/cookbooks'\n    chef.roles_path     = './chef/roles'\n    chef.data_bags_path = './chef/data_bags'\n    chef.json           = {\n        :java  => {\n            :jdk_version    => 7,\n            :install_flavor => 'openjdk',\n            #:openjdk_packages =>  [ 'openjdk-7-jdk', 'openjdk-7-jre-headless' ]\n        },\n\n        :mruby => {\n            :force_rebuild => true,\n\n            :build_options => {\n                :user_gems => [\n                    [':git', 'https://github.com/iij/mruby-io.git']  ,\n                    [':git', 'https://github.com/iij/mruby-socket.git'],\n                    [':git', 'https://github.com/iij/mruby-pack.git'],\n                    [':git', 'https://github.com/iij/mruby-ipaddr.git']\n\n                ]\n            }\n        },\n        :nginx => {\n            :install_method  => 'source',\n            :version         => '1.4.2',\n            :configure_flags => [\"--with-debug\"],\n            :source          => {\n                :modules => [\n                    'http_ssl_module',\n                    'http_geoip_module',\n                    'http_realip_module' ,\n                    'http_stub_status_module',\n                    'http_gzip_static_module'\n                ]\n            }\n        }\n    }\n\n     chef.add_recipe 'mruby::default'\n    chef.add_recipe 'mruby::ngx_mruby,nginx::default'\n```\n\nThis yields the following error\n\n``` bash\n$vagrant provision\n[Berkshelf] This version of the Berkshelf plugin has not been fully tested on this version of Vagrant.\n[Berkshelf] You should check for a newer version of vagrant-berkshelf.\n[Berkshelf] If you encounter any errors with this version, please report them at https://github.com/RiotGames/vagrant-berkshelf/issues\n[Berkshelf] You can also join the discussion in #berkshelf on Freenode.\n[Berkshelf] Updating Vagrant's berkshelf: '/Users/tim/.berkshelf/default/vagrant/berkshelf-20140130-12372-14t35w3-default'\n[Berkshelf] Using nginx-mruby-test (0.1.0) at './chef'\n[Berkshelf] Installing mruby (0.4.1) from git: 'https://github.com/higanworks-cookbooks/mruby.git' with branch: 'master' at ref: '501288ba603843c821853fdc2d51a1109f3edfff'\n[Berkshelf] Using build-essential (1.4.2)\n[Berkshelf] Using rbenv (1.7.1)\n[Berkshelf] Using git (2.9.0)\n[Berkshelf] Using dmg (2.1.4)\n[Berkshelf] Using windows (1.11.0)\n[Berkshelf] Using chef_handler (1.1.4)\n[Berkshelf] Using runit (1.5.8)\n[Berkshelf] Using yum (3.0.6)\n[Berkshelf] Using yum-epel (0.2.0)\n[Berkshelf] Using apt (2.3.0)\n[Berkshelf] Using ohai (1.1.12)\n[Berkshelf] Using nginx (2.2.2)\n[Berkshelf] Using bluepill (2.3.1)\n[Berkshelf] Using rsyslog (1.10.2)\n[Berkshelf] Using apache2 (1.8.14)\n[default] Running provisioner: chef_solo...\nGenerating chef JSON and uploading...\nRunning chef-solo...\nstdin: is not a tty\n[2014-01-30T02:36:25+00:00] INFO: *** Chef 10.14.2 ***\n[2014-01-30T02:36:25+00:00] INFO: Setting the run_list to [\"recipe[mruby::default]\", \"recipe[mruby::ngx_mruby,nginx::default]\"] from JSON\n[2014-01-30T02:36:25+00:00] INFO: Run List is [recipe[mruby::default], recipe[mruby::ngx_mruby,nginx::default]]\n[2014-01-30T02:36:25+00:00] INFO: Run List expands to [mruby::default, mruby::ngx_mruby,nginx::default]\n[2014-01-30T02:36:25+00:00] INFO: Starting Chef Run for precise64\n[2014-01-30T02:36:25+00:00] INFO: Running start handlers\n[2014-01-30T02:36:25+00:00] INFO: Start handlers complete.\n\n================================================================================\nRecipe Compile Error in /tmp/vagrant-chef-1/chef-solo-1/cookbooks/rbenv/libraries/provider_rbenv_rubygems.rb\n================================================================================\n\nSyntaxError\n-----------\n/tmp/vagrant-chef-1/chef-solo-1/cookbooks/rbenv/libraries/provider_rbenv_rubygems.rb:46: syntax error, unexpected ':', expecting ')'\n            options.merge!(env: {\n                               ^\n/tmp/vagrant-chef-1/chef-solo-1/cookbooks/rbenv/libraries/provider_rbenv_rubygems.rb:50: syntax error, unexpected ')', expecting kEND\n/tmp/vagrant-chef-1/chef-solo-1/cookbooks/rbenv/libraries/provider_rbenv_rubygems.rb:51: syntax error, unexpected tIDENTIFIER, expecting tAMPER\n            original_shell_out!(*args, options)\n                                              ^\n/tmp/vagrant-chef-1/chef-solo-1/cookbooks/rbenv/libraries/provider_rbenv_rubygems.rb:100: syntax error, unexpected $end, expecting kEND\n\nCookbook Trace:\n---------------\n  /opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/run_context.rb:140:in `load'\n  /opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/run_context.rb:140:in `load_libraries'\n  /opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/run_context.rb:230:in `call'\n  /opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/run_context.rb:230:in `foreach_cookbook_load_segment'\n  /opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/run_context.rb:229:in `each'\n  /opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/run_context.rb:229:in `foreach_cookbook_load_segment'\n  /opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/run_context.rb:227:in `each'\n  /opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/run_context.rb:227:in `foreach_cookbook_load_segment'\n  /opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/run_context.rb:137:in `load_libraries'\n  /opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/run_context.rb:62:in `load'\n  /opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/client.rb:198:in `setup_run_context'\n  /opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/client.rb:418:in `do_run'\n  /opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/client.rb:176:in `run'\n  /opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/application/solo.rb:230:in `run_application'\n  /opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/application/solo.rb:218:in `loop'\n  /opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/application/solo.rb:218:in `run_application'\n  /opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/application.rb:70:in `run'\n  /opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/chef-solo:25\n  /opt/vagrant_ruby/bin/chef-solo:19:in `load'\n  /opt/vagrant_ruby/bin/chef-solo:19\n\nRelevant File Content:\n----------------------\n/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/../lib/chef/run_context.rb:\n\n  1:  #\n  2:  # Author:: Adam Jacob (<adam@opscode.com>)\n  3:  # Author:: Christopher Walters (<cw@opscode.com>)\n  4:  # Author:: Tim Hinderliter (<tim@opscode.com>)\n  5:  # Copyright:: Copyright (c) 2008-2010 Opscode, Inc.\n  6:  # License:: Apache License, Version 2.0\n  7:  #\n  8:  # Licensed under the Apache License, Version 2.0 (the \"License\");\n  9:  # you may not use this file except in compliance with the License.\n\n[2014-01-30T02:36:26+00:00] ERROR: Running exception handlers\n[2014-01-30T02:36:26+00:00] ERROR: Exception handlers complete\n[2014-01-30T02:36:26+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out\n[2014-01-30T02:36:26+00:00] FATAL: SyntaxError: /tmp/vagrant-chef-1/chef-solo-1/cookbooks/rbenv/libraries/provider_rbenv_rubygems.rb:46: syntax error, unexpected ':', expecting ')'\n            options.merge!(env: {\n                               ^\n/tmp/vagrant-chef-1/chef-solo-1/cookbooks/rbenv/libraries/provider_rbenv_rubygems.rb:50: syntax error, unexpected ')', expecting kEND\n/tmp/vagrant-chef-1/chef-solo-1/cookbooks/rbenv/libraries/provider_rbenv_rubygems.rb:51: syntax error, unexpected tIDENTIFIER, expecting tAMPER\n            original_shell_out!(*args, options)\n                                              ^\n/tmp/vagrant-chef-1/chef-solo-1/cookbooks/rbenv/libraries/provider_rbenv_rubygems.rb:100: syntax error, unexpected $end, expecting kEND\nChef never successfully completed! Any errors should be visible in the\noutput above. Please fix your recipes so that they properly complete.\n```\n", "reactions": {"url": "https://api.github.com/repos/higanworks-cookbooks/mruby/issues/1/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "author_association": "NONE"}], "commits": [], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}, "sawanoboly": {"issues": [], "commits": [{"url": "https://api.github.com/repos/higanworks-cookbooks/mruby/commits/501288ba603843c821853fdc2d51a1109f3edfff", "message": "use run_state"}, {"url": "https://api.github.com/repos/higanworks-cookbooks/mruby/commits/ba6eda014ba6627265718f701516dcdf0f04b0dc", "message": "use master for ngx_mruby and mod_mruby"}, {"url": "https://api.github.com/repos/higanworks-cookbooks/mruby/commits/0ec1631797c41137d9867fd6cd178d37027654a2", "message": "update README"}, {"url": "https://api.github.com/repos/higanworks-cookbooks/mruby/commits/71b989948600cc1a6a590f48713d2c502abd902d", "message": "build and regist mod_mruby"}, {"url": "https://api.github.com/repos/higanworks-cookbooks/mruby/commits/501f7482eb1ba19375bbb2ee631bea628e061c59", "message": "fix build mod_mruby"}, {"url": "https://api.github.com/repos/higanworks-cookbooks/mruby/commits/c4e051be9c186b748ac3c69c906affcc3fc0d58e", "message": "add httpd-devel pacakge for centos"}, {"url": "https://api.github.com/repos/higanworks-cookbooks/mruby/commits/ced0786493685b3e51545b706400eeff7ab231c5", "message": "create recipe mod_mruby  but make fail"}, {"url": "https://api.github.com/repos/higanworks-cookbooks/mruby/commits/a9ef90b7ba89ad14c00e0e2d78d7d61aad7ba968", "message": "fix vergion for ngx_mruby (test-kitchen)"}, {"url": "https://api.github.com/repos/higanworks-cookbooks/mruby/commits/626967d7d099b64b89b781f03cb974814e2c4219", "message": "test-kitchn v1.1"}, {"url": "https://api.github.com/repos/higanworks-cookbooks/mruby/commits/93edc10b81b34f425e3936048d865fb177b4c69b", "message": "update README"}, {"url": "https://api.github.com/repos/higanworks-cookbooks/mruby/commits/1c8cd24dcd34eb3b32efd45e9b716324f65a4d70", "message": "v0.3.2: forget install ngx_mruby.."}, {"url": "https://api.github.com/repos/higanworks-cookbooks/mruby/commits/7f965e80f413b8b95e4e96d2768f8d8956d45b50", "message": "update README, CAHNGELOG"}, {"url": "https://api.github.com/repos/higanworks-cookbooks/mruby/commits/fc174fbcce2e58002a0f58efa73cdef4c74eeaa5", "message": "code cleanup, more friendly for nginx cookbook"}, {"url": "https://api.github.com/repos/higanworks-cookbooks/mruby/commits/f588fe85eadd9cb6b0346391a1f6ca6c828bf0be", "message": "build ngx_mruby"}, {"url": "https://api.github.com/repos/higanworks-cookbooks/mruby/commits/d32c78b26c3ede8932970c0f8d7e7e3a882d0455", "message": "support force_build"}, {"url": "https://api.github.com/repos/higanworks-cookbooks/mruby/commits/ce3777ebc70d89db61d312a2bb21367012865118", "message": "0.3.0.dev"}, {"url": "https://api.github.com/repos/higanworks-cookbooks/mruby/commits/96a8a3896dbbed3693584694146caea47471fc30", "message": "update version"}, {"url": "https://api.github.com/repos/higanworks-cookbooks/mruby/commits/4c841085e45b847a01857fc81fe56e1a83c8bacc", "message": "fix `which ruby` returen with linefeed."}, {"url": "https://api.github.com/repos/higanworks-cookbooks/mruby/commits/22b9d8b6b185bc7c0a767834cee70ce421f7c908", "message": "support centos\n\nand some features, see CHANGELOG"}, {"url": "https://api.github.com/repos/higanworks-cookbooks/mruby/commits/aea9cd003f085d5e560965f0f0204b6baa04136d", "message": "build when git repository was updated"}, {"url": "https://api.github.com/repos/higanworks-cookbooks/mruby/commits/a494bb9eaf8b7121a068ddde5c6431f2c2817ed2", "message": "minimum usage"}, {"url": "https://api.github.com/repos/higanworks-cookbooks/mruby/commits/cadbb857849b919c2bb3bc4b2eea47526a242df6", "message": "initail commit"}], "pull_requests": [], "issue_comments": [], "commit_comments": [], "review_comments": []}}}}