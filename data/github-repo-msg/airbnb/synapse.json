{"_default": {"1": {"issues": [{"url": "https://api.github.com/repos/airbnb/synapse/issues/248", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/248/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/248/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/248/events", "html_url": "https://github.com/airbnb/synapse/pull/248", "id": 288283496, "number": 248, "title": "[Synapse] atomic config file update", "user": {"login": "lap1817", "id": 10382678, "avatar_url": "https://avatars2.githubusercontent.com/u/10382678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lap1817", "html_url": "https://github.com/lap1817", "followers_url": "https://api.github.com/users/lap1817/followers", "following_url": "https://api.github.com/users/lap1817/following{/other_user}", "gists_url": "https://api.github.com/users/lap1817/gists{/gist_id}", "starred_url": "https://api.github.com/users/lap1817/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lap1817/subscriptions", "organizations_url": "https://api.github.com/users/lap1817/orgs", "repos_url": "https://api.github.com/users/lap1817/repos", "events_url": "https://api.github.com/users/lap1817/events{/privacy}", "received_events_url": "https://api.github.com/users/lap1817/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-01-13T00:21:49Z", "updated_at": "2018-01-13T00:21:49Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/248", "html_url": "https://github.com/airbnb/synapse/pull/248", "diff_url": "https://github.com/airbnb/synapse/pull/248.diff", "patch_url": "https://github.com/airbnb/synapse/pull/248.patch"}, "body": "reviewer:\r\n@jolynch @liangg\r\n\r\nThis PR is to enable atomic Haproxy config file update.\r\n\r\nThe issue that we observed is that when Synapse restarts Haproxy in a high frequency (e.g. every 2 seconds), the haproxy config file may get partially over-written while a Haproxy process is still loading the file, especially for services that have high number of dependencies and thus have large haproxy config (1MB+). In some cases, the haproxy process corrupted because of that.", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/248/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/235", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/235/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/235/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/235/events", "html_url": "https://github.com/airbnb/synapse/issues/235", "id": 225037858, "number": 235, "title": "used Synapse to replace RDS", "user": {"login": "togarlamhot", "id": 21041806, "avatar_url": "https://avatars2.githubusercontent.com/u/21041806?v=4", "gravatar_id": "", "url": "https://api.github.com/users/togarlamhot", "html_url": "https://github.com/togarlamhot", "followers_url": "https://api.github.com/users/togarlamhot/followers", "following_url": "https://api.github.com/users/togarlamhot/following{/other_user}", "gists_url": "https://api.github.com/users/togarlamhot/gists{/gist_id}", "starred_url": "https://api.github.com/users/togarlamhot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/togarlamhot/subscriptions", "organizations_url": "https://api.github.com/users/togarlamhot/orgs", "repos_url": "https://api.github.com/users/togarlamhot/repos", "events_url": "https://api.github.com/users/togarlamhot/events{/privacy}", "received_events_url": "https://api.github.com/users/togarlamhot/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-04-28T10:12:05Z", "updated_at": "2017-04-28T10:12:05Z", "closed_at": null, "author_association": "NONE", "body": "Hi guys, \r\ndid you have try synapse to replace RDS?\r\nI have tried it and the result \r\n\r\nI, [2017-04-28T09:59:05.870663 #15534]  INFO -- Synapse::Synapse: synapse: starting...\r\nI, [2017-04-28T09:59:05.870740 #15534]  INFO -- Synapse::ServiceWatcher::Ec2tagWatcher: Connecting to EC2 region: ap-southeast-1\r\nI, [2017-04-28T09:59:06.592645 #15534]  INFO -- Synapse::ServiceWatcher::Ec2tagWatcher: synapse: ec2tag watcher looking for instances tagged with Name=staging-synapse\r\nI, [2017-04-28T09:59:06.592795 #15534]  INFO -- Synapse::Synapse: synapse: configuring haproxy\r\nW, [2017-04-28T09:59:06.616788 #15534]  WARN -- Synapse::ConfigGenerator::Haproxy: synapse: restart required because socket command show stat\r\n failed with error #<Errno::ECONNREFUSED: Connection refused - connect(2) for /run/haproxy/admin.sock>\r\nI, [2017-04-28T09:59:06.646909 #15534]  INFO -- Synapse::ConfigGenerator::Haproxy: synapse: restarted haproxy\r\nW, [2017-04-28T09:59:06.820603 #15534]  WARN -- Synapse::ServiceWatcher::Ec2tagWatcher: synapse: no backends for service proddb; using default servers: [{\"name\"=>\"staging-synapse\", \"host\"=>\"staging-database.blabla.rds.amazonaws.com\", \"port\"=>5432}]\r\n\r\nthanks", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/235/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/234", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/234/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/234/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/234/events", "html_url": "https://github.com/airbnb/synapse/issues/234", "id": 224758988, "number": 234, "title": "No support for relative server_port overrides", "user": {"login": "udangel-r7", "id": 15235005, "avatar_url": "https://avatars1.githubusercontent.com/u/15235005?v=4", "gravatar_id": "", "url": "https://api.github.com/users/udangel-r7", "html_url": "https://github.com/udangel-r7", "followers_url": "https://api.github.com/users/udangel-r7/followers", "following_url": "https://api.github.com/users/udangel-r7/following{/other_user}", "gists_url": "https://api.github.com/users/udangel-r7/gists{/gist_id}", "starred_url": "https://api.github.com/users/udangel-r7/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/udangel-r7/subscriptions", "organizations_url": "https://api.github.com/users/udangel-r7/orgs", "repos_url": "https://api.github.com/users/udangel-r7/repos", "events_url": "https://api.github.com/users/udangel-r7/events{/privacy}", "received_events_url": "https://api.github.com/users/udangel-r7/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-04-27T11:51:23Z", "updated_at": "2017-08-10T16:17:16Z", "closed_at": null, "author_association": "NONE", "body": "haproxy supports relative port addresses, prefixed by a \"+\" or \"-\".\r\n\r\nIf this is set the server port is determined by adding the value to the client's port. In the base service_watcher there is currently a check to verify that the override port is an integer which breaks existing configurations. \r\n\r\nI assume nginx doesn't support a similar behaviour, would you accept a patch or should we just maintain our own version?", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/234/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/233", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/233/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/233/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/233/events", "html_url": "https://github.com/airbnb/synapse/issues/233", "id": 224163575, "number": 233, "title": "ec2tag watcher fails if metadata service is unavailable during a credential refresh", "user": {"login": "ianbamforth", "id": 7094207, "avatar_url": "https://avatars0.githubusercontent.com/u/7094207?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ianbamforth", "html_url": "https://github.com/ianbamforth", "followers_url": "https://api.github.com/users/ianbamforth/followers", "following_url": "https://api.github.com/users/ianbamforth/following{/other_user}", "gists_url": "https://api.github.com/users/ianbamforth/gists{/gist_id}", "starred_url": "https://api.github.com/users/ianbamforth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ianbamforth/subscriptions", "organizations_url": "https://api.github.com/users/ianbamforth/orgs", "repos_url": "https://api.github.com/users/ianbamforth/repos", "events_url": "https://api.github.com/users/ianbamforth/events{/privacy}", "received_events_url": "https://api.github.com/users/ianbamforth/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-04-25T14:44:55Z", "updated_at": "2017-08-10T16:19:01Z", "closed_at": null, "author_association": "NONE", "body": "The `DefaultProvider` takes aws keys from environment variables / config if available, otherwise falling back to ec2 metadata IAM role.  If you are using keys from the latter, they refresh automatically when they get near to expiry.  If the metadata service is down at this point, Synapse enters a broken state, where it has no credentials and cannot recover.  We have seen this in our production environment.\r\n\r\nI'm currently looking at a patch whereby I specifically select the `EC2Provider` if no keys are provided by the environment / config, inserting the following into `ec2tag.rb` before the call to `AWS::EC2.new`:\r\n\r\n`      unless ((@discovery['aws_access_key_id'] || ENV['aws_access_key_id']) \\\r\n              && (@discovery['aws_secret_access_key'] || ENV['aws_secret_access_key'] ))\r\n        AWS.config(:credential_provider => AWS::Core::CredentialProviders::EC2Provider.new(:retries => 0))\r\n      end\r\n`\r\n\r\nDoes this seem like a reasonable approach? Happy to submit a PR.", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/233/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/231", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/231/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/231/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/231/events", "html_url": "https://github.com/airbnb/synapse/pull/231", "id": 219087953, "number": 231, "title": "Adding tag_hash functionality to ec2tag watcher. ", "user": {"login": "microwavedboy", "id": 723391, "avatar_url": "https://avatars2.githubusercontent.com/u/723391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/microwavedboy", "html_url": "https://github.com/microwavedboy", "followers_url": "https://api.github.com/users/microwavedboy/followers", "following_url": "https://api.github.com/users/microwavedboy/following{/other_user}", "gists_url": "https://api.github.com/users/microwavedboy/gists{/gist_id}", "starred_url": "https://api.github.com/users/microwavedboy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/microwavedboy/subscriptions", "organizations_url": "https://api.github.com/users/microwavedboy/orgs", "repos_url": "https://api.github.com/users/microwavedboy/repos", "events_url": "https://api.github.com/users/microwavedboy/events{/privacy}", "received_events_url": "https://api.github.com/users/microwavedboy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-04-03T23:06:14Z", "updated_at": "2017-04-19T16:06:00Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/231", "html_url": "https://github.com/airbnb/synapse/pull/231", "diff_url": "https://github.com/airbnb/synapse/pull/231.diff", "patch_url": "https://github.com/airbnb/synapse/pull/231.patch"}, "body": "Migrated to v2 of AWS-SDK\r\nUpdated rspec tests\r\nUpdated README.md to cover new functionality\r\n\r\nThis adds the ability to define a \"tag_hash\" key in the options block for the ec2tag watcher.\r\n\r\nI had the use case of wanting to target only the intersection of two tags -- such as \r\n```\r\ntag_hash:\r\n  environment: staging\r\n  some_service: installed\r\n```\r\n\r\nAnd the existing watcher functionality did not suffice. \r\n\r\nThis is backwards compatible with existing synapse.yaml configuration files (and the tag_name/tag_value keys for ec2tag)\r\n\r\nCheers,\r\nAlex", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/231/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/221", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/221/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/221/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/221/events", "html_url": "https://github.com/airbnb/synapse/pull/221", "id": 207901745, "number": 221, "title": "Adds Docker watcher ability to use images without tags", "user": {"login": "merimna", "id": 3598983, "avatar_url": "https://avatars2.githubusercontent.com/u/3598983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/merimna", "html_url": "https://github.com/merimna", "followers_url": "https://api.github.com/users/merimna/followers", "following_url": "https://api.github.com/users/merimna/following{/other_user}", "gists_url": "https://api.github.com/users/merimna/gists{/gist_id}", "starred_url": "https://api.github.com/users/merimna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/merimna/subscriptions", "organizations_url": "https://api.github.com/users/merimna/orgs", "repos_url": "https://api.github.com/users/merimna/repos", "events_url": "https://api.github.com/users/merimna/events{/privacy}", "received_events_url": "https://api.github.com/users/merimna/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-02-15T19:22:04Z", "updated_at": "2017-02-15T19:22:04Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/221", "html_url": "https://github.com/airbnb/synapse/pull/221", "diff_url": "https://github.com/airbnb/synapse/pull/221.diff", "patch_url": "https://github.com/airbnb/synapse/pull/221.patch"}, "body": "Really useful for local dev where an image might not have a tag yet.\r\n\r\nThe fix here was to use `split` instead of `rpartition` because `rpartition` has some unexpected behavior when there is no match.\r\n\r\n```\r\n\"foo:bar\".rpartition(\":\")    # [\"foo\", \":\", \"bar\"]\r\n\r\n\"foo\".rpartition(\":\")        # [\"\", \"\", \"foo\"]\r\n```", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/221/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/217", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/217/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/217/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/217/events", "html_url": "https://github.com/airbnb/synapse/pull/217", "id": 193338292, "number": 217, "title": "Add watcher for YARN application that was deploy with Apache Slider.", "user": {"login": "GrigorievNick", "id": 16338643, "avatar_url": "https://avatars3.githubusercontent.com/u/16338643?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GrigorievNick", "html_url": "https://github.com/GrigorievNick", "followers_url": "https://api.github.com/users/GrigorievNick/followers", "following_url": "https://api.github.com/users/GrigorievNick/following{/other_user}", "gists_url": "https://api.github.com/users/GrigorievNick/gists{/gist_id}", "starred_url": "https://api.github.com/users/GrigorievNick/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GrigorievNick/subscriptions", "organizations_url": "https://api.github.com/users/GrigorievNick/orgs", "repos_url": "https://api.github.com/users/GrigorievNick/repos", "events_url": "https://api.github.com/users/GrigorievNick/events{/privacy}", "received_events_url": "https://api.github.com/users/GrigorievNick/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2016-12-04T08:03:46Z", "updated_at": "2016-12-05T09:03:36Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/217", "html_url": "https://github.com/airbnb/synapse/pull/217", "diff_url": "https://github.com/airbnb/synapse/pull/217.diff", "patch_url": "https://github.com/airbnb/synapse/pull/217.patch"}, "body": "Checked in production of Playtech with 2.7.2 YARN and slide 0.91 on HDP 2.5.\r\nChosen application done base on slider publish tags.\r\nMain goal add service discovery for exports per container.", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/217/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/215", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/215/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/215/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/215/events", "html_url": "https://github.com/airbnb/synapse/issues/215", "id": 191220332, "number": 215, "title": "discovery fails if Zookeeper tree is read only", "user": {"login": "bjoernmeier", "id": 2581775, "avatar_url": "https://avatars2.githubusercontent.com/u/2581775?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjoernmeier", "html_url": "https://github.com/bjoernmeier", "followers_url": "https://api.github.com/users/bjoernmeier/followers", "following_url": "https://api.github.com/users/bjoernmeier/following{/other_user}", "gists_url": "https://api.github.com/users/bjoernmeier/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjoernmeier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjoernmeier/subscriptions", "organizations_url": "https://api.github.com/users/bjoernmeier/orgs", "repos_url": "https://api.github.com/users/bjoernmeier/repos", "events_url": "https://api.github.com/users/bjoernmeier/events{/privacy}", "received_events_url": "https://api.github.com/users/bjoernmeier/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2016-11-23T09:21:10Z", "updated_at": "2016-11-23T09:21:10Z", "closed_at": null, "author_association": "NONE", "body": "Hi,\r\n\r\nwe are using synapse for service discovery and wanted to use it with a read only Zookeeper.\r\nBut during tests we got the following error:\r\n```\r\n/usr/lib/ruby/vendor_ruby/zk/client/base.rb:1083:in `check_rc': inputs: {:path=>\"/level_1/level_2/level_3\", :data=>\"\", :ephemeral=>false, :sequence=>false, :ignore=>:node_exists} (ZK::Exceptions::NoAuth)\r\n\tfrom /usr/lib/ruby/vendor_ruby/zk/client/base.rb:1072:in `call_and_check_rc'\r\n\tfrom /usr/lib/ruby/vendor_ruby/zk/client/threaded.rb:584:in `call_and_check_rc'\r\n\tfrom /usr/lib/ruby/vendor_ruby/zk/client/base.rb:352:in `create'\r\n\tfrom /usr/lib/ruby/vendor_ruby/zk/client/threaded.rb:434:in `create'\r\n\tfrom /usr/lib/ruby/vendor_ruby/synapse/service_watcher/zookeeper.rb:121:in `create'\r\n\tfrom /usr/lib/ruby/vendor_ruby/synapse/service_watcher/zookeeper.rb:245:in `zk_connect'\r\n\tfrom /usr/lib/ruby/vendor_ruby/synapse/service_watcher/zookeeper.rb:39:in `start'\r\n\tfrom /usr/lib/ruby/vendor_ruby/synapse.rb:48:in `block in run'\r\n\tfrom /usr/lib/ruby/vendor_ruby/synapse.rb:48:in `map'\r\n\tfrom /usr/lib/ruby/vendor_ruby/synapse.rb:48:in `run'\r\n\tfrom /usr/bin/synapse:60:in `<main>'\r\n```\r\nWhile checking the code we saw that synapse uses zk `exists` to create nodes if they do not exist (e.g. /level_1 exists it will create level_2/level_3).This fails even if the nodes do exist as synapse does not have create permissions in zookeeper.\r\nIt would be great if as long a subtree does not exist only the existing root is watched and on a new node creation the watches are registered on the new subtree instead of creating the subtree.\r\n\r\nThank you.\r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/215/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/210", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/210/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/210/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/210/events", "html_url": "https://github.com/airbnb/synapse/issues/210", "id": 180840654, "number": 210, "title": "docker-api v1.32 dropped support for Ruby 1.9", "user": {"login": "ianbamforth", "id": 7094207, "avatar_url": "https://avatars0.githubusercontent.com/u/7094207?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ianbamforth", "html_url": "https://github.com/ianbamforth", "followers_url": "https://api.github.com/users/ianbamforth/followers", "following_url": "https://api.github.com/users/ianbamforth/following{/other_user}", "gists_url": "https://api.github.com/users/ianbamforth/gists{/gist_id}", "starred_url": "https://api.github.com/users/ianbamforth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ianbamforth/subscriptions", "organizations_url": "https://api.github.com/users/ianbamforth/orgs", "repos_url": "https://api.github.com/users/ianbamforth/repos", "events_url": "https://api.github.com/users/ianbamforth/events{/privacy}", "received_events_url": "https://api.github.com/users/ianbamforth/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-10-04T09:07:09Z", "updated_at": "2017-03-14T01:36:09Z", "closed_at": null, "author_association": "NONE", "body": "No longer possible to install this with Ruby 1.9, as https://github.com/swipely/docker-api/releases/tag/v1.32.0 dropped support for 1.9.  Setting `<1.32` in the `synapse.gemspec` appears to resolve this.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/210/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/209", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/209/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/209/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/209/events", "html_url": "https://github.com/airbnb/synapse/pull/209", "id": 176152504, "number": 209, "title": "Add splay startup jitter to haproxy startup", "user": {"login": "solarkennedy", "id": 370205, "avatar_url": "https://avatars0.githubusercontent.com/u/370205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/solarkennedy", "html_url": "https://github.com/solarkennedy", "followers_url": "https://api.github.com/users/solarkennedy/followers", "following_url": "https://api.github.com/users/solarkennedy/following{/other_user}", "gists_url": "https://api.github.com/users/solarkennedy/gists{/gist_id}", "starred_url": "https://api.github.com/users/solarkennedy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/solarkennedy/subscriptions", "organizations_url": "https://api.github.com/users/solarkennedy/orgs", "repos_url": "https://api.github.com/users/solarkennedy/repos", "events_url": "https://api.github.com/users/solarkennedy/events{/privacy}", "received_events_url": "https://api.github.com/users/solarkennedy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-09-10T03:07:47Z", "updated_at": "2016-10-18T02:57:27Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/209", "html_url": "https://github.com/airbnb/synapse/pull/209", "diff_url": "https://github.com/airbnb/synapse/pull/209.diff", "patch_url": "https://github.com/airbnb/synapse/pull/209.patch"}, "body": "Sometimes all the synapses are restarted globally across a fleet, so I would like their startup to be jittered just like their normal `next_restart` is jittered during a normal haproxy restart. I believe this change will do that.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/209/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/207", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/207/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/207/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/207/events", "html_url": "https://github.com/airbnb/synapse/pull/207", "id": 170288613, "number": 207, "title": "[base watcher] filter on set_backends", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-08-09T22:43:12Z", "updated_at": "2016-08-09T23:03:36Z", "closed_at": null, "author_association": "COLLABORATOR", "pull_request": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/207", "html_url": "https://github.com/airbnb/synapse/pull/207", "diff_url": "https://github.com/airbnb/synapse/pull/207.diff", "patch_url": "https://github.com/airbnb/synapse/pull/207.patch"}, "body": "currently, we are filtering backends when we attempt to retrieve the list of\nbackends. there are a few things wrong with that:\n- we perform the same filter computation repeatedly every time we rebuild the haproxy config\n- we incorrectly restart haproxy even if the set of backends which don't match the filters changes\n- we log the total number of backends discovered, not the number of backends matching the filter\n- it's unclear how the defaults/keep_last logic plays with filters/leader election\n\nthis PR moves the filter/leader election logic to be performed as part of\n`set_backends`. the call to retrieve the backends becomes just an\n`attr_reader`. we don't have to make any spec changes, because we already test\nall of this logic as part of testing `set_backends`\n\nthis change may be backwards-incompatible depending on configuration, because\nthe logic around how default/previous backends are used is different.\npreviously, if no backends match filters (including the default backends) or if\nno backends are elected as leader (including default backends) then we return\nan empty list. after this change is made, we will apply the filters/election\nparameters to just the discovered backends. if these fail election or\nfiltering, then we will return the default backends instead of returning an\nempty list.\n\ni think this change makes things more clear overall. previously, there was no\nmechanism to always return some default set of backends no matter what, and now\nthis mechanism is just the setting of `default_backends`\n\nto: @jtai @jolynch @scarletmeow \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/207/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/201", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/201/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/201/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/201/events", "html_url": "https://github.com/airbnb/synapse/pull/201", "id": 160758731, "number": 201, "title": "WIP: Standalone mode", "user": {"login": "hashbrowncipher", "id": 124699, "avatar_url": "https://avatars2.githubusercontent.com/u/124699?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hashbrowncipher", "html_url": "https://github.com/hashbrowncipher", "followers_url": "https://api.github.com/users/hashbrowncipher/followers", "following_url": "https://api.github.com/users/hashbrowncipher/following{/other_user}", "gists_url": "https://api.github.com/users/hashbrowncipher/gists{/gist_id}", "starred_url": "https://api.github.com/users/hashbrowncipher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hashbrowncipher/subscriptions", "organizations_url": "https://api.github.com/users/hashbrowncipher/orgs", "repos_url": "https://api.github.com/users/hashbrowncipher/repos", "events_url": "https://api.github.com/users/hashbrowncipher/events{/privacy}", "received_events_url": "https://api.github.com/users/hashbrowncipher/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2016-06-16T20:54:50Z", "updated_at": "2016-06-16T20:54:50Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/201", "html_url": "https://github.com/airbnb/synapse/pull/201", "diff_url": "https://github.com/airbnb/synapse/pull/201.diff", "patch_url": "https://github.com/airbnb/synapse/pull/201.patch"}, "body": "@jolynch: this branch implements something we had discussed a little while ago, namely a standalone or \"oneshot\" execution mode for Synapse. This is for situations where you would like to know what information is in Synapse's backing datastore, but you don't want to read it out of the datastore directly in order to preserve separation of concerns. By adding this standalone operation, we can use the same code paths that Synapse would use to read the data.\n\nMy initial use-case is monitoring scripts. I would like to deploy a container with the Synapse gem, and run it as a script that produces a list of backends as output. My monitoring script will process this output, check it for sanity, and report issues to my monitoring system if the results are insane.\n\nThis change makes use of a new method on watchers, that I've called `read`. As far as I can tell, right now watchers don't implement any method which provides the list of backends as output without mutating other state. `read` is designed for that purpose.\n\nSo far I've just touched the Zookeeper watcher. Please review for initial feasibility.\n\nExample invocation:\n\n```\nsynapse_standalone.rb '{\"method\":\"zookeeper\",\"path\":\"/nerve/services/postgres_main_read\",\"hosts\":[\"10.74.4.104:2181\",\"10.74.4.70:2181\",\"10.74.1.43:2181\"]}'\n```\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/201/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/198", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/198/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/198/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/198/events", "html_url": "https://github.com/airbnb/synapse/issues/198", "id": 159458882, "number": 198, "title": "ec2tag watcher needs to back off if Client.RequestLimitExceeded is returned", "user": {"login": "ianbamforth", "id": 7094207, "avatar_url": "https://avatars0.githubusercontent.com/u/7094207?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ianbamforth", "html_url": "https://github.com/ianbamforth", "followers_url": "https://api.github.com/users/ianbamforth/followers", "following_url": "https://api.github.com/users/ianbamforth/following{/other_user}", "gists_url": "https://api.github.com/users/ianbamforth/gists{/gist_id}", "starred_url": "https://api.github.com/users/ianbamforth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ianbamforth/subscriptions", "organizations_url": "https://api.github.com/users/ianbamforth/orgs", "repos_url": "https://api.github.com/users/ianbamforth/repos", "events_url": "https://api.github.com/users/ianbamforth/events{/privacy}", "received_events_url": "https://api.github.com/users/ianbamforth/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-06-09T17:01:17Z", "updated_at": "2016-07-01T07:34:17Z", "closed_at": null, "author_association": "NONE", "body": "If you have a reasonable number of ec2tag watchers running, you can hit the rate limiter.  Rather than a fixed check_interval, there should be a way of doing some kind of backoff (as per the AWS docs).  If the Client.RequestLimitExceeded is returned, then there definitely needs to be a backoff - otherwise you just continue to hammer on the door, and the rate limit exceedance will never go away.\n\nI'm yet to discover what the rate limit is, but I hit it today with ~6 servers each watching ~24 ec2tags (plus various other odds and sods running in the background) and the default check_interval\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/198/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/185", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/185/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/185/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/185/events", "html_url": "https://github.com/airbnb/synapse/issues/185", "id": 149453186, "number": 185, "title": "Allow name in the DNS service watcher's ping method to configurable", "user": {"login": "ghost", "id": 10137, "avatar_url": "https://avatars3.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2016-04-19T12:53:57Z", "updated_at": "2016-04-19T12:53:57Z", "closed_at": null, "author_association": "NONE", "body": "https://github.com/airbnb/synapse/blob/master/lib/synapse/service_watcher/dns.rb#L18 is hard-coded to airbnb.com .\n\nIdeally this'd be configurable, so we can set it to something internal, so we don't have to depend on airbnb.com's DNS.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/185/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/184", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/184/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/184/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/184/events", "html_url": "https://github.com/airbnb/synapse/pull/184", "id": 147036209, "number": 184, "title": "[WIP] ASG watcher", "user": {"login": "tomfitzhenry", "id": 61303, "avatar_url": "https://avatars3.githubusercontent.com/u/61303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomfitzhenry", "html_url": "https://github.com/tomfitzhenry", "followers_url": "https://api.github.com/users/tomfitzhenry/followers", "following_url": "https://api.github.com/users/tomfitzhenry/following{/other_user}", "gists_url": "https://api.github.com/users/tomfitzhenry/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomfitzhenry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomfitzhenry/subscriptions", "organizations_url": "https://api.github.com/users/tomfitzhenry/orgs", "repos_url": "https://api.github.com/users/tomfitzhenry/repos", "events_url": "https://api.github.com/users/tomfitzhenry/events{/privacy}", "received_events_url": "https://api.github.com/users/tomfitzhenry/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-04-08T20:49:06Z", "updated_at": "2016-05-26T23:16:49Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/184", "html_url": "https://github.com/airbnb/synapse/pull/184", "diff_url": "https://github.com/airbnb/synapse/pull/184.diff", "patch_url": "https://github.com/airbnb/synapse/pull/184.patch"}, "body": "Early feedback welcome.\n\nCode mostly copied from ec2tag watcher.\n\nIssue #182 \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/184/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/182", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/182/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/182/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/182/events", "html_url": "https://github.com/airbnb/synapse/issues/182", "id": 146989577, "number": 182, "title": "AWS Auto Scaling Group watcher", "user": {"login": "tomfitzhenry", "id": 61303, "avatar_url": "https://avatars3.githubusercontent.com/u/61303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomfitzhenry", "html_url": "https://github.com/tomfitzhenry", "followers_url": "https://api.github.com/users/tomfitzhenry/followers", "following_url": "https://api.github.com/users/tomfitzhenry/following{/other_user}", "gists_url": "https://api.github.com/users/tomfitzhenry/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomfitzhenry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomfitzhenry/subscriptions", "organizations_url": "https://api.github.com/users/tomfitzhenry/orgs", "repos_url": "https://api.github.com/users/tomfitzhenry/repos", "events_url": "https://api.github.com/users/tomfitzhenry/events{/privacy}", "received_events_url": "https://api.github.com/users/tomfitzhenry/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-04-08T17:30:09Z", "updated_at": "2017-05-05T18:19:14Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/182/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/181", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/181/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/181/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/181/events", "html_url": "https://github.com/airbnb/synapse/issues/181", "id": 146874013, "number": 181, "title": "In DNS service watcher, re-resolve every $TTL", "user": {"login": "tomfitzhenry", "id": 61303, "avatar_url": "https://avatars3.githubusercontent.com/u/61303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomfitzhenry", "html_url": "https://github.com/tomfitzhenry", "followers_url": "https://api.github.com/users/tomfitzhenry/followers", "following_url": "https://api.github.com/users/tomfitzhenry/following{/other_user}", "gists_url": "https://api.github.com/users/tomfitzhenry/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomfitzhenry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomfitzhenry/subscriptions", "organizations_url": "https://api.github.com/users/tomfitzhenry/orgs", "repos_url": "https://api.github.com/users/tomfitzhenry/repos", "events_url": "https://api.github.com/users/tomfitzhenry/events{/privacy}", "received_events_url": "https://api.github.com/users/tomfitzhenry/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-04-08T09:25:47Z", "updated_at": "2016-04-24T21:56:59Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "The DNS service watcher will re-resolve every `check_interval` seconds. Rather than having to set `check_interval`, and possibly setting it too high/low, it would be nice if it re-resolved every $TTL (whatever the returned TTL is).\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/181/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/179", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/179/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/179/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/179/events", "html_url": "https://github.com/airbnb/synapse/pull/179", "id": 144103619, "number": 179, "title": "Weights support in Synapse", "user": {"login": "scarletmeow", "id": 6128469, "avatar_url": "https://avatars2.githubusercontent.com/u/6128469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarletmeow", "html_url": "https://github.com/scarletmeow", "followers_url": "https://api.github.com/users/scarletmeow/followers", "following_url": "https://api.github.com/users/scarletmeow/following{/other_user}", "gists_url": "https://api.github.com/users/scarletmeow/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarletmeow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarletmeow/subscriptions", "organizations_url": "https://api.github.com/users/scarletmeow/orgs", "repos_url": "https://api.github.com/users/scarletmeow/repos", "events_url": "https://api.github.com/users/scarletmeow/events{/privacy}", "received_events_url": "https://api.github.com/users/scarletmeow/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-03-28T22:49:18Z", "updated_at": "2016-05-27T18:52:28Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/179", "html_url": "https://github.com/airbnb/synapse/pull/179", "diff_url": "https://github.com/airbnb/synapse/pull/179.diff", "patch_url": "https://github.com/airbnb/synapse/pull/179.patch"}, "body": "Follow up to https://github.com/airbnb/synapse/pull/174.\n\nAdds logic to signal HAProxy restart if `weight` has changed.\n\nAdded an additional warning if `weights` is redefined in `haproxy_server_options`. I would prefer not to implement behavior that strips out any user-defined `weight X` statement in HAProxy server options. It seems sufficient to warn about the unexpected behavior in either case.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/179/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/174", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/174/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/174/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/174/events", "html_url": "https://github.com/airbnb/synapse/pull/174", "id": 134944503, "number": 174, "title": "Create an option to stop ignoring weights. By default weights will still be ignored. ", "user": {"login": "minkovich", "id": 4672120, "avatar_url": "https://avatars1.githubusercontent.com/u/4672120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/minkovich", "html_url": "https://github.com/minkovich", "followers_url": "https://api.github.com/users/minkovich/followers", "following_url": "https://api.github.com/users/minkovich/following{/other_user}", "gists_url": "https://api.github.com/users/minkovich/gists{/gist_id}", "starred_url": "https://api.github.com/users/minkovich/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/minkovich/subscriptions", "organizations_url": "https://api.github.com/users/minkovich/orgs", "repos_url": "https://api.github.com/users/minkovich/repos", "events_url": "https://api.github.com/users/minkovich/events{/privacy}", "received_events_url": "https://api.github.com/users/minkovich/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-02-19T18:47:52Z", "updated_at": "2016-05-26T23:16:49Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/174", "html_url": "https://github.com/airbnb/synapse/pull/174", "diff_url": "https://github.com/airbnb/synapse/pull/174.diff", "patch_url": "https://github.com/airbnb/synapse/pull/174.patch"}, "body": "This commit is based on the following by @bobtfish \nhttps://github.com/airbnb/synapse/pull/131\n\nbut does the following things differently:\n1. By default weights are ignored. This is to maintain current behavior for safety.\n2. HAProxy will reconfigure if weights changes.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/174/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/172", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/172/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/172/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/172/events", "html_url": "https://github.com/airbnb/synapse/issues/172", "id": 134661185, "number": 172, "title": "DnsWatcher < BaseWatcher", "user": {"login": "bkochendorfer", "id": 1072933, "avatar_url": "https://avatars2.githubusercontent.com/u/1072933?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bkochendorfer", "html_url": "https://github.com/bkochendorfer", "followers_url": "https://api.github.com/users/bkochendorfer/followers", "following_url": "https://api.github.com/users/bkochendorfer/following{/other_user}", "gists_url": "https://api.github.com/users/bkochendorfer/gists{/gist_id}", "starred_url": "https://api.github.com/users/bkochendorfer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bkochendorfer/subscriptions", "organizations_url": "https://api.github.com/users/bkochendorfer/orgs", "repos_url": "https://api.github.com/users/bkochendorfer/repos", "events_url": "https://api.github.com/users/bkochendorfer/events{/privacy}", "received_events_url": "https://api.github.com/users/bkochendorfer/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2016-02-18T18:47:51Z", "updated_at": "2016-02-19T15:40:57Z", "closed_at": null, "author_association": "NONE", "body": "We were trying out this service at our organization in an internal datacenter and we temporarily lost internet connection. Because this is resolving the external address of [airbnb](https://github.com/airbnb/synapse/blob/01a2409a5f1e19742ff9380ce683a54b31a4b7ad/lib/synapse/service_watcher/dns.rb#L18) being required as part of 'ping?' it caused synapse to fail entirely. Perhaps throwing a recoverable error rather than a runtime exception would help prevent the entire cluster from collapsing.\n\n``` bash\nI, [2016-02-17T17:34:09.333142 #8263]  INFO -- Synapse::Haproxy: synapse: restarted haproxy\nE, [2016-02-18T16:58:00.932196 #8263] ERROR -- Synapse::Synapse: synapse: encountered unexpected exception #<RuntimeError: synapse: service watcher mongo failed ping!> in main thread\nW, [2016-02-18T16:58:00.932830 #8263]  WARN -- Synapse::Synapse: synapse: exiting; sending stop signal to all watchers\nI, [2016-02-18T16:58:00.932962 #8263]  INFO -- Synapse::ZookeeperDnsWatcher: synapse: stopping watcher mongo using default stop handler\nW, [2016-02-18T16:58:00.933561 #8263]  WARN -- Synapse::ZookeeperDnsWatcher::Zookeeper: synapse: zookeeper watcher exiting\nI, [2016-02-18T16:58:00.934565 #8263]  INFO -- Synapse::ZookeeperDnsWatcher::Zookeeper: synapse: zookeeper watcher cleaning up\nI, [2016-02-18T16:58:00.934961 #8263]  INFO -- Synapse::ZookeeperDnsWatcher::Zookeeper: synapse: closing zk connection to 172.16.151.82:2181,172.16.151.86:2181,172.16.151.87:2181\nI, [2016-02-18T16:58:00.937347 #8263]  INFO -- Synapse::ZookeeperDnsWatcher::Zookeeper: synapse: zookeeper watcher cleaned up successfully\n/var/lib/mesos/slaves/20160213-002027-1469517996-5050-555-S4/frameworks/20160204-212329-1385631916-5050-163-0000/executors/thermos-1455730435744-bright-devel-authserve-0-6e52c164-8fcb-4e00-bc33-62523f32ad4c/runs/4810df56-7a1d-4bd1-9c2c-84f2c041a181/sandbox/synapse/lib/ruby/gems/2.2.0/gems/synapse-0.12.1/lib/synapse.rb:54:in `block (2 levels) in run': synapse: service watcher mongo failed ping! (RuntimeError)\n    from /var/lib/mesos/slaves/20160213-002027-1469517996-5050-555-S4/frameworks/20160204-212329-1385631916-5050-163-0000/executors/thermos-1455730435744-bright-devel-authserve-0-6e52c164-8fcb-4e00-bc33-62523f32ad4c/runs/4810df56-7a1d-4bd1-9c2c-84f2c041a181/sandbox/synapse/lib/ruby/gems/2.2.0/gems/synapse-0.12.1/lib/synapse.rb:53:in `each'\n    from /var/lib/mesos/slaves/20160213-002027-1469517996-5050-555-S4/frameworks/20160204-212329-1385631916-5050-163-0000/executors/thermos-1455730435744-bright-devel-authserve-0-6e52c164-8fcb-4e00-bc33-62523f32ad4c/runs/4810df56-7a1d-4bd1-9c2c-84f2c041a181/sandbox/synapse/lib/ruby/gems/2.2.0/gems/synapse-0.12.1/lib/synapse.rb:53:in `block in run'\n    from /var/lib/mesos/slaves/20160213-002027-1469517996-5050-555-S4/frameworks/20160204-212329-1385631916-5050-163-0000/executors/thermos-1455730435744-bright-devel-authserve-0-6e52c164-8fcb-4e00-bc33-62523f32ad4c/runs/4810df56-7a1d-4bd1-9c2c-84f2c041a181/sandbox/synapse/lib/ruby/gems/2.2.0/gems/synapse-0.12.1/lib/synapse.rb:52:in `loop'\n    from /var/lib/mesos/slaves/20160213-002027-1469517996-5050-555-S4/frameworks/20160204-212329-1385631916-5050-163-0000/executors/thermos-1455730435744-bright-devel-authserve-0-6e52c164-8fcb-4e00-bc33-62523f32ad4c/runs/4810df56-7a1d-4bd1-9c2c-84f2c041a181/sandbox/synapse/lib/ruby/gems/2.2.0/gems/synapse-0.12.1/lib/synapse.rb:52:in `run'\n    from /var/lib/mesos/slaves/20160213-002027-1469517996-5050-555-S4/frameworks/20160204-212329-1385631916-5050-163-0000/executors/thermos-1455730435744-bright-devel-authserve-0-6e52c164-8fcb-4e00-bc33-62523f32ad4c/runs/4810df56-7a1d-4bd1-9c2c-84f2c041a181/sandbox/synapse/lib/ruby/gems/2.2.0/gems/synapse-0.12.1/bin/synapse:60:in `<top (required)>'\n    from /var/lib/mesos/slaves/20160213-002027-1469517996-5050-555-S4/frameworks/20160204-212329-1385631916-5050-163-0000/executors/thermos-1455730435744-bright-devel-authserve-0-6e52c164-8fcb-4e00-bc33-62523f32ad4c/runs/4810df56-7a1d-4bd1-9c2c-84f2c041a181/sandbox/synapse/.bin/synapse:23:in `load'\n    from /var/lib/mesos/slaves/20160213-002027-1469517996-5050-555-S4/frameworks/20160204-212329-1385631916-5050-163-0000/executors/thermos-1455730435744-bright-devel-authserve-0-6e52c164-8fcb-4e00-bc33-62523f32ad4c/runs/4810df56-7a1d-4bd1-9c2c-84f2c041a181/sandbox/synapse/.bin/synapse:23:in `<main>'\n```\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/172/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/163", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/163/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/163/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/163/events", "html_url": "https://github.com/airbnb/synapse/issues/163", "id": 133056345, "number": 163, "title": "Centos Compatibility & Higher Version of Ruby Support ", "user": {"login": "fnicholas", "id": 9054264, "avatar_url": "https://avatars3.githubusercontent.com/u/9054264?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fnicholas", "html_url": "https://github.com/fnicholas", "followers_url": "https://api.github.com/users/fnicholas/followers", "following_url": "https://api.github.com/users/fnicholas/following{/other_user}", "gists_url": "https://api.github.com/users/fnicholas/gists{/gist_id}", "starred_url": "https://api.github.com/users/fnicholas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fnicholas/subscriptions", "organizations_url": "https://api.github.com/users/fnicholas/orgs", "repos_url": "https://api.github.com/users/fnicholas/repos", "events_url": "https://api.github.com/users/fnicholas/events{/privacy}", "received_events_url": "https://api.github.com/users/fnicholas/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-02-11T18:48:41Z", "updated_at": "2016-02-11T18:48:46Z", "closed_at": null, "author_association": "NONE", "body": "synapse version - v0.12.2.\nnerve version - v0.6.0\n\nthe cookbook breaks here on centos. Im running it on centos 6.5 64 bit\nError executing action run on resource 'execute[synapse_install]'\n\nIt appeared the cookbook is looking for a higher version for ruby. Centos currently installs v1.8. It also appeared there's no easy way of installing a higher version of ruby on centos. Please how should I go about this?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/163/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/161", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/161/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/161/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/161/events", "html_url": "https://github.com/airbnb/synapse/issues/161", "id": 132194737, "number": 161, "title": "ELB config - Error \"Name or service not known\"", "user": {"login": "j-datadome", "id": 16231899, "avatar_url": "https://avatars0.githubusercontent.com/u/16231899?v=4", "gravatar_id": "", "url": "https://api.github.com/users/j-datadome", "html_url": "https://github.com/j-datadome", "followers_url": "https://api.github.com/users/j-datadome/followers", "following_url": "https://api.github.com/users/j-datadome/following{/other_user}", "gists_url": "https://api.github.com/users/j-datadome/gists{/gist_id}", "starred_url": "https://api.github.com/users/j-datadome/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/j-datadome/subscriptions", "organizations_url": "https://api.github.com/users/j-datadome/orgs", "repos_url": "https://api.github.com/users/j-datadome/repos", "events_url": "https://api.github.com/users/j-datadome/events{/privacy}", "received_events_url": "https://api.github.com/users/j-datadome/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-02-08T16:47:29Z", "updated_at": "2016-03-02T08:42:03Z", "closed_at": null, "author_association": "NONE", "body": "Hello,\n\nI installed Synapse on a Ubuntu 14.04 server.\n\nWhen I try to launch it using the following config, I receive as a response a warning \"Name or service not known\".\n\nI run haproxy 1.6.3, use ruby 2.2.1 and bundler 1.11.2\n\nSynapse correctly rewrites haproxy config file, but seems to fail to find my instances.\nIs there a debug mode which I could activate to track more precisely the error?\n\nThank you a lot\n\nConfig file:\n\n```\n\n---\n  services:\n    myservice:\n      default_servers:\n        -\n          name: \"elb\"\n          host: \"ELB_IP\"\n          port: 80\n      discovery:\n        method: \"ec2tag\"\n        tag_name: \"TAG_NAME\"\n        tag_value: \"TAG_VALUE\"\n        aws_access_key_id: \"AWS_ACCESS_KEY_ID\"\n        aws_secret_access_key: \"AWS_SECRET_ACCESS_KEY\"\n        aws_region: \"AWS_REGION\"\n      haproxy:\n        port: 3213\n        server_port_override: \"7000\"\n        server_options: \"check inter 2000 rise 3 fall 2\"\n        frontend:\n          - \"mode tcp\"\n        backend:\n          - \"mode tcp\"\n  haproxy:\n    bind_address: \"0.0.0.0\"\n    reload_command: \"service haproxy reload\"\n    config_file_path: \"/etc/haproxy/haproxy.cfg\"\n    do_writes: true\n    do_reloads: true\n    global:\n      - \"log 127.0.0.1 local0\"\n      - \"log 127.0.0.1 local1 notice\"\n      - \"user haproxy\"\n      - \"group haproxy\"\n    defaults:\n      - \"log global\"\n      - \"balance roundrobin\"\n      - \"timeout client 50s\"\n      - \"timeout connect 5s\"\n      - \"timeout server 50s\"\n```\n\nResponse:\n\n```\nI, [2016-02-08T16:39:00.007426 #2617]  INFO -- Synapse::Synapse: synapse: starting...\nI, [2016-02-08T16:39:00.007588 #2617]  INFO -- Synapse::ServiceWatcher::Ec2tagWatcher: Connecting to EC2 region: AWS_REGION\nI, [2016-02-08T16:39:00.696891 #2617]  INFO -- Synapse::ServiceWatcher::Ec2tagWatcher: synapse: ec2tag watcher looking for instances tagged with TAG_NAME=TAG_VALUE\nI, [2016-02-08T16:39:00.697127 #2617]  INFO -- Synapse::Synapse: synapse: configuring haproxy\nW, [2016-02-08T16:39:00.697281 #2617]  WARN -- Synapse::Haproxy: synapse: unhandled error reading stats socket: #<TypeError: no implicit conversion of nil into String>\nI, [2016-02-08T16:39:00.721859 #2617]  INFO -- Synapse::Haproxy: synapse: restarted haproxy\nW, [2016-02-08T16:39:02.886652 #2617]  WARN -- Synapse::ServiceWatcher::Ec2tagWatcher: synapse: error in ec2tag watcher thread: #<SocketError: getaddrinfo: Name or service not known>\nW, [2016-02-08T16:39:02.886780 #2617]  WARN -- Synapse::ServiceWatcher::Ec2tagWatcher: [\"/usr/local/rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/net/http.rb:879:in `initialize'\", \"/usr/local/rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/net/http.rb:879:in `open'\", \"/usr/local/rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/net/http.rb:879:in `block in connect'\", \"/usr/local/rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/timeout.rb:89:in `block in timeout'\", \"/usr/local/rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/timeout.rb:99:in `call'\", \"/usr/local/rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/timeout.rb:99:in `timeout'\", \"/usr/local/rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/net/http.rb:878:in `connect'\", \"/usr/local/rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/net/http.rb:863:in `do_start'\", \"/usr/local/rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/net/http.rb:858:in `start'\", \"/usr/local/rvm/gems/ruby-2.2.1/gems/aws-sdk-v1-1.66.0/lib/aws/core/http/connection_pool.rb:327:in `start_session'\", \"/usr/local/rvm/gems/ruby-2.2.1/gems/aws-sdk-v1-1.66.0/lib/aws/core/http/connection_pool.rb:127:in `session_for'\", \"/usr/local/rvm/gems/ruby-2.2.1/gems/aws-sdk-v1-1.66.0/lib/aws/core/http/net_http_handler.rb:56:in `handle'\", \"/usr/local/rvm/gems/ruby-2.2.1/gems/aws-sdk-v1-1.66.0/lib/aws/core/client.rb:253:in `block in make_sync_request'\", \"/usr/local/rvm/gems/ruby-2.2.1/gems/aws-sdk-v1-1.66.0/lib/aws/core/client.rb:289:in `retry_server_errors'\", \"/usr/local/rvm/gems/ruby-2.2.1/gems/aws-sdk-v1-1.66.0/lib/aws/core/client.rb:249:in `make_sync_request'\", \"/usr/local/rvm/gems/ruby-2.2.1/gems/aws-sdk-v1-1.66.0/lib/aws/core/client.rb:511:in `block (2 levels) in client_request'\", \"/usr/local/rvm/gems/ruby-2.2.1/gems/aws-sdk-v1-1.66.0/lib/aws/core/client.rb:391:in `log_client_request'\", \"/usr/local/rvm/gems/ruby-2.2.1/gems/aws-sdk-v1-1.66.0/lib/aws/core/client.rb:477:in `block in client_request'\", \"/usr/local/rvm/gems/ruby-2.2.1/gems/aws-sdk-v1-1.66.0/lib/aws/core/client.rb:373:in `return_or_raise'\", \"/usr/local/rvm/gems/ruby-2.2.1/gems/aws-sdk-v1-1.66.0/lib/aws/core/client.rb:476:in `client_request'\", \"(eval):3:in `describe_instances'\", \"/usr/local/rvm/gems/ruby-2.2.1/gems/aws-sdk-v1-1.66.0/lib/aws/ec2/filtered_collection.rb:44:in `filtered_request'\", \"/usr/local/rvm/gems/ruby-2.2.1/gems/aws-sdk-v1-1.66.0/lib/aws/ec2/instance_collection.rb:318:in `each'\", \"/usr/local/rvm/gems/ruby-2.2.1/bundler/gems/synapse-00024028b366/lib/synapse/service_watcher/ec2tag.rb:108:in `select'\", \"/usr/local/rvm/gems/ruby-2.2.1/bundler/gems/synapse-00024028b366/lib/synapse/service_watcher/ec2tag.rb:108:in `instances_with_tags'\", \"/usr/local/rvm/gems/ruby-2.2.1/bundler/gems/synapse-00024028b366/lib/synapse/service_watcher/ec2tag.rb:86:in `block in discover_instances'\", \"/usr/local/rvm/gems/ruby-2.2.1/gems/aws-sdk-v1-1.66.0/lib/aws/core.rb:598:in `memoize'\", \"/usr/local/rvm/gems/ruby-2.2.1/bundler/gems/synapse-00024028b366/lib/synapse/service_watcher/ec2tag.rb:85:in `discover_instances'\", \"/usr/local/rvm/gems/ruby-2.2.1/bundler/gems/synapse-00024028b366/lib/synapse/service_watcher/ec2tag.rb:63:in `watch'\", \"/usr/local/rvm/gems/ruby-2.2.1/bundler/gems/synapse-00024028b366/lib/synapse/service_watcher/ec2tag.rb:23:in `block in start'\"]\n\n```\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/161/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/158", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/158/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/158/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/158/events", "html_url": "https://github.com/airbnb/synapse/issues/158", "id": 127629242, "number": 158, "title": "synapse: error polling docker host http://localhost:4243: #<Docker::Error::ClientError: Expected(200..204) <=> Actual(400 Bad Request)", "user": {"login": "timerish", "id": 9330475, "avatar_url": "https://avatars3.githubusercontent.com/u/9330475?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timerish", "html_url": "https://github.com/timerish", "followers_url": "https://api.github.com/users/timerish/followers", "following_url": "https://api.github.com/users/timerish/following{/other_user}", "gists_url": "https://api.github.com/users/timerish/gists{/gist_id}", "starred_url": "https://api.github.com/users/timerish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timerish/subscriptions", "organizations_url": "https://api.github.com/users/timerish/orgs", "repos_url": "https://api.github.com/users/timerish/repos", "events_url": "https://api.github.com/users/timerish/events{/privacy}", "received_events_url": "https://api.github.com/users/timerish/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-01-20T08:27:30Z", "updated_at": "2016-01-21T19:33:06Z", "closed_at": null, "author_association": "NONE", "body": "Hello,\n        Is synapse incompatible with docker-api 1.20 , I got this warn when running synapse,\nI attached environment info,and how to resolve it ?\n\nroot@VirtualBox:/var/lib/gems/1.9.1/gems/synapse-0.12.2# synapse -c /etc/synapse.json.conf\nI, [2016-01-20T16:15:03.797821 #13184]  INFO -- Synapse::Synapse: synapse: starting...\nI, [2016-01-20T16:15:03.798011 #13184]  INFO -- Synapse::Synapse: synapse: configuring haproxy\nI, [2016-01-20T16:15:03.798862 #13184]  INFO -- Synapse::Haproxy: synapse: reconfigured haproxy\nW, [2016-01-20T16:15:03.807022 #13184]  WARN -- Synapse::ServiceWatcher::DockerWatcher: synapse: error polling docker host http://localhost:4243: #<Docker::Error::ClientError: Expected(200..204) <=> Actual(400 Bad Request)\n\n> I, [2016-01-20T16:15:03.808142 #13184]  INFO -- Synapse::Haproxy: synapse: restarted haproxy\n> W, [2016-01-20T16:15:18.815548 #13184]  WARN -- Synapse::ServiceWatcher::DockerWatcher: synapse: error polling docker host http://localhost:4243: #<Docker::Error::ClientError: Expected(200..204) <=> Actual(400 Bad Request)\n\nroot@VirtualBox:/var/lib/gems/1.9.1/gems/synapse-0.12.2# docker version\nClient:\n Version:      1.8.2\n API version:  1.20\n Go version:   go1.4.2\n Git commit:   0a8c2e3\n Built:        Wed Oct  7 17:48:28 UTC 2015\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.8.2\n API version:  1.20\n Go version:   go1.4.2\n Git commit:   0a8c2e3\n Built:        Wed Oct  7 17:48:28 UTC 2015\n OS/Arch:      linux/amd64\n\nroot@VirtualBox:/var/lib/gems/1.9.1/gems/synapse-0.12.2# cat synapse.gemspec \n# -_\\- encoding: utf-8 -_-\n\nlib = File.expand_path('../lib', **FILE**)\n$LOAD_PATH.unshift(lib) unless $LOAD_PATH.include?(lib)\nrequire 'synapse/version'\n\nGem::Specification.new do |gem|\n  gem.name          = \"synapse\"\n  gem.version       = Synapse::VERSION\n  gem.authors       = [\"Martin Rhoads\"]\n  gem.email         = [\"martin.rhoads@airbnb.com\"]\n  gem.description   = %q{: Write a gem description}\n  gem.summary       = %q{: Write a gem summary}\n  gem.homepage      = \"\"\n\n  gem.files         = `git ls-files`.split($/)\n  gem.executables   = gem.files.grep(%r{^bin/}).map{ |f| File.basename(f) }\n  gem.test_files    = gem.files.grep(%r{^(test|spec|features)/})\n\n  gem.add_runtime_dependency \"aws-sdk\", \"~> 1.39\"\n  gem.add_runtime_dependency \"docker-api\", \"~> 1.7.2\"\n  gem.add_runtime_dependency \"zk\", \"~> 1.9.4\"\n\n  gem.add_development_dependency \"rake\"\n  gem.add_development_dependency \"rspec\", \"~> 3.1.0\"\n  gem.add_development_dependency \"pry\"\n  gem.add_development_dependency \"pry-nav\"\n  gem.add_development_dependency \"webmock\"\nend\n\nroot@VirtualBox:/var/lib/gems/1.9.1/gems/synapse-0.12.2# uname -an\nLinux VirtualBox 3.19.0-25-generic #26~14.04.1-Ubuntu SMP Fri Jul 24 21:16:20 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\n\nThanks in advance.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/158/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/131", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/131/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/131/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/131/events", "html_url": "https://github.com/airbnb/synapse/pull/131", "id": 97727845, "number": 131, "title": "Weights in generated config", "user": {"login": "bobtfish", "id": 42338, "avatar_url": "https://avatars1.githubusercontent.com/u/42338?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bobtfish", "html_url": "https://github.com/bobtfish", "followers_url": "https://api.github.com/users/bobtfish/followers", "following_url": "https://api.github.com/users/bobtfish/following{/other_user}", "gists_url": "https://api.github.com/users/bobtfish/gists{/gist_id}", "starred_url": "https://api.github.com/users/bobtfish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bobtfish/subscriptions", "organizations_url": "https://api.github.com/users/bobtfish/orgs", "repos_url": "https://api.github.com/users/bobtfish/repos", "events_url": "https://api.github.com/users/bobtfish/events{/privacy}", "received_events_url": "https://api.github.com/users/bobtfish/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2015-07-28T14:59:22Z", "updated_at": "2016-05-26T23:16:49Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/131", "html_url": "https://github.com/airbnb/synapse/pull/131", "diff_url": "https://github.com/airbnb/synapse/pull/131.diff", "patch_url": "https://github.com/airbnb/synapse/pull/131.patch"}, "body": "cc @vulpine\n\nRebased against airbnb/synapse master\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/131/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/121", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/121/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/121/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/121/events", "html_url": "https://github.com/airbnb/synapse/issues/121", "id": 77161053, "number": 121, "title": "docker watcher proposal: identify services by label instead of port and image name", "user": {"login": "dnephin", "id": 442180, "avatar_url": "https://avatars1.githubusercontent.com/u/442180?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dnephin", "html_url": "https://github.com/dnephin", "followers_url": "https://api.github.com/users/dnephin/followers", "following_url": "https://api.github.com/users/dnephin/following{/other_user}", "gists_url": "https://api.github.com/users/dnephin/gists{/gist_id}", "starred_url": "https://api.github.com/users/dnephin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dnephin/subscriptions", "organizations_url": "https://api.github.com/users/dnephin/orgs", "repos_url": "https://api.github.com/users/dnephin/repos", "events_url": "https://api.github.com/users/dnephin/events{/privacy}", "received_events_url": "https://api.github.com/users/dnephin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2015-05-16T23:42:55Z", "updated_at": "2015-05-16T23:42:55Z", "closed_at": null, "author_association": "NONE", "body": "Docker 1.6 added [labels](https://docs.docker.com/userguide/labels-custom-metadata/) for images and containers.\n\nInstead of requiring the same port for every service and exposing the port to the host (#109, #88), read a `com.airbnb.synapse.service-port` label from the image or container, and register the service using that port.\n\nAnother option might be to keep specifying the port in the watcher config, but look for a `com.airbnb.synapse.service` label.\n\nContainers without a label would not be registered.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/121/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/120", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/120/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/120/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/120/events", "html_url": "https://github.com/airbnb/synapse/issues/120", "id": 77157313, "number": 120, "title": "docker watcher proposal: use the events API instead of polling", "user": {"login": "dnephin", "id": 442180, "avatar_url": "https://avatars1.githubusercontent.com/u/442180?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dnephin", "html_url": "https://github.com/dnephin", "followers_url": "https://api.github.com/users/dnephin/followers", "following_url": "https://api.github.com/users/dnephin/following{/other_user}", "gists_url": "https://api.github.com/users/dnephin/gists{/gist_id}", "starred_url": "https://api.github.com/users/dnephin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dnephin/subscriptions", "organizations_url": "https://api.github.com/users/dnephin/orgs", "repos_url": "https://api.github.com/users/dnephin/repos", "events_url": "https://api.github.com/users/dnephin/events{/privacy}", "received_events_url": "https://api.github.com/users/dnephin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-05-16T23:22:54Z", "updated_at": "2015-07-26T17:30:32Z", "closed_at": null, "author_association": "NONE", "body": "**Replace polling by streaming the [events API](https://docs.docker.com/reference/api/docker_remote_api_v1.18/#monitor-dockers-events)**\n- using the events API filter by the `start` event to get notified of all new containers that have started\n- when a new container starts, check it against the list of criteria and register it if it matches\n- removes the need to poll, and keep track of the list of previous containers\n- the `/containers/json` endpoint that it uses now can be pretty slow with large numbers of containers\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/120/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/119", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/119/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/119/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/119/events", "html_url": "https://github.com/airbnb/synapse/pull/119", "id": 71398814, "number": 119, "title": "Zookeeper recursive", "user": {"login": "gfelbing", "id": 10872874, "avatar_url": "https://avatars0.githubusercontent.com/u/10872874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gfelbing", "html_url": "https://github.com/gfelbing", "followers_url": "https://api.github.com/users/gfelbing/followers", "following_url": "https://api.github.com/users/gfelbing/following{/other_user}", "gists_url": "https://api.github.com/users/gfelbing/gists{/gist_id}", "starred_url": "https://api.github.com/users/gfelbing/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gfelbing/subscriptions", "organizations_url": "https://api.github.com/users/gfelbing/orgs", "repos_url": "https://api.github.com/users/gfelbing/repos", "events_url": "https://api.github.com/users/gfelbing/events{/privacy}", "received_events_url": "https://api.github.com/users/gfelbing/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2015-04-27T20:52:43Z", "updated_at": "2016-05-26T23:16:49Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/119", "html_url": "https://github.com/airbnb/synapse/pull/119", "diff_url": "https://github.com/airbnb/synapse/pull/119.diff", "patch_url": "https://github.com/airbnb/synapse/pull/119.patch"}, "body": "This branch adds a new service watcher \"zookeeper_recursive\".\nIt doesn't generate backends directly, but generates new \"zookeeper\"-watcher for each persistent node under the configured path (including the path itself).\nThe configuration of the \"zookeeper\"-watcher is based on the configuration of the \"zookeeper_recursive\"-watcher, the \"#[service]\" will be replaced by the node's path in zookeeper, the \"/\" are replaced by \"_\".\nWith this functionality you doesn't have to know which services are existing or will exist in the future.\nFor an example configuration see \"config/synapse_zookeeper_recursive.yaml\"\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/119/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/118", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/118/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/118/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/118/events", "html_url": "https://github.com/airbnb/synapse/pull/118", "id": 65980976, "number": 118, "title": "Add optional image_tag param to docker watcher", "user": {"login": "bcicen", "id": 5673805, "avatar_url": "https://avatars3.githubusercontent.com/u/5673805?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bcicen", "html_url": "https://github.com/bcicen", "followers_url": "https://api.github.com/users/bcicen/followers", "following_url": "https://api.github.com/users/bcicen/following{/other_user}", "gists_url": "https://api.github.com/users/bcicen/gists{/gist_id}", "starred_url": "https://api.github.com/users/bcicen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bcicen/subscriptions", "organizations_url": "https://api.github.com/users/bcicen/orgs", "repos_url": "https://api.github.com/users/bcicen/repos", "events_url": "https://api.github.com/users/bcicen/events{/privacy}", "received_events_url": "https://api.github.com/users/bcicen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2015-04-02T18:09:21Z", "updated_at": "2016-05-26T23:16:49Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/118", "html_url": "https://github.com/airbnb/synapse/pull/118", "diff_url": "https://github.com/airbnb/synapse/pull/118.diff", "patch_url": "https://github.com/airbnb/synapse/pull/118.patch"}, "body": "Rebase of #96 with minor changes.\n\nAdd param to explicitly discover only containers running image_name:image_tag. I've found this to be quite valuable in the deploy cycle as I can bring up containers and move them to the tag defined in synapse config when I'm ready for them to be discovered.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/118/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/116", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/116/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/116/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/116/events", "html_url": "https://github.com/airbnb/synapse/pull/116", "id": 62536041, "number": 116, "title": "Update Rakefile", "user": {"login": "worldsouptester", "id": 6422216, "avatar_url": "https://avatars1.githubusercontent.com/u/6422216?v=4", "gravatar_id": "", "url": "https://api.github.com/users/worldsouptester", "html_url": "https://github.com/worldsouptester", "followers_url": "https://api.github.com/users/worldsouptester/followers", "following_url": "https://api.github.com/users/worldsouptester/following{/other_user}", "gists_url": "https://api.github.com/users/worldsouptester/gists{/gist_id}", "starred_url": "https://api.github.com/users/worldsouptester/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/worldsouptester/subscriptions", "organizations_url": "https://api.github.com/users/worldsouptester/orgs", "repos_url": "https://api.github.com/users/worldsouptester/repos", "events_url": "https://api.github.com/users/worldsouptester/events{/privacy}", "received_events_url": "https://api.github.com/users/worldsouptester/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-03-17T22:41:47Z", "updated_at": "2016-05-26T23:16:49Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/116", "html_url": "https://github.com/airbnb/synapse/pull/116", "diff_url": "https://github.com/airbnb/synapse/pull/116.diff", "patch_url": "https://github.com/airbnb/synapse/pull/116.patch"}, "body": "", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/116/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/114", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/114/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/114/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/114/events", "html_url": "https://github.com/airbnb/synapse/pull/114", "id": 59816176, "number": 114, "title": "SRV support for dns watcher", "user": {"login": "danieleva", "id": 6079455, "avatar_url": "https://avatars2.githubusercontent.com/u/6079455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danieleva", "html_url": "https://github.com/danieleva", "followers_url": "https://api.github.com/users/danieleva/followers", "following_url": "https://api.github.com/users/danieleva/following{/other_user}", "gists_url": "https://api.github.com/users/danieleva/gists{/gist_id}", "starred_url": "https://api.github.com/users/danieleva/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danieleva/subscriptions", "organizations_url": "https://api.github.com/users/danieleva/orgs", "repos_url": "https://api.github.com/users/danieleva/repos", "events_url": "https://api.github.com/users/danieleva/events{/privacy}", "received_events_url": "https://api.github.com/users/danieleva/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2015-03-04T15:48:08Z", "updated_at": "2016-05-26T23:16:49Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/114", "html_url": "https://github.com/airbnb/synapse/pull/114", "diff_url": "https://github.com/airbnb/synapse/pull/114.diff", "patch_url": "https://github.com/airbnb/synapse/pull/114.patch"}, "body": "Accepts an optional \"srv\" field in the servers definition. The port will be fetched from the srv record, with fallback on the \"port\" field in case of failure/empty value\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/114/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/109", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/109/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/109/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/109/events", "html_url": "https://github.com/airbnb/synapse/issues/109", "id": 55424508, "number": 109, "title": "docker watcher - dependent on publicly exposed ports to the parent host.", "user": {"login": "ajohnstone", "id": 173567, "avatar_url": "https://avatars1.githubusercontent.com/u/173567?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ajohnstone", "html_url": "https://github.com/ajohnstone", "followers_url": "https://api.github.com/users/ajohnstone/followers", "following_url": "https://api.github.com/users/ajohnstone/following{/other_user}", "gists_url": "https://api.github.com/users/ajohnstone/gists{/gist_id}", "starred_url": "https://api.github.com/users/ajohnstone/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ajohnstone/subscriptions", "organizations_url": "https://api.github.com/users/ajohnstone/orgs", "repos_url": "https://api.github.com/users/ajohnstone/repos", "events_url": "https://api.github.com/users/ajohnstone/events{/privacy}", "received_events_url": "https://api.github.com/users/ajohnstone/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-01-25T18:36:29Z", "updated_at": "2015-05-16T23:06:25Z", "closed_at": null, "author_association": "NONE", "body": "The current implementation is quite restricting. For example using synapse within a docker container, it uses the host IP within @discovery[\"servers\"].\n\nThis means you need to publicly expose all containers in the parent host, rather than just using the private ips of the containers themselves. So rather than having discovery, you end up with a fixed mapping based on ports.\n\nWhen not using publicly exposed ports you end up with this invalid configuration, with a broken port.\n\n```\n    server 172.17.42.1:_basket-service 172.17.42.1: cookie 172.17.42.1:_basket-service check inter 2s rise 3 fall 2\n```\n\n```\n\n        \"Ports\": {\n            \"8080/tcp\": null,\n            \"8081/tcp\": null\n        }\n\n```\n\nError with a little debugging...\n\n```\n[ root@52cc33d73359:~ ]$ /usr/bin/ruby1.9.1 /usr/local/bin/synapse -c /synapse.conf.json\nI, [2015-01-25T18:22:20.776251 #1971]  INFO -- Synapse::Synapse: synapse: starting...\nI, [2015-01-25T18:22:20.781601 #1971]  INFO -- Synapse::Synapse: synapse: regenerating haproxy config\nI, [2015-01-25T18:22:20.781990 #1971]  INFO -- Synapse::DnsWatcher: synapse: discovered 1 backends for service http-webservices-member\nW, [2015-01-25T18:22:20.782539 #1971]  WARN -- Synapse::Haproxy: synapse: no backends found for watcher http-webservices-basket\nI, [2015-01-25T18:22:20.783647 #1971]  INFO -- Synapse::Haproxy: synapse: could not open haproxy config file at /etc/haproxy/haproxy.cfg\nDocker::Container { :id => b8589347f04c9e3a811bf78f49149d645cba9b48afccdd52f64308e039ca3106, :connection => Docker::Connection { :url => http://172.17.42.1:4243, :options => {} } }\n8080\n{\"8080\"=>\"8080\", \"8081\"=>\"\"}\n{\"8080\"=>\"\", \"8081\"=>\"\"}\n[{\"name\"=>\"basket-service\", \"host\"=>\"172.17.42.1\", \"port\"=>\"8080\"},\n {\"name\"=>\"basket-service\", \"host\"=>\"172.17.42.1\", \"port\"=>\"\"}]\nI, [2015-01-25T18:22:20.819391 #1971]  INFO -- Synapse::DockerWatcher: synapse: discovered 2 backends for service http-webservices-basket\nI, [2015-01-25T18:22:20.821997 #1971]  INFO -- Synapse::Haproxy: synapse: restarted haproxy\nI, [2015-01-25T18:22:20.823559 #1971]  INFO -- Synapse::Synapse: synapse: regenerating haproxy config\n[ALERT] 024/182222 (2005) : parsing [/etc/haproxy/haproxy.cfg:107] : server 172.17.42.1:_basket-service has neither service port nor check port nor tcp_check rule 'connect' with port information. Check has been disabled.\n[ALERT] 024/182222 (2005) : Error(s) found in configuration file : /etc/haproxy/haproxy.cfg\n[ALERT] 024/182222 (2005) : Fatal errors found in configuration.\nE, [2015-01-25T18:22:22.844902 #1971] ERROR -- Synapse::Synapse: synapse: encountered unexpected exception #<RuntimeError: failed to reload haproxy via service haproxy reload:  * Reloading haproxy haproxy\n   ...fail!> in main thread\nW, [2015-01-25T18:22:22.845050 #1971]  WARN -- Synapse::Synapse: synapse: exiting; sending stop signal to all watchers\nI, [2015-01-25T18:22:22.845184 #1971]  INFO -- Synapse::DockerWatcher: synapse: stopping watcher http-webservices-basket using default stop handler\nI, [2015-01-25T18:22:22.845321 #1971]  INFO -- Synapse::DnsWatcher: synapse: stopping watcher http-webservices-member using default stop handler\n/var/lib/gems/1.9.1/gems/synapse-0.11.1/lib/synapse/haproxy.rb:780:in `restart': failed to reload haproxy via service haproxy reload:  * Reloading haproxy haproxy (RuntimeError)\n   ...fail!\n    from /var/lib/gems/1.9.1/gems/synapse-0.11.1/lib/synapse/haproxy.rb:550:in `update_config'\n    from /var/lib/gems/1.9.1/gems/synapse-0.11.1/lib/synapse.rb:51:in `block in run'\n    from /var/lib/gems/1.9.1/gems/synapse-0.11.1/lib/synapse.rb:43:in `loop'\n    from /var/lib/gems/1.9.1/gems/synapse-0.11.1/lib/synapse.rb:43:in `run'\n    from /var/lib/gems/1.9.1/gems/synapse-0.11.1/bin/synapse:60:in `<top (required)>'\n    from /usr/local/bin/synapse:23:in `load'\n    from /usr/local/bin/synapse:23:in `<main>'\n```\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/109/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/108", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/108/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/108/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/108/events", "html_url": "https://github.com/airbnb/synapse/pull/108", "id": 55305636, "number": 108, "title": "Update example configs for DNS", "user": {"login": "ajohnstone", "id": 173567, "avatar_url": "https://avatars1.githubusercontent.com/u/173567?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ajohnstone", "html_url": "https://github.com/ajohnstone", "followers_url": "https://api.github.com/users/ajohnstone/followers", "following_url": "https://api.github.com/users/ajohnstone/following{/other_user}", "gists_url": "https://api.github.com/users/ajohnstone/gists{/gist_id}", "starred_url": "https://api.github.com/users/ajohnstone/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ajohnstone/subscriptions", "organizations_url": "https://api.github.com/users/ajohnstone/orgs", "repos_url": "https://api.github.com/users/ajohnstone/repos", "events_url": "https://api.github.com/users/ajohnstone/events{/privacy}", "received_events_url": "https://api.github.com/users/ajohnstone/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2015-01-23T17:02:29Z", "updated_at": "2016-05-26T23:16:48Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/108", "html_url": "https://github.com/airbnb/synapse/pull/108", "diff_url": "https://github.com/airbnb/synapse/pull/108.diff", "patch_url": "https://github.com/airbnb/synapse/pull/108.patch"}, "body": "", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/108/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/107", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/107/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/107/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/107/events", "html_url": "https://github.com/airbnb/synapse/issues/107", "id": 55172850, "number": 107, "title": "Docker watcher - cannot use unix sockets with synapse due to hardcoded http string + port.", "user": {"login": "ajohnstone", "id": 173567, "avatar_url": "https://avatars1.githubusercontent.com/u/173567?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ajohnstone", "html_url": "https://github.com/ajohnstone", "followers_url": "https://api.github.com/users/ajohnstone/followers", "following_url": "https://api.github.com/users/ajohnstone/following{/other_user}", "gists_url": "https://api.github.com/users/ajohnstone/gists{/gist_id}", "starred_url": "https://api.github.com/users/ajohnstone/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ajohnstone/subscriptions", "organizations_url": "https://api.github.com/users/ajohnstone/orgs", "repos_url": "https://api.github.com/users/ajohnstone/repos", "events_url": "https://api.github.com/users/ajohnstone/events{/privacy}", "received_events_url": "https://api.github.com/users/ajohnstone/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2015-01-22T16:15:56Z", "updated_at": "2015-01-22T16:15:56Z", "closed_at": null, "author_association": "NONE", "body": "Docker watcher - cannot use unix sockets with synapse due to hardcoded http string + port.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/107/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/105", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/105/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/105/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/105/events", "html_url": "https://github.com/airbnb/synapse/issues/105", "id": 51081793, "number": 105, "title": "Unable to use ec2tag watcher due to local instance variable", "user": {"login": "ajohnstone", "id": 173567, "avatar_url": "https://avatars1.githubusercontent.com/u/173567?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ajohnstone", "html_url": "https://github.com/ajohnstone", "followers_url": "https://api.github.com/users/ajohnstone/followers", "following_url": "https://api.github.com/users/ajohnstone/following{/other_user}", "gists_url": "https://api.github.com/users/ajohnstone/gists{/gist_id}", "starred_url": "https://api.github.com/users/ajohnstone/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ajohnstone/subscriptions", "organizations_url": "https://api.github.com/users/ajohnstone/orgs", "repos_url": "https://api.github.com/users/ajohnstone/repos", "events_url": "https://api.github.com/users/ajohnstone/events{/privacy}", "received_events_url": "https://api.github.com/users/ajohnstone/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-12-05T10:05:33Z", "updated_at": "2015-01-26T04:39:01Z", "closed_at": null, "author_association": "NONE", "body": "https://github.com/airbnb/synapse/blob/v0.11.1/lib/synapse/service_watcher/ec2tag.rb#L16\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/105/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/94", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/94/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/94/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/94/events", "html_url": "https://github.com/airbnb/synapse/issues/94", "id": 45431348, "number": 94, "title": "Synapse fails to restart after zookeeper node disappears", "user": {"login": "Jaykah", "id": 5440172, "avatar_url": "https://avatars3.githubusercontent.com/u/5440172?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jaykah", "html_url": "https://github.com/Jaykah", "followers_url": "https://api.github.com/users/Jaykah/followers", "following_url": "https://api.github.com/users/Jaykah/following{/other_user}", "gists_url": "https://api.github.com/users/Jaykah/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jaykah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jaykah/subscriptions", "organizations_url": "https://api.github.com/users/Jaykah/orgs", "repos_url": "https://api.github.com/users/Jaykah/repos", "events_url": "https://api.github.com/users/Jaykah/events{/privacy}", "received_events_url": "https://api.github.com/users/Jaykah/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 40, "created_at": "2014-10-09T23:45:33Z", "updated_at": "2016-01-18T21:22:03Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "I am using the Zookeeper watcher to get a list of available nodes - which it successfully does.\n\nHowever, after a node fails, it does not get removed from haproxy.\n\nHaproxy monitoring page shows those nodes as down, Zookeeper no longer has them as they are ephemeral, but the reconfiguration does not take place.\n\nIf I restart Synapse, however, everything goes back to normal.\n\n```\nI, [2014-10-09T22:17:20.844370 #12]  INFO -- Synapse::ZookeeperWatcher: synapse: discovering backends for service proddb\nI, [2014-10-09T22:17:20.861672 #12]  INFO -- Synapse::ZookeeperWatcher: synapse: discovered 6 backends for service proddb\n[WARNING] 281/221756 (157) : Server proddb/100.0.10.10:3306_100.0.10.10 is DOWN, reason: Layer4 connection problem, info: \"Connection refused\", check duration: 1ms. 6 active and 0 backup servers left. 0 sessions active, 0 requeued, 0 remaining in queue.\n[WARNING] 281/221756 (157) : Server proddb/100.0.10.10:3306_100.0.10.10 is DOWN, reason: Layer4 connection problem, info: \"Connection refused\", check duration: 2ms. 5 active and 0 backup servers left. 0 sessions active, 0 requeued, 0 remaining in queue.\nI, [2014-10-09T22:18:15.682057 #12]  INFO -- Synapse::ZookeeperWatcher: synapse: discovering backends for service proddb\nI, [2014-10-09T22:18:15.690843 #12]  INFO -- Synapse::ZookeeperWatcher: synapse: discovered 5 backends for service proddb\n```\n\nNote: Synapse is deployed in Docker and managed by supervisord\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/94/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/91", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/91/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/91/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/91/events", "html_url": "https://github.com/airbnb/synapse/pull/91", "id": 41932951, "number": 91, "title": "Feature/addressable ips", "user": {"login": "csconnell", "id": 981156, "avatar_url": "https://avatars0.githubusercontent.com/u/981156?v=4", "gravatar_id": "", "url": "https://api.github.com/users/csconnell", "html_url": "https://github.com/csconnell", "followers_url": "https://api.github.com/users/csconnell/followers", "following_url": "https://api.github.com/users/csconnell/following{/other_user}", "gists_url": "https://api.github.com/users/csconnell/gists{/gist_id}", "starred_url": "https://api.github.com/users/csconnell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/csconnell/subscriptions", "organizations_url": "https://api.github.com/users/csconnell/orgs", "repos_url": "https://api.github.com/users/csconnell/repos", "events_url": "https://api.github.com/users/csconnell/events{/privacy}", "received_events_url": "https://api.github.com/users/csconnell/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2014-09-04T12:59:57Z", "updated_at": "2016-05-26T23:16:48Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/91", "html_url": "https://github.com/airbnb/synapse/pull/91", "diff_url": "https://github.com/airbnb/synapse/pull/91.diff", "patch_url": "https://github.com/airbnb/synapse/pull/91.patch"}, "body": "These changes provide a way to update the HAProxy config for docker containers that are on addressable IPs (i.e IP addresses reachable on the network / outside of the local docker host).  The change allows you to provide a discovery setting of \"addressable_ip\" for docker discovered services as shown below:\n\n``` JSON\n\"services\": {\n    \"local-nodes\": {\n      \"discovery\": {\n        \"method\": \"docker\",\n        \"addressable_ip\": \"true\",\n        \"servers\": [\n          {\n            \"name\": \"localhost\",\n            \"host\": \"192.168.224.2\",\n            \"port\": 4243\n          }\n    ],\n    \"container_port\": 8000,\n        \"image_name\": \"local/testapp\"\n      },\n      \"haproxy\": {\n        \"port\": 9091,\n      }\n```\n\nThis change then looks up the actual IP address of the docker container instead of using the docker host and then uses the private port of the service.  The change does not affect the previous functionality - both services with non-addressable IPs and those with addressable IPs are properly written to the HAProxy config.  So a synapse config file that looks like this:\n\n``` JSON\n{\n  \"services\": {\n    \"local-nodes\": {\n      \"discovery\": {\n        \"method\": \"docker\",\n        \"addressable_ip\": \"true\",\n        \"servers\": [\n          {\n            \"name\": \"localhost\",\n            \"host\": \"192.168.224.2\",\n            \"port\": 4243\n          }\n    ],\n    \"container_port\": 8000,\n        \"image_name\": \"local/testapp\"\n      },\n      \"haproxy\": {\n        \"port\": 9091,\n\n      }\n\n    },\n    \"remote-nodes\":{\n      \"discovery\": {\n        \"method\": \"docker\",\n        \"servers\": [\n          {\n            \"name\": \"cconnell3\",\n            \"host\": \"192.168.222.153\",\n        \"port\": 4243\n      }\n        ],\n      \"container_port\": 8000,\n        \"image_name\": \"local/testapp\"\n      },\n      \"haproxy\": {\n        \"port\": 9091,\n\n      }\n\n    },\n    \"proxy-clients\": {\n      \"discovery\": {\n        \"method\": \"docker\",\n        \"addressable_ip\": \"true\",\n        \"servers\": [\n          {\n            \"name\": \"localhost\",\n            \"host\": \"192.168.224.2\",\n            \"port\": 4243\n      }\n        ],\n        \"container_port\": 9090,\n        \"image_name\": \"local/proxy-node\"\n      },\n      \"haproxy\": {\n        \"port\": 9090,\n\n      }\n\n    },\n\n  },\n\"haproxy\": {\n    \"reload_command\": \"systemctl reload haproxy.service\",\n    \"config_file_path\": \"/etc/haproxy/haproxy.cfg\",\n    \"do_writes\": true,\n    \"do_reloads\": true,\n    \"bind_address\": \"*\",\n    \"global\": [\n      \"daemon\",\n      \"maxconn 4096\",\n    ],\n    \"defaults\": [\n      \"maxconn  2000\",\n      \"timeout  connect 5s\",\n      \"timeout  client  1m\",\n      \"timeout  server  1m\",\n      \"mode http\",\n    ],\n  }\n}\n```\n\nwill result in an haproxy config like:\n\n```\n# auto-generated by synapse at 2014-09-03 16:04:10 -0400\n\nglobal\n        daemon\n    maxconn 4096\ndefaults\n        maxconn  2000\n        timeout  connect 5s\n        timeout  client  1m\n        timeout  server  1m\n        mode http\n\nfrontend local-nodes\n        bind *:9091\n        default_backend local-nodes\n\nbackend local-nodes\n        server 192.168.224.19:8000_27f8db643d74 192.168.224.19:8000 cookie 192.168.224.19:8000_27f8db643d74\n        server 192.168.224.22:8000_c5dd48c1adac 192.168.224.22:8000 cookie 192.168.224.22:8000_c5dd48c1adac\n        server 192.168.224.18:8000_df6616b4e4af 192.168.224.18:8000 cookie 192.168.224.18:8000_df6616b4e4af\n\nfrontend remote-nodes\n        bind *:9091\n        default_backend remote-nodes\n\nbackend remote-nodes\n        server 192.168.222.153:49155_cconnell3 192.168.222.153:49155 cookie 192.168.222.153:49155_cconnell3\n        server 192.168.222.153:49154_cconnell3 192.168.222.153:49154 cookie 192.168.222.153:49154_cconnell3\n        server 192.168.222.153:49153_cconnell3 192.168.222.153:49153 cookie 192.168.222.153:49153_cconnell3\n\nfrontend proxy-clients\n        bind *:9090\n        default_backend proxy-clients\n\nbackend proxy-clients\n        server 192.168.224.28:9090_sel-node-6 192.168.224.28:9090 cookie 192.168.224.28:9090_sel-node-6\n        server 192.168.224.29:9090_sel-node-7 192.168.224.29:9090 cookie 192.168.224.29:9090_sel-node-7\n        server 192.168.224.25:9090_sel-node-4 192.168.224.25:9090 cookie 192.168.224.25:9090_sel-node-4\n        server 192.168.224.30:9090_sel-node-8 192.168.224.30:9090 cookie 192.168.224.30:9090_sel-node-8\n        server 192.168.224.24:9090_sel-node-3 192.168.224.24:9090 cookie 192.168.224.24:9090_sel-node-3\n        server 192.168.224.27:9090_sel-node-5 192.168.224.27:9090 cookie 192.168.224.27:9090_sel-node-5\n```\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/91/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/89", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/89/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/89/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/89/events", "html_url": "https://github.com/airbnb/synapse/pull/89", "id": 40950324, "number": 89, "title": "Ec2tags selector", "user": {"login": "mandarjog", "id": 800375, "avatar_url": "https://avatars2.githubusercontent.com/u/800375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mandarjog", "html_url": "https://github.com/mandarjog", "followers_url": "https://api.github.com/users/mandarjog/followers", "following_url": "https://api.github.com/users/mandarjog/following{/other_user}", "gists_url": "https://api.github.com/users/mandarjog/gists{/gist_id}", "starred_url": "https://api.github.com/users/mandarjog/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mandarjog/subscriptions", "organizations_url": "https://api.github.com/users/mandarjog/orgs", "repos_url": "https://api.github.com/users/mandarjog/repos", "events_url": "https://api.github.com/users/mandarjog/events{/privacy}", "received_events_url": "https://api.github.com/users/mandarjog/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2014-08-22T21:06:06Z", "updated_at": "2016-05-26T23:16:48Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/89", "html_url": "https://github.com/airbnb/synapse/pull/89", "diff_url": "https://github.com/airbnb/synapse/pull/89.diff", "patch_url": "https://github.com/airbnb/synapse/pull/89.patch"}, "body": "2 commits.\n1. Adds max_checks and check_interval as top level options. This cuts down on synapse cpu usage. \n    We run in under supervisord, so max_check = 10 would exit after those many loops.\n1. Adds a fancier selector  with a @discovery['selector'] option.\n   This option as actually eval'd with 'i' being the AWSInstance variable.\n\nWe are using this in production.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/89/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/88", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/88/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/88/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/88/events", "html_url": "https://github.com/airbnb/synapse/issues/88", "id": 40893632, "number": 88, "title": "Docker watcher: Port is required?", "user": {"login": "niko", "id": 3075, "avatar_url": "https://avatars2.githubusercontent.com/u/3075?v=4", "gravatar_id": "", "url": "https://api.github.com/users/niko", "html_url": "https://github.com/niko", "followers_url": "https://api.github.com/users/niko/followers", "following_url": "https://api.github.com/users/niko/following{/other_user}", "gists_url": "https://api.github.com/users/niko/gists{/gist_id}", "starred_url": "https://api.github.com/users/niko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/niko/subscriptions", "organizations_url": "https://api.github.com/users/niko/orgs", "repos_url": "https://api.github.com/users/niko/repos", "events_url": "https://api.github.com/users/niko/events{/privacy}", "received_events_url": "https://api.github.com/users/niko/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-08-22T09:42:33Z", "updated_at": "2014-10-17T22:15:15Z", "closed_at": null, "author_association": "NONE", "body": "Sorry for this being rather a question than an issue\u2026 the Docker watcher requires a port for each service if I understand the code right. Wouldn't it make sense to have the watcher just look for an image-tag combination and figure out the port (or ports if there are several) by itself? That way one could spin up a new deploy with a \"staging\" tag, test drive it, then add a \"production\" tag and take down the old deploy. Or am I missing something?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/88/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/86", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/86/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/86/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/86/events", "html_url": "https://github.com/airbnb/synapse/pull/86", "id": 40294845, "number": 86, "title": "Multi-host compatible etcd service watcher", "user": {"login": "cloakedcode", "id": 177435, "avatar_url": "https://avatars0.githubusercontent.com/u/177435?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cloakedcode", "html_url": "https://github.com/cloakedcode", "followers_url": "https://api.github.com/users/cloakedcode/followers", "following_url": "https://api.github.com/users/cloakedcode/following{/other_user}", "gists_url": "https://api.github.com/users/cloakedcode/gists{/gist_id}", "starred_url": "https://api.github.com/users/cloakedcode/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cloakedcode/subscriptions", "organizations_url": "https://api.github.com/users/cloakedcode/orgs", "repos_url": "https://api.github.com/users/cloakedcode/repos", "events_url": "https://api.github.com/users/cloakedcode/events{/privacy}", "received_events_url": "https://api.github.com/users/cloakedcode/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2014-08-14T20:20:16Z", "updated_at": "2016-05-26T23:16:48Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/86", "html_url": "https://github.com/airbnb/synapse/pull/86", "diff_url": "https://github.com/airbnb/synapse/pull/86.diff", "patch_url": "https://github.com/airbnb/synapse/pull/86.patch"}, "body": "Merged bobtfish's etcd service watcher and added etcd host failover.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/86/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/78", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/78/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/78/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/78/events", "html_url": "https://github.com/airbnb/synapse/issues/78", "id": 37229277, "number": 78, "title": "Be smarter about initial reconfigure", "user": {"login": "dcosson", "id": 708904, "avatar_url": "https://avatars0.githubusercontent.com/u/708904?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dcosson", "html_url": "https://github.com/dcosson", "followers_url": "https://api.github.com/users/dcosson/followers", "following_url": "https://api.github.com/users/dcosson/following{/other_user}", "gists_url": "https://api.github.com/users/dcosson/gists{/gist_id}", "starred_url": "https://api.github.com/users/dcosson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dcosson/subscriptions", "organizations_url": "https://api.github.com/users/dcosson/orgs", "repos_url": "https://api.github.com/users/dcosson/repos", "events_url": "https://api.github.com/users/dcosson/events{/privacy}", "received_events_url": "https://api.github.com/users/dcosson/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2014-07-06T22:01:39Z", "updated_at": "2015-10-11T17:20:22Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "Synapse is designed to re-write the haproxy config & reload haproxy when it starts (set [here](https://github.com/airbnb/synapse/blob/master/lib/synapse.rb#L24-25)).\n\nThis means that any time synapse is restarted there is a period between when it starts and when the watcher first registers where the defaults are being used (and if there are no defaults you will return 503's from haproxy).\n\nI can see why you would want an initial reconfigure so that any time you restart synapse you know any changes unrelated to backends will get picked up, but it seems like it should be smarter and wait until all watchers have checked in once before doing its initial reconfiguration.  I'm happy to submit a PR if this sounds reasonable.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/78/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/71", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/71/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/71/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/71/events", "html_url": "https://github.com/airbnb/synapse/issues/71", "id": 35297812, "number": 71, "title": "When using default servers as fallback, synapse is looking for a Zookeeper method", "user": {"login": "Jaykah", "id": 5440172, "avatar_url": "https://avatars3.githubusercontent.com/u/5440172?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jaykah", "html_url": "https://github.com/Jaykah", "followers_url": "https://api.github.com/users/Jaykah/followers", "following_url": "https://api.github.com/users/Jaykah/following{/other_user}", "gists_url": "https://api.github.com/users/Jaykah/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jaykah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jaykah/subscriptions", "organizations_url": "https://api.github.com/users/Jaykah/orgs", "repos_url": "https://api.github.com/users/Jaykah/repos", "events_url": "https://api.github.com/users/Jaykah/events{/privacy}", "received_events_url": "https://api.github.com/users/Jaykah/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 18796191, "url": "https://api.github.com/repos/airbnb/synapse/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-06-09T16:05:53Z", "updated_at": "2014-06-12T05:24:29Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "Not sure if I am doing something wrong, or if that is a bug, but here it is:\n\nAfter synapse fails to fetch backends from Zookeeper, and it falls back to default server list, it is still trying to find method \"shuffle\" \n\n```\nW, [2014-06-06T20:24:36.814618 #14]  WARN -- Synapse::ZookeeperWatcher: synapse: no backends for service application; using default servers: {\"name\"=>\"default-app\", \"host\"=>\"111.111.111.111\", \"port\"=>443}\nI, [2014-06-06T20:24:36.817710 #14]  INFO -- Synapse::Synapse: synapse: regenerating haproxy config\nE, [2014-06-06T20:24:36.818293 #14] ERROR -- Synapse::Synapse: synapse: encountered unexpected exception #<NoMethodError: undefined method `shuffle' for {\"name\"=>\"default-app\", \"host\"=>\"111.111.111.111\", \"port\"=>443}:Hash> in main thread\nW, [2014-06-06T20:24:36.818395 #14]  WARN -- Synapse::Synapse: synapse: exiting; sending stop signal to all watchers\nW, [2014-06-06T20:24:36.818452 #14]  WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\nI, [2014-06-06T20:24:36.830512 #14]  INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n/usr/local/lib/ruby/gems/2.1.0/gems/synapse-0.10.0/lib/synapse/haproxy.rb:654:in `generate_backend_stanza': undefined method `shuffle' for {\"name\"=>\"default-app\", \"host\"=>\"111.111.111.111\", \"port\"=>443}:Hash (NoMethodError)\n    from /usr/local/lib/ruby/gems/2.1.0/gems/synapse-0.10.0/lib/synapse/haproxy.rb:551:in `block in generate_config'\n    from /usr/local/lib/ruby/gems/2.1.0/gems/synapse-0.10.0/lib/synapse/haproxy.rb:548:in `each'\n    from /usr/local/lib/ruby/gems/2.1.0/gems/synapse-0.10.0/lib/synapse/haproxy.rb:548:in `generate_config'\n    from /usr/local/lib/ruby/gems/2.1.0/gems/synapse-0.10.0/lib/synapse/haproxy.rb:534:in `update_config'\n    from /usr/local/lib/ruby/gems/2.1.0/gems/synapse-0.10.0/lib/synapse.rb:45:in `block in run'\n    from /usr/local/lib/ruby/gems/2.1.0/gems/synapse-0.10.0/lib/synapse.rb:37:in `loop'\n    from /usr/local/lib/ruby/gems/2.1.0/gems/synapse-0.10.0/lib/synapse.rb:37:in `run'\n    from /usr/local/lib/ruby/gems/2.1.0/gems/synapse-0.10.0/bin/synapse:60:in `<top (required)>'\n    from /usr/local/bin/synapse:23:in `load'\n    from /usr/local/bin/synapse:23:in `<main>'\n```\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/71/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/58", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/58/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/58/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/58/events", "html_url": "https://github.com/airbnb/synapse/pull/58", "id": 31398933, "number": 58, "title": "Etcd service watcher", "user": {"login": "bobtfish", "id": 42338, "avatar_url": "https://avatars1.githubusercontent.com/u/42338?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bobtfish", "html_url": "https://github.com/bobtfish", "followers_url": "https://api.github.com/users/bobtfish/followers", "following_url": "https://api.github.com/users/bobtfish/following{/other_user}", "gists_url": "https://api.github.com/users/bobtfish/gists{/gist_id}", "starred_url": "https://api.github.com/users/bobtfish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bobtfish/subscriptions", "organizations_url": "https://api.github.com/users/bobtfish/orgs", "repos_url": "https://api.github.com/users/bobtfish/repos", "events_url": "https://api.github.com/users/bobtfish/events{/privacy}", "received_events_url": "https://api.github.com/users/bobtfish/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 21, "created_at": "2014-04-13T07:40:54Z", "updated_at": "2016-10-23T17:41:26Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/58", "html_url": "https://github.com/airbnb/synapse/pull/58", "diff_url": "https://github.com/airbnb/synapse/pull/58.diff", "patch_url": "https://github.com/airbnb/synapse/pull/58.patch"}, "body": "And the etcd watcher part to go with the reporter :)\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/58/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/44", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/44/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/44/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/44/events", "html_url": "https://github.com/airbnb/synapse/issues/44", "id": 26982686, "number": 44, "title": "serfdom.io service watcher", "user": {"login": "tomfitzhenry", "id": 61303, "avatar_url": "https://avatars3.githubusercontent.com/u/61303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomfitzhenry", "html_url": "https://github.com/tomfitzhenry", "followers_url": "https://api.github.com/users/tomfitzhenry/followers", "following_url": "https://api.github.com/users/tomfitzhenry/following{/other_user}", "gists_url": "https://api.github.com/users/tomfitzhenry/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomfitzhenry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomfitzhenry/subscriptions", "organizations_url": "https://api.github.com/users/tomfitzhenry/orgs", "repos_url": "https://api.github.com/users/tomfitzhenry/repos", "events_url": "https://api.github.com/users/tomfitzhenry/events{/privacy}", "received_events_url": "https://api.github.com/users/tomfitzhenry/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2014-02-05T17:51:17Z", "updated_at": "2014-02-05T17:51:17Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "[Serf](http://www.serfdom.io/) is \"a decentralized solution for service discovery and orchestration that is lightweight, highly available, and fault tolerant.\"\n\nhttp://rubygems.org/gems/kahuna is a Serf library for Ruby. I don't know how mature this library is, but it's version 0.0.1 so my gut tells me \"not very\". :)\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/44/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/41", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/41/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/41/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/41/events", "html_url": "https://github.com/airbnb/synapse/issues/41", "id": 25887744, "number": 41, "title": "docker watcher: discover on container name, not image name", "user": {"login": "rgarcia", "id": 72655, "avatar_url": "https://avatars3.githubusercontent.com/u/72655?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rgarcia", "html_url": "https://github.com/rgarcia", "followers_url": "https://api.github.com/users/rgarcia/followers", "following_url": "https://api.github.com/users/rgarcia/following{/other_user}", "gists_url": "https://api.github.com/users/rgarcia/gists{/gist_id}", "starred_url": "https://api.github.com/users/rgarcia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rgarcia/subscriptions", "organizations_url": "https://api.github.com/users/rgarcia/orgs", "repos_url": "https://api.github.com/users/rgarcia/repos", "events_url": "https://api.github.com/users/rgarcia/events{/privacy}", "received_events_url": "https://api.github.com/users/rgarcia/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-01-19T20:32:37Z", "updated_at": "2014-03-23T04:19:32Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "When I first wrote the docker watcher, docker containers could only be identified by their image name. Now there's the ability to attach names to containers: http://blog.docker.io/2013/10/docker-0-6-5-links-container-naming-advanced-port-redirects-host-integration/. This is a much more flexible way to discover them, since most of the time your base image is something basic like \"ubuntu:12.04\" which lots of services could share.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/41/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/38", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/38/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/38/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/38/events", "html_url": "https://github.com/airbnb/synapse/issues/38", "id": 25831567, "number": 38, "title": "synapse exits on watcher failure", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 18796189, "url": "https://api.github.com/repos/airbnb/synapse/labels/bug", "name": "bug", "color": "fc2929", "default": true}, {"id": 18796191, "url": "https://api.github.com/repos/airbnb/synapse/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-01-17T19:41:50Z", "updated_at": "2014-01-21T20:15:47Z", "closed_at": null, "author_association": "COLLABORATOR", "body": "ideally, the watcher should be recreated periodically\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/38/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/35", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/35/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/35/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/35/events", "html_url": "https://github.com/airbnb/synapse/issues/35", "id": 24985680, "number": 35, "title": "etcd service watcher", "user": {"login": "tomfitzhenry", "id": 61303, "avatar_url": "https://avatars3.githubusercontent.com/u/61303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomfitzhenry", "html_url": "https://github.com/tomfitzhenry", "followers_url": "https://api.github.com/users/tomfitzhenry/followers", "following_url": "https://api.github.com/users/tomfitzhenry/following{/other_user}", "gists_url": "https://api.github.com/users/tomfitzhenry/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomfitzhenry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomfitzhenry/subscriptions", "organizations_url": "https://api.github.com/users/tomfitzhenry/orgs", "repos_url": "https://api.github.com/users/tomfitzhenry/repos", "events_url": "https://api.github.com/users/tomfitzhenry/events{/privacy}", "received_events_url": "https://api.github.com/users/tomfitzhenry/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2014-01-02T20:35:48Z", "updated_at": "2015-10-20T15:51:17Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "https://github.com/coreos/etcd is \"a highly-available key value store for shared configuration and service discovery\", similar to zookeeper.\n\netcd has a REST API, and there are already Ruby libraries ( https://github.com/ranjib/etcd-ruby , https://github.com/iconara/etcd-rb ) to varying levels of maturity/completeness.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/35/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/28", "repository_url": "https://api.github.com/repos/airbnb/synapse", "labels_url": "https://api.github.com/repos/airbnb/synapse/issues/28/labels{/name}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/28/comments", "events_url": "https://api.github.com/repos/airbnb/synapse/issues/28/events", "html_url": "https://github.com/airbnb/synapse/issues/28", "id": 23040100, "number": 28, "title": "dns watcher ping assumes dns server resolves public addresses", "user": {"login": "rgarcia", "id": 72655, "avatar_url": "https://avatars3.githubusercontent.com/u/72655?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rgarcia", "html_url": "https://github.com/rgarcia", "followers_url": "https://api.github.com/users/rgarcia/followers", "following_url": "https://api.github.com/users/rgarcia/following{/other_user}", "gists_url": "https://api.github.com/users/rgarcia/gists{/gist_id}", "starred_url": "https://api.github.com/users/rgarcia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rgarcia/subscriptions", "organizations_url": "https://api.github.com/users/rgarcia/orgs", "repos_url": "https://api.github.com/users/rgarcia/repos", "events_url": "https://api.github.com/users/rgarcia/events{/privacy}", "received_events_url": "https://api.github.com/users/rgarcia/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 18796189, "url": "https://api.github.com/repos/airbnb/synapse/labels/bug", "name": "bug", "color": "fc2929", "default": true}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2013-11-21T02:07:42Z", "updated_at": "2013-11-21T02:41:32Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "The dns watcher's ping method declares the watcher dead if it can't resolve airbnb.com. This doesn't work if you are in a private network (e.g. AWS VPC) and are using a DNS server that only resolves private domains.\n\nPotential alternatives:\n- allow the domain for the ping to be configurable\n- don't care if the domain is not found (the fact that it got a proper response from the dns server is good enough)\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/28/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}], "commits": [{"sha": "c50b6dd5027d068f8acf7196d652eeea4109fbc7", "commit": {"author": {"name": "Bruce Sherrod", "email": "bsherrod@users.noreply.github.com", "date": "2017-11-14T18:08:47Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-11-14T18:08:47Z"}, "message": "Merge pull request #246 from bsherrod/bs-haproxy-path-var\n\nadd generator_config_path config option", "tree": {"sha": "4a16c7eaf41bc870da7c0b3e059db14665df557c", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/4a16c7eaf41bc870da7c0b3e059db14665df557c"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/c50b6dd5027d068f8acf7196d652eeea4109fbc7", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJaCzEvCRBK7hj4Ov3rIwAAdHIIAAEcFflJyPsAxxnNxrZLGwRe\nk5Wcw5v0Exw3c/2U5i4rfEkqNRVcjX1sFnHjXLwuJUDEe3PXXs/YXf+qj0D7eV74\nOL0LDNyyrBrnTPIDNn9IhCjBEXRDuoQ3vticUfwnMjP7Zg3w5cxolH6RDDnEBW+8\nfAJrhnXlZB5mzTo1drvqnH61Fk3vf2dGc2K26pwqSi0Ib5BXlhdaDcr9KRbaT3W2\niGSCn67HZgr46dLUBLY8gPnbYCTh8BeB9+lzPVLtiOohUzNOfX0xBHY4PY2DSDyE\nt5H/ZzGGHC7Mqaol+gmnrR37KwowxXNeaTOwX1mKFdfG4kaTxakaxO0sglXU+tM=\n=L3Da\n-----END PGP SIGNATURE-----\n", "payload": "tree 4a16c7eaf41bc870da7c0b3e059db14665df557c\nparent aba2658a9febd19dd1f7a9804691c15c045d1f04\nparent 210adacd951c3032ec2b1a61fb6235e82f61254e\nauthor Bruce Sherrod <bsherrod@users.noreply.github.com> 1510682927 -0800\ncommitter GitHub <noreply@github.com> 1510682927 -0800\n\nMerge pull request #246 from bsherrod/bs-haproxy-path-var\n\nadd generator_config_path config option"}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/c50b6dd5027d068f8acf7196d652eeea4109fbc7", "html_url": "https://github.com/airbnb/synapse/commit/c50b6dd5027d068f8acf7196d652eeea4109fbc7", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/c50b6dd5027d068f8acf7196d652eeea4109fbc7/comments", "author": {"login": "bsherrod", "id": 1707056, "avatar_url": "https://avatars0.githubusercontent.com/u/1707056?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bsherrod", "html_url": "https://github.com/bsherrod", "followers_url": "https://api.github.com/users/bsherrod/followers", "following_url": "https://api.github.com/users/bsherrod/following{/other_user}", "gists_url": "https://api.github.com/users/bsherrod/gists{/gist_id}", "starred_url": "https://api.github.com/users/bsherrod/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bsherrod/subscriptions", "organizations_url": "https://api.github.com/users/bsherrod/orgs", "repos_url": "https://api.github.com/users/bsherrod/repos", "events_url": "https://api.github.com/users/bsherrod/events{/privacy}", "received_events_url": "https://api.github.com/users/bsherrod/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "aba2658a9febd19dd1f7a9804691c15c045d1f04", "url": "https://api.github.com/repos/airbnb/synapse/commits/aba2658a9febd19dd1f7a9804691c15c045d1f04", "html_url": "https://github.com/airbnb/synapse/commit/aba2658a9febd19dd1f7a9804691c15c045d1f04"}, {"sha": "210adacd951c3032ec2b1a61fb6235e82f61254e", "url": "https://api.github.com/repos/airbnb/synapse/commits/210adacd951c3032ec2b1a61fb6235e82f61254e", "html_url": "https://github.com/airbnb/synapse/commit/210adacd951c3032ec2b1a61fb6235e82f61254e"}]}, {"sha": "210adacd951c3032ec2b1a61fb6235e82f61254e", "commit": {"author": {"name": "Bruce Sherrod", "email": "bruce.sherrod@airbnb.com", "date": "2017-11-09T22:08:08Z"}, "committer": {"name": "Bruce Sherrod", "email": "bruce.sherrod@airbnb.com", "date": "2017-11-14T00:35:14Z"}, "message": "add generator_config_path config option", "tree": {"sha": "4a16c7eaf41bc870da7c0b3e059db14665df557c", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/4a16c7eaf41bc870da7c0b3e059db14665df557c"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/210adacd951c3032ec2b1a61fb6235e82f61254e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/210adacd951c3032ec2b1a61fb6235e82f61254e", "html_url": "https://github.com/airbnb/synapse/commit/210adacd951c3032ec2b1a61fb6235e82f61254e", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/210adacd951c3032ec2b1a61fb6235e82f61254e/comments", "author": null, "committer": null, "parents": [{"sha": "aba2658a9febd19dd1f7a9804691c15c045d1f04", "url": "https://api.github.com/repos/airbnb/synapse/commits/aba2658a9febd19dd1f7a9804691c15c045d1f04", "html_url": "https://github.com/airbnb/synapse/commit/aba2658a9febd19dd1f7a9804691c15c045d1f04"}]}, {"sha": "aba2658a9febd19dd1f7a9804691c15c045d1f04", "commit": {"author": {"name": "Davi Arnaut", "email": "davi@verdesmares.com", "date": "2017-10-08T04:37:25Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-10-08T04:37:25Z"}, "message": "Merge pull request #245 from airbnb/erb_config\n\nSupport embedded ruby (ERB) in config files", "tree": {"sha": "823b446ab18efc18b8b7cf875c7938e1dd233213", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/823b446ab18efc18b8b7cf875c7938e1dd233213"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/aba2658a9febd19dd1f7a9804691c15c045d1f04", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/aba2658a9febd19dd1f7a9804691c15c045d1f04", "html_url": "https://github.com/airbnb/synapse/commit/aba2658a9febd19dd1f7a9804691c15c045d1f04", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/aba2658a9febd19dd1f7a9804691c15c045d1f04/comments", "author": {"login": "darnaut", "id": 1567089, "avatar_url": "https://avatars0.githubusercontent.com/u/1567089?v=4", "gravatar_id": "", "url": "https://api.github.com/users/darnaut", "html_url": "https://github.com/darnaut", "followers_url": "https://api.github.com/users/darnaut/followers", "following_url": "https://api.github.com/users/darnaut/following{/other_user}", "gists_url": "https://api.github.com/users/darnaut/gists{/gist_id}", "starred_url": "https://api.github.com/users/darnaut/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/darnaut/subscriptions", "organizations_url": "https://api.github.com/users/darnaut/orgs", "repos_url": "https://api.github.com/users/darnaut/repos", "events_url": "https://api.github.com/users/darnaut/events{/privacy}", "received_events_url": "https://api.github.com/users/darnaut/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c3c43a04757a8174edf33ddabccc05fd16f97e8f", "url": "https://api.github.com/repos/airbnb/synapse/commits/c3c43a04757a8174edf33ddabccc05fd16f97e8f", "html_url": "https://github.com/airbnb/synapse/commit/c3c43a04757a8174edf33ddabccc05fd16f97e8f"}, {"sha": "8205f1037afacd76c13b6738c4cbcb47178fab6d", "url": "https://api.github.com/repos/airbnb/synapse/commits/8205f1037afacd76c13b6738c4cbcb47178fab6d", "html_url": "https://github.com/airbnb/synapse/commit/8205f1037afacd76c13b6738c4cbcb47178fab6d"}]}, {"sha": "8205f1037afacd76c13b6738c4cbcb47178fab6d", "commit": {"author": {"name": "Davi Arnaut", "email": "davi.arnaut@airbnb.com", "date": "2017-10-07T23:23:33Z"}, "committer": {"name": "Davi Arnaut", "email": "davi.arnaut@airbnb.com", "date": "2017-10-08T04:33:15Z"}, "message": "Support embedded ruby (ERB) in config files", "tree": {"sha": "823b446ab18efc18b8b7cf875c7938e1dd233213", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/823b446ab18efc18b8b7cf875c7938e1dd233213"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/8205f1037afacd76c13b6738c4cbcb47178fab6d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/8205f1037afacd76c13b6738c4cbcb47178fab6d", "html_url": "https://github.com/airbnb/synapse/commit/8205f1037afacd76c13b6738c4cbcb47178fab6d", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/8205f1037afacd76c13b6738c4cbcb47178fab6d/comments", "author": {"login": "darnaut", "id": 1567089, "avatar_url": "https://avatars0.githubusercontent.com/u/1567089?v=4", "gravatar_id": "", "url": "https://api.github.com/users/darnaut", "html_url": "https://github.com/darnaut", "followers_url": "https://api.github.com/users/darnaut/followers", "following_url": "https://api.github.com/users/darnaut/following{/other_user}", "gists_url": "https://api.github.com/users/darnaut/gists{/gist_id}", "starred_url": "https://api.github.com/users/darnaut/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/darnaut/subscriptions", "organizations_url": "https://api.github.com/users/darnaut/orgs", "repos_url": "https://api.github.com/users/darnaut/repos", "events_url": "https://api.github.com/users/darnaut/events{/privacy}", "received_events_url": "https://api.github.com/users/darnaut/received_events", "type": "User", "site_admin": false}, "committer": {"login": "darnaut", "id": 1567089, "avatar_url": "https://avatars0.githubusercontent.com/u/1567089?v=4", "gravatar_id": "", "url": "https://api.github.com/users/darnaut", "html_url": "https://github.com/darnaut", "followers_url": "https://api.github.com/users/darnaut/followers", "following_url": "https://api.github.com/users/darnaut/following{/other_user}", "gists_url": "https://api.github.com/users/darnaut/gists{/gist_id}", "starred_url": "https://api.github.com/users/darnaut/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/darnaut/subscriptions", "organizations_url": "https://api.github.com/users/darnaut/orgs", "repos_url": "https://api.github.com/users/darnaut/repos", "events_url": "https://api.github.com/users/darnaut/events{/privacy}", "received_events_url": "https://api.github.com/users/darnaut/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c3c43a04757a8174edf33ddabccc05fd16f97e8f", "url": "https://api.github.com/repos/airbnb/synapse/commits/c3c43a04757a8174edf33ddabccc05fd16f97e8f", "html_url": "https://github.com/airbnb/synapse/commit/c3c43a04757a8174edf33ddabccc05fd16f97e8f"}]}, {"sha": "c3c43a04757a8174edf33ddabccc05fd16f97e8f", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@mit.edu", "date": "2017-09-15T05:58:49Z"}, "committer": {"name": "Joseph Lynch", "email": "jolynch@mit.edu", "date": "2017-09-15T05:58:49Z"}, "message": "Bump to 0.15.1", "tree": {"sha": "6c4d2b1a4271d51b26b65c84e7b9c4c9eacdeb1f", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/6c4d2b1a4271d51b26b65c84e7b9c4c9eacdeb1f"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/c3c43a04757a8174edf33ddabccc05fd16f97e8f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/c3c43a04757a8174edf33ddabccc05fd16f97e8f", "html_url": "https://github.com/airbnb/synapse/commit/c3c43a04757a8174edf33ddabccc05fd16f97e8f", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/c3c43a04757a8174edf33ddabccc05fd16f97e8f/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "26c5ab1161b677f6c740752e41fdd3d63dcb3a18", "url": "https://api.github.com/repos/airbnb/synapse/commits/26c5ab1161b677f6c740752e41fdd3d63dcb3a18", "html_url": "https://github.com/airbnb/synapse/commit/26c5ab1161b677f6c740752e41fdd3d63dcb3a18"}]}, {"sha": "26c5ab1161b677f6c740752e41fdd3d63dcb3a18", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2017-09-15T05:31:56Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-09-15T05:31:56Z"}, "message": "Merge pull request #242 from lap1817/feng-pan-synapse\n\n[synapse] fix bug in generate_backend_stanze", "tree": {"sha": "9d5d7522b6135e8ac25fd352457a50d8ba487f98", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/9d5d7522b6135e8ac25fd352457a50d8ba487f98"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/26c5ab1161b677f6c740752e41fdd3d63dcb3a18", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/26c5ab1161b677f6c740752e41fdd3d63dcb3a18", "html_url": "https://github.com/airbnb/synapse/commit/26c5ab1161b677f6c740752e41fdd3d63dcb3a18", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/26c5ab1161b677f6c740752e41fdd3d63dcb3a18/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b1ef75453b9347edb21f636ff4c2c14fa51c7a9f", "url": "https://api.github.com/repos/airbnb/synapse/commits/b1ef75453b9347edb21f636ff4c2c14fa51c7a9f", "html_url": "https://github.com/airbnb/synapse/commit/b1ef75453b9347edb21f636ff4c2c14fa51c7a9f"}, {"sha": "7f501c808656253164dbc850e3486ed2b10e3c1c", "url": "https://api.github.com/repos/airbnb/synapse/commits/7f501c808656253164dbc850e3486ed2b10e3c1c", "html_url": "https://github.com/airbnb/synapse/commit/7f501c808656253164dbc850e3486ed2b10e3c1c"}]}, {"sha": "7f501c808656253164dbc850e3486ed2b10e3c1c", "commit": {"author": {"name": "Feng Pan", "email": "feng.pan@airbnb.com", "date": "2017-09-14T22:28:36Z"}, "committer": {"name": "Feng Pan", "email": "feng.pan@airbnb.com", "date": "2017-09-15T05:30:10Z"}, "message": "[synapse] fix bug in generate_backend_stanze", "tree": {"sha": "9d5d7522b6135e8ac25fd352457a50d8ba487f98", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/9d5d7522b6135e8ac25fd352457a50d8ba487f98"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/7f501c808656253164dbc850e3486ed2b10e3c1c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/7f501c808656253164dbc850e3486ed2b10e3c1c", "html_url": "https://github.com/airbnb/synapse/commit/7f501c808656253164dbc850e3486ed2b10e3c1c", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/7f501c808656253164dbc850e3486ed2b10e3c1c/comments", "author": {"login": "lap1817", "id": 10382678, "avatar_url": "https://avatars2.githubusercontent.com/u/10382678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lap1817", "html_url": "https://github.com/lap1817", "followers_url": "https://api.github.com/users/lap1817/followers", "following_url": "https://api.github.com/users/lap1817/following{/other_user}", "gists_url": "https://api.github.com/users/lap1817/gists{/gist_id}", "starred_url": "https://api.github.com/users/lap1817/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lap1817/subscriptions", "organizations_url": "https://api.github.com/users/lap1817/orgs", "repos_url": "https://api.github.com/users/lap1817/repos", "events_url": "https://api.github.com/users/lap1817/events{/privacy}", "received_events_url": "https://api.github.com/users/lap1817/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lap1817", "id": 10382678, "avatar_url": "https://avatars2.githubusercontent.com/u/10382678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lap1817", "html_url": "https://github.com/lap1817", "followers_url": "https://api.github.com/users/lap1817/followers", "following_url": "https://api.github.com/users/lap1817/following{/other_user}", "gists_url": "https://api.github.com/users/lap1817/gists{/gist_id}", "starred_url": "https://api.github.com/users/lap1817/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lap1817/subscriptions", "organizations_url": "https://api.github.com/users/lap1817/orgs", "repos_url": "https://api.github.com/users/lap1817/repos", "events_url": "https://api.github.com/users/lap1817/events{/privacy}", "received_events_url": "https://api.github.com/users/lap1817/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b1ef75453b9347edb21f636ff4c2c14fa51c7a9f", "url": "https://api.github.com/repos/airbnb/synapse/commits/b1ef75453b9347edb21f636ff4c2c14fa51c7a9f", "html_url": "https://github.com/airbnb/synapse/commit/b1ef75453b9347edb21f636ff4c2c14fa51c7a9f"}]}, {"sha": "b1ef75453b9347edb21f636ff4c2c14fa51c7a9f", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2017-09-15T05:22:46Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-09-15T05:22:46Z"}, "message": "Merge pull request #244 from airbnb/fix_travis\n\nTry upgrading bundler on travis", "tree": {"sha": "6c0cfb94594ef080575f8e50fa0dbff45bbfd7c4", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/6c0cfb94594ef080575f8e50fa0dbff45bbfd7c4"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/b1ef75453b9347edb21f636ff4c2c14fa51c7a9f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/b1ef75453b9347edb21f636ff4c2c14fa51c7a9f", "html_url": "https://github.com/airbnb/synapse/commit/b1ef75453b9347edb21f636ff4c2c14fa51c7a9f", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/b1ef75453b9347edb21f636ff4c2c14fa51c7a9f/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "117e26d6ec1bd5118fbe7be7ce563f390118b83d", "url": "https://api.github.com/repos/airbnb/synapse/commits/117e26d6ec1bd5118fbe7be7ce563f390118b83d", "html_url": "https://github.com/airbnb/synapse/commit/117e26d6ec1bd5118fbe7be7ce563f390118b83d"}, {"sha": "b808ce579cce10db11298b160595c26cc03778c8", "url": "https://api.github.com/repos/airbnb/synapse/commits/b808ce579cce10db11298b160595c26cc03778c8", "html_url": "https://github.com/airbnb/synapse/commit/b808ce579cce10db11298b160595c26cc03778c8"}]}, {"sha": "b808ce579cce10db11298b160595c26cc03778c8", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@mit.edu", "date": "2017-09-15T05:19:01Z"}, "committer": {"name": "Joseph Lynch", "email": "jolynch@mit.edu", "date": "2017-09-15T05:19:01Z"}, "message": "Try upgrading bundler on travis", "tree": {"sha": "6c0cfb94594ef080575f8e50fa0dbff45bbfd7c4", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/6c0cfb94594ef080575f8e50fa0dbff45bbfd7c4"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/b808ce579cce10db11298b160595c26cc03778c8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/b808ce579cce10db11298b160595c26cc03778c8", "html_url": "https://github.com/airbnb/synapse/commit/b808ce579cce10db11298b160595c26cc03778c8", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/b808ce579cce10db11298b160595c26cc03778c8/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "117e26d6ec1bd5118fbe7be7ce563f390118b83d", "url": "https://api.github.com/repos/airbnb/synapse/commits/117e26d6ec1bd5118fbe7be7ce563f390118b83d", "html_url": "https://github.com/airbnb/synapse/commit/117e26d6ec1bd5118fbe7be7ce563f390118b83d"}]}, {"sha": "117e26d6ec1bd5118fbe7be7ce563f390118b83d", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2017-09-06T03:54:08Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-09-06T03:54:08Z"}, "message": "Merge pull request #241 from lap1817/feng-pan-synapse\n\n[synapse] enable generator config update from ZK", "tree": {"sha": "90bd262d135d03926c36d30e0d0069451093a710", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/90bd262d135d03926c36d30e0d0069451093a710"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/117e26d6ec1bd5118fbe7be7ce563f390118b83d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/117e26d6ec1bd5118fbe7be7ce563f390118b83d", "html_url": "https://github.com/airbnb/synapse/commit/117e26d6ec1bd5118fbe7be7ce563f390118b83d", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/117e26d6ec1bd5118fbe7be7ce563f390118b83d/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9226826e7f3c57fe7f9a0dc300915081a9df7dfb", "url": "https://api.github.com/repos/airbnb/synapse/commits/9226826e7f3c57fe7f9a0dc300915081a9df7dfb", "html_url": "https://github.com/airbnb/synapse/commit/9226826e7f3c57fe7f9a0dc300915081a9df7dfb"}, {"sha": "80bbf6266155e5454d4690fffedded85344fd71e", "url": "https://api.github.com/repos/airbnb/synapse/commits/80bbf6266155e5454d4690fffedded85344fd71e", "html_url": "https://github.com/airbnb/synapse/commit/80bbf6266155e5454d4690fffedded85344fd71e"}]}, {"sha": "80bbf6266155e5454d4690fffedded85344fd71e", "commit": {"author": {"name": "Feng Pan", "email": "feng.pan@airbnb.com", "date": "2017-09-04T00:50:30Z"}, "committer": {"name": "Feng Pan", "email": "feng.pan@airbnb.com", "date": "2017-09-04T00:50:30Z"}, "message": "revise version", "tree": {"sha": "90bd262d135d03926c36d30e0d0069451093a710", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/90bd262d135d03926c36d30e0d0069451093a710"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/80bbf6266155e5454d4690fffedded85344fd71e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/80bbf6266155e5454d4690fffedded85344fd71e", "html_url": "https://github.com/airbnb/synapse/commit/80bbf6266155e5454d4690fffedded85344fd71e", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/80bbf6266155e5454d4690fffedded85344fd71e/comments", "author": {"login": "lap1817", "id": 10382678, "avatar_url": "https://avatars2.githubusercontent.com/u/10382678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lap1817", "html_url": "https://github.com/lap1817", "followers_url": "https://api.github.com/users/lap1817/followers", "following_url": "https://api.github.com/users/lap1817/following{/other_user}", "gists_url": "https://api.github.com/users/lap1817/gists{/gist_id}", "starred_url": "https://api.github.com/users/lap1817/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lap1817/subscriptions", "organizations_url": "https://api.github.com/users/lap1817/orgs", "repos_url": "https://api.github.com/users/lap1817/repos", "events_url": "https://api.github.com/users/lap1817/events{/privacy}", "received_events_url": "https://api.github.com/users/lap1817/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lap1817", "id": 10382678, "avatar_url": "https://avatars2.githubusercontent.com/u/10382678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lap1817", "html_url": "https://github.com/lap1817", "followers_url": "https://api.github.com/users/lap1817/followers", "following_url": "https://api.github.com/users/lap1817/following{/other_user}", "gists_url": "https://api.github.com/users/lap1817/gists{/gist_id}", "starred_url": "https://api.github.com/users/lap1817/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lap1817/subscriptions", "organizations_url": "https://api.github.com/users/lap1817/orgs", "repos_url": "https://api.github.com/users/lap1817/repos", "events_url": "https://api.github.com/users/lap1817/events{/privacy}", "received_events_url": "https://api.github.com/users/lap1817/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2cd3c3918d9a077c080a7202a0756d9c8d0dc10e", "url": "https://api.github.com/repos/airbnb/synapse/commits/2cd3c3918d9a077c080a7202a0756d9c8d0dc10e", "html_url": "https://github.com/airbnb/synapse/commit/2cd3c3918d9a077c080a7202a0756d9c8d0dc10e"}]}, {"sha": "2cd3c3918d9a077c080a7202a0756d9c8d0dc10e", "commit": {"author": {"name": "Feng Pan", "email": "feng.pan@airbnb.com", "date": "2017-09-02T06:26:51Z"}, "committer": {"name": "Feng Pan", "email": "feng.pan@airbnb.com", "date": "2017-09-02T06:26:51Z"}, "message": "fix spec", "tree": {"sha": "695f25f96c2d511fe9d9505fc004e73def11a8d8", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/695f25f96c2d511fe9d9505fc004e73def11a8d8"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/2cd3c3918d9a077c080a7202a0756d9c8d0dc10e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/2cd3c3918d9a077c080a7202a0756d9c8d0dc10e", "html_url": "https://github.com/airbnb/synapse/commit/2cd3c3918d9a077c080a7202a0756d9c8d0dc10e", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/2cd3c3918d9a077c080a7202a0756d9c8d0dc10e/comments", "author": {"login": "lap1817", "id": 10382678, "avatar_url": "https://avatars2.githubusercontent.com/u/10382678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lap1817", "html_url": "https://github.com/lap1817", "followers_url": "https://api.github.com/users/lap1817/followers", "following_url": "https://api.github.com/users/lap1817/following{/other_user}", "gists_url": "https://api.github.com/users/lap1817/gists{/gist_id}", "starred_url": "https://api.github.com/users/lap1817/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lap1817/subscriptions", "organizations_url": "https://api.github.com/users/lap1817/orgs", "repos_url": "https://api.github.com/users/lap1817/repos", "events_url": "https://api.github.com/users/lap1817/events{/privacy}", "received_events_url": "https://api.github.com/users/lap1817/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lap1817", "id": 10382678, "avatar_url": "https://avatars2.githubusercontent.com/u/10382678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lap1817", "html_url": "https://github.com/lap1817", "followers_url": "https://api.github.com/users/lap1817/followers", "following_url": "https://api.github.com/users/lap1817/following{/other_user}", "gists_url": "https://api.github.com/users/lap1817/gists{/gist_id}", "starred_url": "https://api.github.com/users/lap1817/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lap1817/subscriptions", "organizations_url": "https://api.github.com/users/lap1817/orgs", "repos_url": "https://api.github.com/users/lap1817/repos", "events_url": "https://api.github.com/users/lap1817/events{/privacy}", "received_events_url": "https://api.github.com/users/lap1817/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "53264cfe9bce9da177bb38133a3bb32fe1c47299", "url": "https://api.github.com/repos/airbnb/synapse/commits/53264cfe9bce9da177bb38133a3bb32fe1c47299", "html_url": "https://github.com/airbnb/synapse/commit/53264cfe9bce9da177bb38133a3bb32fe1c47299"}]}, {"sha": "53264cfe9bce9da177bb38133a3bb32fe1c47299", "commit": {"author": {"name": "Feng Pan", "email": "feng.pan@airbnb.com", "date": "2017-09-02T06:23:23Z"}, "committer": {"name": "Feng Pan", "email": "feng.pan@airbnb.com", "date": "2017-09-02T06:23:23Z"}, "message": "fix spec", "tree": {"sha": "61fd14ec4eb8da47c185f3ea4e60219f7c6c2612", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/61fd14ec4eb8da47c185f3ea4e60219f7c6c2612"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/53264cfe9bce9da177bb38133a3bb32fe1c47299", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/53264cfe9bce9da177bb38133a3bb32fe1c47299", "html_url": "https://github.com/airbnb/synapse/commit/53264cfe9bce9da177bb38133a3bb32fe1c47299", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/53264cfe9bce9da177bb38133a3bb32fe1c47299/comments", "author": {"login": "lap1817", "id": 10382678, "avatar_url": "https://avatars2.githubusercontent.com/u/10382678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lap1817", "html_url": "https://github.com/lap1817", "followers_url": "https://api.github.com/users/lap1817/followers", "following_url": "https://api.github.com/users/lap1817/following{/other_user}", "gists_url": "https://api.github.com/users/lap1817/gists{/gist_id}", "starred_url": "https://api.github.com/users/lap1817/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lap1817/subscriptions", "organizations_url": "https://api.github.com/users/lap1817/orgs", "repos_url": "https://api.github.com/users/lap1817/repos", "events_url": "https://api.github.com/users/lap1817/events{/privacy}", "received_events_url": "https://api.github.com/users/lap1817/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lap1817", "id": 10382678, "avatar_url": "https://avatars2.githubusercontent.com/u/10382678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lap1817", "html_url": "https://github.com/lap1817", "followers_url": "https://api.github.com/users/lap1817/followers", "following_url": "https://api.github.com/users/lap1817/following{/other_user}", "gists_url": "https://api.github.com/users/lap1817/gists{/gist_id}", "starred_url": "https://api.github.com/users/lap1817/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lap1817/subscriptions", "organizations_url": "https://api.github.com/users/lap1817/orgs", "repos_url": "https://api.github.com/users/lap1817/repos", "events_url": "https://api.github.com/users/lap1817/events{/privacy}", "received_events_url": "https://api.github.com/users/lap1817/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "75fe0ee5816a39b762ce760c417f0772a8ed41ab", "url": "https://api.github.com/repos/airbnb/synapse/commits/75fe0ee5816a39b762ce760c417f0772a8ed41ab", "html_url": "https://github.com/airbnb/synapse/commit/75fe0ee5816a39b762ce760c417f0772a8ed41ab"}]}, {"sha": "75fe0ee5816a39b762ce760c417f0772a8ed41ab", "commit": {"author": {"name": "Feng Pan", "email": "feng.pan@airbnb.com", "date": "2017-09-02T06:20:25Z"}, "committer": {"name": "Feng Pan", "email": "feng.pan@airbnb.com", "date": "2017-09-02T06:20:25Z"}, "message": "add logging when restart required due to config change", "tree": {"sha": "4c7353eb59c4d5f51f9d25698c29b7af0881893b", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/4c7353eb59c4d5f51f9d25698c29b7af0881893b"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/75fe0ee5816a39b762ce760c417f0772a8ed41ab", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/75fe0ee5816a39b762ce760c417f0772a8ed41ab", "html_url": "https://github.com/airbnb/synapse/commit/75fe0ee5816a39b762ce760c417f0772a8ed41ab", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/75fe0ee5816a39b762ce760c417f0772a8ed41ab/comments", "author": {"login": "lap1817", "id": 10382678, "avatar_url": "https://avatars2.githubusercontent.com/u/10382678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lap1817", "html_url": "https://github.com/lap1817", "followers_url": "https://api.github.com/users/lap1817/followers", "following_url": "https://api.github.com/users/lap1817/following{/other_user}", "gists_url": "https://api.github.com/users/lap1817/gists{/gist_id}", "starred_url": "https://api.github.com/users/lap1817/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lap1817/subscriptions", "organizations_url": "https://api.github.com/users/lap1817/orgs", "repos_url": "https://api.github.com/users/lap1817/repos", "events_url": "https://api.github.com/users/lap1817/events{/privacy}", "received_events_url": "https://api.github.com/users/lap1817/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lap1817", "id": 10382678, "avatar_url": "https://avatars2.githubusercontent.com/u/10382678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lap1817", "html_url": "https://github.com/lap1817", "followers_url": "https://api.github.com/users/lap1817/followers", "following_url": "https://api.github.com/users/lap1817/following{/other_user}", "gists_url": "https://api.github.com/users/lap1817/gists{/gist_id}", "starred_url": "https://api.github.com/users/lap1817/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lap1817/subscriptions", "organizations_url": "https://api.github.com/users/lap1817/orgs", "repos_url": "https://api.github.com/users/lap1817/repos", "events_url": "https://api.github.com/users/lap1817/events{/privacy}", "received_events_url": "https://api.github.com/users/lap1817/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "653bda2660c8e6776dc0a45dbd7b60f88d3a73a0", "url": "https://api.github.com/repos/airbnb/synapse/commits/653bda2660c8e6776dc0a45dbd7b60f88d3a73a0", "html_url": "https://github.com/airbnb/synapse/commit/653bda2660c8e6776dc0a45dbd7b60f88d3a73a0"}]}, {"sha": "653bda2660c8e6776dc0a45dbd7b60f88d3a73a0", "commit": {"author": {"name": "Feng Pan", "email": "feng.pan@airbnb.com", "date": "2017-09-01T19:21:59Z"}, "committer": {"name": "Feng Pan", "email": "feng.pan@airbnb.com", "date": "2017-09-02T00:31:12Z"}, "message": "fix a few issues:\n -use node.first as the data blob\n\n -make haproxy generator to refresh the config before generate config\n\n -make the config_for_generator hash readonly in base watcher by deep clone", "tree": {"sha": "6ad42c4b336c9745b174889388885d5fd0f7b95b", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/6ad42c4b336c9745b174889388885d5fd0f7b95b"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/653bda2660c8e6776dc0a45dbd7b60f88d3a73a0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/653bda2660c8e6776dc0a45dbd7b60f88d3a73a0", "html_url": "https://github.com/airbnb/synapse/commit/653bda2660c8e6776dc0a45dbd7b60f88d3a73a0", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/653bda2660c8e6776dc0a45dbd7b60f88d3a73a0/comments", "author": {"login": "lap1817", "id": 10382678, "avatar_url": "https://avatars2.githubusercontent.com/u/10382678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lap1817", "html_url": "https://github.com/lap1817", "followers_url": "https://api.github.com/users/lap1817/followers", "following_url": "https://api.github.com/users/lap1817/following{/other_user}", "gists_url": "https://api.github.com/users/lap1817/gists{/gist_id}", "starred_url": "https://api.github.com/users/lap1817/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lap1817/subscriptions", "organizations_url": "https://api.github.com/users/lap1817/orgs", "repos_url": "https://api.github.com/users/lap1817/repos", "events_url": "https://api.github.com/users/lap1817/events{/privacy}", "received_events_url": "https://api.github.com/users/lap1817/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lap1817", "id": 10382678, "avatar_url": "https://avatars2.githubusercontent.com/u/10382678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lap1817", "html_url": "https://github.com/lap1817", "followers_url": "https://api.github.com/users/lap1817/followers", "following_url": "https://api.github.com/users/lap1817/following{/other_user}", "gists_url": "https://api.github.com/users/lap1817/gists{/gist_id}", "starred_url": "https://api.github.com/users/lap1817/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lap1817/subscriptions", "organizations_url": "https://api.github.com/users/lap1817/orgs", "repos_url": "https://api.github.com/users/lap1817/repos", "events_url": "https://api.github.com/users/lap1817/events{/privacy}", "received_events_url": "https://api.github.com/users/lap1817/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8caf3403a66d11f225e319386633797d9a3b3209", "url": "https://api.github.com/repos/airbnb/synapse/commits/8caf3403a66d11f225e319386633797d9a3b3209", "html_url": "https://github.com/airbnb/synapse/commit/8caf3403a66d11f225e319386633797d9a3b3209"}]}, {"sha": "8caf3403a66d11f225e319386633797d9a3b3209", "commit": {"author": {"name": "Feng Pan", "email": "feng.pan@airbnb.com", "date": "2017-08-31T21:28:10Z"}, "committer": {"name": "Feng Pan", "email": "feng.pan@airbnb.com", "date": "2017-08-31T21:28:10Z"}, "message": "update README", "tree": {"sha": "650620f46a7c8f114350652d4a4b4dcb2ba33b6a", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/650620f46a7c8f114350652d4a4b4dcb2ba33b6a"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/8caf3403a66d11f225e319386633797d9a3b3209", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/8caf3403a66d11f225e319386633797d9a3b3209", "html_url": "https://github.com/airbnb/synapse/commit/8caf3403a66d11f225e319386633797d9a3b3209", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/8caf3403a66d11f225e319386633797d9a3b3209/comments", "author": {"login": "lap1817", "id": 10382678, "avatar_url": "https://avatars2.githubusercontent.com/u/10382678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lap1817", "html_url": "https://github.com/lap1817", "followers_url": "https://api.github.com/users/lap1817/followers", "following_url": "https://api.github.com/users/lap1817/following{/other_user}", "gists_url": "https://api.github.com/users/lap1817/gists{/gist_id}", "starred_url": "https://api.github.com/users/lap1817/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lap1817/subscriptions", "organizations_url": "https://api.github.com/users/lap1817/orgs", "repos_url": "https://api.github.com/users/lap1817/repos", "events_url": "https://api.github.com/users/lap1817/events{/privacy}", "received_events_url": "https://api.github.com/users/lap1817/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lap1817", "id": 10382678, "avatar_url": "https://avatars2.githubusercontent.com/u/10382678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lap1817", "html_url": "https://github.com/lap1817", "followers_url": "https://api.github.com/users/lap1817/followers", "following_url": "https://api.github.com/users/lap1817/following{/other_user}", "gists_url": "https://api.github.com/users/lap1817/gists{/gist_id}", "starred_url": "https://api.github.com/users/lap1817/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lap1817/subscriptions", "organizations_url": "https://api.github.com/users/lap1817/orgs", "repos_url": "https://api.github.com/users/lap1817/repos", "events_url": "https://api.github.com/users/lap1817/events{/privacy}", "received_events_url": "https://api.github.com/users/lap1817/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a65729a6f1c8f07905dcd79e3155ead4f18060b8", "url": "https://api.github.com/repos/airbnb/synapse/commits/a65729a6f1c8f07905dcd79e3155ead4f18060b8", "html_url": "https://github.com/airbnb/synapse/commit/a65729a6f1c8f07905dcd79e3155ead4f18060b8"}]}, {"sha": "a65729a6f1c8f07905dcd79e3155ead4f18060b8", "commit": {"author": {"name": "Feng Pan", "email": "feng.pan@airbnb.com", "date": "2017-08-22T21:43:32Z"}, "committer": {"name": "Feng Pan", "email": "feng.pan@airbnb.com", "date": "2017-08-22T21:43:32Z"}, "message": "update tests", "tree": {"sha": "5c30d631a1b79a018b6de775a2c16002e6b43378", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/5c30d631a1b79a018b6de775a2c16002e6b43378"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/a65729a6f1c8f07905dcd79e3155ead4f18060b8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/a65729a6f1c8f07905dcd79e3155ead4f18060b8", "html_url": "https://github.com/airbnb/synapse/commit/a65729a6f1c8f07905dcd79e3155ead4f18060b8", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/a65729a6f1c8f07905dcd79e3155ead4f18060b8/comments", "author": {"login": "lap1817", "id": 10382678, "avatar_url": "https://avatars2.githubusercontent.com/u/10382678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lap1817", "html_url": "https://github.com/lap1817", "followers_url": "https://api.github.com/users/lap1817/followers", "following_url": "https://api.github.com/users/lap1817/following{/other_user}", "gists_url": "https://api.github.com/users/lap1817/gists{/gist_id}", "starred_url": "https://api.github.com/users/lap1817/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lap1817/subscriptions", "organizations_url": "https://api.github.com/users/lap1817/orgs", "repos_url": "https://api.github.com/users/lap1817/repos", "events_url": "https://api.github.com/users/lap1817/events{/privacy}", "received_events_url": "https://api.github.com/users/lap1817/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lap1817", "id": 10382678, "avatar_url": "https://avatars2.githubusercontent.com/u/10382678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lap1817", "html_url": "https://github.com/lap1817", "followers_url": "https://api.github.com/users/lap1817/followers", "following_url": "https://api.github.com/users/lap1817/following{/other_user}", "gists_url": "https://api.github.com/users/lap1817/gists{/gist_id}", "starred_url": "https://api.github.com/users/lap1817/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lap1817/subscriptions", "organizations_url": "https://api.github.com/users/lap1817/orgs", "repos_url": "https://api.github.com/users/lap1817/repos", "events_url": "https://api.github.com/users/lap1817/events{/privacy}", "received_events_url": "https://api.github.com/users/lap1817/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e117aebf3fbe32893fa9fa222edfe103185c8703", "url": "https://api.github.com/repos/airbnb/synapse/commits/e117aebf3fbe32893fa9fa222edfe103185c8703", "html_url": "https://github.com/airbnb/synapse/commit/e117aebf3fbe32893fa9fa222edfe103185c8703"}]}, {"sha": "e117aebf3fbe32893fa9fa222edfe103185c8703", "commit": {"author": {"name": "Feng Pan", "email": "feng.pan@airbnb.com", "date": "2017-08-22T16:49:07Z"}, "committer": {"name": "Feng Pan", "email": "feng.pan@airbnb.com", "date": "2017-08-22T16:49:07Z"}, "message": "fix gemfile lock for nokogiri", "tree": {"sha": "c3844c637b1db129b2b153bc67bcd14cc76e9cf0", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/c3844c637b1db129b2b153bc67bcd14cc76e9cf0"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/e117aebf3fbe32893fa9fa222edfe103185c8703", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/e117aebf3fbe32893fa9fa222edfe103185c8703", "html_url": "https://github.com/airbnb/synapse/commit/e117aebf3fbe32893fa9fa222edfe103185c8703", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/e117aebf3fbe32893fa9fa222edfe103185c8703/comments", "author": {"login": "lap1817", "id": 10382678, "avatar_url": "https://avatars2.githubusercontent.com/u/10382678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lap1817", "html_url": "https://github.com/lap1817", "followers_url": "https://api.github.com/users/lap1817/followers", "following_url": "https://api.github.com/users/lap1817/following{/other_user}", "gists_url": "https://api.github.com/users/lap1817/gists{/gist_id}", "starred_url": "https://api.github.com/users/lap1817/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lap1817/subscriptions", "organizations_url": "https://api.github.com/users/lap1817/orgs", "repos_url": "https://api.github.com/users/lap1817/repos", "events_url": "https://api.github.com/users/lap1817/events{/privacy}", "received_events_url": "https://api.github.com/users/lap1817/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lap1817", "id": 10382678, "avatar_url": "https://avatars2.githubusercontent.com/u/10382678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lap1817", "html_url": "https://github.com/lap1817", "followers_url": "https://api.github.com/users/lap1817/followers", "following_url": "https://api.github.com/users/lap1817/following{/other_user}", "gists_url": "https://api.github.com/users/lap1817/gists{/gist_id}", "starred_url": "https://api.github.com/users/lap1817/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lap1817/subscriptions", "organizations_url": "https://api.github.com/users/lap1817/orgs", "repos_url": "https://api.github.com/users/lap1817/repos", "events_url": "https://api.github.com/users/lap1817/events{/privacy}", "received_events_url": "https://api.github.com/users/lap1817/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "45aa4c0f8f384b251df6031e24635262c09c51bf", "url": "https://api.github.com/repos/airbnb/synapse/commits/45aa4c0f8f384b251df6031e24635262c09c51bf", "html_url": "https://github.com/airbnb/synapse/commit/45aa4c0f8f384b251df6031e24635262c09c51bf"}]}, {"sha": "45aa4c0f8f384b251df6031e24635262c09c51bf", "commit": {"author": {"name": "Feng Pan", "email": "feng.pan@airbnb.com", "date": "2017-08-22T16:24:48Z"}, "committer": {"name": "Feng Pan", "email": "feng.pan@airbnb.com", "date": "2017-08-22T16:24:48Z"}, "message": "[synapse] enable generator config update from ZK", "tree": {"sha": "dab0e704935f233059ae2ebae713dc3e9fc35016", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/dab0e704935f233059ae2ebae713dc3e9fc35016"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/45aa4c0f8f384b251df6031e24635262c09c51bf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/45aa4c0f8f384b251df6031e24635262c09c51bf", "html_url": "https://github.com/airbnb/synapse/commit/45aa4c0f8f384b251df6031e24635262c09c51bf", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/45aa4c0f8f384b251df6031e24635262c09c51bf/comments", "author": {"login": "lap1817", "id": 10382678, "avatar_url": "https://avatars2.githubusercontent.com/u/10382678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lap1817", "html_url": "https://github.com/lap1817", "followers_url": "https://api.github.com/users/lap1817/followers", "following_url": "https://api.github.com/users/lap1817/following{/other_user}", "gists_url": "https://api.github.com/users/lap1817/gists{/gist_id}", "starred_url": "https://api.github.com/users/lap1817/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lap1817/subscriptions", "organizations_url": "https://api.github.com/users/lap1817/orgs", "repos_url": "https://api.github.com/users/lap1817/repos", "events_url": "https://api.github.com/users/lap1817/events{/privacy}", "received_events_url": "https://api.github.com/users/lap1817/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lap1817", "id": 10382678, "avatar_url": "https://avatars2.githubusercontent.com/u/10382678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lap1817", "html_url": "https://github.com/lap1817", "followers_url": "https://api.github.com/users/lap1817/followers", "following_url": "https://api.github.com/users/lap1817/following{/other_user}", "gists_url": "https://api.github.com/users/lap1817/gists{/gist_id}", "starred_url": "https://api.github.com/users/lap1817/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lap1817/subscriptions", "organizations_url": "https://api.github.com/users/lap1817/orgs", "repos_url": "https://api.github.com/users/lap1817/repos", "events_url": "https://api.github.com/users/lap1817/events{/privacy}", "received_events_url": "https://api.github.com/users/lap1817/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9226826e7f3c57fe7f9a0dc300915081a9df7dfb", "url": "https://api.github.com/repos/airbnb/synapse/commits/9226826e7f3c57fe7f9a0dc300915081a9df7dfb", "html_url": "https://github.com/airbnb/synapse/commit/9226826e7f3c57fe7f9a0dc300915081a9df7dfb"}]}, {"sha": "9226826e7f3c57fe7f9a0dc300915081a9df7dfb", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-08-02T22:09:55Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-08-02T22:10:32Z"}, "message": "Bump to 0.14.7", "tree": {"sha": "ba74265c28623240d1dcebcd9cc6763bcd337fbd", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/ba74265c28623240d1dcebcd9cc6763bcd337fbd"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/9226826e7f3c57fe7f9a0dc300915081a9df7dfb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/9226826e7f3c57fe7f9a0dc300915081a9df7dfb", "html_url": "https://github.com/airbnb/synapse/commit/9226826e7f3c57fe7f9a0dc300915081a9df7dfb", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/9226826e7f3c57fe7f9a0dc300915081a9df7dfb/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c73c41e46e45a3986d3e77d033c2dc735d501f3c", "url": "https://api.github.com/repos/airbnb/synapse/commits/c73c41e46e45a3986d3e77d033c2dc735d501f3c", "html_url": "https://github.com/airbnb/synapse/commit/c73c41e46e45a3986d3e77d033c2dc735d501f3c"}]}, {"sha": "c73c41e46e45a3986d3e77d033c2dc735d501f3c", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2017-07-31T16:46:57Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-07-31T16:46:57Z"}, "message": "Merge pull request #240 from airbnb/jlynch_better_id_algo\n\nTo find the next server id, just count up", "tree": {"sha": "e7deea53fdabd5dd186a1b8aa3ca1d4eac75e6c0", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/e7deea53fdabd5dd186a1b8aa3ca1d4eac75e6c0"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/c73c41e46e45a3986d3e77d033c2dc735d501f3c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/c73c41e46e45a3986d3e77d033c2dc735d501f3c", "html_url": "https://github.com/airbnb/synapse/commit/c73c41e46e45a3986d3e77d033c2dc735d501f3c", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/c73c41e46e45a3986d3e77d033c2dc735d501f3c/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "511738ba67210ba45e59a814430c2e5b756db618", "url": "https://api.github.com/repos/airbnb/synapse/commits/511738ba67210ba45e59a814430c2e5b756db618", "html_url": "https://github.com/airbnb/synapse/commit/511738ba67210ba45e59a814430c2e5b756db618"}, {"sha": "a4a1a6dff809710d0a07c313ab449c5e2704b2d3", "url": "https://api.github.com/repos/airbnb/synapse/commits/a4a1a6dff809710d0a07c313ab449c5e2704b2d3", "html_url": "https://github.com/airbnb/synapse/commit/a4a1a6dff809710d0a07c313ab449c5e2704b2d3"}]}, {"sha": "a4a1a6dff809710d0a07c313ab449c5e2704b2d3", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-07-27T06:36:06Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-07-27T06:36:06Z"}, "message": "To find the next server id, just count up", "tree": {"sha": "e7deea53fdabd5dd186a1b8aa3ca1d4eac75e6c0", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/e7deea53fdabd5dd186a1b8aa3ca1d4eac75e6c0"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/a4a1a6dff809710d0a07c313ab449c5e2704b2d3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/a4a1a6dff809710d0a07c313ab449c5e2704b2d3", "html_url": "https://github.com/airbnb/synapse/commit/a4a1a6dff809710d0a07c313ab449c5e2704b2d3", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/a4a1a6dff809710d0a07c313ab449c5e2704b2d3/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "511738ba67210ba45e59a814430c2e5b756db618", "url": "https://api.github.com/repos/airbnb/synapse/commits/511738ba67210ba45e59a814430c2e5b756db618", "html_url": "https://github.com/airbnb/synapse/commit/511738ba67210ba45e59a814430c2e5b756db618"}]}, {"sha": "511738ba67210ba45e59a814430c2e5b756db618", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2017-07-24T16:24:35Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-07-24T16:24:35Z"}, "message": "Merge pull request #239 from airbnb/jlynch_consistent_shuffle\n\nMake shuffle reproducible", "tree": {"sha": "a25a067bc3bec82ef2183ef0ae1c8775fe453111", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/a25a067bc3bec82ef2183ef0ae1c8775fe453111"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/511738ba67210ba45e59a814430c2e5b756db618", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/511738ba67210ba45e59a814430c2e5b756db618", "html_url": "https://github.com/airbnb/synapse/commit/511738ba67210ba45e59a814430c2e5b756db618", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/511738ba67210ba45e59a814430c2e5b756db618/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8bd609af27bd871d256544eb0037ae57b78ab871", "url": "https://api.github.com/repos/airbnb/synapse/commits/8bd609af27bd871d256544eb0037ae57b78ab871", "html_url": "https://github.com/airbnb/synapse/commit/8bd609af27bd871d256544eb0037ae57b78ab871"}, {"sha": "9c9c7b8fb5095fb01903270b5356f16a67a360e0", "url": "https://api.github.com/repos/airbnb/synapse/commits/9c9c7b8fb5095fb01903270b5356f16a67a360e0", "html_url": "https://github.com/airbnb/synapse/commit/9c9c7b8fb5095fb01903270b5356f16a67a360e0"}]}, {"sha": "9c9c7b8fb5095fb01903270b5356f16a67a360e0", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-07-14T01:01:42Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-07-14T01:01:42Z"}, "message": "Fixup max id search", "tree": {"sha": "a25a067bc3bec82ef2183ef0ae1c8775fe453111", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/a25a067bc3bec82ef2183ef0ae1c8775fe453111"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/9c9c7b8fb5095fb01903270b5356f16a67a360e0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/9c9c7b8fb5095fb01903270b5356f16a67a360e0", "html_url": "https://github.com/airbnb/synapse/commit/9c9c7b8fb5095fb01903270b5356f16a67a360e0", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/9c9c7b8fb5095fb01903270b5356f16a67a360e0/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ec0ea19d6414e945324487bcdcba530f42323341", "url": "https://api.github.com/repos/airbnb/synapse/commits/ec0ea19d6414e945324487bcdcba530f42323341", "html_url": "https://github.com/airbnb/synapse/commit/ec0ea19d6414e945324487bcdcba530f42323341"}]}, {"sha": "ec0ea19d6414e945324487bcdcba530f42323341", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-07-13T21:37:09Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-07-13T21:37:09Z"}, "message": "Only store valid ids in the state file", "tree": {"sha": "736b76bb9d23830d6aedce0179da09d18652b83f", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/736b76bb9d23830d6aedce0179da09d18652b83f"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/ec0ea19d6414e945324487bcdcba530f42323341", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/ec0ea19d6414e945324487bcdcba530f42323341", "html_url": "https://github.com/airbnb/synapse/commit/ec0ea19d6414e945324487bcdcba530f42323341", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/ec0ea19d6414e945324487bcdcba530f42323341/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5608ba97b3b36546796806b64262a9f5a337196f", "url": "https://api.github.com/repos/airbnb/synapse/commits/5608ba97b3b36546796806b64262a9f5a337196f", "html_url": "https://github.com/airbnb/synapse/commit/5608ba97b3b36546796806b64262a9f5a337196f"}]}, {"sha": "5608ba97b3b36546796806b64262a9f5a337196f", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-07-13T18:33:13Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-07-13T18:33:13Z"}, "message": "Maintain bookeeping both directions for server ids", "tree": {"sha": "efe2b8c0dda94b462a83878de58cf303817671b1", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/efe2b8c0dda94b462a83878de58cf303817671b1"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/5608ba97b3b36546796806b64262a9f5a337196f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/5608ba97b3b36546796806b64262a9f5a337196f", "html_url": "https://github.com/airbnb/synapse/commit/5608ba97b3b36546796806b64262a9f5a337196f", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/5608ba97b3b36546796806b64262a9f5a337196f/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "86b8368000523e4b2241da35419cd7c7a2cdb8f0", "url": "https://api.github.com/repos/airbnb/synapse/commits/86b8368000523e4b2241da35419cd7c7a2cdb8f0", "html_url": "https://github.com/airbnb/synapse/commit/86b8368000523e4b2241da35419cd7c7a2cdb8f0"}]}, {"sha": "86b8368000523e4b2241da35419cd7c7a2cdb8f0", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-07-12T21:22:22Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-07-12T21:30:34Z"}, "message": "Factor things better", "tree": {"sha": "548cdd75814b3b3736af31bdd67f59677f1619d2", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/548cdd75814b3b3736af31bdd67f59677f1619d2"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/86b8368000523e4b2241da35419cd7c7a2cdb8f0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/86b8368000523e4b2241da35419cd7c7a2cdb8f0", "html_url": "https://github.com/airbnb/synapse/commit/86b8368000523e4b2241da35419cd7c7a2cdb8f0", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/86b8368000523e4b2241da35419cd7c7a2cdb8f0/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f0bb0af09f2b4b74e0ba43e708be1c38fce15b45", "url": "https://api.github.com/repos/airbnb/synapse/commits/f0bb0af09f2b4b74e0ba43e708be1c38fce15b45", "html_url": "https://github.com/airbnb/synapse/commit/f0bb0af09f2b4b74e0ba43e708be1c38fce15b45"}]}, {"sha": "f0bb0af09f2b4b74e0ba43e708be1c38fce15b45", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-07-12T06:15:53Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-07-12T06:15:53Z"}, "message": "Oh man", "tree": {"sha": "7d588da7490b4553d7ba1cb906f6a1157e303829", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/7d588da7490b4553d7ba1cb906f6a1157e303829"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/f0bb0af09f2b4b74e0ba43e708be1c38fce15b45", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/f0bb0af09f2b4b74e0ba43e708be1c38fce15b45", "html_url": "https://github.com/airbnb/synapse/commit/f0bb0af09f2b4b74e0ba43e708be1c38fce15b45", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/f0bb0af09f2b4b74e0ba43e708be1c38fce15b45/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b84270653236c1562172c4c41e1b3ba9923983ee", "url": "https://api.github.com/repos/airbnb/synapse/commits/b84270653236c1562172c4c41e1b3ba9923983ee", "html_url": "https://github.com/airbnb/synapse/commit/b84270653236c1562172c4c41e1b3ba9923983ee"}]}, {"sha": "b84270653236c1562172c4c41e1b3ba9923983ee", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-07-12T05:35:09Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-07-12T06:00:28Z"}, "message": "Add some test coverage of haproxy_server_id", "tree": {"sha": "55f698f0d569cae47c8b5f8f8271e4a723668e34", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/55f698f0d569cae47c8b5f8f8271e4a723668e34"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/b84270653236c1562172c4c41e1b3ba9923983ee", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/b84270653236c1562172c4c41e1b3ba9923983ee", "html_url": "https://github.com/airbnb/synapse/commit/b84270653236c1562172c4c41e1b3ba9923983ee", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/b84270653236c1562172c4c41e1b3ba9923983ee/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "912c5fef6f6245b463da8a59a6b6c882ae646127", "url": "https://api.github.com/repos/airbnb/synapse/commits/912c5fef6f6245b463da8a59a6b6c882ae646127", "html_url": "https://github.com/airbnb/synapse/commit/912c5fef6f6245b463da8a59a6b6c882ae646127"}]}, {"sha": "912c5fef6f6245b463da8a59a6b6c882ae646127", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-07-12T05:11:49Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-07-12T06:00:28Z"}, "message": "Have to use a separate variable", "tree": {"sha": "f5e28e244ea593b1f30ff08bdb1e8718364c22e8", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/f5e28e244ea593b1f30ff08bdb1e8718364c22e8"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/912c5fef6f6245b463da8a59a6b6c882ae646127", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/912c5fef6f6245b463da8a59a6b6c882ae646127", "html_url": "https://github.com/airbnb/synapse/commit/912c5fef6f6245b463da8a59a6b6c882ae646127", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/912c5fef6f6245b463da8a59a6b6c882ae646127/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "30e69a44f080138e9ec278023729ecf14b786883", "url": "https://api.github.com/repos/airbnb/synapse/commits/30e69a44f080138e9ec278023729ecf14b786883", "html_url": "https://github.com/airbnb/synapse/commit/30e69a44f080138e9ec278023729ecf14b786883"}]}, {"sha": "30e69a44f080138e9ec278023729ecf14b786883", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-07-12T01:05:45Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-07-12T05:39:47Z"}, "message": "Refactor id management to use the state file", "tree": {"sha": "9d1b54fea94f9245d5a358728d772dd5c2127a7f", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/9d1b54fea94f9245d5a358728d772dd5c2127a7f"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/30e69a44f080138e9ec278023729ecf14b786883", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/30e69a44f080138e9ec278023729ecf14b786883", "html_url": "https://github.com/airbnb/synapse/commit/30e69a44f080138e9ec278023729ecf14b786883", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/30e69a44f080138e9ec278023729ecf14b786883/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5ee5012f3d153a8c20bb98054965807ed54501b2", "url": "https://api.github.com/repos/airbnb/synapse/commits/5ee5012f3d153a8c20bb98054965807ed54501b2", "html_url": "https://github.com/airbnb/synapse/commit/5ee5012f3d153a8c20bb98054965807ed54501b2"}]}, {"sha": "5ee5012f3d153a8c20bb98054965807ed54501b2", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-07-12T00:29:22Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-07-12T05:39:47Z"}, "message": "Writes out HAProxy ids for full state file compatibility\n\nThis makes it so that we generate deterministic ids along with the\nnames, which should mean that across synapse and haproxy restarts we stay\ncompatible with the HAProxy state file.", "tree": {"sha": "445f90a04317437ad1bc28a883a265d719bb00d3", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/445f90a04317437ad1bc28a883a265d719bb00d3"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/5ee5012f3d153a8c20bb98054965807ed54501b2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/5ee5012f3d153a8c20bb98054965807ed54501b2", "html_url": "https://github.com/airbnb/synapse/commit/5ee5012f3d153a8c20bb98054965807ed54501b2", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/5ee5012f3d153a8c20bb98054965807ed54501b2/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5976f8d45d5da8e0de591afa6c50ab9240f987c5", "url": "https://api.github.com/repos/airbnb/synapse/commits/5976f8d45d5da8e0de591afa6c50ab9240f987c5", "html_url": "https://github.com/airbnb/synapse/commit/5976f8d45d5da8e0de591afa6c50ab9240f987c5"}]}, {"sha": "5976f8d45d5da8e0de591afa6c50ab9240f987c5", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-07-11T16:43:12Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-07-12T05:39:47Z"}, "message": "Better tests\n\nSince ruby 1.9 and 2.0 shuffle differently ... let's just test that the\norder is the same.", "tree": {"sha": "52f1b9dc0e138c4613f6974b45e156ae13c47df4", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/52f1b9dc0e138c4613f6974b45e156ae13c47df4"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/5976f8d45d5da8e0de591afa6c50ab9240f987c5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/5976f8d45d5da8e0de591afa6c50ab9240f987c5", "html_url": "https://github.com/airbnb/synapse/commit/5976f8d45d5da8e0de591afa6c50ab9240f987c5", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/5976f8d45d5da8e0de591afa6c50ab9240f987c5/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d4ed90d5346d63d388a5c3affb54027bfbbc0bf9", "url": "https://api.github.com/repos/airbnb/synapse/commits/d4ed90d5346d63d388a5c3affb54027bfbbc0bf9", "html_url": "https://github.com/airbnb/synapse/commit/d4ed90d5346d63d388a5c3affb54027bfbbc0bf9"}]}, {"sha": "d4ed90d5346d63d388a5c3affb54027bfbbc0bf9", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-07-11T16:02:14Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-07-12T05:39:47Z"}, "message": "Add seed support and some tests", "tree": {"sha": "c043cabd15cf16f56441cd8fd22502e147455dde", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/c043cabd15cf16f56441cd8fd22502e147455dde"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/d4ed90d5346d63d388a5c3affb54027bfbbc0bf9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/d4ed90d5346d63d388a5c3affb54027bfbbc0bf9", "html_url": "https://github.com/airbnb/synapse/commit/d4ed90d5346d63d388a5c3affb54027bfbbc0bf9", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/d4ed90d5346d63d388a5c3affb54027bfbbc0bf9/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2de2f57a368ebe70e7500602438ed25b87db77f3", "url": "https://api.github.com/repos/airbnb/synapse/commits/2de2f57a368ebe70e7500602438ed25b87db77f3", "html_url": "https://github.com/airbnb/synapse/commit/2de2f57a368ebe70e7500602438ed25b87db77f3"}]}, {"sha": "2de2f57a368ebe70e7500602438ed25b87db77f3", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-07-11T15:30:45Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-07-12T05:39:46Z"}, "message": "Make shuffle reproducible\n\nThis way we still get different orders on different client machines,\npreventing long lived connections from all hitting the first or second\nserver, but also for reloads we get a consistent ordering that does not\ninvalidate the HAProxy state file (which assumes your backends don't\nchange order).", "tree": {"sha": "9de96d9af6b9c307c169328db928167b7466e4ea", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/9de96d9af6b9c307c169328db928167b7466e4ea"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/2de2f57a368ebe70e7500602438ed25b87db77f3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/2de2f57a368ebe70e7500602438ed25b87db77f3", "html_url": "https://github.com/airbnb/synapse/commit/2de2f57a368ebe70e7500602438ed25b87db77f3", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/2de2f57a368ebe70e7500602438ed25b87db77f3/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8bd609af27bd871d256544eb0037ae57b78ab871", "url": "https://api.github.com/repos/airbnb/synapse/commits/8bd609af27bd871d256544eb0037ae57b78ab871", "html_url": "https://github.com/airbnb/synapse/commit/8bd609af27bd871d256544eb0037ae57b78ab871"}]}, {"sha": "8bd609af27bd871d256544eb0037ae57b78ab871", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2017-07-11T15:47:00Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-07-11T15:47:00Z"}, "message": "Merge pull request #237 from noggi/zk_dns_bump_revision\n\nBump revision in DNS watcher of ZK DNS", "tree": {"sha": "af1140e141f62106978570a1c1c27d38fe9fff1e", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/af1140e141f62106978570a1c1c27d38fe9fff1e"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/8bd609af27bd871d256544eb0037ae57b78ab871", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/8bd609af27bd871d256544eb0037ae57b78ab871", "html_url": "https://github.com/airbnb/synapse/commit/8bd609af27bd871d256544eb0037ae57b78ab871", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/8bd609af27bd871d256544eb0037ae57b78ab871/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ff59495cb347435123492775f22021abd371809e", "url": "https://api.github.com/repos/airbnb/synapse/commits/ff59495cb347435123492775f22021abd371809e", "html_url": "https://github.com/airbnb/synapse/commit/ff59495cb347435123492775f22021abd371809e"}, {"sha": "e1f188010caa9eea204982736881233363b73869", "url": "https://api.github.com/repos/airbnb/synapse/commits/e1f188010caa9eea204982736881233363b73869", "html_url": "https://github.com/airbnb/synapse/commit/e1f188010caa9eea204982736881233363b73869"}]}, {"sha": "e1f188010caa9eea204982736881233363b73869", "commit": {"author": {"name": "Anton Kuraev", "email": "anton.kuraev@airbnb.com", "date": "2017-07-07T22:43:18Z"}, "committer": {"name": "Anton Kuraev", "email": "anton.kuraev@airbnb.com", "date": "2017-07-07T22:43:18Z"}, "message": "Bump revision in DNS watcher of ZK DNS\n\nMy previous PR (https://github.com/airbnb/synapse/pull/236) only fixed the ZK\npart of ZK DNS watcher. As the result, only ZK updates were handled correctly.\n\nThis change fixes the DNS part as well, so IP address updates will now also\ntrigger haproxy reconfiguration.", "tree": {"sha": "af1140e141f62106978570a1c1c27d38fe9fff1e", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/af1140e141f62106978570a1c1c27d38fe9fff1e"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/e1f188010caa9eea204982736881233363b73869", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/e1f188010caa9eea204982736881233363b73869", "html_url": "https://github.com/airbnb/synapse/commit/e1f188010caa9eea204982736881233363b73869", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/e1f188010caa9eea204982736881233363b73869/comments", "author": null, "committer": null, "parents": [{"sha": "ff59495cb347435123492775f22021abd371809e", "url": "https://api.github.com/repos/airbnb/synapse/commits/ff59495cb347435123492775f22021abd371809e", "html_url": "https://github.com/airbnb/synapse/commit/ff59495cb347435123492775f22021abd371809e"}]}, {"sha": "ff59495cb347435123492775f22021abd371809e", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-06-21T05:08:42Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-06-21T05:08:42Z"}, "message": "Bump to 0.14.6", "tree": {"sha": "d925ad55291be791308669f1f1bb7c8d5e72262b", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/d925ad55291be791308669f1f1bb7c8d5e72262b"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/ff59495cb347435123492775f22021abd371809e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/ff59495cb347435123492775f22021abd371809e", "html_url": "https://github.com/airbnb/synapse/commit/ff59495cb347435123492775f22021abd371809e", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/ff59495cb347435123492775f22021abd371809e/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0514a126a6ade55d6065eb5674c4afc343fab862", "url": "https://api.github.com/repos/airbnb/synapse/commits/0514a126a6ade55d6065eb5674c4afc343fab862", "html_url": "https://github.com/airbnb/synapse/commit/0514a126a6ade55d6065eb5674c4afc343fab862"}]}, {"sha": "0514a126a6ade55d6065eb5674c4afc343fab862", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2017-06-21T05:06:20Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-06-21T05:06:20Z"}, "message": "Merge pull request #236 from noggi/zookeeper_dns_revision\n\nPropagate revision updates in ZookeeperDns watcher", "tree": {"sha": "5e97a6ad4f8615ec2a38118408d223e715d7a7bb", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/5e97a6ad4f8615ec2a38118408d223e715d7a7bb"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/0514a126a6ade55d6065eb5674c4afc343fab862", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/0514a126a6ade55d6065eb5674c4afc343fab862", "html_url": "https://github.com/airbnb/synapse/commit/0514a126a6ade55d6065eb5674c4afc343fab862", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/0514a126a6ade55d6065eb5674c4afc343fab862/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "914d38f578d03759674a3e9aa49623f6ab7a93bc", "url": "https://api.github.com/repos/airbnb/synapse/commits/914d38f578d03759674a3e9aa49623f6ab7a93bc", "html_url": "https://github.com/airbnb/synapse/commit/914d38f578d03759674a3e9aa49623f6ab7a93bc"}, {"sha": "eea2eb86eda26c00c065362b4de5b01158c59868", "url": "https://api.github.com/repos/airbnb/synapse/commits/eea2eb86eda26c00c065362b4de5b01158c59868", "html_url": "https://github.com/airbnb/synapse/commit/eea2eb86eda26c00c065362b4de5b01158c59868"}]}, {"sha": "eea2eb86eda26c00c065362b4de5b01158c59868", "commit": {"author": {"name": "Anton Kuraev", "email": "anton.kuraev@airbnb.com", "date": "2017-06-21T04:11:37Z"}, "committer": {"name": "Anton Kuraev", "email": "anton.kuraev@airbnb.com", "date": "2017-06-21T04:36:41Z"}, "message": "Propagate revision updates in ZookeeperDns watcher\n\nhttps://github.com/airbnb/synapse/pull/228 added stanza cache in haproxy generator,\nwhich relies on the revision counter to detect changes in configuration. This does\nnot work properly with ZookeeperDns watcher which overrides reconfigure method, so\nchanges that happened in its child ZK watcher become invisible to haproxy generator.\n\nThis change allows for proper propagation of revision updates in Zookeeper Dns.", "tree": {"sha": "5e97a6ad4f8615ec2a38118408d223e715d7a7bb", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/5e97a6ad4f8615ec2a38118408d223e715d7a7bb"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/eea2eb86eda26c00c065362b4de5b01158c59868", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/eea2eb86eda26c00c065362b4de5b01158c59868", "html_url": "https://github.com/airbnb/synapse/commit/eea2eb86eda26c00c065362b4de5b01158c59868", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/eea2eb86eda26c00c065362b4de5b01158c59868/comments", "author": null, "committer": null, "parents": [{"sha": "914d38f578d03759674a3e9aa49623f6ab7a93bc", "url": "https://api.github.com/repos/airbnb/synapse/commits/914d38f578d03759674a3e9aa49623f6ab7a93bc", "html_url": "https://github.com/airbnb/synapse/commit/914d38f578d03759674a3e9aa49623f6ab7a93bc"}]}, {"sha": "914d38f578d03759674a3e9aa49623f6ab7a93bc", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2017-04-14T17:55:07Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-04-14T17:55:07Z"}, "message": "Merge pull request #232 from airbnb/allow_disabled_files\n\nAllow disabled files", "tree": {"sha": "f1013db978c954eaf8972caaae1b52fe7109869f", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/f1013db978c954eaf8972caaae1b52fe7109869f"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/914d38f578d03759674a3e9aa49623f6ab7a93bc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/914d38f578d03759674a3e9aa49623f6ab7a93bc", "html_url": "https://github.com/airbnb/synapse/commit/914d38f578d03759674a3e9aa49623f6ab7a93bc", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/914d38f578d03759674a3e9aa49623f6ab7a93bc/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b87de0222e06ff7614349fc618d019519af76233", "url": "https://api.github.com/repos/airbnb/synapse/commits/b87de0222e06ff7614349fc618d019519af76233", "html_url": "https://github.com/airbnb/synapse/commit/b87de0222e06ff7614349fc618d019519af76233"}, {"sha": "8070c91ea8afae0312ab7e66e925caba54efb465", "url": "https://api.github.com/repos/airbnb/synapse/commits/8070c91ea8afae0312ab7e66e925caba54efb465", "html_url": "https://github.com/airbnb/synapse/commit/8070c91ea8afae0312ab7e66e925caba54efb465"}]}, {"sha": "8070c91ea8afae0312ab7e66e925caba54efb465", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-04-13T20:35:31Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-04-13T20:46:30Z"}, "message": "Bump to 0.14.5", "tree": {"sha": "f1013db978c954eaf8972caaae1b52fe7109869f", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/f1013db978c954eaf8972caaae1b52fe7109869f"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/8070c91ea8afae0312ab7e66e925caba54efb465", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/8070c91ea8afae0312ab7e66e925caba54efb465", "html_url": "https://github.com/airbnb/synapse/commit/8070c91ea8afae0312ab7e66e925caba54efb465", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/8070c91ea8afae0312ab7e66e925caba54efb465/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e952c947714f450b9262d18bf782fc88609ab445", "url": "https://api.github.com/repos/airbnb/synapse/commits/e952c947714f450b9262d18bf782fc88609ab445", "html_url": "https://github.com/airbnb/synapse/commit/e952c947714f450b9262d18bf782fc88609ab445"}]}, {"sha": "e952c947714f450b9262d18bf782fc88609ab445", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-04-13T20:30:51Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-04-13T20:46:30Z"}, "message": "Better support disabled file_watcher outputs", "tree": {"sha": "d5943b7f883f98bdb94d6a6cd2b669e208f0d3d8", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/d5943b7f883f98bdb94d6a6cd2b669e208f0d3d8"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/e952c947714f450b9262d18bf782fc88609ab445", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/e952c947714f450b9262d18bf782fc88609ab445", "html_url": "https://github.com/airbnb/synapse/commit/e952c947714f450b9262d18bf782fc88609ab445", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/e952c947714f450b9262d18bf782fc88609ab445/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b87de0222e06ff7614349fc618d019519af76233", "url": "https://api.github.com/repos/airbnb/synapse/commits/b87de0222e06ff7614349fc618d019519af76233", "html_url": "https://github.com/airbnb/synapse/commit/b87de0222e06ff7614349fc618d019519af76233"}]}, {"sha": "b87de0222e06ff7614349fc618d019519af76233", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-04-03T23:49:25Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-04-03T23:50:17Z"}, "message": "Bumping version to 0.14.4", "tree": {"sha": "935dcf01d50989d371397507707fb3931f090e22", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/935dcf01d50989d371397507707fb3931f090e22"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/b87de0222e06ff7614349fc618d019519af76233", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/b87de0222e06ff7614349fc618d019519af76233", "html_url": "https://github.com/airbnb/synapse/commit/b87de0222e06ff7614349fc618d019519af76233", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/b87de0222e06ff7614349fc618d019519af76233/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b8eba7146a351c1ad943516218dfd036a927989d", "url": "https://api.github.com/repos/airbnb/synapse/commits/b8eba7146a351c1ad943516218dfd036a927989d", "html_url": "https://github.com/airbnb/synapse/commit/b8eba7146a351c1ad943516218dfd036a927989d"}]}, {"sha": "b8eba7146a351c1ad943516218dfd036a927989d", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2017-04-03T23:47:59Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-04-03T23:47:59Z"}, "message": "Merge pull request #230 from airbnb/do_less_work\n\nDo less work on file output updates", "tree": {"sha": "4ea7b4a18337b75ac3a0267953cc8dd19a2f0d9b", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/4ea7b4a18337b75ac3a0267953cc8dd19a2f0d9b"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/b8eba7146a351c1ad943516218dfd036a927989d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/b8eba7146a351c1ad943516218dfd036a927989d", "html_url": "https://github.com/airbnb/synapse/commit/b8eba7146a351c1ad943516218dfd036a927989d", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/b8eba7146a351c1ad943516218dfd036a927989d/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f3774aab6e73e55a130f6d2fa16dcced68dbafca", "url": "https://api.github.com/repos/airbnb/synapse/commits/f3774aab6e73e55a130f6d2fa16dcced68dbafca", "html_url": "https://github.com/airbnb/synapse/commit/f3774aab6e73e55a130f6d2fa16dcced68dbafca"}, {"sha": "4adf84fda4db9ea4cdb15e090c59306a8b18ea35", "url": "https://api.github.com/repos/airbnb/synapse/commits/4adf84fda4db9ea4cdb15e090c59306a8b18ea35", "html_url": "https://github.com/airbnb/synapse/commit/4adf84fda4db9ea4cdb15e090c59306a8b18ea35"}]}, {"sha": "4adf84fda4db9ea4cdb15e090c59306a8b18ea35", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-03-24T17:45:03Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-04-03T19:14:40Z"}, "message": "Do less work on file output updates", "tree": {"sha": "4ea7b4a18337b75ac3a0267953cc8dd19a2f0d9b", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/4ea7b4a18337b75ac3a0267953cc8dd19a2f0d9b"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/4adf84fda4db9ea4cdb15e090c59306a8b18ea35", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/4adf84fda4db9ea4cdb15e090c59306a8b18ea35", "html_url": "https://github.com/airbnb/synapse/commit/4adf84fda4db9ea4cdb15e090c59306a8b18ea35", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/4adf84fda4db9ea4cdb15e090c59306a8b18ea35/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f3774aab6e73e55a130f6d2fa16dcced68dbafca", "url": "https://api.github.com/repos/airbnb/synapse/commits/f3774aab6e73e55a130f6d2fa16dcced68dbafca", "html_url": "https://github.com/airbnb/synapse/commit/f3774aab6e73e55a130f6d2fa16dcced68dbafca"}]}, {"sha": "f3774aab6e73e55a130f6d2fa16dcced68dbafca", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2017-03-31T23:51:52Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-03-31T23:51:52Z"}, "message": "Fixup README links\n\nTrying to fixup interrefs", "tree": {"sha": "488519013f7011a21eaf6ea27d017a3696fb7d3e", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/488519013f7011a21eaf6ea27d017a3696fb7d3e"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/f3774aab6e73e55a130f6d2fa16dcced68dbafca", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/f3774aab6e73e55a130f6d2fa16dcced68dbafca", "html_url": "https://github.com/airbnb/synapse/commit/f3774aab6e73e55a130f6d2fa16dcced68dbafca", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/f3774aab6e73e55a130f6d2fa16dcced68dbafca/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "851ce9c2a7e1cc865db652f238025bc73bcc7767", "url": "https://api.github.com/repos/airbnb/synapse/commits/851ce9c2a7e1cc865db652f238025bc73bcc7767", "html_url": "https://github.com/airbnb/synapse/commit/851ce9c2a7e1cc865db652f238025bc73bcc7767"}]}, {"sha": "851ce9c2a7e1cc865db652f238025bc73bcc7767", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2017-03-31T21:32:23Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-03-31T21:32:23Z"}, "message": "Merge pull request #228 from somic/haproxy_generator_cache1\n\ncache haproxy stanzas in generate_config", "tree": {"sha": "6b2c5482f546a8d5ae69a338014e60dd96f3189c", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/6b2c5482f546a8d5ae69a338014e60dd96f3189c"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/851ce9c2a7e1cc865db652f238025bc73bcc7767", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/851ce9c2a7e1cc865db652f238025bc73bcc7767", "html_url": "https://github.com/airbnb/synapse/commit/851ce9c2a7e1cc865db652f238025bc73bcc7767", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/851ce9c2a7e1cc865db652f238025bc73bcc7767/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1b576eaee3f7c03d83c3ded9fd241f203bc5e97a", "url": "https://api.github.com/repos/airbnb/synapse/commits/1b576eaee3f7c03d83c3ded9fd241f203bc5e97a", "html_url": "https://github.com/airbnb/synapse/commit/1b576eaee3f7c03d83c3ded9fd241f203bc5e97a"}, {"sha": "801594dd7346eb20b211ed8600d0ae0467d775c6", "url": "https://api.github.com/repos/airbnb/synapse/commits/801594dd7346eb20b211ed8600d0ae0467d775c6", "html_url": "https://github.com/airbnb/synapse/commit/801594dd7346eb20b211ed8600d0ae0467d775c6"}]}, {"sha": "801594dd7346eb20b211ed8600d0ae0467d775c6", "commit": {"author": {"name": "Dmitriy Samovskiy", "email": "dmits@yelp.com", "date": "2017-03-31T20:14:17Z"}, "committer": {"name": "Dmitriy Samovskiy", "email": "dmits@yelp.com", "date": "2017-03-31T20:14:17Z"}, "message": "remove MAX_REVISION", "tree": {"sha": "6b2c5482f546a8d5ae69a338014e60dd96f3189c", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/6b2c5482f546a8d5ae69a338014e60dd96f3189c"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/801594dd7346eb20b211ed8600d0ae0467d775c6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/801594dd7346eb20b211ed8600d0ae0467d775c6", "html_url": "https://github.com/airbnb/synapse/commit/801594dd7346eb20b211ed8600d0ae0467d775c6", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/801594dd7346eb20b211ed8600d0ae0467d775c6/comments", "author": {"login": "somic", "id": 16408, "avatar_url": "https://avatars0.githubusercontent.com/u/16408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/somic", "html_url": "https://github.com/somic", "followers_url": "https://api.github.com/users/somic/followers", "following_url": "https://api.github.com/users/somic/following{/other_user}", "gists_url": "https://api.github.com/users/somic/gists{/gist_id}", "starred_url": "https://api.github.com/users/somic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/somic/subscriptions", "organizations_url": "https://api.github.com/users/somic/orgs", "repos_url": "https://api.github.com/users/somic/repos", "events_url": "https://api.github.com/users/somic/events{/privacy}", "received_events_url": "https://api.github.com/users/somic/received_events", "type": "User", "site_admin": false}, "committer": {"login": "somic", "id": 16408, "avatar_url": "https://avatars0.githubusercontent.com/u/16408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/somic", "html_url": "https://github.com/somic", "followers_url": "https://api.github.com/users/somic/followers", "following_url": "https://api.github.com/users/somic/following{/other_user}", "gists_url": "https://api.github.com/users/somic/gists{/gist_id}", "starred_url": "https://api.github.com/users/somic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/somic/subscriptions", "organizations_url": "https://api.github.com/users/somic/orgs", "repos_url": "https://api.github.com/users/somic/repos", "events_url": "https://api.github.com/users/somic/events{/privacy}", "received_events_url": "https://api.github.com/users/somic/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "16bb1a44d5bb43ce3dba11a7ad08f81d991071e2", "url": "https://api.github.com/repos/airbnb/synapse/commits/16bb1a44d5bb43ce3dba11a7ad08f81d991071e2", "html_url": "https://github.com/airbnb/synapse/commit/16bb1a44d5bb43ce3dba11a7ad08f81d991071e2"}]}, {"sha": "16bb1a44d5bb43ce3dba11a7ad08f81d991071e2", "commit": {"author": {"name": "Dmitriy Samovskiy", "email": "dmits@yelp.com", "date": "2017-03-28T20:26:27Z"}, "committer": {"name": "Dmitriy Samovskiy", "email": "dmits@yelp.com", "date": "2017-03-28T20:26:27Z"}, "message": "cache haproxy stanzas in generate_config", "tree": {"sha": "50d487c0587dd59f893c0f36c089ae6bd68e6199", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/50d487c0587dd59f893c0f36c089ae6bd68e6199"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/16bb1a44d5bb43ce3dba11a7ad08f81d991071e2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/16bb1a44d5bb43ce3dba11a7ad08f81d991071e2", "html_url": "https://github.com/airbnb/synapse/commit/16bb1a44d5bb43ce3dba11a7ad08f81d991071e2", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/16bb1a44d5bb43ce3dba11a7ad08f81d991071e2/comments", "author": {"login": "somic", "id": 16408, "avatar_url": "https://avatars0.githubusercontent.com/u/16408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/somic", "html_url": "https://github.com/somic", "followers_url": "https://api.github.com/users/somic/followers", "following_url": "https://api.github.com/users/somic/following{/other_user}", "gists_url": "https://api.github.com/users/somic/gists{/gist_id}", "starred_url": "https://api.github.com/users/somic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/somic/subscriptions", "organizations_url": "https://api.github.com/users/somic/orgs", "repos_url": "https://api.github.com/users/somic/repos", "events_url": "https://api.github.com/users/somic/events{/privacy}", "received_events_url": "https://api.github.com/users/somic/received_events", "type": "User", "site_admin": false}, "committer": {"login": "somic", "id": 16408, "avatar_url": "https://avatars0.githubusercontent.com/u/16408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/somic", "html_url": "https://github.com/somic", "followers_url": "https://api.github.com/users/somic/followers", "following_url": "https://api.github.com/users/somic/following{/other_user}", "gists_url": "https://api.github.com/users/somic/gists{/gist_id}", "starred_url": "https://api.github.com/users/somic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/somic/subscriptions", "organizations_url": "https://api.github.com/users/somic/orgs", "repos_url": "https://api.github.com/users/somic/repos", "events_url": "https://api.github.com/users/somic/events{/privacy}", "received_events_url": "https://api.github.com/users/somic/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1b576eaee3f7c03d83c3ded9fd241f203bc5e97a", "url": "https://api.github.com/repos/airbnb/synapse/commits/1b576eaee3f7c03d83c3ded9fd241f203bc5e97a", "html_url": "https://github.com/airbnb/synapse/commit/1b576eaee3f7c03d83c3ded9fd241f203bc5e97a"}]}, {"sha": "1b576eaee3f7c03d83c3ded9fd241f203bc5e97a", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-03-22T21:44:15Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-03-22T21:44:15Z"}, "message": "Bump to 0.14.3", "tree": {"sha": "8ce6de49852a7f030926effb9aa9e4b327f23178", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/8ce6de49852a7f030926effb9aa9e4b327f23178"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/1b576eaee3f7c03d83c3ded9fd241f203bc5e97a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/1b576eaee3f7c03d83c3ded9fd241f203bc5e97a", "html_url": "https://github.com/airbnb/synapse/commit/1b576eaee3f7c03d83c3ded9fd241f203bc5e97a", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/1b576eaee3f7c03d83c3ded9fd241f203bc5e97a/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ea09eacaccbb9588ec4597032a56caa1622e923d", "url": "https://api.github.com/repos/airbnb/synapse/commits/ea09eacaccbb9588ec4597032a56caa1622e923d", "html_url": "https://github.com/airbnb/synapse/commit/ea09eacaccbb9588ec4597032a56caa1622e923d"}]}, {"sha": "ea09eacaccbb9588ec4597032a56caa1622e923d", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2017-03-22T21:43:19Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-03-22T21:43:19Z"}, "message": "Merge pull request #227 from roberteckert/patch-1\n\nSupport 'service_conf_dir' directive", "tree": {"sha": "d137d651c5a0973cedaa9bc1f22ce3b8c5675f7c", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/d137d651c5a0973cedaa9bc1f22ce3b8c5675f7c"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/ea09eacaccbb9588ec4597032a56caa1622e923d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/ea09eacaccbb9588ec4597032a56caa1622e923d", "html_url": "https://github.com/airbnb/synapse/commit/ea09eacaccbb9588ec4597032a56caa1622e923d", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/ea09eacaccbb9588ec4597032a56caa1622e923d/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "66c9dd4e2c5dc894cf2e7e508d130e261ec5c7c4", "url": "https://api.github.com/repos/airbnb/synapse/commits/66c9dd4e2c5dc894cf2e7e508d130e261ec5c7c4", "html_url": "https://github.com/airbnb/synapse/commit/66c9dd4e2c5dc894cf2e7e508d130e261ec5c7c4"}, {"sha": "82ffe05abde3138782e1d9fc22e50c08d038150d", "url": "https://api.github.com/repos/airbnb/synapse/commits/82ffe05abde3138782e1d9fc22e50c08d038150d", "html_url": "https://github.com/airbnb/synapse/commit/82ffe05abde3138782e1d9fc22e50c08d038150d"}]}, {"sha": "82ffe05abde3138782e1d9fc22e50c08d038150d", "commit": {"author": {"name": "roberteckert", "email": "reckert@gmail.com", "date": "2017-03-22T21:12:30Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-03-22T21:12:30Z"}, "message": "Support 'service_conf_dir' directive\n\nThis fixes https://github.com/airbnb/synapse/issues/226.", "tree": {"sha": "d137d651c5a0973cedaa9bc1f22ce3b8c5675f7c", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/d137d651c5a0973cedaa9bc1f22ce3b8c5675f7c"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/82ffe05abde3138782e1d9fc22e50c08d038150d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/82ffe05abde3138782e1d9fc22e50c08d038150d", "html_url": "https://github.com/airbnb/synapse/commit/82ffe05abde3138782e1d9fc22e50c08d038150d", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/82ffe05abde3138782e1d9fc22e50c08d038150d/comments", "author": {"login": "roberteckert", "id": 2745869, "avatar_url": "https://avatars0.githubusercontent.com/u/2745869?v=4", "gravatar_id": "", "url": "https://api.github.com/users/roberteckert", "html_url": "https://github.com/roberteckert", "followers_url": "https://api.github.com/users/roberteckert/followers", "following_url": "https://api.github.com/users/roberteckert/following{/other_user}", "gists_url": "https://api.github.com/users/roberteckert/gists{/gist_id}", "starred_url": "https://api.github.com/users/roberteckert/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/roberteckert/subscriptions", "organizations_url": "https://api.github.com/users/roberteckert/orgs", "repos_url": "https://api.github.com/users/roberteckert/repos", "events_url": "https://api.github.com/users/roberteckert/events{/privacy}", "received_events_url": "https://api.github.com/users/roberteckert/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "66c9dd4e2c5dc894cf2e7e508d130e261ec5c7c4", "url": "https://api.github.com/repos/airbnb/synapse/commits/66c9dd4e2c5dc894cf2e7e508d130e261ec5c7c4", "html_url": "https://github.com/airbnb/synapse/commit/66c9dd4e2c5dc894cf2e7e508d130e261ec5c7c4"}]}, {"sha": "66c9dd4e2c5dc894cf2e7e508d130e261ec5c7c4", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-03-22T20:28:06Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-03-22T20:28:34Z"}, "message": "Bump to 0.14.2", "tree": {"sha": "7469a63ad5d11305ab4240b5651a9eaa47f5ab60", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/7469a63ad5d11305ab4240b5651a9eaa47f5ab60"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/66c9dd4e2c5dc894cf2e7e508d130e261ec5c7c4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/66c9dd4e2c5dc894cf2e7e508d130e261ec5c7c4", "html_url": "https://github.com/airbnb/synapse/commit/66c9dd4e2c5dc894cf2e7e508d130e261ec5c7c4", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/66c9dd4e2c5dc894cf2e7e508d130e261ec5c7c4/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "268ebe063885c3a96c438406369eb2c45c41da33", "url": "https://api.github.com/repos/airbnb/synapse/commits/268ebe063885c3a96c438406369eb2c45c41da33", "html_url": "https://github.com/airbnb/synapse/commit/268ebe063885c3a96c438406369eb2c45c41da33"}]}, {"sha": "268ebe063885c3a96c438406369eb2c45c41da33", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2017-03-22T20:17:56Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-03-22T20:17:56Z"}, "message": "Merge pull request #225 from somic/rebase__noggi/synapse/haproxy_avoid_noop_reenable\n\nMerge noggi/synapse/haproxy_avoid_noop_reenable_211", "tree": {"sha": "d06aff0c08e320ab119b654b133dc5f5e378d929", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/d06aff0c08e320ab119b654b133dc5f5e378d929"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/268ebe063885c3a96c438406369eb2c45c41da33", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/268ebe063885c3a96c438406369eb2c45c41da33", "html_url": "https://github.com/airbnb/synapse/commit/268ebe063885c3a96c438406369eb2c45c41da33", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/268ebe063885c3a96c438406369eb2c45c41da33/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c759ef1016cd52053bc755c749bd9656357920d8", "url": "https://api.github.com/repos/airbnb/synapse/commits/c759ef1016cd52053bc755c749bd9656357920d8", "html_url": "https://github.com/airbnb/synapse/commit/c759ef1016cd52053bc755c749bd9656357920d8"}, {"sha": "e0b34c2772e36b424d7c67239d9dcd1805143029", "url": "https://api.github.com/repos/airbnb/synapse/commits/e0b34c2772e36b424d7c67239d9dcd1805143029", "html_url": "https://github.com/airbnb/synapse/commit/e0b34c2772e36b424d7c67239d9dcd1805143029"}]}, {"sha": "e0b34c2772e36b424d7c67239d9dcd1805143029", "commit": {"author": {"name": "Dmitriy Samovskiy", "email": "dmits@yelp.com", "date": "2017-03-22T19:57:08Z"}, "committer": {"name": "Dmitriy Samovskiy", "email": "dmits@yelp.com", "date": "2017-03-22T19:57:08Z"}, "message": "better checking if status is UP", "tree": {"sha": "d06aff0c08e320ab119b654b133dc5f5e378d929", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/d06aff0c08e320ab119b654b133dc5f5e378d929"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/e0b34c2772e36b424d7c67239d9dcd1805143029", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/e0b34c2772e36b424d7c67239d9dcd1805143029", "html_url": "https://github.com/airbnb/synapse/commit/e0b34c2772e36b424d7c67239d9dcd1805143029", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/e0b34c2772e36b424d7c67239d9dcd1805143029/comments", "author": {"login": "somic", "id": 16408, "avatar_url": "https://avatars0.githubusercontent.com/u/16408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/somic", "html_url": "https://github.com/somic", "followers_url": "https://api.github.com/users/somic/followers", "following_url": "https://api.github.com/users/somic/following{/other_user}", "gists_url": "https://api.github.com/users/somic/gists{/gist_id}", "starred_url": "https://api.github.com/users/somic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/somic/subscriptions", "organizations_url": "https://api.github.com/users/somic/orgs", "repos_url": "https://api.github.com/users/somic/repos", "events_url": "https://api.github.com/users/somic/events{/privacy}", "received_events_url": "https://api.github.com/users/somic/received_events", "type": "User", "site_admin": false}, "committer": {"login": "somic", "id": 16408, "avatar_url": "https://avatars0.githubusercontent.com/u/16408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/somic", "html_url": "https://github.com/somic", "followers_url": "https://api.github.com/users/somic/followers", "following_url": "https://api.github.com/users/somic/following{/other_user}", "gists_url": "https://api.github.com/users/somic/gists{/gist_id}", "starred_url": "https://api.github.com/users/somic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/somic/subscriptions", "organizations_url": "https://api.github.com/users/somic/orgs", "repos_url": "https://api.github.com/users/somic/repos", "events_url": "https://api.github.com/users/somic/events{/privacy}", "received_events_url": "https://api.github.com/users/somic/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f96bccc0b75c80cdb964bb5b465424abfe8c3ec8", "url": "https://api.github.com/repos/airbnb/synapse/commits/f96bccc0b75c80cdb964bb5b465424abfe8c3ec8", "html_url": "https://github.com/airbnb/synapse/commit/f96bccc0b75c80cdb964bb5b465424abfe8c3ec8"}]}, {"sha": "f96bccc0b75c80cdb964bb5b465424abfe8c3ec8", "commit": {"author": {"name": "Dmitriy Samovskiy", "email": "dmits@yelp.com", "date": "2017-03-22T17:48:38Z"}, "committer": {"name": "Dmitriy Samovskiy", "email": "dmits@yelp.com", "date": "2017-03-22T17:50:17Z"}, "message": "fix tests and typo in #211", "tree": {"sha": "76f14ce0a99a52d827b16843aab0f9c3bae66689", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/76f14ce0a99a52d827b16843aab0f9c3bae66689"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/f96bccc0b75c80cdb964bb5b465424abfe8c3ec8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/f96bccc0b75c80cdb964bb5b465424abfe8c3ec8", "html_url": "https://github.com/airbnb/synapse/commit/f96bccc0b75c80cdb964bb5b465424abfe8c3ec8", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/f96bccc0b75c80cdb964bb5b465424abfe8c3ec8/comments", "author": {"login": "somic", "id": 16408, "avatar_url": "https://avatars0.githubusercontent.com/u/16408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/somic", "html_url": "https://github.com/somic", "followers_url": "https://api.github.com/users/somic/followers", "following_url": "https://api.github.com/users/somic/following{/other_user}", "gists_url": "https://api.github.com/users/somic/gists{/gist_id}", "starred_url": "https://api.github.com/users/somic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/somic/subscriptions", "organizations_url": "https://api.github.com/users/somic/orgs", "repos_url": "https://api.github.com/users/somic/repos", "events_url": "https://api.github.com/users/somic/events{/privacy}", "received_events_url": "https://api.github.com/users/somic/received_events", "type": "User", "site_admin": false}, "committer": {"login": "somic", "id": 16408, "avatar_url": "https://avatars0.githubusercontent.com/u/16408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/somic", "html_url": "https://github.com/somic", "followers_url": "https://api.github.com/users/somic/followers", "following_url": "https://api.github.com/users/somic/following{/other_user}", "gists_url": "https://api.github.com/users/somic/gists{/gist_id}", "starred_url": "https://api.github.com/users/somic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/somic/subscriptions", "organizations_url": "https://api.github.com/users/somic/orgs", "repos_url": "https://api.github.com/users/somic/repos", "events_url": "https://api.github.com/users/somic/events{/privacy}", "received_events_url": "https://api.github.com/users/somic/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "29ecc8a824b6985e3c9027d2d15002a3eb6bc80b", "url": "https://api.github.com/repos/airbnb/synapse/commits/29ecc8a824b6985e3c9027d2d15002a3eb6bc80b", "html_url": "https://github.com/airbnb/synapse/commit/29ecc8a824b6985e3c9027d2d15002a3eb6bc80b"}]}, {"sha": "29ecc8a824b6985e3c9027d2d15002a3eb6bc80b", "commit": {"author": {"name": "Dmitriy Samovskiy", "email": "dmits@yelp.com", "date": "2017-03-21T22:16:17Z"}, "committer": {"name": "Dmitriy Samovskiy", "email": "dmits@yelp.com", "date": "2017-03-21T22:16:17Z"}, "message": "Merge remote-tracking branch 'noggi/synapse/haproxy_avoid_noop_reenable' into rebase__noggi/synapse/haproxy_avoid_noop_reenable\n\n* noggi/synapse/haproxy_avoid_noop_reenable:\n  [haproxy] Avoid unnecessary HAProxy re-configuration.", "tree": {"sha": "517aba723002f1dfe8811066ac141663dd9b12eb", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/517aba723002f1dfe8811066ac141663dd9b12eb"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/29ecc8a824b6985e3c9027d2d15002a3eb6bc80b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/29ecc8a824b6985e3c9027d2d15002a3eb6bc80b", "html_url": "https://github.com/airbnb/synapse/commit/29ecc8a824b6985e3c9027d2d15002a3eb6bc80b", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/29ecc8a824b6985e3c9027d2d15002a3eb6bc80b/comments", "author": {"login": "somic", "id": 16408, "avatar_url": "https://avatars0.githubusercontent.com/u/16408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/somic", "html_url": "https://github.com/somic", "followers_url": "https://api.github.com/users/somic/followers", "following_url": "https://api.github.com/users/somic/following{/other_user}", "gists_url": "https://api.github.com/users/somic/gists{/gist_id}", "starred_url": "https://api.github.com/users/somic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/somic/subscriptions", "organizations_url": "https://api.github.com/users/somic/orgs", "repos_url": "https://api.github.com/users/somic/repos", "events_url": "https://api.github.com/users/somic/events{/privacy}", "received_events_url": "https://api.github.com/users/somic/received_events", "type": "User", "site_admin": false}, "committer": {"login": "somic", "id": 16408, "avatar_url": "https://avatars0.githubusercontent.com/u/16408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/somic", "html_url": "https://github.com/somic", "followers_url": "https://api.github.com/users/somic/followers", "following_url": "https://api.github.com/users/somic/following{/other_user}", "gists_url": "https://api.github.com/users/somic/gists{/gist_id}", "starred_url": "https://api.github.com/users/somic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/somic/subscriptions", "organizations_url": "https://api.github.com/users/somic/orgs", "repos_url": "https://api.github.com/users/somic/repos", "events_url": "https://api.github.com/users/somic/events{/privacy}", "received_events_url": "https://api.github.com/users/somic/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c759ef1016cd52053bc755c749bd9656357920d8", "url": "https://api.github.com/repos/airbnb/synapse/commits/c759ef1016cd52053bc755c749bd9656357920d8", "html_url": "https://github.com/airbnb/synapse/commit/c759ef1016cd52053bc755c749bd9656357920d8"}, {"sha": "61aee69f39bfcc7de7b3a0cad7ea95d13b59c17c", "url": "https://api.github.com/repos/airbnb/synapse/commits/61aee69f39bfcc7de7b3a0cad7ea95d13b59c17c", "html_url": "https://github.com/airbnb/synapse/commit/61aee69f39bfcc7de7b3a0cad7ea95d13b59c17c"}]}, {"sha": "c759ef1016cd52053bc755c749bd9656357920d8", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2017-03-10T23:53:36Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-03-10T23:53:36Z"}, "message": "Merge pull request #224 from airbnb/bump_0_14_1\n\nBump to 0.14.1", "tree": {"sha": "5942456938fbf3c454a3905e3f9bb7b487379089", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/5942456938fbf3c454a3905e3f9bb7b487379089"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/c759ef1016cd52053bc755c749bd9656357920d8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/c759ef1016cd52053bc755c749bd9656357920d8", "html_url": "https://github.com/airbnb/synapse/commit/c759ef1016cd52053bc755c749bd9656357920d8", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/c759ef1016cd52053bc755c749bd9656357920d8/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "34ea03d0b0b317fea7819f1e7ad3e011d8f66778", "url": "https://api.github.com/repos/airbnb/synapse/commits/34ea03d0b0b317fea7819f1e7ad3e011d8f66778", "html_url": "https://github.com/airbnb/synapse/commit/34ea03d0b0b317fea7819f1e7ad3e011d8f66778"}, {"sha": "cff8346466366d7e117b74a895b6dc585636e11c", "url": "https://api.github.com/repos/airbnb/synapse/commits/cff8346466366d7e117b74a895b6dc585636e11c", "html_url": "https://github.com/airbnb/synapse/commit/cff8346466366d7e117b74a895b6dc585636e11c"}]}, {"sha": "cff8346466366d7e117b74a895b6dc585636e11c", "commit": {"author": {"name": "John Billings", "email": "billings@yelp.com", "date": "2017-03-10T23:52:43Z"}, "committer": {"name": "John Billings", "email": "billings@yelp.com", "date": "2017-03-10T23:52:43Z"}, "message": "Bump to 0.14.1", "tree": {"sha": "5942456938fbf3c454a3905e3f9bb7b487379089", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/5942456938fbf3c454a3905e3f9bb7b487379089"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/cff8346466366d7e117b74a895b6dc585636e11c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/cff8346466366d7e117b74a895b6dc585636e11c", "html_url": "https://github.com/airbnb/synapse/commit/cff8346466366d7e117b74a895b6dc585636e11c", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/cff8346466366d7e117b74a895b6dc585636e11c/comments", "author": {"login": "jnb", "id": 514311, "avatar_url": "https://avatars2.githubusercontent.com/u/514311?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnb", "html_url": "https://github.com/jnb", "followers_url": "https://api.github.com/users/jnb/followers", "following_url": "https://api.github.com/users/jnb/following{/other_user}", "gists_url": "https://api.github.com/users/jnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnb/subscriptions", "organizations_url": "https://api.github.com/users/jnb/orgs", "repos_url": "https://api.github.com/users/jnb/repos", "events_url": "https://api.github.com/users/jnb/events{/privacy}", "received_events_url": "https://api.github.com/users/jnb/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jnb", "id": 514311, "avatar_url": "https://avatars2.githubusercontent.com/u/514311?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnb", "html_url": "https://github.com/jnb", "followers_url": "https://api.github.com/users/jnb/followers", "following_url": "https://api.github.com/users/jnb/following{/other_user}", "gists_url": "https://api.github.com/users/jnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnb/subscriptions", "organizations_url": "https://api.github.com/users/jnb/orgs", "repos_url": "https://api.github.com/users/jnb/repos", "events_url": "https://api.github.com/users/jnb/events{/privacy}", "received_events_url": "https://api.github.com/users/jnb/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "34ea03d0b0b317fea7819f1e7ad3e011d8f66778", "url": "https://api.github.com/repos/airbnb/synapse/commits/34ea03d0b0b317fea7819f1e7ad3e011d8f66778", "html_url": "https://github.com/airbnb/synapse/commit/34ea03d0b0b317fea7819f1e7ad3e011d8f66778"}]}, {"sha": "34ea03d0b0b317fea7819f1e7ad3e011d8f66778", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2017-03-10T23:34:39Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-03-10T23:34:39Z"}, "message": "Merge pull request #222 from airbnb/document_nginx_plugin\n\nAdd docs for nginx config generator", "tree": {"sha": "3d7294a3dbdcbb58fc0feb9aef331c38c5023f84", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/3d7294a3dbdcbb58fc0feb9aef331c38c5023f84"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/34ea03d0b0b317fea7819f1e7ad3e011d8f66778", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/34ea03d0b0b317fea7819f1e7ad3e011d8f66778", "html_url": "https://github.com/airbnb/synapse/commit/34ea03d0b0b317fea7819f1e7ad3e011d8f66778", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/34ea03d0b0b317fea7819f1e7ad3e011d8f66778/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "698dbd5378d555b059d105eee0264afd5437551d", "url": "https://api.github.com/repos/airbnb/synapse/commits/698dbd5378d555b059d105eee0264afd5437551d", "html_url": "https://github.com/airbnb/synapse/commit/698dbd5378d555b059d105eee0264afd5437551d"}, {"sha": "f0891d536749f8cbc5162dedc3f5373baeead9bb", "url": "https://api.github.com/repos/airbnb/synapse/commits/f0891d536749f8cbc5162dedc3f5373baeead9bb", "html_url": "https://github.com/airbnb/synapse/commit/f0891d536749f8cbc5162dedc3f5373baeead9bb"}]}, {"sha": "f0891d536749f8cbc5162dedc3f5373baeead9bb", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-03-10T23:14:35Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-03-10T23:14:35Z"}, "message": "Doc clarifications", "tree": {"sha": "ab1a74c96d95bffc72ba65552eb4ffb522340b02", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/ab1a74c96d95bffc72ba65552eb4ffb522340b02"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/f0891d536749f8cbc5162dedc3f5373baeead9bb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/f0891d536749f8cbc5162dedc3f5373baeead9bb", "html_url": "https://github.com/airbnb/synapse/commit/f0891d536749f8cbc5162dedc3f5373baeead9bb", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/f0891d536749f8cbc5162dedc3f5373baeead9bb/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "863946f1e7e070003fd45fbe33ef740055471ed1", "url": "https://api.github.com/repos/airbnb/synapse/commits/863946f1e7e070003fd45fbe33ef740055471ed1", "html_url": "https://github.com/airbnb/synapse/commit/863946f1e7e070003fd45fbe33ef740055471ed1"}]}, {"sha": "698dbd5378d555b059d105eee0264afd5437551d", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2017-03-10T23:08:08Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-03-10T23:08:08Z"}, "message": "Merge pull request #223 from airbnb/nil_port\n\nAllow null bind port", "tree": {"sha": "2b29cd9538edfbdbedfcd7b94f443a12aa0090b3", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/2b29cd9538edfbdbedfcd7b94f443a12aa0090b3"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/698dbd5378d555b059d105eee0264afd5437551d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/698dbd5378d555b059d105eee0264afd5437551d", "html_url": "https://github.com/airbnb/synapse/commit/698dbd5378d555b059d105eee0264afd5437551d", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/698dbd5378d555b059d105eee0264afd5437551d/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4a891bd5833b93ddfdebd246d32623dabf4bad81", "url": "https://api.github.com/repos/airbnb/synapse/commits/4a891bd5833b93ddfdebd246d32623dabf4bad81", "html_url": "https://github.com/airbnb/synapse/commit/4a891bd5833b93ddfdebd246d32623dabf4bad81"}, {"sha": "1ef7f7677615c64176d2970069eac9f3b8175589", "url": "https://api.github.com/repos/airbnb/synapse/commits/1ef7f7677615c64176d2970069eac9f3b8175589", "html_url": "https://github.com/airbnb/synapse/commit/1ef7f7677615c64176d2970069eac9f3b8175589"}]}, {"sha": "1ef7f7677615c64176d2970069eac9f3b8175589", "commit": {"author": {"name": "John Billings", "email": "billings@yelp.com", "date": "2017-03-10T21:51:36Z"}, "committer": {"name": "John Billings", "email": "billings@yelp.com", "date": "2017-03-10T22:25:40Z"}, "message": "Allow null bind port.", "tree": {"sha": "2b29cd9538edfbdbedfcd7b94f443a12aa0090b3", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/2b29cd9538edfbdbedfcd7b94f443a12aa0090b3"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/1ef7f7677615c64176d2970069eac9f3b8175589", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/1ef7f7677615c64176d2970069eac9f3b8175589", "html_url": "https://github.com/airbnb/synapse/commit/1ef7f7677615c64176d2970069eac9f3b8175589", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/1ef7f7677615c64176d2970069eac9f3b8175589/comments", "author": {"login": "jnb", "id": 514311, "avatar_url": "https://avatars2.githubusercontent.com/u/514311?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnb", "html_url": "https://github.com/jnb", "followers_url": "https://api.github.com/users/jnb/followers", "following_url": "https://api.github.com/users/jnb/following{/other_user}", "gists_url": "https://api.github.com/users/jnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnb/subscriptions", "organizations_url": "https://api.github.com/users/jnb/orgs", "repos_url": "https://api.github.com/users/jnb/repos", "events_url": "https://api.github.com/users/jnb/events{/privacy}", "received_events_url": "https://api.github.com/users/jnb/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jnb", "id": 514311, "avatar_url": "https://avatars2.githubusercontent.com/u/514311?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnb", "html_url": "https://github.com/jnb", "followers_url": "https://api.github.com/users/jnb/followers", "following_url": "https://api.github.com/users/jnb/following{/other_user}", "gists_url": "https://api.github.com/users/jnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnb/subscriptions", "organizations_url": "https://api.github.com/users/jnb/orgs", "repos_url": "https://api.github.com/users/jnb/repos", "events_url": "https://api.github.com/users/jnb/events{/privacy}", "received_events_url": "https://api.github.com/users/jnb/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4a891bd5833b93ddfdebd246d32623dabf4bad81", "url": "https://api.github.com/repos/airbnb/synapse/commits/4a891bd5833b93ddfdebd246d32623dabf4bad81", "html_url": "https://github.com/airbnb/synapse/commit/4a891bd5833b93ddfdebd246d32623dabf4bad81"}]}, {"sha": "863946f1e7e070003fd45fbe33ef740055471ed1", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2016-07-22T00:21:14Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-03-10T20:13:38Z"}, "message": "Add docs for nginx config generator", "tree": {"sha": "79d81f145d5785c631c0ed27a2a5936a4843dcfb", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/79d81f145d5785c631c0ed27a2a5936a4843dcfb"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/863946f1e7e070003fd45fbe33ef740055471ed1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/863946f1e7e070003fd45fbe33ef740055471ed1", "html_url": "https://github.com/airbnb/synapse/commit/863946f1e7e070003fd45fbe33ef740055471ed1", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/863946f1e7e070003fd45fbe33ef740055471ed1/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4a891bd5833b93ddfdebd246d32623dabf4bad81", "url": "https://api.github.com/repos/airbnb/synapse/commits/4a891bd5833b93ddfdebd246d32623dabf4bad81", "html_url": "https://github.com/airbnb/synapse/commit/4a891bd5833b93ddfdebd246d32623dabf4bad81"}]}, {"sha": "4a891bd5833b93ddfdebd246d32623dabf4bad81", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-03-09T22:52:40Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-03-09T22:52:40Z"}, "message": "Forgot the Gemfile.lock", "tree": {"sha": "13c6e5d0b7e0339ce3dad0cd92c28630a5d8bd96", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/13c6e5d0b7e0339ce3dad0cd92c28630a5d8bd96"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/4a891bd5833b93ddfdebd246d32623dabf4bad81", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/4a891bd5833b93ddfdebd246d32623dabf4bad81", "html_url": "https://github.com/airbnb/synapse/commit/4a891bd5833b93ddfdebd246d32623dabf4bad81", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/4a891bd5833b93ddfdebd246d32623dabf4bad81/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bc27103a38c624727908599cdf52ba836bc3c5e8", "url": "https://api.github.com/repos/airbnb/synapse/commits/bc27103a38c624727908599cdf52ba836bc3c5e8", "html_url": "https://github.com/airbnb/synapse/commit/bc27103a38c624727908599cdf52ba836bc3c5e8"}]}, {"sha": "bc27103a38c624727908599cdf52ba836bc3c5e8", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-03-09T21:32:11Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-03-09T21:32:11Z"}, "message": "Bump to 0.14.0", "tree": {"sha": "53d63a271870cc6250618199bec90e61c6f26327", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/53d63a271870cc6250618199bec90e61c6f26327"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/bc27103a38c624727908599cdf52ba836bc3c5e8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/bc27103a38c624727908599cdf52ba836bc3c5e8", "html_url": "https://github.com/airbnb/synapse/commit/bc27103a38c624727908599cdf52ba836bc3c5e8", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/bc27103a38c624727908599cdf52ba836bc3c5e8/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "93dc2d3746861b1030388433d8632469df905b0a", "url": "https://api.github.com/repos/airbnb/synapse/commits/93dc2d3746861b1030388433d8632469df905b0a", "html_url": "https://github.com/airbnb/synapse/commit/93dc2d3746861b1030388433d8632469df905b0a"}]}, {"sha": "93dc2d3746861b1030388433d8632469df905b0a", "commit": {"author": {"name": "Igor Serebryany", "email": "igor47@moomers.org", "date": "2017-02-28T00:39:02Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-02-28T00:39:02Z"}, "message": "Merge pull request #203 from airbnb/config_generators\n\nSupport Pluggable Configuration Generators", "tree": {"sha": "7481c34d6a30293f7cbb9945ce4b9bca5917e0c0", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/7481c34d6a30293f7cbb9945ce4b9bca5917e0c0"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/93dc2d3746861b1030388433d8632469df905b0a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/93dc2d3746861b1030388433d8632469df905b0a", "html_url": "https://github.com/airbnb/synapse/commit/93dc2d3746861b1030388433d8632469df905b0a", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/93dc2d3746861b1030388433d8632469df905b0a/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "36114b41f62b8bce61d1bfedbd089ec875851332", "url": "https://api.github.com/repos/airbnb/synapse/commits/36114b41f62b8bce61d1bfedbd089ec875851332", "html_url": "https://github.com/airbnb/synapse/commit/36114b41f62b8bce61d1bfedbd089ec875851332"}, {"sha": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "url": "https://api.github.com/repos/airbnb/synapse/commits/5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "html_url": "https://github.com/airbnb/synapse/commit/5adf28fcf3299632c8bc8e4daa2aea1e568c333a"}]}, {"sha": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-02-17T00:49:44Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-02-17T00:49:44Z"}, "message": "More fixups for igor47", "tree": {"sha": "7481c34d6a30293f7cbb9945ce4b9bca5917e0c0", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/7481c34d6a30293f7cbb9945ce4b9bca5917e0c0"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "html_url": "https://github.com/airbnb/synapse/commit/5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/5adf28fcf3299632c8bc8e4daa2aea1e568c333a/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c4f7713de1516ed50a6e26f0440af1441588472b", "url": "https://api.github.com/repos/airbnb/synapse/commits/c4f7713de1516ed50a6e26f0440af1441588472b", "html_url": "https://github.com/airbnb/synapse/commit/c4f7713de1516ed50a6e26f0440af1441588472b"}]}, {"sha": "c4f7713de1516ed50a6e26f0440af1441588472b", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-02-10T01:00:39Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-02-10T01:00:39Z"}, "message": "Review feedback from igor47\n\nA number of interface changes and renames, as well as a few\nimprovements.", "tree": {"sha": "84f41d3708cf67716ae7d5ec991883ae1c34e607", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/84f41d3708cf67716ae7d5ec991883ae1c34e607"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/c4f7713de1516ed50a6e26f0440af1441588472b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/c4f7713de1516ed50a6e26f0440af1441588472b", "html_url": "https://github.com/airbnb/synapse/commit/c4f7713de1516ed50a6e26f0440af1441588472b", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/c4f7713de1516ed50a6e26f0440af1441588472b/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "url": "https://api.github.com/repos/airbnb/synapse/commits/70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "html_url": "https://github.com/airbnb/synapse/commit/70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa"}]}, {"sha": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-02-05T20:27:27Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-02-05T21:02:25Z"}, "message": "Adds disabled option for HAProxy config generator\n\nThis will allow folks to have HAProxy and other proxies both controlled\nby Synapse with one underlying zookeeper watch", "tree": {"sha": "4c606babf052aa73b7d789fe7aea04693c7517bc", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/4c606babf052aa73b7d789fe7aea04693c7517bc"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "html_url": "https://github.com/airbnb/synapse/commit/70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cae51e8d3a7d09d9171f8e9e6e5d18c6687ad6f3", "url": "https://api.github.com/repos/airbnb/synapse/commits/cae51e8d3a7d09d9171f8e9e6e5d18c6687ad6f3", "html_url": "https://github.com/airbnb/synapse/commit/cae51e8d3a7d09d9171f8e9e6e5d18c6687ad6f3"}]}, {"sha": "cae51e8d3a7d09d9171f8e9e6e5d18c6687ad6f3", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-02-05T18:35:49Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-02-05T18:35:49Z"}, "message": "Fixup bind_option unit test after merge", "tree": {"sha": "ae2844ca21ad81278b0889a386aa12799f2e84d6", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/ae2844ca21ad81278b0889a386aa12799f2e84d6"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/cae51e8d3a7d09d9171f8e9e6e5d18c6687ad6f3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/cae51e8d3a7d09d9171f8e9e6e5d18c6687ad6f3", "html_url": "https://github.com/airbnb/synapse/commit/cae51e8d3a7d09d9171f8e9e6e5d18c6687ad6f3", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/cae51e8d3a7d09d9171f8e9e6e5d18c6687ad6f3/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b613dd7a09c5084182478ce4af10f9088e2a1e5a", "url": "https://api.github.com/repos/airbnb/synapse/commits/b613dd7a09c5084182478ce4af10f9088e2a1e5a", "html_url": "https://github.com/airbnb/synapse/commit/b613dd7a09c5084182478ce4af10f9088e2a1e5a"}]}, {"sha": "b613dd7a09c5084182478ce4af10f9088e2a1e5a", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2016-07-22T19:36:42Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-02-05T18:33:37Z"}, "message": "Fixup validation of options for do_socket, do_write, do_reloads\n\nAlso add some regression tests that fail on old master but pass on this\nbranch", "tree": {"sha": "e367dac74a47cdd5feab71ce8b82b3f071d7851e", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/e367dac74a47cdd5feab71ce8b82b3f071d7851e"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/b613dd7a09c5084182478ce4af10f9088e2a1e5a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/b613dd7a09c5084182478ce4af10f9088e2a1e5a", "html_url": "https://github.com/airbnb/synapse/commit/b613dd7a09c5084182478ce4af10f9088e2a1e5a", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/b613dd7a09c5084182478ce4af10f9088e2a1e5a/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "246cef17a50663eaec3cba0f2cf761a0cf3b9549", "url": "https://api.github.com/repos/airbnb/synapse/commits/246cef17a50663eaec3cba0f2cf761a0cf3b9549", "html_url": "https://github.com/airbnb/synapse/commit/246cef17a50663eaec3cba0f2cf761a0cf3b9549"}]}, {"sha": "246cef17a50663eaec3cba0f2cf761a0cf3b9549", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2016-07-22T19:35:53Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-02-05T18:33:37Z"}, "message": "Address igor47's feedback, mostly doc changes", "tree": {"sha": "fd48a383f5dfd35a51bd67176107fb451725ed56", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/fd48a383f5dfd35a51bd67176107fb451725ed56"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/246cef17a50663eaec3cba0f2cf761a0cf3b9549", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/246cef17a50663eaec3cba0f2cf761a0cf3b9549", "html_url": "https://github.com/airbnb/synapse/commit/246cef17a50663eaec3cba0f2cf761a0cf3b9549", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/246cef17a50663eaec3cba0f2cf761a0cf3b9549/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c0d05f4c68ebb34332ee0695703802c4992632a5", "url": "https://api.github.com/repos/airbnb/synapse/commits/c0d05f4c68ebb34332ee0695703802c4992632a5", "html_url": "https://github.com/airbnb/synapse/commit/c0d05f4c68ebb34332ee0695703802c4992632a5"}]}, {"sha": "c0d05f4c68ebb34332ee0695703802c4992632a5", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2016-07-21T19:22:38Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-02-05T18:33:37Z"}, "message": "Fixup generator readme", "tree": {"sha": "6deafb741a8317dfd73c6843c95b49cb13532c97", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/6deafb741a8317dfd73c6843c95b49cb13532c97"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/c0d05f4c68ebb34332ee0695703802c4992632a5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/c0d05f4c68ebb34332ee0695703802c4992632a5", "html_url": "https://github.com/airbnb/synapse/commit/c0d05f4c68ebb34332ee0695703802c4992632a5", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/c0d05f4c68ebb34332ee0695703802c4992632a5/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "889811801f976279140a796b8a9946d31fc6431e", "url": "https://api.github.com/repos/airbnb/synapse/commits/889811801f976279140a796b8a9946d31fc6431e", "html_url": "https://github.com/airbnb/synapse/commit/889811801f976279140a796b8a9946d31fc6431e"}]}, {"sha": "889811801f976279140a796b8a9946d31fc6431e", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2016-07-21T19:18:46Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-02-05T18:33:37Z"}, "message": "More documentation", "tree": {"sha": "d7fde7c7c48a2663986f379464082e1f191b75cc", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/d7fde7c7c48a2663986f379464082e1f191b75cc"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/889811801f976279140a796b8a9946d31fc6431e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/889811801f976279140a796b8a9946d31fc6431e", "html_url": "https://github.com/airbnb/synapse/commit/889811801f976279140a796b8a9946d31fc6431e", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/889811801f976279140a796b8a9946d31fc6431e/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "305380258ae51ec3b24ddc41f4766955a5a89cfc", "url": "https://api.github.com/repos/airbnb/synapse/commits/305380258ae51ec3b24ddc41f4766955a5a89cfc", "html_url": "https://github.com/airbnb/synapse/commit/305380258ae51ec3b24ddc41f4766955a5a89cfc"}]}, {"sha": "305380258ae51ec3b24ddc41f4766955a5a89cfc", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2016-07-21T19:10:59Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-02-05T18:33:36Z"}, "message": "Changing method to type in config_generator", "tree": {"sha": "2b4eb187e8d4433d4e58fb946a26e81135feac0c", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/2b4eb187e8d4433d4e58fb946a26e81135feac0c"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/305380258ae51ec3b24ddc41f4766955a5a89cfc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/305380258ae51ec3b24ddc41f4766955a5a89cfc", "html_url": "https://github.com/airbnb/synapse/commit/305380258ae51ec3b24ddc41f4766955a5a89cfc", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/305380258ae51ec3b24ddc41f4766955a5a89cfc/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0738eed5e6fde5f618646ce76510552a4ac290ce", "url": "https://api.github.com/repos/airbnb/synapse/commits/0738eed5e6fde5f618646ce76510552a4ac290ce", "html_url": "https://github.com/airbnb/synapse/commit/0738eed5e6fde5f618646ce76510552a4ac290ce"}]}, {"sha": "0738eed5e6fde5f618646ce76510552a4ac290ce", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2016-07-21T18:58:52Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-02-05T18:33:36Z"}, "message": "Clean up name interface in config_generator\n\nAlso removed unneeded attr_readers in config generators", "tree": {"sha": "b0fa8aefeaae84c48a17a1e8bdf7c59b100a3f03", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/b0fa8aefeaae84c48a17a1e8bdf7c59b100a3f03"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/0738eed5e6fde5f618646ce76510552a4ac290ce", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/0738eed5e6fde5f618646ce76510552a4ac290ce", "html_url": "https://github.com/airbnb/synapse/commit/0738eed5e6fde5f618646ce76510552a4ac290ce", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/0738eed5e6fde5f618646ce76510552a4ac290ce/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a20de7ccf45797e96c59acd75fbc0347053f8269", "url": "https://api.github.com/repos/airbnb/synapse/commits/a20de7ccf45797e96c59acd75fbc0347053f8269", "html_url": "https://github.com/airbnb/synapse/commit/a20de7ccf45797e96c59acd75fbc0347053f8269"}]}, {"sha": "a20de7ccf45797e96c59acd75fbc0347053f8269", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2016-07-21T17:33:00Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-02-05T18:33:36Z"}, "message": "Refactoring synapse mocks", "tree": {"sha": "00011bc69bebf1d0f5d0dbd9d1b5b9516487ed0f", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/00011bc69bebf1d0f5d0dbd9d1b5b9516487ed0f"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/a20de7ccf45797e96c59acd75fbc0347053f8269", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/a20de7ccf45797e96c59acd75fbc0347053f8269", "html_url": "https://github.com/airbnb/synapse/commit/a20de7ccf45797e96c59acd75fbc0347053f8269", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/a20de7ccf45797e96c59acd75fbc0347053f8269/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4716e36dda2f83b07d9b38bcf03fea24255ca9bb", "url": "https://api.github.com/repos/airbnb/synapse/commits/4716e36dda2f83b07d9b38bcf03fea24255ca9bb", "html_url": "https://github.com/airbnb/synapse/commit/4716e36dda2f83b07d9b38bcf03fea24255ca9bb"}]}, {"sha": "4716e36dda2f83b07d9b38bcf03fea24255ca9bb", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2016-07-21T17:02:40Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-02-05T18:33:36Z"}, "message": "Port haproxy spec tests to properly mock the new config_generator method\n\nPreviously it reached into ServiceWatcher's .haproxy method directly.", "tree": {"sha": "e0b510919658eb8e68c39c87b97f2c1878e37577", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/e0b510919658eb8e68c39c87b97f2c1878e37577"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/4716e36dda2f83b07d9b38bcf03fea24255ca9bb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/4716e36dda2f83b07d9b38bcf03fea24255ca9bb", "html_url": "https://github.com/airbnb/synapse/commit/4716e36dda2f83b07d9b38bcf03fea24255ca9bb", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/4716e36dda2f83b07d9b38bcf03fea24255ca9bb/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0a8a4e57d1980993e6e002fa8285b6406afd9cf8", "url": "https://api.github.com/repos/airbnb/synapse/commits/0a8a4e57d1980993e6e002fa8285b6406afd9cf8", "html_url": "https://github.com/airbnb/synapse/commit/0a8a4e57d1980993e6e002fa8285b6406afd9cf8"}]}, {"sha": "0a8a4e57d1980993e6e002fa8285b6406afd9cf8", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2016-07-20T17:31:07Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-02-05T18:33:35Z"}, "message": "Rename config_generators_config to generator_config and port haproxy to\nuse it\n\nThis makes the ConfigGenerator code a little less verbose and is\nconsistent with calling ServiceWatchers 'watchers'", "tree": {"sha": "8e9120895cebd82b883a3f14565d0fba7d6cc7b4", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/8e9120895cebd82b883a3f14565d0fba7d6cc7b4"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/0a8a4e57d1980993e6e002fa8285b6406afd9cf8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/0a8a4e57d1980993e6e002fa8285b6406afd9cf8", "html_url": "https://github.com/airbnb/synapse/commit/0a8a4e57d1980993e6e002fa8285b6406afd9cf8", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/0a8a4e57d1980993e6e002fa8285b6406afd9cf8/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b016272d425f962e032389172da4b6cd75d78440", "url": "https://api.github.com/repos/airbnb/synapse/commits/b016272d425f962e032389172da4b6cd75d78440", "html_url": "https://github.com/airbnb/synapse/commit/b016272d425f962e032389172da4b6cd75d78440"}]}, {"sha": "b016272d425f962e032389172da4b6cd75d78440", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2016-07-19T16:52:47Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-02-05T18:29:47Z"}, "message": "Minor typo", "tree": {"sha": "35485d02655f5b3ff365218816e6dc5a8336611c", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/35485d02655f5b3ff365218816e6dc5a8336611c"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/b016272d425f962e032389172da4b6cd75d78440", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/b016272d425f962e032389172da4b6cd75d78440", "html_url": "https://github.com/airbnb/synapse/commit/b016272d425f962e032389172da4b6cd75d78440", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/b016272d425f962e032389172da4b6cd75d78440/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ab4c32c7dbcf132811df968ea0c8f3bf076de031", "url": "https://api.github.com/repos/airbnb/synapse/commits/ab4c32c7dbcf132811df968ea0c8f3bf076de031", "html_url": "https://github.com/airbnb/synapse/commit/ab4c32c7dbcf132811df968ea0c8f3bf076de031"}]}, {"sha": "ab4c32c7dbcf132811df968ea0c8f3bf076de031", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2016-07-19T16:21:40Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-02-05T18:29:47Z"}, "message": "Refactor specs to pass given new interfaces", "tree": {"sha": "32ef6ca0a8881c4ce40059509b55bfa7e34f0ad6", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/32ef6ca0a8881c4ce40059509b55bfa7e34f0ad6"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/ab4c32c7dbcf132811df968ea0c8f3bf076de031", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/ab4c32c7dbcf132811df968ea0c8f3bf076de031", "html_url": "https://github.com/airbnb/synapse/commit/ab4c32c7dbcf132811df968ea0c8f3bf076de031", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/ab4c32c7dbcf132811df968ea0c8f3bf076de031/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3b36abb4ed51c4e2296ce1f726948928593ba6b3", "url": "https://api.github.com/repos/airbnb/synapse/commits/3b36abb4ed51c4e2296ce1f726948928593ba6b3", "html_url": "https://github.com/airbnb/synapse/commit/3b36abb4ed51c4e2296ce1f726948928593ba6b3"}]}, {"sha": "3b36abb4ed51c4e2296ce1f726948928593ba6b3", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2016-07-19T16:20:19Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-02-05T18:29:47Z"}, "message": "Remove all mention of server_port_override and @haproxy from watchers\n\nAs server_port_override was never actuall used by the haproxy config\ngenerator it didn't make sense to live in the watchers.\n\nAlso the deprecated @haproxy was removed", "tree": {"sha": "c2972679a77c5449af4b5bd9b45dc6cfafb5b309", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/c2972679a77c5449af4b5bd9b45dc6cfafb5b309"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/3b36abb4ed51c4e2296ce1f726948928593ba6b3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/3b36abb4ed51c4e2296ce1f726948928593ba6b3", "html_url": "https://github.com/airbnb/synapse/commit/3b36abb4ed51c4e2296ce1f726948928593ba6b3", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/3b36abb4ed51c4e2296ce1f726948928593ba6b3/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "603be68c3818f3d0e3d6c1dfb52a105a7292ee3e", "url": "https://api.github.com/repos/airbnb/synapse/commits/603be68c3818f3d0e3d6c1dfb52a105a7292ee3e", "html_url": "https://github.com/airbnb/synapse/commit/603be68c3818f3d0e3d6c1dfb52a105a7292ee3e"}]}, {"sha": "603be68c3818f3d0e3d6c1dfb52a105a7292ee3e", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2016-07-19T16:19:24Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-02-05T18:29:47Z"}, "message": "Minor refactors to synapse.rb and adding normalize_config_generator_opts\n\nConfig watchers can now change the opt dict apssed to them from watchers\nvia the normalize_config_generator_opts callback", "tree": {"sha": "37150e6e57c4ceb569e631887a1ea9b38f164643", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/37150e6e57c4ceb569e631887a1ea9b38f164643"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/603be68c3818f3d0e3d6c1dfb52a105a7292ee3e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/603be68c3818f3d0e3d6c1dfb52a105a7292ee3e", "html_url": "https://github.com/airbnb/synapse/commit/603be68c3818f3d0e3d6c1dfb52a105a7292ee3e", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/603be68c3818f3d0e3d6c1dfb52a105a7292ee3e/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b2479f3b46f48cc6a6e6dc8fbfb5f0022da1bf72", "url": "https://api.github.com/repos/airbnb/synapse/commits/b2479f3b46f48cc6a6e6dc8fbfb5f0022da1bf72", "html_url": "https://github.com/airbnb/synapse/commit/b2479f3b46f48cc6a6e6dc8fbfb5f0022da1bf72"}]}, {"sha": "b2479f3b46f48cc6a6e6dc8fbfb5f0022da1bf72", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2016-07-19T15:43:56Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-02-05T18:29:47Z"}, "message": "Cleanup the services documentation a bit more", "tree": {"sha": "2f5d40d691e7b811eb83c4334d5007a587b2e0ed", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/2f5d40d691e7b811eb83c4334d5007a587b2e0ed"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/b2479f3b46f48cc6a6e6dc8fbfb5f0022da1bf72", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/b2479f3b46f48cc6a6e6dc8fbfb5f0022da1bf72", "html_url": "https://github.com/airbnb/synapse/commit/b2479f3b46f48cc6a6e6dc8fbfb5f0022da1bf72", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/b2479f3b46f48cc6a6e6dc8fbfb5f0022da1bf72/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a641ff5f64d27101ca84709fae39c137ec0b70b8", "url": "https://api.github.com/repos/airbnb/synapse/commits/a641ff5f64d27101ca84709fae39c137ec0b70b8", "html_url": "https://github.com/airbnb/synapse/commit/a641ff5f64d27101ca84709fae39c137ec0b70b8"}]}, {"sha": "a641ff5f64d27101ca84709fae39c137ec0b70b8", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2016-07-19T04:06:05Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-02-05T18:29:46Z"}, "message": "Add documentation to the README", "tree": {"sha": "dfce9942de8c11566a17c75da3202a60b54f2d83", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/dfce9942de8c11566a17c75da3202a60b54f2d83"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/a641ff5f64d27101ca84709fae39c137ec0b70b8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/a641ff5f64d27101ca84709fae39c137ec0b70b8", "html_url": "https://github.com/airbnb/synapse/commit/a641ff5f64d27101ca84709fae39c137ec0b70b8", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/a641ff5f64d27101ca84709fae39c137ec0b70b8/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6339f7ae5b2702c6fbd93e17b1f318c7cbfa426e", "url": "https://api.github.com/repos/airbnb/synapse/commits/6339f7ae5b2702c6fbd93e17b1f318c7cbfa426e", "html_url": "https://github.com/airbnb/synapse/commit/6339f7ae5b2702c6fbd93e17b1f318c7cbfa426e"}]}, {"sha": "6339f7ae5b2702c6fbd93e17b1f318c7cbfa426e", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2016-07-15T03:22:18Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2017-02-05T18:28:58Z"}, "message": "Support pluggable Configuration Generators\n\nJust like we can support multiple service watchers, now we can support\nmultiple configuration generators which can output in whatever format we\nwant", "tree": {"sha": "bc245b72a2cbccc8f7244c413115746e71283cb7", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/bc245b72a2cbccc8f7244c413115746e71283cb7"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/6339f7ae5b2702c6fbd93e17b1f318c7cbfa426e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/6339f7ae5b2702c6fbd93e17b1f318c7cbfa426e", "html_url": "https://github.com/airbnb/synapse/commit/6339f7ae5b2702c6fbd93e17b1f318c7cbfa426e", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/6339f7ae5b2702c6fbd93e17b1f318c7cbfa426e/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "36114b41f62b8bce61d1bfedbd089ec875851332", "url": "https://api.github.com/repos/airbnb/synapse/commits/36114b41f62b8bce61d1bfedbd089ec875851332", "html_url": "https://github.com/airbnb/synapse/commit/36114b41f62b8bce61d1bfedbd089ec875851332"}]}, {"sha": "36114b41f62b8bce61d1bfedbd089ec875851332", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2017-01-23T04:38:42Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-01-23T04:38:42Z"}, "message": "Merge pull request #218 from femnad/readme-add-missing-quote\n\nAdd Missing Quotation Mark in the Sample Config", "tree": {"sha": "cbf75c2598c31cc04cf2814abf8e677201f8da7a", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/cbf75c2598c31cc04cf2814abf8e677201f8da7a"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/36114b41f62b8bce61d1bfedbd089ec875851332", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/36114b41f62b8bce61d1bfedbd089ec875851332", "html_url": "https://github.com/airbnb/synapse/commit/36114b41f62b8bce61d1bfedbd089ec875851332", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/36114b41f62b8bce61d1bfedbd089ec875851332/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c5ed190b95b43353c3cd470e968d8dab0e8b1289", "url": "https://api.github.com/repos/airbnb/synapse/commits/c5ed190b95b43353c3cd470e968d8dab0e8b1289", "html_url": "https://github.com/airbnb/synapse/commit/c5ed190b95b43353c3cd470e968d8dab0e8b1289"}, {"sha": "906fc0cc98b4cafb5c2a134389d06940f1582d57", "url": "https://api.github.com/repos/airbnb/synapse/commits/906fc0cc98b4cafb5c2a134389d06940f1582d57", "html_url": "https://github.com/airbnb/synapse/commit/906fc0cc98b4cafb5c2a134389d06940f1582d57"}]}, {"sha": "906fc0cc98b4cafb5c2a134389d06940f1582d57", "commit": {"author": {"name": "Fahri Cihan Demirci", "email": "femnad@users.noreply.github.com", "date": "2017-01-22T12:10:39Z"}, "committer": {"name": "Fahri Cihan Demirci", "email": "femnad@users.noreply.github.com", "date": "2017-01-22T12:21:56Z"}, "message": "Add Missing Quotation Mark in the Sample Config\n\n* The sample configuration file provided under the section `HAProxy\n  shared HTTP Frontend` is not a valid YAML file because of a missing\n  quotation mark. This patch adds the missing quotation mark so that the\n  configuration is usable as it is.", "tree": {"sha": "cbf75c2598c31cc04cf2814abf8e677201f8da7a", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/cbf75c2598c31cc04cf2814abf8e677201f8da7a"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/906fc0cc98b4cafb5c2a134389d06940f1582d57", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/906fc0cc98b4cafb5c2a134389d06940f1582d57", "html_url": "https://github.com/airbnb/synapse/commit/906fc0cc98b4cafb5c2a134389d06940f1582d57", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/906fc0cc98b4cafb5c2a134389d06940f1582d57/comments", "author": {"login": "femnad", "id": 1352288, "avatar_url": "https://avatars3.githubusercontent.com/u/1352288?v=4", "gravatar_id": "", "url": "https://api.github.com/users/femnad", "html_url": "https://github.com/femnad", "followers_url": "https://api.github.com/users/femnad/followers", "following_url": "https://api.github.com/users/femnad/following{/other_user}", "gists_url": "https://api.github.com/users/femnad/gists{/gist_id}", "starred_url": "https://api.github.com/users/femnad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/femnad/subscriptions", "organizations_url": "https://api.github.com/users/femnad/orgs", "repos_url": "https://api.github.com/users/femnad/repos", "events_url": "https://api.github.com/users/femnad/events{/privacy}", "received_events_url": "https://api.github.com/users/femnad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "femnad", "id": 1352288, "avatar_url": "https://avatars3.githubusercontent.com/u/1352288?v=4", "gravatar_id": "", "url": "https://api.github.com/users/femnad", "html_url": "https://github.com/femnad", "followers_url": "https://api.github.com/users/femnad/followers", "following_url": "https://api.github.com/users/femnad/following{/other_user}", "gists_url": "https://api.github.com/users/femnad/gists{/gist_id}", "starred_url": "https://api.github.com/users/femnad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/femnad/subscriptions", "organizations_url": "https://api.github.com/users/femnad/orgs", "repos_url": "https://api.github.com/users/femnad/repos", "events_url": "https://api.github.com/users/femnad/events{/privacy}", "received_events_url": "https://api.github.com/users/femnad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c5ed190b95b43353c3cd470e968d8dab0e8b1289", "url": "https://api.github.com/repos/airbnb/synapse/commits/c5ed190b95b43353c3cd470e968d8dab0e8b1289", "html_url": "https://github.com/airbnb/synapse/commit/c5ed190b95b43353c3cd470e968d8dab0e8b1289"}]}, {"sha": "c5ed190b95b43353c3cd470e968d8dab0e8b1289", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2017-01-18T18:45:56Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-01-18T18:45:56Z"}, "message": "Merge pull request #216 from sjankowski-r7/Adding-bind-options-param\n\nAdding additional bind_options param to support ssl configuration", "tree": {"sha": "a6560138198122cb47d7994ea93fe47b49638256", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/a6560138198122cb47d7994ea93fe47b49638256"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/c5ed190b95b43353c3cd470e968d8dab0e8b1289", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/c5ed190b95b43353c3cd470e968d8dab0e8b1289", "html_url": "https://github.com/airbnb/synapse/commit/c5ed190b95b43353c3cd470e968d8dab0e8b1289", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/c5ed190b95b43353c3cd470e968d8dab0e8b1289/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "45f4d81e0f858bb3b15956f65d2ce8de492f92bb", "url": "https://api.github.com/repos/airbnb/synapse/commits/45f4d81e0f858bb3b15956f65d2ce8de492f92bb", "html_url": "https://github.com/airbnb/synapse/commit/45f4d81e0f858bb3b15956f65d2ce8de492f92bb"}, {"sha": "37dba653dfb1cc60fd99b88a651f2a1b9887b75e", "url": "https://api.github.com/repos/airbnb/synapse/commits/37dba653dfb1cc60fd99b88a651f2a1b9887b75e", "html_url": "https://github.com/airbnb/synapse/commit/37dba653dfb1cc60fd99b88a651f2a1b9887b75e"}]}, {"sha": "37dba653dfb1cc60fd99b88a651f2a1b9887b75e", "commit": {"author": {"name": "Sebastian Jankowski", "email": "sebastian_jankowski@rapid7.com", "date": "2016-11-25T16:44:20Z"}, "committer": {"name": "Sebastian Jankowski", "email": "sebastian_jankowski@rapid7.com", "date": "2016-11-25T16:44:20Z"}, "message": "Adding additional bind_options param to support ssl configuration", "tree": {"sha": "a6560138198122cb47d7994ea93fe47b49638256", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/a6560138198122cb47d7994ea93fe47b49638256"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/37dba653dfb1cc60fd99b88a651f2a1b9887b75e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/37dba653dfb1cc60fd99b88a651f2a1b9887b75e", "html_url": "https://github.com/airbnb/synapse/commit/37dba653dfb1cc60fd99b88a651f2a1b9887b75e", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/37dba653dfb1cc60fd99b88a651f2a1b9887b75e/comments", "author": {"login": "sjankowski-r7", "id": 16778367, "avatar_url": "https://avatars1.githubusercontent.com/u/16778367?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sjankowski-r7", "html_url": "https://github.com/sjankowski-r7", "followers_url": "https://api.github.com/users/sjankowski-r7/followers", "following_url": "https://api.github.com/users/sjankowski-r7/following{/other_user}", "gists_url": "https://api.github.com/users/sjankowski-r7/gists{/gist_id}", "starred_url": "https://api.github.com/users/sjankowski-r7/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sjankowski-r7/subscriptions", "organizations_url": "https://api.github.com/users/sjankowski-r7/orgs", "repos_url": "https://api.github.com/users/sjankowski-r7/repos", "events_url": "https://api.github.com/users/sjankowski-r7/events{/privacy}", "received_events_url": "https://api.github.com/users/sjankowski-r7/received_events", "type": "User", "site_admin": false}, "committer": {"login": "sjankowski-r7", "id": 16778367, "avatar_url": "https://avatars1.githubusercontent.com/u/16778367?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sjankowski-r7", "html_url": "https://github.com/sjankowski-r7", "followers_url": "https://api.github.com/users/sjankowski-r7/followers", "following_url": "https://api.github.com/users/sjankowski-r7/following{/other_user}", "gists_url": "https://api.github.com/users/sjankowski-r7/gists{/gist_id}", "starred_url": "https://api.github.com/users/sjankowski-r7/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sjankowski-r7/subscriptions", "organizations_url": "https://api.github.com/users/sjankowski-r7/orgs", "repos_url": "https://api.github.com/users/sjankowski-r7/repos", "events_url": "https://api.github.com/users/sjankowski-r7/events{/privacy}", "received_events_url": "https://api.github.com/users/sjankowski-r7/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "45f4d81e0f858bb3b15956f65d2ce8de492f92bb", "url": "https://api.github.com/repos/airbnb/synapse/commits/45f4d81e0f858bb3b15956f65d2ce8de492f92bb", "html_url": "https://github.com/airbnb/synapse/commit/45f4d81e0f858bb3b15956f65d2ce8de492f92bb"}]}, {"sha": "45f4d81e0f858bb3b15956f65d2ce8de492f92bb", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2016-11-08T22:26:06Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2016-11-08T22:26:06Z"}, "message": "Merge pull request #214 from airbnb/rpai/ruby_23\n\ntest against ruby 2.3 and latest rubies", "tree": {"sha": "b7a5f7a710257c56f74b584eade0db2054e7da10", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/b7a5f7a710257c56f74b584eade0db2054e7da10"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/45f4d81e0f858bb3b15956f65d2ce8de492f92bb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/45f4d81e0f858bb3b15956f65d2ce8de492f92bb", "html_url": "https://github.com/airbnb/synapse/commit/45f4d81e0f858bb3b15956f65d2ce8de492f92bb", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/45f4d81e0f858bb3b15956f65d2ce8de492f92bb/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "794eec32ae1316319cbe5ec090e0c7dace898245", "url": "https://api.github.com/repos/airbnb/synapse/commits/794eec32ae1316319cbe5ec090e0c7dace898245", "html_url": "https://github.com/airbnb/synapse/commit/794eec32ae1316319cbe5ec090e0c7dace898245"}, {"sha": "154ea936db030c8d51406a671b4877921a475697", "url": "https://api.github.com/repos/airbnb/synapse/commits/154ea936db030c8d51406a671b4877921a475697", "html_url": "https://github.com/airbnb/synapse/commit/154ea936db030c8d51406a671b4877921a475697"}]}, {"sha": "154ea936db030c8d51406a671b4877921a475697", "commit": {"author": {"name": "Ricky Pai", "email": "ricky.pai@airbnb.com", "date": "2016-11-08T21:36:27Z"}, "committer": {"name": "Ricky Pai", "email": "ricky.pai@airbnb.com", "date": "2016-11-08T21:36:27Z"}, "message": "test against ruby 2.3 and latest rubies", "tree": {"sha": "b7a5f7a710257c56f74b584eade0db2054e7da10", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/b7a5f7a710257c56f74b584eade0db2054e7da10"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/154ea936db030c8d51406a671b4877921a475697", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/154ea936db030c8d51406a671b4877921a475697", "html_url": "https://github.com/airbnb/synapse/commit/154ea936db030c8d51406a671b4877921a475697", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/154ea936db030c8d51406a671b4877921a475697/comments", "author": {"login": "rickypai", "id": 1469579, "avatar_url": "https://avatars2.githubusercontent.com/u/1469579?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rickypai", "html_url": "https://github.com/rickypai", "followers_url": "https://api.github.com/users/rickypai/followers", "following_url": "https://api.github.com/users/rickypai/following{/other_user}", "gists_url": "https://api.github.com/users/rickypai/gists{/gist_id}", "starred_url": "https://api.github.com/users/rickypai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rickypai/subscriptions", "organizations_url": "https://api.github.com/users/rickypai/orgs", "repos_url": "https://api.github.com/users/rickypai/repos", "events_url": "https://api.github.com/users/rickypai/events{/privacy}", "received_events_url": "https://api.github.com/users/rickypai/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rickypai", "id": 1469579, "avatar_url": "https://avatars2.githubusercontent.com/u/1469579?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rickypai", "html_url": "https://github.com/rickypai", "followers_url": "https://api.github.com/users/rickypai/followers", "following_url": "https://api.github.com/users/rickypai/following{/other_user}", "gists_url": "https://api.github.com/users/rickypai/gists{/gist_id}", "starred_url": "https://api.github.com/users/rickypai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rickypai/subscriptions", "organizations_url": "https://api.github.com/users/rickypai/orgs", "repos_url": "https://api.github.com/users/rickypai/repos", "events_url": "https://api.github.com/users/rickypai/events{/privacy}", "received_events_url": "https://api.github.com/users/rickypai/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "794eec32ae1316319cbe5ec090e0c7dace898245", "url": "https://api.github.com/repos/airbnb/synapse/commits/794eec32ae1316319cbe5ec090e0c7dace898245", "html_url": "https://github.com/airbnb/synapse/commit/794eec32ae1316319cbe5ec090e0c7dace898245"}]}, {"sha": "794eec32ae1316319cbe5ec090e0c7dace898245", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2016-11-07T06:52:33Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2016-11-07T06:52:33Z"}, "message": "Merge pull request #213 from ronbak/feram-patches\n\nMinor Fixes", "tree": {"sha": "cc67c1e57e010764386d15649b742dcb71efeb0a", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/cc67c1e57e010764386d15649b742dcb71efeb0a"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/794eec32ae1316319cbe5ec090e0c7dace898245", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/794eec32ae1316319cbe5ec090e0c7dace898245", "html_url": "https://github.com/airbnb/synapse/commit/794eec32ae1316319cbe5ec090e0c7dace898245", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/794eec32ae1316319cbe5ec090e0c7dace898245/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e9f6b393bde394f3cbe0c45d6656ac8978e2cb0c", "url": "https://api.github.com/repos/airbnb/synapse/commits/e9f6b393bde394f3cbe0c45d6656ac8978e2cb0c", "html_url": "https://github.com/airbnb/synapse/commit/e9f6b393bde394f3cbe0c45d6656ac8978e2cb0c"}, {"sha": "1b8ed1a3e68aa35e8913c2a46f3f36668add3c92", "url": "https://api.github.com/repos/airbnb/synapse/commits/1b8ed1a3e68aa35e8913c2a46f3f36668add3c92", "html_url": "https://github.com/airbnb/synapse/commit/1b8ed1a3e68aa35e8913c2a46f3f36668add3c92"}]}, {"sha": "1b8ed1a3e68aa35e8913c2a46f3f36668add3c92", "commit": {"author": {"name": "Feram", "email": "feram@feram.co", "date": "2016-11-05T23:50:08Z"}, "committer": {"name": "Adrian Sieber", "email": "mail@adriansieber.com", "date": "2016-11-06T01:20:30Z"}, "message": "Fix typo sevice", "tree": {"sha": "cc67c1e57e010764386d15649b742dcb71efeb0a", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/cc67c1e57e010764386d15649b742dcb71efeb0a"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/1b8ed1a3e68aa35e8913c2a46f3f36668add3c92", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/1b8ed1a3e68aa35e8913c2a46f3f36668add3c92", "html_url": "https://github.com/airbnb/synapse/commit/1b8ed1a3e68aa35e8913c2a46f3f36668add3c92", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/1b8ed1a3e68aa35e8913c2a46f3f36668add3c92/comments", "author": {"login": "ferambot", "id": 18504676, "avatar_url": "https://avatars2.githubusercontent.com/u/18504676?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ferambot", "html_url": "https://github.com/ferambot", "followers_url": "https://api.github.com/users/ferambot/followers", "following_url": "https://api.github.com/users/ferambot/following{/other_user}", "gists_url": "https://api.github.com/users/ferambot/gists{/gist_id}", "starred_url": "https://api.github.com/users/ferambot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ferambot/subscriptions", "organizations_url": "https://api.github.com/users/ferambot/orgs", "repos_url": "https://api.github.com/users/ferambot/repos", "events_url": "https://api.github.com/users/ferambot/events{/privacy}", "received_events_url": "https://api.github.com/users/ferambot/received_events", "type": "User", "site_admin": false}, "committer": {"login": "adius", "id": 969983, "avatar_url": "https://avatars2.githubusercontent.com/u/969983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adius", "html_url": "https://github.com/adius", "followers_url": "https://api.github.com/users/adius/followers", "following_url": "https://api.github.com/users/adius/following{/other_user}", "gists_url": "https://api.github.com/users/adius/gists{/gist_id}", "starred_url": "https://api.github.com/users/adius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adius/subscriptions", "organizations_url": "https://api.github.com/users/adius/orgs", "repos_url": "https://api.github.com/users/adius/repos", "events_url": "https://api.github.com/users/adius/events{/privacy}", "received_events_url": "https://api.github.com/users/adius/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e9f6b393bde394f3cbe0c45d6656ac8978e2cb0c", "url": "https://api.github.com/repos/airbnb/synapse/commits/e9f6b393bde394f3cbe0c45d6656ac8978e2cb0c", "html_url": "https://github.com/airbnb/synapse/commit/e9f6b393bde394f3cbe0c45d6656ac8978e2cb0c"}]}, {"sha": "61aee69f39bfcc7de7b3a0cad7ea95d13b59c17c", "commit": {"author": {"name": "Anton Kuraev", "email": "anton.kuraev@airbnb.com", "date": "2016-10-18T20:33:59Z"}, "committer": {"name": "Anton Kuraev", "email": "anton.kuraev@airbnb.com", "date": "2016-11-05T06:50:15Z"}, "message": "[haproxy] Avoid unnecessary HAProxy re-configuration.\n\nCurrently, on every topology update event Synapse sends re-enable commandto HAProxy for\nevery live backend instance, even though that instance may already be UP. The number of\nsuch backend instances can be quite significant, so after every single topology update\nSynapse may send thousands of re-enable commands which are essentially noops.\n\nThe following changes were made to address the problem:\n\n1. HAProxy command batching: commands are now sent in groups of 4 or less, which reduces\n   overall number of syscalls per topology update event.\n\n2. Re-enable command is now sent only if a given instance status is not UP.\n\n3. Minor performance improvements in HAProxy stats parsing code (~35% time/cpu savings).", "tree": {"sha": "812ad2d4ef495eb73bc64adcfccb6280b50a4b84", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/812ad2d4ef495eb73bc64adcfccb6280b50a4b84"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/61aee69f39bfcc7de7b3a0cad7ea95d13b59c17c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/61aee69f39bfcc7de7b3a0cad7ea95d13b59c17c", "html_url": "https://github.com/airbnb/synapse/commit/61aee69f39bfcc7de7b3a0cad7ea95d13b59c17c", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/61aee69f39bfcc7de7b3a0cad7ea95d13b59c17c/comments", "author": null, "committer": null, "parents": [{"sha": "e9f6b393bde394f3cbe0c45d6656ac8978e2cb0c", "url": "https://api.github.com/repos/airbnb/synapse/commits/e9f6b393bde394f3cbe0c45d6656ac8978e2cb0c", "html_url": "https://github.com/airbnb/synapse/commit/e9f6b393bde394f3cbe0c45d6656ac8978e2cb0c"}]}, {"sha": "e9f6b393bde394f3cbe0c45d6656ac8978e2cb0c", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2016-09-01T06:12:12Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2016-09-01T06:12:12Z"}, "message": "Bump to 0.13.8", "tree": {"sha": "d124669e933df4affa42f3741cc42796cad65bb5", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/d124669e933df4affa42f3741cc42796cad65bb5"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/e9f6b393bde394f3cbe0c45d6656ac8978e2cb0c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/e9f6b393bde394f3cbe0c45d6656ac8978e2cb0c", "html_url": "https://github.com/airbnb/synapse/commit/e9f6b393bde394f3cbe0c45d6656ac8978e2cb0c", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/e9f6b393bde394f3cbe0c45d6656ac8978e2cb0c/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "dd892c9aabfb4b790dbd94ff7010bbd3be210b41", "url": "https://api.github.com/repos/airbnb/synapse/commits/dd892c9aabfb4b790dbd94ff7010bbd3be210b41", "html_url": "https://github.com/airbnb/synapse/commit/dd892c9aabfb4b790dbd94ff7010bbd3be210b41"}]}, {"sha": "dd892c9aabfb4b790dbd94ff7010bbd3be210b41", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2016-08-03T15:59:21Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2016-08-03T15:59:21Z"}, "message": "Merge pull request #206 from airbnb/resilient_zk_watcher\n\nResilient zk watcher", "tree": {"sha": "79151000dbd7d59ad7c28e651193c82af4c40195", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/79151000dbd7d59ad7c28e651193c82af4c40195"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/dd892c9aabfb4b790dbd94ff7010bbd3be210b41", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/dd892c9aabfb4b790dbd94ff7010bbd3be210b41", "html_url": "https://github.com/airbnb/synapse/commit/dd892c9aabfb4b790dbd94ff7010bbd3be210b41", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/dd892c9aabfb4b790dbd94ff7010bbd3be210b41/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3390fbdc4bbbb3b50b64811238bb6906b9700617", "url": "https://api.github.com/repos/airbnb/synapse/commits/3390fbdc4bbbb3b50b64811238bb6906b9700617", "html_url": "https://github.com/airbnb/synapse/commit/3390fbdc4bbbb3b50b64811238bb6906b9700617"}, {"sha": "cfa3feb84dc4279f45d2fecc60626600bda8718b", "url": "https://api.github.com/repos/airbnb/synapse/commits/cfa3feb84dc4279f45d2fecc60626600bda8718b", "html_url": "https://github.com/airbnb/synapse/commit/cfa3feb84dc4279f45d2fecc60626600bda8718b"}]}, {"sha": "cfa3feb84dc4279f45d2fecc60626600bda8718b", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2016-08-03T15:50:03Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2016-08-03T15:50:03Z"}, "message": "Add an explanatory comment and better log message", "tree": {"sha": "79151000dbd7d59ad7c28e651193c82af4c40195", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/79151000dbd7d59ad7c28e651193c82af4c40195"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/cfa3feb84dc4279f45d2fecc60626600bda8718b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/cfa3feb84dc4279f45d2fecc60626600bda8718b", "html_url": "https://github.com/airbnb/synapse/commit/cfa3feb84dc4279f45d2fecc60626600bda8718b", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/cfa3feb84dc4279f45d2fecc60626600bda8718b/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "405d746d0cd8cfc7b272a00773e36056b035aca8", "url": "https://api.github.com/repos/airbnb/synapse/commits/405d746d0cd8cfc7b272a00773e36056b035aca8", "html_url": "https://github.com/airbnb/synapse/commit/405d746d0cd8cfc7b272a00773e36056b035aca8"}]}, {"sha": "405d746d0cd8cfc7b272a00773e36056b035aca8", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2016-08-03T02:35:29Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2016-08-03T02:37:38Z"}, "message": "Fix the race condition in the Zookeeper watcher", "tree": {"sha": "7ed6e2baad5c1f53f3fc374f5c322b75f2658077", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/7ed6e2baad5c1f53f3fc374f5c322b75f2658077"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/405d746d0cd8cfc7b272a00773e36056b035aca8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/405d746d0cd8cfc7b272a00773e36056b035aca8", "html_url": "https://github.com/airbnb/synapse/commit/405d746d0cd8cfc7b272a00773e36056b035aca8", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/405d746d0cd8cfc7b272a00773e36056b035aca8/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e836ff7c372118a9950ddf391d22ef9be67943e0", "url": "https://api.github.com/repos/airbnb/synapse/commits/e836ff7c372118a9950ddf391d22ef9be67943e0", "html_url": "https://github.com/airbnb/synapse/commit/e836ff7c372118a9950ddf391d22ef9be67943e0"}]}, {"sha": "e836ff7c372118a9950ddf391d22ef9be67943e0", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2016-08-03T02:34:56Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2016-08-03T02:37:38Z"}, "message": "Adding a test of the race condition", "tree": {"sha": "b5c068ed293e603edb5650cbd082db496d31aec6", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/b5c068ed293e603edb5650cbd082db496d31aec6"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/e836ff7c372118a9950ddf391d22ef9be67943e0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/e836ff7c372118a9950ddf391d22ef9be67943e0", "html_url": "https://github.com/airbnb/synapse/commit/e836ff7c372118a9950ddf391d22ef9be67943e0", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/e836ff7c372118a9950ddf391d22ef9be67943e0/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3390fbdc4bbbb3b50b64811238bb6906b9700617", "url": "https://api.github.com/repos/airbnb/synapse/commits/3390fbdc4bbbb3b50b64811238bb6906b9700617", "html_url": "https://github.com/airbnb/synapse/commit/3390fbdc4bbbb3b50b64811238bb6906b9700617"}]}, {"sha": "3390fbdc4bbbb3b50b64811238bb6906b9700617", "commit": {"author": {"name": "Igor Serebryany", "email": "igor47@moomers.org", "date": "2016-07-18T23:10:45Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2016-07-18T23:10:45Z"}, "message": "Merge pull request #204 from airbnb/bump_version_to_v0.13.7\n\nbump version to v0.13.7", "tree": {"sha": "752dcb0b7dc924b824cd5ab74bede2f4d26c1398", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/752dcb0b7dc924b824cd5ab74bede2f4d26c1398"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/3390fbdc4bbbb3b50b64811238bb6906b9700617", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/3390fbdc4bbbb3b50b64811238bb6906b9700617", "html_url": "https://github.com/airbnb/synapse/commit/3390fbdc4bbbb3b50b64811238bb6906b9700617", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/3390fbdc4bbbb3b50b64811238bb6906b9700617/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b5e5ebc04f87efcf9a066f6180270759678b2ca3", "url": "https://api.github.com/repos/airbnb/synapse/commits/b5e5ebc04f87efcf9a066f6180270759678b2ca3", "html_url": "https://github.com/airbnb/synapse/commit/b5e5ebc04f87efcf9a066f6180270759678b2ca3"}, {"sha": "e12c002fbc2b15e630406f166202b003174bfeb7", "url": "https://api.github.com/repos/airbnb/synapse/commits/e12c002fbc2b15e630406f166202b003174bfeb7", "html_url": "https://github.com/airbnb/synapse/commit/e12c002fbc2b15e630406f166202b003174bfeb7"}]}, {"sha": "e12c002fbc2b15e630406f166202b003174bfeb7", "commit": {"author": {"name": "Igor Serebryany", "email": "igor.serebryany@airbnb.com", "date": "2016-07-18T22:38:05Z"}, "committer": {"name": "Igor Serebryany", "email": "igor.serebryany@airbnb.com", "date": "2016-07-18T22:38:22Z"}, "message": "bump version to v0.13.7", "tree": {"sha": "752dcb0b7dc924b824cd5ab74bede2f4d26c1398", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/752dcb0b7dc924b824cd5ab74bede2f4d26c1398"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/e12c002fbc2b15e630406f166202b003174bfeb7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/e12c002fbc2b15e630406f166202b003174bfeb7", "html_url": "https://github.com/airbnb/synapse/commit/e12c002fbc2b15e630406f166202b003174bfeb7", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/e12c002fbc2b15e630406f166202b003174bfeb7/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b5e5ebc04f87efcf9a066f6180270759678b2ca3", "url": "https://api.github.com/repos/airbnb/synapse/commits/b5e5ebc04f87efcf9a066f6180270759678b2ca3", "html_url": "https://github.com/airbnb/synapse/commit/b5e5ebc04f87efcf9a066f6180270759678b2ca3"}]}, {"sha": "b5e5ebc04f87efcf9a066f6180270759678b2ca3", "commit": {"author": {"name": "Igor Serebryany", "email": "igor47@moomers.org", "date": "2016-07-18T22:37:08Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2016-07-18T22:37:08Z"}, "message": "Merge pull request #202 from airbnb/refactor_label_filter\n\nRefactor label filter", "tree": {"sha": "e837ff1ab7e3f19e1196f0ac25d385c4c447b3ad", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/e837ff1ab7e3f19e1196f0ac25d385c4c447b3ad"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/b5e5ebc04f87efcf9a066f6180270759678b2ca3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/b5e5ebc04f87efcf9a066f6180270759678b2ca3", "html_url": "https://github.com/airbnb/synapse/commit/b5e5ebc04f87efcf9a066f6180270759678b2ca3", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/b5e5ebc04f87efcf9a066f6180270759678b2ca3/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "64ddbbd6140d337d65cf0f31fff9ea004aca779e", "url": "https://api.github.com/repos/airbnb/synapse/commits/64ddbbd6140d337d65cf0f31fff9ea004aca779e", "html_url": "https://github.com/airbnb/synapse/commit/64ddbbd6140d337d65cf0f31fff9ea004aca779e"}, {"sha": "1b02254a5bb10f12111039bf2bb606f12d800dc5", "url": "https://api.github.com/repos/airbnb/synapse/commits/1b02254a5bb10f12111039bf2bb606f12d800dc5", "html_url": "https://github.com/airbnb/synapse/commit/1b02254a5bb10f12111039bf2bb606f12d800dc5"}]}, {"sha": "1b02254a5bb10f12111039bf2bb606f12d800dc5", "commit": {"author": {"name": "Igor Serebryany", "email": "igor.serebryany@airbnb.com", "date": "2016-06-27T19:52:36Z"}, "committer": {"name": "Igor Serebryany", "email": "igor.serebryany@airbnb.com", "date": "2016-06-27T20:13:52Z"}, "message": "[spec] refactor all labeling specs to use factory", "tree": {"sha": "e837ff1ab7e3f19e1196f0ac25d385c4c447b3ad", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/e837ff1ab7e3f19e1196f0ac25d385c4c447b3ad"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/1b02254a5bb10f12111039bf2bb606f12d800dc5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/1b02254a5bb10f12111039bf2bb606f12d800dc5", "html_url": "https://github.com/airbnb/synapse/commit/1b02254a5bb10f12111039bf2bb606f12d800dc5", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/1b02254a5bb10f12111039bf2bb606f12d800dc5/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3681b1d4c7d73b1ba4bb6a210d60e633db2d2caa", "url": "https://api.github.com/repos/airbnb/synapse/commits/3681b1d4c7d73b1ba4bb6a210d60e633db2d2caa", "html_url": "https://github.com/airbnb/synapse/commit/3681b1d4c7d73b1ba4bb6a210d60e633db2d2caa"}]}, {"sha": "3681b1d4c7d73b1ba4bb6a210d60e633db2d2caa", "commit": {"author": {"name": "Igor Serebryany", "email": "igor.serebryany@airbnb.com", "date": "2016-06-27T19:41:36Z"}, "committer": {"name": "Igor Serebryany", "email": "igor.serebryany@airbnb.com", "date": "2016-06-27T20:13:52Z"}, "message": "[spec] add factorygirl to build backends\n\nmakes backend building a little less verbose/tedius", "tree": {"sha": "0ded94d652701329f70e530251765a9a6d84f4d7", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/0ded94d652701329f70e530251765a9a6d84f4d7"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/3681b1d4c7d73b1ba4bb6a210d60e633db2d2caa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/3681b1d4c7d73b1ba4bb6a210d60e633db2d2caa", "html_url": "https://github.com/airbnb/synapse/commit/3681b1d4c7d73b1ba4bb6a210d60e633db2d2caa", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/3681b1d4c7d73b1ba4bb6a210d60e633db2d2caa/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "318d8348b21a531c0fedb8c83e72347209ef6e08", "url": "https://api.github.com/repos/airbnb/synapse/commits/318d8348b21a531c0fedb8c83e72347209ef6e08", "html_url": "https://github.com/airbnb/synapse/commit/318d8348b21a531c0fedb8c83e72347209ef6e08"}]}, {"sha": "318d8348b21a531c0fedb8c83e72347209ef6e08", "commit": {"author": {"name": "Igor Serebryany", "email": "igor.serebryany@airbnb.com", "date": "2016-06-27T19:10:50Z"}, "committer": {"name": "Igor Serebryany", "email": "igor.serebryany@airbnb.com", "date": "2016-06-27T19:59:57Z"}, "message": "[base watcher] refactor label filtering\n\nwe make three total changes. these are pretty entertwined, so they're all in\nthe same commit -- sorry about that! the changes are:\n\n* go from `label_filter` to `label_filters` -- this allows us to define\n  multiple filters, which must ALL match\n* add a new filter condition, for `not-equals`\n* allow leader election to operate on filtered backends, thus making leader\n  election and filters no longer mutually exclusive\n\nwe update the documentation to reflect the new reality. we deprecate the old\n`label_filter` option, but leave it available to avoid\nbackwards-incompatability", "tree": {"sha": "45e5e368d859f0651e2f5c753ef77cd0e0347b7b", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/45e5e368d859f0651e2f5c753ef77cd0e0347b7b"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/318d8348b21a531c0fedb8c83e72347209ef6e08", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/318d8348b21a531c0fedb8c83e72347209ef6e08", "html_url": "https://github.com/airbnb/synapse/commit/318d8348b21a531c0fedb8c83e72347209ef6e08", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/318d8348b21a531c0fedb8c83e72347209ef6e08/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "64ddbbd6140d337d65cf0f31fff9ea004aca779e", "url": "https://api.github.com/repos/airbnb/synapse/commits/64ddbbd6140d337d65cf0f31fff9ea004aca779e", "html_url": "https://github.com/airbnb/synapse/commit/64ddbbd6140d337d65cf0f31fff9ea004aca779e"}]}, {"sha": "64ddbbd6140d337d65cf0f31fff9ea004aca779e", "commit": {"author": {"name": "Igor Serebryany", "email": "igor47@moomers.org", "date": "2016-06-16T18:36:35Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2016-06-16T18:36:35Z"}, "message": "Merge pull request #200 from airbnb/increment_version_to_v0.13.6\n\nbump version to v0.13.6", "tree": {"sha": "81e48e30468ede2db358fd08fc43011604082a2c", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/81e48e30468ede2db358fd08fc43011604082a2c"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/64ddbbd6140d337d65cf0f31fff9ea004aca779e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/64ddbbd6140d337d65cf0f31fff9ea004aca779e", "html_url": "https://github.com/airbnb/synapse/commit/64ddbbd6140d337d65cf0f31fff9ea004aca779e", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/64ddbbd6140d337d65cf0f31fff9ea004aca779e/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a2b21ef330bbaac98f010762b59efd5d29011bbd", "url": "https://api.github.com/repos/airbnb/synapse/commits/a2b21ef330bbaac98f010762b59efd5d29011bbd", "html_url": "https://github.com/airbnb/synapse/commit/a2b21ef330bbaac98f010762b59efd5d29011bbd"}, {"sha": "9099bdb153e52a24b71e2635c1ca552dc73c9cce", "url": "https://api.github.com/repos/airbnb/synapse/commits/9099bdb153e52a24b71e2635c1ca552dc73c9cce", "html_url": "https://github.com/airbnb/synapse/commit/9099bdb153e52a24b71e2635c1ca552dc73c9cce"}]}, {"sha": "9099bdb153e52a24b71e2635c1ca552dc73c9cce", "commit": {"author": {"name": "Igor Serebryany", "email": "igor.serebryany@airbnb.com", "date": "2016-06-16T18:33:15Z"}, "committer": {"name": "Igor Serebryany", "email": "igor.serebryany@airbnb.com", "date": "2016-06-16T18:33:15Z"}, "message": "bump version to v0.13.6", "tree": {"sha": "81e48e30468ede2db358fd08fc43011604082a2c", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/81e48e30468ede2db358fd08fc43011604082a2c"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/9099bdb153e52a24b71e2635c1ca552dc73c9cce", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/9099bdb153e52a24b71e2635c1ca552dc73c9cce", "html_url": "https://github.com/airbnb/synapse/commit/9099bdb153e52a24b71e2635c1ca552dc73c9cce", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/9099bdb153e52a24b71e2635c1ca552dc73c9cce/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a2b21ef330bbaac98f010762b59efd5d29011bbd", "url": "https://api.github.com/repos/airbnb/synapse/commits/a2b21ef330bbaac98f010762b59efd5d29011bbd", "html_url": "https://github.com/airbnb/synapse/commit/a2b21ef330bbaac98f010762b59efd5d29011bbd"}]}, {"sha": "a2b21ef330bbaac98f010762b59efd5d29011bbd", "commit": {"author": {"name": "Igor Serebryany", "email": "igor47@moomers.org", "date": "2016-06-16T18:32:14Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2016-06-16T18:32:14Z"}, "message": "Merge pull request #199 from airbnb/multiple_stats_sockets\n\nMultiple stats sockets", "tree": {"sha": "8d1aa241c5ca39f73df24651d165e1d9cab88144", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/8d1aa241c5ca39f73df24651d165e1d9cab88144"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/a2b21ef330bbaac98f010762b59efd5d29011bbd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/a2b21ef330bbaac98f010762b59efd5d29011bbd", "html_url": "https://github.com/airbnb/synapse/commit/a2b21ef330bbaac98f010762b59efd5d29011bbd", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/a2b21ef330bbaac98f010762b59efd5d29011bbd/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "avatar_url": "https://avatars3.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1d875e1dc6b398765c152b836fb35701074ad664", "url": "https://api.github.com/repos/airbnb/synapse/commits/1d875e1dc6b398765c152b836fb35701074ad664", "html_url": "https://github.com/airbnb/synapse/commit/1d875e1dc6b398765c152b836fb35701074ad664"}, {"sha": "7c534be91e6da645e17dd9aa3851f16e4e1e29d1", "url": "https://api.github.com/repos/airbnb/synapse/commits/7c534be91e6da645e17dd9aa3851f16e4e1e29d1", "html_url": "https://github.com/airbnb/synapse/commit/7c534be91e6da645e17dd9aa3851f16e4e1e29d1"}]}, {"sha": "7c534be91e6da645e17dd9aa3851f16e4e1e29d1", "commit": {"author": {"name": "Igor Serebryany", "email": "igor.serebryany@airbnb.com", "date": "2016-06-15T22:29:45Z"}, "committer": {"name": "Igor Serebryany", "email": "igor.serebryany@airbnb.com", "date": "2016-06-16T17:57:40Z"}, "message": "[haproxy] log which socket we used to reconfigure", "tree": {"sha": "8d1aa241c5ca39f73df24651d165e1d9cab88144", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/8d1aa241c5ca39f73df24651d165e1d9cab88144"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/7c534be91e6da645e17dd9aa3851f16e4e1e29d1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/7c534be91e6da645e17dd9aa3851f16e4e1e29d1", "html_url": "https://github.com/airbnb/synapse/commit/7c534be91e6da645e17dd9aa3851f16e4e1e29d1", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/7c534be91e6da645e17dd9aa3851f16e4e1e29d1/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "49011c8a2572b47af16e8aae8ea8ff0a6bcfc75c", "url": "https://api.github.com/repos/airbnb/synapse/commits/49011c8a2572b47af16e8aae8ea8ff0a6bcfc75c", "html_url": "https://github.com/airbnb/synapse/commit/49011c8a2572b47af16e8aae8ea8ff0a6bcfc75c"}]}, {"sha": "49011c8a2572b47af16e8aae8ea8ff0a6bcfc75c", "commit": {"author": {"name": "Igor Serebryany", "email": "igor.serebryany@airbnb.com", "date": "2016-06-15T19:01:32Z"}, "committer": {"name": "Igor Serebryany", "email": "igor.serebryany@airbnb.com", "date": "2016-06-16T17:57:40Z"}, "message": "[haproxy] actually update multiple stats sockets\n\nthis allows us to have an haproxy running with nbproc > 1. the limitations are\nthat every process has to have it's own stats socket, and that all processes\nmust have identical service configurations (no dedicating of backends to\nparticular process numbers)", "tree": {"sha": "0454bed2ff0ac73cfb21a6c715a8c81bf07ad43e", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/0454bed2ff0ac73cfb21a6c715a8c81bf07ad43e"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/49011c8a2572b47af16e8aae8ea8ff0a6bcfc75c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/49011c8a2572b47af16e8aae8ea8ff0a6bcfc75c", "html_url": "https://github.com/airbnb/synapse/commit/49011c8a2572b47af16e8aae8ea8ff0a6bcfc75c", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/49011c8a2572b47af16e8aae8ea8ff0a6bcfc75c/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7aaec1e95b246e365e4b13994409a9fc6bd9884a", "url": "https://api.github.com/repos/airbnb/synapse/commits/7aaec1e95b246e365e4b13994409a9fc6bd9884a", "html_url": "https://github.com/airbnb/synapse/commit/7aaec1e95b246e365e4b13994409a9fc6bd9884a"}]}, {"sha": "7aaec1e95b246e365e4b13994409a9fc6bd9884a", "commit": {"author": {"name": "Igor Serebryany", "email": "igor.serebryany@airbnb.com", "date": "2016-06-15T17:40:08Z"}, "committer": {"name": "Igor Serebryany", "email": "igor.serebryany@airbnb.com", "date": "2016-06-15T17:40:08Z"}, "message": "[haproxy] allow multiple stats sockets as an option\n\nwe are not using multiple stats sockets yet, we just enable (and document) that\noption", "tree": {"sha": "7c745b19cf5f92c16241fb03f6ae5768dd134963", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/7c745b19cf5f92c16241fb03f6ae5768dd134963"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/7aaec1e95b246e365e4b13994409a9fc6bd9884a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/7aaec1e95b246e365e4b13994409a9fc6bd9884a", "html_url": "https://github.com/airbnb/synapse/commit/7aaec1e95b246e365e4b13994409a9fc6bd9884a", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/7aaec1e95b246e365e4b13994409a9fc6bd9884a/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1d875e1dc6b398765c152b836fb35701074ad664", "url": "https://api.github.com/repos/airbnb/synapse/commits/1d875e1dc6b398765c152b836fb35701074ad664", "html_url": "https://github.com/airbnb/synapse/commit/1d875e1dc6b398765c152b836fb35701074ad664"}]}, {"sha": "1d875e1dc6b398765c152b836fb35701074ad664", "commit": {"author": {"name": "Igor Serebryany", "email": "igor47@moomers.org", "date": "2016-06-08T19:47:09Z"}, "committer": {"name": "Igor Serebryany", "email": "igor47@moomers.org", "date": "2016-06-08T19:47:09Z"}, "message": "Merge pull request #197 from airbnb/bump_to_v_0.13.5\n\nbump version to v0.13.5", "tree": {"sha": "d788b19db6db67b0f3b50e92ff47a52dd12416dd", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/d788b19db6db67b0f3b50e92ff47a52dd12416dd"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/1d875e1dc6b398765c152b836fb35701074ad664", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/1d875e1dc6b398765c152b836fb35701074ad664", "html_url": "https://github.com/airbnb/synapse/commit/1d875e1dc6b398765c152b836fb35701074ad664", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/1d875e1dc6b398765c152b836fb35701074ad664/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bc8db4dedfcfcaca7f6620fc764607bbaf427cca", "url": "https://api.github.com/repos/airbnb/synapse/commits/bc8db4dedfcfcaca7f6620fc764607bbaf427cca", "html_url": "https://github.com/airbnb/synapse/commit/bc8db4dedfcfcaca7f6620fc764607bbaf427cca"}, {"sha": "9960519b31a36d64a9bae9e29e0b36d30a6ae9b8", "url": "https://api.github.com/repos/airbnb/synapse/commits/9960519b31a36d64a9bae9e29e0b36d30a6ae9b8", "html_url": "https://github.com/airbnb/synapse/commit/9960519b31a36d64a9bae9e29e0b36d30a6ae9b8"}]}, {"sha": "9960519b31a36d64a9bae9e29e0b36d30a6ae9b8", "commit": {"author": {"name": "Igor Serebryany", "email": "igor.serebryany@airbnb.com", "date": "2016-06-08T19:32:16Z"}, "committer": {"name": "Igor Serebryany", "email": "igor.serebryany@airbnb.com", "date": "2016-06-08T19:32:16Z"}, "message": "bump version to v0.13.5", "tree": {"sha": "d788b19db6db67b0f3b50e92ff47a52dd12416dd", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/d788b19db6db67b0f3b50e92ff47a52dd12416dd"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/9960519b31a36d64a9bae9e29e0b36d30a6ae9b8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/9960519b31a36d64a9bae9e29e0b36d30a6ae9b8", "html_url": "https://github.com/airbnb/synapse/commit/9960519b31a36d64a9bae9e29e0b36d30a6ae9b8", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/9960519b31a36d64a9bae9e29e0b36d30a6ae9b8/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bc8db4dedfcfcaca7f6620fc764607bbaf427cca", "url": "https://api.github.com/repos/airbnb/synapse/commits/bc8db4dedfcfcaca7f6620fc764607bbaf427cca", "html_url": "https://github.com/airbnb/synapse/commit/bc8db4dedfcfcaca7f6620fc764607bbaf427cca"}]}, {"sha": "bc8db4dedfcfcaca7f6620fc764607bbaf427cca", "commit": {"author": {"name": "Igor Serebryany", "email": "igor47@moomers.org", "date": "2016-06-08T19:30:53Z"}, "committer": {"name": "Igor Serebryany", "email": "igor47@moomers.org", "date": "2016-06-08T19:30:53Z"}, "message": "Merge pull request #196 from brianwolfe/wolfe-socket-fd-cleanup\n\nClean up HAProxy sockets after reading", "tree": {"sha": "3af2d80ab04fcce47bcb92b05b5d012ea86ebe18", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/3af2d80ab04fcce47bcb92b05b5d012ea86ebe18"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/bc8db4dedfcfcaca7f6620fc764607bbaf427cca", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/bc8db4dedfcfcaca7f6620fc764607bbaf427cca", "html_url": "https://github.com/airbnb/synapse/commit/bc8db4dedfcfcaca7f6620fc764607bbaf427cca", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/bc8db4dedfcfcaca7f6620fc764607bbaf427cca/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "081a8661dfd15491528a2fb528d72a6818a565c0", "url": "https://api.github.com/repos/airbnb/synapse/commits/081a8661dfd15491528a2fb528d72a6818a565c0", "html_url": "https://github.com/airbnb/synapse/commit/081a8661dfd15491528a2fb528d72a6818a565c0"}, {"sha": "7a1660eefc002847db196d4e2b8ff065d4721b85", "url": "https://api.github.com/repos/airbnb/synapse/commits/7a1660eefc002847db196d4e2b8ff065d4721b85", "html_url": "https://github.com/airbnb/synapse/commit/7a1660eefc002847db196d4e2b8ff065d4721b85"}]}, {"sha": "7a1660eefc002847db196d4e2b8ff065d4721b85", "commit": {"author": {"name": "Brian Wolfe", "email": "brian.wolfe@airbnb.com", "date": "2016-06-08T19:22:27Z"}, "committer": {"name": "Brian Wolfe", "email": "brian.wolfe@airbnb.com", "date": "2016-06-08T19:22:27Z"}, "message": "Tighten up haproxy_exec, don't need info variable", "tree": {"sha": "3af2d80ab04fcce47bcb92b05b5d012ea86ebe18", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/3af2d80ab04fcce47bcb92b05b5d012ea86ebe18"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/7a1660eefc002847db196d4e2b8ff065d4721b85", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/7a1660eefc002847db196d4e2b8ff065d4721b85", "html_url": "https://github.com/airbnb/synapse/commit/7a1660eefc002847db196d4e2b8ff065d4721b85", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/7a1660eefc002847db196d4e2b8ff065d4721b85/comments", "author": {"login": "brianwolfe", "id": 1874252, "avatar_url": "https://avatars2.githubusercontent.com/u/1874252?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brianwolfe", "html_url": "https://github.com/brianwolfe", "followers_url": "https://api.github.com/users/brianwolfe/followers", "following_url": "https://api.github.com/users/brianwolfe/following{/other_user}", "gists_url": "https://api.github.com/users/brianwolfe/gists{/gist_id}", "starred_url": "https://api.github.com/users/brianwolfe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brianwolfe/subscriptions", "organizations_url": "https://api.github.com/users/brianwolfe/orgs", "repos_url": "https://api.github.com/users/brianwolfe/repos", "events_url": "https://api.github.com/users/brianwolfe/events{/privacy}", "received_events_url": "https://api.github.com/users/brianwolfe/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brianwolfe", "id": 1874252, "avatar_url": "https://avatars2.githubusercontent.com/u/1874252?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brianwolfe", "html_url": "https://github.com/brianwolfe", "followers_url": "https://api.github.com/users/brianwolfe/followers", "following_url": "https://api.github.com/users/brianwolfe/following{/other_user}", "gists_url": "https://api.github.com/users/brianwolfe/gists{/gist_id}", "starred_url": "https://api.github.com/users/brianwolfe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brianwolfe/subscriptions", "organizations_url": "https://api.github.com/users/brianwolfe/orgs", "repos_url": "https://api.github.com/users/brianwolfe/repos", "events_url": "https://api.github.com/users/brianwolfe/events{/privacy}", "received_events_url": "https://api.github.com/users/brianwolfe/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "02b11b3cff1635fd59e30b83404fe2abddf536d3", "url": "https://api.github.com/repos/airbnb/synapse/commits/02b11b3cff1635fd59e30b83404fe2abddf536d3", "html_url": "https://github.com/airbnb/synapse/commit/02b11b3cff1635fd59e30b83404fe2abddf536d3"}]}, {"sha": "02b11b3cff1635fd59e30b83404fe2abddf536d3", "commit": {"author": {"name": "Brian Wolfe", "email": "brian.wolfe@airbnb.com", "date": "2016-06-08T19:17:50Z"}, "committer": {"name": "Brian Wolfe", "email": "brian.wolfe@airbnb.com", "date": "2016-06-08T19:17:50Z"}, "message": "Tighten up s.close statement", "tree": {"sha": "603dc709ad80ba40945ce6091dfb4bf3efe105c9", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/603dc709ad80ba40945ce6091dfb4bf3efe105c9"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/02b11b3cff1635fd59e30b83404fe2abddf536d3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/02b11b3cff1635fd59e30b83404fe2abddf536d3", "html_url": "https://github.com/airbnb/synapse/commit/02b11b3cff1635fd59e30b83404fe2abddf536d3", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/02b11b3cff1635fd59e30b83404fe2abddf536d3/comments", "author": {"login": "brianwolfe", "id": 1874252, "avatar_url": "https://avatars2.githubusercontent.com/u/1874252?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brianwolfe", "html_url": "https://github.com/brianwolfe", "followers_url": "https://api.github.com/users/brianwolfe/followers", "following_url": "https://api.github.com/users/brianwolfe/following{/other_user}", "gists_url": "https://api.github.com/users/brianwolfe/gists{/gist_id}", "starred_url": "https://api.github.com/users/brianwolfe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brianwolfe/subscriptions", "organizations_url": "https://api.github.com/users/brianwolfe/orgs", "repos_url": "https://api.github.com/users/brianwolfe/repos", "events_url": "https://api.github.com/users/brianwolfe/events{/privacy}", "received_events_url": "https://api.github.com/users/brianwolfe/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brianwolfe", "id": 1874252, "avatar_url": "https://avatars2.githubusercontent.com/u/1874252?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brianwolfe", "html_url": "https://github.com/brianwolfe", "followers_url": "https://api.github.com/users/brianwolfe/followers", "following_url": "https://api.github.com/users/brianwolfe/following{/other_user}", "gists_url": "https://api.github.com/users/brianwolfe/gists{/gist_id}", "starred_url": "https://api.github.com/users/brianwolfe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brianwolfe/subscriptions", "organizations_url": "https://api.github.com/users/brianwolfe/orgs", "repos_url": "https://api.github.com/users/brianwolfe/repos", "events_url": "https://api.github.com/users/brianwolfe/events{/privacy}", "received_events_url": "https://api.github.com/users/brianwolfe/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9fad3c589bc0f455fd0487067255db94ff38956a", "url": "https://api.github.com/repos/airbnb/synapse/commits/9fad3c589bc0f455fd0487067255db94ff38956a", "html_url": "https://github.com/airbnb/synapse/commit/9fad3c589bc0f455fd0487067255db94ff38956a"}]}, {"sha": "9fad3c589bc0f455fd0487067255db94ff38956a", "commit": {"author": {"name": "Brian Wolfe", "email": "brian.wolfe@airbnb.com", "date": "2016-06-08T18:57:18Z"}, "committer": {"name": "Brian Wolfe", "email": "brian.wolfe@airbnb.com", "date": "2016-06-08T19:03:54Z"}, "message": "Pull error handling back into update_backends\n\nCalling functions may wish to handle errors without requiring a restart.\nPulling restart and logging code to calling function.", "tree": {"sha": "44cfecea530ec36fe3a5e4be793258277c7dabab", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/44cfecea530ec36fe3a5e4be793258277c7dabab"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/9fad3c589bc0f455fd0487067255db94ff38956a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/9fad3c589bc0f455fd0487067255db94ff38956a", "html_url": "https://github.com/airbnb/synapse/commit/9fad3c589bc0f455fd0487067255db94ff38956a", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/9fad3c589bc0f455fd0487067255db94ff38956a/comments", "author": {"login": "brianwolfe", "id": 1874252, "avatar_url": "https://avatars2.githubusercontent.com/u/1874252?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brianwolfe", "html_url": "https://github.com/brianwolfe", "followers_url": "https://api.github.com/users/brianwolfe/followers", "following_url": "https://api.github.com/users/brianwolfe/following{/other_user}", "gists_url": "https://api.github.com/users/brianwolfe/gists{/gist_id}", "starred_url": "https://api.github.com/users/brianwolfe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brianwolfe/subscriptions", "organizations_url": "https://api.github.com/users/brianwolfe/orgs", "repos_url": "https://api.github.com/users/brianwolfe/repos", "events_url": "https://api.github.com/users/brianwolfe/events{/privacy}", "received_events_url": "https://api.github.com/users/brianwolfe/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brianwolfe", "id": 1874252, "avatar_url": "https://avatars2.githubusercontent.com/u/1874252?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brianwolfe", "html_url": "https://github.com/brianwolfe", "followers_url": "https://api.github.com/users/brianwolfe/followers", "following_url": "https://api.github.com/users/brianwolfe/following{/other_user}", "gists_url": "https://api.github.com/users/brianwolfe/gists{/gist_id}", "starred_url": "https://api.github.com/users/brianwolfe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brianwolfe/subscriptions", "organizations_url": "https://api.github.com/users/brianwolfe/orgs", "repos_url": "https://api.github.com/users/brianwolfe/repos", "events_url": "https://api.github.com/users/brianwolfe/events{/privacy}", "received_events_url": "https://api.github.com/users/brianwolfe/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "46ea91c00e2e676cd296d5c149d89c87651cd9fc", "url": "https://api.github.com/repos/airbnb/synapse/commits/46ea91c00e2e676cd296d5c149d89c87651cd9fc", "html_url": "https://github.com/airbnb/synapse/commit/46ea91c00e2e676cd296d5c149d89c87651cd9fc"}]}, {"sha": "46ea91c00e2e676cd296d5c149d89c87651cd9fc", "commit": {"author": {"name": "Brian Wolfe", "email": "brian.wolfe@airbnb.com", "date": "2016-06-08T15:54:56Z"}, "committer": {"name": "Brian Wolfe", "email": "brian.wolfe@airbnb.com", "date": "2016-06-08T18:19:48Z"}, "message": "Clean up sockets after reading\n\nHAProxy closes its connection to the socket as soon as it finishes\nwriting. This commit explicitly closes the socket from the synapse\nside. Without an explicit close, cleanup responsibility is shifted\nto object finalization during garbage collection. This can cause\nsynapse to temporarily accumulate a large number of socket file\ndescriptors.", "tree": {"sha": "7e2dd71a944c3101e566a4ac5a99183bee4fdb07", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/7e2dd71a944c3101e566a4ac5a99183bee4fdb07"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/46ea91c00e2e676cd296d5c149d89c87651cd9fc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/46ea91c00e2e676cd296d5c149d89c87651cd9fc", "html_url": "https://github.com/airbnb/synapse/commit/46ea91c00e2e676cd296d5c149d89c87651cd9fc", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/46ea91c00e2e676cd296d5c149d89c87651cd9fc/comments", "author": {"login": "brianwolfe", "id": 1874252, "avatar_url": "https://avatars2.githubusercontent.com/u/1874252?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brianwolfe", "html_url": "https://github.com/brianwolfe", "followers_url": "https://api.github.com/users/brianwolfe/followers", "following_url": "https://api.github.com/users/brianwolfe/following{/other_user}", "gists_url": "https://api.github.com/users/brianwolfe/gists{/gist_id}", "starred_url": "https://api.github.com/users/brianwolfe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brianwolfe/subscriptions", "organizations_url": "https://api.github.com/users/brianwolfe/orgs", "repos_url": "https://api.github.com/users/brianwolfe/repos", "events_url": "https://api.github.com/users/brianwolfe/events{/privacy}", "received_events_url": "https://api.github.com/users/brianwolfe/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brianwolfe", "id": 1874252, "avatar_url": "https://avatars2.githubusercontent.com/u/1874252?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brianwolfe", "html_url": "https://github.com/brianwolfe", "followers_url": "https://api.github.com/users/brianwolfe/followers", "following_url": "https://api.github.com/users/brianwolfe/following{/other_user}", "gists_url": "https://api.github.com/users/brianwolfe/gists{/gist_id}", "starred_url": "https://api.github.com/users/brianwolfe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brianwolfe/subscriptions", "organizations_url": "https://api.github.com/users/brianwolfe/orgs", "repos_url": "https://api.github.com/users/brianwolfe/repos", "events_url": "https://api.github.com/users/brianwolfe/events{/privacy}", "received_events_url": "https://api.github.com/users/brianwolfe/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "081a8661dfd15491528a2fb528d72a6818a565c0", "url": "https://api.github.com/repos/airbnb/synapse/commits/081a8661dfd15491528a2fb528d72a6818a565c0", "html_url": "https://github.com/airbnb/synapse/commit/081a8661dfd15491528a2fb528d72a6818a565c0"}]}, {"sha": "081a8661dfd15491528a2fb528d72a6818a565c0", "commit": {"author": {"name": "Tiffany Low", "email": "tiffany.low@airbnb.com", "date": "2016-05-31T19:13:42Z"}, "committer": {"name": "Tiffany Low", "email": "tiffany.low@airbnb.com", "date": "2016-05-31T19:14:45Z"}, "message": "[synapse] bump version to v0.13.4", "tree": {"sha": "191294d0fdd728076436475e7820024bc8d2eee2", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/191294d0fdd728076436475e7820024bc8d2eee2"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/081a8661dfd15491528a2fb528d72a6818a565c0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/081a8661dfd15491528a2fb528d72a6818a565c0", "html_url": "https://github.com/airbnb/synapse/commit/081a8661dfd15491528a2fb528d72a6818a565c0", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/081a8661dfd15491528a2fb528d72a6818a565c0/comments", "author": null, "committer": null, "parents": [{"sha": "ed641f1e88103133a16a08ed52a23874635538ad", "url": "https://api.github.com/repos/airbnb/synapse/commits/ed641f1e88103133a16a08ed52a23874635538ad", "html_url": "https://github.com/airbnb/synapse/commit/ed641f1e88103133a16a08ed52a23874635538ad"}]}, {"sha": "ed641f1e88103133a16a08ed52a23874635538ad", "commit": {"author": {"name": "scarletmeow", "email": "scarletmeow@users.noreply.github.com", "date": "2016-05-31T18:53:57Z"}, "committer": {"name": "scarletmeow", "email": "scarletmeow@users.noreply.github.com", "date": "2016-05-31T18:53:57Z"}, "message": "Merge pull request #192 from scarletmeow/haproxy_whitelist_update\n\nUpdate whitelist for HAProxy 1.5.18 and 1.6.5", "tree": {"sha": "102330fa0037c76eb4d5ae0d811d446397482d69", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/102330fa0037c76eb4d5ae0d811d446397482d69"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/ed641f1e88103133a16a08ed52a23874635538ad", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/ed641f1e88103133a16a08ed52a23874635538ad", "html_url": "https://github.com/airbnb/synapse/commit/ed641f1e88103133a16a08ed52a23874635538ad", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/ed641f1e88103133a16a08ed52a23874635538ad/comments", "author": {"login": "scarletmeow", "id": 6128469, "avatar_url": "https://avatars2.githubusercontent.com/u/6128469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarletmeow", "html_url": "https://github.com/scarletmeow", "followers_url": "https://api.github.com/users/scarletmeow/followers", "following_url": "https://api.github.com/users/scarletmeow/following{/other_user}", "gists_url": "https://api.github.com/users/scarletmeow/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarletmeow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarletmeow/subscriptions", "organizations_url": "https://api.github.com/users/scarletmeow/orgs", "repos_url": "https://api.github.com/users/scarletmeow/repos", "events_url": "https://api.github.com/users/scarletmeow/events{/privacy}", "received_events_url": "https://api.github.com/users/scarletmeow/received_events", "type": "User", "site_admin": false}, "committer": {"login": "scarletmeow", "id": 6128469, "avatar_url": "https://avatars2.githubusercontent.com/u/6128469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarletmeow", "html_url": "https://github.com/scarletmeow", "followers_url": "https://api.github.com/users/scarletmeow/followers", "following_url": "https://api.github.com/users/scarletmeow/following{/other_user}", "gists_url": "https://api.github.com/users/scarletmeow/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarletmeow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarletmeow/subscriptions", "organizations_url": "https://api.github.com/users/scarletmeow/orgs", "repos_url": "https://api.github.com/users/scarletmeow/repos", "events_url": "https://api.github.com/users/scarletmeow/events{/privacy}", "received_events_url": "https://api.github.com/users/scarletmeow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b904393a120e587f02704671475e154012293bb1", "url": "https://api.github.com/repos/airbnb/synapse/commits/b904393a120e587f02704671475e154012293bb1", "html_url": "https://github.com/airbnb/synapse/commit/b904393a120e587f02704671475e154012293bb1"}, {"sha": "6724e8e1b3d96b9439e90f6d0d34ff1916245806", "url": "https://api.github.com/repos/airbnb/synapse/commits/6724e8e1b3d96b9439e90f6d0d34ff1916245806", "html_url": "https://github.com/airbnb/synapse/commit/6724e8e1b3d96b9439e90f6d0d34ff1916245806"}]}, {"sha": "6724e8e1b3d96b9439e90f6d0d34ff1916245806", "commit": {"author": {"name": "Tiffany Low", "email": "tiffany.low@airbnb.com", "date": "2016-05-27T00:56:50Z"}, "committer": {"name": "Tiffany Low", "email": "tiffany.low@airbnb.com", "date": "2016-05-31T18:34:44Z"}, "message": "whitelist 'no option' and 'no log' haproxy config", "tree": {"sha": "102330fa0037c76eb4d5ae0d811d446397482d69", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/102330fa0037c76eb4d5ae0d811d446397482d69"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/6724e8e1b3d96b9439e90f6d0d34ff1916245806", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/6724e8e1b3d96b9439e90f6d0d34ff1916245806", "html_url": "https://github.com/airbnb/synapse/commit/6724e8e1b3d96b9439e90f6d0d34ff1916245806", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/6724e8e1b3d96b9439e90f6d0d34ff1916245806/comments", "author": null, "committer": null, "parents": [{"sha": "106c1a2393de2b1f971a1407817fe374d1e77a36", "url": "https://api.github.com/repos/airbnb/synapse/commits/106c1a2393de2b1f971a1407817fe374d1e77a36", "html_url": "https://github.com/airbnb/synapse/commit/106c1a2393de2b1f971a1407817fe374d1e77a36"}]}, {"sha": "106c1a2393de2b1f971a1407817fe374d1e77a36", "commit": {"author": {"name": "Tiffany Low", "email": "tiffany.low@airbnb.com", "date": "2016-05-27T00:49:55Z"}, "committer": {"name": "Tiffany Low", "email": "tiffany.low@airbnb.com", "date": "2016-05-31T18:34:39Z"}, "message": "update whitelist for haproxy 1.6.5", "tree": {"sha": "54ce72ed256719ebc8bcc699c277ba81e7435ae9", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/54ce72ed256719ebc8bcc699c277ba81e7435ae9"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/106c1a2393de2b1f971a1407817fe374d1e77a36", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/106c1a2393de2b1f971a1407817fe374d1e77a36", "html_url": "https://github.com/airbnb/synapse/commit/106c1a2393de2b1f971a1407817fe374d1e77a36", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/106c1a2393de2b1f971a1407817fe374d1e77a36/comments", "author": null, "committer": null, "parents": [{"sha": "f88b738b8975db2e59b6596ba6521bc563ac0861", "url": "https://api.github.com/repos/airbnb/synapse/commits/f88b738b8975db2e59b6596ba6521bc563ac0861", "html_url": "https://github.com/airbnb/synapse/commit/f88b738b8975db2e59b6596ba6521bc563ac0861"}]}, {"sha": "f88b738b8975db2e59b6596ba6521bc563ac0861", "commit": {"author": {"name": "Tiffany Low", "email": "tiffany.low@airbnb.com", "date": "2016-05-26T23:30:34Z"}, "committer": {"name": "Tiffany Low", "email": "tiffany.low@airbnb.com", "date": "2016-05-31T18:34:33Z"}, "message": "update whitelist for haproxy 1.5.18", "tree": {"sha": "1dc5296c0c52b80591dd14862cf1380af765ab0a", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/1dc5296c0c52b80591dd14862cf1380af765ab0a"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/f88b738b8975db2e59b6596ba6521bc563ac0861", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/f88b738b8975db2e59b6596ba6521bc563ac0861", "html_url": "https://github.com/airbnb/synapse/commit/f88b738b8975db2e59b6596ba6521bc563ac0861", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/f88b738b8975db2e59b6596ba6521bc563ac0861/comments", "author": null, "committer": null, "parents": [{"sha": "b904393a120e587f02704671475e154012293bb1", "url": "https://api.github.com/repos/airbnb/synapse/commits/b904393a120e587f02704671475e154012293bb1", "html_url": "https://github.com/airbnb/synapse/commit/b904393a120e587f02704671475e154012293bb1"}]}, {"sha": "b904393a120e587f02704671475e154012293bb1", "commit": {"author": {"name": "Sonic Wang", "email": "sonicwang@users.noreply.github.com", "date": "2016-05-27T18:14:49Z"}, "committer": {"name": "Sonic Wang", "email": "sonicwang@users.noreply.github.com", "date": "2016-05-27T18:14:49Z"}, "message": "Merge pull request #194 from airbnb/sonic/put_backend_name_first\n\n[haproxy] Put backend['name'] first in constructing backend name", "tree": {"sha": "7e4f9476fc0c08b73b422098ee0d51794dfd5fd5", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/7e4f9476fc0c08b73b422098ee0d51794dfd5fd5"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/b904393a120e587f02704671475e154012293bb1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/b904393a120e587f02704671475e154012293bb1", "html_url": "https://github.com/airbnb/synapse/commit/b904393a120e587f02704671475e154012293bb1", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/b904393a120e587f02704671475e154012293bb1/comments", "author": {"login": "SonicWang", "id": 853346, "avatar_url": "https://avatars0.githubusercontent.com/u/853346?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SonicWang", "html_url": "https://github.com/SonicWang", "followers_url": "https://api.github.com/users/SonicWang/followers", "following_url": "https://api.github.com/users/SonicWang/following{/other_user}", "gists_url": "https://api.github.com/users/SonicWang/gists{/gist_id}", "starred_url": "https://api.github.com/users/SonicWang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SonicWang/subscriptions", "organizations_url": "https://api.github.com/users/SonicWang/orgs", "repos_url": "https://api.github.com/users/SonicWang/repos", "events_url": "https://api.github.com/users/SonicWang/events{/privacy}", "received_events_url": "https://api.github.com/users/SonicWang/received_events", "type": "User", "site_admin": false}, "committer": {"login": "SonicWang", "id": 853346, "avatar_url": "https://avatars0.githubusercontent.com/u/853346?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SonicWang", "html_url": "https://github.com/SonicWang", "followers_url": "https://api.github.com/users/SonicWang/followers", "following_url": "https://api.github.com/users/SonicWang/following{/other_user}", "gists_url": "https://api.github.com/users/SonicWang/gists{/gist_id}", "starred_url": "https://api.github.com/users/SonicWang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SonicWang/subscriptions", "organizations_url": "https://api.github.com/users/SonicWang/orgs", "repos_url": "https://api.github.com/users/SonicWang/repos", "events_url": "https://api.github.com/users/SonicWang/events{/privacy}", "received_events_url": "https://api.github.com/users/SonicWang/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "250d4ee75966c649f9c5077c98f457d886775f93", "url": "https://api.github.com/repos/airbnb/synapse/commits/250d4ee75966c649f9c5077c98f457d886775f93", "html_url": "https://github.com/airbnb/synapse/commit/250d4ee75966c649f9c5077c98f457d886775f93"}, {"sha": "dd5843c987740a5d5ce1c83b12b258b7253784a8", "url": "https://api.github.com/repos/airbnb/synapse/commits/dd5843c987740a5d5ce1c83b12b258b7253784a8", "html_url": "https://github.com/airbnb/synapse/commit/dd5843c987740a5d5ce1c83b12b258b7253784a8"}]}, {"sha": "dd5843c987740a5d5ce1c83b12b258b7253784a8", "commit": {"author": {"name": "Sonic Wang", "email": "sonic.wang@airbnb.com", "date": "2016-05-27T06:15:45Z"}, "committer": {"name": "Sonic Wang", "email": "sonic.wang@airbnb.com", "date": "2016-05-27T17:59:50Z"}, "message": "[haproxy] Put backend['name'] first in constructing backend name\n\nThis is needed because we are sorting backends using constructed\nfull string names. Currently we put `host:port` in front of `name`.\n`host` could be an `ip` and in this case controlling ordering is hard.", "tree": {"sha": "7e4f9476fc0c08b73b422098ee0d51794dfd5fd5", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/7e4f9476fc0c08b73b422098ee0d51794dfd5fd5"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/dd5843c987740a5d5ce1c83b12b258b7253784a8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/dd5843c987740a5d5ce1c83b12b258b7253784a8", "html_url": "https://github.com/airbnb/synapse/commit/dd5843c987740a5d5ce1c83b12b258b7253784a8", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/dd5843c987740a5d5ce1c83b12b258b7253784a8/comments", "author": null, "committer": null, "parents": [{"sha": "250d4ee75966c649f9c5077c98f457d886775f93", "url": "https://api.github.com/repos/airbnb/synapse/commits/250d4ee75966c649f9c5077c98f457d886775f93", "html_url": "https://github.com/airbnb/synapse/commit/250d4ee75966c649f9c5077c98f457d886775f93"}]}, {"sha": "250d4ee75966c649f9c5077c98f457d886775f93", "commit": {"author": {"name": "scarletmeow", "email": "scarletmeow@users.noreply.github.com", "date": "2016-05-27T17:42:08Z"}, "committer": {"name": "scarletmeow", "email": "scarletmeow@users.noreply.github.com", "date": "2016-05-27T17:42:08Z"}, "message": "Merge pull request #193 from scarletmeow/fix_tests\n\nBump Gemfile.lock to fix specs", "tree": {"sha": "a9fb338c70cd27654318044bdef28caf61a3150c", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/a9fb338c70cd27654318044bdef28caf61a3150c"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/250d4ee75966c649f9c5077c98f457d886775f93", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/250d4ee75966c649f9c5077c98f457d886775f93", "html_url": "https://github.com/airbnb/synapse/commit/250d4ee75966c649f9c5077c98f457d886775f93", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/250d4ee75966c649f9c5077c98f457d886775f93/comments", "author": {"login": "scarletmeow", "id": 6128469, "avatar_url": "https://avatars2.githubusercontent.com/u/6128469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarletmeow", "html_url": "https://github.com/scarletmeow", "followers_url": "https://api.github.com/users/scarletmeow/followers", "following_url": "https://api.github.com/users/scarletmeow/following{/other_user}", "gists_url": "https://api.github.com/users/scarletmeow/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarletmeow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarletmeow/subscriptions", "organizations_url": "https://api.github.com/users/scarletmeow/orgs", "repos_url": "https://api.github.com/users/scarletmeow/repos", "events_url": "https://api.github.com/users/scarletmeow/events{/privacy}", "received_events_url": "https://api.github.com/users/scarletmeow/received_events", "type": "User", "site_admin": false}, "committer": {"login": "scarletmeow", "id": 6128469, "avatar_url": "https://avatars2.githubusercontent.com/u/6128469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarletmeow", "html_url": "https://github.com/scarletmeow", "followers_url": "https://api.github.com/users/scarletmeow/followers", "following_url": "https://api.github.com/users/scarletmeow/following{/other_user}", "gists_url": "https://api.github.com/users/scarletmeow/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarletmeow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarletmeow/subscriptions", "organizations_url": "https://api.github.com/users/scarletmeow/orgs", "repos_url": "https://api.github.com/users/scarletmeow/repos", "events_url": "https://api.github.com/users/scarletmeow/events{/privacy}", "received_events_url": "https://api.github.com/users/scarletmeow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "11e27483789d479ebc8d4d8062b6c549cfb35675", "url": "https://api.github.com/repos/airbnb/synapse/commits/11e27483789d479ebc8d4d8062b6c549cfb35675", "html_url": "https://github.com/airbnb/synapse/commit/11e27483789d479ebc8d4d8062b6c549cfb35675"}, {"sha": "a3589780edfbb3964353596191af9eb22282f72f", "url": "https://api.github.com/repos/airbnb/synapse/commits/a3589780edfbb3964353596191af9eb22282f72f", "html_url": "https://github.com/airbnb/synapse/commit/a3589780edfbb3964353596191af9eb22282f72f"}]}, {"sha": "a3589780edfbb3964353596191af9eb22282f72f", "commit": {"author": {"name": "Tiffany Low", "email": "tiffany.low@airbnb.com", "date": "2016-05-27T00:07:42Z"}, "committer": {"name": "Tiffany Low", "email": "tiffany.low@airbnb.com", "date": "2016-05-27T00:07:42Z"}, "message": "Bump Gemfile.lock to fix specs", "tree": {"sha": "a9fb338c70cd27654318044bdef28caf61a3150c", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/a9fb338c70cd27654318044bdef28caf61a3150c"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/a3589780edfbb3964353596191af9eb22282f72f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/a3589780edfbb3964353596191af9eb22282f72f", "html_url": "https://github.com/airbnb/synapse/commit/a3589780edfbb3964353596191af9eb22282f72f", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/a3589780edfbb3964353596191af9eb22282f72f/comments", "author": null, "committer": null, "parents": [{"sha": "11e27483789d479ebc8d4d8062b6c549cfb35675", "url": "https://api.github.com/repos/airbnb/synapse/commits/11e27483789d479ebc8d4d8062b6c549cfb35675", "html_url": "https://github.com/airbnb/synapse/commit/11e27483789d479ebc8d4d8062b6c549cfb35675"}]}, {"sha": "11e27483789d479ebc8d4d8062b6c549cfb35675", "commit": {"author": {"name": "Igor Serebryany", "email": "igor.serebryany@airbnb.com", "date": "2016-05-26T22:55:51Z"}, "committer": {"name": "Igor Serebryany", "email": "igor.serebryany@airbnb.com", "date": "2016-05-26T23:16:42Z"}, "message": "[synapse] bump version to v0.13.3", "tree": {"sha": "9323b264a027b46fe6ae7a073786bcd8373a0db3", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/9323b264a027b46fe6ae7a073786bcd8373a0db3"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/11e27483789d479ebc8d4d8062b6c549cfb35675", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/11e27483789d479ebc8d4d8062b6c549cfb35675", "html_url": "https://github.com/airbnb/synapse/commit/11e27483789d479ebc8d4d8062b6c549cfb35675", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/11e27483789d479ebc8d4d8062b6c549cfb35675/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "257cd9c995d6e4e2faa3a82ebdb879a9872b653e", "url": "https://api.github.com/repos/airbnb/synapse/commits/257cd9c995d6e4e2faa3a82ebdb879a9872b653e", "html_url": "https://github.com/airbnb/synapse/commit/257cd9c995d6e4e2faa3a82ebdb879a9872b653e"}]}, {"sha": "257cd9c995d6e4e2faa3a82ebdb879a9872b653e", "commit": {"author": {"name": "Igor Serebryany", "email": "igor47@moomers.org", "date": "2016-05-26T22:54:50Z"}, "committer": {"name": "Igor Serebryany", "email": "igor47@moomers.org", "date": "2016-05-26T22:54:50Z"}, "message": "Merge pull request #191 from airbnb/haproxy_tests\n\nHaproxy tests", "tree": {"sha": "2b4dee7d5e0d81e9d9b771527fc49a1a7ea598ca", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/2b4dee7d5e0d81e9d9b771527fc49a1a7ea598ca"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/257cd9c995d6e4e2faa3a82ebdb879a9872b653e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/257cd9c995d6e4e2faa3a82ebdb879a9872b653e", "html_url": "https://github.com/airbnb/synapse/commit/257cd9c995d6e4e2faa3a82ebdb879a9872b653e", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/257cd9c995d6e4e2faa3a82ebdb879a9872b653e/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "297a38ab5cbb4b3a09d997c307cc66946a78a2c7", "url": "https://api.github.com/repos/airbnb/synapse/commits/297a38ab5cbb4b3a09d997c307cc66946a78a2c7", "html_url": "https://github.com/airbnb/synapse/commit/297a38ab5cbb4b3a09d997c307cc66946a78a2c7"}, {"sha": "6cf3c853319dec335ddf1d5cee8f4567f955093e", "url": "https://api.github.com/repos/airbnb/synapse/commits/6cf3c853319dec335ddf1d5cee8f4567f955093e", "html_url": "https://github.com/airbnb/synapse/commit/6cf3c853319dec335ddf1d5cee8f4567f955093e"}]}, {"sha": "6cf3c853319dec335ddf1d5cee8f4567f955093e", "commit": {"author": {"name": "Igor Serebryany", "email": "igor.serebryany@airbnb.com", "date": "2016-05-26T22:04:48Z"}, "committer": {"name": "Igor Serebryany", "email": "igor.serebryany@airbnb.com", "date": "2016-05-26T22:43:59Z"}, "message": "[spec][haproxy] tests for state file updates\n\nadd tests to make sure the state file is properly managed. we refactor the\nstate file handling in `Haproxy` to make testing easier, but otherwise leave\nthe functionality unchanged", "tree": {"sha": "2d08dcf8cb72277767fbb93f36861cf27402c454", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/2d08dcf8cb72277767fbb93f36861cf27402c454"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/6cf3c853319dec335ddf1d5cee8f4567f955093e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/6cf3c853319dec335ddf1d5cee8f4567f955093e", "html_url": "https://github.com/airbnb/synapse/commit/6cf3c853319dec335ddf1d5cee8f4567f955093e", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/6cf3c853319dec335ddf1d5cee8f4567f955093e/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "784f930b9aeb529973f3034f65505f28bef81b8d", "url": "https://api.github.com/repos/airbnb/synapse/commits/784f930b9aeb529973f3034f65505f28bef81b8d", "html_url": "https://github.com/airbnb/synapse/commit/784f930b9aeb529973f3034f65505f28bef81b8d"}]}, {"sha": "784f930b9aeb529973f3034f65505f28bef81b8d", "commit": {"author": {"name": "Igor Serebryany", "email": "igor.serebryany@airbnb.com", "date": "2016-05-26T21:20:48Z"}, "committer": {"name": "Igor Serebryany", "email": "igor.serebryany@airbnb.com", "date": "2016-05-26T22:43:51Z"}, "message": "[spec] add timecop for time-sensitive stuff", "tree": {"sha": "1141043830f590f14e7f7e103980d60ab9a10ead", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/1141043830f590f14e7f7e103980d60ab9a10ead"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/784f930b9aeb529973f3034f65505f28bef81b8d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/784f930b9aeb529973f3034f65505f28bef81b8d", "html_url": "https://github.com/airbnb/synapse/commit/784f930b9aeb529973f3034f65505f28bef81b8d", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/784f930b9aeb529973f3034f65505f28bef81b8d/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "853d77633a13a754fb64ec708bc633dd71d81a1b", "url": "https://api.github.com/repos/airbnb/synapse/commits/853d77633a13a754fb64ec708bc633dd71d81a1b", "html_url": "https://github.com/airbnb/synapse/commit/853d77633a13a754fb64ec708bc633dd71d81a1b"}]}, {"sha": "853d77633a13a754fb64ec708bc633dd71d81a1b", "commit": {"author": {"name": "Igor Serebryany", "email": "igor.serebryany@airbnb.com", "date": "2016-05-26T21:08:17Z"}, "committer": {"name": "Igor Serebryany", "email": "igor.serebryany@airbnb.com", "date": "2016-05-26T21:08:17Z"}, "message": "[spec] unique names for mock services\n\nallows us to use them in arrays", "tree": {"sha": "3fe29ca7f26d8ee9fd59608c8d80f2939aac420d", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/3fe29ca7f26d8ee9fd59608c8d80f2939aac420d"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/853d77633a13a754fb64ec708bc633dd71d81a1b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/853d77633a13a754fb64ec708bc633dd71d81a1b", "html_url": "https://github.com/airbnb/synapse/commit/853d77633a13a754fb64ec708bc633dd71d81a1b", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/853d77633a13a754fb64ec708bc633dd71d81a1b/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "47c57c38a062b31ab5bb32af7e4f69887acc4cec", "url": "https://api.github.com/repos/airbnb/synapse/commits/47c57c38a062b31ab5bb32af7e4f69887acc4cec", "html_url": "https://github.com/airbnb/synapse/commit/47c57c38a062b31ab5bb32af7e4f69887acc4cec"}]}, {"sha": "297a38ab5cbb4b3a09d997c307cc66946a78a2c7", "commit": {"author": {"name": "scarletmeow", "email": "scarletmeow@users.noreply.github.com", "date": "2016-05-26T20:47:46Z"}, "committer": {"name": "scarletmeow", "email": "scarletmeow@users.noreply.github.com", "date": "2016-05-26T20:47:46Z"}, "message": "Merge pull request #190 from scarletmeow/v0.13.2\n\nbump version to v0.13.2", "tree": {"sha": "2fa0495650acf891017b2ce85d7a0e171c13a250", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/2fa0495650acf891017b2ce85d7a0e171c13a250"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/297a38ab5cbb4b3a09d997c307cc66946a78a2c7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/297a38ab5cbb4b3a09d997c307cc66946a78a2c7", "html_url": "https://github.com/airbnb/synapse/commit/297a38ab5cbb4b3a09d997c307cc66946a78a2c7", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/297a38ab5cbb4b3a09d997c307cc66946a78a2c7/comments", "author": {"login": "scarletmeow", "id": 6128469, "avatar_url": "https://avatars2.githubusercontent.com/u/6128469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarletmeow", "html_url": "https://github.com/scarletmeow", "followers_url": "https://api.github.com/users/scarletmeow/followers", "following_url": "https://api.github.com/users/scarletmeow/following{/other_user}", "gists_url": "https://api.github.com/users/scarletmeow/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarletmeow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarletmeow/subscriptions", "organizations_url": "https://api.github.com/users/scarletmeow/orgs", "repos_url": "https://api.github.com/users/scarletmeow/repos", "events_url": "https://api.github.com/users/scarletmeow/events{/privacy}", "received_events_url": "https://api.github.com/users/scarletmeow/received_events", "type": "User", "site_admin": false}, "committer": {"login": "scarletmeow", "id": 6128469, "avatar_url": "https://avatars2.githubusercontent.com/u/6128469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarletmeow", "html_url": "https://github.com/scarletmeow", "followers_url": "https://api.github.com/users/scarletmeow/followers", "following_url": "https://api.github.com/users/scarletmeow/following{/other_user}", "gists_url": "https://api.github.com/users/scarletmeow/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarletmeow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarletmeow/subscriptions", "organizations_url": "https://api.github.com/users/scarletmeow/orgs", "repos_url": "https://api.github.com/users/scarletmeow/repos", "events_url": "https://api.github.com/users/scarletmeow/events{/privacy}", "received_events_url": "https://api.github.com/users/scarletmeow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "72810733b5b926231af0d915fb6e8da3aa26d126", "url": "https://api.github.com/repos/airbnb/synapse/commits/72810733b5b926231af0d915fb6e8da3aa26d126", "html_url": "https://github.com/airbnb/synapse/commit/72810733b5b926231af0d915fb6e8da3aa26d126"}, {"sha": "d579261c2a67dc77e242db163ed0d353d029ee5c", "url": "https://api.github.com/repos/airbnb/synapse/commits/d579261c2a67dc77e242db163ed0d353d029ee5c", "html_url": "https://github.com/airbnb/synapse/commit/d579261c2a67dc77e242db163ed0d353d029ee5c"}]}, {"sha": "47c57c38a062b31ab5bb32af7e4f69887acc4cec", "commit": {"author": {"name": "Igor Serebryany", "email": "igor.serebryany@airbnb.com", "date": "2016-05-26T19:51:54Z"}, "committer": {"name": "Igor Serebryany", "email": "igor.serebryany@airbnb.com", "date": "2016-05-26T19:51:54Z"}, "message": "[spec] test that the state file is regularly updated\n\nwe modify `Haproxy` slightly to make testing easier", "tree": {"sha": "cb3ac31ab8f83144ae7a8ac563b7d377353e8dd5", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/cb3ac31ab8f83144ae7a8ac563b7d377353e8dd5"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/47c57c38a062b31ab5bb32af7e4f69887acc4cec", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/47c57c38a062b31ab5bb32af7e4f69887acc4cec", "html_url": "https://github.com/airbnb/synapse/commit/47c57c38a062b31ab5bb32af7e4f69887acc4cec", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/47c57c38a062b31ab5bb32af7e4f69887acc4cec/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9c16a81c64e99f99e96bb504320ee230fdd29182", "url": "https://api.github.com/repos/airbnb/synapse/commits/9c16a81c64e99f99e96bb504320ee230fdd29182", "html_url": "https://github.com/airbnb/synapse/commit/9c16a81c64e99f99e96bb504320ee230fdd29182"}]}, {"sha": "72810733b5b926231af0d915fb6e8da3aa26d126", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2016-05-26T19:43:46Z"}, "committer": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2016-05-26T19:43:46Z"}, "message": "Merge pull request #189 from airbnb/label-filter-readme\n\nAdd label_filter to README.md", "tree": {"sha": "36c751563216d082d3484f3324a3db5ca9292056", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/36c751563216d082d3484f3324a3db5ca9292056"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/72810733b5b926231af0d915fb6e8da3aa26d126", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/72810733b5b926231af0d915fb6e8da3aa26d126", "html_url": "https://github.com/airbnb/synapse/commit/72810733b5b926231af0d915fb6e8da3aa26d126", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/72810733b5b926231af0d915fb6e8da3aa26d126/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0c2e23425a4446560dac8a665ea32c80c6b6b0bf", "url": "https://api.github.com/repos/airbnb/synapse/commits/0c2e23425a4446560dac8a665ea32c80c6b6b0bf", "html_url": "https://github.com/airbnb/synapse/commit/0c2e23425a4446560dac8a665ea32c80c6b6b0bf"}, {"sha": "68d72d2557b6c6205318f5fea5e1e32d43498f85", "url": "https://api.github.com/repos/airbnb/synapse/commits/68d72d2557b6c6205318f5fea5e1e32d43498f85", "html_url": "https://github.com/airbnb/synapse/commit/68d72d2557b6c6205318f5fea5e1e32d43498f85"}]}, {"sha": "9c16a81c64e99f99e96bb504320ee230fdd29182", "commit": {"author": {"name": "Igor Serebryany", "email": "igor.serebryany@airbnb.com", "date": "2016-05-26T19:31:37Z"}, "committer": {"name": "Igor Serebryany", "email": "igor.serebryany@airbnb.com", "date": "2016-05-26T19:31:37Z"}, "message": "[spec] specs for #update_config of haproxy\n\nthere's quite a lot of complicated logic in that method", "tree": {"sha": "a867d13c5cab8b949ffd41625182614e3d252b72", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/a867d13c5cab8b949ffd41625182614e3d252b72"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/9c16a81c64e99f99e96bb504320ee230fdd29182", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/9c16a81c64e99f99e96bb504320ee230fdd29182", "html_url": "https://github.com/airbnb/synapse/commit/9c16a81c64e99f99e96bb504320ee230fdd29182", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/9c16a81c64e99f99e96bb504320ee230fdd29182/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "61f932fd98d3c32823e2edcb64db4f9c1cdf5616", "url": "https://api.github.com/repos/airbnb/synapse/commits/61f932fd98d3c32823e2edcb64db4f9c1cdf5616", "html_url": "https://github.com/airbnb/synapse/commit/61f932fd98d3c32823e2edcb64db4f9c1cdf5616"}]}, {"sha": "68d72d2557b6c6205318f5fea5e1e32d43498f85", "commit": {"author": {"name": "scarletmeow", "email": "scarletmeow@users.noreply.github.com", "date": "2016-05-26T17:35:42Z"}, "committer": {"name": "scarletmeow", "email": "scarletmeow@users.noreply.github.com", "date": "2016-05-26T17:35:42Z"}, "message": "Add labels documentation to README.md", "tree": {"sha": "36c751563216d082d3484f3324a3db5ca9292056", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/36c751563216d082d3484f3324a3db5ca9292056"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/68d72d2557b6c6205318f5fea5e1e32d43498f85", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/68d72d2557b6c6205318f5fea5e1e32d43498f85", "html_url": "https://github.com/airbnb/synapse/commit/68d72d2557b6c6205318f5fea5e1e32d43498f85", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/68d72d2557b6c6205318f5fea5e1e32d43498f85/comments", "author": {"login": "scarletmeow", "id": 6128469, "avatar_url": "https://avatars2.githubusercontent.com/u/6128469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarletmeow", "html_url": "https://github.com/scarletmeow", "followers_url": "https://api.github.com/users/scarletmeow/followers", "following_url": "https://api.github.com/users/scarletmeow/following{/other_user}", "gists_url": "https://api.github.com/users/scarletmeow/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarletmeow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarletmeow/subscriptions", "organizations_url": "https://api.github.com/users/scarletmeow/orgs", "repos_url": "https://api.github.com/users/scarletmeow/repos", "events_url": "https://api.github.com/users/scarletmeow/events{/privacy}", "received_events_url": "https://api.github.com/users/scarletmeow/received_events", "type": "User", "site_admin": false}, "committer": {"login": "scarletmeow", "id": 6128469, "avatar_url": "https://avatars2.githubusercontent.com/u/6128469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarletmeow", "html_url": "https://github.com/scarletmeow", "followers_url": "https://api.github.com/users/scarletmeow/followers", "following_url": "https://api.github.com/users/scarletmeow/following{/other_user}", "gists_url": "https://api.github.com/users/scarletmeow/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarletmeow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarletmeow/subscriptions", "organizations_url": "https://api.github.com/users/scarletmeow/orgs", "repos_url": "https://api.github.com/users/scarletmeow/repos", "events_url": "https://api.github.com/users/scarletmeow/events{/privacy}", "received_events_url": "https://api.github.com/users/scarletmeow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e5d3dc2be88d33f65e0e04f3fb6d933fec3208a5", "url": "https://api.github.com/repos/airbnb/synapse/commits/e5d3dc2be88d33f65e0e04f3fb6d933fec3208a5", "html_url": "https://github.com/airbnb/synapse/commit/e5d3dc2be88d33f65e0e04f3fb6d933fec3208a5"}]}, {"sha": "e5d3dc2be88d33f65e0e04f3fb6d933fec3208a5", "commit": {"author": {"name": "scarletmeow", "email": "scarletmeow@users.noreply.github.com", "date": "2016-05-26T17:32:33Z"}, "committer": {"name": "scarletmeow", "email": "scarletmeow@users.noreply.github.com", "date": "2016-05-26T17:32:33Z"}, "message": "Add label_filter to README.md", "tree": {"sha": "20c8eaf6d3e0449ee207281c812ee8de74ffbf77", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/20c8eaf6d3e0449ee207281c812ee8de74ffbf77"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/e5d3dc2be88d33f65e0e04f3fb6d933fec3208a5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/e5d3dc2be88d33f65e0e04f3fb6d933fec3208a5", "html_url": "https://github.com/airbnb/synapse/commit/e5d3dc2be88d33f65e0e04f3fb6d933fec3208a5", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/e5d3dc2be88d33f65e0e04f3fb6d933fec3208a5/comments", "author": {"login": "scarletmeow", "id": 6128469, "avatar_url": "https://avatars2.githubusercontent.com/u/6128469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarletmeow", "html_url": "https://github.com/scarletmeow", "followers_url": "https://api.github.com/users/scarletmeow/followers", "following_url": "https://api.github.com/users/scarletmeow/following{/other_user}", "gists_url": "https://api.github.com/users/scarletmeow/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarletmeow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarletmeow/subscriptions", "organizations_url": "https://api.github.com/users/scarletmeow/orgs", "repos_url": "https://api.github.com/users/scarletmeow/repos", "events_url": "https://api.github.com/users/scarletmeow/events{/privacy}", "received_events_url": "https://api.github.com/users/scarletmeow/received_events", "type": "User", "site_admin": false}, "committer": {"login": "scarletmeow", "id": 6128469, "avatar_url": "https://avatars2.githubusercontent.com/u/6128469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarletmeow", "html_url": "https://github.com/scarletmeow", "followers_url": "https://api.github.com/users/scarletmeow/followers", "following_url": "https://api.github.com/users/scarletmeow/following{/other_user}", "gists_url": "https://api.github.com/users/scarletmeow/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarletmeow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarletmeow/subscriptions", "organizations_url": "https://api.github.com/users/scarletmeow/orgs", "repos_url": "https://api.github.com/users/scarletmeow/repos", "events_url": "https://api.github.com/users/scarletmeow/events{/privacy}", "received_events_url": "https://api.github.com/users/scarletmeow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0c2e23425a4446560dac8a665ea32c80c6b6b0bf", "url": "https://api.github.com/repos/airbnb/synapse/commits/0c2e23425a4446560dac8a665ea32c80c6b6b0bf", "html_url": "https://github.com/airbnb/synapse/commit/0c2e23425a4446560dac8a665ea32c80c6b6b0bf"}]}, {"sha": "0c2e23425a4446560dac8a665ea32c80c6b6b0bf", "commit": {"author": {"name": "scarletmeow", "email": "scarletmeow@users.noreply.github.com", "date": "2016-05-26T17:16:48Z"}, "committer": {"name": "scarletmeow", "email": "scarletmeow@users.noreply.github.com", "date": "2016-05-26T17:16:48Z"}, "message": "Merge pull request #188 from scarletmeow/zk_dns_watcher\n\nlabel_filter support for zookeeper_dns", "tree": {"sha": "9b5ad710945e223a257b918b413718520d78217c", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/9b5ad710945e223a257b918b413718520d78217c"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/0c2e23425a4446560dac8a665ea32c80c6b6b0bf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/0c2e23425a4446560dac8a665ea32c80c6b6b0bf", "html_url": "https://github.com/airbnb/synapse/commit/0c2e23425a4446560dac8a665ea32c80c6b6b0bf", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/0c2e23425a4446560dac8a665ea32c80c6b6b0bf/comments", "author": {"login": "scarletmeow", "id": 6128469, "avatar_url": "https://avatars2.githubusercontent.com/u/6128469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarletmeow", "html_url": "https://github.com/scarletmeow", "followers_url": "https://api.github.com/users/scarletmeow/followers", "following_url": "https://api.github.com/users/scarletmeow/following{/other_user}", "gists_url": "https://api.github.com/users/scarletmeow/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarletmeow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarletmeow/subscriptions", "organizations_url": "https://api.github.com/users/scarletmeow/orgs", "repos_url": "https://api.github.com/users/scarletmeow/repos", "events_url": "https://api.github.com/users/scarletmeow/events{/privacy}", "received_events_url": "https://api.github.com/users/scarletmeow/received_events", "type": "User", "site_admin": false}, "committer": {"login": "scarletmeow", "id": 6128469, "avatar_url": "https://avatars2.githubusercontent.com/u/6128469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarletmeow", "html_url": "https://github.com/scarletmeow", "followers_url": "https://api.github.com/users/scarletmeow/followers", "following_url": "https://api.github.com/users/scarletmeow/following{/other_user}", "gists_url": "https://api.github.com/users/scarletmeow/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarletmeow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarletmeow/subscriptions", "organizations_url": "https://api.github.com/users/scarletmeow/orgs", "repos_url": "https://api.github.com/users/scarletmeow/repos", "events_url": "https://api.github.com/users/scarletmeow/events{/privacy}", "received_events_url": "https://api.github.com/users/scarletmeow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8197e3ba1f2b86cfe11800b3bd161418091671a7", "url": "https://api.github.com/repos/airbnb/synapse/commits/8197e3ba1f2b86cfe11800b3bd161418091671a7", "html_url": "https://github.com/airbnb/synapse/commit/8197e3ba1f2b86cfe11800b3bd161418091671a7"}, {"sha": "0fd1b0e32dd82950f70d713349d76e16ba3befc9", "url": "https://api.github.com/repos/airbnb/synapse/commits/0fd1b0e32dd82950f70d713349d76e16ba3befc9", "html_url": "https://github.com/airbnb/synapse/commit/0fd1b0e32dd82950f70d713349d76e16ba3befc9"}]}, {"sha": "d579261c2a67dc77e242db163ed0d353d029ee5c", "commit": {"author": {"name": "Tiffany Low", "email": "tiffany.low@airbnb.com", "date": "2016-05-26T16:39:31Z"}, "committer": {"name": "Tiffany Low", "email": "tiffany.low@airbnb.com", "date": "2016-05-26T16:39:31Z"}, "message": "bump version to v0.13.2", "tree": {"sha": "d609ea06ff738dfaef228ad295882c337b41f99a", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/d609ea06ff738dfaef228ad295882c337b41f99a"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/d579261c2a67dc77e242db163ed0d353d029ee5c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/d579261c2a67dc77e242db163ed0d353d029ee5c", "html_url": "https://github.com/airbnb/synapse/commit/d579261c2a67dc77e242db163ed0d353d029ee5c", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/d579261c2a67dc77e242db163ed0d353d029ee5c/comments", "author": null, "committer": null, "parents": [{"sha": "8197e3ba1f2b86cfe11800b3bd161418091671a7", "url": "https://api.github.com/repos/airbnb/synapse/commits/8197e3ba1f2b86cfe11800b3bd161418091671a7", "html_url": "https://github.com/airbnb/synapse/commit/8197e3ba1f2b86cfe11800b3bd161418091671a7"}]}, {"sha": "0fd1b0e32dd82950f70d713349d76e16ba3befc9", "commit": {"author": {"name": "Tiffany Low", "email": "tiffany.low@airbnb.com", "date": "2016-05-26T01:25:37Z"}, "committer": {"name": "Tiffany Low", "email": "tiffany.low@airbnb.com", "date": "2016-05-26T01:25:37Z"}, "message": "label_filter support for zookeeper_dns", "tree": {"sha": "9b5ad710945e223a257b918b413718520d78217c", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/9b5ad710945e223a257b918b413718520d78217c"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/0fd1b0e32dd82950f70d713349d76e16ba3befc9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/0fd1b0e32dd82950f70d713349d76e16ba3befc9", "html_url": "https://github.com/airbnb/synapse/commit/0fd1b0e32dd82950f70d713349d76e16ba3befc9", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/0fd1b0e32dd82950f70d713349d76e16ba3befc9/comments", "author": null, "committer": null, "parents": [{"sha": "8197e3ba1f2b86cfe11800b3bd161418091671a7", "url": "https://api.github.com/repos/airbnb/synapse/commits/8197e3ba1f2b86cfe11800b3bd161418091671a7", "html_url": "https://github.com/airbnb/synapse/commit/8197e3ba1f2b86cfe11800b3bd161418091671a7"}]}, {"sha": "61f932fd98d3c32823e2edcb64db4f9c1cdf5616", "commit": {"author": {"name": "Igor Serebryany", "email": "igor.serebryany@airbnb.com", "date": "2016-05-25T23:59:42Z"}, "committer": {"name": "Igor Serebryany", "email": "igor.serebryany@airbnb.com", "date": "2016-05-25T23:59:42Z"}, "message": "[haproxy] section_fields becomes a constant\n\nnot clear why it was a class var in the first place", "tree": {"sha": "c81f13600d8829f5fe8f1c8ebe1d8b0a0620ea0a", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/c81f13600d8829f5fe8f1c8ebe1d8b0a0620ea0a"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/61f932fd98d3c32823e2edcb64db4f9c1cdf5616", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/61f932fd98d3c32823e2edcb64db4f9c1cdf5616", "html_url": "https://github.com/airbnb/synapse/commit/61f932fd98d3c32823e2edcb64db4f9c1cdf5616", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/61f932fd98d3c32823e2edcb64db4f9c1cdf5616/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c7b30cd5a28b3ed88a6b185360d0cd8a347e2c9b", "url": "https://api.github.com/repos/airbnb/synapse/commits/c7b30cd5a28b3ed88a6b185360d0cd8a347e2c9b", "html_url": "https://github.com/airbnb/synapse/commit/c7b30cd5a28b3ed88a6b185360d0cd8a347e2c9b"}]}, {"sha": "c7b30cd5a28b3ed88a6b185360d0cd8a347e2c9b", "commit": {"author": {"name": "Igor Serebryany", "email": "igor.serebryany@airbnb.com", "date": "2016-05-25T23:58:11Z"}, "committer": {"name": "Igor Serebryany", "email": "igor.serebryany@airbnb.com", "date": "2016-05-25T23:58:11Z"}, "message": "[haproxy] factor out name instance var\n\npart of the effort to clean up the public interface of haproxy", "tree": {"sha": "41c603bc3822518defa1460d1833db4ff795b78f", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/41c603bc3822518defa1460d1833db4ff795b78f"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/c7b30cd5a28b3ed88a6b185360d0cd8a347e2c9b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/c7b30cd5a28b3ed88a6b185360d0cd8a347e2c9b", "html_url": "https://github.com/airbnb/synapse/commit/c7b30cd5a28b3ed88a6b185360d0cd8a347e2c9b", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/c7b30cd5a28b3ed88a6b185360d0cd8a347e2c9b/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8197e3ba1f2b86cfe11800b3bd161418091671a7", "url": "https://api.github.com/repos/airbnb/synapse/commits/8197e3ba1f2b86cfe11800b3bd161418091671a7", "html_url": "https://github.com/airbnb/synapse/commit/8197e3ba1f2b86cfe11800b3bd161418091671a7"}]}, {"sha": "8197e3ba1f2b86cfe11800b3bd161418091671a7", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2016-04-23T16:27:15Z"}, "committer": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2016-04-23T16:27:15Z"}, "message": "Merge pull request #186 from airbnb/fix_spec_test_config_more\n\nFix the spec minimum config to be more realistic", "tree": {"sha": "9cc0b9e959bd2b12ca85e3859a7595d6af1ecee1", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/9cc0b9e959bd2b12ca85e3859a7595d6af1ecee1"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/8197e3ba1f2b86cfe11800b3bd161418091671a7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/8197e3ba1f2b86cfe11800b3bd161418091671a7", "html_url": "https://github.com/airbnb/synapse/commit/8197e3ba1f2b86cfe11800b3bd161418091671a7", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/8197e3ba1f2b86cfe11800b3bd161418091671a7/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2717610ff1345be64ea7c6098b3ef85fb4a5786a", "url": "https://api.github.com/repos/airbnb/synapse/commits/2717610ff1345be64ea7c6098b3ef85fb4a5786a", "html_url": "https://github.com/airbnb/synapse/commit/2717610ff1345be64ea7c6098b3ef85fb4a5786a"}, {"sha": "0c947889aafc54dc00ce1ec26b81d2c8da289341", "url": "https://api.github.com/repos/airbnb/synapse/commits/0c947889aafc54dc00ce1ec26b81d2c8da289341", "html_url": "https://github.com/airbnb/synapse/commit/0c947889aafc54dc00ce1ec26b81d2c8da289341"}]}, {"sha": "0c947889aafc54dc00ce1ec26b81d2c8da289341", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2016-04-23T16:24:14Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2016-04-23T16:24:14Z"}, "message": "Fix the spec minimum config to be more realistic", "tree": {"sha": "9cc0b9e959bd2b12ca85e3859a7595d6af1ecee1", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/9cc0b9e959bd2b12ca85e3859a7595d6af1ecee1"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/0c947889aafc54dc00ce1ec26b81d2c8da289341", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/0c947889aafc54dc00ce1ec26b81d2c8da289341", "html_url": "https://github.com/airbnb/synapse/commit/0c947889aafc54dc00ce1ec26b81d2c8da289341", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/0c947889aafc54dc00ce1ec26b81d2c8da289341/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2717610ff1345be64ea7c6098b3ef85fb4a5786a", "url": "https://api.github.com/repos/airbnb/synapse/commits/2717610ff1345be64ea7c6098b3ef85fb4a5786a", "html_url": "https://github.com/airbnb/synapse/commit/2717610ff1345be64ea7c6098b3ef85fb4a5786a"}]}, {"sha": "2717610ff1345be64ea7c6098b3ef85fb4a5786a", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2016-04-23T16:18:27Z"}, "committer": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2016-04-23T16:18:27Z"}, "message": "Merge pull request #183 from tomfitzhenry/fix-minimum-conf\n\nFix spec/support/minimum.conf.yaml", "tree": {"sha": "858f93082a86e0b8546235962162b2c4e53bf7b4", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/858f93082a86e0b8546235962162b2c4e53bf7b4"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/2717610ff1345be64ea7c6098b3ef85fb4a5786a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/2717610ff1345be64ea7c6098b3ef85fb4a5786a", "html_url": "https://github.com/airbnb/synapse/commit/2717610ff1345be64ea7c6098b3ef85fb4a5786a", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/2717610ff1345be64ea7c6098b3ef85fb4a5786a/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7492086e1e44624d47962e90a66501662319bdf1", "url": "https://api.github.com/repos/airbnb/synapse/commits/7492086e1e44624d47962e90a66501662319bdf1", "html_url": "https://github.com/airbnb/synapse/commit/7492086e1e44624d47962e90a66501662319bdf1"}, {"sha": "48f5e55b31cd4fb82b86679f06dfff50c0079bd8", "url": "https://api.github.com/repos/airbnb/synapse/commits/48f5e55b31cd4fb82b86679f06dfff50c0079bd8", "html_url": "https://github.com/airbnb/synapse/commit/48f5e55b31cd4fb82b86679f06dfff50c0079bd8"}]}, {"sha": "48f5e55b31cd4fb82b86679f06dfff50c0079bd8", "commit": {"author": {"name": "tom", "email": "tom@tom.tf", "date": "2016-04-08T20:42:49Z"}, "committer": {"name": "tom", "email": "tom@tom.tf", "date": "2016-04-08T20:45:17Z"}, "message": "Fix spec/support/minimum.conf.yaml\n\n* 'services' is a hash, not a list\n* 'services' needs a 'haproxy' key", "tree": {"sha": "858f93082a86e0b8546235962162b2c4e53bf7b4", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/858f93082a86e0b8546235962162b2c4e53bf7b4"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/48f5e55b31cd4fb82b86679f06dfff50c0079bd8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/48f5e55b31cd4fb82b86679f06dfff50c0079bd8", "html_url": "https://github.com/airbnb/synapse/commit/48f5e55b31cd4fb82b86679f06dfff50c0079bd8", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/48f5e55b31cd4fb82b86679f06dfff50c0079bd8/comments", "author": {"login": "tomfitzhenry", "id": 61303, "avatar_url": "https://avatars3.githubusercontent.com/u/61303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomfitzhenry", "html_url": "https://github.com/tomfitzhenry", "followers_url": "https://api.github.com/users/tomfitzhenry/followers", "following_url": "https://api.github.com/users/tomfitzhenry/following{/other_user}", "gists_url": "https://api.github.com/users/tomfitzhenry/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomfitzhenry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomfitzhenry/subscriptions", "organizations_url": "https://api.github.com/users/tomfitzhenry/orgs", "repos_url": "https://api.github.com/users/tomfitzhenry/repos", "events_url": "https://api.github.com/users/tomfitzhenry/events{/privacy}", "received_events_url": "https://api.github.com/users/tomfitzhenry/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tomfitzhenry", "id": 61303, "avatar_url": "https://avatars3.githubusercontent.com/u/61303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomfitzhenry", "html_url": "https://github.com/tomfitzhenry", "followers_url": "https://api.github.com/users/tomfitzhenry/followers", "following_url": "https://api.github.com/users/tomfitzhenry/following{/other_user}", "gists_url": "https://api.github.com/users/tomfitzhenry/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomfitzhenry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomfitzhenry/subscriptions", "organizations_url": "https://api.github.com/users/tomfitzhenry/orgs", "repos_url": "https://api.github.com/users/tomfitzhenry/repos", "events_url": "https://api.github.com/users/tomfitzhenry/events{/privacy}", "received_events_url": "https://api.github.com/users/tomfitzhenry/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7492086e1e44624d47962e90a66501662319bdf1", "url": "https://api.github.com/repos/airbnb/synapse/commits/7492086e1e44624d47962e90a66501662319bdf1", "html_url": "https://github.com/airbnb/synapse/commit/7492086e1e44624d47962e90a66501662319bdf1"}]}, {"sha": "7492086e1e44624d47962e90a66501662319bdf1", "commit": {"author": {"name": "Igor Serebryany", "email": "igor47@moomers.org", "date": "2016-02-24T21:47:19Z"}, "committer": {"name": "Igor Serebryany", "email": "igor47@moomers.org", "date": "2016-02-24T21:47:19Z"}, "message": "Merge pull request #171 from hightoxicity/feat-hash-backendnames-in-cookie\n\nPermit to hash servernames in affinity cookie", "tree": {"sha": "a551959b1ae2f1d9b26f1eed21f00b34ce3c3a7a", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/a551959b1ae2f1d9b26f1eed21f00b34ce3c3a7a"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/7492086e1e44624d47962e90a66501662319bdf1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/7492086e1e44624d47962e90a66501662319bdf1", "html_url": "https://github.com/airbnb/synapse/commit/7492086e1e44624d47962e90a66501662319bdf1", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/7492086e1e44624d47962e90a66501662319bdf1/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d065cacdec6288417002a2de63f7779a37bd1cfb", "url": "https://api.github.com/repos/airbnb/synapse/commits/d065cacdec6288417002a2de63f7779a37bd1cfb", "html_url": "https://github.com/airbnb/synapse/commit/d065cacdec6288417002a2de63f7779a37bd1cfb"}, {"sha": "99f8ce96f953fcb1d0dbf9d63ce9463a81122f85", "url": "https://api.github.com/repos/airbnb/synapse/commits/99f8ce96f953fcb1d0dbf9d63ce9463a81122f85", "html_url": "https://github.com/airbnb/synapse/commit/99f8ce96f953fcb1d0dbf9d63ce9463a81122f85"}]}, {"sha": "d065cacdec6288417002a2de63f7779a37bd1cfb", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2016-02-23T22:04:57Z"}, "committer": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2016-02-23T22:04:57Z"}, "message": "Merge pull request #177 from airbnb/fix_json_regression\n\nFix regression where @seen becomes nil due to JSON parsing", "tree": {"sha": "a12aabbc3f32f12c94fc54b3eca30fc2ec983a76", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/a12aabbc3f32f12c94fc54b3eca30fc2ec983a76"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/d065cacdec6288417002a2de63f7779a37bd1cfb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/d065cacdec6288417002a2de63f7779a37bd1cfb", "html_url": "https://github.com/airbnb/synapse/commit/d065cacdec6288417002a2de63f7779a37bd1cfb", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/d065cacdec6288417002a2de63f7779a37bd1cfb/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8ffa98f685a28f0adb7e15074d490c052e99243d", "url": "https://api.github.com/repos/airbnb/synapse/commits/8ffa98f685a28f0adb7e15074d490c052e99243d", "html_url": "https://github.com/airbnb/synapse/commit/8ffa98f685a28f0adb7e15074d490c052e99243d"}, {"sha": "224ba393e334864fc6d00c7e393d9c6fe04e0fae", "url": "https://api.github.com/repos/airbnb/synapse/commits/224ba393e334864fc6d00c7e393d9c6fe04e0fae", "html_url": "https://github.com/airbnb/synapse/commit/224ba393e334864fc6d00c7e393d9c6fe04e0fae"}]}, {"sha": "224ba393e334864fc6d00c7e393d9c6fe04e0fae", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2016-02-23T20:50:10Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2016-02-23T20:50:10Z"}, "message": "Fix regression where @seen becomes nil due to JSON parsing\n\nJSON used to raise an exception on an empty file, now it returns nil ...", "tree": {"sha": "a12aabbc3f32f12c94fc54b3eca30fc2ec983a76", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/a12aabbc3f32f12c94fc54b3eca30fc2ec983a76"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/224ba393e334864fc6d00c7e393d9c6fe04e0fae", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/224ba393e334864fc6d00c7e393d9c6fe04e0fae", "html_url": "https://github.com/airbnb/synapse/commit/224ba393e334864fc6d00c7e393d9c6fe04e0fae", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/224ba393e334864fc6d00c7e393d9c6fe04e0fae/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8ffa98f685a28f0adb7e15074d490c052e99243d", "url": "https://api.github.com/repos/airbnb/synapse/commits/8ffa98f685a28f0adb7e15074d490c052e99243d", "html_url": "https://github.com/airbnb/synapse/commit/8ffa98f685a28f0adb7e15074d490c052e99243d"}]}, {"sha": "99f8ce96f953fcb1d0dbf9d63ce9463a81122f85", "commit": {"author": {"name": "Tony Fouchard", "email": "tony.fouchard@blablacar.com", "date": "2016-02-20T16:02:06Z"}, "committer": {"name": "Tony Fouchard", "email": "tony.fouchard@blablacar.com", "date": "2016-02-23T10:47:35Z"}, "message": "Permit to hash servernames in affinity cookie", "tree": {"sha": "ce8646e9b5a9f8245b1f984c75014f369ccc3594", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/ce8646e9b5a9f8245b1f984c75014f369ccc3594"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/99f8ce96f953fcb1d0dbf9d63ce9463a81122f85", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/99f8ce96f953fcb1d0dbf9d63ce9463a81122f85", "html_url": "https://github.com/airbnb/synapse/commit/99f8ce96f953fcb1d0dbf9d63ce9463a81122f85", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/99f8ce96f953fcb1d0dbf9d63ce9463a81122f85/comments", "author": {"login": "djnos", "id": 8875617, "avatar_url": "https://avatars0.githubusercontent.com/u/8875617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/djnos", "html_url": "https://github.com/djnos", "followers_url": "https://api.github.com/users/djnos/followers", "following_url": "https://api.github.com/users/djnos/following{/other_user}", "gists_url": "https://api.github.com/users/djnos/gists{/gist_id}", "starred_url": "https://api.github.com/users/djnos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/djnos/subscriptions", "organizations_url": "https://api.github.com/users/djnos/orgs", "repos_url": "https://api.github.com/users/djnos/repos", "events_url": "https://api.github.com/users/djnos/events{/privacy}", "received_events_url": "https://api.github.com/users/djnos/received_events", "type": "User", "site_admin": false}, "committer": {"login": "djnos", "id": 8875617, "avatar_url": "https://avatars0.githubusercontent.com/u/8875617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/djnos", "html_url": "https://github.com/djnos", "followers_url": "https://api.github.com/users/djnos/followers", "following_url": "https://api.github.com/users/djnos/following{/other_user}", "gists_url": "https://api.github.com/users/djnos/gists{/gist_id}", "starred_url": "https://api.github.com/users/djnos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/djnos/subscriptions", "organizations_url": "https://api.github.com/users/djnos/orgs", "repos_url": "https://api.github.com/users/djnos/repos", "events_url": "https://api.github.com/users/djnos/events{/privacy}", "received_events_url": "https://api.github.com/users/djnos/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8ffa98f685a28f0adb7e15074d490c052e99243d", "url": "https://api.github.com/repos/airbnb/synapse/commits/8ffa98f685a28f0adb7e15074d490c052e99243d", "html_url": "https://github.com/airbnb/synapse/commit/8ffa98f685a28f0adb7e15074d490c052e99243d"}]}, {"sha": "8ffa98f685a28f0adb7e15074d490c052e99243d", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2016-02-20T18:34:16Z"}, "committer": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2016-02-20T18:34:16Z"}, "message": "Merge pull request #175 from hightoxicity/feat-fix-test-failure-on-glob\n\nFeat fix test failure on glob", "tree": {"sha": "27aad5643d99ed33a5395b89cf3c9c2d3a0136c0", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/27aad5643d99ed33a5395b89cf3c9c2d3a0136c0"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/8ffa98f685a28f0adb7e15074d490c052e99243d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/8ffa98f685a28f0adb7e15074d490c052e99243d", "html_url": "https://github.com/airbnb/synapse/commit/8ffa98f685a28f0adb7e15074d490c052e99243d", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/8ffa98f685a28f0adb7e15074d490c052e99243d/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a24aaca8de8d6e757500cef28059055cf906af83", "url": "https://api.github.com/repos/airbnb/synapse/commits/a24aaca8de8d6e757500cef28059055cf906af83", "html_url": "https://github.com/airbnb/synapse/commit/a24aaca8de8d6e757500cef28059055cf906af83"}, {"sha": "65f84f6bc4b3017a0fdf3b649f1798dbda7bd8e1", "url": "https://api.github.com/repos/airbnb/synapse/commits/65f84f6bc4b3017a0fdf3b649f1798dbda7bd8e1", "html_url": "https://github.com/airbnb/synapse/commit/65f84f6bc4b3017a0fdf3b649f1798dbda7bd8e1"}]}, {"sha": "65f84f6bc4b3017a0fdf3b649f1798dbda7bd8e1", "commit": {"author": {"name": "Tony Fouchard", "email": "tony.fouchard@blablacar.com", "date": "2016-02-20T17:00:00Z"}, "committer": {"name": "Tony Fouchard", "email": "tony.fouchard@blablacar.com", "date": "2016-02-20T17:04:09Z"}, "message": "Fix a breaking test", "tree": {"sha": "27aad5643d99ed33a5395b89cf3c9c2d3a0136c0", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/27aad5643d99ed33a5395b89cf3c9c2d3a0136c0"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/65f84f6bc4b3017a0fdf3b649f1798dbda7bd8e1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/65f84f6bc4b3017a0fdf3b649f1798dbda7bd8e1", "html_url": "https://github.com/airbnb/synapse/commit/65f84f6bc4b3017a0fdf3b649f1798dbda7bd8e1", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/65f84f6bc4b3017a0fdf3b649f1798dbda7bd8e1/comments", "author": {"login": "djnos", "id": 8875617, "avatar_url": "https://avatars0.githubusercontent.com/u/8875617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/djnos", "html_url": "https://github.com/djnos", "followers_url": "https://api.github.com/users/djnos/followers", "following_url": "https://api.github.com/users/djnos/following{/other_user}", "gists_url": "https://api.github.com/users/djnos/gists{/gist_id}", "starred_url": "https://api.github.com/users/djnos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/djnos/subscriptions", "organizations_url": "https://api.github.com/users/djnos/orgs", "repos_url": "https://api.github.com/users/djnos/repos", "events_url": "https://api.github.com/users/djnos/events{/privacy}", "received_events_url": "https://api.github.com/users/djnos/received_events", "type": "User", "site_admin": false}, "committer": {"login": "djnos", "id": 8875617, "avatar_url": "https://avatars0.githubusercontent.com/u/8875617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/djnos", "html_url": "https://github.com/djnos", "followers_url": "https://api.github.com/users/djnos/followers", "following_url": "https://api.github.com/users/djnos/following{/other_user}", "gists_url": "https://api.github.com/users/djnos/gists{/gist_id}", "starred_url": "https://api.github.com/users/djnos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/djnos/subscriptions", "organizations_url": "https://api.github.com/users/djnos/orgs", "repos_url": "https://api.github.com/users/djnos/repos", "events_url": "https://api.github.com/users/djnos/events{/privacy}", "received_events_url": "https://api.github.com/users/djnos/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a24aaca8de8d6e757500cef28059055cf906af83", "url": "https://api.github.com/repos/airbnb/synapse/commits/a24aaca8de8d6e757500cef28059055cf906af83", "html_url": "https://github.com/airbnb/synapse/commit/a24aaca8de8d6e757500cef28059055cf906af83"}]}, {"sha": "a24aaca8de8d6e757500cef28059055cf906af83", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2016-02-18T10:41:45Z"}, "committer": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2016-02-18T10:41:45Z"}, "message": "Merge pull request #170 from hightoxicity/feat-ha1.6-http-reuse\n\nBe able to use http-reuse to make connections pooling with backends", "tree": {"sha": "7c3d085d7ce25c879fc814755003856eba0ed53c", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/7c3d085d7ce25c879fc814755003856eba0ed53c"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/a24aaca8de8d6e757500cef28059055cf906af83", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/a24aaca8de8d6e757500cef28059055cf906af83", "html_url": "https://github.com/airbnb/synapse/commit/a24aaca8de8d6e757500cef28059055cf906af83", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/a24aaca8de8d6e757500cef28059055cf906af83/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ca8f7e4f91faa6ef459ea87eeeee278e663366fa", "url": "https://api.github.com/repos/airbnb/synapse/commits/ca8f7e4f91faa6ef459ea87eeeee278e663366fa", "html_url": "https://github.com/airbnb/synapse/commit/ca8f7e4f91faa6ef459ea87eeeee278e663366fa"}, {"sha": "abbdf2a34cce4ba7e0f164ed39ef010d632f9241", "url": "https://api.github.com/repos/airbnb/synapse/commits/abbdf2a34cce4ba7e0f164ed39ef010d632f9241", "html_url": "https://github.com/airbnb/synapse/commit/abbdf2a34cce4ba7e0f164ed39ef010d632f9241"}]}, {"sha": "abbdf2a34cce4ba7e0f164ed39ef010d632f9241", "commit": {"author": {"name": "Tony Fouchard", "email": "tony.fouchard@blablacar.com", "date": "2016-02-18T09:40:25Z"}, "committer": {"name": "Tony Fouchard", "email": "tony.fouchard@blablacar.com", "date": "2016-02-18T09:40:25Z"}, "message": "Be able to use http-reuse to make connections pooling with backends (introduced with hap 1.6)", "tree": {"sha": "7c3d085d7ce25c879fc814755003856eba0ed53c", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/7c3d085d7ce25c879fc814755003856eba0ed53c"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/abbdf2a34cce4ba7e0f164ed39ef010d632f9241", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/abbdf2a34cce4ba7e0f164ed39ef010d632f9241", "html_url": "https://github.com/airbnb/synapse/commit/abbdf2a34cce4ba7e0f164ed39ef010d632f9241", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/abbdf2a34cce4ba7e0f164ed39ef010d632f9241/comments", "author": {"login": "djnos", "id": 8875617, "avatar_url": "https://avatars0.githubusercontent.com/u/8875617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/djnos", "html_url": "https://github.com/djnos", "followers_url": "https://api.github.com/users/djnos/followers", "following_url": "https://api.github.com/users/djnos/following{/other_user}", "gists_url": "https://api.github.com/users/djnos/gists{/gist_id}", "starred_url": "https://api.github.com/users/djnos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/djnos/subscriptions", "organizations_url": "https://api.github.com/users/djnos/orgs", "repos_url": "https://api.github.com/users/djnos/repos", "events_url": "https://api.github.com/users/djnos/events{/privacy}", "received_events_url": "https://api.github.com/users/djnos/received_events", "type": "User", "site_admin": false}, "committer": {"login": "djnos", "id": 8875617, "avatar_url": "https://avatars0.githubusercontent.com/u/8875617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/djnos", "html_url": "https://github.com/djnos", "followers_url": "https://api.github.com/users/djnos/followers", "following_url": "https://api.github.com/users/djnos/following{/other_user}", "gists_url": "https://api.github.com/users/djnos/gists{/gist_id}", "starred_url": "https://api.github.com/users/djnos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/djnos/subscriptions", "organizations_url": "https://api.github.com/users/djnos/orgs", "repos_url": "https://api.github.com/users/djnos/repos", "events_url": "https://api.github.com/users/djnos/events{/privacy}", "received_events_url": "https://api.github.com/users/djnos/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ca8f7e4f91faa6ef459ea87eeeee278e663366fa", "url": "https://api.github.com/repos/airbnb/synapse/commits/ca8f7e4f91faa6ef459ea87eeeee278e663366fa", "html_url": "https://github.com/airbnb/synapse/commit/ca8f7e4f91faa6ef459ea87eeeee278e663366fa"}]}, {"sha": "ca8f7e4f91faa6ef459ea87eeeee278e663366fa", "commit": {"author": {"name": "scarletmeow", "email": "scarletmeow@users.noreply.github.com", "date": "2016-02-18T06:58:12Z"}, "committer": {"name": "scarletmeow", "email": "scarletmeow@users.noreply.github.com", "date": "2016-02-18T06:58:12Z"}, "message": "Merge pull request #169 from scarletmeow/tlow/v0.13.1\n\nbump synapse version to v0.13.1", "tree": {"sha": "0595c6ceb526a24f126b5d087abaf787f7084c83", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/0595c6ceb526a24f126b5d087abaf787f7084c83"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/ca8f7e4f91faa6ef459ea87eeeee278e663366fa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/ca8f7e4f91faa6ef459ea87eeeee278e663366fa", "html_url": "https://github.com/airbnb/synapse/commit/ca8f7e4f91faa6ef459ea87eeeee278e663366fa", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/ca8f7e4f91faa6ef459ea87eeeee278e663366fa/comments", "author": {"login": "scarletmeow", "id": 6128469, "avatar_url": "https://avatars2.githubusercontent.com/u/6128469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarletmeow", "html_url": "https://github.com/scarletmeow", "followers_url": "https://api.github.com/users/scarletmeow/followers", "following_url": "https://api.github.com/users/scarletmeow/following{/other_user}", "gists_url": "https://api.github.com/users/scarletmeow/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarletmeow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarletmeow/subscriptions", "organizations_url": "https://api.github.com/users/scarletmeow/orgs", "repos_url": "https://api.github.com/users/scarletmeow/repos", "events_url": "https://api.github.com/users/scarletmeow/events{/privacy}", "received_events_url": "https://api.github.com/users/scarletmeow/received_events", "type": "User", "site_admin": false}, "committer": {"login": "scarletmeow", "id": 6128469, "avatar_url": "https://avatars2.githubusercontent.com/u/6128469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarletmeow", "html_url": "https://github.com/scarletmeow", "followers_url": "https://api.github.com/users/scarletmeow/followers", "following_url": "https://api.github.com/users/scarletmeow/following{/other_user}", "gists_url": "https://api.github.com/users/scarletmeow/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarletmeow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarletmeow/subscriptions", "organizations_url": "https://api.github.com/users/scarletmeow/orgs", "repos_url": "https://api.github.com/users/scarletmeow/repos", "events_url": "https://api.github.com/users/scarletmeow/events{/privacy}", "received_events_url": "https://api.github.com/users/scarletmeow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "70636990ab7c4c8aa41d6b4a3897788db608b221", "url": "https://api.github.com/repos/airbnb/synapse/commits/70636990ab7c4c8aa41d6b4a3897788db608b221", "html_url": "https://github.com/airbnb/synapse/commit/70636990ab7c4c8aa41d6b4a3897788db608b221"}, {"sha": "0e9a94b885bda9183f7ed2fc58880c39dc4a1fbb", "url": "https://api.github.com/repos/airbnb/synapse/commits/0e9a94b885bda9183f7ed2fc58880c39dc4a1fbb", "html_url": "https://github.com/airbnb/synapse/commit/0e9a94b885bda9183f7ed2fc58880c39dc4a1fbb"}]}, {"sha": "0e9a94b885bda9183f7ed2fc58880c39dc4a1fbb", "commit": {"author": {"name": "Tiffany Low", "email": "tiffany.low@airbnb.com", "date": "2016-02-18T06:53:29Z"}, "committer": {"name": "Tiffany Low", "email": "tiffany.low@airbnb.com", "date": "2016-02-18T06:53:29Z"}, "message": "bump synapse version to v0.13.1", "tree": {"sha": "0595c6ceb526a24f126b5d087abaf787f7084c83", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/0595c6ceb526a24f126b5d087abaf787f7084c83"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/0e9a94b885bda9183f7ed2fc58880c39dc4a1fbb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/0e9a94b885bda9183f7ed2fc58880c39dc4a1fbb", "html_url": "https://github.com/airbnb/synapse/commit/0e9a94b885bda9183f7ed2fc58880c39dc4a1fbb", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/0e9a94b885bda9183f7ed2fc58880c39dc4a1fbb/comments", "author": null, "committer": null, "parents": [{"sha": "70636990ab7c4c8aa41d6b4a3897788db608b221", "url": "https://api.github.com/repos/airbnb/synapse/commits/70636990ab7c4c8aa41d6b4a3897788db608b221", "html_url": "https://github.com/airbnb/synapse/commit/70636990ab7c4c8aa41d6b4a3897788db608b221"}]}, {"sha": "70636990ab7c4c8aa41d6b4a3897788db608b221", "commit": {"author": {"name": "scarletmeow", "email": "scarletmeow@users.noreply.github.com", "date": "2016-02-18T02:42:02Z"}, "committer": {"name": "scarletmeow", "email": "scarletmeow@users.noreply.github.com", "date": "2016-02-18T02:42:02Z"}, "message": "Merge pull request #168 from scarletmeow/tlow/fix-zk-dns\n\nzookeeper_dns is broken", "tree": {"sha": "e7e68f764f193b9552a33112a1b6f307f13ab1ce", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/e7e68f764f193b9552a33112a1b6f307f13ab1ce"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/70636990ab7c4c8aa41d6b4a3897788db608b221", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/70636990ab7c4c8aa41d6b4a3897788db608b221", "html_url": "https://github.com/airbnb/synapse/commit/70636990ab7c4c8aa41d6b4a3897788db608b221", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/70636990ab7c4c8aa41d6b4a3897788db608b221/comments", "author": {"login": "scarletmeow", "id": 6128469, "avatar_url": "https://avatars2.githubusercontent.com/u/6128469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarletmeow", "html_url": "https://github.com/scarletmeow", "followers_url": "https://api.github.com/users/scarletmeow/followers", "following_url": "https://api.github.com/users/scarletmeow/following{/other_user}", "gists_url": "https://api.github.com/users/scarletmeow/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarletmeow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarletmeow/subscriptions", "organizations_url": "https://api.github.com/users/scarletmeow/orgs", "repos_url": "https://api.github.com/users/scarletmeow/repos", "events_url": "https://api.github.com/users/scarletmeow/events{/privacy}", "received_events_url": "https://api.github.com/users/scarletmeow/received_events", "type": "User", "site_admin": false}, "committer": {"login": "scarletmeow", "id": 6128469, "avatar_url": "https://avatars2.githubusercontent.com/u/6128469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarletmeow", "html_url": "https://github.com/scarletmeow", "followers_url": "https://api.github.com/users/scarletmeow/followers", "following_url": "https://api.github.com/users/scarletmeow/following{/other_user}", "gists_url": "https://api.github.com/users/scarletmeow/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarletmeow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarletmeow/subscriptions", "organizations_url": "https://api.github.com/users/scarletmeow/orgs", "repos_url": "https://api.github.com/users/scarletmeow/repos", "events_url": "https://api.github.com/users/scarletmeow/events{/privacy}", "received_events_url": "https://api.github.com/users/scarletmeow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2e68143337c79c0e34807c003cd7b659d8f25e1a", "url": "https://api.github.com/repos/airbnb/synapse/commits/2e68143337c79c0e34807c003cd7b659d8f25e1a", "html_url": "https://github.com/airbnb/synapse/commit/2e68143337c79c0e34807c003cd7b659d8f25e1a"}, {"sha": "1edd876513b850cda93fb20d68226c69682973ae", "url": "https://api.github.com/repos/airbnb/synapse/commits/1edd876513b850cda93fb20d68226c69682973ae", "html_url": "https://github.com/airbnb/synapse/commit/1edd876513b850cda93fb20d68226c69682973ae"}]}, {"sha": "1edd876513b850cda93fb20d68226c69682973ae", "commit": {"author": {"name": "Tiffany Low", "email": "tiffany.low@airbnb.com", "date": "2016-02-18T00:00:49Z"}, "committer": {"name": "Tiffany Low", "email": "tiffany.low@airbnb.com", "date": "2016-02-18T01:24:41Z"}, "message": "always initialize decode_method in zookeeper watcher", "tree": {"sha": "d1b176523dec78c17cd35c030638877697e1b290", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/d1b176523dec78c17cd35c030638877697e1b290"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/1edd876513b850cda93fb20d68226c69682973ae", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/1edd876513b850cda93fb20d68226c69682973ae", "html_url": "https://github.com/airbnb/synapse/commit/1edd876513b850cda93fb20d68226c69682973ae", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/1edd876513b850cda93fb20d68226c69682973ae/comments", "author": null, "committer": null, "parents": [{"sha": "dce9e3e6c6b2155f5bd2f7cd35f74162fe296ab2", "url": "https://api.github.com/repos/airbnb/synapse/commits/dce9e3e6c6b2155f5bd2f7cd35f74162fe296ab2", "html_url": "https://github.com/airbnb/synapse/commit/dce9e3e6c6b2155f5bd2f7cd35f74162fe296ab2"}]}, {"sha": "2e68143337c79c0e34807c003cd7b659d8f25e1a", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2016-02-17T22:29:23Z"}, "committer": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2016-02-17T22:29:23Z"}, "message": "Merge pull request #166 from airbnb/add_backend_order_support\n\nAdd `backend_order` option support to `haproxy`", "tree": {"sha": "d9a810c37b1e14ba87c78b0a427d25a81531febb", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/d9a810c37b1e14ba87c78b0a427d25a81531febb"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/2e68143337c79c0e34807c003cd7b659d8f25e1a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/2e68143337c79c0e34807c003cd7b659d8f25e1a", "html_url": "https://github.com/airbnb/synapse/commit/2e68143337c79c0e34807c003cd7b659d8f25e1a", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/2e68143337c79c0e34807c003cd7b659d8f25e1a/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "dce9e3e6c6b2155f5bd2f7cd35f74162fe296ab2", "url": "https://api.github.com/repos/airbnb/synapse/commits/dce9e3e6c6b2155f5bd2f7cd35f74162fe296ab2", "html_url": "https://github.com/airbnb/synapse/commit/dce9e3e6c6b2155f5bd2f7cd35f74162fe296ab2"}, {"sha": "fc81d9afa559c1fd45de5313aececfa69dcd73ba", "url": "https://api.github.com/repos/airbnb/synapse/commits/fc81d9afa559c1fd45de5313aececfa69dcd73ba", "html_url": "https://github.com/airbnb/synapse/commit/fc81d9afa559c1fd45de5313aececfa69dcd73ba"}]}, {"sha": "dce9e3e6c6b2155f5bd2f7cd35f74162fe296ab2", "commit": {"author": {"name": "scarletmeow", "email": "scarletmeow@users.noreply.github.com", "date": "2016-02-17T20:00:21Z"}, "committer": {"name": "scarletmeow", "email": "scarletmeow@users.noreply.github.com", "date": "2016-02-17T20:00:21Z"}, "message": "Merge pull request #167 from scarletmeow/tlow/v0.13.0\n\nbump version to v0.13.0", "tree": {"sha": "b5802477fa344bf66caa9bd3746bea2bdcc72da1", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/b5802477fa344bf66caa9bd3746bea2bdcc72da1"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/dce9e3e6c6b2155f5bd2f7cd35f74162fe296ab2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/dce9e3e6c6b2155f5bd2f7cd35f74162fe296ab2", "html_url": "https://github.com/airbnb/synapse/commit/dce9e3e6c6b2155f5bd2f7cd35f74162fe296ab2", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/dce9e3e6c6b2155f5bd2f7cd35f74162fe296ab2/comments", "author": {"login": "scarletmeow", "id": 6128469, "avatar_url": "https://avatars2.githubusercontent.com/u/6128469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarletmeow", "html_url": "https://github.com/scarletmeow", "followers_url": "https://api.github.com/users/scarletmeow/followers", "following_url": "https://api.github.com/users/scarletmeow/following{/other_user}", "gists_url": "https://api.github.com/users/scarletmeow/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarletmeow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarletmeow/subscriptions", "organizations_url": "https://api.github.com/users/scarletmeow/orgs", "repos_url": "https://api.github.com/users/scarletmeow/repos", "events_url": "https://api.github.com/users/scarletmeow/events{/privacy}", "received_events_url": "https://api.github.com/users/scarletmeow/received_events", "type": "User", "site_admin": false}, "committer": {"login": "scarletmeow", "id": 6128469, "avatar_url": "https://avatars2.githubusercontent.com/u/6128469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarletmeow", "html_url": "https://github.com/scarletmeow", "followers_url": "https://api.github.com/users/scarletmeow/followers", "following_url": "https://api.github.com/users/scarletmeow/following{/other_user}", "gists_url": "https://api.github.com/users/scarletmeow/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarletmeow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarletmeow/subscriptions", "organizations_url": "https://api.github.com/users/scarletmeow/orgs", "repos_url": "https://api.github.com/users/scarletmeow/repos", "events_url": "https://api.github.com/users/scarletmeow/events{/privacy}", "received_events_url": "https://api.github.com/users/scarletmeow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c0ff4ff8dceb485b64cc7a764d5dc9d3ba3de3db", "url": "https://api.github.com/repos/airbnb/synapse/commits/c0ff4ff8dceb485b64cc7a764d5dc9d3ba3de3db", "html_url": "https://github.com/airbnb/synapse/commit/c0ff4ff8dceb485b64cc7a764d5dc9d3ba3de3db"}, {"sha": "808ed5209ca66944434b8f8696b088a016828785", "url": "https://api.github.com/repos/airbnb/synapse/commits/808ed5209ca66944434b8f8696b088a016828785", "html_url": "https://github.com/airbnb/synapse/commit/808ed5209ca66944434b8f8696b088a016828785"}]}, {"sha": "fc81d9afa559c1fd45de5313aececfa69dcd73ba", "commit": {"author": {"name": "Sonic Wang", "email": "sonic.wang@airbnb.com", "date": "2016-02-14T07:07:04Z"}, "committer": {"name": "Sonic Wang", "email": "sonic.wang@airbnb.com", "date": "2016-02-17T08:26:38Z"}, "message": "Add `backend_order` option support to `haproxy`\n\nCurrently we are doing shuffling (random ordering) only because we wanted to load\nbalance with round-robin to be more even across all machines.\n\nThis option allows one to specify how backends are ordered\nin the final backend stanza configuration. This make it possible to support\nusages that require an identical backend stanza configuration across machines.", "tree": {"sha": "94f2edfcded943e52f235bef92a722e766825281", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/94f2edfcded943e52f235bef92a722e766825281"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/fc81d9afa559c1fd45de5313aececfa69dcd73ba", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/fc81d9afa559c1fd45de5313aececfa69dcd73ba", "html_url": "https://github.com/airbnb/synapse/commit/fc81d9afa559c1fd45de5313aececfa69dcd73ba", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/fc81d9afa559c1fd45de5313aececfa69dcd73ba/comments", "author": null, "committer": null, "parents": [{"sha": "d85810f54398401578f76d17b7fb18cb25e7c545", "url": "https://api.github.com/repos/airbnb/synapse/commits/d85810f54398401578f76d17b7fb18cb25e7c545", "html_url": "https://github.com/airbnb/synapse/commit/d85810f54398401578f76d17b7fb18cb25e7c545"}]}, {"sha": "808ed5209ca66944434b8f8696b088a016828785", "commit": {"author": {"name": "Tiffany Low", "email": "tiffany.low@airbnb.com", "date": "2016-02-17T01:03:20Z"}, "committer": {"name": "Tiffany Low", "email": "tiffany.low@airbnb.com", "date": "2016-02-17T01:03:20Z"}, "message": "bump version to v0.13.0", "tree": {"sha": "b5802477fa344bf66caa9bd3746bea2bdcc72da1", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/b5802477fa344bf66caa9bd3746bea2bdcc72da1"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/808ed5209ca66944434b8f8696b088a016828785", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/808ed5209ca66944434b8f8696b088a016828785", "html_url": "https://github.com/airbnb/synapse/commit/808ed5209ca66944434b8f8696b088a016828785", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/808ed5209ca66944434b8f8696b088a016828785/comments", "author": null, "committer": null, "parents": [{"sha": "c0ff4ff8dceb485b64cc7a764d5dc9d3ba3de3db", "url": "https://api.github.com/repos/airbnb/synapse/commits/c0ff4ff8dceb485b64cc7a764d5dc9d3ba3de3db", "html_url": "https://github.com/airbnb/synapse/commit/c0ff4ff8dceb485b64cc7a764d5dc9d3ba3de3db"}]}, {"sha": "c0ff4ff8dceb485b64cc7a764d5dc9d3ba3de3db", "commit": {"author": {"name": "scarletmeow", "email": "scarletmeow@users.noreply.github.com", "date": "2016-02-17T00:59:18Z"}, "committer": {"name": "scarletmeow", "email": "scarletmeow@users.noreply.github.com", "date": "2016-02-17T00:59:18Z"}, "message": "Merge pull request #164 from scarletmeow/tlow/synapse-filtering\n\nService watcher supports filtering backends by label", "tree": {"sha": "7f6504b44d10346cc6ebbd2201904a3bb9ce6921", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/7f6504b44d10346cc6ebbd2201904a3bb9ce6921"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/c0ff4ff8dceb485b64cc7a764d5dc9d3ba3de3db", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/c0ff4ff8dceb485b64cc7a764d5dc9d3ba3de3db", "html_url": "https://github.com/airbnb/synapse/commit/c0ff4ff8dceb485b64cc7a764d5dc9d3ba3de3db", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/c0ff4ff8dceb485b64cc7a764d5dc9d3ba3de3db/comments", "author": {"login": "scarletmeow", "id": 6128469, "avatar_url": "https://avatars2.githubusercontent.com/u/6128469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarletmeow", "html_url": "https://github.com/scarletmeow", "followers_url": "https://api.github.com/users/scarletmeow/followers", "following_url": "https://api.github.com/users/scarletmeow/following{/other_user}", "gists_url": "https://api.github.com/users/scarletmeow/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarletmeow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarletmeow/subscriptions", "organizations_url": "https://api.github.com/users/scarletmeow/orgs", "repos_url": "https://api.github.com/users/scarletmeow/repos", "events_url": "https://api.github.com/users/scarletmeow/events{/privacy}", "received_events_url": "https://api.github.com/users/scarletmeow/received_events", "type": "User", "site_admin": false}, "committer": {"login": "scarletmeow", "id": 6128469, "avatar_url": "https://avatars2.githubusercontent.com/u/6128469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarletmeow", "html_url": "https://github.com/scarletmeow", "followers_url": "https://api.github.com/users/scarletmeow/followers", "following_url": "https://api.github.com/users/scarletmeow/following{/other_user}", "gists_url": "https://api.github.com/users/scarletmeow/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarletmeow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarletmeow/subscriptions", "organizations_url": "https://api.github.com/users/scarletmeow/orgs", "repos_url": "https://api.github.com/users/scarletmeow/repos", "events_url": "https://api.github.com/users/scarletmeow/events{/privacy}", "received_events_url": "https://api.github.com/users/scarletmeow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d85810f54398401578f76d17b7fb18cb25e7c545", "url": "https://api.github.com/repos/airbnb/synapse/commits/d85810f54398401578f76d17b7fb18cb25e7c545", "html_url": "https://github.com/airbnb/synapse/commit/d85810f54398401578f76d17b7fb18cb25e7c545"}, {"sha": "e794199e0d4e7f83d95cdb3c7737211898ef8200", "url": "https://api.github.com/repos/airbnb/synapse/commits/e794199e0d4e7f83d95cdb3c7737211898ef8200", "html_url": "https://github.com/airbnb/synapse/commit/e794199e0d4e7f83d95cdb3c7737211898ef8200"}]}, {"sha": "e794199e0d4e7f83d95cdb3c7737211898ef8200", "commit": {"author": {"name": "Tiffany Low", "email": "tiffany.low@airbnb.com", "date": "2016-02-11T07:01:34Z"}, "committer": {"name": "Tiffany Low", "email": "tiffany.low@airbnb.com", "date": "2016-02-16T20:01:00Z"}, "message": "Service watcher supports filtering backends by label\n\nAdds a new label_filter configuration in the discovery section.\nOnly the 'equals' label condition is implemented.", "tree": {"sha": "7f6504b44d10346cc6ebbd2201904a3bb9ce6921", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/7f6504b44d10346cc6ebbd2201904a3bb9ce6921"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/e794199e0d4e7f83d95cdb3c7737211898ef8200", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/e794199e0d4e7f83d95cdb3c7737211898ef8200", "html_url": "https://github.com/airbnb/synapse/commit/e794199e0d4e7f83d95cdb3c7737211898ef8200", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/e794199e0d4e7f83d95cdb3c7737211898ef8200/comments", "author": null, "committer": null, "parents": [{"sha": "d85810f54398401578f76d17b7fb18cb25e7c545", "url": "https://api.github.com/repos/airbnb/synapse/commits/d85810f54398401578f76d17b7fb18cb25e7c545", "html_url": "https://github.com/airbnb/synapse/commit/d85810f54398401578f76d17b7fb18cb25e7c545"}]}, {"sha": "d85810f54398401578f76d17b7fb18cb25e7c545", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2016-02-10T02:06:05Z"}, "committer": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2016-02-10T02:06:05Z"}, "message": "Merge pull request #162 from hashbrowncipher/state_file_doc\n\nAdd a note about the state file's use for monitoring Synapse", "tree": {"sha": "570a5fb13058549a2415cfef119be5788ac91b12", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/570a5fb13058549a2415cfef119be5788ac91b12"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/d85810f54398401578f76d17b7fb18cb25e7c545", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/d85810f54398401578f76d17b7fb18cb25e7c545", "html_url": "https://github.com/airbnb/synapse/commit/d85810f54398401578f76d17b7fb18cb25e7c545", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/d85810f54398401578f76d17b7fb18cb25e7c545/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "00024028b3664ca8a34da1db4c8c00cc08c7614a", "url": "https://api.github.com/repos/airbnb/synapse/commits/00024028b3664ca8a34da1db4c8c00cc08c7614a", "html_url": "https://github.com/airbnb/synapse/commit/00024028b3664ca8a34da1db4c8c00cc08c7614a"}, {"sha": "ed3fae9843392cb06a60c96dc6755d9bfa0eb2ee", "url": "https://api.github.com/repos/airbnb/synapse/commits/ed3fae9843392cb06a60c96dc6755d9bfa0eb2ee", "html_url": "https://github.com/airbnb/synapse/commit/ed3fae9843392cb06a60c96dc6755d9bfa0eb2ee"}]}, {"sha": "ed3fae9843392cb06a60c96dc6755d9bfa0eb2ee", "commit": {"author": {"name": "Josh Snyder", "email": "josnyder@yelp.com", "date": "2016-02-10T01:29:20Z"}, "committer": {"name": "Josh Snyder", "email": "josnyder@yelp.com", "date": "2016-02-10T01:29:20Z"}, "message": "Add a note about the state file's use for monitoring Synapse", "tree": {"sha": "570a5fb13058549a2415cfef119be5788ac91b12", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/570a5fb13058549a2415cfef119be5788ac91b12"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/ed3fae9843392cb06a60c96dc6755d9bfa0eb2ee", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/ed3fae9843392cb06a60c96dc6755d9bfa0eb2ee", "html_url": "https://github.com/airbnb/synapse/commit/ed3fae9843392cb06a60c96dc6755d9bfa0eb2ee", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/ed3fae9843392cb06a60c96dc6755d9bfa0eb2ee/comments", "author": null, "committer": null, "parents": [{"sha": "00024028b3664ca8a34da1db4c8c00cc08c7614a", "url": "https://api.github.com/repos/airbnb/synapse/commits/00024028b3664ca8a34da1db4c8c00cc08c7614a", "html_url": "https://github.com/airbnb/synapse/commit/00024028b3664ca8a34da1db4c8c00cc08c7614a"}]}, {"sha": "00024028b3664ca8a34da1db4c8c00cc08c7614a", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2016-01-21T19:29:34Z"}, "committer": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2016-01-21T19:29:34Z"}, "message": "Merge pull request #159 from airbnb/bump_docker_gem\n\nLoosen docker dependency and show how to install older dependencies", "tree": {"sha": "04355ec1771593c0abaf93a667902b3110bc590a", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/04355ec1771593c0abaf93a667902b3110bc590a"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/00024028b3664ca8a34da1db4c8c00cc08c7614a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/00024028b3664ca8a34da1db4c8c00cc08c7614a", "html_url": "https://github.com/airbnb/synapse/commit/00024028b3664ca8a34da1db4c8c00cc08c7614a", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/00024028b3664ca8a34da1db4c8c00cc08c7614a/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8407278c1b7c7375bc66eb821f957bceaad411b0", "url": "https://api.github.com/repos/airbnb/synapse/commits/8407278c1b7c7375bc66eb821f957bceaad411b0", "html_url": "https://github.com/airbnb/synapse/commit/8407278c1b7c7375bc66eb821f957bceaad411b0"}, {"sha": "941e401a822acf7a0c0c32a67ab056ab63433d82", "url": "https://api.github.com/repos/airbnb/synapse/commits/941e401a822acf7a0c0c32a67ab056ab63433d82", "html_url": "https://github.com/airbnb/synapse/commit/941e401a822acf7a0c0c32a67ab056ab63433d82"}]}, {"sha": "941e401a822acf7a0c0c32a67ab056ab63433d82", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2016-01-21T19:07:40Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2016-01-21T19:07:40Z"}, "message": "Loosen docker dependency and show how to install older dependencies", "tree": {"sha": "04355ec1771593c0abaf93a667902b3110bc590a", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/04355ec1771593c0abaf93a667902b3110bc590a"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/941e401a822acf7a0c0c32a67ab056ab63433d82", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/941e401a822acf7a0c0c32a67ab056ab63433d82", "html_url": "https://github.com/airbnb/synapse/commit/941e401a822acf7a0c0c32a67ab056ab63433d82", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/941e401a822acf7a0c0c32a67ab056ab63433d82/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8407278c1b7c7375bc66eb821f957bceaad411b0", "url": "https://api.github.com/repos/airbnb/synapse/commits/8407278c1b7c7375bc66eb821f957bceaad411b0", "html_url": "https://github.com/airbnb/synapse/commit/8407278c1b7c7375bc66eb821f957bceaad411b0"}]}, {"sha": "8407278c1b7c7375bc66eb821f957bceaad411b0", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2016-01-15T20:00:48Z"}, "committer": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2016-01-15T20:00:48Z"}, "message": "Merge pull request #156 from twellspring/per-service_bind_address\n\nallow bind_address in the service haproxy section", "tree": {"sha": "1bc337b04b623e686c35da2ffa5262d71e126800", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/1bc337b04b623e686c35da2ffa5262d71e126800"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/8407278c1b7c7375bc66eb821f957bceaad411b0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/8407278c1b7c7375bc66eb821f957bceaad411b0", "html_url": "https://github.com/airbnb/synapse/commit/8407278c1b7c7375bc66eb821f957bceaad411b0", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/8407278c1b7c7375bc66eb821f957bceaad411b0/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d8dffea13ca57681b1cefa12819231d14dbcea6e", "url": "https://api.github.com/repos/airbnb/synapse/commits/d8dffea13ca57681b1cefa12819231d14dbcea6e", "html_url": "https://github.com/airbnb/synapse/commit/d8dffea13ca57681b1cefa12819231d14dbcea6e"}, {"sha": "77040b87847f446a7fcb9134844bd514b77008d6", "url": "https://api.github.com/repos/airbnb/synapse/commits/77040b87847f446a7fcb9134844bd514b77008d6", "html_url": "https://github.com/airbnb/synapse/commit/77040b87847f446a7fcb9134844bd514b77008d6"}]}, {"sha": "77040b87847f446a7fcb9134844bd514b77008d6", "commit": {"author": {"name": "Todd Wells", "email": "todd@wells.ws", "date": "2016-01-15T19:54:49Z"}, "committer": {"name": "Todd Wells", "email": "todd@wells.ws", "date": "2016-01-15T19:54:49Z"}, "message": "add generate_frontend_stanza test", "tree": {"sha": "1bc337b04b623e686c35da2ffa5262d71e126800", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/1bc337b04b623e686c35da2ffa5262d71e126800"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/77040b87847f446a7fcb9134844bd514b77008d6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/77040b87847f446a7fcb9134844bd514b77008d6", "html_url": "https://github.com/airbnb/synapse/commit/77040b87847f446a7fcb9134844bd514b77008d6", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/77040b87847f446a7fcb9134844bd514b77008d6/comments", "author": {"login": "twellspring", "id": 9868888, "avatar_url": "https://avatars2.githubusercontent.com/u/9868888?v=4", "gravatar_id": "", "url": "https://api.github.com/users/twellspring", "html_url": "https://github.com/twellspring", "followers_url": "https://api.github.com/users/twellspring/followers", "following_url": "https://api.github.com/users/twellspring/following{/other_user}", "gists_url": "https://api.github.com/users/twellspring/gists{/gist_id}", "starred_url": "https://api.github.com/users/twellspring/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/twellspring/subscriptions", "organizations_url": "https://api.github.com/users/twellspring/orgs", "repos_url": "https://api.github.com/users/twellspring/repos", "events_url": "https://api.github.com/users/twellspring/events{/privacy}", "received_events_url": "https://api.github.com/users/twellspring/received_events", "type": "User", "site_admin": false}, "committer": {"login": "twellspring", "id": 9868888, "avatar_url": "https://avatars2.githubusercontent.com/u/9868888?v=4", "gravatar_id": "", "url": "https://api.github.com/users/twellspring", "html_url": "https://github.com/twellspring", "followers_url": "https://api.github.com/users/twellspring/followers", "following_url": "https://api.github.com/users/twellspring/following{/other_user}", "gists_url": "https://api.github.com/users/twellspring/gists{/gist_id}", "starred_url": "https://api.github.com/users/twellspring/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/twellspring/subscriptions", "organizations_url": "https://api.github.com/users/twellspring/orgs", "repos_url": "https://api.github.com/users/twellspring/repos", "events_url": "https://api.github.com/users/twellspring/events{/privacy}", "received_events_url": "https://api.github.com/users/twellspring/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f71667419123d820b339d8c9f31158dffe845f14", "url": "https://api.github.com/repos/airbnb/synapse/commits/f71667419123d820b339d8c9f31158dffe845f14", "html_url": "https://github.com/airbnb/synapse/commit/f71667419123d820b339d8c9f31158dffe845f14"}]}, {"sha": "f71667419123d820b339d8c9f31158dffe845f14", "commit": {"author": {"name": "Todd Wells", "email": "todd@wells.ws", "date": "2016-01-14T20:33:16Z"}, "committer": {"name": "Todd Wells", "email": "todd@wells.ws", "date": "2016-01-14T20:33:16Z"}, "message": "allow bind_address in the service haproxy section", "tree": {"sha": "c59759742ccfc9f881a3cffe2a58162db497f282", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/c59759742ccfc9f881a3cffe2a58162db497f282"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/f71667419123d820b339d8c9f31158dffe845f14", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/f71667419123d820b339d8c9f31158dffe845f14", "html_url": "https://github.com/airbnb/synapse/commit/f71667419123d820b339d8c9f31158dffe845f14", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/f71667419123d820b339d8c9f31158dffe845f14/comments", "author": {"login": "twellspring", "id": 9868888, "avatar_url": "https://avatars2.githubusercontent.com/u/9868888?v=4", "gravatar_id": "", "url": "https://api.github.com/users/twellspring", "html_url": "https://github.com/twellspring", "followers_url": "https://api.github.com/users/twellspring/followers", "following_url": "https://api.github.com/users/twellspring/following{/other_user}", "gists_url": "https://api.github.com/users/twellspring/gists{/gist_id}", "starred_url": "https://api.github.com/users/twellspring/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/twellspring/subscriptions", "organizations_url": "https://api.github.com/users/twellspring/orgs", "repos_url": "https://api.github.com/users/twellspring/repos", "events_url": "https://api.github.com/users/twellspring/events{/privacy}", "received_events_url": "https://api.github.com/users/twellspring/received_events", "type": "User", "site_admin": false}, "committer": {"login": "twellspring", "id": 9868888, "avatar_url": "https://avatars2.githubusercontent.com/u/9868888?v=4", "gravatar_id": "", "url": "https://api.github.com/users/twellspring", "html_url": "https://github.com/twellspring", "followers_url": "https://api.github.com/users/twellspring/followers", "following_url": "https://api.github.com/users/twellspring/following{/other_user}", "gists_url": "https://api.github.com/users/twellspring/gists{/gist_id}", "starred_url": "https://api.github.com/users/twellspring/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/twellspring/subscriptions", "organizations_url": "https://api.github.com/users/twellspring/orgs", "repos_url": "https://api.github.com/users/twellspring/repos", "events_url": "https://api.github.com/users/twellspring/events{/privacy}", "received_events_url": "https://api.github.com/users/twellspring/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d8dffea13ca57681b1cefa12819231d14dbcea6e", "url": "https://api.github.com/repos/airbnb/synapse/commits/d8dffea13ca57681b1cefa12819231d14dbcea6e", "html_url": "https://github.com/airbnb/synapse/commit/d8dffea13ca57681b1cefa12819231d14dbcea6e"}]}, {"sha": "d8dffea13ca57681b1cefa12819231d14dbcea6e", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2015-12-23T16:47:05Z"}, "committer": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2015-12-23T16:47:05Z"}, "message": "Merge pull request #153 from airbnb/aurora_support\n\nAurora/Finagle registration support", "tree": {"sha": "c402479fa55c0454677843418a7bd3c608b3bc1b", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/c402479fa55c0454677843418a7bd3c608b3bc1b"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/d8dffea13ca57681b1cefa12819231d14dbcea6e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/d8dffea13ca57681b1cefa12819231d14dbcea6e", "html_url": "https://github.com/airbnb/synapse/commit/d8dffea13ca57681b1cefa12819231d14dbcea6e", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/d8dffea13ca57681b1cefa12819231d14dbcea6e/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7a1c8b38bc382ea1e93dfd3d5437709e54e97953", "url": "https://api.github.com/repos/airbnb/synapse/commits/7a1c8b38bc382ea1e93dfd3d5437709e54e97953", "html_url": "https://github.com/airbnb/synapse/commit/7a1c8b38bc382ea1e93dfd3d5437709e54e97953"}, {"sha": "6f8f081932ec324ab0f604c93c953b606228f6e6", "url": "https://api.github.com/repos/airbnb/synapse/commits/6f8f081932ec324ab0f604c93c953b606228f6e6", "html_url": "https://github.com/airbnb/synapse/commit/6f8f081932ec324ab0f604c93c953b606228f6e6"}]}, {"sha": "6f8f081932ec324ab0f604c93c953b606228f6e6", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2015-12-23T16:43:29Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2015-12-23T16:43:29Z"}, "message": "Changing naming from aurora to serverset", "tree": {"sha": "c402479fa55c0454677843418a7bd3c608b3bc1b", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/c402479fa55c0454677843418a7bd3c608b3bc1b"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/6f8f081932ec324ab0f604c93c953b606228f6e6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/6f8f081932ec324ab0f604c93c953b606228f6e6", "html_url": "https://github.com/airbnb/synapse/commit/6f8f081932ec324ab0f604c93c953b606228f6e6", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/6f8f081932ec324ab0f604c93c953b606228f6e6/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a84e6cc198fb19f0444448f4b0432eb871f77346", "url": "https://api.github.com/repos/airbnb/synapse/commits/a84e6cc198fb19f0444448f4b0432eb871f77346", "html_url": "https://github.com/airbnb/synapse/commit/a84e6cc198fb19f0444448f4b0432eb871f77346"}]}, {"sha": "a84e6cc198fb19f0444448f4b0432eb871f77346", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2015-12-23T05:59:45Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2015-12-23T06:33:10Z"}, "message": "Document the new decode options", "tree": {"sha": "3f74a5a26751321c83c32ffef5b74ad5da8a5f71", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/3f74a5a26751321c83c32ffef5b74ad5da8a5f71"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/a84e6cc198fb19f0444448f4b0432eb871f77346", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/a84e6cc198fb19f0444448f4b0432eb871f77346", "html_url": "https://github.com/airbnb/synapse/commit/a84e6cc198fb19f0444448f4b0432eb871f77346", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/a84e6cc198fb19f0444448f4b0432eb871f77346/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "167b40f426bf97437da24c12281951354acb5a74", "url": "https://api.github.com/repos/airbnb/synapse/commits/167b40f426bf97437da24c12281951354acb5a74", "html_url": "https://github.com/airbnb/synapse/commit/167b40f426bf97437da24c12281951354acb5a74"}]}, {"sha": "167b40f426bf97437da24c12281951354acb5a74", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2015-12-23T05:02:07Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2015-12-23T06:19:17Z"}, "message": "Refactor and fixup aurora support", "tree": {"sha": "024c5e3c312c6cce8e08e9b5db01e41a3a6a3921", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/024c5e3c312c6cce8e08e9b5db01e41a3a6a3921"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/167b40f426bf97437da24c12281951354acb5a74", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/167b40f426bf97437da24c12281951354acb5a74", "html_url": "https://github.com/airbnb/synapse/commit/167b40f426bf97437da24c12281951354acb5a74", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/167b40f426bf97437da24c12281951354acb5a74/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7f161c464bd0a0159864523e0efb10062087439e", "url": "https://api.github.com/repos/airbnb/synapse/commits/7f161c464bd0a0159864523e0efb10062087439e", "html_url": "https://github.com/airbnb/synapse/commit/7f161c464bd0a0159864523e0efb10062087439e"}]}, {"sha": "7f161c464bd0a0159864523e0efb10062087439e", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2015-12-23T04:40:36Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2015-12-23T04:40:36Z"}, "message": "Merge remote-tracking branch 'justinvenus/aurora/watcher' into aurora_support", "tree": {"sha": "b5917e5f89fd23e52edda7ad8dc9c040773248d1", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/b5917e5f89fd23e52edda7ad8dc9c040773248d1"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/7f161c464bd0a0159864523e0efb10062087439e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/7f161c464bd0a0159864523e0efb10062087439e", "html_url": "https://github.com/airbnb/synapse/commit/7f161c464bd0a0159864523e0efb10062087439e", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/7f161c464bd0a0159864523e0efb10062087439e/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7a1c8b38bc382ea1e93dfd3d5437709e54e97953", "url": "https://api.github.com/repos/airbnb/synapse/commits/7a1c8b38bc382ea1e93dfd3d5437709e54e97953", "html_url": "https://github.com/airbnb/synapse/commit/7a1c8b38bc382ea1e93dfd3d5437709e54e97953"}, {"sha": "18f7d3fb005f2d68a23c7150beae7d2ff07ab9a1", "url": "https://api.github.com/repos/airbnb/synapse/commits/18f7d3fb005f2d68a23c7150beae7d2ff07ab9a1", "html_url": "https://github.com/airbnb/synapse/commit/18f7d3fb005f2d68a23c7150beae7d2ff07ab9a1"}]}, {"sha": "7a1c8b38bc382ea1e93dfd3d5437709e54e97953", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2015-12-23T04:34:17Z"}, "committer": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2015-12-23T04:34:17Z"}, "message": "Merge pull request #152 from hightoxicity/master\n\nFix zookeeper discovery port override", "tree": {"sha": "38720606b5bcd33e42e7d42239291adcb69e4fdd", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/38720606b5bcd33e42e7d42239291adcb69e4fdd"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/7a1c8b38bc382ea1e93dfd3d5437709e54e97953", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/7a1c8b38bc382ea1e93dfd3d5437709e54e97953", "html_url": "https://github.com/airbnb/synapse/commit/7a1c8b38bc382ea1e93dfd3d5437709e54e97953", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/7a1c8b38bc382ea1e93dfd3d5437709e54e97953/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "afa0e35a458fa5db09c29f083e71a39dafa4f547", "url": "https://api.github.com/repos/airbnb/synapse/commits/afa0e35a458fa5db09c29f083e71a39dafa4f547", "html_url": "https://github.com/airbnb/synapse/commit/afa0e35a458fa5db09c29f083e71a39dafa4f547"}, {"sha": "f3497600fa326eb9f925a88045c4f8baa1a763ee", "url": "https://api.github.com/repos/airbnb/synapse/commits/f3497600fa326eb9f925a88045c4f8baa1a763ee", "html_url": "https://github.com/airbnb/synapse/commit/f3497600fa326eb9f925a88045c4f8baa1a763ee"}]}, {"sha": "f3497600fa326eb9f925a88045c4f8baa1a763ee", "commit": {"author": {"name": "Tony Fouchard", "email": "tony.fouchard@blablacar.com", "date": "2015-12-22T14:50:34Z"}, "committer": {"name": "Tony Fouchard", "email": "tony.fouchard@blablacar.com", "date": "2015-12-22T14:50:34Z"}, "message": "Fix zookeeper discovery port override", "tree": {"sha": "38720606b5bcd33e42e7d42239291adcb69e4fdd", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/38720606b5bcd33e42e7d42239291adcb69e4fdd"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/f3497600fa326eb9f925a88045c4f8baa1a763ee", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/f3497600fa326eb9f925a88045c4f8baa1a763ee", "html_url": "https://github.com/airbnb/synapse/commit/f3497600fa326eb9f925a88045c4f8baa1a763ee", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/f3497600fa326eb9f925a88045c4f8baa1a763ee/comments", "author": {"login": "djnos", "id": 8875617, "avatar_url": "https://avatars0.githubusercontent.com/u/8875617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/djnos", "html_url": "https://github.com/djnos", "followers_url": "https://api.github.com/users/djnos/followers", "following_url": "https://api.github.com/users/djnos/following{/other_user}", "gists_url": "https://api.github.com/users/djnos/gists{/gist_id}", "starred_url": "https://api.github.com/users/djnos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/djnos/subscriptions", "organizations_url": "https://api.github.com/users/djnos/orgs", "repos_url": "https://api.github.com/users/djnos/repos", "events_url": "https://api.github.com/users/djnos/events{/privacy}", "received_events_url": "https://api.github.com/users/djnos/received_events", "type": "User", "site_admin": false}, "committer": {"login": "djnos", "id": 8875617, "avatar_url": "https://avatars0.githubusercontent.com/u/8875617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/djnos", "html_url": "https://github.com/djnos", "followers_url": "https://api.github.com/users/djnos/followers", "following_url": "https://api.github.com/users/djnos/following{/other_user}", "gists_url": "https://api.github.com/users/djnos/gists{/gist_id}", "starred_url": "https://api.github.com/users/djnos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/djnos/subscriptions", "organizations_url": "https://api.github.com/users/djnos/orgs", "repos_url": "https://api.github.com/users/djnos/repos", "events_url": "https://api.github.com/users/djnos/events{/privacy}", "received_events_url": "https://api.github.com/users/djnos/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "afa0e35a458fa5db09c29f083e71a39dafa4f547", "url": "https://api.github.com/repos/airbnb/synapse/commits/afa0e35a458fa5db09c29f083e71a39dafa4f547", "html_url": "https://github.com/airbnb/synapse/commit/afa0e35a458fa5db09c29f083e71a39dafa4f547"}]}, {"sha": "18f7d3fb005f2d68a23c7150beae7d2ff07ab9a1", "commit": {"author": {"name": "Justin Venus", "email": "jvenus@signal.co", "date": "2015-12-09T21:19:45Z"}, "committer": {"name": "Justin Venus", "email": "jvenus@signal.co", "date": "2015-12-09T21:19:45Z"}, "message": "ensure we don't require config to change for default behavior", "tree": {"sha": "1b8f6ccc132884dc3a66a263caf781b563a30da0", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/1b8f6ccc132884dc3a66a263caf781b563a30da0"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/18f7d3fb005f2d68a23c7150beae7d2ff07ab9a1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/18f7d3fb005f2d68a23c7150beae7d2ff07ab9a1", "html_url": "https://github.com/airbnb/synapse/commit/18f7d3fb005f2d68a23c7150beae7d2ff07ab9a1", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/18f7d3fb005f2d68a23c7150beae7d2ff07ab9a1/comments", "author": null, "committer": null, "parents": [{"sha": "97f496641bede82b0ac7d311a82455c18f8f1222", "url": "https://api.github.com/repos/airbnb/synapse/commits/97f496641bede82b0ac7d311a82455c18f8f1222", "html_url": "https://github.com/airbnb/synapse/commit/97f496641bede82b0ac7d311a82455c18f8f1222"}]}, {"sha": "afa0e35a458fa5db09c29f083e71a39dafa4f547", "commit": {"author": {"name": "Igor Serebryany", "email": "igor.serebryany@airbedandbreakfast.com", "date": "2015-12-07T22:38:42Z"}, "committer": {"name": "Igor Serebryany", "email": "igor.serebryany@airbedandbreakfast.com", "date": "2015-12-07T22:38:42Z"}, "message": "bump version to v0.12.2", "tree": {"sha": "ce33efaac215c9c20688338d5909887316e293f5", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/ce33efaac215c9c20688338d5909887316e293f5"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/afa0e35a458fa5db09c29f083e71a39dafa4f547", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/afa0e35a458fa5db09c29f083e71a39dafa4f547", "html_url": "https://github.com/airbnb/synapse/commit/afa0e35a458fa5db09c29f083e71a39dafa4f547", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/afa0e35a458fa5db09c29f083e71a39dafa4f547/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e056eb5d29e9aa30f8612b7282e5e889d51aadb7", "url": "https://api.github.com/repos/airbnb/synapse/commits/e056eb5d29e9aa30f8612b7282e5e889d51aadb7", "html_url": "https://github.com/airbnb/synapse/commit/e056eb5d29e9aa30f8612b7282e5e889d51aadb7"}]}, {"sha": "97f496641bede82b0ac7d311a82455c18f8f1222", "commit": {"author": {"name": "Justin Venus", "email": "jvenus@signal.co", "date": "2015-12-04T20:43:03Z"}, "committer": {"name": "Justin Venus", "email": "jvenus@signal.co", "date": "2015-12-04T20:43:03Z"}, "message": "Support aurora service discovery based on feedback", "tree": {"sha": "d1f6823aeab37fbc065453e568f2fd6456b10205", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/d1f6823aeab37fbc065453e568f2fd6456b10205"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/97f496641bede82b0ac7d311a82455c18f8f1222", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/97f496641bede82b0ac7d311a82455c18f8f1222", "html_url": "https://github.com/airbnb/synapse/commit/97f496641bede82b0ac7d311a82455c18f8f1222", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/97f496641bede82b0ac7d311a82455c18f8f1222/comments", "author": null, "committer": null, "parents": [{"sha": "c166583bce7d04fcc95d3e84ba873da462899943", "url": "https://api.github.com/repos/airbnb/synapse/commits/c166583bce7d04fcc95d3e84ba873da462899943", "html_url": "https://github.com/airbnb/synapse/commit/c166583bce7d04fcc95d3e84ba873da462899943"}]}, {"sha": "e056eb5d29e9aa30f8612b7282e5e889d51aadb7", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2015-11-30T18:25:53Z"}, "committer": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2015-11-30T18:25:53Z"}, "message": "Merge pull request #92 from democracyworks/filter-out-containers-with-unmapped-ports\n\nFilter out containers with unmapped ports", "tree": {"sha": "bbe499021b18ef3a5d9b39648f9f5d9c24ae7cfc", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/bbe499021b18ef3a5d9b39648f9f5d9c24ae7cfc"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/e056eb5d29e9aa30f8612b7282e5e889d51aadb7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/e056eb5d29e9aa30f8612b7282e5e889d51aadb7", "html_url": "https://github.com/airbnb/synapse/commit/e056eb5d29e9aa30f8612b7282e5e889d51aadb7", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/e056eb5d29e9aa30f8612b7282e5e889d51aadb7/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "09dd4303d539078ee3e6c38736add967c8547a19", "url": "https://api.github.com/repos/airbnb/synapse/commits/09dd4303d539078ee3e6c38736add967c8547a19", "html_url": "https://github.com/airbnb/synapse/commit/09dd4303d539078ee3e6c38736add967c8547a19"}, {"sha": "5ef97f0d05d1c860cc38791d6c2780644619a445", "url": "https://api.github.com/repos/airbnb/synapse/commits/5ef97f0d05d1c860cc38791d6c2780644619a445", "html_url": "https://github.com/airbnb/synapse/commit/5ef97f0d05d1c860cc38791d6c2780644619a445"}]}, {"sha": "c166583bce7d04fcc95d3e84ba873da462899943", "commit": {"author": {"name": "Justin Venus", "email": "jvenus@signal.co", "date": "2015-11-25T16:50:53Z"}, "committer": {"name": "Justin Venus", "email": "jvenus@signal.co", "date": "2015-11-25T16:50:53Z"}, "message": "add apache aurora service disovery support - issues/147", "tree": {"sha": "6e705e6ef7f954baf33027231e11ca76caeeee3d", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/6e705e6ef7f954baf33027231e11ca76caeeee3d"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/c166583bce7d04fcc95d3e84ba873da462899943", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/c166583bce7d04fcc95d3e84ba873da462899943", "html_url": "https://github.com/airbnb/synapse/commit/c166583bce7d04fcc95d3e84ba873da462899943", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/c166583bce7d04fcc95d3e84ba873da462899943/comments", "author": null, "committer": null, "parents": [{"sha": "09dd4303d539078ee3e6c38736add967c8547a19", "url": "https://api.github.com/repos/airbnb/synapse/commits/09dd4303d539078ee3e6c38736add967c8547a19", "html_url": "https://github.com/airbnb/synapse/commit/09dd4303d539078ee3e6c38736add967c8547a19"}]}, {"sha": "09dd4303d539078ee3e6c38736add967c8547a19", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2015-11-25T08:01:32Z"}, "committer": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2015-11-25T08:01:32Z"}, "message": "Merge pull request #144 from airbnb/support_haproxy_service_data\n\nAdds support to the zookeeper service watcher for haproxy_server_options", "tree": {"sha": "d07cfdfd879e362fe03b9c4d8f757546ae1835b5", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/d07cfdfd879e362fe03b9c4d8f757546ae1835b5"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/09dd4303d539078ee3e6c38736add967c8547a19", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/09dd4303d539078ee3e6c38736add967c8547a19", "html_url": "https://github.com/airbnb/synapse/commit/09dd4303d539078ee3e6c38736add967c8547a19", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/09dd4303d539078ee3e6c38736add967c8547a19/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e6c32d1c2867e9e8ba21b43edd1ab45d07b3d0c8", "url": "https://api.github.com/repos/airbnb/synapse/commits/e6c32d1c2867e9e8ba21b43edd1ab45d07b3d0c8", "html_url": "https://github.com/airbnb/synapse/commit/e6c32d1c2867e9e8ba21b43edd1ab45d07b3d0c8"}, {"sha": "1c95d4093cb14bd75d2893b7bae6f6180dfeb62e", "url": "https://api.github.com/repos/airbnb/synapse/commits/1c95d4093cb14bd75d2893b7bae6f6180dfeb62e", "html_url": "https://github.com/airbnb/synapse/commit/1c95d4093cb14bd75d2893b7bae6f6180dfeb62e"}]}, {"sha": "1c95d4093cb14bd75d2893b7bae6f6180dfeb62e", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2015-10-14T14:13:13Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2015-10-14T14:13:13Z"}, "message": "Adds support to the zookeeper service watcher for haproxy_server_options\n\nThis is such a bad design, I really dislike that we munge the zk data\nmultiple times. Unfortunately I don't know a better way to do it yet. I\nwill work on it.", "tree": {"sha": "d07cfdfd879e362fe03b9c4d8f757546ae1835b5", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/d07cfdfd879e362fe03b9c4d8f757546ae1835b5"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/1c95d4093cb14bd75d2893b7bae6f6180dfeb62e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/1c95d4093cb14bd75d2893b7bae6f6180dfeb62e", "html_url": "https://github.com/airbnb/synapse/commit/1c95d4093cb14bd75d2893b7bae6f6180dfeb62e", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/1c95d4093cb14bd75d2893b7bae6f6180dfeb62e/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e6c32d1c2867e9e8ba21b43edd1ab45d07b3d0c8", "url": "https://api.github.com/repos/airbnb/synapse/commits/e6c32d1c2867e9e8ba21b43edd1ab45d07b3d0c8", "html_url": "https://github.com/airbnb/synapse/commit/e6c32d1c2867e9e8ba21b43edd1ab45d07b3d0c8"}]}, {"sha": "e6c32d1c2867e9e8ba21b43edd1ab45d07b3d0c8", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2015-10-13T23:27:01Z"}, "committer": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2015-10-13T23:27:01Z"}, "message": "Merge pull request #143 from airbnb/cleanup_old_file_outputs\n\nCleanup old files that synapse no longer manages", "tree": {"sha": "c12191613f18f147bf73f1751a280776e5910113", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/c12191613f18f147bf73f1751a280776e5910113"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/e6c32d1c2867e9e8ba21b43edd1ab45d07b3d0c8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/e6c32d1c2867e9e8ba21b43edd1ab45d07b3d0c8", "html_url": "https://github.com/airbnb/synapse/commit/e6c32d1c2867e9e8ba21b43edd1ab45d07b3d0c8", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/e6c32d1c2867e9e8ba21b43edd1ab45d07b3d0c8/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ffe1a7c7b5ecc51597e98b898109ebea218d41df", "url": "https://api.github.com/repos/airbnb/synapse/commits/ffe1a7c7b5ecc51597e98b898109ebea218d41df", "html_url": "https://github.com/airbnb/synapse/commit/ffe1a7c7b5ecc51597e98b898109ebea218d41df"}, {"sha": "1802fa2b3a9c332e8e4beac156420669d77af468", "url": "https://api.github.com/repos/airbnb/synapse/commits/1802fa2b3a9c332e8e4beac156420669d77af468", "html_url": "https://github.com/airbnb/synapse/commit/1802fa2b3a9c332e8e4beac156420669d77af468"}]}, {"sha": "1802fa2b3a9c332e8e4beac156420669d77af468", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2015-10-12T03:27:48Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2015-10-13T04:17:57Z"}, "message": "Cleanup old files that synapse no longer manages\n\nIt turns out that when removing services these files stick around\nbecause synapse stops managing them, so in this patch we clean up\nanything in the output directory that shouldn't be there.", "tree": {"sha": "c12191613f18f147bf73f1751a280776e5910113", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/c12191613f18f147bf73f1751a280776e5910113"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/1802fa2b3a9c332e8e4beac156420669d77af468", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/1802fa2b3a9c332e8e4beac156420669d77af468", "html_url": "https://github.com/airbnb/synapse/commit/1802fa2b3a9c332e8e4beac156420669d77af468", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/1802fa2b3a9c332e8e4beac156420669d77af468/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ffe1a7c7b5ecc51597e98b898109ebea218d41df", "url": "https://api.github.com/repos/airbnb/synapse/commits/ffe1a7c7b5ecc51597e98b898109ebea218d41df", "html_url": "https://github.com/airbnb/synapse/commit/ffe1a7c7b5ecc51597e98b898109ebea218d41df"}]}, {"sha": "ffe1a7c7b5ecc51597e98b898109ebea218d41df", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2015-10-10T23:03:34Z"}, "committer": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2015-10-10T23:03:34Z"}, "message": "Merge pull request #142 from airbnb/add_marathon_to_discovery_test\n\nAdds marathon to the watcher plugin test", "tree": {"sha": "621164f31406ff89b3bebb00f59f9bf2b4ccb926", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/621164f31406ff89b3bebb00f59f9bf2b4ccb926"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/ffe1a7c7b5ecc51597e98b898109ebea218d41df", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/ffe1a7c7b5ecc51597e98b898109ebea218d41df", "html_url": "https://github.com/airbnb/synapse/commit/ffe1a7c7b5ecc51597e98b898109ebea218d41df", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/ffe1a7c7b5ecc51597e98b898109ebea218d41df/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "43a32b194ab24ab9a3682c9eadb468cb1727faaf", "url": "https://api.github.com/repos/airbnb/synapse/commits/43a32b194ab24ab9a3682c9eadb468cb1727faaf", "html_url": "https://github.com/airbnb/synapse/commit/43a32b194ab24ab9a3682c9eadb468cb1727faaf"}, {"sha": "709574fdae0165a043944ac8989d3920abecdf14", "url": "https://api.github.com/repos/airbnb/synapse/commits/709574fdae0165a043944ac8989d3920abecdf14", "html_url": "https://github.com/airbnb/synapse/commit/709574fdae0165a043944ac8989d3920abecdf14"}]}, {"sha": "709574fdae0165a043944ac8989d3920abecdf14", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2015-10-10T23:01:25Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2015-10-10T23:01:25Z"}, "message": "Adds marathon to the watcher plugin test", "tree": {"sha": "621164f31406ff89b3bebb00f59f9bf2b4ccb926", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/621164f31406ff89b3bebb00f59f9bf2b4ccb926"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/709574fdae0165a043944ac8989d3920abecdf14", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/709574fdae0165a043944ac8989d3920abecdf14", "html_url": "https://github.com/airbnb/synapse/commit/709574fdae0165a043944ac8989d3920abecdf14", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/709574fdae0165a043944ac8989d3920abecdf14/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "43a32b194ab24ab9a3682c9eadb468cb1727faaf", "url": "https://api.github.com/repos/airbnb/synapse/commits/43a32b194ab24ab9a3682c9eadb468cb1727faaf", "html_url": "https://github.com/airbnb/synapse/commit/43a32b194ab24ab9a3682c9eadb468cb1727faaf"}]}, {"sha": "43a32b194ab24ab9a3682c9eadb468cb1727faaf", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2015-10-10T22:45:37Z"}, "committer": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2015-10-10T22:45:37Z"}, "message": "Merge pull request #101 from tdooner/add_marathon_watcher\n\nAdd marathon watcher", "tree": {"sha": "7635efd0583b4c13504261b7189cf82fa751317e", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/7635efd0583b4c13504261b7189cf82fa751317e"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/43a32b194ab24ab9a3682c9eadb468cb1727faaf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/43a32b194ab24ab9a3682c9eadb468cb1727faaf", "html_url": "https://github.com/airbnb/synapse/commit/43a32b194ab24ab9a3682c9eadb468cb1727faaf", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/43a32b194ab24ab9a3682c9eadb468cb1727faaf/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "561b38407bd3e6ef239a98453913905db6604c89", "url": "https://api.github.com/repos/airbnb/synapse/commits/561b38407bd3e6ef239a98453913905db6604c89", "html_url": "https://github.com/airbnb/synapse/commit/561b38407bd3e6ef239a98453913905db6604c89"}, {"sha": "b3d5368491540109aa382e9d4ab0a55b0ba5a12d", "url": "https://api.github.com/repos/airbnb/synapse/commits/b3d5368491540109aa382e9d4ab0a55b0ba5a12d", "html_url": "https://github.com/airbnb/synapse/commit/b3d5368491540109aa382e9d4ab0a55b0ba5a12d"}]}, {"sha": "b3d5368491540109aa382e9d4ab0a55b0ba5a12d", "commit": {"author": {"name": "Tom Dooner", "email": "tom.dooner@brigade.com", "date": "2015-10-10T20:27:26Z"}, "committer": {"name": "Tom Dooner", "email": "tom.dooner@brigade.com", "date": "2015-10-10T20:27:26Z"}, "message": "Require net/http explicitly", "tree": {"sha": "7635efd0583b4c13504261b7189cf82fa751317e", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/7635efd0583b4c13504261b7189cf82fa751317e"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/b3d5368491540109aa382e9d4ab0a55b0ba5a12d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/b3d5368491540109aa382e9d4ab0a55b0ba5a12d", "html_url": "https://github.com/airbnb/synapse/commit/b3d5368491540109aa382e9d4ab0a55b0ba5a12d", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/b3d5368491540109aa382e9d4ab0a55b0ba5a12d/comments", "author": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "806abbd468861fef9cf74b61e9d145f993a04b58", "url": "https://api.github.com/repos/airbnb/synapse/commits/806abbd468861fef9cf74b61e9d145f993a04b58", "html_url": "https://github.com/airbnb/synapse/commit/806abbd468861fef9cf74b61e9d145f993a04b58"}]}, {"sha": "806abbd468861fef9cf74b61e9d145f993a04b58", "commit": {"author": {"name": "Tom Dooner", "email": "tom.dooner@brigade.com", "date": "2015-10-10T20:09:12Z"}, "committer": {"name": "Tom Dooner", "email": "tom.dooner@brigade.com", "date": "2015-10-10T20:09:12Z"}, "message": "Add port index support to marathon watcher\n\nThis will allow users to expose multiple backends in the same Marathon\ntask.", "tree": {"sha": "8d76fbcc7a32c31694c80622d24dc9eef214bfb4", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/8d76fbcc7a32c31694c80622d24dc9eef214bfb4"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/806abbd468861fef9cf74b61e9d145f993a04b58", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/806abbd468861fef9cf74b61e9d145f993a04b58", "html_url": "https://github.com/airbnb/synapse/commit/806abbd468861fef9cf74b61e9d145f993a04b58", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/806abbd468861fef9cf74b61e9d145f993a04b58/comments", "author": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0659aaea0361590c83731560a93a88bb94986b45", "url": "https://api.github.com/repos/airbnb/synapse/commits/0659aaea0361590c83731560a93a88bb94986b45", "html_url": "https://github.com/airbnb/synapse/commit/0659aaea0361590c83731560a93a88bb94986b45"}]}, {"sha": "0659aaea0361590c83731560a93a88bb94986b45", "commit": {"author": {"name": "Tom Dooner", "email": "tom.dooner@brigade.com", "date": "2015-10-10T19:50:51Z"}, "committer": {"name": "Tom Dooner", "email": "tom.dooner@brigade.com", "date": "2015-10-10T19:57:28Z"}, "message": "Remove refactored backend check logic\n\n7d51288 moved this into ServiceWatcher::Base, so this logic can be\nremoved from here.", "tree": {"sha": "200daa0a5ce1aed21600e403d74ee6ac1cf3600f", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/200daa0a5ce1aed21600e403d74ee6ac1cf3600f"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/0659aaea0361590c83731560a93a88bb94986b45", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/0659aaea0361590c83731560a93a88bb94986b45", "html_url": "https://github.com/airbnb/synapse/commit/0659aaea0361590c83731560a93a88bb94986b45", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/0659aaea0361590c83731560a93a88bb94986b45/comments", "author": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "93b992c5bec0d16a1033fe3de8b852fa2d386518", "url": "https://api.github.com/repos/airbnb/synapse/commits/93b992c5bec0d16a1033fe3de8b852fa2d386518", "html_url": "https://github.com/airbnb/synapse/commit/93b992c5bec0d16a1033fe3de8b852fa2d386518"}]}, {"sha": "93b992c5bec0d16a1033fe3de8b852fa2d386518", "commit": {"author": {"name": "Tom Dooner", "email": "tom.dooner@brigade.com", "date": "2015-10-10T19:43:24Z"}, "committer": {"name": "Tom Dooner", "email": "tom.dooner@brigade.com", "date": "2015-10-10T19:57:08Z"}, "message": "Add splay to initial Marathon watch\n\nAnd thus fending off the thundering herd.", "tree": {"sha": "4f3737077020cca38f918192456b8773947a666c", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/4f3737077020cca38f918192456b8773947a666c"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/93b992c5bec0d16a1033fe3de8b852fa2d386518", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/93b992c5bec0d16a1033fe3de8b852fa2d386518", "html_url": "https://github.com/airbnb/synapse/commit/93b992c5bec0d16a1033fe3de8b852fa2d386518", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/93b992c5bec0d16a1033fe3de8b852fa2d386518/comments", "author": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0252cac90855af2638de90fedec29949b4da5201", "url": "https://api.github.com/repos/airbnb/synapse/commits/0252cac90855af2638de90fedec29949b4da5201", "html_url": "https://github.com/airbnb/synapse/commit/0252cac90855af2638de90fedec29949b4da5201"}]}, {"sha": "0252cac90855af2638de90fedec29949b4da5201", "commit": {"author": {"name": "Tom Dooner", "email": "tom.dooner@brigade.com", "date": "2015-10-10T19:38:59Z"}, "committer": {"name": "Tom Dooner", "email": "tom.dooner@brigade.com", "date": "2015-10-10T19:56:22Z"}, "message": "Improve exception logic for connection problems\n\nRescuing `Exception` instead of `StandardError` is a bad idea. Also\nsetting connection to nil will ensure we reconnect to marathon.", "tree": {"sha": "2e68a1d6f60c334ed7defd33d60793f2e9142cb6", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/2e68a1d6f60c334ed7defd33d60793f2e9142cb6"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/0252cac90855af2638de90fedec29949b4da5201", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/0252cac90855af2638de90fedec29949b4da5201", "html_url": "https://github.com/airbnb/synapse/commit/0252cac90855af2638de90fedec29949b4da5201", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/0252cac90855af2638de90fedec29949b4da5201/comments", "author": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f44cf91816faa7e6e0c3ce02c8c01bcf5c37de5e", "url": "https://api.github.com/repos/airbnb/synapse/commits/f44cf91816faa7e6e0c3ce02c8c01bcf5c37de5e", "html_url": "https://github.com/airbnb/synapse/commit/f44cf91816faa7e6e0c3ce02c8c01bcf5c37de5e"}]}, {"sha": "f44cf91816faa7e6e0c3ce02c8c01bcf5c37de5e", "commit": {"author": {"name": "Tom Dooner", "email": "tom.dooner@brigade.com", "date": "2015-10-10T19:34:30Z"}, "committer": {"name": "Tom Dooner", "email": "tom.dooner@brigade.com", "date": "2015-10-10T19:34:30Z"}, "message": "Allow customizable marathon_api_path\n\nIn case a new version of marathon comes out, and the path changes from\n/v2/apps/%{app}/tasks, this will allow administrators to not need to\nfork synapse.", "tree": {"sha": "37295426e9cf90e72ffdfd191dac1b64630a25e7", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/37295426e9cf90e72ffdfd191dac1b64630a25e7"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/f44cf91816faa7e6e0c3ce02c8c01bcf5c37de5e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/f44cf91816faa7e6e0c3ce02c8c01bcf5c37de5e", "html_url": "https://github.com/airbnb/synapse/commit/f44cf91816faa7e6e0c3ce02c8c01bcf5c37de5e", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/f44cf91816faa7e6e0c3ce02c8c01bcf5c37de5e/comments", "author": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f41af12f946a36ffca80d16ade387e3e67a07101", "url": "https://api.github.com/repos/airbnb/synapse/commits/f41af12f946a36ffca80d16ade387e3e67a07101", "html_url": "https://github.com/airbnb/synapse/commit/f41af12f946a36ffca80d16ade387e3e67a07101"}]}, {"sha": "f41af12f946a36ffca80d16ade387e3e67a07101", "commit": {"author": {"name": "Tom Dooner", "email": "tom.dooner@brigade.com", "date": "2015-10-10T19:19:27Z"}, "committer": {"name": "Tom Dooner", "email": "tom.dooner@brigade.com", "date": "2015-10-10T19:20:19Z"}, "message": "Make the tests pass after merging upstream/master\n\nA bit has changed - mostly adding the ServiceWatcher class in the\nhierarchy.\n\nsafe_yaml needs upgraded because of:\nhttps://github.com/dtao/safe_yaml/issues/67", "tree": {"sha": "97ff44095b8d3ab347dfed3b8af1d27ad2b1ccd8", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/97ff44095b8d3ab347dfed3b8af1d27ad2b1ccd8"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/f41af12f946a36ffca80d16ade387e3e67a07101", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/f41af12f946a36ffca80d16ade387e3e67a07101", "html_url": "https://github.com/airbnb/synapse/commit/f41af12f946a36ffca80d16ade387e3e67a07101", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/f41af12f946a36ffca80d16ade387e3e67a07101/comments", "author": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "aa4cbc5ddeafa123ad41cedef936e1191c525a97", "url": "https://api.github.com/repos/airbnb/synapse/commits/aa4cbc5ddeafa123ad41cedef936e1191c525a97", "html_url": "https://github.com/airbnb/synapse/commit/aa4cbc5ddeafa123ad41cedef936e1191c525a97"}]}, {"sha": "aa4cbc5ddeafa123ad41cedef936e1191c525a97", "commit": {"author": {"name": "Tom Dooner", "email": "tom.dooner@brigade.com", "date": "2015-10-10T19:05:29Z"}, "committer": {"name": "Tom Dooner", "email": "tom.dooner@brigade.com", "date": "2015-10-10T19:05:29Z"}, "message": "Merge remote-tracking branch 'upstream/master' into add_marathon_watcher\n\n* upstream/master:\n  Fixup mistake in watcher README\n  Update the README concerning ELB's weaknesses\n  Fix minor Ruby 1.9 vs Ruby 2.X compat in install instructions\n  Clarify that the first code block is not installing Ruby\n  Update README.md with better installation directions\n  Allow arbitrary haproxy_server_options to be supplied to HAProxy.\n  adds specs for ec2tag watch method, and fixes bug where if an exception was raised the normal sleep got skipped, so it could get stuck calling the failing discover instances code in a tight loop every few ms\n  Don't have synapse require the aws variables - credentials should be able to be nil to allow using iam instance profile. Updates tests to reflect\n  allow `server_port_override` to be an int since the other `port` config options can be ints\n  Linking from main README to service watcher README\n  Allow pluggable watchers\n  Handle path going away properly\n  Do not unregister the callback in the zk watcher\n  Some minor documentation fixups\n  Explicit watcher haproxy backend names\n  [travis] switch to new infrastructure\n  bump version to v0.12.1\n  bump version to v0.12.0\n  Fixed wording of some documentation, added missing options\n  Address feedback from igor and schleyfox\n  Fixups for merge to airbnb/master\n  Turns out it's important to handle session disconnects correctly\n  Try out :per_callback threads and get more debug information\n  Add support for the weight key added in nerve\n  Fix bug in caching logic.\n  Add state file.\n  Rate limit restarts but not stats socket updates\n  ZooKeeper connection pooling.\n  Increase HAProxy restart interval.\n  Revert \"Add rate limiter.\"\n  Add rate limiter.\n  Allow the option allredisp option to haproxy.\n  Explicitly deduplicate registrations\n  Allow registrations to be manifested on the file system\n  Add 'use_previous_backends' option.\n  test synapse on 2.0.0, 2.1.6, 2.2.2 also\n  git ignore .ruby-version\n  update zookeeper dependency to support newer rubies\n  typo\n  synapse expects arrays under shared_frontend, hosts and backend\n  verify doubles\n  run transpec to convert specs to new format\n  fix some broken specs and deprecation warnings\n  bump rspec version\n\nConflicts:\n\tGemfile.lock\n\tlib/synapse/service_watcher.rb", "tree": {"sha": "1081c47034207cba4c4585ed81004eeb575833a9", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/1081c47034207cba4c4585ed81004eeb575833a9"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/aa4cbc5ddeafa123ad41cedef936e1191c525a97", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/aa4cbc5ddeafa123ad41cedef936e1191c525a97", "html_url": "https://github.com/airbnb/synapse/commit/aa4cbc5ddeafa123ad41cedef936e1191c525a97", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/aa4cbc5ddeafa123ad41cedef936e1191c525a97/comments", "author": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "acde0d312fb8d58f62b1dbf59e200032404af762", "url": "https://api.github.com/repos/airbnb/synapse/commits/acde0d312fb8d58f62b1dbf59e200032404af762", "html_url": "https://github.com/airbnb/synapse/commit/acde0d312fb8d58f62b1dbf59e200032404af762"}, {"sha": "561b38407bd3e6ef239a98453913905db6604c89", "url": "https://api.github.com/repos/airbnb/synapse/commits/561b38407bd3e6ef239a98453913905db6604c89", "html_url": "https://github.com/airbnb/synapse/commit/561b38407bd3e6ef239a98453913905db6604c89"}]}, {"sha": "561b38407bd3e6ef239a98453913905db6604c89", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2015-10-10T17:31:50Z"}, "committer": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2015-10-10T17:31:50Z"}, "message": "Fixup mistake in watcher README", "tree": {"sha": "b4376d38dae57cbf6c7299d71904e4f25c2bbe86", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/b4376d38dae57cbf6c7299d71904e4f25c2bbe86"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/561b38407bd3e6ef239a98453913905db6604c89", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/561b38407bd3e6ef239a98453913905db6604c89", "html_url": "https://github.com/airbnb/synapse/commit/561b38407bd3e6ef239a98453913905db6604c89", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/561b38407bd3e6ef239a98453913905db6604c89/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6adf78fda60e535b1edf8cc2df0f9381e40f3cc4", "url": "https://api.github.com/repos/airbnb/synapse/commits/6adf78fda60e535b1edf8cc2df0f9381e40f3cc4", "html_url": "https://github.com/airbnb/synapse/commit/6adf78fda60e535b1edf8cc2df0f9381e40f3cc4"}]}, {"sha": "6adf78fda60e535b1edf8cc2df0f9381e40f3cc4", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@mit.edu", "date": "2015-10-06T19:56:30Z"}, "committer": {"name": "Joseph Lynch", "email": "jolynch@mit.edu", "date": "2015-10-06T19:56:30Z"}, "message": "Update the README concerning ELB's weaknesses", "tree": {"sha": "7897f87a4ef478d27796e0ebf942d29f59d6003c", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/7897f87a4ef478d27796e0ebf942d29f59d6003c"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/6adf78fda60e535b1edf8cc2df0f9381e40f3cc4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/6adf78fda60e535b1edf8cc2df0f9381e40f3cc4", "html_url": "https://github.com/airbnb/synapse/commit/6adf78fda60e535b1edf8cc2df0f9381e40f3cc4", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/6adf78fda60e535b1edf8cc2df0f9381e40f3cc4/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "98e79a9e8150889d937fc41bad111b7cbcce0ac2", "url": "https://api.github.com/repos/airbnb/synapse/commits/98e79a9e8150889d937fc41bad111b7cbcce0ac2", "html_url": "https://github.com/airbnb/synapse/commit/98e79a9e8150889d937fc41bad111b7cbcce0ac2"}]}, {"sha": "98e79a9e8150889d937fc41bad111b7cbcce0ac2", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2015-10-06T17:55:48Z"}, "committer": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2015-10-06T17:55:48Z"}, "message": "Merge pull request #140 from airbnb/custom_server_options\n\nAllow arbitrary haproxy_server_options to be supplied to HAProxy.", "tree": {"sha": "4fdb2cdc74a92b41298c9a125b7d027bac38216e", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/4fdb2cdc74a92b41298c9a125b7d027bac38216e"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/98e79a9e8150889d937fc41bad111b7cbcce0ac2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/98e79a9e8150889d937fc41bad111b7cbcce0ac2", "html_url": "https://github.com/airbnb/synapse/commit/98e79a9e8150889d937fc41bad111b7cbcce0ac2", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/98e79a9e8150889d937fc41bad111b7cbcce0ac2/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "53a224e4fed5bc304fc8aa04f6c006691ccb4893", "url": "https://api.github.com/repos/airbnb/synapse/commits/53a224e4fed5bc304fc8aa04f6c006691ccb4893", "html_url": "https://github.com/airbnb/synapse/commit/53a224e4fed5bc304fc8aa04f6c006691ccb4893"}, {"sha": "c05817af43da3f4fbac632b882d0edd7ef0fca61", "url": "https://api.github.com/repos/airbnb/synapse/commits/c05817af43da3f4fbac632b882d0edd7ef0fca61", "html_url": "https://github.com/airbnb/synapse/commit/c05817af43da3f4fbac632b882d0edd7ef0fca61"}]}, {"sha": "53a224e4fed5bc304fc8aa04f6c006691ccb4893", "commit": {"author": {"name": "Joseph Lynch", "email": "jlynch@yelp.com", "date": "2015-10-05T03:36:32Z"}, "committer": {"name": "Joseph Lynch", "email": "jlynch@yelp.com", "date": "2015-10-05T03:36:32Z"}, "message": "Fix minor Ruby 1.9 vs Ruby 2.X compat in install instructions\n\nRuby 1.9 uses --no-ri --no-rdoc instead of Ruby 2.X's --no-document", "tree": {"sha": "0f47c085df018799957aa29b7330b283985db873", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/0f47c085df018799957aa29b7330b283985db873"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/53a224e4fed5bc304fc8aa04f6c006691ccb4893", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/53a224e4fed5bc304fc8aa04f6c006691ccb4893", "html_url": "https://github.com/airbnb/synapse/commit/53a224e4fed5bc304fc8aa04f6c006691ccb4893", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/53a224e4fed5bc304fc8aa04f6c006691ccb4893/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "09a5d82c004f379f546983b15c49644d7225b98a", "url": "https://api.github.com/repos/airbnb/synapse/commits/09a5d82c004f379f546983b15c49644d7225b98a", "html_url": "https://github.com/airbnb/synapse/commit/09a5d82c004f379f546983b15c49644d7225b98a"}]}, {"sha": "09a5d82c004f379f546983b15c49644d7225b98a", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2015-10-05T03:35:08Z"}, "committer": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2015-10-05T03:35:08Z"}, "message": "Merge pull request #141 from tdooner/improve_installation_instructions\n\nUpdate README.md with better installation directions", "tree": {"sha": "361f05cc20ff63a9ab047e40685e673dfdc3faf2", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/361f05cc20ff63a9ab047e40685e673dfdc3faf2"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/09a5d82c004f379f546983b15c49644d7225b98a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/09a5d82c004f379f546983b15c49644d7225b98a", "html_url": "https://github.com/airbnb/synapse/commit/09a5d82c004f379f546983b15c49644d7225b98a", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/09a5d82c004f379f546983b15c49644d7225b98a/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "01a2409a5f1e19742ff9380ce683a54b31a4b7ad", "url": "https://api.github.com/repos/airbnb/synapse/commits/01a2409a5f1e19742ff9380ce683a54b31a4b7ad", "html_url": "https://github.com/airbnb/synapse/commit/01a2409a5f1e19742ff9380ce683a54b31a4b7ad"}, {"sha": "8d2788f9b450fa351d525fb6b16fe6854062cba4", "url": "https://api.github.com/repos/airbnb/synapse/commits/8d2788f9b450fa351d525fb6b16fe6854062cba4", "html_url": "https://github.com/airbnb/synapse/commit/8d2788f9b450fa351d525fb6b16fe6854062cba4"}]}, {"sha": "8d2788f9b450fa351d525fb6b16fe6854062cba4", "commit": {"author": {"name": "Tom Dooner", "email": "tom.dooner@brigade.com", "date": "2015-10-05T03:09:33Z"}, "committer": {"name": "Tom Dooner", "email": "tom.dooner@brigade.com", "date": "2015-10-05T03:09:33Z"}, "message": "Clarify that the first code block is not installing Ruby", "tree": {"sha": "361f05cc20ff63a9ab047e40685e673dfdc3faf2", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/361f05cc20ff63a9ab047e40685e673dfdc3faf2"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/8d2788f9b450fa351d525fb6b16fe6854062cba4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/8d2788f9b450fa351d525fb6b16fe6854062cba4", "html_url": "https://github.com/airbnb/synapse/commit/8d2788f9b450fa351d525fb6b16fe6854062cba4", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/8d2788f9b450fa351d525fb6b16fe6854062cba4/comments", "author": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "71108e8a5adcc45e63a5a64cb73ce6fac3776b49", "url": "https://api.github.com/repos/airbnb/synapse/commits/71108e8a5adcc45e63a5a64cb73ce6fac3776b49", "html_url": "https://github.com/airbnb/synapse/commit/71108e8a5adcc45e63a5a64cb73ce6fac3776b49"}]}, {"sha": "71108e8a5adcc45e63a5a64cb73ce6fac3776b49", "commit": {"author": {"name": "Tom Dooner", "email": "tom.dooner@brigade.com", "date": "2015-10-05T02:57:26Z"}, "committer": {"name": "Tom Dooner", "email": "tom.dooner@brigade.com", "date": "2015-10-05T03:07:36Z"}, "message": "Update README.md with better installation directions\n\nThe previous installation directions are not great -- they are ambiguous\nbetween whether synapse should be used as a library (and placed in the\ndepending app's Gemfile) vs being used as a standalone application (and\ninstalled via `gem install`).\n\nThe best way I know to deploy a Ruby application is to use `gem install\n--install-dir [path]` to install the application in that path. This\nallows:\n\n* the gem to be installed by any user, not just root\n* the version of synapse's dependencies to be isolated from other system\n  gems\n* easier redistribution as a system package\n\nThe downside is a relative large disk footprint - 36 MB as of writing.\nMany files can be excluded from a system package, like the cache/\ndirectory.", "tree": {"sha": "11406aa9a81a0b7a80e5205d00fc29f5f89209cd", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/11406aa9a81a0b7a80e5205d00fc29f5f89209cd"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/71108e8a5adcc45e63a5a64cb73ce6fac3776b49", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/71108e8a5adcc45e63a5a64cb73ce6fac3776b49", "html_url": "https://github.com/airbnb/synapse/commit/71108e8a5adcc45e63a5a64cb73ce6fac3776b49", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/71108e8a5adcc45e63a5a64cb73ce6fac3776b49/comments", "author": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "01a2409a5f1e19742ff9380ce683a54b31a4b7ad", "url": "https://api.github.com/repos/airbnb/synapse/commits/01a2409a5f1e19742ff9380ce683a54b31a4b7ad", "html_url": "https://github.com/airbnb/synapse/commit/01a2409a5f1e19742ff9380ce683a54b31a4b7ad"}]}, {"sha": "c05817af43da3f4fbac632b882d0edd7ef0fca61", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2015-10-03T22:48:28Z"}, "committer": {"name": "Joseph Lynch", "email": "jlynch@yelp.com", "date": "2015-10-04T01:50:53Z"}, "message": "Allow arbitrary haproxy_server_options to be supplied to HAProxy.\n\nIf you want restarts to be forced when the state changes, you must use\nthe state file.", "tree": {"sha": "7f10622438c80c12fa027c608535d5ea52787247", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/7f10622438c80c12fa027c608535d5ea52787247"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/c05817af43da3f4fbac632b882d0edd7ef0fca61", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/c05817af43da3f4fbac632b882d0edd7ef0fca61", "html_url": "https://github.com/airbnb/synapse/commit/c05817af43da3f4fbac632b882d0edd7ef0fca61", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/c05817af43da3f4fbac632b882d0edd7ef0fca61/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "01a2409a5f1e19742ff9380ce683a54b31a4b7ad", "url": "https://api.github.com/repos/airbnb/synapse/commits/01a2409a5f1e19742ff9380ce683a54b31a4b7ad", "html_url": "https://github.com/airbnb/synapse/commit/01a2409a5f1e19742ff9380ce683a54b31a4b7ad"}]}, {"sha": "01a2409a5f1e19742ff9380ce683a54b31a4b7ad", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2015-09-11T15:21:48Z"}, "committer": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2015-09-11T15:21:48Z"}, "message": "Merge pull request #126 from dcosson/ec2tag_improvements\n\nec2tag watcher improvements", "tree": {"sha": "0fa662b6b3991b31b0615c02f95d0564524ec3c3", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/0fa662b6b3991b31b0615c02f95d0564524ec3c3"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/01a2409a5f1e19742ff9380ce683a54b31a4b7ad", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/01a2409a5f1e19742ff9380ce683a54b31a4b7ad", "html_url": "https://github.com/airbnb/synapse/commit/01a2409a5f1e19742ff9380ce683a54b31a4b7ad", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/01a2409a5f1e19742ff9380ce683a54b31a4b7ad/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "45fde7fb9bbc24953b36199e333dc8dcc9c95349", "url": "https://api.github.com/repos/airbnb/synapse/commits/45fde7fb9bbc24953b36199e333dc8dcc9c95349", "html_url": "https://github.com/airbnb/synapse/commit/45fde7fb9bbc24953b36199e333dc8dcc9c95349"}, {"sha": "9d9e5ad6339f1bfe604e900c1255a3e61a5e35a4", "url": "https://api.github.com/repos/airbnb/synapse/commits/9d9e5ad6339f1bfe604e900c1255a3e61a5e35a4", "html_url": "https://github.com/airbnb/synapse/commit/9d9e5ad6339f1bfe604e900c1255a3e61a5e35a4"}]}, {"sha": "9d9e5ad6339f1bfe604e900c1255a3e61a5e35a4", "commit": {"author": {"name": "Danny Cosson", "email": "dcosson@gmail.com", "date": "2015-06-24T13:53:37Z"}, "committer": {"name": "Danny Cosson", "email": "dcosson@gmail.com", "date": "2015-09-11T15:04:28Z"}, "message": "adds specs for ec2tag watch method, and fixes bug where if an exception\nwas raised the normal sleep got skipped, so it could get stuck calling\nthe failing discover instances code in a tight loop every few ms", "tree": {"sha": "0fa662b6b3991b31b0615c02f95d0564524ec3c3", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/0fa662b6b3991b31b0615c02f95d0564524ec3c3"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/9d9e5ad6339f1bfe604e900c1255a3e61a5e35a4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/9d9e5ad6339f1bfe604e900c1255a3e61a5e35a4", "html_url": "https://github.com/airbnb/synapse/commit/9d9e5ad6339f1bfe604e900c1255a3e61a5e35a4", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/9d9e5ad6339f1bfe604e900c1255a3e61a5e35a4/comments", "author": {"login": "dcosson", "id": 708904, "avatar_url": "https://avatars0.githubusercontent.com/u/708904?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dcosson", "html_url": "https://github.com/dcosson", "followers_url": "https://api.github.com/users/dcosson/followers", "following_url": "https://api.github.com/users/dcosson/following{/other_user}", "gists_url": "https://api.github.com/users/dcosson/gists{/gist_id}", "starred_url": "https://api.github.com/users/dcosson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dcosson/subscriptions", "organizations_url": "https://api.github.com/users/dcosson/orgs", "repos_url": "https://api.github.com/users/dcosson/repos", "events_url": "https://api.github.com/users/dcosson/events{/privacy}", "received_events_url": "https://api.github.com/users/dcosson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dcosson", "id": 708904, "avatar_url": "https://avatars0.githubusercontent.com/u/708904?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dcosson", "html_url": "https://github.com/dcosson", "followers_url": "https://api.github.com/users/dcosson/followers", "following_url": "https://api.github.com/users/dcosson/following{/other_user}", "gists_url": "https://api.github.com/users/dcosson/gists{/gist_id}", "starred_url": "https://api.github.com/users/dcosson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dcosson/subscriptions", "organizations_url": "https://api.github.com/users/dcosson/orgs", "repos_url": "https://api.github.com/users/dcosson/repos", "events_url": "https://api.github.com/users/dcosson/events{/privacy}", "received_events_url": "https://api.github.com/users/dcosson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d5d580aaf7f31ac0fb288513037ad30617669662", "url": "https://api.github.com/repos/airbnb/synapse/commits/d5d580aaf7f31ac0fb288513037ad30617669662", "html_url": "https://github.com/airbnb/synapse/commit/d5d580aaf7f31ac0fb288513037ad30617669662"}]}, {"sha": "d5d580aaf7f31ac0fb288513037ad30617669662", "commit": {"author": {"name": "Danny Cosson", "email": "dcosson@gmail.com", "date": "2015-06-23T21:32:13Z"}, "committer": {"name": "Danny Cosson", "email": "dcosson@gmail.com", "date": "2015-09-11T14:40:06Z"}, "message": "Don't have synapse require the aws variables - credentials should be\nable to be nil to allow using iam instance profile. Updates tests to\nreflect", "tree": {"sha": "2d70e60976499b93da9c3eb329d8b0c5d94dbdea", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/2d70e60976499b93da9c3eb329d8b0c5d94dbdea"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/d5d580aaf7f31ac0fb288513037ad30617669662", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/d5d580aaf7f31ac0fb288513037ad30617669662", "html_url": "https://github.com/airbnb/synapse/commit/d5d580aaf7f31ac0fb288513037ad30617669662", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/d5d580aaf7f31ac0fb288513037ad30617669662/comments", "author": {"login": "dcosson", "id": 708904, "avatar_url": "https://avatars0.githubusercontent.com/u/708904?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dcosson", "html_url": "https://github.com/dcosson", "followers_url": "https://api.github.com/users/dcosson/followers", "following_url": "https://api.github.com/users/dcosson/following{/other_user}", "gists_url": "https://api.github.com/users/dcosson/gists{/gist_id}", "starred_url": "https://api.github.com/users/dcosson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dcosson/subscriptions", "organizations_url": "https://api.github.com/users/dcosson/orgs", "repos_url": "https://api.github.com/users/dcosson/repos", "events_url": "https://api.github.com/users/dcosson/events{/privacy}", "received_events_url": "https://api.github.com/users/dcosson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dcosson", "id": 708904, "avatar_url": "https://avatars0.githubusercontent.com/u/708904?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dcosson", "html_url": "https://github.com/dcosson", "followers_url": "https://api.github.com/users/dcosson/followers", "following_url": "https://api.github.com/users/dcosson/following{/other_user}", "gists_url": "https://api.github.com/users/dcosson/gists{/gist_id}", "starred_url": "https://api.github.com/users/dcosson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dcosson/subscriptions", "organizations_url": "https://api.github.com/users/dcosson/orgs", "repos_url": "https://api.github.com/users/dcosson/repos", "events_url": "https://api.github.com/users/dcosson/events{/privacy}", "received_events_url": "https://api.github.com/users/dcosson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c59116e06206a38cccb553747df69b7fb4ec6256", "url": "https://api.github.com/repos/airbnb/synapse/commits/c59116e06206a38cccb553747df69b7fb4ec6256", "html_url": "https://github.com/airbnb/synapse/commit/c59116e06206a38cccb553747df69b7fb4ec6256"}]}, {"sha": "c59116e06206a38cccb553747df69b7fb4ec6256", "commit": {"author": {"name": "Danny Cosson", "email": "dcosson@gmail.com", "date": "2015-06-23T21:12:57Z"}, "committer": {"name": "Danny Cosson", "email": "dcosson@gmail.com", "date": "2015-09-11T14:38:35Z"}, "message": "allow `server_port_override` to be an int since the other `port`\nconfig options can be ints", "tree": {"sha": "edecd96f3022c84c5a2eb84e939ad2d84184efe6", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/edecd96f3022c84c5a2eb84e939ad2d84184efe6"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/c59116e06206a38cccb553747df69b7fb4ec6256", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/c59116e06206a38cccb553747df69b7fb4ec6256", "html_url": "https://github.com/airbnb/synapse/commit/c59116e06206a38cccb553747df69b7fb4ec6256", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/c59116e06206a38cccb553747df69b7fb4ec6256/comments", "author": {"login": "dcosson", "id": 708904, "avatar_url": "https://avatars0.githubusercontent.com/u/708904?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dcosson", "html_url": "https://github.com/dcosson", "followers_url": "https://api.github.com/users/dcosson/followers", "following_url": "https://api.github.com/users/dcosson/following{/other_user}", "gists_url": "https://api.github.com/users/dcosson/gists{/gist_id}", "starred_url": "https://api.github.com/users/dcosson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dcosson/subscriptions", "organizations_url": "https://api.github.com/users/dcosson/orgs", "repos_url": "https://api.github.com/users/dcosson/repos", "events_url": "https://api.github.com/users/dcosson/events{/privacy}", "received_events_url": "https://api.github.com/users/dcosson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dcosson", "id": 708904, "avatar_url": "https://avatars0.githubusercontent.com/u/708904?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dcosson", "html_url": "https://github.com/dcosson", "followers_url": "https://api.github.com/users/dcosson/followers", "following_url": "https://api.github.com/users/dcosson/following{/other_user}", "gists_url": "https://api.github.com/users/dcosson/gists{/gist_id}", "starred_url": "https://api.github.com/users/dcosson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dcosson/subscriptions", "organizations_url": "https://api.github.com/users/dcosson/orgs", "repos_url": "https://api.github.com/users/dcosson/repos", "events_url": "https://api.github.com/users/dcosson/events{/privacy}", "received_events_url": "https://api.github.com/users/dcosson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "45fde7fb9bbc24953b36199e333dc8dcc9c95349", "url": "https://api.github.com/repos/airbnb/synapse/commits/45fde7fb9bbc24953b36199e333dc8dcc9c95349", "html_url": "https://github.com/airbnb/synapse/commit/45fde7fb9bbc24953b36199e333dc8dcc9c95349"}]}, {"sha": "45fde7fb9bbc24953b36199e333dc8dcc9c95349", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2015-09-11T03:16:16Z"}, "committer": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2015-09-11T03:16:16Z"}, "message": "Merge pull request #112 from larryweya/fix-docs\n\nsynapse expects arrays under shared_frontend, hosts and backend", "tree": {"sha": "2ba043cebe1714b985c5211c33ce9fdc80467761", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/2ba043cebe1714b985c5211c33ce9fdc80467761"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/45fde7fb9bbc24953b36199e333dc8dcc9c95349", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/45fde7fb9bbc24953b36199e333dc8dcc9c95349", "html_url": "https://github.com/airbnb/synapse/commit/45fde7fb9bbc24953b36199e333dc8dcc9c95349", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/45fde7fb9bbc24953b36199e333dc8dcc9c95349/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6970f1a1c580b5e44755f3ce79011ee4bc153e10", "url": "https://api.github.com/repos/airbnb/synapse/commits/6970f1a1c580b5e44755f3ce79011ee4bc153e10", "html_url": "https://github.com/airbnb/synapse/commit/6970f1a1c580b5e44755f3ce79011ee4bc153e10"}, {"sha": "704c9c3519f14003fab9074fb1c5ab03223db723", "url": "https://api.github.com/repos/airbnb/synapse/commits/704c9c3519f14003fab9074fb1c5ab03223db723", "html_url": "https://github.com/airbnb/synapse/commit/704c9c3519f14003fab9074fb1c5ab03223db723"}]}, {"sha": "6970f1a1c580b5e44755f3ce79011ee4bc153e10", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2015-09-07T20:09:26Z"}, "committer": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2015-09-07T20:09:26Z"}, "message": "Merge pull request #138 from airbnb/fix_ruby_2_x_support\n\nDo not unregister the callback in the zk watcher", "tree": {"sha": "0af10dec9b87d8a4a16ba50f20fff261fc29d71d", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/0af10dec9b87d8a4a16ba50f20fff261fc29d71d"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/6970f1a1c580b5e44755f3ce79011ee4bc153e10", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/6970f1a1c580b5e44755f3ce79011ee4bc153e10", "html_url": "https://github.com/airbnb/synapse/commit/6970f1a1c580b5e44755f3ce79011ee4bc153e10", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/6970f1a1c580b5e44755f3ce79011ee4bc153e10/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6795c4ee02353b212aee38dc177577c8d21b9f07", "url": "https://api.github.com/repos/airbnb/synapse/commits/6795c4ee02353b212aee38dc177577c8d21b9f07", "html_url": "https://github.com/airbnb/synapse/commit/6795c4ee02353b212aee38dc177577c8d21b9f07"}, {"sha": "dd983639b63aa8891feb8ccadb2bf49c3ee86074", "url": "https://api.github.com/repos/airbnb/synapse/commits/dd983639b63aa8891feb8ccadb2bf49c3ee86074", "html_url": "https://github.com/airbnb/synapse/commit/dd983639b63aa8891feb8ccadb2bf49c3ee86074"}]}, {"sha": "6795c4ee02353b212aee38dc177577c8d21b9f07", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2015-09-07T20:07:30Z"}, "committer": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2015-09-07T20:07:30Z"}, "message": "Merge pull request #132 from airbnb/custom_watchers\n\nAllow pluggable watchers", "tree": {"sha": "81acd1a426f4cb2a0f1abe9734d2f92f77280de5", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/81acd1a426f4cb2a0f1abe9734d2f92f77280de5"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/6795c4ee02353b212aee38dc177577c8d21b9f07", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/6795c4ee02353b212aee38dc177577c8d21b9f07", "html_url": "https://github.com/airbnb/synapse/commit/6795c4ee02353b212aee38dc177577c8d21b9f07", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/6795c4ee02353b212aee38dc177577c8d21b9f07/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "840b0805f8c7858fa0a88e8aa57c6219b8ea75e8", "url": "https://api.github.com/repos/airbnb/synapse/commits/840b0805f8c7858fa0a88e8aa57c6219b8ea75e8", "html_url": "https://github.com/airbnb/synapse/commit/840b0805f8c7858fa0a88e8aa57c6219b8ea75e8"}, {"sha": "6f399de771962644e5cdc46ea49efdc8d2376a1a", "url": "https://api.github.com/repos/airbnb/synapse/commits/6f399de771962644e5cdc46ea49efdc8d2376a1a", "html_url": "https://github.com/airbnb/synapse/commit/6f399de771962644e5cdc46ea49efdc8d2376a1a"}]}, {"sha": "6f399de771962644e5cdc46ea49efdc8d2376a1a", "commit": {"author": {"name": "Joseph Lynch", "email": "jlynch@yelp.com", "date": "2015-09-07T20:04:02Z"}, "committer": {"name": "Joseph Lynch", "email": "jlynch@yelp.com", "date": "2015-09-07T20:04:29Z"}, "message": "Linking from main README to service watcher README", "tree": {"sha": "81acd1a426f4cb2a0f1abe9734d2f92f77280de5", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/81acd1a426f4cb2a0f1abe9734d2f92f77280de5"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/6f399de771962644e5cdc46ea49efdc8d2376a1a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/6f399de771962644e5cdc46ea49efdc8d2376a1a", "html_url": "https://github.com/airbnb/synapse/commit/6f399de771962644e5cdc46ea49efdc8d2376a1a", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/6f399de771962644e5cdc46ea49efdc8d2376a1a/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9c7d99b30861a2c039639dc6e874def678d81e2e", "url": "https://api.github.com/repos/airbnb/synapse/commits/9c7d99b30861a2c039639dc6e874def678d81e2e", "html_url": "https://github.com/airbnb/synapse/commit/9c7d99b30861a2c039639dc6e874def678d81e2e"}]}, {"sha": "9c7d99b30861a2c039639dc6e874def678d81e2e", "commit": {"author": {"name": "Joseph Lynch", "email": "jlynch@yelp.com", "date": "2015-08-06T17:38:36Z"}, "committer": {"name": "Joseph Lynch", "email": "jlynch@yelp.com", "date": "2015-09-07T20:04:29Z"}, "message": "Allow pluggable watchers\n\nSimilar to what tdoran did in his nerve commit 258d62a823, this commit\nallows Smartstack consumers to provide their own pluggable service\nwatchers.\n\nSimply name your class correctly and put it in the right place and poof,\nyou have your own service watcher.", "tree": {"sha": "3286d87a7d7c0f7e46852d73af5768f4165446e9", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/3286d87a7d7c0f7e46852d73af5768f4165446e9"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/9c7d99b30861a2c039639dc6e874def678d81e2e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/9c7d99b30861a2c039639dc6e874def678d81e2e", "html_url": "https://github.com/airbnb/synapse/commit/9c7d99b30861a2c039639dc6e874def678d81e2e", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/9c7d99b30861a2c039639dc6e874def678d81e2e/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "840b0805f8c7858fa0a88e8aa57c6219b8ea75e8", "url": "https://api.github.com/repos/airbnb/synapse/commits/840b0805f8c7858fa0a88e8aa57c6219b8ea75e8", "html_url": "https://github.com/airbnb/synapse/commit/840b0805f8c7858fa0a88e8aa57c6219b8ea75e8"}]}, {"sha": "dd983639b63aa8891feb8ccadb2bf49c3ee86074", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@mit.edu", "date": "2015-09-04T04:49:00Z"}, "committer": {"name": "Joseph Lynch", "email": "jolynch@mit.edu", "date": "2015-09-04T04:49:00Z"}, "message": "Handle path going away properly", "tree": {"sha": "7265ea455114f354f55dfb7b456f755d10bad2ba", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/7265ea455114f354f55dfb7b456f755d10bad2ba"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/dd983639b63aa8891feb8ccadb2bf49c3ee86074", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/dd983639b63aa8891feb8ccadb2bf49c3ee86074", "html_url": "https://github.com/airbnb/synapse/commit/dd983639b63aa8891feb8ccadb2bf49c3ee86074", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/dd983639b63aa8891feb8ccadb2bf49c3ee86074/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "844e1a95eebbea2bd4359b3e1395d202da0f0d39", "url": "https://api.github.com/repos/airbnb/synapse/commits/844e1a95eebbea2bd4359b3e1395d202da0f0d39", "html_url": "https://github.com/airbnb/synapse/commit/844e1a95eebbea2bd4359b3e1395d202da0f0d39"}]}, {"sha": "844e1a95eebbea2bd4359b3e1395d202da0f0d39", "commit": {"author": {"name": "Joseph Lynch", "email": "jlynch@yelp.com", "date": "2015-09-03T17:51:32Z"}, "committer": {"name": "Joseph Lynch", "email": "jlynch@yelp.com", "date": "2015-09-03T20:19:00Z"}, "message": "Do not unregister the callback in the zk watcher\n\nAddresses incompatibility of per_callback threading in ZK, the way that\nsynapse calls unsubscribe within the callback, and ruby 2.X really not\nliking joining on the current running thread.\n\nShould fix #137 #99 and possibly #94", "tree": {"sha": "54b217200e30047c67e86745bad691eb551f0d62", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/54b217200e30047c67e86745bad691eb551f0d62"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/844e1a95eebbea2bd4359b3e1395d202da0f0d39", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/844e1a95eebbea2bd4359b3e1395d202da0f0d39", "html_url": "https://github.com/airbnb/synapse/commit/844e1a95eebbea2bd4359b3e1395d202da0f0d39", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/844e1a95eebbea2bd4359b3e1395d202da0f0d39/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "840b0805f8c7858fa0a88e8aa57c6219b8ea75e8", "url": "https://api.github.com/repos/airbnb/synapse/commits/840b0805f8c7858fa0a88e8aa57c6219b8ea75e8", "html_url": "https://github.com/airbnb/synapse/commit/840b0805f8c7858fa0a88e8aa57c6219b8ea75e8"}]}, {"sha": "840b0805f8c7858fa0a88e8aa57c6219b8ea75e8", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2015-09-01T00:08:32Z"}, "committer": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2015-09-01T00:08:32Z"}, "message": "Merge pull request #135 from airbnb/explict_backend_names\n\nExplicit watcher haproxy backend names", "tree": {"sha": "ffc0793e78c3c1f739b47d21a7f0f8fb5ba3da97", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/ffc0793e78c3c1f739b47d21a7f0f8fb5ba3da97"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/840b0805f8c7858fa0a88e8aa57c6219b8ea75e8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/840b0805f8c7858fa0a88e8aa57c6219b8ea75e8", "html_url": "https://github.com/airbnb/synapse/commit/840b0805f8c7858fa0a88e8aa57c6219b8ea75e8", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/840b0805f8c7858fa0a88e8aa57c6219b8ea75e8/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5dcdf5a19303f3c2cfac1f4233e5124cf4e61e97", "url": "https://api.github.com/repos/airbnb/synapse/commits/5dcdf5a19303f3c2cfac1f4233e5124cf4e61e97", "html_url": "https://github.com/airbnb/synapse/commit/5dcdf5a19303f3c2cfac1f4233e5124cf4e61e97"}, {"sha": "805c22039c7d5ff775930e2c3e880dca83ad3502", "url": "https://api.github.com/repos/airbnb/synapse/commits/805c22039c7d5ff775930e2c3e880dca83ad3502", "html_url": "https://github.com/airbnb/synapse/commit/805c22039c7d5ff775930e2c3e880dca83ad3502"}]}, {"sha": "5dcdf5a19303f3c2cfac1f4233e5124cf4e61e97", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2015-08-15T20:04:34Z"}, "committer": {"name": "Joseph Lynch", "email": "jolynch@users.noreply.github.com", "date": "2015-08-15T20:04:34Z"}, "message": "Merge pull request #136 from airbnb/work_on_documentation\n\nSome minor documentation fixups", "tree": {"sha": "338469ae7d13ddaadf5178258127558e866c0793", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/338469ae7d13ddaadf5178258127558e866c0793"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/5dcdf5a19303f3c2cfac1f4233e5124cf4e61e97", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/5dcdf5a19303f3c2cfac1f4233e5124cf4e61e97", "html_url": "https://github.com/airbnb/synapse/commit/5dcdf5a19303f3c2cfac1f4233e5124cf4e61e97", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/5dcdf5a19303f3c2cfac1f4233e5124cf4e61e97/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "98561d682cbcc041a712d4a65ba5d8d957fae6b1", "url": "https://api.github.com/repos/airbnb/synapse/commits/98561d682cbcc041a712d4a65ba5d8d957fae6b1", "html_url": "https://github.com/airbnb/synapse/commit/98561d682cbcc041a712d4a65ba5d8d957fae6b1"}, {"sha": "5183d3d2c1672cff590e96cc7b65a4486217bbb5", "url": "https://api.github.com/repos/airbnb/synapse/commits/5183d3d2c1672cff590e96cc7b65a4486217bbb5", "html_url": "https://github.com/airbnb/synapse/commit/5183d3d2c1672cff590e96cc7b65a4486217bbb5"}]}, {"sha": "5183d3d2c1672cff590e96cc7b65a4486217bbb5", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@mit.edu", "date": "2015-08-15T19:59:26Z"}, "committer": {"name": "Joseph Lynch", "email": "jolynch@mit.edu", "date": "2015-08-15T19:59:26Z"}, "message": "Some minor documentation fixups\n\nReading through the readme is a bit confusing as to which haproxy is which\nand where file_output actually goes, I've tried fixing that.", "tree": {"sha": "338469ae7d13ddaadf5178258127558e866c0793", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/338469ae7d13ddaadf5178258127558e866c0793"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/5183d3d2c1672cff590e96cc7b65a4486217bbb5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/5183d3d2c1672cff590e96cc7b65a4486217bbb5", "html_url": "https://github.com/airbnb/synapse/commit/5183d3d2c1672cff590e96cc7b65a4486217bbb5", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/5183d3d2c1672cff590e96cc7b65a4486217bbb5/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "98561d682cbcc041a712d4a65ba5d8d957fae6b1", "url": "https://api.github.com/repos/airbnb/synapse/commits/98561d682cbcc041a712d4a65ba5d8d957fae6b1", "html_url": "https://github.com/airbnb/synapse/commit/98561d682cbcc041a712d4a65ba5d8d957fae6b1"}]}, {"sha": "805c22039c7d5ff775930e2c3e880dca83ad3502", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@mit.edu", "date": "2015-08-15T19:26:25Z"}, "committer": {"name": "Joseph Lynch", "email": "jolynch@mit.edu", "date": "2015-08-15T19:37:04Z"}, "message": "Explicit watcher haproxy backend names\n\nThis allows acls in frontend sections to reference backends without coupling\nto the current convention of naming backends after watcher names", "tree": {"sha": "f9163575358280b8405cb8b565d77e71f276d401", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/f9163575358280b8405cb8b565d77e71f276d401"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/805c22039c7d5ff775930e2c3e880dca83ad3502", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/805c22039c7d5ff775930e2c3e880dca83ad3502", "html_url": "https://github.com/airbnb/synapse/commit/805c22039c7d5ff775930e2c3e880dca83ad3502", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/805c22039c7d5ff775930e2c3e880dca83ad3502/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "98561d682cbcc041a712d4a65ba5d8d957fae6b1", "url": "https://api.github.com/repos/airbnb/synapse/commits/98561d682cbcc041a712d4a65ba5d8d957fae6b1", "html_url": "https://github.com/airbnb/synapse/commit/98561d682cbcc041a712d4a65ba5d8d957fae6b1"}]}, {"sha": "98561d682cbcc041a712d4a65ba5d8d957fae6b1", "commit": {"author": {"name": "Igor Serebryany", "email": "igor.serebryany@airbedandbreakfast.com", "date": "2015-07-24T00:31:59Z"}, "committer": {"name": "Igor Serebryany", "email": "igor.serebryany@airbedandbreakfast.com", "date": "2015-07-24T00:31:59Z"}, "message": "[travis] switch to new infrastructure", "tree": {"sha": "a26500a319eae108fd7f3e5a0c5d9bb9586e1d9b", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/a26500a319eae108fd7f3e5a0c5d9bb9586e1d9b"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/98561d682cbcc041a712d4a65ba5d8d957fae6b1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/98561d682cbcc041a712d4a65ba5d8d957fae6b1", "html_url": "https://github.com/airbnb/synapse/commit/98561d682cbcc041a712d4a65ba5d8d957fae6b1", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/98561d682cbcc041a712d4a65ba5d8d957fae6b1/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "779f7264f88ee96b84cbdb2baa9c23be5483e362", "url": "https://api.github.com/repos/airbnb/synapse/commits/779f7264f88ee96b84cbdb2baa9c23be5483e362", "html_url": "https://github.com/airbnb/synapse/commit/779f7264f88ee96b84cbdb2baa9c23be5483e362"}]}, {"sha": "779f7264f88ee96b84cbdb2baa9c23be5483e362", "commit": {"author": {"name": "Igor Serebryany", "email": "igor.serebryany@airbedandbreakfast.com", "date": "2015-07-24T00:27:43Z"}, "committer": {"name": "Igor Serebryany", "email": "igor.serebryany@airbedandbreakfast.com", "date": "2015-07-24T00:27:43Z"}, "message": "bump version to v0.12.1\n\ni failed to bundle install before marking v0.12.0 :(", "tree": {"sha": "527b7be261c89dc7f71c3f2057a3bf7d32a4fc88", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/527b7be261c89dc7f71c3f2057a3bf7d32a4fc88"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/779f7264f88ee96b84cbdb2baa9c23be5483e362", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/779f7264f88ee96b84cbdb2baa9c23be5483e362", "html_url": "https://github.com/airbnb/synapse/commit/779f7264f88ee96b84cbdb2baa9c23be5483e362", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/779f7264f88ee96b84cbdb2baa9c23be5483e362/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a3f03b8f704752b2f8bdffe1b018edefbc853073", "url": "https://api.github.com/repos/airbnb/synapse/commits/a3f03b8f704752b2f8bdffe1b018edefbc853073", "html_url": "https://github.com/airbnb/synapse/commit/a3f03b8f704752b2f8bdffe1b018edefbc853073"}]}, {"sha": "a3f03b8f704752b2f8bdffe1b018edefbc853073", "commit": {"author": {"name": "Igor Serebryany", "email": "igor.serebryany@airbedandbreakfast.com", "date": "2015-07-24T00:24:53Z"}, "committer": {"name": "Igor Serebryany", "email": "igor.serebryany@airbedandbreakfast.com", "date": "2015-07-24T00:24:53Z"}, "message": "bump version to v0.12.0", "tree": {"sha": "783202085d990ed2abbc498f1a78895fd4aed0b4", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/783202085d990ed2abbc498f1a78895fd4aed0b4"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/a3f03b8f704752b2f8bdffe1b018edefbc853073", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/a3f03b8f704752b2f8bdffe1b018edefbc853073", "html_url": "https://github.com/airbnb/synapse/commit/a3f03b8f704752b2f8bdffe1b018edefbc853073", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/a3f03b8f704752b2f8bdffe1b018edefbc853073/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3e36e8855974d8659090917491c5f95d523faeab", "url": "https://api.github.com/repos/airbnb/synapse/commits/3e36e8855974d8659090917491c5f95d523faeab", "html_url": "https://github.com/airbnb/synapse/commit/3e36e8855974d8659090917491c5f95d523faeab"}]}, {"sha": "3e36e8855974d8659090917491c5f95d523faeab", "commit": {"author": {"name": "John Billings", "email": "john@monkeynut.org", "date": "2015-07-23T22:05:46Z"}, "committer": {"name": "John Billings", "email": "john@monkeynut.org", "date": "2015-07-23T22:05:46Z"}, "message": "Merge pull request #130 from Yelp/merge_the_forks\n\nMerge the forks", "tree": {"sha": "29ea7493a4263fa2a56fa9aa083a7459013c38f1", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/29ea7493a4263fa2a56fa9aa083a7459013c38f1"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/3e36e8855974d8659090917491c5f95d523faeab", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/3e36e8855974d8659090917491c5f95d523faeab", "html_url": "https://github.com/airbnb/synapse/commit/3e36e8855974d8659090917491c5f95d523faeab", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/3e36e8855974d8659090917491c5f95d523faeab/comments", "author": {"login": "jnb", "id": 514311, "avatar_url": "https://avatars2.githubusercontent.com/u/514311?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnb", "html_url": "https://github.com/jnb", "followers_url": "https://api.github.com/users/jnb/followers", "following_url": "https://api.github.com/users/jnb/following{/other_user}", "gists_url": "https://api.github.com/users/jnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnb/subscriptions", "organizations_url": "https://api.github.com/users/jnb/orgs", "repos_url": "https://api.github.com/users/jnb/repos", "events_url": "https://api.github.com/users/jnb/events{/privacy}", "received_events_url": "https://api.github.com/users/jnb/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jnb", "id": 514311, "avatar_url": "https://avatars2.githubusercontent.com/u/514311?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnb", "html_url": "https://github.com/jnb", "followers_url": "https://api.github.com/users/jnb/followers", "following_url": "https://api.github.com/users/jnb/following{/other_user}", "gists_url": "https://api.github.com/users/jnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnb/subscriptions", "organizations_url": "https://api.github.com/users/jnb/orgs", "repos_url": "https://api.github.com/users/jnb/repos", "events_url": "https://api.github.com/users/jnb/events{/privacy}", "received_events_url": "https://api.github.com/users/jnb/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "142b2576abef136c7140eaa2bf2094f4a4641967", "url": "https://api.github.com/repos/airbnb/synapse/commits/142b2576abef136c7140eaa2bf2094f4a4641967", "html_url": "https://github.com/airbnb/synapse/commit/142b2576abef136c7140eaa2bf2094f4a4641967"}, {"sha": "6f11a826ec23e9741434cdc5daf0a6f767760d0a", "url": "https://api.github.com/repos/airbnb/synapse/commits/6f11a826ec23e9741434cdc5daf0a6f767760d0a", "html_url": "https://github.com/airbnb/synapse/commit/6f11a826ec23e9741434cdc5daf0a6f767760d0a"}]}, {"sha": "6f11a826ec23e9741434cdc5daf0a6f767760d0a", "commit": {"author": {"name": "Joseph Lynch", "email": "jlynch@yelp.com", "date": "2015-07-23T16:31:48Z"}, "committer": {"name": "Joseph Lynch", "email": "jlynch@yelp.com", "date": "2015-07-23T18:29:08Z"}, "message": "Fixed wording of some documentation, added missing options\n\nAdded documentation of the state_file cache options as well as a few\ncomments. Also fixed some error messages to be more clear.", "tree": {"sha": "29ea7493a4263fa2a56fa9aa083a7459013c38f1", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/29ea7493a4263fa2a56fa9aa083a7459013c38f1"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/6f11a826ec23e9741434cdc5daf0a6f767760d0a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/6f11a826ec23e9741434cdc5daf0a6f767760d0a", "html_url": "https://github.com/airbnb/synapse/commit/6f11a826ec23e9741434cdc5daf0a6f767760d0a", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/6f11a826ec23e9741434cdc5daf0a6f767760d0a/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cd2ea63b7fd746defad09e1ee12bfd40110245e7", "url": "https://api.github.com/repos/airbnb/synapse/commits/cd2ea63b7fd746defad09e1ee12bfd40110245e7", "html_url": "https://github.com/airbnb/synapse/commit/cd2ea63b7fd746defad09e1ee12bfd40110245e7"}]}, {"sha": "cd2ea63b7fd746defad09e1ee12bfd40110245e7", "commit": {"author": {"name": "Joseph Lynch", "email": "jlynch@yelp.com", "date": "2015-07-23T03:55:52Z"}, "committer": {"name": "Joseph Lynch", "email": "jlynch@yelp.com", "date": "2015-07-23T05:15:30Z"}, "message": "Address feedback from igor and schleyfox\n\nAdds a comment about when we write out the file output and restored\nrandom backend ordering.", "tree": {"sha": "8549881c3a026c097bfcb11ffaa0803857648feb", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/8549881c3a026c097bfcb11ffaa0803857648feb"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/cd2ea63b7fd746defad09e1ee12bfd40110245e7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/cd2ea63b7fd746defad09e1ee12bfd40110245e7", "html_url": "https://github.com/airbnb/synapse/commit/cd2ea63b7fd746defad09e1ee12bfd40110245e7", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/cd2ea63b7fd746defad09e1ee12bfd40110245e7/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b3c0fb7a9e12a771773ed5f1a2a91d49c9690770", "url": "https://api.github.com/repos/airbnb/synapse/commits/b3c0fb7a9e12a771773ed5f1a2a91d49c9690770", "html_url": "https://github.com/airbnb/synapse/commit/b3c0fb7a9e12a771773ed5f1a2a91d49c9690770"}]}, {"sha": "b3c0fb7a9e12a771773ed5f1a2a91d49c9690770", "commit": {"author": {"name": "Joseph Lynch", "email": "jlynch@yelp.com", "date": "2015-07-22T00:02:22Z"}, "committer": {"name": "Joseph Lynch", "email": "jlynch@yelp.com", "date": "2015-07-22T00:16:17Z"}, "message": "Fixups for merge to airbnb/master", "tree": {"sha": "3b78bc8e96fb9b8cb249f499e05ab12101e43de8", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/3b78bc8e96fb9b8cb249f499e05ab12101e43de8"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/b3c0fb7a9e12a771773ed5f1a2a91d49c9690770", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/b3c0fb7a9e12a771773ed5f1a2a91d49c9690770", "html_url": "https://github.com/airbnb/synapse/commit/b3c0fb7a9e12a771773ed5f1a2a91d49c9690770", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/b3c0fb7a9e12a771773ed5f1a2a91d49c9690770/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1eac13366b4e86041d0d5f2941d6ee4234a81523", "url": "https://api.github.com/repos/airbnb/synapse/commits/1eac13366b4e86041d0d5f2941d6ee4234a81523", "html_url": "https://github.com/airbnb/synapse/commit/1eac13366b4e86041d0d5f2941d6ee4234a81523"}]}, {"sha": "1eac13366b4e86041d0d5f2941d6ee4234a81523", "commit": {"author": {"name": "Joseph Lynch", "email": "jlynch@yelp.com", "date": "2015-07-15T20:13:54Z"}, "committer": {"name": "Joseph Lynch", "email": "jlynch@yelp.com", "date": "2015-07-22T00:16:16Z"}, "message": "Turns out it's important to handle session disconnects correctly\n\nThis fixes a bug where we could have a session expiry but not fail pings\nbecause the pooling code would not actually tear down the connection", "tree": {"sha": "01029ec22578cea6d4b9fde4a4741d5f87464831", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/01029ec22578cea6d4b9fde4a4741d5f87464831"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/1eac13366b4e86041d0d5f2941d6ee4234a81523", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/1eac13366b4e86041d0d5f2941d6ee4234a81523", "html_url": "https://github.com/airbnb/synapse/commit/1eac13366b4e86041d0d5f2941d6ee4234a81523", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/1eac13366b4e86041d0d5f2941d6ee4234a81523/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4633f823880547e27cb9759caf980545490621d3", "url": "https://api.github.com/repos/airbnb/synapse/commits/4633f823880547e27cb9759caf980545490621d3", "html_url": "https://github.com/airbnb/synapse/commit/4633f823880547e27cb9759caf980545490621d3"}]}, {"sha": "4633f823880547e27cb9759caf980545490621d3", "commit": {"author": {"name": "Joseph Lynch", "email": "jolynch@mit.edu", "date": "2015-07-13T00:31:34Z"}, "committer": {"name": "Joseph Lynch", "email": "jlynch@yelp.com", "date": "2015-07-22T00:16:16Z"}, "message": "Try out :per_callback threads and get more debug information\n\nWe are experiencing some very slow updates in production and I think it\nmay be due to the connection pooling, try :per_callback threading to see\nif that helps.\n\nAlso fixes default values for do_writes, do_reloads, do_socket", "tree": {"sha": "c911893cd8f9ff8c23c8c14fe82150d57871deac", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/c911893cd8f9ff8c23c8c14fe82150d57871deac"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/4633f823880547e27cb9759caf980545490621d3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/4633f823880547e27cb9759caf980545490621d3", "html_url": "https://github.com/airbnb/synapse/commit/4633f823880547e27cb9759caf980545490621d3", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/4633f823880547e27cb9759caf980545490621d3/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e0593169f076928b2cfc840c83dfd729dbb863ab", "url": "https://api.github.com/repos/airbnb/synapse/commits/e0593169f076928b2cfc840c83dfd729dbb863ab", "html_url": "https://github.com/airbnb/synapse/commit/e0593169f076928b2cfc840c83dfd729dbb863ab"}]}, {"sha": "e0593169f076928b2cfc840c83dfd729dbb863ab", "commit": {"author": {"name": "Tomas Doran", "email": "tdoran@yelp.com", "date": "2015-06-29T14:20:06Z"}, "committer": {"name": "Joseph Lynch", "email": "jlynch@yelp.com", "date": "2015-07-22T00:16:16Z"}, "message": "Add support for the weight key added in nerve", "tree": {"sha": "0fbd234a1d90bbbe96f836005f4d5f1176e4a170", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/0fbd234a1d90bbbe96f836005f4d5f1176e4a170"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/e0593169f076928b2cfc840c83dfd729dbb863ab", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/e0593169f076928b2cfc840c83dfd729dbb863ab", "html_url": "https://github.com/airbnb/synapse/commit/e0593169f076928b2cfc840c83dfd729dbb863ab", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/e0593169f076928b2cfc840c83dfd729dbb863ab/comments", "author": {"login": "bobtfish", "id": 42338, "avatar_url": "https://avatars1.githubusercontent.com/u/42338?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bobtfish", "html_url": "https://github.com/bobtfish", "followers_url": "https://api.github.com/users/bobtfish/followers", "following_url": "https://api.github.com/users/bobtfish/following{/other_user}", "gists_url": "https://api.github.com/users/bobtfish/gists{/gist_id}", "starred_url": "https://api.github.com/users/bobtfish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bobtfish/subscriptions", "organizations_url": "https://api.github.com/users/bobtfish/orgs", "repos_url": "https://api.github.com/users/bobtfish/repos", "events_url": "https://api.github.com/users/bobtfish/events{/privacy}", "received_events_url": "https://api.github.com/users/bobtfish/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5066638e12cb27015b0f9a0aaaa08fce19d892ea", "url": "https://api.github.com/repos/airbnb/synapse/commits/5066638e12cb27015b0f9a0aaaa08fce19d892ea", "html_url": "https://github.com/airbnb/synapse/commit/5066638e12cb27015b0f9a0aaaa08fce19d892ea"}]}, {"sha": "5066638e12cb27015b0f9a0aaaa08fce19d892ea", "commit": {"author": {"name": "John Billings", "email": "billings@yelp.com", "date": "2015-06-17T00:01:57Z"}, "committer": {"name": "Joseph Lynch", "email": "jlynch@yelp.com", "date": "2015-07-22T00:16:16Z"}, "message": "Fix bug in caching logic.", "tree": {"sha": "1c44d2b5a0956d4d62149e84fef4b7d9531b6df2", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/1c44d2b5a0956d4d62149e84fef4b7d9531b6df2"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/5066638e12cb27015b0f9a0aaaa08fce19d892ea", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/5066638e12cb27015b0f9a0aaaa08fce19d892ea", "html_url": "https://github.com/airbnb/synapse/commit/5066638e12cb27015b0f9a0aaaa08fce19d892ea", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/5066638e12cb27015b0f9a0aaaa08fce19d892ea/comments", "author": {"login": "jnb", "id": 514311, "avatar_url": "https://avatars2.githubusercontent.com/u/514311?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnb", "html_url": "https://github.com/jnb", "followers_url": "https://api.github.com/users/jnb/followers", "following_url": "https://api.github.com/users/jnb/following{/other_user}", "gists_url": "https://api.github.com/users/jnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnb/subscriptions", "organizations_url": "https://api.github.com/users/jnb/orgs", "repos_url": "https://api.github.com/users/jnb/repos", "events_url": "https://api.github.com/users/jnb/events{/privacy}", "received_events_url": "https://api.github.com/users/jnb/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4476f0e6d2c8e27fb4676e2ba66a803bcbab73f8", "url": "https://api.github.com/repos/airbnb/synapse/commits/4476f0e6d2c8e27fb4676e2ba66a803bcbab73f8", "html_url": "https://github.com/airbnb/synapse/commit/4476f0e6d2c8e27fb4676e2ba66a803bcbab73f8"}]}, {"sha": "4476f0e6d2c8e27fb4676e2ba66a803bcbab73f8", "commit": {"author": {"name": "John Billings", "email": "billings@yelp.com", "date": "2015-05-29T20:09:27Z"}, "committer": {"name": "Joseph Lynch", "email": "jlynch@yelp.com", "date": "2015-07-22T00:16:16Z"}, "message": "Add state file.", "tree": {"sha": "d3689adbb9ce0f34589e8596409b0d940d4dcda0", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/d3689adbb9ce0f34589e8596409b0d940d4dcda0"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/4476f0e6d2c8e27fb4676e2ba66a803bcbab73f8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/4476f0e6d2c8e27fb4676e2ba66a803bcbab73f8", "html_url": "https://github.com/airbnb/synapse/commit/4476f0e6d2c8e27fb4676e2ba66a803bcbab73f8", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/4476f0e6d2c8e27fb4676e2ba66a803bcbab73f8/comments", "author": {"login": "jnb", "id": 514311, "avatar_url": "https://avatars2.githubusercontent.com/u/514311?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnb", "html_url": "https://github.com/jnb", "followers_url": "https://api.github.com/users/jnb/followers", "following_url": "https://api.github.com/users/jnb/following{/other_user}", "gists_url": "https://api.github.com/users/jnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnb/subscriptions", "organizations_url": "https://api.github.com/users/jnb/orgs", "repos_url": "https://api.github.com/users/jnb/repos", "events_url": "https://api.github.com/users/jnb/events{/privacy}", "received_events_url": "https://api.github.com/users/jnb/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "73f48bf0a248ca4a770c18a140a067539fbf413c", "url": "https://api.github.com/repos/airbnb/synapse/commits/73f48bf0a248ca4a770c18a140a067539fbf413c", "html_url": "https://github.com/airbnb/synapse/commit/73f48bf0a248ca4a770c18a140a067539fbf413c"}]}, {"sha": "73f48bf0a248ca4a770c18a140a067539fbf413c", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2015-05-28T05:00:29Z"}, "committer": {"name": "Joseph Lynch", "email": "jlynch@yelp.com", "date": "2015-07-22T00:16:16Z"}, "message": "Rate limit restarts but not stats socket updates\n\nWe can allow socket updates to go through any time that the config was\nupdated, but restarts must be rate limited for stability", "tree": {"sha": "08dedff2e22cb7463be7797fd3d18e6b2e8e00c6", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/08dedff2e22cb7463be7797fd3d18e6b2e8e00c6"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/73f48bf0a248ca4a770c18a140a067539fbf413c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/73f48bf0a248ca4a770c18a140a067539fbf413c", "html_url": "https://github.com/airbnb/synapse/commit/73f48bf0a248ca4a770c18a140a067539fbf413c", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/73f48bf0a248ca4a770c18a140a067539fbf413c/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "82775562a35a89d60084febb42af135a6362b52c", "url": "https://api.github.com/repos/airbnb/synapse/commits/82775562a35a89d60084febb42af135a6362b52c", "html_url": "https://github.com/airbnb/synapse/commit/82775562a35a89d60084febb42af135a6362b52c"}]}, {"sha": "82775562a35a89d60084febb42af135a6362b52c", "commit": {"author": {"name": "John Billings", "email": "billings@yelp.com", "date": "2015-05-28T07:00:39Z"}, "committer": {"name": "Joseph Lynch", "email": "jlynch@yelp.com", "date": "2015-07-22T00:16:16Z"}, "message": "ZooKeeper connection pooling.", "tree": {"sha": "3a96183c056741e08be513d50064628941b665b8", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/3a96183c056741e08be513d50064628941b665b8"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/82775562a35a89d60084febb42af135a6362b52c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/82775562a35a89d60084febb42af135a6362b52c", "html_url": "https://github.com/airbnb/synapse/commit/82775562a35a89d60084febb42af135a6362b52c", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/82775562a35a89d60084febb42af135a6362b52c/comments", "author": {"login": "jnb", "id": 514311, "avatar_url": "https://avatars2.githubusercontent.com/u/514311?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnb", "html_url": "https://github.com/jnb", "followers_url": "https://api.github.com/users/jnb/followers", "following_url": "https://api.github.com/users/jnb/following{/other_user}", "gists_url": "https://api.github.com/users/jnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnb/subscriptions", "organizations_url": "https://api.github.com/users/jnb/orgs", "repos_url": "https://api.github.com/users/jnb/repos", "events_url": "https://api.github.com/users/jnb/events{/privacy}", "received_events_url": "https://api.github.com/users/jnb/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6c5516e954ca580b2bc9009ea37248e6fa998c84", "url": "https://api.github.com/repos/airbnb/synapse/commits/6c5516e954ca580b2bc9009ea37248e6fa998c84", "html_url": "https://github.com/airbnb/synapse/commit/6c5516e954ca580b2bc9009ea37248e6fa998c84"}]}, {"sha": "6c5516e954ca580b2bc9009ea37248e6fa998c84", "commit": {"author": {"name": "John Billings", "email": "billings@yelp.com", "date": "2015-05-27T18:21:51Z"}, "committer": {"name": "Joseph Lynch", "email": "jlynch@yelp.com", "date": "2015-07-22T00:16:16Z"}, "message": "Increase HAProxy restart interval.", "tree": {"sha": "de9ae9fa5c3129da14773c1cdce791e96aac770f", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/de9ae9fa5c3129da14773c1cdce791e96aac770f"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/6c5516e954ca580b2bc9009ea37248e6fa998c84", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/6c5516e954ca580b2bc9009ea37248e6fa998c84", "html_url": "https://github.com/airbnb/synapse/commit/6c5516e954ca580b2bc9009ea37248e6fa998c84", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/6c5516e954ca580b2bc9009ea37248e6fa998c84/comments", "author": {"login": "jnb", "id": 514311, "avatar_url": "https://avatars2.githubusercontent.com/u/514311?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnb", "html_url": "https://github.com/jnb", "followers_url": "https://api.github.com/users/jnb/followers", "following_url": "https://api.github.com/users/jnb/following{/other_user}", "gists_url": "https://api.github.com/users/jnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnb/subscriptions", "organizations_url": "https://api.github.com/users/jnb/orgs", "repos_url": "https://api.github.com/users/jnb/repos", "events_url": "https://api.github.com/users/jnb/events{/privacy}", "received_events_url": "https://api.github.com/users/jnb/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "14262e776818ea126f97e28d7b1e0461f73a95eb", "url": "https://api.github.com/repos/airbnb/synapse/commits/14262e776818ea126f97e28d7b1e0461f73a95eb", "html_url": "https://github.com/airbnb/synapse/commit/14262e776818ea126f97e28d7b1e0461f73a95eb"}]}, {"sha": "14262e776818ea126f97e28d7b1e0461f73a95eb", "commit": {"author": {"name": "John Billings", "email": "billings@yelp.com", "date": "2015-05-27T18:15:52Z"}, "committer": {"name": "Joseph Lynch", "email": "jlynch@yelp.com", "date": "2015-07-22T00:16:15Z"}, "message": "Revert \"Add rate limiter.\"\n\nThis reverts commit 136d1fe1ef5347c82a9f4d7afe42097b24c3295e.", "tree": {"sha": "e42466fdbda88bb39061cc8621cc29795164089f", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/e42466fdbda88bb39061cc8621cc29795164089f"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/14262e776818ea126f97e28d7b1e0461f73a95eb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/14262e776818ea126f97e28d7b1e0461f73a95eb", "html_url": "https://github.com/airbnb/synapse/commit/14262e776818ea126f97e28d7b1e0461f73a95eb", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/14262e776818ea126f97e28d7b1e0461f73a95eb/comments", "author": {"login": "jnb", "id": 514311, "avatar_url": "https://avatars2.githubusercontent.com/u/514311?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnb", "html_url": "https://github.com/jnb", "followers_url": "https://api.github.com/users/jnb/followers", "following_url": "https://api.github.com/users/jnb/following{/other_user}", "gists_url": "https://api.github.com/users/jnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnb/subscriptions", "organizations_url": "https://api.github.com/users/jnb/orgs", "repos_url": "https://api.github.com/users/jnb/repos", "events_url": "https://api.github.com/users/jnb/events{/privacy}", "received_events_url": "https://api.github.com/users/jnb/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "915193e1739e1e8ec12635e5248ddb1b5422bca2", "url": "https://api.github.com/repos/airbnb/synapse/commits/915193e1739e1e8ec12635e5248ddb1b5422bca2", "html_url": "https://github.com/airbnb/synapse/commit/915193e1739e1e8ec12635e5248ddb1b5422bca2"}]}, {"sha": "915193e1739e1e8ec12635e5248ddb1b5422bca2", "commit": {"author": {"name": "John Billings", "email": "billings@yelp.com", "date": "2015-05-20T18:08:10Z"}, "committer": {"name": "Joseph Lynch", "email": "jlynch@yelp.com", "date": "2015-07-22T00:16:15Z"}, "message": "Add rate limiter.", "tree": {"sha": "0f20815900193662a9aa945170ce41111563b38a", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/0f20815900193662a9aa945170ce41111563b38a"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/915193e1739e1e8ec12635e5248ddb1b5422bca2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/915193e1739e1e8ec12635e5248ddb1b5422bca2", "html_url": "https://github.com/airbnb/synapse/commit/915193e1739e1e8ec12635e5248ddb1b5422bca2", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/915193e1739e1e8ec12635e5248ddb1b5422bca2/comments", "author": {"login": "jnb", "id": 514311, "avatar_url": "https://avatars2.githubusercontent.com/u/514311?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnb", "html_url": "https://github.com/jnb", "followers_url": "https://api.github.com/users/jnb/followers", "following_url": "https://api.github.com/users/jnb/following{/other_user}", "gists_url": "https://api.github.com/users/jnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnb/subscriptions", "organizations_url": "https://api.github.com/users/jnb/orgs", "repos_url": "https://api.github.com/users/jnb/repos", "events_url": "https://api.github.com/users/jnb/events{/privacy}", "received_events_url": "https://api.github.com/users/jnb/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "507af82371191e0aa4a278619ff85b6325bec80a", "url": "https://api.github.com/repos/airbnb/synapse/commits/507af82371191e0aa4a278619ff85b6325bec80a", "html_url": "https://github.com/airbnb/synapse/commit/507af82371191e0aa4a278619ff85b6325bec80a"}]}, {"sha": "507af82371191e0aa4a278619ff85b6325bec80a", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2015-03-16T21:45:27Z"}, "committer": {"name": "Joseph Lynch", "email": "jlynch@yelp.com", "date": "2015-07-22T00:16:15Z"}, "message": "Allow the option allredisp option to haproxy.\n\nNote that at this time only the Yelp fork of haproxy has support for\nredispatching on every retry.", "tree": {"sha": "e42466fdbda88bb39061cc8621cc29795164089f", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/e42466fdbda88bb39061cc8621cc29795164089f"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/507af82371191e0aa4a278619ff85b6325bec80a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/507af82371191e0aa4a278619ff85b6325bec80a", "html_url": "https://github.com/airbnb/synapse/commit/507af82371191e0aa4a278619ff85b6325bec80a", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/507af82371191e0aa4a278619ff85b6325bec80a/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bcd8bcd48a8cb9b4349e3595de642b0e4882bf84", "url": "https://api.github.com/repos/airbnb/synapse/commits/bcd8bcd48a8cb9b4349e3595de642b0e4882bf84", "html_url": "https://github.com/airbnb/synapse/commit/bcd8bcd48a8cb9b4349e3595de642b0e4882bf84"}]}, {"sha": "bcd8bcd48a8cb9b4349e3595de642b0e4882bf84", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2015-03-16T20:52:15Z"}, "committer": {"name": "Joseph Lynch", "email": "jlynch@yelp.com", "date": "2015-07-22T00:16:15Z"}, "message": "Explicitly deduplicate registrations", "tree": {"sha": "d01396138c2cfa3543e0e35fd0e214660a966bc2", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/d01396138c2cfa3543e0e35fd0e214660a966bc2"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/bcd8bcd48a8cb9b4349e3595de642b0e4882bf84", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/bcd8bcd48a8cb9b4349e3595de642b0e4882bf84", "html_url": "https://github.com/airbnb/synapse/commit/bcd8bcd48a8cb9b4349e3595de642b0e4882bf84", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/bcd8bcd48a8cb9b4349e3595de642b0e4882bf84/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "499c54d3da2df60b6222d7c2075bff794ebf0efd", "url": "https://api.github.com/repos/airbnb/synapse/commits/499c54d3da2df60b6222d7c2075bff794ebf0efd", "html_url": "https://github.com/airbnb/synapse/commit/499c54d3da2df60b6222d7c2075bff794ebf0efd"}]}, {"sha": "499c54d3da2df60b6222d7c2075bff794ebf0efd", "commit": {"author": {"name": "Joseph Lynch", "email": "joe.e.lynch@gmail.com", "date": "2015-02-27T22:28:43Z"}, "committer": {"name": "Joseph Lynch", "email": "jlynch@yelp.com", "date": "2015-07-22T00:16:15Z"}, "message": "Allow registrations to be manifested on the file system\n\nIf the configuration specifies a file_output key, synapse will manifest\nand update registrations on the filesystem in an atomic way.\nThis is useful for applications that do not wish to communicate with\nservice backends via haproxy", "tree": {"sha": "174bc74d57f9d1249287a7d307e1f1a2b95a890a", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/174bc74d57f9d1249287a7d307e1f1a2b95a890a"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/499c54d3da2df60b6222d7c2075bff794ebf0efd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/499c54d3da2df60b6222d7c2075bff794ebf0efd", "html_url": "https://github.com/airbnb/synapse/commit/499c54d3da2df60b6222d7c2075bff794ebf0efd", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/499c54d3da2df60b6222d7c2075bff794ebf0efd/comments", "author": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7d512887421310d4f2cf9eb7bbc5ac1a71329860", "url": "https://api.github.com/repos/airbnb/synapse/commits/7d512887421310d4f2cf9eb7bbc5ac1a71329860", "html_url": "https://github.com/airbnb/synapse/commit/7d512887421310d4f2cf9eb7bbc5ac1a71329860"}]}, {"sha": "7d512887421310d4f2cf9eb7bbc5ac1a71329860", "commit": {"author": {"name": "John Billings", "email": "billings@yelp.com", "date": "2014-09-27T00:32:22Z"}, "committer": {"name": "Joseph Lynch", "email": "jlynch@yelp.com", "date": "2015-07-22T00:16:15Z"}, "message": "Add 'use_previous_backends' option.\n\n* This option defaults to true:  if there are no default servers and a watcher\n  reports no backends, then use the previous backends that we already know\n  about.\n* Factor out code that updates '@backends' into the watcher base class.", "tree": {"sha": "0eb1690b757a88ae12ecf2bcf8f4bed6b47f802e", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/0eb1690b757a88ae12ecf2bcf8f4bed6b47f802e"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/7d512887421310d4f2cf9eb7bbc5ac1a71329860", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/7d512887421310d4f2cf9eb7bbc5ac1a71329860", "html_url": "https://github.com/airbnb/synapse/commit/7d512887421310d4f2cf9eb7bbc5ac1a71329860", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/7d512887421310d4f2cf9eb7bbc5ac1a71329860/comments", "author": {"login": "jnb", "id": 514311, "avatar_url": "https://avatars2.githubusercontent.com/u/514311?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnb", "html_url": "https://github.com/jnb", "followers_url": "https://api.github.com/users/jnb/followers", "following_url": "https://api.github.com/users/jnb/following{/other_user}", "gists_url": "https://api.github.com/users/jnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnb/subscriptions", "organizations_url": "https://api.github.com/users/jnb/orgs", "repos_url": "https://api.github.com/users/jnb/repos", "events_url": "https://api.github.com/users/jnb/events{/privacy}", "received_events_url": "https://api.github.com/users/jnb/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "142b2576abef136c7140eaa2bf2094f4a4641967", "url": "https://api.github.com/repos/airbnb/synapse/commits/142b2576abef136c7140eaa2bf2094f4a4641967", "html_url": "https://github.com/airbnb/synapse/commit/142b2576abef136c7140eaa2bf2094f4a4641967"}]}, {"sha": "142b2576abef136c7140eaa2bf2094f4a4641967", "commit": {"author": {"name": "Ricky Pai", "email": "rickyp999@gmail.com", "date": "2015-07-21T23:45:28Z"}, "committer": {"name": "Ricky Pai", "email": "rickyp999@gmail.com", "date": "2015-07-21T23:45:28Z"}, "message": "Merge pull request #129 from airbnb/rpai/test_on_rubies\n\nTest synapse on multiple versions of Ruby", "tree": {"sha": "fe936c49afb19eeae1f17c09786ffd1fd657b09f", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/fe936c49afb19eeae1f17c09786ffd1fd657b09f"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/142b2576abef136c7140eaa2bf2094f4a4641967", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/142b2576abef136c7140eaa2bf2094f4a4641967", "html_url": "https://github.com/airbnb/synapse/commit/142b2576abef136c7140eaa2bf2094f4a4641967", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/142b2576abef136c7140eaa2bf2094f4a4641967/comments", "author": {"login": "rickypai", "id": 1469579, "avatar_url": "https://avatars2.githubusercontent.com/u/1469579?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rickypai", "html_url": "https://github.com/rickypai", "followers_url": "https://api.github.com/users/rickypai/followers", "following_url": "https://api.github.com/users/rickypai/following{/other_user}", "gists_url": "https://api.github.com/users/rickypai/gists{/gist_id}", "starred_url": "https://api.github.com/users/rickypai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rickypai/subscriptions", "organizations_url": "https://api.github.com/users/rickypai/orgs", "repos_url": "https://api.github.com/users/rickypai/repos", "events_url": "https://api.github.com/users/rickypai/events{/privacy}", "received_events_url": "https://api.github.com/users/rickypai/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rickypai", "id": 1469579, "avatar_url": "https://avatars2.githubusercontent.com/u/1469579?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rickypai", "html_url": "https://github.com/rickypai", "followers_url": "https://api.github.com/users/rickypai/followers", "following_url": "https://api.github.com/users/rickypai/following{/other_user}", "gists_url": "https://api.github.com/users/rickypai/gists{/gist_id}", "starred_url": "https://api.github.com/users/rickypai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rickypai/subscriptions", "organizations_url": "https://api.github.com/users/rickypai/orgs", "repos_url": "https://api.github.com/users/rickypai/repos", "events_url": "https://api.github.com/users/rickypai/events{/privacy}", "received_events_url": "https://api.github.com/users/rickypai/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "40aa25759ce264a941d24317d93d85e0d78a76e1", "url": "https://api.github.com/repos/airbnb/synapse/commits/40aa25759ce264a941d24317d93d85e0d78a76e1", "html_url": "https://github.com/airbnb/synapse/commit/40aa25759ce264a941d24317d93d85e0d78a76e1"}, {"sha": "a99f1e3466177fc629d77fa7db40561348785801", "url": "https://api.github.com/repos/airbnb/synapse/commits/a99f1e3466177fc629d77fa7db40561348785801", "html_url": "https://github.com/airbnb/synapse/commit/a99f1e3466177fc629d77fa7db40561348785801"}]}, {"sha": "a99f1e3466177fc629d77fa7db40561348785801", "commit": {"author": {"name": "Ricky Pai", "email": "ricky.pai@airbnb.com", "date": "2015-07-21T21:42:47Z"}, "committer": {"name": "Ricky Pai", "email": "ricky.pai@airbnb.com", "date": "2015-07-21T21:42:47Z"}, "message": "test synapse on 2.0.0, 2.1.6, 2.2.2 also", "tree": {"sha": "fe936c49afb19eeae1f17c09786ffd1fd657b09f", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/fe936c49afb19eeae1f17c09786ffd1fd657b09f"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/a99f1e3466177fc629d77fa7db40561348785801", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/a99f1e3466177fc629d77fa7db40561348785801", "html_url": "https://github.com/airbnb/synapse/commit/a99f1e3466177fc629d77fa7db40561348785801", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/a99f1e3466177fc629d77fa7db40561348785801/comments", "author": {"login": "rickypai", "id": 1469579, "avatar_url": "https://avatars2.githubusercontent.com/u/1469579?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rickypai", "html_url": "https://github.com/rickypai", "followers_url": "https://api.github.com/users/rickypai/followers", "following_url": "https://api.github.com/users/rickypai/following{/other_user}", "gists_url": "https://api.github.com/users/rickypai/gists{/gist_id}", "starred_url": "https://api.github.com/users/rickypai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rickypai/subscriptions", "organizations_url": "https://api.github.com/users/rickypai/orgs", "repos_url": "https://api.github.com/users/rickypai/repos", "events_url": "https://api.github.com/users/rickypai/events{/privacy}", "received_events_url": "https://api.github.com/users/rickypai/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rickypai", "id": 1469579, "avatar_url": "https://avatars2.githubusercontent.com/u/1469579?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rickypai", "html_url": "https://github.com/rickypai", "followers_url": "https://api.github.com/users/rickypai/followers", "following_url": "https://api.github.com/users/rickypai/following{/other_user}", "gists_url": "https://api.github.com/users/rickypai/gists{/gist_id}", "starred_url": "https://api.github.com/users/rickypai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rickypai/subscriptions", "organizations_url": "https://api.github.com/users/rickypai/orgs", "repos_url": "https://api.github.com/users/rickypai/repos", "events_url": "https://api.github.com/users/rickypai/events{/privacy}", "received_events_url": "https://api.github.com/users/rickypai/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2dbbe357daa9cbbb46efd8778d85a277bbc06ba9", "url": "https://api.github.com/repos/airbnb/synapse/commits/2dbbe357daa9cbbb46efd8778d85a277bbc06ba9", "html_url": "https://github.com/airbnb/synapse/commit/2dbbe357daa9cbbb46efd8778d85a277bbc06ba9"}]}, {"sha": "2dbbe357daa9cbbb46efd8778d85a277bbc06ba9", "commit": {"author": {"name": "Ricky Pai", "email": "ricky.pai@airbnb.com", "date": "2015-07-21T21:41:59Z"}, "committer": {"name": "Ricky Pai", "email": "ricky.pai@airbnb.com", "date": "2015-07-21T21:41:59Z"}, "message": "git ignore .ruby-version", "tree": {"sha": "f98ccfb88c64c4ee936ca6aaf75543b6968ab0e9", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/f98ccfb88c64c4ee936ca6aaf75543b6968ab0e9"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/2dbbe357daa9cbbb46efd8778d85a277bbc06ba9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/2dbbe357daa9cbbb46efd8778d85a277bbc06ba9", "html_url": "https://github.com/airbnb/synapse/commit/2dbbe357daa9cbbb46efd8778d85a277bbc06ba9", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/2dbbe357daa9cbbb46efd8778d85a277bbc06ba9/comments", "author": {"login": "rickypai", "id": 1469579, "avatar_url": "https://avatars2.githubusercontent.com/u/1469579?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rickypai", "html_url": "https://github.com/rickypai", "followers_url": "https://api.github.com/users/rickypai/followers", "following_url": "https://api.github.com/users/rickypai/following{/other_user}", "gists_url": "https://api.github.com/users/rickypai/gists{/gist_id}", "starred_url": "https://api.github.com/users/rickypai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rickypai/subscriptions", "organizations_url": "https://api.github.com/users/rickypai/orgs", "repos_url": "https://api.github.com/users/rickypai/repos", "events_url": "https://api.github.com/users/rickypai/events{/privacy}", "received_events_url": "https://api.github.com/users/rickypai/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rickypai", "id": 1469579, "avatar_url": "https://avatars2.githubusercontent.com/u/1469579?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rickypai", "html_url": "https://github.com/rickypai", "followers_url": "https://api.github.com/users/rickypai/followers", "following_url": "https://api.github.com/users/rickypai/following{/other_user}", "gists_url": "https://api.github.com/users/rickypai/gists{/gist_id}", "starred_url": "https://api.github.com/users/rickypai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rickypai/subscriptions", "organizations_url": "https://api.github.com/users/rickypai/orgs", "repos_url": "https://api.github.com/users/rickypai/repos", "events_url": "https://api.github.com/users/rickypai/events{/privacy}", "received_events_url": "https://api.github.com/users/rickypai/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6baf737494c3d2f6f9f33a67e16a0ac47b9c797e", "url": "https://api.github.com/repos/airbnb/synapse/commits/6baf737494c3d2f6f9f33a67e16a0ac47b9c797e", "html_url": "https://github.com/airbnb/synapse/commit/6baf737494c3d2f6f9f33a67e16a0ac47b9c797e"}]}, {"sha": "6baf737494c3d2f6f9f33a67e16a0ac47b9c797e", "commit": {"author": {"name": "Ricky Pai", "email": "ricky.pai@airbnb.com", "date": "2015-07-21T21:38:16Z"}, "committer": {"name": "Ricky Pai", "email": "ricky.pai@airbnb.com", "date": "2015-07-21T21:38:16Z"}, "message": "update zookeeper dependency to support newer rubies", "tree": {"sha": "e3cd0cb6c90561b1a821f68310fd00430f28177b", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/e3cd0cb6c90561b1a821f68310fd00430f28177b"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/6baf737494c3d2f6f9f33a67e16a0ac47b9c797e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/6baf737494c3d2f6f9f33a67e16a0ac47b9c797e", "html_url": "https://github.com/airbnb/synapse/commit/6baf737494c3d2f6f9f33a67e16a0ac47b9c797e", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/6baf737494c3d2f6f9f33a67e16a0ac47b9c797e/comments", "author": {"login": "rickypai", "id": 1469579, "avatar_url": "https://avatars2.githubusercontent.com/u/1469579?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rickypai", "html_url": "https://github.com/rickypai", "followers_url": "https://api.github.com/users/rickypai/followers", "following_url": "https://api.github.com/users/rickypai/following{/other_user}", "gists_url": "https://api.github.com/users/rickypai/gists{/gist_id}", "starred_url": "https://api.github.com/users/rickypai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rickypai/subscriptions", "organizations_url": "https://api.github.com/users/rickypai/orgs", "repos_url": "https://api.github.com/users/rickypai/repos", "events_url": "https://api.github.com/users/rickypai/events{/privacy}", "received_events_url": "https://api.github.com/users/rickypai/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rickypai", "id": 1469579, "avatar_url": "https://avatars2.githubusercontent.com/u/1469579?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rickypai", "html_url": "https://github.com/rickypai", "followers_url": "https://api.github.com/users/rickypai/followers", "following_url": "https://api.github.com/users/rickypai/following{/other_user}", "gists_url": "https://api.github.com/users/rickypai/gists{/gist_id}", "starred_url": "https://api.github.com/users/rickypai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rickypai/subscriptions", "organizations_url": "https://api.github.com/users/rickypai/orgs", "repos_url": "https://api.github.com/users/rickypai/repos", "events_url": "https://api.github.com/users/rickypai/events{/privacy}", "received_events_url": "https://api.github.com/users/rickypai/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "40aa25759ce264a941d24317d93d85e0d78a76e1", "url": "https://api.github.com/repos/airbnb/synapse/commits/40aa25759ce264a941d24317d93d85e0d78a76e1", "html_url": "https://github.com/airbnb/synapse/commit/40aa25759ce264a941d24317d93d85e0d78a76e1"}]}, {"sha": "acde0d312fb8d58f62b1dbf59e200032404af762", "commit": {"author": {"name": "Tom Dooner", "email": "tom.dooner@brigade.com", "date": "2015-07-13T19:48:23Z"}, "committer": {"name": "Tom Dooner", "email": "tom.dooner@brigade.com", "date": "2015-07-13T19:48:23Z"}, "message": "Attempt marathon connection during watch loop\n\nThis increases the resiliency in the case that marathon cannot be\nimmediately found. A connection attempt will be made at the start of\neach watch interval.", "tree": {"sha": "dee622df1074f6ec24f5eb8302ed818aec1b18bf", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/dee622df1074f6ec24f5eb8302ed818aec1b18bf"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/acde0d312fb8d58f62b1dbf59e200032404af762", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/acde0d312fb8d58f62b1dbf59e200032404af762", "html_url": "https://github.com/airbnb/synapse/commit/acde0d312fb8d58f62b1dbf59e200032404af762", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/acde0d312fb8d58f62b1dbf59e200032404af762/comments", "author": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8e5b63a913150088544e0f55e4871698e680b5ba", "url": "https://api.github.com/repos/airbnb/synapse/commits/8e5b63a913150088544e0f55e4871698e680b5ba", "html_url": "https://github.com/airbnb/synapse/commit/8e5b63a913150088544e0f55e4871698e680b5ba"}]}, {"sha": "40aa25759ce264a941d24317d93d85e0d78a76e1", "commit": {"author": {"name": "Igor Serebryany", "email": "igor47@moomers.org", "date": "2015-06-09T22:26:08Z"}, "committer": {"name": "Igor Serebryany", "email": "igor47@moomers.org", "date": "2015-06-09T22:26:08Z"}, "message": "Merge pull request #123 from eik3/patch-1\n\ntypo", "tree": {"sha": "65c1eeb123e5e1d26d683e76d1216dfc93d4ceca", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/65c1eeb123e5e1d26d683e76d1216dfc93d4ceca"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/40aa25759ce264a941d24317d93d85e0d78a76e1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/40aa25759ce264a941d24317d93d85e0d78a76e1", "html_url": "https://github.com/airbnb/synapse/commit/40aa25759ce264a941d24317d93d85e0d78a76e1", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/40aa25759ce264a941d24317d93d85e0d78a76e1/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c8ab37d4df9880423fd3294429306fa365d35ba7", "url": "https://api.github.com/repos/airbnb/synapse/commits/c8ab37d4df9880423fd3294429306fa365d35ba7", "html_url": "https://github.com/airbnb/synapse/commit/c8ab37d4df9880423fd3294429306fa365d35ba7"}, {"sha": "64c2bd802bb77a31fad8e06aa9150dff7c93a863", "url": "https://api.github.com/repos/airbnb/synapse/commits/64c2bd802bb77a31fad8e06aa9150dff7c93a863", "html_url": "https://github.com/airbnb/synapse/commit/64c2bd802bb77a31fad8e06aa9150dff7c93a863"}]}, {"sha": "64c2bd802bb77a31fad8e06aa9150dff7c93a863", "commit": {"author": {"name": "Eike Herzbach", "email": "eike@herzbach.net", "date": "2015-06-09T18:38:35Z"}, "committer": {"name": "Eike Herzbach", "email": "eike@herzbach.net", "date": "2015-06-09T18:38:35Z"}, "message": "typo", "tree": {"sha": "65c1eeb123e5e1d26d683e76d1216dfc93d4ceca", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/65c1eeb123e5e1d26d683e76d1216dfc93d4ceca"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/64c2bd802bb77a31fad8e06aa9150dff7c93a863", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/64c2bd802bb77a31fad8e06aa9150dff7c93a863", "html_url": "https://github.com/airbnb/synapse/commit/64c2bd802bb77a31fad8e06aa9150dff7c93a863", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/64c2bd802bb77a31fad8e06aa9150dff7c93a863/comments", "author": {"login": "eik3", "id": 17581, "avatar_url": "https://avatars2.githubusercontent.com/u/17581?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eik3", "html_url": "https://github.com/eik3", "followers_url": "https://api.github.com/users/eik3/followers", "following_url": "https://api.github.com/users/eik3/following{/other_user}", "gists_url": "https://api.github.com/users/eik3/gists{/gist_id}", "starred_url": "https://api.github.com/users/eik3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eik3/subscriptions", "organizations_url": "https://api.github.com/users/eik3/orgs", "repos_url": "https://api.github.com/users/eik3/repos", "events_url": "https://api.github.com/users/eik3/events{/privacy}", "received_events_url": "https://api.github.com/users/eik3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "eik3", "id": 17581, "avatar_url": "https://avatars2.githubusercontent.com/u/17581?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eik3", "html_url": "https://github.com/eik3", "followers_url": "https://api.github.com/users/eik3/followers", "following_url": "https://api.github.com/users/eik3/following{/other_user}", "gists_url": "https://api.github.com/users/eik3/gists{/gist_id}", "starred_url": "https://api.github.com/users/eik3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eik3/subscriptions", "organizations_url": "https://api.github.com/users/eik3/orgs", "repos_url": "https://api.github.com/users/eik3/repos", "events_url": "https://api.github.com/users/eik3/events{/privacy}", "received_events_url": "https://api.github.com/users/eik3/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c8ab37d4df9880423fd3294429306fa365d35ba7", "url": "https://api.github.com/repos/airbnb/synapse/commits/c8ab37d4df9880423fd3294429306fa365d35ba7", "html_url": "https://github.com/airbnb/synapse/commit/c8ab37d4df9880423fd3294429306fa365d35ba7"}]}, {"sha": "c8ab37d4df9880423fd3294429306fa365d35ba7", "commit": {"author": {"name": "Igor Serebryany", "email": "igor47@moomers.org", "date": "2015-02-25T20:34:51Z"}, "committer": {"name": "Igor Serebryany", "email": "igor47@moomers.org", "date": "2015-02-25T20:34:51Z"}, "message": "Merge pull request #113 from airbnb/latest_rspec\n\nLatest rspec", "tree": {"sha": "978f7505714afd99a412b6602827c01feb3cea4f", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/978f7505714afd99a412b6602827c01feb3cea4f"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/c8ab37d4df9880423fd3294429306fa365d35ba7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/c8ab37d4df9880423fd3294429306fa365d35ba7", "html_url": "https://github.com/airbnb/synapse/commit/c8ab37d4df9880423fd3294429306fa365d35ba7", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/c8ab37d4df9880423fd3294429306fa365d35ba7/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e012cd3a518098545a0ba73958d3c17bd5ab40d9", "url": "https://api.github.com/repos/airbnb/synapse/commits/e012cd3a518098545a0ba73958d3c17bd5ab40d9", "html_url": "https://github.com/airbnb/synapse/commit/e012cd3a518098545a0ba73958d3c17bd5ab40d9"}, {"sha": "7e781d7c8b1994e9aa87e91f509d28620df44b5e", "url": "https://api.github.com/repos/airbnb/synapse/commits/7e781d7c8b1994e9aa87e91f509d28620df44b5e", "html_url": "https://github.com/airbnb/synapse/commit/7e781d7c8b1994e9aa87e91f509d28620df44b5e"}]}, {"sha": "704c9c3519f14003fab9074fb1c5ab03223db723", "commit": {"author": {"name": "Larry Weya", "email": "larryweya@gmail.com", "date": "2015-02-23T15:04:48Z"}, "committer": {"name": "Larry Weya", "email": "larryweya@gmail.com", "date": "2015-02-23T15:04:48Z"}, "message": "synapse expects arrays under shared_frontend, hosts and backend", "tree": {"sha": "29786d371332a01afecf0c575ef8aa63c7e0d4d9", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/29786d371332a01afecf0c575ef8aa63c7e0d4d9"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/704c9c3519f14003fab9074fb1c5ab03223db723", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/704c9c3519f14003fab9074fb1c5ab03223db723", "html_url": "https://github.com/airbnb/synapse/commit/704c9c3519f14003fab9074fb1c5ab03223db723", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/704c9c3519f14003fab9074fb1c5ab03223db723/comments", "author": {"login": "larryweya", "id": 127282, "avatar_url": "https://avatars2.githubusercontent.com/u/127282?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larryweya", "html_url": "https://github.com/larryweya", "followers_url": "https://api.github.com/users/larryweya/followers", "following_url": "https://api.github.com/users/larryweya/following{/other_user}", "gists_url": "https://api.github.com/users/larryweya/gists{/gist_id}", "starred_url": "https://api.github.com/users/larryweya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larryweya/subscriptions", "organizations_url": "https://api.github.com/users/larryweya/orgs", "repos_url": "https://api.github.com/users/larryweya/repos", "events_url": "https://api.github.com/users/larryweya/events{/privacy}", "received_events_url": "https://api.github.com/users/larryweya/received_events", "type": "User", "site_admin": false}, "committer": {"login": "larryweya", "id": 127282, "avatar_url": "https://avatars2.githubusercontent.com/u/127282?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larryweya", "html_url": "https://github.com/larryweya", "followers_url": "https://api.github.com/users/larryweya/followers", "following_url": "https://api.github.com/users/larryweya/following{/other_user}", "gists_url": "https://api.github.com/users/larryweya/gists{/gist_id}", "starred_url": "https://api.github.com/users/larryweya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larryweya/subscriptions", "organizations_url": "https://api.github.com/users/larryweya/orgs", "repos_url": "https://api.github.com/users/larryweya/repos", "events_url": "https://api.github.com/users/larryweya/events{/privacy}", "received_events_url": "https://api.github.com/users/larryweya/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e012cd3a518098545a0ba73958d3c17bd5ab40d9", "url": "https://api.github.com/repos/airbnb/synapse/commits/e012cd3a518098545a0ba73958d3c17bd5ab40d9", "html_url": "https://github.com/airbnb/synapse/commit/e012cd3a518098545a0ba73958d3c17bd5ab40d9"}]}, {"sha": "7e781d7c8b1994e9aa87e91f509d28620df44b5e", "commit": {"author": {"name": "Igor Serebryany", "email": "igor.serebryany@airbedandbreakfast.com", "date": "2015-02-19T20:12:57Z"}, "committer": {"name": "Igor Serebryany", "email": "igor.serebryany@airbedandbreakfast.com", "date": "2015-02-19T20:12:57Z"}, "message": "verify doubles", "tree": {"sha": "978f7505714afd99a412b6602827c01feb3cea4f", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/978f7505714afd99a412b6602827c01feb3cea4f"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/7e781d7c8b1994e9aa87e91f509d28620df44b5e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/7e781d7c8b1994e9aa87e91f509d28620df44b5e", "html_url": "https://github.com/airbnb/synapse/commit/7e781d7c8b1994e9aa87e91f509d28620df44b5e", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/7e781d7c8b1994e9aa87e91f509d28620df44b5e/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cd7db64cc690b50a76b7cb6f0cb97f52226cca40", "url": "https://api.github.com/repos/airbnb/synapse/commits/cd7db64cc690b50a76b7cb6f0cb97f52226cca40", "html_url": "https://github.com/airbnb/synapse/commit/cd7db64cc690b50a76b7cb6f0cb97f52226cca40"}]}, {"sha": "cd7db64cc690b50a76b7cb6f0cb97f52226cca40", "commit": {"author": {"name": "Igor Serebryany", "email": "igor.serebryany@airbedandbreakfast.com", "date": "2015-02-19T19:58:13Z"}, "committer": {"name": "Igor Serebryany", "email": "igor.serebryany@airbedandbreakfast.com", "date": "2015-02-19T19:58:13Z"}, "message": "run transpec to convert specs to new format", "tree": {"sha": "2fe5ab50ff6debe728342d042b3b4e30f19866f0", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/2fe5ab50ff6debe728342d042b3b4e30f19866f0"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/cd7db64cc690b50a76b7cb6f0cb97f52226cca40", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/cd7db64cc690b50a76b7cb6f0cb97f52226cca40", "html_url": "https://github.com/airbnb/synapse/commit/cd7db64cc690b50a76b7cb6f0cb97f52226cca40", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/cd7db64cc690b50a76b7cb6f0cb97f52226cca40/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "366ff2be0ba103af701e67a924b17b9bbadcc8a2", "url": "https://api.github.com/repos/airbnb/synapse/commits/366ff2be0ba103af701e67a924b17b9bbadcc8a2", "html_url": "https://github.com/airbnb/synapse/commit/366ff2be0ba103af701e67a924b17b9bbadcc8a2"}]}, {"sha": "366ff2be0ba103af701e67a924b17b9bbadcc8a2", "commit": {"author": {"name": "Igor Serebryany", "email": "igor.serebryany@airbedandbreakfast.com", "date": "2015-02-19T19:56:50Z"}, "committer": {"name": "Igor Serebryany", "email": "igor.serebryany@airbedandbreakfast.com", "date": "2015-02-19T19:56:50Z"}, "message": "fix some broken specs and deprecation warnings", "tree": {"sha": "2b334bcaaf26e49027e7a4d98989edbbd10e877b", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/2b334bcaaf26e49027e7a4d98989edbbd10e877b"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/366ff2be0ba103af701e67a924b17b9bbadcc8a2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/366ff2be0ba103af701e67a924b17b9bbadcc8a2", "html_url": "https://github.com/airbnb/synapse/commit/366ff2be0ba103af701e67a924b17b9bbadcc8a2", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/366ff2be0ba103af701e67a924b17b9bbadcc8a2/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d8a8d6a909bc01e63462e5a00c40252c0f45f0cd", "url": "https://api.github.com/repos/airbnb/synapse/commits/d8a8d6a909bc01e63462e5a00c40252c0f45f0cd", "html_url": "https://github.com/airbnb/synapse/commit/d8a8d6a909bc01e63462e5a00c40252c0f45f0cd"}]}, {"sha": "d8a8d6a909bc01e63462e5a00c40252c0f45f0cd", "commit": {"author": {"name": "Igor Serebryany", "email": "igor.serebryany@airbedandbreakfast.com", "date": "2015-02-19T19:46:01Z"}, "committer": {"name": "Igor Serebryany", "email": "igor.serebryany@airbedandbreakfast.com", "date": "2015-02-19T19:46:01Z"}, "message": "bump rspec version", "tree": {"sha": "2736f3567bd0fb102707d2ae7661a03581284f79", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/2736f3567bd0fb102707d2ae7661a03581284f79"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/d8a8d6a909bc01e63462e5a00c40252c0f45f0cd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/d8a8d6a909bc01e63462e5a00c40252c0f45f0cd", "html_url": "https://github.com/airbnb/synapse/commit/d8a8d6a909bc01e63462e5a00c40252c0f45f0cd", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/d8a8d6a909bc01e63462e5a00c40252c0f45f0cd/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e012cd3a518098545a0ba73958d3c17bd5ab40d9", "url": "https://api.github.com/repos/airbnb/synapse/commits/e012cd3a518098545a0ba73958d3c17bd5ab40d9", "html_url": "https://github.com/airbnb/synapse/commit/e012cd3a518098545a0ba73958d3c17bd5ab40d9"}]}, {"sha": "8e5b63a913150088544e0f55e4871698e680b5ba", "commit": {"author": {"name": "Tom Dooner", "email": "tom.dooner@brigade.com", "date": "2014-12-13T01:32:59Z"}, "committer": {"name": "Tom Dooner", "email": "tom.dooner@brigade.com", "date": "2014-12-13T01:32:59Z"}, "message": "Sort tasks by name\n\nThey can't be sorted by a Hash, since that is not something Ruby can\ndo.", "tree": {"sha": "7e3d76dfff5fdb64dda78da03540e5f4361f8b26", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/7e3d76dfff5fdb64dda78da03540e5f4361f8b26"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/8e5b63a913150088544e0f55e4871698e680b5ba", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/8e5b63a913150088544e0f55e4871698e680b5ba", "html_url": "https://github.com/airbnb/synapse/commit/8e5b63a913150088544e0f55e4871698e680b5ba", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/8e5b63a913150088544e0f55e4871698e680b5ba/comments", "author": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4358449f572fabb47a29773536b9021f66b66850", "url": "https://api.github.com/repos/airbnb/synapse/commits/4358449f572fabb47a29773536b9021f66b66850", "html_url": "https://github.com/airbnb/synapse/commit/4358449f572fabb47a29773536b9021f66b66850"}]}, {"sha": "4358449f572fabb47a29773536b9021f66b66850", "commit": {"author": {"name": "Tom Dooner", "email": "tom.dooner@brigade.com", "date": "2014-11-27T07:14:39Z"}, "committer": {"name": "Tom Dooner", "email": "tom.dooner@brigade.com", "date": "2014-11-27T07:20:37Z"}, "message": "Add spec for marathon watcher\n\nHopefully these specs will catch some of the most important behavioral\nchanges. Rather than individually stubbing a bunch of Net::HTTP stuff, I\npulled in webmock as a development dependency.\n\nI also found it easiest to add a silly method\nSynapse::MarathonWatcher#only_run_once? which is hard-coded to false but\nstubbed to return true in the test suite.", "tree": {"sha": "f6e34a60a682452adf6a88ca9401703be251f752", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/f6e34a60a682452adf6a88ca9401703be251f752"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/4358449f572fabb47a29773536b9021f66b66850", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/4358449f572fabb47a29773536b9021f66b66850", "html_url": "https://github.com/airbnb/synapse/commit/4358449f572fabb47a29773536b9021f66b66850", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/4358449f572fabb47a29773536b9021f66b66850/comments", "author": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5f7268638e962ae946092116589e81db67d93381", "url": "https://api.github.com/repos/airbnb/synapse/commits/5f7268638e962ae946092116589e81db67d93381", "html_url": "https://github.com/airbnb/synapse/commit/5f7268638e962ae946092116589e81db67d93381"}]}, {"sha": "5f7268638e962ae946092116589e81db67d93381", "commit": {"author": {"name": "Tom Dooner", "email": "tom.dooner@brigade.com", "date": "2014-11-27T05:37:41Z"}, "committer": {"name": "Tom Dooner", "email": "tom.dooner@brigade.com", "date": "2014-11-27T05:37:55Z"}, "message": "Always request application/json from marathon\n\nSometimes it does JSON by default, sometimes not.", "tree": {"sha": "2f36d6c402bdf418925096ea663f989927b8a4b4", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/2f36d6c402bdf418925096ea663f989927b8a4b4"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/5f7268638e962ae946092116589e81db67d93381", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/5f7268638e962ae946092116589e81db67d93381", "html_url": "https://github.com/airbnb/synapse/commit/5f7268638e962ae946092116589e81db67d93381", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/5f7268638e962ae946092116589e81db67d93381/comments", "author": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "67b3168813365a2e003aee3baf6e7f381c1b2034", "url": "https://api.github.com/repos/airbnb/synapse/commits/67b3168813365a2e003aee3baf6e7f381c1b2034", "html_url": "https://github.com/airbnb/synapse/commit/67b3168813365a2e003aee3baf6e7f381c1b2034"}]}, {"sha": "67b3168813365a2e003aee3baf6e7f381c1b2034", "commit": {"author": {"name": "Tom Dooner", "email": "tom.dooner@brigade.com", "date": "2014-11-27T00:44:10Z"}, "committer": {"name": "Tom Dooner", "email": "tom.dooner@brigade.com", "date": "2014-11-27T00:44:10Z"}, "message": "Filter out Staged tasks\n\nWe don't want to load-balance across tasks that aren't started.", "tree": {"sha": "fab76ca6f7320a570bca2ba451aad3177ffd014b", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/fab76ca6f7320a570bca2ba451aad3177ffd014b"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/67b3168813365a2e003aee3baf6e7f381c1b2034", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/67b3168813365a2e003aee3baf6e7f381c1b2034", "html_url": "https://github.com/airbnb/synapse/commit/67b3168813365a2e003aee3baf6e7f381c1b2034", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/67b3168813365a2e003aee3baf6e7f381c1b2034/comments", "author": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "963cca9909cb885ebba883cc63c26c6d5207b580", "url": "https://api.github.com/repos/airbnb/synapse/commits/963cca9909cb885ebba883cc63c26c6d5207b580", "html_url": "https://github.com/airbnb/synapse/commit/963cca9909cb885ebba883cc63c26c6d5207b580"}]}, {"sha": "963cca9909cb885ebba883cc63c26c6d5207b580", "commit": {"author": {"name": "Tom Dooner", "email": "tom.dooner@brigade.com", "date": "2014-11-27T00:43:44Z"}, "committer": {"name": "Tom Dooner", "email": "tom.dooner@brigade.com", "date": "2014-11-27T00:43:44Z"}, "message": "Set a timeout of 5 seconds on the connection\n\nIn case the URL is wrong, this will not hang startup.", "tree": {"sha": "a4d48b3b1dc0062bc3e05f702282f0b23641365c", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/a4d48b3b1dc0062bc3e05f702282f0b23641365c"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/963cca9909cb885ebba883cc63c26c6d5207b580", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/963cca9909cb885ebba883cc63c26c6d5207b580", "html_url": "https://github.com/airbnb/synapse/commit/963cca9909cb885ebba883cc63c26c6d5207b580", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/963cca9909cb885ebba883cc63c26c6d5207b580/comments", "author": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ee0db4789c19cf4f25412910658e51bf83b80794", "url": "https://api.github.com/repos/airbnb/synapse/commits/ee0db4789c19cf4f25412910658e51bf83b80794", "html_url": "https://github.com/airbnb/synapse/commit/ee0db4789c19cf4f25412910658e51bf83b80794"}]}, {"sha": "ee0db4789c19cf4f25412910658e51bf83b80794", "commit": {"author": {"name": "Tom Dooner", "email": "tom.dooner@brigade.com", "date": "2014-11-26T23:24:34Z"}, "committer": {"name": "Tom Dooner", "email": "tom.dooner@brigade.com", "date": "2014-11-26T23:24:34Z"}, "message": "Initial stab at Marathon watcher", "tree": {"sha": "411f4e14150c1e3500740ec0bfeba20c4455f9e4", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/411f4e14150c1e3500740ec0bfeba20c4455f9e4"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/ee0db4789c19cf4f25412910658e51bf83b80794", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/ee0db4789c19cf4f25412910658e51bf83b80794", "html_url": "https://github.com/airbnb/synapse/commit/ee0db4789c19cf4f25412910658e51bf83b80794", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/ee0db4789c19cf4f25412910658e51bf83b80794/comments", "author": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e012cd3a518098545a0ba73958d3c17bd5ab40d9", "url": "https://api.github.com/repos/airbnb/synapse/commits/e012cd3a518098545a0ba73958d3c17bd5ab40d9", "html_url": "https://github.com/airbnb/synapse/commit/e012cd3a518098545a0ba73958d3c17bd5ab40d9"}]}, {"sha": "e012cd3a518098545a0ba73958d3c17bd5ab40d9", "commit": {"author": {"name": "Igor Serebryany", "email": "igor47@moomers.org", "date": "2014-10-17T20:20:40Z"}, "committer": {"name": "Igor Serebryany", "email": "igor47@moomers.org", "date": "2014-10-17T20:20:40Z"}, "message": "Merge pull request #90 from bobtfish/fix_tcp_mode\n\nFix to not include a cookie in TCP mode.", "tree": {"sha": "9f288139d70c1c308453b78c85154830e9d90798", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/9f288139d70c1c308453b78c85154830e9d90798"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/e012cd3a518098545a0ba73958d3c17bd5ab40d9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/e012cd3a518098545a0ba73958d3c17bd5ab40d9", "html_url": "https://github.com/airbnb/synapse/commit/e012cd3a518098545a0ba73958d3c17bd5ab40d9", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/e012cd3a518098545a0ba73958d3c17bd5ab40d9/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a1cfd34916388ba1baa7d35e5fd40bde15aa20f7", "url": "https://api.github.com/repos/airbnb/synapse/commits/a1cfd34916388ba1baa7d35e5fd40bde15aa20f7", "html_url": "https://github.com/airbnb/synapse/commit/a1cfd34916388ba1baa7d35e5fd40bde15aa20f7"}, {"sha": "4f48b34e0a9d7ed54648b3884bc450d2f0fc79a7", "url": "https://api.github.com/repos/airbnb/synapse/commits/4f48b34e0a9d7ed54648b3884bc450d2f0fc79a7", "html_url": "https://github.com/airbnb/synapse/commit/4f48b34e0a9d7ed54648b3884bc450d2f0fc79a7"}]}, {"sha": "5ef97f0d05d1c860cc38791d6c2780644619a445", "commit": {"author": {"name": "Wes Morgan", "email": "cap10morgan@gmail.com", "date": "2014-09-04T19:13:30Z"}, "committer": {"name": "Wes Morgan", "email": "cap10morgan@gmail.com", "date": "2014-09-04T19:13:30Z"}, "message": "add tests for filtering no-public-port containers", "tree": {"sha": "7641be53b0ec81b541fb9e852f4ebf039be1de8d", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/7641be53b0ec81b541fb9e852f4ebf039be1de8d"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/5ef97f0d05d1c860cc38791d6c2780644619a445", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/5ef97f0d05d1c860cc38791d6c2780644619a445", "html_url": "https://github.com/airbnb/synapse/commit/5ef97f0d05d1c860cc38791d6c2780644619a445", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/5ef97f0d05d1c860cc38791d6c2780644619a445/comments", "author": {"login": "cap10morgan", "id": 59748, "avatar_url": "https://avatars3.githubusercontent.com/u/59748?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cap10morgan", "html_url": "https://github.com/cap10morgan", "followers_url": "https://api.github.com/users/cap10morgan/followers", "following_url": "https://api.github.com/users/cap10morgan/following{/other_user}", "gists_url": "https://api.github.com/users/cap10morgan/gists{/gist_id}", "starred_url": "https://api.github.com/users/cap10morgan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cap10morgan/subscriptions", "organizations_url": "https://api.github.com/users/cap10morgan/orgs", "repos_url": "https://api.github.com/users/cap10morgan/repos", "events_url": "https://api.github.com/users/cap10morgan/events{/privacy}", "received_events_url": "https://api.github.com/users/cap10morgan/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cap10morgan", "id": 59748, "avatar_url": "https://avatars3.githubusercontent.com/u/59748?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cap10morgan", "html_url": "https://github.com/cap10morgan", "followers_url": "https://api.github.com/users/cap10morgan/followers", "following_url": "https://api.github.com/users/cap10morgan/following{/other_user}", "gists_url": "https://api.github.com/users/cap10morgan/gists{/gist_id}", "starred_url": "https://api.github.com/users/cap10morgan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cap10morgan/subscriptions", "organizations_url": "https://api.github.com/users/cap10morgan/orgs", "repos_url": "https://api.github.com/users/cap10morgan/repos", "events_url": "https://api.github.com/users/cap10morgan/events{/privacy}", "received_events_url": "https://api.github.com/users/cap10morgan/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d2397e9c05887d9b45b502464e39fa35a98fe36b", "url": "https://api.github.com/repos/airbnb/synapse/commits/d2397e9c05887d9b45b502464e39fa35a98fe36b", "html_url": "https://github.com/airbnb/synapse/commit/d2397e9c05887d9b45b502464e39fa35a98fe36b"}]}, {"sha": "d2397e9c05887d9b45b502464e39fa35a98fe36b", "commit": {"author": {"name": "Wes Morgan", "email": "cap10morgan@gmail.com", "date": "2014-09-04T19:12:53Z"}, "committer": {"name": "Wes Morgan", "email": "cap10morgan@gmail.com", "date": "2014-09-04T19:12:53Z"}, "message": "filter out containers with no public port", "tree": {"sha": "69c18976e45ac9b2eba9c0d5f6d4efe7f0fcd808", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/69c18976e45ac9b2eba9c0d5f6d4efe7f0fcd808"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/d2397e9c05887d9b45b502464e39fa35a98fe36b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/d2397e9c05887d9b45b502464e39fa35a98fe36b", "html_url": "https://github.com/airbnb/synapse/commit/d2397e9c05887d9b45b502464e39fa35a98fe36b", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/d2397e9c05887d9b45b502464e39fa35a98fe36b/comments", "author": {"login": "cap10morgan", "id": 59748, "avatar_url": "https://avatars3.githubusercontent.com/u/59748?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cap10morgan", "html_url": "https://github.com/cap10morgan", "followers_url": "https://api.github.com/users/cap10morgan/followers", "following_url": "https://api.github.com/users/cap10morgan/following{/other_user}", "gists_url": "https://api.github.com/users/cap10morgan/gists{/gist_id}", "starred_url": "https://api.github.com/users/cap10morgan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cap10morgan/subscriptions", "organizations_url": "https://api.github.com/users/cap10morgan/orgs", "repos_url": "https://api.github.com/users/cap10morgan/repos", "events_url": "https://api.github.com/users/cap10morgan/events{/privacy}", "received_events_url": "https://api.github.com/users/cap10morgan/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cap10morgan", "id": 59748, "avatar_url": "https://avatars3.githubusercontent.com/u/59748?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cap10morgan", "html_url": "https://github.com/cap10morgan", "followers_url": "https://api.github.com/users/cap10morgan/followers", "following_url": "https://api.github.com/users/cap10morgan/following{/other_user}", "gists_url": "https://api.github.com/users/cap10morgan/gists{/gist_id}", "starred_url": "https://api.github.com/users/cap10morgan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cap10morgan/subscriptions", "organizations_url": "https://api.github.com/users/cap10morgan/orgs", "repos_url": "https://api.github.com/users/cap10morgan/repos", "events_url": "https://api.github.com/users/cap10morgan/events{/privacy}", "received_events_url": "https://api.github.com/users/cap10morgan/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a1cfd34916388ba1baa7d35e5fd40bde15aa20f7", "url": "https://api.github.com/repos/airbnb/synapse/commits/a1cfd34916388ba1baa7d35e5fd40bde15aa20f7", "html_url": "https://github.com/airbnb/synapse/commit/a1cfd34916388ba1baa7d35e5fd40bde15aa20f7"}]}, {"sha": "4f48b34e0a9d7ed54648b3884bc450d2f0fc79a7", "commit": {"author": {"name": "Tomas Doran", "email": "tdoran@yelp.com", "date": "2014-09-03T18:32:35Z"}, "committer": {"name": "Tomas Doran", "email": "tdoran@yelp.com", "date": "2014-09-03T18:32:35Z"}, "message": "Fix to not include a cookie in TCP mode.\n\nb7098382 added a cookie always, however this only works in HTTP mode.\nRemove/disable this automatic addition when we're in TCP mode.", "tree": {"sha": "9f288139d70c1c308453b78c85154830e9d90798", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/9f288139d70c1c308453b78c85154830e9d90798"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/4f48b34e0a9d7ed54648b3884bc450d2f0fc79a7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/4f48b34e0a9d7ed54648b3884bc450d2f0fc79a7", "html_url": "https://github.com/airbnb/synapse/commit/4f48b34e0a9d7ed54648b3884bc450d2f0fc79a7", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/4f48b34e0a9d7ed54648b3884bc450d2f0fc79a7/comments", "author": {"login": "bobtfish", "id": 42338, "avatar_url": "https://avatars1.githubusercontent.com/u/42338?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bobtfish", "html_url": "https://github.com/bobtfish", "followers_url": "https://api.github.com/users/bobtfish/followers", "following_url": "https://api.github.com/users/bobtfish/following{/other_user}", "gists_url": "https://api.github.com/users/bobtfish/gists{/gist_id}", "starred_url": "https://api.github.com/users/bobtfish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bobtfish/subscriptions", "organizations_url": "https://api.github.com/users/bobtfish/orgs", "repos_url": "https://api.github.com/users/bobtfish/repos", "events_url": "https://api.github.com/users/bobtfish/events{/privacy}", "received_events_url": "https://api.github.com/users/bobtfish/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bobtfish", "id": 42338, "avatar_url": "https://avatars1.githubusercontent.com/u/42338?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bobtfish", "html_url": "https://github.com/bobtfish", "followers_url": "https://api.github.com/users/bobtfish/followers", "following_url": "https://api.github.com/users/bobtfish/following{/other_user}", "gists_url": "https://api.github.com/users/bobtfish/gists{/gist_id}", "starred_url": "https://api.github.com/users/bobtfish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bobtfish/subscriptions", "organizations_url": "https://api.github.com/users/bobtfish/orgs", "repos_url": "https://api.github.com/users/bobtfish/repos", "events_url": "https://api.github.com/users/bobtfish/events{/privacy}", "received_events_url": "https://api.github.com/users/bobtfish/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a1cfd34916388ba1baa7d35e5fd40bde15aa20f7", "url": "https://api.github.com/repos/airbnb/synapse/commits/a1cfd34916388ba1baa7d35e5fd40bde15aa20f7", "html_url": "https://github.com/airbnb/synapse/commit/a1cfd34916388ba1baa7d35e5fd40bde15aa20f7"}]}, {"sha": "a1cfd34916388ba1baa7d35e5fd40bde15aa20f7", "commit": {"author": {"name": "Igor Serebryany", "email": "igor47@moomers.org", "date": "2014-08-05T18:19:42Z"}, "committer": {"name": "Igor Serebryany", "email": "igor47@moomers.org", "date": "2014-08-05T18:19:42Z"}, "message": "Merge pull request #85 from strava/ls/filter_ec2_instances\n\nConsider only running instances and memoize AWS calls.", "tree": {"sha": "fa210cc47aa32733e07f6f179f227c06295305db", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/fa210cc47aa32733e07f6f179f227c06295305db"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/a1cfd34916388ba1baa7d35e5fd40bde15aa20f7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/a1cfd34916388ba1baa7d35e5fd40bde15aa20f7", "html_url": "https://github.com/airbnb/synapse/commit/a1cfd34916388ba1baa7d35e5fd40bde15aa20f7", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/a1cfd34916388ba1baa7d35e5fd40bde15aa20f7/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3f93b1be7d79e31961771d304b09b2be60d27d0e", "url": "https://api.github.com/repos/airbnb/synapse/commits/3f93b1be7d79e31961771d304b09b2be60d27d0e", "html_url": "https://github.com/airbnb/synapse/commit/3f93b1be7d79e31961771d304b09b2be60d27d0e"}, {"sha": "9692358348d492825a5217469c7680ebe93ea37a", "url": "https://api.github.com/repos/airbnb/synapse/commits/9692358348d492825a5217469c7680ebe93ea37a", "html_url": "https://github.com/airbnb/synapse/commit/9692358348d492825a5217469c7680ebe93ea37a"}]}, {"sha": "9692358348d492825a5217469c7680ebe93ea37a", "commit": {"author": {"name": "Liam Stewart", "email": "liam@strava.com", "date": "2014-08-05T18:11:29Z"}, "committer": {"name": "Liam Stewart", "email": "liam@strava.com", "date": "2014-08-05T18:11:29Z"}, "message": "Consider only running instances and memoize AWS calls.\n\nIt doesn't make sense to retrieve starting, stopping, stopped, and terminated instances\nand include them on the server list. The `memoize` block ensures that results\nfrom requests are remembered, avoiding redundant calls to retrieve instance\ndetails.", "tree": {"sha": "fa210cc47aa32733e07f6f179f227c06295305db", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/fa210cc47aa32733e07f6f179f227c06295305db"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/9692358348d492825a5217469c7680ebe93ea37a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/9692358348d492825a5217469c7680ebe93ea37a", "html_url": "https://github.com/airbnb/synapse/commit/9692358348d492825a5217469c7680ebe93ea37a", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/9692358348d492825a5217469c7680ebe93ea37a/comments", "author": {"login": "liamstewart", "id": 1117074, "avatar_url": "https://avatars3.githubusercontent.com/u/1117074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liamstewart", "html_url": "https://github.com/liamstewart", "followers_url": "https://api.github.com/users/liamstewart/followers", "following_url": "https://api.github.com/users/liamstewart/following{/other_user}", "gists_url": "https://api.github.com/users/liamstewart/gists{/gist_id}", "starred_url": "https://api.github.com/users/liamstewart/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liamstewart/subscriptions", "organizations_url": "https://api.github.com/users/liamstewart/orgs", "repos_url": "https://api.github.com/users/liamstewart/repos", "events_url": "https://api.github.com/users/liamstewart/events{/privacy}", "received_events_url": "https://api.github.com/users/liamstewart/received_events", "type": "User", "site_admin": false}, "committer": {"login": "liamstewart", "id": 1117074, "avatar_url": "https://avatars3.githubusercontent.com/u/1117074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liamstewart", "html_url": "https://github.com/liamstewart", "followers_url": "https://api.github.com/users/liamstewart/followers", "following_url": "https://api.github.com/users/liamstewart/following{/other_user}", "gists_url": "https://api.github.com/users/liamstewart/gists{/gist_id}", "starred_url": "https://api.github.com/users/liamstewart/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liamstewart/subscriptions", "organizations_url": "https://api.github.com/users/liamstewart/orgs", "repos_url": "https://api.github.com/users/liamstewart/repos", "events_url": "https://api.github.com/users/liamstewart/events{/privacy}", "received_events_url": "https://api.github.com/users/liamstewart/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3f93b1be7d79e31961771d304b09b2be60d27d0e", "url": "https://api.github.com/repos/airbnb/synapse/commits/3f93b1be7d79e31961771d304b09b2be60d27d0e", "html_url": "https://github.com/airbnb/synapse/commit/3f93b1be7d79e31961771d304b09b2be60d27d0e"}]}, {"sha": "3f93b1be7d79e31961771d304b09b2be60d27d0e", "commit": {"author": {"name": "Igor Serebryany", "email": "igor.serebryany@airbedandbreakfast.com", "date": "2014-07-15T19:50:56Z"}, "committer": {"name": "Igor Serebryany", "email": "igor.serebryany@airbedandbreakfast.com", "date": "2014-07-15T19:50:56Z"}, "message": "[readme] better document shared_frontend and port options\n\nalso fixes some stylistic nits", "tree": {"sha": "cbecdffdf2f7caab16b53be9c7e42db06f291275", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/cbecdffdf2f7caab16b53be9c7e42db06f291275"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/3f93b1be7d79e31961771d304b09b2be60d27d0e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/3f93b1be7d79e31961771d304b09b2be60d27d0e", "html_url": "https://github.com/airbnb/synapse/commit/3f93b1be7d79e31961771d304b09b2be60d27d0e", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/3f93b1be7d79e31961771d304b09b2be60d27d0e/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fa0bfdf9e7006d12ee0481dc1a9c64b02c384e36", "url": "https://api.github.com/repos/airbnb/synapse/commits/fa0bfdf9e7006d12ee0481dc1a9c64b02c384e36", "html_url": "https://github.com/airbnb/synapse/commit/fa0bfdf9e7006d12ee0481dc1a9c64b02c384e36"}]}, {"sha": "fa0bfdf9e7006d12ee0481dc1a9c64b02c384e36", "commit": {"author": {"name": "Igor Serebryany", "email": "igor47@moomers.org", "date": "2014-07-15T02:32:38Z"}, "committer": {"name": "Igor Serebryany", "email": "igor47@moomers.org", "date": "2014-07-15T02:32:38Z"}, "message": "Merge pull request #80 from airbnb/tag_watcher\n\nTag watcher", "tree": {"sha": "94646c1183f2b928c34d72cd1972dac7caab7f46", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/94646c1183f2b928c34d72cd1972dac7caab7f46"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/fa0bfdf9e7006d12ee0481dc1a9c64b02c384e36", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/fa0bfdf9e7006d12ee0481dc1a9c64b02c384e36", "html_url": "https://github.com/airbnb/synapse/commit/fa0bfdf9e7006d12ee0481dc1a9c64b02c384e36", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/fa0bfdf9e7006d12ee0481dc1a9c64b02c384e36/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9f53abbbcc0fb4b56b83ed6bf0c77635461c6841", "url": "https://api.github.com/repos/airbnb/synapse/commits/9f53abbbcc0fb4b56b83ed6bf0c77635461c6841", "html_url": "https://github.com/airbnb/synapse/commit/9f53abbbcc0fb4b56b83ed6bf0c77635461c6841"}, {"sha": "bcd404f4ad2d40eb4ed23904ff6cd98e2951e5e7", "url": "https://api.github.com/repos/airbnb/synapse/commits/bcd404f4ad2d40eb4ed23904ff6cd98e2951e5e7", "html_url": "https://github.com/airbnb/synapse/commit/bcd404f4ad2d40eb4ed23904ff6cd98e2951e5e7"}]}, {"sha": "bcd404f4ad2d40eb4ed23904ff6cd98e2951e5e7", "commit": {"author": {"name": "Barrie Bremner", "email": "baz@barriebremner.com", "date": "2014-05-06T17:12:24Z"}, "committer": {"name": "Igor Serebryany", "email": "igor.serebryany@airbedandbreakfast.com", "date": "2014-07-15T02:27:45Z"}, "message": "Validate server_port_override", "tree": {"sha": "94646c1183f2b928c34d72cd1972dac7caab7f46", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/94646c1183f2b928c34d72cd1972dac7caab7f46"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/bcd404f4ad2d40eb4ed23904ff6cd98e2951e5e7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/bcd404f4ad2d40eb4ed23904ff6cd98e2951e5e7", "html_url": "https://github.com/airbnb/synapse/commit/bcd404f4ad2d40eb4ed23904ff6cd98e2951e5e7", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/bcd404f4ad2d40eb4ed23904ff6cd98e2951e5e7/comments", "author": {"login": "bazbremner", "id": 173771, "avatar_url": "https://avatars1.githubusercontent.com/u/173771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bazbremner", "html_url": "https://github.com/bazbremner", "followers_url": "https://api.github.com/users/bazbremner/followers", "following_url": "https://api.github.com/users/bazbremner/following{/other_user}", "gists_url": "https://api.github.com/users/bazbremner/gists{/gist_id}", "starred_url": "https://api.github.com/users/bazbremner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bazbremner/subscriptions", "organizations_url": "https://api.github.com/users/bazbremner/orgs", "repos_url": "https://api.github.com/users/bazbremner/repos", "events_url": "https://api.github.com/users/bazbremner/events{/privacy}", "received_events_url": "https://api.github.com/users/bazbremner/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cf0377171518a05adf86d115f6313c4c1859c9a8", "url": "https://api.github.com/repos/airbnb/synapse/commits/cf0377171518a05adf86d115f6313c4c1859c9a8", "html_url": "https://github.com/airbnb/synapse/commit/cf0377171518a05adf86d115f6313c4c1859c9a8"}]}, {"sha": "cf0377171518a05adf86d115f6313c4c1859c9a8", "commit": {"author": {"name": "Barrie Bremner", "email": "baz@barriebremner.com", "date": "2014-04-30T16:47:13Z"}, "committer": {"name": "Igor Serebryany", "email": "igor.serebryany@airbedandbreakfast.com", "date": "2014-07-15T02:27:45Z"}, "message": "Initial stab at tests for EC2 tag watcher.", "tree": {"sha": "a0bf2c2a7bee485a8b77f6616fc2bda10c139d73", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/a0bf2c2a7bee485a8b77f6616fc2bda10c139d73"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/cf0377171518a05adf86d115f6313c4c1859c9a8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/cf0377171518a05adf86d115f6313c4c1859c9a8", "html_url": "https://github.com/airbnb/synapse/commit/cf0377171518a05adf86d115f6313c4c1859c9a8", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/cf0377171518a05adf86d115f6313c4c1859c9a8/comments", "author": {"login": "bazbremner", "id": 173771, "avatar_url": "https://avatars1.githubusercontent.com/u/173771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bazbremner", "html_url": "https://github.com/bazbremner", "followers_url": "https://api.github.com/users/bazbremner/followers", "following_url": "https://api.github.com/users/bazbremner/following{/other_user}", "gists_url": "https://api.github.com/users/bazbremner/gists{/gist_id}", "starred_url": "https://api.github.com/users/bazbremner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bazbremner/subscriptions", "organizations_url": "https://api.github.com/users/bazbremner/orgs", "repos_url": "https://api.github.com/users/bazbremner/repos", "events_url": "https://api.github.com/users/bazbremner/events{/privacy}", "received_events_url": "https://api.github.com/users/bazbremner/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "163984393e401f3da1cbe997591f532534316723", "url": "https://api.github.com/repos/airbnb/synapse/commits/163984393e401f3da1cbe997591f532534316723", "html_url": "https://github.com/airbnb/synapse/commit/163984393e401f3da1cbe997591f532534316723"}]}, {"sha": "163984393e401f3da1cbe997591f532534316723", "commit": {"author": {"name": "Barrie Bremner", "email": "baz@barriebremner.com", "date": "2014-04-30T16:46:58Z"}, "committer": {"name": "Igor Serebryany", "email": "igor.serebryany@airbedandbreakfast.com", "date": "2014-07-15T02:27:45Z"}, "message": "Implement EC2 tag watcher.", "tree": {"sha": "a63c77bbc623e4a759680975783002aea522c390", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/a63c77bbc623e4a759680975783002aea522c390"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/163984393e401f3da1cbe997591f532534316723", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/163984393e401f3da1cbe997591f532534316723", "html_url": "https://github.com/airbnb/synapse/commit/163984393e401f3da1cbe997591f532534316723", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/163984393e401f3da1cbe997591f532534316723/comments", "author": {"login": "bazbremner", "id": 173771, "avatar_url": "https://avatars1.githubusercontent.com/u/173771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bazbremner", "html_url": "https://github.com/bazbremner", "followers_url": "https://api.github.com/users/bazbremner/followers", "following_url": "https://api.github.com/users/bazbremner/following{/other_user}", "gists_url": "https://api.github.com/users/bazbremner/gists{/gist_id}", "starred_url": "https://api.github.com/users/bazbremner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bazbremner/subscriptions", "organizations_url": "https://api.github.com/users/bazbremner/orgs", "repos_url": "https://api.github.com/users/bazbremner/repos", "events_url": "https://api.github.com/users/bazbremner/events{/privacy}", "received_events_url": "https://api.github.com/users/bazbremner/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9f53abbbcc0fb4b56b83ed6bf0c77635461c6841", "url": "https://api.github.com/repos/airbnb/synapse/commits/9f53abbbcc0fb4b56b83ed6bf0c77635461c6841", "html_url": "https://github.com/airbnb/synapse/commit/9f53abbbcc0fb4b56b83ed6bf0c77635461c6841"}]}, {"sha": "9f53abbbcc0fb4b56b83ed6bf0c77635461c6841", "commit": {"author": {"name": "Jay J", "email": "j.jideliov@neuvey.com", "date": "2014-06-24T23:44:07Z"}, "committer": {"name": "Igor Serebryany", "email": "igor.serebryany@airbedandbreakfast.com", "date": "2014-07-15T01:31:41Z"}, "message": "Update README.md\n\nModified JSON to YAML, and added a note about installing HAProxy\n\nIncludes fix from @rstrox about trailing commas in example YAML\n\nCloses #77", "tree": {"sha": "40138e9b37ad80f2a8295128f97ec87a02ccacde", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/40138e9b37ad80f2a8295128f97ec87a02ccacde"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/9f53abbbcc0fb4b56b83ed6bf0c77635461c6841", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/9f53abbbcc0fb4b56b83ed6bf0c77635461c6841", "html_url": "https://github.com/airbnb/synapse/commit/9f53abbbcc0fb4b56b83ed6bf0c77635461c6841", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/9f53abbbcc0fb4b56b83ed6bf0c77635461c6841/comments", "author": null, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f3111317081199bd27b9505518b6058dd021393c", "url": "https://api.github.com/repos/airbnb/synapse/commits/f3111317081199bd27b9505518b6058dd021393c", "html_url": "https://github.com/airbnb/synapse/commit/f3111317081199bd27b9505518b6058dd021393c"}]}, {"sha": "f3111317081199bd27b9505518b6058dd021393c", "commit": {"author": {"name": "Josh Hull", "email": "josh.hull@airbnb.com", "date": "2014-06-23T19:26:28Z"}, "committer": {"name": "Igor Serebryany", "email": "igor.serebryany@airbedandbreakfast.com", "date": "2014-06-23T19:35:04Z"}, "message": "Bump version", "tree": {"sha": "e757d6504394e429e33645c03d9c8426399f93be", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/e757d6504394e429e33645c03d9c8426399f93be"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/f3111317081199bd27b9505518b6058dd021393c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/f3111317081199bd27b9505518b6058dd021393c", "html_url": "https://github.com/airbnb/synapse/commit/f3111317081199bd27b9505518b6058dd021393c", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/f3111317081199bd27b9505518b6058dd021393c/comments", "author": null, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f35d3b73ff98795f0f66a0b2040ca3eb35d5afbc", "url": "https://api.github.com/repos/airbnb/synapse/commits/f35d3b73ff98795f0f66a0b2040ca3eb35d5afbc", "html_url": "https://github.com/airbnb/synapse/commit/f35d3b73ff98795f0f66a0b2040ca3eb35d5afbc"}]}, {"sha": "f35d3b73ff98795f0f66a0b2040ca3eb35d5afbc", "commit": {"author": {"name": "Joshua Hull", "email": "joshbuddy@gmail.com", "date": "2014-06-23T19:20:52Z"}, "committer": {"name": "Joshua Hull", "email": "joshbuddy@gmail.com", "date": "2014-06-23T19:20:52Z"}, "message": "Merge pull request #76 from airbnb/add_cookie_options\n\n[haproxy] always add a cookie to the server", "tree": {"sha": "4d416aa70a0fa93bcc3a35cf22b29f2d850233c1", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/4d416aa70a0fa93bcc3a35cf22b29f2d850233c1"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/f35d3b73ff98795f0f66a0b2040ca3eb35d5afbc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/f35d3b73ff98795f0f66a0b2040ca3eb35d5afbc", "html_url": "https://github.com/airbnb/synapse/commit/f35d3b73ff98795f0f66a0b2040ca3eb35d5afbc", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/f35d3b73ff98795f0f66a0b2040ca3eb35d5afbc/comments", "author": {"login": "joshbuddy", "id": 8898, "avatar_url": "https://avatars2.githubusercontent.com/u/8898?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joshbuddy", "html_url": "https://github.com/joshbuddy", "followers_url": "https://api.github.com/users/joshbuddy/followers", "following_url": "https://api.github.com/users/joshbuddy/following{/other_user}", "gists_url": "https://api.github.com/users/joshbuddy/gists{/gist_id}", "starred_url": "https://api.github.com/users/joshbuddy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joshbuddy/subscriptions", "organizations_url": "https://api.github.com/users/joshbuddy/orgs", "repos_url": "https://api.github.com/users/joshbuddy/repos", "events_url": "https://api.github.com/users/joshbuddy/events{/privacy}", "received_events_url": "https://api.github.com/users/joshbuddy/received_events", "type": "User", "site_admin": false}, "committer": {"login": "joshbuddy", "id": 8898, "avatar_url": "https://avatars2.githubusercontent.com/u/8898?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joshbuddy", "html_url": "https://github.com/joshbuddy", "followers_url": "https://api.github.com/users/joshbuddy/followers", "following_url": "https://api.github.com/users/joshbuddy/following{/other_user}", "gists_url": "https://api.github.com/users/joshbuddy/gists{/gist_id}", "starred_url": "https://api.github.com/users/joshbuddy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joshbuddy/subscriptions", "organizations_url": "https://api.github.com/users/joshbuddy/orgs", "repos_url": "https://api.github.com/users/joshbuddy/repos", "events_url": "https://api.github.com/users/joshbuddy/events{/privacy}", "received_events_url": "https://api.github.com/users/joshbuddy/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f23f25f9c121ea85c0a0d1e3058e4ac22dd75510", "url": "https://api.github.com/repos/airbnb/synapse/commits/f23f25f9c121ea85c0a0d1e3058e4ac22dd75510", "html_url": "https://github.com/airbnb/synapse/commit/f23f25f9c121ea85c0a0d1e3058e4ac22dd75510"}, {"sha": "b709838288659480207cf2378d48fff36be42dc3", "url": "https://api.github.com/repos/airbnb/synapse/commits/b709838288659480207cf2378d48fff36be42dc3", "html_url": "https://github.com/airbnb/synapse/commit/b709838288659480207cf2378d48fff36be42dc3"}]}, {"sha": "f23f25f9c121ea85c0a0d1e3058e4ac22dd75510", "commit": {"author": {"name": "Igor Serebryany", "email": "igor.serebryany@airbedandbreakfast.com", "date": "2014-06-18T23:34:01Z"}, "committer": {"name": "Igor Serebryany", "email": "igor.serebryany@airbedandbreakfast.com", "date": "2014-06-18T23:34:01Z"}, "message": "[synapse] bump version to 0.11.0", "tree": {"sha": "b11e6558197c045f51873d39abfee40cf9c8f973", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/b11e6558197c045f51873d39abfee40cf9c8f973"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/f23f25f9c121ea85c0a0d1e3058e4ac22dd75510", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/f23f25f9c121ea85c0a0d1e3058e4ac22dd75510", "html_url": "https://github.com/airbnb/synapse/commit/f23f25f9c121ea85c0a0d1e3058e4ac22dd75510", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/f23f25f9c121ea85c0a0d1e3058e4ac22dd75510/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0bc10f1102fae0a459d57fc134de743a81373ba4", "url": "https://api.github.com/repos/airbnb/synapse/commits/0bc10f1102fae0a459d57fc134de743a81373ba4", "html_url": "https://github.com/airbnb/synapse/commit/0bc10f1102fae0a459d57fc134de743a81373ba4"}]}, {"sha": "b709838288659480207cf2378d48fff36be42dc3", "commit": {"author": {"name": "Igor Serebryany", "email": "igor.serebryany@airbedandbreakfast.com", "date": "2014-06-18T21:02:03Z"}, "committer": {"name": "Igor Serebryany", "email": "igor.serebryany@airbedandbreakfast.com", "date": "2014-06-18T21:04:15Z"}, "message": "[haproxy] always add a cookie to the server\n\nThis makes it easier to do session persistence based on a cookie. Without an\naccompanying `cookie` setting in the backend, this change has no effect, as\nconfirmed by Willie in this mailing list post:\n\nhttp://marc.info/?l=haproxy&m=140312462018915&w=2", "tree": {"sha": "d23239a411bb3539b9e1abb7585971baa35b5737", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/d23239a411bb3539b9e1abb7585971baa35b5737"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/b709838288659480207cf2378d48fff36be42dc3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/b709838288659480207cf2378d48fff36be42dc3", "html_url": "https://github.com/airbnb/synapse/commit/b709838288659480207cf2378d48fff36be42dc3", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/b709838288659480207cf2378d48fff36be42dc3/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0bc10f1102fae0a459d57fc134de743a81373ba4", "url": "https://api.github.com/repos/airbnb/synapse/commits/0bc10f1102fae0a459d57fc134de743a81373ba4", "html_url": "https://github.com/airbnb/synapse/commit/0bc10f1102fae0a459d57fc134de743a81373ba4"}]}, {"sha": "0bc10f1102fae0a459d57fc134de743a81373ba4", "commit": {"author": {"name": "Igor Serebryany", "email": "igor47@moomers.org", "date": "2014-06-18T19:06:34Z"}, "committer": {"name": "Igor Serebryany", "email": "igor47@moomers.org", "date": "2014-06-18T19:06:34Z"}, "message": "Merge pull request #75 from memory/thread-expiry\n\nexceptions in the watcher threads should wake the main thread", "tree": {"sha": "2572019f4e837a0baf4bf87ec38c578af866e357", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/2572019f4e837a0baf4bf87ec38c578af866e357"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/0bc10f1102fae0a459d57fc134de743a81373ba4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/0bc10f1102fae0a459d57fc134de743a81373ba4", "html_url": "https://github.com/airbnb/synapse/commit/0bc10f1102fae0a459d57fc134de743a81373ba4", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/0bc10f1102fae0a459d57fc134de743a81373ba4/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "139a68fc9497aea0fa77a18c29cc144ed32d404b", "url": "https://api.github.com/repos/airbnb/synapse/commits/139a68fc9497aea0fa77a18c29cc144ed32d404b", "html_url": "https://github.com/airbnb/synapse/commit/139a68fc9497aea0fa77a18c29cc144ed32d404b"}, {"sha": "c85c48137793ab1dd9002465f210773482ff5079", "url": "https://api.github.com/repos/airbnb/synapse/commits/c85c48137793ab1dd9002465f210773482ff5079", "html_url": "https://github.com/airbnb/synapse/commit/c85c48137793ab1dd9002465f210773482ff5079"}]}, {"sha": "c85c48137793ab1dd9002465f210773482ff5079", "commit": {"author": {"name": "Nathan J. Mehl", "email": "n@climate.com", "date": "2014-06-17T20:46:04Z"}, "committer": {"name": "Nathan J. Mehl", "email": "n@climate.com", "date": "2014-06-17T20:46:04Z"}, "message": "exceptions in the watcher threads should wake the main thread", "tree": {"sha": "2572019f4e837a0baf4bf87ec38c578af866e357", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/2572019f4e837a0baf4bf87ec38c578af866e357"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/c85c48137793ab1dd9002465f210773482ff5079", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/c85c48137793ab1dd9002465f210773482ff5079", "html_url": "https://github.com/airbnb/synapse/commit/c85c48137793ab1dd9002465f210773482ff5079", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/c85c48137793ab1dd9002465f210773482ff5079/comments", "author": {"login": "tcc-jenkins", "id": 2030110, "avatar_url": "https://avatars2.githubusercontent.com/u/2030110?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tcc-jenkins", "html_url": "https://github.com/tcc-jenkins", "followers_url": "https://api.github.com/users/tcc-jenkins/followers", "following_url": "https://api.github.com/users/tcc-jenkins/following{/other_user}", "gists_url": "https://api.github.com/users/tcc-jenkins/gists{/gist_id}", "starred_url": "https://api.github.com/users/tcc-jenkins/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tcc-jenkins/subscriptions", "organizations_url": "https://api.github.com/users/tcc-jenkins/orgs", "repos_url": "https://api.github.com/users/tcc-jenkins/repos", "events_url": "https://api.github.com/users/tcc-jenkins/events{/privacy}", "received_events_url": "https://api.github.com/users/tcc-jenkins/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tcc-jenkins", "id": 2030110, "avatar_url": "https://avatars2.githubusercontent.com/u/2030110?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tcc-jenkins", "html_url": "https://github.com/tcc-jenkins", "followers_url": "https://api.github.com/users/tcc-jenkins/followers", "following_url": "https://api.github.com/users/tcc-jenkins/following{/other_user}", "gists_url": "https://api.github.com/users/tcc-jenkins/gists{/gist_id}", "starred_url": "https://api.github.com/users/tcc-jenkins/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tcc-jenkins/subscriptions", "organizations_url": "https://api.github.com/users/tcc-jenkins/orgs", "repos_url": "https://api.github.com/users/tcc-jenkins/repos", "events_url": "https://api.github.com/users/tcc-jenkins/events{/privacy}", "received_events_url": "https://api.github.com/users/tcc-jenkins/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "139a68fc9497aea0fa77a18c29cc144ed32d404b", "url": "https://api.github.com/repos/airbnb/synapse/commits/139a68fc9497aea0fa77a18c29cc144ed32d404b", "html_url": "https://github.com/airbnb/synapse/commit/139a68fc9497aea0fa77a18c29cc144ed32d404b"}]}, {"sha": "139a68fc9497aea0fa77a18c29cc144ed32d404b", "commit": {"author": {"name": "Igor Serebryany", "email": "igor47@moomers.org", "date": "2014-06-17T17:23:39Z"}, "committer": {"name": "Igor Serebryany", "email": "igor47@moomers.org", "date": "2014-06-17T17:23:39Z"}, "message": "Merge pull request #68 from airbnb/cleaned_up_session_expiry\n\nCleaned up session expiry", "tree": {"sha": "62c9724bd3ca27f2c70b65c6552bb80a3cfeb365", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/62c9724bd3ca27f2c70b65c6552bb80a3cfeb365"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/139a68fc9497aea0fa77a18c29cc144ed32d404b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/139a68fc9497aea0fa77a18c29cc144ed32d404b", "html_url": "https://github.com/airbnb/synapse/commit/139a68fc9497aea0fa77a18c29cc144ed32d404b", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/139a68fc9497aea0fa77a18c29cc144ed32d404b/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cc7f901ab0581689720a07e31d1faf46b404f6dd", "url": "https://api.github.com/repos/airbnb/synapse/commits/cc7f901ab0581689720a07e31d1faf46b404f6dd", "html_url": "https://github.com/airbnb/synapse/commit/cc7f901ab0581689720a07e31d1faf46b404f6dd"}, {"sha": "b5822a3e8f93f42310a33bf6de933e5ac3381e1e", "url": "https://api.github.com/repos/airbnb/synapse/commits/b5822a3e8f93f42310a33bf6de933e5ac3381e1e", "html_url": "https://github.com/airbnb/synapse/commit/b5822a3e8f93f42310a33bf6de933e5ac3381e1e"}]}, {"sha": "cc7f901ab0581689720a07e31d1faf46b404f6dd", "commit": {"author": {"name": "Igor Serebryany", "email": "igor47@moomers.org", "date": "2014-06-17T17:21:32Z"}, "committer": {"name": "Igor Serebryany", "email": "igor47@moomers.org", "date": "2014-06-17T17:21:32Z"}, "message": "Merge pull request #73 from rrrene/patch-3\n\nUpdate docs badge in README", "tree": {"sha": "22a8d3128f38825a7e5fdb29535b0bce99614558", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/22a8d3128f38825a7e5fdb29535b0bce99614558"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/cc7f901ab0581689720a07e31d1faf46b404f6dd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/cc7f901ab0581689720a07e31d1faf46b404f6dd", "html_url": "https://github.com/airbnb/synapse/commit/cc7f901ab0581689720a07e31d1faf46b404f6dd", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/cc7f901ab0581689720a07e31d1faf46b404f6dd/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8237c9e9279c25a5030eb180f067adf1058b2042", "url": "https://api.github.com/repos/airbnb/synapse/commits/8237c9e9279c25a5030eb180f067adf1058b2042", "html_url": "https://github.com/airbnb/synapse/commit/8237c9e9279c25a5030eb180f067adf1058b2042"}, {"sha": "60227545f287d677b666e7020ca272a7ef9bc0fa", "url": "https://api.github.com/repos/airbnb/synapse/commits/60227545f287d677b666e7020ca272a7ef9bc0fa", "html_url": "https://github.com/airbnb/synapse/commit/60227545f287d677b666e7020ca272a7ef9bc0fa"}]}, {"sha": "8237c9e9279c25a5030eb180f067adf1058b2042", "commit": {"author": {"name": "Igor Serebryany", "email": "igor47@moomers.org", "date": "2014-06-17T17:20:50Z"}, "committer": {"name": "Igor Serebryany", "email": "igor47@moomers.org", "date": "2014-06-17T17:20:50Z"}, "message": "Merge pull request #74 from turbovote/tcp-check\n\nAdd tcp-check to allowed HAProxy configurations", "tree": {"sha": "ed5b40aa5db0b122a53b0b7d1f065501689684f7", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/ed5b40aa5db0b122a53b0b7d1f065501689684f7"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/8237c9e9279c25a5030eb180f067adf1058b2042", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/8237c9e9279c25a5030eb180f067adf1058b2042", "html_url": "https://github.com/airbnb/synapse/commit/8237c9e9279c25a5030eb180f067adf1058b2042", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/8237c9e9279c25a5030eb180f067adf1058b2042/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "307cb7363d4383a8b2d71553638124b56f0bd89d", "url": "https://api.github.com/repos/airbnb/synapse/commits/307cb7363d4383a8b2d71553638124b56f0bd89d", "html_url": "https://github.com/airbnb/synapse/commit/307cb7363d4383a8b2d71553638124b56f0bd89d"}, {"sha": "6c448d39c7769a4e117651340ce6e452bdf70908", "url": "https://api.github.com/repos/airbnb/synapse/commits/6c448d39c7769a4e117651340ce6e452bdf70908", "html_url": "https://github.com/airbnb/synapse/commit/6c448d39c7769a4e117651340ce6e452bdf70908"}]}, {"sha": "6c448d39c7769a4e117651340ce6e452bdf70908", "commit": {"author": {"name": "Nathan Herzing", "email": "nherzing@gmail.com", "date": "2014-06-17T16:20:13Z"}, "committer": {"name": "Nathan Herzing", "email": "nherzing@gmail.com", "date": "2014-06-17T16:39:15Z"}, "message": "Add tcp-check to allowed HAProxy configurations", "tree": {"sha": "ed5b40aa5db0b122a53b0b7d1f065501689684f7", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/ed5b40aa5db0b122a53b0b7d1f065501689684f7"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/6c448d39c7769a4e117651340ce6e452bdf70908", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/6c448d39c7769a4e117651340ce6e452bdf70908", "html_url": "https://github.com/airbnb/synapse/commit/6c448d39c7769a4e117651340ce6e452bdf70908", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/6c448d39c7769a4e117651340ce6e452bdf70908/comments", "author": {"login": "nherzing", "id": 2286657, "avatar_url": "https://avatars1.githubusercontent.com/u/2286657?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nherzing", "html_url": "https://github.com/nherzing", "followers_url": "https://api.github.com/users/nherzing/followers", "following_url": "https://api.github.com/users/nherzing/following{/other_user}", "gists_url": "https://api.github.com/users/nherzing/gists{/gist_id}", "starred_url": "https://api.github.com/users/nherzing/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nherzing/subscriptions", "organizations_url": "https://api.github.com/users/nherzing/orgs", "repos_url": "https://api.github.com/users/nherzing/repos", "events_url": "https://api.github.com/users/nherzing/events{/privacy}", "received_events_url": "https://api.github.com/users/nherzing/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nherzing", "id": 2286657, "avatar_url": "https://avatars1.githubusercontent.com/u/2286657?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nherzing", "html_url": "https://github.com/nherzing", "followers_url": "https://api.github.com/users/nherzing/followers", "following_url": "https://api.github.com/users/nherzing/following{/other_user}", "gists_url": "https://api.github.com/users/nherzing/gists{/gist_id}", "starred_url": "https://api.github.com/users/nherzing/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nherzing/subscriptions", "organizations_url": "https://api.github.com/users/nherzing/orgs", "repos_url": "https://api.github.com/users/nherzing/repos", "events_url": "https://api.github.com/users/nherzing/events{/privacy}", "received_events_url": "https://api.github.com/users/nherzing/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "307cb7363d4383a8b2d71553638124b56f0bd89d", "url": "https://api.github.com/repos/airbnb/synapse/commits/307cb7363d4383a8b2d71553638124b56f0bd89d", "html_url": "https://github.com/airbnb/synapse/commit/307cb7363d4383a8b2d71553638124b56f0bd89d"}]}, {"sha": "60227545f287d677b666e7020ca272a7ef9bc0fa", "commit": {"author": {"name": "Ren\u00e9 F\u00f6hring", "email": "rf@bamaru.de", "date": "2014-06-13T06:46:23Z"}, "committer": {"name": "Ren\u00e9 F\u00f6hring", "email": "rf@bamaru.de", "date": "2014-06-13T06:46:23Z"}, "message": "Update docs badge in README\n\nUpdate the URL of the docs badge to include it from inch-ci.org instead of inch-pages.github.io (the former being the successor of the Inch Pages project).", "tree": {"sha": "ba5159f50b666f6644b79bbfc417a46544251628", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/ba5159f50b666f6644b79bbfc417a46544251628"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/60227545f287d677b666e7020ca272a7ef9bc0fa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/60227545f287d677b666e7020ca272a7ef9bc0fa", "html_url": "https://github.com/airbnb/synapse/commit/60227545f287d677b666e7020ca272a7ef9bc0fa", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/60227545f287d677b666e7020ca272a7ef9bc0fa/comments", "author": {"login": "rrrene", "id": 311914, "avatar_url": "https://avatars3.githubusercontent.com/u/311914?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rrrene", "html_url": "https://github.com/rrrene", "followers_url": "https://api.github.com/users/rrrene/followers", "following_url": "https://api.github.com/users/rrrene/following{/other_user}", "gists_url": "https://api.github.com/users/rrrene/gists{/gist_id}", "starred_url": "https://api.github.com/users/rrrene/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rrrene/subscriptions", "organizations_url": "https://api.github.com/users/rrrene/orgs", "repos_url": "https://api.github.com/users/rrrene/repos", "events_url": "https://api.github.com/users/rrrene/events{/privacy}", "received_events_url": "https://api.github.com/users/rrrene/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rrrene", "id": 311914, "avatar_url": "https://avatars3.githubusercontent.com/u/311914?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rrrene", "html_url": "https://github.com/rrrene", "followers_url": "https://api.github.com/users/rrrene/followers", "following_url": "https://api.github.com/users/rrrene/following{/other_user}", "gists_url": "https://api.github.com/users/rrrene/gists{/gist_id}", "starred_url": "https://api.github.com/users/rrrene/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rrrene/subscriptions", "organizations_url": "https://api.github.com/users/rrrene/orgs", "repos_url": "https://api.github.com/users/rrrene/repos", "events_url": "https://api.github.com/users/rrrene/events{/privacy}", "received_events_url": "https://api.github.com/users/rrrene/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "307cb7363d4383a8b2d71553638124b56f0bd89d", "url": "https://api.github.com/repos/airbnb/synapse/commits/307cb7363d4383a8b2d71553638124b56f0bd89d", "html_url": "https://github.com/airbnb/synapse/commit/307cb7363d4383a8b2d71553638124b56f0bd89d"}]}, {"sha": "b5822a3e8f93f42310a33bf6de933e5ac3381e1e", "commit": {"author": {"name": "Igor Serebryany", "email": "igor.serebryany@airbedandbreakfast.com", "date": "2014-05-29T19:14:51Z"}, "committer": {"name": "Igor Serebryany", "email": "igor.serebryany@airbedandbreakfast.com", "date": "2014-05-29T19:14:51Z"}, "message": "handle session expiry by failing fast\n\nthis will cause synapse to restart", "tree": {"sha": "c0b0c24a94713f425ab3386349105740a940cbaa", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/c0b0c24a94713f425ab3386349105740a940cbaa"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/b5822a3e8f93f42310a33bf6de933e5ac3381e1e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/b5822a3e8f93f42310a33bf6de933e5ac3381e1e", "html_url": "https://github.com/airbnb/synapse/commit/b5822a3e8f93f42310a33bf6de933e5ac3381e1e", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/b5822a3e8f93f42310a33bf6de933e5ac3381e1e/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "29b96fb6925d923309c3d3f97a46714a186de1de", "url": "https://api.github.com/repos/airbnb/synapse/commits/29b96fb6925d923309c3d3f97a46714a186de1de", "html_url": "https://github.com/airbnb/synapse/commit/29b96fb6925d923309c3d3f97a46714a186de1de"}]}, {"sha": "29b96fb6925d923309c3d3f97a46714a186de1de", "commit": {"author": {"name": "Igor Serebryany", "email": "igor.serebryany@airbedandbreakfast.com", "date": "2014-05-28T22:27:55Z"}, "committer": {"name": "Igor Serebryany", "email": "igor.serebryany@airbedandbreakfast.com", "date": "2014-05-28T22:27:55Z"}, "message": "maintain api for new zk_ functions\n\nmake everything private unless it must be public. we also\n* kill the @should_exit parameter, which is ambigous\n* force node creation during zk connection\n* raise a RuntimeError if we cannot set a watch; there should be\n  no way to recover from that", "tree": {"sha": "e9de8bceaa6e4da7598cfd1d472516ad1e11d1da", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/e9de8bceaa6e4da7598cfd1d472516ad1e11d1da"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/29b96fb6925d923309c3d3f97a46714a186de1de", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/29b96fb6925d923309c3d3f97a46714a186de1de", "html_url": "https://github.com/airbnb/synapse/commit/29b96fb6925d923309c3d3f97a46714a186de1de", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/29b96fb6925d923309c3d3f97a46714a186de1de/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4b734ec1057ef44cdce7805584c90160f21e6955", "url": "https://api.github.com/repos/airbnb/synapse/commits/4b734ec1057ef44cdce7805584c90160f21e6955", "html_url": "https://github.com/airbnb/synapse/commit/4b734ec1057ef44cdce7805584c90160f21e6955"}]}, {"sha": "4b734ec1057ef44cdce7805584c90160f21e6955", "commit": {"author": {"name": "Brenden Matthews", "email": "brenden@diddyinc.com", "date": "2014-04-10T01:06:35Z"}, "committer": {"name": "Will Moss", "email": "will.moss@airbnb.com", "date": "2014-05-28T21:52:19Z"}, "message": "Heartbeat: use `connected?` rather than `ping?`.", "tree": {"sha": "bf084c0bb7dc0ac0e235be21f709b3b51d1d0acd", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/bf084c0bb7dc0ac0e235be21f709b3b51d1d0acd"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/4b734ec1057ef44cdce7805584c90160f21e6955", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/4b734ec1057ef44cdce7805584c90160f21e6955", "html_url": "https://github.com/airbnb/synapse/commit/4b734ec1057ef44cdce7805584c90160f21e6955", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/4b734ec1057ef44cdce7805584c90160f21e6955/comments", "author": {"login": "brndnmtthws", "id": 3129093, "avatar_url": "https://avatars1.githubusercontent.com/u/3129093?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brndnmtthws", "html_url": "https://github.com/brndnmtthws", "followers_url": "https://api.github.com/users/brndnmtthws/followers", "following_url": "https://api.github.com/users/brndnmtthws/following{/other_user}", "gists_url": "https://api.github.com/users/brndnmtthws/gists{/gist_id}", "starred_url": "https://api.github.com/users/brndnmtthws/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brndnmtthws/subscriptions", "organizations_url": "https://api.github.com/users/brndnmtthws/orgs", "repos_url": "https://api.github.com/users/brndnmtthws/repos", "events_url": "https://api.github.com/users/brndnmtthws/events{/privacy}", "received_events_url": "https://api.github.com/users/brndnmtthws/received_events", "type": "User", "site_admin": false}, "committer": {"login": "wmoss", "id": 187472, "avatar_url": "https://avatars3.githubusercontent.com/u/187472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wmoss", "html_url": "https://github.com/wmoss", "followers_url": "https://api.github.com/users/wmoss/followers", "following_url": "https://api.github.com/users/wmoss/following{/other_user}", "gists_url": "https://api.github.com/users/wmoss/gists{/gist_id}", "starred_url": "https://api.github.com/users/wmoss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wmoss/subscriptions", "organizations_url": "https://api.github.com/users/wmoss/orgs", "repos_url": "https://api.github.com/users/wmoss/repos", "events_url": "https://api.github.com/users/wmoss/events{/privacy}", "received_events_url": "https://api.github.com/users/wmoss/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b644c023b7c124bbd6f12b4b6b4de337c41976ce", "url": "https://api.github.com/repos/airbnb/synapse/commits/b644c023b7c124bbd6f12b4b6b4de337c41976ce", "html_url": "https://github.com/airbnb/synapse/commit/b644c023b7c124bbd6f12b4b6b4de337c41976ce"}]}, {"sha": "b644c023b7c124bbd6f12b4b6b4de337c41976ce", "commit": {"author": {"name": "Brenden Matthews", "email": "brenden@diddyinc.com", "date": "2014-04-03T16:18:39Z"}, "committer": {"name": "Will Moss", "email": "will.moss@airbnb.com", "date": "2014-05-28T21:52:19Z"}, "message": "More robust ZK watcher handling.", "tree": {"sha": "701d9e54c8bbf75bcdd7da54d59aabf49ab5058d", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/701d9e54c8bbf75bcdd7da54d59aabf49ab5058d"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/b644c023b7c124bbd6f12b4b6b4de337c41976ce", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/b644c023b7c124bbd6f12b4b6b4de337c41976ce", "html_url": "https://github.com/airbnb/synapse/commit/b644c023b7c124bbd6f12b4b6b4de337c41976ce", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/b644c023b7c124bbd6f12b4b6b4de337c41976ce/comments", "author": {"login": "brndnmtthws", "id": 3129093, "avatar_url": "https://avatars1.githubusercontent.com/u/3129093?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brndnmtthws", "html_url": "https://github.com/brndnmtthws", "followers_url": "https://api.github.com/users/brndnmtthws/followers", "following_url": "https://api.github.com/users/brndnmtthws/following{/other_user}", "gists_url": "https://api.github.com/users/brndnmtthws/gists{/gist_id}", "starred_url": "https://api.github.com/users/brndnmtthws/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brndnmtthws/subscriptions", "organizations_url": "https://api.github.com/users/brndnmtthws/orgs", "repos_url": "https://api.github.com/users/brndnmtthws/repos", "events_url": "https://api.github.com/users/brndnmtthws/events{/privacy}", "received_events_url": "https://api.github.com/users/brndnmtthws/received_events", "type": "User", "site_admin": false}, "committer": {"login": "wmoss", "id": 187472, "avatar_url": "https://avatars3.githubusercontent.com/u/187472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wmoss", "html_url": "https://github.com/wmoss", "followers_url": "https://api.github.com/users/wmoss/followers", "following_url": "https://api.github.com/users/wmoss/following{/other_user}", "gists_url": "https://api.github.com/users/wmoss/gists{/gist_id}", "starred_url": "https://api.github.com/users/wmoss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wmoss/subscriptions", "organizations_url": "https://api.github.com/users/wmoss/orgs", "repos_url": "https://api.github.com/users/wmoss/repos", "events_url": "https://api.github.com/users/wmoss/events{/privacy}", "received_events_url": "https://api.github.com/users/wmoss/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "307cb7363d4383a8b2d71553638124b56f0bd89d", "url": "https://api.github.com/repos/airbnb/synapse/commits/307cb7363d4383a8b2d71553638124b56f0bd89d", "html_url": "https://github.com/airbnb/synapse/commit/307cb7363d4383a8b2d71553638124b56f0bd89d"}]}, {"sha": "307cb7363d4383a8b2d71553638124b56f0bd89d", "commit": {"author": {"name": "Igor Serebryany", "email": "igor.serebryany@airbedandbreakfast.com", "date": "2014-05-07T20:31:06Z"}, "committer": {"name": "Igor Serebryany", "email": "igor.serebryany@airbedandbreakfast.com", "date": "2014-05-07T20:31:06Z"}, "message": "bump version to v0.10.0", "tree": {"sha": "d721159515fe770b0f5c0fa082311bf1191788c2", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/d721159515fe770b0f5c0fa082311bf1191788c2"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/307cb7363d4383a8b2d71553638124b56f0bd89d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/307cb7363d4383a8b2d71553638124b56f0bd89d", "html_url": "https://github.com/airbnb/synapse/commit/307cb7363d4383a8b2d71553638124b56f0bd89d", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/307cb7363d4383a8b2d71553638124b56f0bd89d/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "697f74bf04d95989caecb934c0d6bf2749d33a7e", "url": "https://api.github.com/repos/airbnb/synapse/commits/697f74bf04d95989caecb934c0d6bf2749d33a7e", "html_url": "https://github.com/airbnb/synapse/commit/697f74bf04d95989caecb934c0d6bf2749d33a7e"}]}, {"sha": "697f74bf04d95989caecb934c0d6bf2749d33a7e", "commit": {"author": {"name": "Ben Hughes", "email": "ben@pixelmachine.org", "date": "2014-05-07T04:04:51Z"}, "committer": {"name": "Ben Hughes", "email": "ben@pixelmachine.org", "date": "2014-05-07T04:04:51Z"}, "message": "Merge pull request #67 from airbnb/fix-bug-with-watcher-initialization\n\nFix bug with sub-watcher initialization", "tree": {"sha": "8b7cac1f642523ed6ac76d378047c5861cd09a90", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/8b7cac1f642523ed6ac76d378047c5861cd09a90"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/697f74bf04d95989caecb934c0d6bf2749d33a7e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/697f74bf04d95989caecb934c0d6bf2749d33a7e", "html_url": "https://github.com/airbnb/synapse/commit/697f74bf04d95989caecb934c0d6bf2749d33a7e", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/697f74bf04d95989caecb934c0d6bf2749d33a7e/comments", "author": {"login": "schleyfox", "id": 4259, "avatar_url": "https://avatars0.githubusercontent.com/u/4259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/schleyfox", "html_url": "https://github.com/schleyfox", "followers_url": "https://api.github.com/users/schleyfox/followers", "following_url": "https://api.github.com/users/schleyfox/following{/other_user}", "gists_url": "https://api.github.com/users/schleyfox/gists{/gist_id}", "starred_url": "https://api.github.com/users/schleyfox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schleyfox/subscriptions", "organizations_url": "https://api.github.com/users/schleyfox/orgs", "repos_url": "https://api.github.com/users/schleyfox/repos", "events_url": "https://api.github.com/users/schleyfox/events{/privacy}", "received_events_url": "https://api.github.com/users/schleyfox/received_events", "type": "User", "site_admin": false}, "committer": {"login": "schleyfox", "id": 4259, "avatar_url": "https://avatars0.githubusercontent.com/u/4259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/schleyfox", "html_url": "https://github.com/schleyfox", "followers_url": "https://api.github.com/users/schleyfox/followers", "following_url": "https://api.github.com/users/schleyfox/following{/other_user}", "gists_url": "https://api.github.com/users/schleyfox/gists{/gist_id}", "starred_url": "https://api.github.com/users/schleyfox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schleyfox/subscriptions", "organizations_url": "https://api.github.com/users/schleyfox/orgs", "repos_url": "https://api.github.com/users/schleyfox/repos", "events_url": "https://api.github.com/users/schleyfox/events{/privacy}", "received_events_url": "https://api.github.com/users/schleyfox/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "292cdfae1190c5507db8696e39adba94bc39e0a9", "url": "https://api.github.com/repos/airbnb/synapse/commits/292cdfae1190c5507db8696e39adba94bc39e0a9", "html_url": "https://github.com/airbnb/synapse/commit/292cdfae1190c5507db8696e39adba94bc39e0a9"}, {"sha": "4dadddd6ead4af49cfef35cb33dc72553a2a78bb", "url": "https://api.github.com/repos/airbnb/synapse/commits/4dadddd6ead4af49cfef35cb33dc72553a2a78bb", "html_url": "https://github.com/airbnb/synapse/commit/4dadddd6ead4af49cfef35cb33dc72553a2a78bb"}]}, {"sha": "4dadddd6ead4af49cfef35cb33dc72553a2a78bb", "commit": {"author": {"name": "Ben Hughes", "email": "ben@pixelmachine.org", "date": "2014-05-07T03:47:46Z"}, "committer": {"name": "Ben Hughes", "email": "ben@pixelmachine.org", "date": "2014-05-07T03:47:46Z"}, "message": "Fix bug with sub-watcher initialization", "tree": {"sha": "8b7cac1f642523ed6ac76d378047c5861cd09a90", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/8b7cac1f642523ed6ac76d378047c5861cd09a90"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/4dadddd6ead4af49cfef35cb33dc72553a2a78bb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/4dadddd6ead4af49cfef35cb33dc72553a2a78bb", "html_url": "https://github.com/airbnb/synapse/commit/4dadddd6ead4af49cfef35cb33dc72553a2a78bb", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/4dadddd6ead4af49cfef35cb33dc72553a2a78bb/comments", "author": {"login": "schleyfox", "id": 4259, "avatar_url": "https://avatars0.githubusercontent.com/u/4259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/schleyfox", "html_url": "https://github.com/schleyfox", "followers_url": "https://api.github.com/users/schleyfox/followers", "following_url": "https://api.github.com/users/schleyfox/following{/other_user}", "gists_url": "https://api.github.com/users/schleyfox/gists{/gist_id}", "starred_url": "https://api.github.com/users/schleyfox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schleyfox/subscriptions", "organizations_url": "https://api.github.com/users/schleyfox/orgs", "repos_url": "https://api.github.com/users/schleyfox/repos", "events_url": "https://api.github.com/users/schleyfox/events{/privacy}", "received_events_url": "https://api.github.com/users/schleyfox/received_events", "type": "User", "site_admin": false}, "committer": {"login": "schleyfox", "id": 4259, "avatar_url": "https://avatars0.githubusercontent.com/u/4259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/schleyfox", "html_url": "https://github.com/schleyfox", "followers_url": "https://api.github.com/users/schleyfox/followers", "following_url": "https://api.github.com/users/schleyfox/following{/other_user}", "gists_url": "https://api.github.com/users/schleyfox/gists{/gist_id}", "starred_url": "https://api.github.com/users/schleyfox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schleyfox/subscriptions", "organizations_url": "https://api.github.com/users/schleyfox/orgs", "repos_url": "https://api.github.com/users/schleyfox/repos", "events_url": "https://api.github.com/users/schleyfox/events{/privacy}", "received_events_url": "https://api.github.com/users/schleyfox/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "292cdfae1190c5507db8696e39adba94bc39e0a9", "url": "https://api.github.com/repos/airbnb/synapse/commits/292cdfae1190c5507db8696e39adba94bc39e0a9", "html_url": "https://github.com/airbnb/synapse/commit/292cdfae1190c5507db8696e39adba94bc39e0a9"}]}, {"sha": "292cdfae1190c5507db8696e39adba94bc39e0a9", "commit": {"author": {"name": "Ben Hughes", "email": "ben@pixelmachine.org", "date": "2014-05-07T01:23:44Z"}, "committer": {"name": "Ben Hughes", "email": "ben@pixelmachine.org", "date": "2014-05-07T01:23:44Z"}, "message": "Merge pull request #65 from airbnb/add-zookeeper-dns-watcher\n\nWIPish: Add ZookeeperDnsWatcher", "tree": {"sha": "1edaf78ec3ffd825adc38fc3f7ca14d0dc92064f", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/1edaf78ec3ffd825adc38fc3f7ca14d0dc92064f"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/292cdfae1190c5507db8696e39adba94bc39e0a9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/292cdfae1190c5507db8696e39adba94bc39e0a9", "html_url": "https://github.com/airbnb/synapse/commit/292cdfae1190c5507db8696e39adba94bc39e0a9", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/292cdfae1190c5507db8696e39adba94bc39e0a9/comments", "author": {"login": "schleyfox", "id": 4259, "avatar_url": "https://avatars0.githubusercontent.com/u/4259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/schleyfox", "html_url": "https://github.com/schleyfox", "followers_url": "https://api.github.com/users/schleyfox/followers", "following_url": "https://api.github.com/users/schleyfox/following{/other_user}", "gists_url": "https://api.github.com/users/schleyfox/gists{/gist_id}", "starred_url": "https://api.github.com/users/schleyfox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schleyfox/subscriptions", "organizations_url": "https://api.github.com/users/schleyfox/orgs", "repos_url": "https://api.github.com/users/schleyfox/repos", "events_url": "https://api.github.com/users/schleyfox/events{/privacy}", "received_events_url": "https://api.github.com/users/schleyfox/received_events", "type": "User", "site_admin": false}, "committer": {"login": "schleyfox", "id": 4259, "avatar_url": "https://avatars0.githubusercontent.com/u/4259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/schleyfox", "html_url": "https://github.com/schleyfox", "followers_url": "https://api.github.com/users/schleyfox/followers", "following_url": "https://api.github.com/users/schleyfox/following{/other_user}", "gists_url": "https://api.github.com/users/schleyfox/gists{/gist_id}", "starred_url": "https://api.github.com/users/schleyfox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schleyfox/subscriptions", "organizations_url": "https://api.github.com/users/schleyfox/orgs", "repos_url": "https://api.github.com/users/schleyfox/repos", "events_url": "https://api.github.com/users/schleyfox/events{/privacy}", "received_events_url": "https://api.github.com/users/schleyfox/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ac75c689ac771b6d936b4e686465f19dc3fee932", "url": "https://api.github.com/repos/airbnb/synapse/commits/ac75c689ac771b6d936b4e686465f19dc3fee932", "html_url": "https://github.com/airbnb/synapse/commit/ac75c689ac771b6d936b4e686465f19dc3fee932"}, {"sha": "9243fdf6b4a9c07a1e4054ab0dd59ab5ec55c884", "url": "https://api.github.com/repos/airbnb/synapse/commits/9243fdf6b4a9c07a1e4054ab0dd59ab5ec55c884", "html_url": "https://github.com/airbnb/synapse/commit/9243fdf6b4a9c07a1e4054ab0dd59ab5ec55c884"}]}, {"sha": "9243fdf6b4a9c07a1e4054ab0dd59ab5ec55c884", "commit": {"author": {"name": "Ben Hughes", "email": "ben@pixelmachine.org", "date": "2014-05-07T00:47:31Z"}, "committer": {"name": "Ben Hughes", "email": "ben@pixelmachine.org", "date": "2014-05-07T00:47:31Z"}, "message": "Add slightly more logging", "tree": {"sha": "928b237243e764b2044e03cd9714341997561e5a", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/928b237243e764b2044e03cd9714341997561e5a"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/9243fdf6b4a9c07a1e4054ab0dd59ab5ec55c884", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/9243fdf6b4a9c07a1e4054ab0dd59ab5ec55c884", "html_url": "https://github.com/airbnb/synapse/commit/9243fdf6b4a9c07a1e4054ab0dd59ab5ec55c884", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/9243fdf6b4a9c07a1e4054ab0dd59ab5ec55c884/comments", "author": {"login": "schleyfox", "id": 4259, "avatar_url": "https://avatars0.githubusercontent.com/u/4259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/schleyfox", "html_url": "https://github.com/schleyfox", "followers_url": "https://api.github.com/users/schleyfox/followers", "following_url": "https://api.github.com/users/schleyfox/following{/other_user}", "gists_url": "https://api.github.com/users/schleyfox/gists{/gist_id}", "starred_url": "https://api.github.com/users/schleyfox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schleyfox/subscriptions", "organizations_url": "https://api.github.com/users/schleyfox/orgs", "repos_url": "https://api.github.com/users/schleyfox/repos", "events_url": "https://api.github.com/users/schleyfox/events{/privacy}", "received_events_url": "https://api.github.com/users/schleyfox/received_events", "type": "User", "site_admin": false}, "committer": {"login": "schleyfox", "id": 4259, "avatar_url": "https://avatars0.githubusercontent.com/u/4259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/schleyfox", "html_url": "https://github.com/schleyfox", "followers_url": "https://api.github.com/users/schleyfox/followers", "following_url": "https://api.github.com/users/schleyfox/following{/other_user}", "gists_url": "https://api.github.com/users/schleyfox/gists{/gist_id}", "starred_url": "https://api.github.com/users/schleyfox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schleyfox/subscriptions", "organizations_url": "https://api.github.com/users/schleyfox/orgs", "repos_url": "https://api.github.com/users/schleyfox/repos", "events_url": "https://api.github.com/users/schleyfox/events{/privacy}", "received_events_url": "https://api.github.com/users/schleyfox/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b6e6d3fc2edebdad442584f846a388881d330702", "url": "https://api.github.com/repos/airbnb/synapse/commits/b6e6d3fc2edebdad442584f846a388881d330702", "html_url": "https://github.com/airbnb/synapse/commit/b6e6d3fc2edebdad442584f846a388881d330702"}]}, {"sha": "b6e6d3fc2edebdad442584f846a388881d330702", "commit": {"author": {"name": "Ben Hughes", "email": "ben@pixelmachine.org", "date": "2014-05-07T00:42:52Z"}, "committer": {"name": "Ben Hughes", "email": "ben@pixelmachine.org", "date": "2014-05-07T00:42:52Z"}, "message": "Address comments from PR\n\n* Make ping? dependent on watcher thread\n* Fix default_servers handling", "tree": {"sha": "83697a1e19792dd6c5a2b97221984dec2cd1c46e", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/83697a1e19792dd6c5a2b97221984dec2cd1c46e"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/b6e6d3fc2edebdad442584f846a388881d330702", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/b6e6d3fc2edebdad442584f846a388881d330702", "html_url": "https://github.com/airbnb/synapse/commit/b6e6d3fc2edebdad442584f846a388881d330702", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/b6e6d3fc2edebdad442584f846a388881d330702/comments", "author": {"login": "schleyfox", "id": 4259, "avatar_url": "https://avatars0.githubusercontent.com/u/4259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/schleyfox", "html_url": "https://github.com/schleyfox", "followers_url": "https://api.github.com/users/schleyfox/followers", "following_url": "https://api.github.com/users/schleyfox/following{/other_user}", "gists_url": "https://api.github.com/users/schleyfox/gists{/gist_id}", "starred_url": "https://api.github.com/users/schleyfox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schleyfox/subscriptions", "organizations_url": "https://api.github.com/users/schleyfox/orgs", "repos_url": "https://api.github.com/users/schleyfox/repos", "events_url": "https://api.github.com/users/schleyfox/events{/privacy}", "received_events_url": "https://api.github.com/users/schleyfox/received_events", "type": "User", "site_admin": false}, "committer": {"login": "schleyfox", "id": 4259, "avatar_url": "https://avatars0.githubusercontent.com/u/4259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/schleyfox", "html_url": "https://github.com/schleyfox", "followers_url": "https://api.github.com/users/schleyfox/followers", "following_url": "https://api.github.com/users/schleyfox/following{/other_user}", "gists_url": "https://api.github.com/users/schleyfox/gists{/gist_id}", "starred_url": "https://api.github.com/users/schleyfox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schleyfox/subscriptions", "organizations_url": "https://api.github.com/users/schleyfox/orgs", "repos_url": "https://api.github.com/users/schleyfox/repos", "events_url": "https://api.github.com/users/schleyfox/events{/privacy}", "received_events_url": "https://api.github.com/users/schleyfox/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "89efc593267c6cfdedeecf7be08266ff95a7f9f1", "url": "https://api.github.com/repos/airbnb/synapse/commits/89efc593267c6cfdedeecf7be08266ff95a7f9f1", "html_url": "https://github.com/airbnb/synapse/commit/89efc593267c6cfdedeecf7be08266ff95a7f9f1"}]}, {"sha": "89efc593267c6cfdedeecf7be08266ff95a7f9f1", "commit": {"author": {"name": "Ben Hughes", "email": "ben@pixelmachine.org", "date": "2014-05-06T05:29:04Z"}, "committer": {"name": "Ben Hughes", "email": "ben@pixelmachine.org", "date": "2014-05-06T05:29:04Z"}, "message": "Improve check interval queuing behavior, add comments", "tree": {"sha": "9d0c065e525f2a0ab2e1df30912b1ac1969d3acf", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/9d0c065e525f2a0ab2e1df30912b1ac1969d3acf"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/89efc593267c6cfdedeecf7be08266ff95a7f9f1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/89efc593267c6cfdedeecf7be08266ff95a7f9f1", "html_url": "https://github.com/airbnb/synapse/commit/89efc593267c6cfdedeecf7be08266ff95a7f9f1", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/89efc593267c6cfdedeecf7be08266ff95a7f9f1/comments", "author": {"login": "schleyfox", "id": 4259, "avatar_url": "https://avatars0.githubusercontent.com/u/4259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/schleyfox", "html_url": "https://github.com/schleyfox", "followers_url": "https://api.github.com/users/schleyfox/followers", "following_url": "https://api.github.com/users/schleyfox/following{/other_user}", "gists_url": "https://api.github.com/users/schleyfox/gists{/gist_id}", "starred_url": "https://api.github.com/users/schleyfox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schleyfox/subscriptions", "organizations_url": "https://api.github.com/users/schleyfox/orgs", "repos_url": "https://api.github.com/users/schleyfox/repos", "events_url": "https://api.github.com/users/schleyfox/events{/privacy}", "received_events_url": "https://api.github.com/users/schleyfox/received_events", "type": "User", "site_admin": false}, "committer": {"login": "schleyfox", "id": 4259, "avatar_url": "https://avatars0.githubusercontent.com/u/4259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/schleyfox", "html_url": "https://github.com/schleyfox", "followers_url": "https://api.github.com/users/schleyfox/followers", "following_url": "https://api.github.com/users/schleyfox/following{/other_user}", "gists_url": "https://api.github.com/users/schleyfox/gists{/gist_id}", "starred_url": "https://api.github.com/users/schleyfox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schleyfox/subscriptions", "organizations_url": "https://api.github.com/users/schleyfox/orgs", "repos_url": "https://api.github.com/users/schleyfox/repos", "events_url": "https://api.github.com/users/schleyfox/events{/privacy}", "received_events_url": "https://api.github.com/users/schleyfox/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6d20ce283e181d8126791df842a5295ef5c4cb37", "url": "https://api.github.com/repos/airbnb/synapse/commits/6d20ce283e181d8126791df842a5295ef5c4cb37", "html_url": "https://github.com/airbnb/synapse/commit/6d20ce283e181d8126791df842a5295ef5c4cb37"}]}, {"sha": "6d20ce283e181d8126791df842a5295ef5c4cb37", "commit": {"author": {"name": "Igor Serebryany", "email": "igor.serebryany@airbedandbreakfast.com", "date": "2014-05-06T02:29:17Z"}, "committer": {"name": "Igor Serebryany", "email": "igor.serebryany@airbedandbreakfast.com", "date": "2014-05-06T02:29:17Z"}, "message": "always use the watcher's `reconfigure!` method\n\nconsistency between watchers", "tree": {"sha": "bedda376b369650183375ba7d1d9c57082141cca", "url": "https://api.github.com/repos/airbnb/synapse/git/trees/bedda376b369650183375ba7d1d9c57082141cca"}, "url": "https://api.github.com/repos/airbnb/synapse/git/commits/6d20ce283e181d8126791df842a5295ef5c4cb37", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/airbnb/synapse/commits/6d20ce283e181d8126791df842a5295ef5c4cb37", "html_url": "https://github.com/airbnb/synapse/commit/6d20ce283e181d8126791df842a5295ef5c4cb37", "comments_url": "https://api.github.com/repos/airbnb/synapse/commits/6d20ce283e181d8126791df842a5295ef5c4cb37/comments", "author": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "33a4c4ff34e1284a503243a23443d87d94dce21e", "url": "https://api.github.com/repos/airbnb/synapse/commits/33a4c4ff34e1284a503243a23443d87d94dce21e", "html_url": "https://github.com/airbnb/synapse/commit/33a4c4ff34e1284a503243a23443d87d94dce21e"}]}], "pull_requests": [{"url": "https://api.github.com/repos/airbnb/synapse/pulls/248", "id": 162753072, "html_url": "https://github.com/airbnb/synapse/pull/248", "diff_url": "https://github.com/airbnb/synapse/pull/248.diff", "patch_url": "https://github.com/airbnb/synapse/pull/248.patch", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/248", "number": 248, "state": "open", "locked": false, "title": "[Synapse] atomic config file update", "user": {"login": "lap1817", "id": 10382678, "avatar_url": "https://avatars2.githubusercontent.com/u/10382678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lap1817", "html_url": "https://github.com/lap1817", "followers_url": "https://api.github.com/users/lap1817/followers", "following_url": "https://api.github.com/users/lap1817/following{/other_user}", "gists_url": "https://api.github.com/users/lap1817/gists{/gist_id}", "starred_url": "https://api.github.com/users/lap1817/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lap1817/subscriptions", "organizations_url": "https://api.github.com/users/lap1817/orgs", "repos_url": "https://api.github.com/users/lap1817/repos", "events_url": "https://api.github.com/users/lap1817/events{/privacy}", "received_events_url": "https://api.github.com/users/lap1817/received_events", "type": "User", "site_admin": false}, "body": "reviewer:\r\n@jolynch @liangg\r\n\r\nThis PR is to enable atomic Haproxy config file update.\r\n\r\nThe issue that we observed is that when Synapse restarts Haproxy in a high frequency (e.g. every 2 seconds), the haproxy config file may get partially over-written while a Haproxy process is still loading the file, especially for services that have high number of dependencies and thus have large haproxy config (1MB+). In some cases, the haproxy process corrupted because of that.", "created_at": "2018-01-13T00:21:49Z", "updated_at": "2018-01-13T00:21:49Z", "closed_at": null, "merged_at": null, "merge_commit_sha": "98c056e3e0a884826bb7c2ae05b5fe253cd1c91a", "assignee": null, "assignees": [], "requested_reviewers": [], "milestone": null, "commits_url": "https://api.github.com/repos/airbnb/synapse/pulls/248/commits", "review_comments_url": "https://api.github.com/repos/airbnb/synapse/pulls/248/comments", "review_comment_url": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/248/comments", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/45da178f13e3a0f9b5ab1a9498d3c1522a84a134", "head": {"label": "lap1817:feng-pan-atomic-update", "ref": "feng-pan-atomic-update", "sha": "45da178f13e3a0f9b5ab1a9498d3c1522a84a134", "user": {"login": "lap1817", "id": 10382678, "avatar_url": "https://avatars2.githubusercontent.com/u/10382678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lap1817", "html_url": "https://github.com/lap1817", "followers_url": "https://api.github.com/users/lap1817/followers", "following_url": "https://api.github.com/users/lap1817/following{/other_user}", "gists_url": "https://api.github.com/users/lap1817/gists{/gist_id}", "starred_url": "https://api.github.com/users/lap1817/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lap1817/subscriptions", "organizations_url": "https://api.github.com/users/lap1817/orgs", "repos_url": "https://api.github.com/users/lap1817/repos", "events_url": "https://api.github.com/users/lap1817/events{/privacy}", "received_events_url": "https://api.github.com/users/lap1817/received_events", "type": "User", "site_admin": false}, "repo": {"id": 117300092, "name": "synapse", "full_name": "lap1817/synapse", "owner": {"login": "lap1817", "id": 10382678, "avatar_url": "https://avatars2.githubusercontent.com/u/10382678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lap1817", "html_url": "https://github.com/lap1817", "followers_url": "https://api.github.com/users/lap1817/followers", "following_url": "https://api.github.com/users/lap1817/following{/other_user}", "gists_url": "https://api.github.com/users/lap1817/gists{/gist_id}", "starred_url": "https://api.github.com/users/lap1817/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lap1817/subscriptions", "organizations_url": "https://api.github.com/users/lap1817/orgs", "repos_url": "https://api.github.com/users/lap1817/repos", "events_url": "https://api.github.com/users/lap1817/events{/privacy}", "received_events_url": "https://api.github.com/users/lap1817/received_events", "type": "User", "site_admin": false}, "private": false, "html_url": "https://github.com/lap1817/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": true, "url": "https://api.github.com/repos/lap1817/synapse", "forks_url": "https://api.github.com/repos/lap1817/synapse/forks", "keys_url": "https://api.github.com/repos/lap1817/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/lap1817/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/lap1817/synapse/teams", "hooks_url": "https://api.github.com/repos/lap1817/synapse/hooks", "issue_events_url": "https://api.github.com/repos/lap1817/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/lap1817/synapse/events", "assignees_url": "https://api.github.com/repos/lap1817/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/lap1817/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/lap1817/synapse/tags", "blobs_url": "https://api.github.com/repos/lap1817/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/lap1817/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/lap1817/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/lap1817/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/lap1817/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/lap1817/synapse/languages", "stargazers_url": "https://api.github.com/repos/lap1817/synapse/stargazers", "contributors_url": "https://api.github.com/repos/lap1817/synapse/contributors", "subscribers_url": "https://api.github.com/repos/lap1817/synapse/subscribers", "subscription_url": "https://api.github.com/repos/lap1817/synapse/subscription", "commits_url": "https://api.github.com/repos/lap1817/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/lap1817/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/lap1817/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/lap1817/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/lap1817/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/lap1817/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/lap1817/synapse/merges", "archive_url": "https://api.github.com/repos/lap1817/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/lap1817/synapse/downloads", "issues_url": "https://api.github.com/repos/lap1817/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/lap1817/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/lap1817/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/lap1817/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/lap1817/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/lap1817/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/lap1817/synapse/deployments", "created_at": "2018-01-13T00:11:28Z", "updated_at": "2018-01-13T00:11:30Z", "pushed_at": "2018-01-13T00:21:21Z", "git_url": "git://github.com/lap1817/synapse.git", "ssh_url": "git@github.com:lap1817/synapse.git", "clone_url": "https://github.com/lap1817/synapse.git", "svn_url": "https://github.com/lap1817/synapse", "homepage": "", "size": 630, "stargazers_count": 0, "watchers_count": 0, "language": "Ruby", "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": false, "has_pages": false, "forks_count": 0, "mirror_url": null, "archived": false, "open_issues_count": 0, "license": null, "forks": 0, "open_issues": 0, "watchers": 0, "default_branch": "master"}}, "base": {"label": "airbnb:master", "ref": "master", "sha": "c50b6dd5027d068f8acf7196d652eeea4109fbc7", "user": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 6607851, "name": "synapse", "full_name": "airbnb/synapse", "owner": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "private": false, "html_url": "https://github.com/airbnb/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": false, "url": "https://api.github.com/repos/airbnb/synapse", "forks_url": "https://api.github.com/repos/airbnb/synapse/forks", "keys_url": "https://api.github.com/repos/airbnb/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/airbnb/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/airbnb/synapse/teams", "hooks_url": "https://api.github.com/repos/airbnb/synapse/hooks", "issue_events_url": "https://api.github.com/repos/airbnb/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/airbnb/synapse/events", "assignees_url": "https://api.github.com/repos/airbnb/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/airbnb/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/airbnb/synapse/tags", "blobs_url": "https://api.github.com/repos/airbnb/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/airbnb/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/airbnb/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/airbnb/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/airbnb/synapse/languages", "stargazers_url": "https://api.github.com/repos/airbnb/synapse/stargazers", "contributors_url": "https://api.github.com/repos/airbnb/synapse/contributors", "subscribers_url": "https://api.github.com/repos/airbnb/synapse/subscribers", "subscription_url": "https://api.github.com/repos/airbnb/synapse/subscription", "commits_url": "https://api.github.com/repos/airbnb/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/airbnb/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/airbnb/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/airbnb/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/airbnb/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/airbnb/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/airbnb/synapse/merges", "archive_url": "https://api.github.com/repos/airbnb/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/airbnb/synapse/downloads", "issues_url": "https://api.github.com/repos/airbnb/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/airbnb/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/airbnb/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/airbnb/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/airbnb/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/airbnb/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/airbnb/synapse/deployments", "created_at": "2012-11-09T03:03:06Z", "updated_at": "2018-01-22T12:26:59Z", "pushed_at": "2018-01-13T00:21:50Z", "git_url": "git://github.com/airbnb/synapse.git", "ssh_url": "git@github.com:airbnb/synapse.git", "clone_url": "https://github.com/airbnb/synapse.git", "svn_url": "https://github.com/airbnb/synapse", "homepage": "", "size": 630, "stargazers_count": 1753, "watchers_count": 1753, "language": "Ruby", "has_issues": true, "has_projects": false, "has_downloads": true, "has_wiki": false, "has_pages": false, "forks_count": 237, "mirror_url": null, "archived": false, "open_issues_count": 47, "license": {"key": "mit", "name": "MIT License", "spdx_id": "MIT", "url": "https://api.github.com/licenses/mit"}, "forks": 237, "open_issues": 47, "watchers": 1753, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/248"}, "html": {"href": "https://github.com/airbnb/synapse/pull/248"}, "issue": {"href": "https://api.github.com/repos/airbnb/synapse/issues/248"}, "comments": {"href": "https://api.github.com/repos/airbnb/synapse/issues/248/comments"}, "review_comments": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/248/comments"}, "review_comment": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/248/commits"}, "statuses": {"href": "https://api.github.com/repos/airbnb/synapse/statuses/45da178f13e3a0f9b5ab1a9498d3c1522a84a134"}}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/231", "id": 114041153, "html_url": "https://github.com/airbnb/synapse/pull/231", "diff_url": "https://github.com/airbnb/synapse/pull/231.diff", "patch_url": "https://github.com/airbnb/synapse/pull/231.patch", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/231", "number": 231, "state": "open", "locked": false, "title": "Adding tag_hash functionality to ec2tag watcher. ", "user": {"login": "microwavedboy", "id": 723391, "avatar_url": "https://avatars2.githubusercontent.com/u/723391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/microwavedboy", "html_url": "https://github.com/microwavedboy", "followers_url": "https://api.github.com/users/microwavedboy/followers", "following_url": "https://api.github.com/users/microwavedboy/following{/other_user}", "gists_url": "https://api.github.com/users/microwavedboy/gists{/gist_id}", "starred_url": "https://api.github.com/users/microwavedboy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/microwavedboy/subscriptions", "organizations_url": "https://api.github.com/users/microwavedboy/orgs", "repos_url": "https://api.github.com/users/microwavedboy/repos", "events_url": "https://api.github.com/users/microwavedboy/events{/privacy}", "received_events_url": "https://api.github.com/users/microwavedboy/received_events", "type": "User", "site_admin": false}, "body": "Migrated to v2 of AWS-SDK\r\nUpdated rspec tests\r\nUpdated README.md to cover new functionality\r\n\r\nThis adds the ability to define a \"tag_hash\" key in the options block for the ec2tag watcher.\r\n\r\nI had the use case of wanting to target only the intersection of two tags -- such as \r\n```\r\ntag_hash:\r\n  environment: staging\r\n  some_service: installed\r\n```\r\n\r\nAnd the existing watcher functionality did not suffice. \r\n\r\nThis is backwards compatible with existing synapse.yaml configuration files (and the tag_name/tag_value keys for ec2tag)\r\n\r\nCheers,\r\nAlex", "created_at": "2017-04-03T23:06:14Z", "updated_at": "2017-04-19T16:06:00Z", "closed_at": null, "merged_at": null, "merge_commit_sha": "70b3de5d63093a49f759eb39ff3da1a3b654ae4c", "assignee": null, "assignees": [], "requested_reviewers": [], "milestone": null, "commits_url": "https://api.github.com/repos/airbnb/synapse/pulls/231/commits", "review_comments_url": "https://api.github.com/repos/airbnb/synapse/pulls/231/comments", "review_comment_url": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/231/comments", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/359f1546e326a643e6c60d4915eaa5d5894b9861", "head": {"label": "microwavedboy:master", "ref": "master", "sha": "359f1546e326a643e6c60d4915eaa5d5894b9861", "user": {"login": "microwavedboy", "id": 723391, "avatar_url": "https://avatars2.githubusercontent.com/u/723391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/microwavedboy", "html_url": "https://github.com/microwavedboy", "followers_url": "https://api.github.com/users/microwavedboy/followers", "following_url": "https://api.github.com/users/microwavedboy/following{/other_user}", "gists_url": "https://api.github.com/users/microwavedboy/gists{/gist_id}", "starred_url": "https://api.github.com/users/microwavedboy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/microwavedboy/subscriptions", "organizations_url": "https://api.github.com/users/microwavedboy/orgs", "repos_url": "https://api.github.com/users/microwavedboy/repos", "events_url": "https://api.github.com/users/microwavedboy/events{/privacy}", "received_events_url": "https://api.github.com/users/microwavedboy/received_events", "type": "User", "site_admin": false}, "repo": {"id": 86848299, "name": "synapse", "full_name": "microwavedboy/synapse", "owner": {"login": "microwavedboy", "id": 723391, "avatar_url": "https://avatars2.githubusercontent.com/u/723391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/microwavedboy", "html_url": "https://github.com/microwavedboy", "followers_url": "https://api.github.com/users/microwavedboy/followers", "following_url": "https://api.github.com/users/microwavedboy/following{/other_user}", "gists_url": "https://api.github.com/users/microwavedboy/gists{/gist_id}", "starred_url": "https://api.github.com/users/microwavedboy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/microwavedboy/subscriptions", "organizations_url": "https://api.github.com/users/microwavedboy/orgs", "repos_url": "https://api.github.com/users/microwavedboy/repos", "events_url": "https://api.github.com/users/microwavedboy/events{/privacy}", "received_events_url": "https://api.github.com/users/microwavedboy/received_events", "type": "User", "site_admin": false}, "private": false, "html_url": "https://github.com/microwavedboy/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": true, "url": "https://api.github.com/repos/microwavedboy/synapse", "forks_url": "https://api.github.com/repos/microwavedboy/synapse/forks", "keys_url": "https://api.github.com/repos/microwavedboy/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/microwavedboy/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/microwavedboy/synapse/teams", "hooks_url": "https://api.github.com/repos/microwavedboy/synapse/hooks", "issue_events_url": "https://api.github.com/repos/microwavedboy/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/microwavedboy/synapse/events", "assignees_url": "https://api.github.com/repos/microwavedboy/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/microwavedboy/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/microwavedboy/synapse/tags", "blobs_url": "https://api.github.com/repos/microwavedboy/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/microwavedboy/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/microwavedboy/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/microwavedboy/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/microwavedboy/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/microwavedboy/synapse/languages", "stargazers_url": "https://api.github.com/repos/microwavedboy/synapse/stargazers", "contributors_url": "https://api.github.com/repos/microwavedboy/synapse/contributors", "subscribers_url": "https://api.github.com/repos/microwavedboy/synapse/subscribers", "subscription_url": "https://api.github.com/repos/microwavedboy/synapse/subscription", "commits_url": "https://api.github.com/repos/microwavedboy/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/microwavedboy/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/microwavedboy/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/microwavedboy/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/microwavedboy/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/microwavedboy/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/microwavedboy/synapse/merges", "archive_url": "https://api.github.com/repos/microwavedboy/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/microwavedboy/synapse/downloads", "issues_url": "https://api.github.com/repos/microwavedboy/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/microwavedboy/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/microwavedboy/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/microwavedboy/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/microwavedboy/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/microwavedboy/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/microwavedboy/synapse/deployments", "created_at": "2017-03-31T18:21:42Z", "updated_at": "2017-03-31T18:21:43Z", "pushed_at": "2017-04-03T23:36:17Z", "git_url": "git://github.com/microwavedboy/synapse.git", "ssh_url": "git@github.com:microwavedboy/synapse.git", "clone_url": "https://github.com/microwavedboy/synapse.git", "svn_url": "https://github.com/microwavedboy/synapse", "homepage": "", "size": 578, "stargazers_count": 0, "watchers_count": 0, "language": "Ruby", "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "forks_count": 0, "mirror_url": null, "archived": false, "open_issues_count": 0, "license": null, "forks": 0, "open_issues": 0, "watchers": 0, "default_branch": "master"}}, "base": {"label": "airbnb:master", "ref": "master", "sha": "f3774aab6e73e55a130f6d2fa16dcced68dbafca", "user": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 6607851, "name": "synapse", "full_name": "airbnb/synapse", "owner": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "private": false, "html_url": "https://github.com/airbnb/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": false, "url": "https://api.github.com/repos/airbnb/synapse", "forks_url": "https://api.github.com/repos/airbnb/synapse/forks", "keys_url": "https://api.github.com/repos/airbnb/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/airbnb/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/airbnb/synapse/teams", "hooks_url": "https://api.github.com/repos/airbnb/synapse/hooks", "issue_events_url": "https://api.github.com/repos/airbnb/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/airbnb/synapse/events", "assignees_url": "https://api.github.com/repos/airbnb/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/airbnb/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/airbnb/synapse/tags", "blobs_url": "https://api.github.com/repos/airbnb/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/airbnb/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/airbnb/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/airbnb/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/airbnb/synapse/languages", "stargazers_url": "https://api.github.com/repos/airbnb/synapse/stargazers", "contributors_url": "https://api.github.com/repos/airbnb/synapse/contributors", "subscribers_url": "https://api.github.com/repos/airbnb/synapse/subscribers", "subscription_url": "https://api.github.com/repos/airbnb/synapse/subscription", "commits_url": "https://api.github.com/repos/airbnb/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/airbnb/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/airbnb/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/airbnb/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/airbnb/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/airbnb/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/airbnb/synapse/merges", "archive_url": "https://api.github.com/repos/airbnb/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/airbnb/synapse/downloads", "issues_url": "https://api.github.com/repos/airbnb/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/airbnb/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/airbnb/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/airbnb/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/airbnb/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/airbnb/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/airbnb/synapse/deployments", "created_at": "2012-11-09T03:03:06Z", "updated_at": "2018-01-22T12:26:59Z", "pushed_at": "2018-01-13T00:21:50Z", "git_url": "git://github.com/airbnb/synapse.git", "ssh_url": "git@github.com:airbnb/synapse.git", "clone_url": "https://github.com/airbnb/synapse.git", "svn_url": "https://github.com/airbnb/synapse", "homepage": "", "size": 630, "stargazers_count": 1753, "watchers_count": 1753, "language": "Ruby", "has_issues": true, "has_projects": false, "has_downloads": true, "has_wiki": false, "has_pages": false, "forks_count": 237, "mirror_url": null, "archived": false, "open_issues_count": 47, "license": {"key": "mit", "name": "MIT License", "spdx_id": "MIT", "url": "https://api.github.com/licenses/mit"}, "forks": 237, "open_issues": 47, "watchers": 1753, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/231"}, "html": {"href": "https://github.com/airbnb/synapse/pull/231"}, "issue": {"href": "https://api.github.com/repos/airbnb/synapse/issues/231"}, "comments": {"href": "https://api.github.com/repos/airbnb/synapse/issues/231/comments"}, "review_comments": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/231/comments"}, "review_comment": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/231/commits"}, "statuses": {"href": "https://api.github.com/repos/airbnb/synapse/statuses/359f1546e326a643e6c60d4915eaa5d5894b9861"}}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/221", "id": 106380506, "html_url": "https://github.com/airbnb/synapse/pull/221", "diff_url": "https://github.com/airbnb/synapse/pull/221.diff", "patch_url": "https://github.com/airbnb/synapse/pull/221.patch", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/221", "number": 221, "state": "open", "locked": false, "title": "Adds Docker watcher ability to use images without tags", "user": {"login": "merimna", "id": 3598983, "avatar_url": "https://avatars2.githubusercontent.com/u/3598983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/merimna", "html_url": "https://github.com/merimna", "followers_url": "https://api.github.com/users/merimna/followers", "following_url": "https://api.github.com/users/merimna/following{/other_user}", "gists_url": "https://api.github.com/users/merimna/gists{/gist_id}", "starred_url": "https://api.github.com/users/merimna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/merimna/subscriptions", "organizations_url": "https://api.github.com/users/merimna/orgs", "repos_url": "https://api.github.com/users/merimna/repos", "events_url": "https://api.github.com/users/merimna/events{/privacy}", "received_events_url": "https://api.github.com/users/merimna/received_events", "type": "User", "site_admin": false}, "body": "Really useful for local dev where an image might not have a tag yet.\r\n\r\nThe fix here was to use `split` instead of `rpartition` because `rpartition` has some unexpected behavior when there is no match.\r\n\r\n```\r\n\"foo:bar\".rpartition(\":\")    # [\"foo\", \":\", \"bar\"]\r\n\r\n\"foo\".rpartition(\":\")        # [\"\", \"\", \"foo\"]\r\n```", "created_at": "2017-02-15T19:22:04Z", "updated_at": "2017-02-15T19:22:04Z", "closed_at": null, "merged_at": null, "merge_commit_sha": "1f9adbb0f5501cdd587899391dbbe561f8349627", "assignee": null, "assignees": [], "requested_reviewers": [], "milestone": null, "commits_url": "https://api.github.com/repos/airbnb/synapse/pulls/221/commits", "review_comments_url": "https://api.github.com/repos/airbnb/synapse/pulls/221/comments", "review_comment_url": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/221/comments", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/1cba0a1f142d7aaf34ef2856121d5ca43807446a", "head": {"label": "merimna:docker-image-no-tag", "ref": "docker-image-no-tag", "sha": "1cba0a1f142d7aaf34ef2856121d5ca43807446a", "user": {"login": "merimna", "id": 3598983, "avatar_url": "https://avatars2.githubusercontent.com/u/3598983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/merimna", "html_url": "https://github.com/merimna", "followers_url": "https://api.github.com/users/merimna/followers", "following_url": "https://api.github.com/users/merimna/following{/other_user}", "gists_url": "https://api.github.com/users/merimna/gists{/gist_id}", "starred_url": "https://api.github.com/users/merimna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/merimna/subscriptions", "organizations_url": "https://api.github.com/users/merimna/orgs", "repos_url": "https://api.github.com/users/merimna/repos", "events_url": "https://api.github.com/users/merimna/events{/privacy}", "received_events_url": "https://api.github.com/users/merimna/received_events", "type": "User", "site_admin": false}, "repo": {"id": 82091588, "name": "synapse", "full_name": "merimna/synapse", "owner": {"login": "merimna", "id": 3598983, "avatar_url": "https://avatars2.githubusercontent.com/u/3598983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/merimna", "html_url": "https://github.com/merimna", "followers_url": "https://api.github.com/users/merimna/followers", "following_url": "https://api.github.com/users/merimna/following{/other_user}", "gists_url": "https://api.github.com/users/merimna/gists{/gist_id}", "starred_url": "https://api.github.com/users/merimna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/merimna/subscriptions", "organizations_url": "https://api.github.com/users/merimna/orgs", "repos_url": "https://api.github.com/users/merimna/repos", "events_url": "https://api.github.com/users/merimna/events{/privacy}", "received_events_url": "https://api.github.com/users/merimna/received_events", "type": "User", "site_admin": false}, "private": false, "html_url": "https://github.com/merimna/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": true, "url": "https://api.github.com/repos/merimna/synapse", "forks_url": "https://api.github.com/repos/merimna/synapse/forks", "keys_url": "https://api.github.com/repos/merimna/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/merimna/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/merimna/synapse/teams", "hooks_url": "https://api.github.com/repos/merimna/synapse/hooks", "issue_events_url": "https://api.github.com/repos/merimna/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/merimna/synapse/events", "assignees_url": "https://api.github.com/repos/merimna/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/merimna/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/merimna/synapse/tags", "blobs_url": "https://api.github.com/repos/merimna/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/merimna/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/merimna/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/merimna/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/merimna/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/merimna/synapse/languages", "stargazers_url": "https://api.github.com/repos/merimna/synapse/stargazers", "contributors_url": "https://api.github.com/repos/merimna/synapse/contributors", "subscribers_url": "https://api.github.com/repos/merimna/synapse/subscribers", "subscription_url": "https://api.github.com/repos/merimna/synapse/subscription", "commits_url": "https://api.github.com/repos/merimna/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/merimna/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/merimna/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/merimna/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/merimna/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/merimna/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/merimna/synapse/merges", "archive_url": "https://api.github.com/repos/merimna/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/merimna/synapse/downloads", "issues_url": "https://api.github.com/repos/merimna/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/merimna/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/merimna/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/merimna/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/merimna/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/merimna/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/merimna/synapse/deployments", "created_at": "2017-02-15T18:19:32Z", "updated_at": "2017-02-15T18:19:34Z", "pushed_at": "2017-02-15T19:17:57Z", "git_url": "git://github.com/merimna/synapse.git", "ssh_url": "git@github.com:merimna/synapse.git", "clone_url": "https://github.com/merimna/synapse.git", "svn_url": "https://github.com/merimna/synapse", "homepage": "", "size": 571, "stargazers_count": 0, "watchers_count": 0, "language": "Ruby", "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "forks_count": 0, "mirror_url": null, "archived": false, "open_issues_count": 0, "license": null, "forks": 0, "open_issues": 0, "watchers": 0, "default_branch": "master"}}, "base": {"label": "airbnb:master", "ref": "master", "sha": "36114b41f62b8bce61d1bfedbd089ec875851332", "user": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 6607851, "name": "synapse", "full_name": "airbnb/synapse", "owner": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "private": false, "html_url": "https://github.com/airbnb/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": false, "url": "https://api.github.com/repos/airbnb/synapse", "forks_url": "https://api.github.com/repos/airbnb/synapse/forks", "keys_url": "https://api.github.com/repos/airbnb/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/airbnb/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/airbnb/synapse/teams", "hooks_url": "https://api.github.com/repos/airbnb/synapse/hooks", "issue_events_url": "https://api.github.com/repos/airbnb/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/airbnb/synapse/events", "assignees_url": "https://api.github.com/repos/airbnb/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/airbnb/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/airbnb/synapse/tags", "blobs_url": "https://api.github.com/repos/airbnb/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/airbnb/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/airbnb/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/airbnb/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/airbnb/synapse/languages", "stargazers_url": "https://api.github.com/repos/airbnb/synapse/stargazers", "contributors_url": "https://api.github.com/repos/airbnb/synapse/contributors", "subscribers_url": "https://api.github.com/repos/airbnb/synapse/subscribers", "subscription_url": "https://api.github.com/repos/airbnb/synapse/subscription", "commits_url": "https://api.github.com/repos/airbnb/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/airbnb/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/airbnb/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/airbnb/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/airbnb/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/airbnb/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/airbnb/synapse/merges", "archive_url": "https://api.github.com/repos/airbnb/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/airbnb/synapse/downloads", "issues_url": "https://api.github.com/repos/airbnb/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/airbnb/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/airbnb/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/airbnb/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/airbnb/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/airbnb/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/airbnb/synapse/deployments", "created_at": "2012-11-09T03:03:06Z", "updated_at": "2018-01-22T12:26:59Z", "pushed_at": "2018-01-13T00:21:50Z", "git_url": "git://github.com/airbnb/synapse.git", "ssh_url": "git@github.com:airbnb/synapse.git", "clone_url": "https://github.com/airbnb/synapse.git", "svn_url": "https://github.com/airbnb/synapse", "homepage": "", "size": 630, "stargazers_count": 1753, "watchers_count": 1753, "language": "Ruby", "has_issues": true, "has_projects": false, "has_downloads": true, "has_wiki": false, "has_pages": false, "forks_count": 237, "mirror_url": null, "archived": false, "open_issues_count": 47, "license": {"key": "mit", "name": "MIT License", "spdx_id": "MIT", "url": "https://api.github.com/licenses/mit"}, "forks": 237, "open_issues": 47, "watchers": 1753, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/221"}, "html": {"href": "https://github.com/airbnb/synapse/pull/221"}, "issue": {"href": "https://api.github.com/repos/airbnb/synapse/issues/221"}, "comments": {"href": "https://api.github.com/repos/airbnb/synapse/issues/221/comments"}, "review_comments": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/221/comments"}, "review_comment": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/221/commits"}, "statuses": {"href": "https://api.github.com/repos/airbnb/synapse/statuses/1cba0a1f142d7aaf34ef2856121d5ca43807446a"}}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/217", "id": 96425301, "html_url": "https://github.com/airbnb/synapse/pull/217", "diff_url": "https://github.com/airbnb/synapse/pull/217.diff", "patch_url": "https://github.com/airbnb/synapse/pull/217.patch", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/217", "number": 217, "state": "open", "locked": false, "title": "Add watcher for YARN application that was deploy with Apache Slider.", "user": {"login": "GrigorievNick", "id": 16338643, "avatar_url": "https://avatars3.githubusercontent.com/u/16338643?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GrigorievNick", "html_url": "https://github.com/GrigorievNick", "followers_url": "https://api.github.com/users/GrigorievNick/followers", "following_url": "https://api.github.com/users/GrigorievNick/following{/other_user}", "gists_url": "https://api.github.com/users/GrigorievNick/gists{/gist_id}", "starred_url": "https://api.github.com/users/GrigorievNick/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GrigorievNick/subscriptions", "organizations_url": "https://api.github.com/users/GrigorievNick/orgs", "repos_url": "https://api.github.com/users/GrigorievNick/repos", "events_url": "https://api.github.com/users/GrigorievNick/events{/privacy}", "received_events_url": "https://api.github.com/users/GrigorievNick/received_events", "type": "User", "site_admin": false}, "body": "Checked in production of Playtech with 2.7.2 YARN and slide 0.91 on HDP 2.5.\r\nChosen application done base on slider publish tags.\r\nMain goal add service discovery for exports per container.", "created_at": "2016-12-04T08:03:46Z", "updated_at": "2016-12-05T09:03:36Z", "closed_at": null, "merged_at": null, "merge_commit_sha": "3134e246a4c13e63f0c93045c403034b52038759", "assignee": null, "assignees": [], "requested_reviewers": [], "milestone": null, "commits_url": "https://api.github.com/repos/airbnb/synapse/pulls/217/commits", "review_comments_url": "https://api.github.com/repos/airbnb/synapse/pulls/217/comments", "review_comment_url": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/217/comments", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/8e2af76b8fefa733294df34a61dd269fb8ab7ee8", "head": {"label": "GrigorievNick:yarn-service-registry-with-slider", "ref": "yarn-service-registry-with-slider", "sha": "8e2af76b8fefa733294df34a61dd269fb8ab7ee8", "user": {"login": "GrigorievNick", "id": 16338643, "avatar_url": "https://avatars3.githubusercontent.com/u/16338643?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GrigorievNick", "html_url": "https://github.com/GrigorievNick", "followers_url": "https://api.github.com/users/GrigorievNick/followers", "following_url": "https://api.github.com/users/GrigorievNick/following{/other_user}", "gists_url": "https://api.github.com/users/GrigorievNick/gists{/gist_id}", "starred_url": "https://api.github.com/users/GrigorievNick/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GrigorievNick/subscriptions", "organizations_url": "https://api.github.com/users/GrigorievNick/orgs", "repos_url": "https://api.github.com/users/GrigorievNick/repos", "events_url": "https://api.github.com/users/GrigorievNick/events{/privacy}", "received_events_url": "https://api.github.com/users/GrigorievNick/received_events", "type": "User", "site_admin": false}, "repo": {"id": 75378254, "name": "synapse", "full_name": "GrigorievNick/synapse", "owner": {"login": "GrigorievNick", "id": 16338643, "avatar_url": "https://avatars3.githubusercontent.com/u/16338643?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GrigorievNick", "html_url": "https://github.com/GrigorievNick", "followers_url": "https://api.github.com/users/GrigorievNick/followers", "following_url": "https://api.github.com/users/GrigorievNick/following{/other_user}", "gists_url": "https://api.github.com/users/GrigorievNick/gists{/gist_id}", "starred_url": "https://api.github.com/users/GrigorievNick/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GrigorievNick/subscriptions", "organizations_url": "https://api.github.com/users/GrigorievNick/orgs", "repos_url": "https://api.github.com/users/GrigorievNick/repos", "events_url": "https://api.github.com/users/GrigorievNick/events{/privacy}", "received_events_url": "https://api.github.com/users/GrigorievNick/received_events", "type": "User", "site_admin": false}, "private": false, "html_url": "https://github.com/GrigorievNick/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": true, "url": "https://api.github.com/repos/GrigorievNick/synapse", "forks_url": "https://api.github.com/repos/GrigorievNick/synapse/forks", "keys_url": "https://api.github.com/repos/GrigorievNick/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/GrigorievNick/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/GrigorievNick/synapse/teams", "hooks_url": "https://api.github.com/repos/GrigorievNick/synapse/hooks", "issue_events_url": "https://api.github.com/repos/GrigorievNick/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/GrigorievNick/synapse/events", "assignees_url": "https://api.github.com/repos/GrigorievNick/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/GrigorievNick/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/GrigorievNick/synapse/tags", "blobs_url": "https://api.github.com/repos/GrigorievNick/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/GrigorievNick/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/GrigorievNick/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/GrigorievNick/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/GrigorievNick/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/GrigorievNick/synapse/languages", "stargazers_url": "https://api.github.com/repos/GrigorievNick/synapse/stargazers", "contributors_url": "https://api.github.com/repos/GrigorievNick/synapse/contributors", "subscribers_url": "https://api.github.com/repos/GrigorievNick/synapse/subscribers", "subscription_url": "https://api.github.com/repos/GrigorievNick/synapse/subscription", "commits_url": "https://api.github.com/repos/GrigorievNick/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/GrigorievNick/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/GrigorievNick/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/GrigorievNick/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/GrigorievNick/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/GrigorievNick/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/GrigorievNick/synapse/merges", "archive_url": "https://api.github.com/repos/GrigorievNick/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/GrigorievNick/synapse/downloads", "issues_url": "https://api.github.com/repos/GrigorievNick/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/GrigorievNick/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/GrigorievNick/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/GrigorievNick/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/GrigorievNick/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/GrigorievNick/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/GrigorievNick/synapse/deployments", "created_at": "2016-12-02T08:52:19Z", "updated_at": "2016-12-02T08:52:21Z", "pushed_at": "2016-12-05T09:03:35Z", "git_url": "git://github.com/GrigorievNick/synapse.git", "ssh_url": "git@github.com:GrigorievNick/synapse.git", "clone_url": "https://github.com/GrigorievNick/synapse.git", "svn_url": "https://github.com/GrigorievNick/synapse", "homepage": "", "size": 563, "stargazers_count": 0, "watchers_count": 0, "language": "Ruby", "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "forks_count": 0, "mirror_url": null, "archived": false, "open_issues_count": 0, "license": null, "forks": 0, "open_issues": 0, "watchers": 0, "default_branch": "master"}}, "base": {"label": "airbnb:master", "ref": "master", "sha": "45f4d81e0f858bb3b15956f65d2ce8de492f92bb", "user": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 6607851, "name": "synapse", "full_name": "airbnb/synapse", "owner": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "private": false, "html_url": "https://github.com/airbnb/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": false, "url": "https://api.github.com/repos/airbnb/synapse", "forks_url": "https://api.github.com/repos/airbnb/synapse/forks", "keys_url": "https://api.github.com/repos/airbnb/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/airbnb/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/airbnb/synapse/teams", "hooks_url": "https://api.github.com/repos/airbnb/synapse/hooks", "issue_events_url": "https://api.github.com/repos/airbnb/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/airbnb/synapse/events", "assignees_url": "https://api.github.com/repos/airbnb/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/airbnb/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/airbnb/synapse/tags", "blobs_url": "https://api.github.com/repos/airbnb/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/airbnb/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/airbnb/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/airbnb/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/airbnb/synapse/languages", "stargazers_url": "https://api.github.com/repos/airbnb/synapse/stargazers", "contributors_url": "https://api.github.com/repos/airbnb/synapse/contributors", "subscribers_url": "https://api.github.com/repos/airbnb/synapse/subscribers", "subscription_url": "https://api.github.com/repos/airbnb/synapse/subscription", "commits_url": "https://api.github.com/repos/airbnb/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/airbnb/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/airbnb/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/airbnb/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/airbnb/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/airbnb/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/airbnb/synapse/merges", "archive_url": "https://api.github.com/repos/airbnb/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/airbnb/synapse/downloads", "issues_url": "https://api.github.com/repos/airbnb/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/airbnb/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/airbnb/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/airbnb/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/airbnb/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/airbnb/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/airbnb/synapse/deployments", "created_at": "2012-11-09T03:03:06Z", "updated_at": "2018-01-22T12:26:59Z", "pushed_at": "2018-01-13T00:21:50Z", "git_url": "git://github.com/airbnb/synapse.git", "ssh_url": "git@github.com:airbnb/synapse.git", "clone_url": "https://github.com/airbnb/synapse.git", "svn_url": "https://github.com/airbnb/synapse", "homepage": "", "size": 630, "stargazers_count": 1753, "watchers_count": 1753, "language": "Ruby", "has_issues": true, "has_projects": false, "has_downloads": true, "has_wiki": false, "has_pages": false, "forks_count": 237, "mirror_url": null, "archived": false, "open_issues_count": 47, "license": {"key": "mit", "name": "MIT License", "spdx_id": "MIT", "url": "https://api.github.com/licenses/mit"}, "forks": 237, "open_issues": 47, "watchers": 1753, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/217"}, "html": {"href": "https://github.com/airbnb/synapse/pull/217"}, "issue": {"href": "https://api.github.com/repos/airbnb/synapse/issues/217"}, "comments": {"href": "https://api.github.com/repos/airbnb/synapse/issues/217/comments"}, "review_comments": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/217/comments"}, "review_comment": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/217/commits"}, "statuses": {"href": "https://api.github.com/repos/airbnb/synapse/statuses/8e2af76b8fefa733294df34a61dd269fb8ab7ee8"}}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/209", "id": 84742774, "html_url": "https://github.com/airbnb/synapse/pull/209", "diff_url": "https://github.com/airbnb/synapse/pull/209.diff", "patch_url": "https://github.com/airbnb/synapse/pull/209.patch", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/209", "number": 209, "state": "open", "locked": false, "title": "Add splay startup jitter to haproxy startup", "user": {"login": "solarkennedy", "id": 370205, "avatar_url": "https://avatars0.githubusercontent.com/u/370205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/solarkennedy", "html_url": "https://github.com/solarkennedy", "followers_url": "https://api.github.com/users/solarkennedy/followers", "following_url": "https://api.github.com/users/solarkennedy/following{/other_user}", "gists_url": "https://api.github.com/users/solarkennedy/gists{/gist_id}", "starred_url": "https://api.github.com/users/solarkennedy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/solarkennedy/subscriptions", "organizations_url": "https://api.github.com/users/solarkennedy/orgs", "repos_url": "https://api.github.com/users/solarkennedy/repos", "events_url": "https://api.github.com/users/solarkennedy/events{/privacy}", "received_events_url": "https://api.github.com/users/solarkennedy/received_events", "type": "User", "site_admin": false}, "body": "Sometimes all the synapses are restarted globally across a fleet, so I would like their startup to be jittered just like their normal `next_restart` is jittered during a normal haproxy restart. I believe this change will do that.\n", "created_at": "2016-09-10T03:07:47Z", "updated_at": "2016-10-18T02:57:27Z", "closed_at": null, "merged_at": null, "merge_commit_sha": "d3cef0fada30b53ccd1ac2535cb50c839901336a", "assignee": null, "assignees": [], "requested_reviewers": [], "milestone": null, "commits_url": "https://api.github.com/repos/airbnb/synapse/pulls/209/commits", "review_comments_url": "https://api.github.com/repos/airbnb/synapse/pulls/209/comments", "review_comment_url": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/209/comments", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/f0482f86f61c389c348b51de7f0fae30e89b20e1", "head": {"label": "solarkennedy:splayd_haproxy_startup", "ref": "splayd_haproxy_startup", "sha": "f0482f86f61c389c348b51de7f0fae30e89b20e1", "user": {"login": "solarkennedy", "id": 370205, "avatar_url": "https://avatars0.githubusercontent.com/u/370205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/solarkennedy", "html_url": "https://github.com/solarkennedy", "followers_url": "https://api.github.com/users/solarkennedy/followers", "following_url": "https://api.github.com/users/solarkennedy/following{/other_user}", "gists_url": "https://api.github.com/users/solarkennedy/gists{/gist_id}", "starred_url": "https://api.github.com/users/solarkennedy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/solarkennedy/subscriptions", "organizations_url": "https://api.github.com/users/solarkennedy/orgs", "repos_url": "https://api.github.com/users/solarkennedy/repos", "events_url": "https://api.github.com/users/solarkennedy/events{/privacy}", "received_events_url": "https://api.github.com/users/solarkennedy/received_events", "type": "User", "site_admin": false}, "repo": {"id": 67847077, "name": "synapse", "full_name": "solarkennedy/synapse", "owner": {"login": "solarkennedy", "id": 370205, "avatar_url": "https://avatars0.githubusercontent.com/u/370205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/solarkennedy", "html_url": "https://github.com/solarkennedy", "followers_url": "https://api.github.com/users/solarkennedy/followers", "following_url": "https://api.github.com/users/solarkennedy/following{/other_user}", "gists_url": "https://api.github.com/users/solarkennedy/gists{/gist_id}", "starred_url": "https://api.github.com/users/solarkennedy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/solarkennedy/subscriptions", "organizations_url": "https://api.github.com/users/solarkennedy/orgs", "repos_url": "https://api.github.com/users/solarkennedy/repos", "events_url": "https://api.github.com/users/solarkennedy/events{/privacy}", "received_events_url": "https://api.github.com/users/solarkennedy/received_events", "type": "User", "site_admin": false}, "private": false, "html_url": "https://github.com/solarkennedy/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": true, "url": "https://api.github.com/repos/solarkennedy/synapse", "forks_url": "https://api.github.com/repos/solarkennedy/synapse/forks", "keys_url": "https://api.github.com/repos/solarkennedy/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/solarkennedy/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/solarkennedy/synapse/teams", "hooks_url": "https://api.github.com/repos/solarkennedy/synapse/hooks", "issue_events_url": "https://api.github.com/repos/solarkennedy/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/solarkennedy/synapse/events", "assignees_url": "https://api.github.com/repos/solarkennedy/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/solarkennedy/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/solarkennedy/synapse/tags", "blobs_url": "https://api.github.com/repos/solarkennedy/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/solarkennedy/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/solarkennedy/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/solarkennedy/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/solarkennedy/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/solarkennedy/synapse/languages", "stargazers_url": "https://api.github.com/repos/solarkennedy/synapse/stargazers", "contributors_url": "https://api.github.com/repos/solarkennedy/synapse/contributors", "subscribers_url": "https://api.github.com/repos/solarkennedy/synapse/subscribers", "subscription_url": "https://api.github.com/repos/solarkennedy/synapse/subscription", "commits_url": "https://api.github.com/repos/solarkennedy/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/solarkennedy/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/solarkennedy/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/solarkennedy/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/solarkennedy/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/solarkennedy/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/solarkennedy/synapse/merges", "archive_url": "https://api.github.com/repos/solarkennedy/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/solarkennedy/synapse/downloads", "issues_url": "https://api.github.com/repos/solarkennedy/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/solarkennedy/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/solarkennedy/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/solarkennedy/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/solarkennedy/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/solarkennedy/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/solarkennedy/synapse/deployments", "created_at": "2016-09-10T02:55:51Z", "updated_at": "2016-09-10T02:55:52Z", "pushed_at": "2016-09-10T03:05:38Z", "git_url": "git://github.com/solarkennedy/synapse.git", "ssh_url": "git@github.com:solarkennedy/synapse.git", "clone_url": "https://github.com/solarkennedy/synapse.git", "svn_url": "https://github.com/solarkennedy/synapse", "homepage": "", "size": 556, "stargazers_count": 0, "watchers_count": 0, "language": "Ruby", "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "forks_count": 0, "mirror_url": null, "archived": false, "open_issues_count": 0, "license": null, "forks": 0, "open_issues": 0, "watchers": 0, "default_branch": "master"}}, "base": {"label": "airbnb:master", "ref": "master", "sha": "e9f6b393bde394f3cbe0c45d6656ac8978e2cb0c", "user": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 6607851, "name": "synapse", "full_name": "airbnb/synapse", "owner": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "private": false, "html_url": "https://github.com/airbnb/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": false, "url": "https://api.github.com/repos/airbnb/synapse", "forks_url": "https://api.github.com/repos/airbnb/synapse/forks", "keys_url": "https://api.github.com/repos/airbnb/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/airbnb/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/airbnb/synapse/teams", "hooks_url": "https://api.github.com/repos/airbnb/synapse/hooks", "issue_events_url": "https://api.github.com/repos/airbnb/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/airbnb/synapse/events", "assignees_url": "https://api.github.com/repos/airbnb/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/airbnb/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/airbnb/synapse/tags", "blobs_url": "https://api.github.com/repos/airbnb/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/airbnb/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/airbnb/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/airbnb/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/airbnb/synapse/languages", "stargazers_url": "https://api.github.com/repos/airbnb/synapse/stargazers", "contributors_url": "https://api.github.com/repos/airbnb/synapse/contributors", "subscribers_url": "https://api.github.com/repos/airbnb/synapse/subscribers", "subscription_url": "https://api.github.com/repos/airbnb/synapse/subscription", "commits_url": "https://api.github.com/repos/airbnb/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/airbnb/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/airbnb/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/airbnb/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/airbnb/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/airbnb/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/airbnb/synapse/merges", "archive_url": "https://api.github.com/repos/airbnb/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/airbnb/synapse/downloads", "issues_url": "https://api.github.com/repos/airbnb/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/airbnb/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/airbnb/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/airbnb/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/airbnb/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/airbnb/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/airbnb/synapse/deployments", "created_at": "2012-11-09T03:03:06Z", "updated_at": "2018-01-22T12:26:59Z", "pushed_at": "2018-01-13T00:21:50Z", "git_url": "git://github.com/airbnb/synapse.git", "ssh_url": "git@github.com:airbnb/synapse.git", "clone_url": "https://github.com/airbnb/synapse.git", "svn_url": "https://github.com/airbnb/synapse", "homepage": "", "size": 630, "stargazers_count": 1753, "watchers_count": 1753, "language": "Ruby", "has_issues": true, "has_projects": false, "has_downloads": true, "has_wiki": false, "has_pages": false, "forks_count": 237, "mirror_url": null, "archived": false, "open_issues_count": 47, "license": {"key": "mit", "name": "MIT License", "spdx_id": "MIT", "url": "https://api.github.com/licenses/mit"}, "forks": 237, "open_issues": 47, "watchers": 1753, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/209"}, "html": {"href": "https://github.com/airbnb/synapse/pull/209"}, "issue": {"href": "https://api.github.com/repos/airbnb/synapse/issues/209"}, "comments": {"href": "https://api.github.com/repos/airbnb/synapse/issues/209/comments"}, "review_comments": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/209/comments"}, "review_comment": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/209/commits"}, "statuses": {"href": "https://api.github.com/repos/airbnb/synapse/statuses/f0482f86f61c389c348b51de7f0fae30e89b20e1"}}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/207", "id": 80707705, "html_url": "https://github.com/airbnb/synapse/pull/207", "diff_url": "https://github.com/airbnb/synapse/pull/207.diff", "patch_url": "https://github.com/airbnb/synapse/pull/207.patch", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/207", "number": 207, "state": "open", "locked": false, "title": "[base watcher] filter on set_backends", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "currently, we are filtering backends when we attempt to retrieve the list of\nbackends. there are a few things wrong with that:\n- we perform the same filter computation repeatedly every time we rebuild the haproxy config\n- we incorrectly restart haproxy even if the set of backends which don't match the filters changes\n- we log the total number of backends discovered, not the number of backends matching the filter\n- it's unclear how the defaults/keep_last logic plays with filters/leader election\n\nthis PR moves the filter/leader election logic to be performed as part of\n`set_backends`. the call to retrieve the backends becomes just an\n`attr_reader`. we don't have to make any spec changes, because we already test\nall of this logic as part of testing `set_backends`\n\nthis change may be backwards-incompatible depending on configuration, because\nthe logic around how default/previous backends are used is different.\npreviously, if no backends match filters (including the default backends) or if\nno backends are elected as leader (including default backends) then we return\nan empty list. after this change is made, we will apply the filters/election\nparameters to just the discovered backends. if these fail election or\nfiltering, then we will return the default backends instead of returning an\nempty list.\n\ni think this change makes things more clear overall. previously, there was no\nmechanism to always return some default set of backends no matter what, and now\nthis mechanism is just the setting of `default_backends`\n\nto: @jtai @jolynch @scarletmeow \n", "created_at": "2016-08-09T22:43:12Z", "updated_at": "2016-08-09T23:03:36Z", "closed_at": null, "merged_at": null, "merge_commit_sha": "d19e3757b8667886bb3024b81b3033ae1488cbc1", "assignee": null, "assignees": [], "requested_reviewers": [], "milestone": null, "commits_url": "https://api.github.com/repos/airbnb/synapse/pulls/207/commits", "review_comments_url": "https://api.github.com/repos/airbnb/synapse/pulls/207/comments", "review_comment_url": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/207/comments", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/76fb380b0aa27a078ff7c32f9bc19d794c954cf9", "head": {"label": "airbnb:filter_on_set", "ref": "filter_on_set", "sha": "76fb380b0aa27a078ff7c32f9bc19d794c954cf9", "user": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 6607851, "name": "synapse", "full_name": "airbnb/synapse", "owner": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "private": false, "html_url": "https://github.com/airbnb/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": false, "url": "https://api.github.com/repos/airbnb/synapse", "forks_url": "https://api.github.com/repos/airbnb/synapse/forks", "keys_url": "https://api.github.com/repos/airbnb/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/airbnb/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/airbnb/synapse/teams", "hooks_url": "https://api.github.com/repos/airbnb/synapse/hooks", "issue_events_url": "https://api.github.com/repos/airbnb/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/airbnb/synapse/events", "assignees_url": "https://api.github.com/repos/airbnb/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/airbnb/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/airbnb/synapse/tags", "blobs_url": "https://api.github.com/repos/airbnb/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/airbnb/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/airbnb/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/airbnb/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/airbnb/synapse/languages", "stargazers_url": "https://api.github.com/repos/airbnb/synapse/stargazers", "contributors_url": "https://api.github.com/repos/airbnb/synapse/contributors", "subscribers_url": "https://api.github.com/repos/airbnb/synapse/subscribers", "subscription_url": "https://api.github.com/repos/airbnb/synapse/subscription", "commits_url": "https://api.github.com/repos/airbnb/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/airbnb/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/airbnb/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/airbnb/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/airbnb/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/airbnb/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/airbnb/synapse/merges", "archive_url": "https://api.github.com/repos/airbnb/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/airbnb/synapse/downloads", "issues_url": "https://api.github.com/repos/airbnb/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/airbnb/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/airbnb/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/airbnb/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/airbnb/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/airbnb/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/airbnb/synapse/deployments", "created_at": "2012-11-09T03:03:06Z", "updated_at": "2018-01-22T12:26:59Z", "pushed_at": "2018-01-13T00:21:50Z", "git_url": "git://github.com/airbnb/synapse.git", "ssh_url": "git@github.com:airbnb/synapse.git", "clone_url": "https://github.com/airbnb/synapse.git", "svn_url": "https://github.com/airbnb/synapse", "homepage": "", "size": 630, "stargazers_count": 1753, "watchers_count": 1753, "language": "Ruby", "has_issues": true, "has_projects": false, "has_downloads": true, "has_wiki": false, "has_pages": false, "forks_count": 237, "mirror_url": null, "archived": false, "open_issues_count": 47, "license": {"key": "mit", "name": "MIT License", "spdx_id": "MIT", "url": "https://api.github.com/licenses/mit"}, "forks": 237, "open_issues": 47, "watchers": 1753, "default_branch": "master"}}, "base": {"label": "airbnb:master", "ref": "master", "sha": "dd892c9aabfb4b790dbd94ff7010bbd3be210b41", "user": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 6607851, "name": "synapse", "full_name": "airbnb/synapse", "owner": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "private": false, "html_url": "https://github.com/airbnb/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": false, "url": "https://api.github.com/repos/airbnb/synapse", "forks_url": "https://api.github.com/repos/airbnb/synapse/forks", "keys_url": "https://api.github.com/repos/airbnb/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/airbnb/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/airbnb/synapse/teams", "hooks_url": "https://api.github.com/repos/airbnb/synapse/hooks", "issue_events_url": "https://api.github.com/repos/airbnb/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/airbnb/synapse/events", "assignees_url": "https://api.github.com/repos/airbnb/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/airbnb/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/airbnb/synapse/tags", "blobs_url": "https://api.github.com/repos/airbnb/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/airbnb/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/airbnb/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/airbnb/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/airbnb/synapse/languages", "stargazers_url": "https://api.github.com/repos/airbnb/synapse/stargazers", "contributors_url": "https://api.github.com/repos/airbnb/synapse/contributors", "subscribers_url": "https://api.github.com/repos/airbnb/synapse/subscribers", "subscription_url": "https://api.github.com/repos/airbnb/synapse/subscription", "commits_url": "https://api.github.com/repos/airbnb/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/airbnb/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/airbnb/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/airbnb/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/airbnb/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/airbnb/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/airbnb/synapse/merges", "archive_url": "https://api.github.com/repos/airbnb/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/airbnb/synapse/downloads", "issues_url": "https://api.github.com/repos/airbnb/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/airbnb/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/airbnb/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/airbnb/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/airbnb/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/airbnb/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/airbnb/synapse/deployments", "created_at": "2012-11-09T03:03:06Z", "updated_at": "2018-01-22T12:26:59Z", "pushed_at": "2018-01-13T00:21:50Z", "git_url": "git://github.com/airbnb/synapse.git", "ssh_url": "git@github.com:airbnb/synapse.git", "clone_url": "https://github.com/airbnb/synapse.git", "svn_url": "https://github.com/airbnb/synapse", "homepage": "", "size": 630, "stargazers_count": 1753, "watchers_count": 1753, "language": "Ruby", "has_issues": true, "has_projects": false, "has_downloads": true, "has_wiki": false, "has_pages": false, "forks_count": 237, "mirror_url": null, "archived": false, "open_issues_count": 47, "license": {"key": "mit", "name": "MIT License", "spdx_id": "MIT", "url": "https://api.github.com/licenses/mit"}, "forks": 237, "open_issues": 47, "watchers": 1753, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/207"}, "html": {"href": "https://github.com/airbnb/synapse/pull/207"}, "issue": {"href": "https://api.github.com/repos/airbnb/synapse/issues/207"}, "comments": {"href": "https://api.github.com/repos/airbnb/synapse/issues/207/comments"}, "review_comments": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/207/comments"}, "review_comment": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/207/commits"}, "statuses": {"href": "https://api.github.com/repos/airbnb/synapse/statuses/76fb380b0aa27a078ff7c32f9bc19d794c954cf9"}}, "author_association": "COLLABORATOR"}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/201", "id": 74150537, "html_url": "https://github.com/airbnb/synapse/pull/201", "diff_url": "https://github.com/airbnb/synapse/pull/201.diff", "patch_url": "https://github.com/airbnb/synapse/pull/201.patch", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/201", "number": 201, "state": "open", "locked": false, "title": "WIP: Standalone mode", "user": {"login": "hashbrowncipher", "id": 124699, "avatar_url": "https://avatars2.githubusercontent.com/u/124699?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hashbrowncipher", "html_url": "https://github.com/hashbrowncipher", "followers_url": "https://api.github.com/users/hashbrowncipher/followers", "following_url": "https://api.github.com/users/hashbrowncipher/following{/other_user}", "gists_url": "https://api.github.com/users/hashbrowncipher/gists{/gist_id}", "starred_url": "https://api.github.com/users/hashbrowncipher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hashbrowncipher/subscriptions", "organizations_url": "https://api.github.com/users/hashbrowncipher/orgs", "repos_url": "https://api.github.com/users/hashbrowncipher/repos", "events_url": "https://api.github.com/users/hashbrowncipher/events{/privacy}", "received_events_url": "https://api.github.com/users/hashbrowncipher/received_events", "type": "User", "site_admin": false}, "body": "@jolynch: this branch implements something we had discussed a little while ago, namely a standalone or \"oneshot\" execution mode for Synapse. This is for situations where you would like to know what information is in Synapse's backing datastore, but you don't want to read it out of the datastore directly in order to preserve separation of concerns. By adding this standalone operation, we can use the same code paths that Synapse would use to read the data.\n\nMy initial use-case is monitoring scripts. I would like to deploy a container with the Synapse gem, and run it as a script that produces a list of backends as output. My monitoring script will process this output, check it for sanity, and report issues to my monitoring system if the results are insane.\n\nThis change makes use of a new method on watchers, that I've called `read`. As far as I can tell, right now watchers don't implement any method which provides the list of backends as output without mutating other state. `read` is designed for that purpose.\n\nSo far I've just touched the Zookeeper watcher. Please review for initial feasibility.\n\nExample invocation:\n\n```\nsynapse_standalone.rb '{\"method\":\"zookeeper\",\"path\":\"/nerve/services/postgres_main_read\",\"hosts\":[\"10.74.4.104:2181\",\"10.74.4.70:2181\",\"10.74.1.43:2181\"]}'\n```\n", "created_at": "2016-06-16T20:54:50Z", "updated_at": "2016-06-16T20:54:50Z", "closed_at": null, "merged_at": null, "merge_commit_sha": "3b175a86b535dc4bb3613fea0e46087709348b74", "assignee": null, "assignees": [], "requested_reviewers": [], "milestone": null, "commits_url": "https://api.github.com/repos/airbnb/synapse/pulls/201/commits", "review_comments_url": "https://api.github.com/repos/airbnb/synapse/pulls/201/comments", "review_comment_url": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/201/comments", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/010722d2f074b6fa14ca2f124388e34a9c4223c2", "head": {"label": "hashbrowncipher:standalone_mode", "ref": "standalone_mode", "sha": "010722d2f074b6fa14ca2f124388e34a9c4223c2", "user": {"login": "hashbrowncipher", "id": 124699, "avatar_url": "https://avatars2.githubusercontent.com/u/124699?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hashbrowncipher", "html_url": "https://github.com/hashbrowncipher", "followers_url": "https://api.github.com/users/hashbrowncipher/followers", "following_url": "https://api.github.com/users/hashbrowncipher/following{/other_user}", "gists_url": "https://api.github.com/users/hashbrowncipher/gists{/gist_id}", "starred_url": "https://api.github.com/users/hashbrowncipher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hashbrowncipher/subscriptions", "organizations_url": "https://api.github.com/users/hashbrowncipher/orgs", "repos_url": "https://api.github.com/users/hashbrowncipher/repos", "events_url": "https://api.github.com/users/hashbrowncipher/events{/privacy}", "received_events_url": "https://api.github.com/users/hashbrowncipher/received_events", "type": "User", "site_admin": false}, "repo": {"id": 51414195, "name": "synapse", "full_name": "hashbrowncipher/synapse", "owner": {"login": "hashbrowncipher", "id": 124699, "avatar_url": "https://avatars2.githubusercontent.com/u/124699?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hashbrowncipher", "html_url": "https://github.com/hashbrowncipher", "followers_url": "https://api.github.com/users/hashbrowncipher/followers", "following_url": "https://api.github.com/users/hashbrowncipher/following{/other_user}", "gists_url": "https://api.github.com/users/hashbrowncipher/gists{/gist_id}", "starred_url": "https://api.github.com/users/hashbrowncipher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hashbrowncipher/subscriptions", "organizations_url": "https://api.github.com/users/hashbrowncipher/orgs", "repos_url": "https://api.github.com/users/hashbrowncipher/repos", "events_url": "https://api.github.com/users/hashbrowncipher/events{/privacy}", "received_events_url": "https://api.github.com/users/hashbrowncipher/received_events", "type": "User", "site_admin": false}, "private": false, "html_url": "https://github.com/hashbrowncipher/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": true, "url": "https://api.github.com/repos/hashbrowncipher/synapse", "forks_url": "https://api.github.com/repos/hashbrowncipher/synapse/forks", "keys_url": "https://api.github.com/repos/hashbrowncipher/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/hashbrowncipher/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/hashbrowncipher/synapse/teams", "hooks_url": "https://api.github.com/repos/hashbrowncipher/synapse/hooks", "issue_events_url": "https://api.github.com/repos/hashbrowncipher/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/hashbrowncipher/synapse/events", "assignees_url": "https://api.github.com/repos/hashbrowncipher/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/hashbrowncipher/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/hashbrowncipher/synapse/tags", "blobs_url": "https://api.github.com/repos/hashbrowncipher/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/hashbrowncipher/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/hashbrowncipher/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/hashbrowncipher/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/hashbrowncipher/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/hashbrowncipher/synapse/languages", "stargazers_url": "https://api.github.com/repos/hashbrowncipher/synapse/stargazers", "contributors_url": "https://api.github.com/repos/hashbrowncipher/synapse/contributors", "subscribers_url": "https://api.github.com/repos/hashbrowncipher/synapse/subscribers", "subscription_url": "https://api.github.com/repos/hashbrowncipher/synapse/subscription", "commits_url": "https://api.github.com/repos/hashbrowncipher/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/hashbrowncipher/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/hashbrowncipher/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/hashbrowncipher/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/hashbrowncipher/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/hashbrowncipher/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/hashbrowncipher/synapse/merges", "archive_url": "https://api.github.com/repos/hashbrowncipher/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/hashbrowncipher/synapse/downloads", "issues_url": "https://api.github.com/repos/hashbrowncipher/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/hashbrowncipher/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/hashbrowncipher/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/hashbrowncipher/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/hashbrowncipher/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/hashbrowncipher/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/hashbrowncipher/synapse/deployments", "created_at": "2016-02-10T01:30:17Z", "updated_at": "2016-02-10T01:30:17Z", "pushed_at": "2016-06-16T20:46:31Z", "git_url": "git://github.com/hashbrowncipher/synapse.git", "ssh_url": "git@github.com:hashbrowncipher/synapse.git", "clone_url": "https://github.com/hashbrowncipher/synapse.git", "svn_url": "https://github.com/hashbrowncipher/synapse", "homepage": "", "size": 494, "stargazers_count": 0, "watchers_count": 0, "language": "Ruby", "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "forks_count": 0, "mirror_url": null, "archived": false, "open_issues_count": 0, "license": null, "forks": 0, "open_issues": 0, "watchers": 0, "default_branch": "master"}}, "base": {"label": "airbnb:master", "ref": "master", "sha": "64ddbbd6140d337d65cf0f31fff9ea004aca779e", "user": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 6607851, "name": "synapse", "full_name": "airbnb/synapse", "owner": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "private": false, "html_url": "https://github.com/airbnb/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": false, "url": "https://api.github.com/repos/airbnb/synapse", "forks_url": "https://api.github.com/repos/airbnb/synapse/forks", "keys_url": "https://api.github.com/repos/airbnb/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/airbnb/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/airbnb/synapse/teams", "hooks_url": "https://api.github.com/repos/airbnb/synapse/hooks", "issue_events_url": "https://api.github.com/repos/airbnb/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/airbnb/synapse/events", "assignees_url": "https://api.github.com/repos/airbnb/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/airbnb/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/airbnb/synapse/tags", "blobs_url": "https://api.github.com/repos/airbnb/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/airbnb/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/airbnb/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/airbnb/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/airbnb/synapse/languages", "stargazers_url": "https://api.github.com/repos/airbnb/synapse/stargazers", "contributors_url": "https://api.github.com/repos/airbnb/synapse/contributors", "subscribers_url": "https://api.github.com/repos/airbnb/synapse/subscribers", "subscription_url": "https://api.github.com/repos/airbnb/synapse/subscription", "commits_url": "https://api.github.com/repos/airbnb/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/airbnb/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/airbnb/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/airbnb/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/airbnb/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/airbnb/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/airbnb/synapse/merges", "archive_url": "https://api.github.com/repos/airbnb/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/airbnb/synapse/downloads", "issues_url": "https://api.github.com/repos/airbnb/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/airbnb/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/airbnb/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/airbnb/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/airbnb/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/airbnb/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/airbnb/synapse/deployments", "created_at": "2012-11-09T03:03:06Z", "updated_at": "2018-01-22T12:26:59Z", "pushed_at": "2018-01-13T00:21:50Z", "git_url": "git://github.com/airbnb/synapse.git", "ssh_url": "git@github.com:airbnb/synapse.git", "clone_url": "https://github.com/airbnb/synapse.git", "svn_url": "https://github.com/airbnb/synapse", "homepage": "", "size": 630, "stargazers_count": 1753, "watchers_count": 1753, "language": "Ruby", "has_issues": true, "has_projects": false, "has_downloads": true, "has_wiki": false, "has_pages": false, "forks_count": 237, "mirror_url": null, "archived": false, "open_issues_count": 47, "license": {"key": "mit", "name": "MIT License", "spdx_id": "MIT", "url": "https://api.github.com/licenses/mit"}, "forks": 237, "open_issues": 47, "watchers": 1753, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/201"}, "html": {"href": "https://github.com/airbnb/synapse/pull/201"}, "issue": {"href": "https://api.github.com/repos/airbnb/synapse/issues/201"}, "comments": {"href": "https://api.github.com/repos/airbnb/synapse/issues/201/comments"}, "review_comments": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/201/comments"}, "review_comment": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/201/commits"}, "statuses": {"href": "https://api.github.com/repos/airbnb/synapse/statuses/010722d2f074b6fa14ca2f124388e34a9c4223c2"}}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/184", "id": 65845285, "html_url": "https://github.com/airbnb/synapse/pull/184", "diff_url": "https://github.com/airbnb/synapse/pull/184.diff", "patch_url": "https://github.com/airbnb/synapse/pull/184.patch", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/184", "number": 184, "state": "open", "locked": false, "title": "[WIP] ASG watcher", "user": {"login": "tomfitzhenry", "id": 61303, "avatar_url": "https://avatars3.githubusercontent.com/u/61303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomfitzhenry", "html_url": "https://github.com/tomfitzhenry", "followers_url": "https://api.github.com/users/tomfitzhenry/followers", "following_url": "https://api.github.com/users/tomfitzhenry/following{/other_user}", "gists_url": "https://api.github.com/users/tomfitzhenry/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomfitzhenry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomfitzhenry/subscriptions", "organizations_url": "https://api.github.com/users/tomfitzhenry/orgs", "repos_url": "https://api.github.com/users/tomfitzhenry/repos", "events_url": "https://api.github.com/users/tomfitzhenry/events{/privacy}", "received_events_url": "https://api.github.com/users/tomfitzhenry/received_events", "type": "User", "site_admin": false}, "body": "Early feedback welcome.\n\nCode mostly copied from ec2tag watcher.\n\nIssue #182 \n", "created_at": "2016-04-08T20:49:06Z", "updated_at": "2016-05-26T23:16:49Z", "closed_at": null, "merged_at": null, "merge_commit_sha": "243c37617e0f236b1f740e8b5b4e24a68875c891", "assignee": null, "assignees": [], "requested_reviewers": [], "milestone": null, "commits_url": "https://api.github.com/repos/airbnb/synapse/pulls/184/commits", "review_comments_url": "https://api.github.com/repos/airbnb/synapse/pulls/184/comments", "review_comment_url": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/184/comments", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/5335b60535179c25fbd26d56d35d97e2898e4b26", "head": {"label": "tomfitzhenry:asg-watcher", "ref": "asg-watcher", "sha": "5335b60535179c25fbd26d56d35d97e2898e4b26", "user": {"login": "tomfitzhenry", "id": 61303, "avatar_url": "https://avatars3.githubusercontent.com/u/61303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomfitzhenry", "html_url": "https://github.com/tomfitzhenry", "followers_url": "https://api.github.com/users/tomfitzhenry/followers", "following_url": "https://api.github.com/users/tomfitzhenry/following{/other_user}", "gists_url": "https://api.github.com/users/tomfitzhenry/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomfitzhenry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomfitzhenry/subscriptions", "organizations_url": "https://api.github.com/users/tomfitzhenry/orgs", "repos_url": "https://api.github.com/users/tomfitzhenry/repos", "events_url": "https://api.github.com/users/tomfitzhenry/events{/privacy}", "received_events_url": "https://api.github.com/users/tomfitzhenry/received_events", "type": "User", "site_admin": false}, "repo": null}, "base": {"label": "airbnb:master", "ref": "master", "sha": "11e27483789d479ebc8d4d8062b6c549cfb35675", "user": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 6607851, "name": "synapse", "full_name": "airbnb/synapse", "owner": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "private": false, "html_url": "https://github.com/airbnb/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": false, "url": "https://api.github.com/repos/airbnb/synapse", "forks_url": "https://api.github.com/repos/airbnb/synapse/forks", "keys_url": "https://api.github.com/repos/airbnb/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/airbnb/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/airbnb/synapse/teams", "hooks_url": "https://api.github.com/repos/airbnb/synapse/hooks", "issue_events_url": "https://api.github.com/repos/airbnb/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/airbnb/synapse/events", "assignees_url": "https://api.github.com/repos/airbnb/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/airbnb/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/airbnb/synapse/tags", "blobs_url": "https://api.github.com/repos/airbnb/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/airbnb/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/airbnb/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/airbnb/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/airbnb/synapse/languages", "stargazers_url": "https://api.github.com/repos/airbnb/synapse/stargazers", "contributors_url": "https://api.github.com/repos/airbnb/synapse/contributors", "subscribers_url": "https://api.github.com/repos/airbnb/synapse/subscribers", "subscription_url": "https://api.github.com/repos/airbnb/synapse/subscription", "commits_url": "https://api.github.com/repos/airbnb/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/airbnb/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/airbnb/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/airbnb/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/airbnb/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/airbnb/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/airbnb/synapse/merges", "archive_url": "https://api.github.com/repos/airbnb/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/airbnb/synapse/downloads", "issues_url": "https://api.github.com/repos/airbnb/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/airbnb/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/airbnb/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/airbnb/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/airbnb/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/airbnb/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/airbnb/synapse/deployments", "created_at": "2012-11-09T03:03:06Z", "updated_at": "2018-01-22T12:26:59Z", "pushed_at": "2018-01-13T00:21:50Z", "git_url": "git://github.com/airbnb/synapse.git", "ssh_url": "git@github.com:airbnb/synapse.git", "clone_url": "https://github.com/airbnb/synapse.git", "svn_url": "https://github.com/airbnb/synapse", "homepage": "", "size": 630, "stargazers_count": 1753, "watchers_count": 1753, "language": "Ruby", "has_issues": true, "has_projects": false, "has_downloads": true, "has_wiki": false, "has_pages": false, "forks_count": 237, "mirror_url": null, "archived": false, "open_issues_count": 47, "license": {"key": "mit", "name": "MIT License", "spdx_id": "MIT", "url": "https://api.github.com/licenses/mit"}, "forks": 237, "open_issues": 47, "watchers": 1753, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/184"}, "html": {"href": "https://github.com/airbnb/synapse/pull/184"}, "issue": {"href": "https://api.github.com/repos/airbnb/synapse/issues/184"}, "comments": {"href": "https://api.github.com/repos/airbnb/synapse/issues/184/comments"}, "review_comments": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/184/comments"}, "review_comment": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/184/commits"}, "statuses": {"href": "https://api.github.com/repos/airbnb/synapse/statuses/5335b60535179c25fbd26d56d35d97e2898e4b26"}}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/179", "id": 64388541, "html_url": "https://github.com/airbnb/synapse/pull/179", "diff_url": "https://github.com/airbnb/synapse/pull/179.diff", "patch_url": "https://github.com/airbnb/synapse/pull/179.patch", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/179", "number": 179, "state": "open", "locked": false, "title": "Weights support in Synapse", "user": {"login": "scarletmeow", "id": 6128469, "avatar_url": "https://avatars2.githubusercontent.com/u/6128469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarletmeow", "html_url": "https://github.com/scarletmeow", "followers_url": "https://api.github.com/users/scarletmeow/followers", "following_url": "https://api.github.com/users/scarletmeow/following{/other_user}", "gists_url": "https://api.github.com/users/scarletmeow/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarletmeow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarletmeow/subscriptions", "organizations_url": "https://api.github.com/users/scarletmeow/orgs", "repos_url": "https://api.github.com/users/scarletmeow/repos", "events_url": "https://api.github.com/users/scarletmeow/events{/privacy}", "received_events_url": "https://api.github.com/users/scarletmeow/received_events", "type": "User", "site_admin": false}, "body": "Follow up to https://github.com/airbnb/synapse/pull/174.\n\nAdds logic to signal HAProxy restart if `weight` has changed.\n\nAdded an additional warning if `weights` is redefined in `haproxy_server_options`. I would prefer not to implement behavior that strips out any user-defined `weight X` statement in HAProxy server options. It seems sufficient to warn about the unexpected behavior in either case.\n", "created_at": "2016-03-28T22:49:18Z", "updated_at": "2016-05-28T00:50:31Z", "closed_at": null, "merged_at": null, "merge_commit_sha": "fc8e46045aa8b60e0b5ed18a1bb5a80536a28cfc", "assignee": null, "assignees": [], "requested_reviewers": [], "milestone": null, "commits_url": "https://api.github.com/repos/airbnb/synapse/pulls/179/commits", "review_comments_url": "https://api.github.com/repos/airbnb/synapse/pulls/179/comments", "review_comment_url": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/179/comments", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/42c4d488b692f46697bd46abd4d184c3a76b25ec", "head": {"label": "scarletmeow:safe-weights", "ref": "safe-weights", "sha": "42c4d488b692f46697bd46abd4d184c3a76b25ec", "user": {"login": "scarletmeow", "id": 6128469, "avatar_url": "https://avatars2.githubusercontent.com/u/6128469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarletmeow", "html_url": "https://github.com/scarletmeow", "followers_url": "https://api.github.com/users/scarletmeow/followers", "following_url": "https://api.github.com/users/scarletmeow/following{/other_user}", "gists_url": "https://api.github.com/users/scarletmeow/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarletmeow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarletmeow/subscriptions", "organizations_url": "https://api.github.com/users/scarletmeow/orgs", "repos_url": "https://api.github.com/users/scarletmeow/repos", "events_url": "https://api.github.com/users/scarletmeow/events{/privacy}", "received_events_url": "https://api.github.com/users/scarletmeow/received_events", "type": "User", "site_admin": false}, "repo": {"id": 51499356, "name": "synapse", "full_name": "scarletmeow/synapse", "owner": {"login": "scarletmeow", "id": 6128469, "avatar_url": "https://avatars2.githubusercontent.com/u/6128469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarletmeow", "html_url": "https://github.com/scarletmeow", "followers_url": "https://api.github.com/users/scarletmeow/followers", "following_url": "https://api.github.com/users/scarletmeow/following{/other_user}", "gists_url": "https://api.github.com/users/scarletmeow/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarletmeow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarletmeow/subscriptions", "organizations_url": "https://api.github.com/users/scarletmeow/orgs", "repos_url": "https://api.github.com/users/scarletmeow/repos", "events_url": "https://api.github.com/users/scarletmeow/events{/privacy}", "received_events_url": "https://api.github.com/users/scarletmeow/received_events", "type": "User", "site_admin": false}, "private": false, "html_url": "https://github.com/scarletmeow/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": true, "url": "https://api.github.com/repos/scarletmeow/synapse", "forks_url": "https://api.github.com/repos/scarletmeow/synapse/forks", "keys_url": "https://api.github.com/repos/scarletmeow/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/scarletmeow/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/scarletmeow/synapse/teams", "hooks_url": "https://api.github.com/repos/scarletmeow/synapse/hooks", "issue_events_url": "https://api.github.com/repos/scarletmeow/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/scarletmeow/synapse/events", "assignees_url": "https://api.github.com/repos/scarletmeow/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/scarletmeow/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/scarletmeow/synapse/tags", "blobs_url": "https://api.github.com/repos/scarletmeow/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/scarletmeow/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/scarletmeow/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/scarletmeow/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/scarletmeow/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/scarletmeow/synapse/languages", "stargazers_url": "https://api.github.com/repos/scarletmeow/synapse/stargazers", "contributors_url": "https://api.github.com/repos/scarletmeow/synapse/contributors", "subscribers_url": "https://api.github.com/repos/scarletmeow/synapse/subscribers", "subscription_url": "https://api.github.com/repos/scarletmeow/synapse/subscription", "commits_url": "https://api.github.com/repos/scarletmeow/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/scarletmeow/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/scarletmeow/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/scarletmeow/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/scarletmeow/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/scarletmeow/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/scarletmeow/synapse/merges", "archive_url": "https://api.github.com/repos/scarletmeow/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/scarletmeow/synapse/downloads", "issues_url": "https://api.github.com/repos/scarletmeow/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/scarletmeow/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/scarletmeow/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/scarletmeow/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/scarletmeow/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/scarletmeow/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/scarletmeow/synapse/deployments", "created_at": "2016-02-11T07:05:49Z", "updated_at": "2016-02-11T07:05:49Z", "pushed_at": "2016-05-31T18:53:59Z", "git_url": "git://github.com/scarletmeow/synapse.git", "ssh_url": "git@github.com:scarletmeow/synapse.git", "clone_url": "https://github.com/scarletmeow/synapse.git", "svn_url": "https://github.com/scarletmeow/synapse", "homepage": "", "size": 475, "stargazers_count": 0, "watchers_count": 0, "language": "Ruby", "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "forks_count": 0, "mirror_url": null, "archived": false, "open_issues_count": 0, "license": null, "forks": 0, "open_issues": 0, "watchers": 0, "default_branch": "master"}}, "base": {"label": "airbnb:master", "ref": "master", "sha": "b904393a120e587f02704671475e154012293bb1", "user": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 6607851, "name": "synapse", "full_name": "airbnb/synapse", "owner": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "private": false, "html_url": "https://github.com/airbnb/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": false, "url": "https://api.github.com/repos/airbnb/synapse", "forks_url": "https://api.github.com/repos/airbnb/synapse/forks", "keys_url": "https://api.github.com/repos/airbnb/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/airbnb/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/airbnb/synapse/teams", "hooks_url": "https://api.github.com/repos/airbnb/synapse/hooks", "issue_events_url": "https://api.github.com/repos/airbnb/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/airbnb/synapse/events", "assignees_url": "https://api.github.com/repos/airbnb/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/airbnb/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/airbnb/synapse/tags", "blobs_url": "https://api.github.com/repos/airbnb/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/airbnb/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/airbnb/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/airbnb/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/airbnb/synapse/languages", "stargazers_url": "https://api.github.com/repos/airbnb/synapse/stargazers", "contributors_url": "https://api.github.com/repos/airbnb/synapse/contributors", "subscribers_url": "https://api.github.com/repos/airbnb/synapse/subscribers", "subscription_url": "https://api.github.com/repos/airbnb/synapse/subscription", "commits_url": "https://api.github.com/repos/airbnb/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/airbnb/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/airbnb/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/airbnb/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/airbnb/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/airbnb/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/airbnb/synapse/merges", "archive_url": "https://api.github.com/repos/airbnb/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/airbnb/synapse/downloads", "issues_url": "https://api.github.com/repos/airbnb/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/airbnb/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/airbnb/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/airbnb/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/airbnb/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/airbnb/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/airbnb/synapse/deployments", "created_at": "2012-11-09T03:03:06Z", "updated_at": "2018-01-22T12:26:59Z", "pushed_at": "2018-01-13T00:21:50Z", "git_url": "git://github.com/airbnb/synapse.git", "ssh_url": "git@github.com:airbnb/synapse.git", "clone_url": "https://github.com/airbnb/synapse.git", "svn_url": "https://github.com/airbnb/synapse", "homepage": "", "size": 630, "stargazers_count": 1753, "watchers_count": 1753, "language": "Ruby", "has_issues": true, "has_projects": false, "has_downloads": true, "has_wiki": false, "has_pages": false, "forks_count": 237, "mirror_url": null, "archived": false, "open_issues_count": 47, "license": {"key": "mit", "name": "MIT License", "spdx_id": "MIT", "url": "https://api.github.com/licenses/mit"}, "forks": 237, "open_issues": 47, "watchers": 1753, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/179"}, "html": {"href": "https://github.com/airbnb/synapse/pull/179"}, "issue": {"href": "https://api.github.com/repos/airbnb/synapse/issues/179"}, "comments": {"href": "https://api.github.com/repos/airbnb/synapse/issues/179/comments"}, "review_comments": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/179/comments"}, "review_comment": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/179/commits"}, "statuses": {"href": "https://api.github.com/repos/airbnb/synapse/statuses/42c4d488b692f46697bd46abd4d184c3a76b25ec"}}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/174", "id": 59990197, "html_url": "https://github.com/airbnb/synapse/pull/174", "diff_url": "https://github.com/airbnb/synapse/pull/174.diff", "patch_url": "https://github.com/airbnb/synapse/pull/174.patch", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/174", "number": 174, "state": "open", "locked": false, "title": "Create an option to stop ignoring weights. By default weights will still be ignored. ", "user": {"login": "minkovich", "id": 4672120, "avatar_url": "https://avatars1.githubusercontent.com/u/4672120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/minkovich", "html_url": "https://github.com/minkovich", "followers_url": "https://api.github.com/users/minkovich/followers", "following_url": "https://api.github.com/users/minkovich/following{/other_user}", "gists_url": "https://api.github.com/users/minkovich/gists{/gist_id}", "starred_url": "https://api.github.com/users/minkovich/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/minkovich/subscriptions", "organizations_url": "https://api.github.com/users/minkovich/orgs", "repos_url": "https://api.github.com/users/minkovich/repos", "events_url": "https://api.github.com/users/minkovich/events{/privacy}", "received_events_url": "https://api.github.com/users/minkovich/received_events", "type": "User", "site_admin": false}, "body": "This commit is based on the following by @bobtfish \nhttps://github.com/airbnb/synapse/pull/131\n\nbut does the following things differently:\n1. By default weights are ignored. This is to maintain current behavior for safety.\n2. HAProxy will reconfigure if weights changes.\n", "created_at": "2016-02-19T18:47:52Z", "updated_at": "2016-05-26T23:16:49Z", "closed_at": null, "merged_at": null, "merge_commit_sha": "93aa0d8bf636572b1a5a5264ca3ceac597fd6ebb", "assignee": null, "assignees": [], "requested_reviewers": [], "milestone": null, "commits_url": "https://api.github.com/repos/airbnb/synapse/pulls/174/commits", "review_comments_url": "https://api.github.com/repos/airbnb/synapse/pulls/174/comments", "review_comment_url": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/174/comments", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/c3bcd295a1c7f5c579b301b7f37bc74617c4b16a", "head": {"label": "minkovich:safe-weights", "ref": "safe-weights", "sha": "c3bcd295a1c7f5c579b301b7f37bc74617c4b16a", "user": {"login": "minkovich", "id": 4672120, "avatar_url": "https://avatars1.githubusercontent.com/u/4672120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/minkovich", "html_url": "https://github.com/minkovich", "followers_url": "https://api.github.com/users/minkovich/followers", "following_url": "https://api.github.com/users/minkovich/following{/other_user}", "gists_url": "https://api.github.com/users/minkovich/gists{/gist_id}", "starred_url": "https://api.github.com/users/minkovich/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/minkovich/subscriptions", "organizations_url": "https://api.github.com/users/minkovich/orgs", "repos_url": "https://api.github.com/users/minkovich/repos", "events_url": "https://api.github.com/users/minkovich/events{/privacy}", "received_events_url": "https://api.github.com/users/minkovich/received_events", "type": "User", "site_admin": false}, "repo": {"id": 52034557, "name": "synapse", "full_name": "minkovich/synapse", "owner": {"login": "minkovich", "id": 4672120, "avatar_url": "https://avatars1.githubusercontent.com/u/4672120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/minkovich", "html_url": "https://github.com/minkovich", "followers_url": "https://api.github.com/users/minkovich/followers", "following_url": "https://api.github.com/users/minkovich/following{/other_user}", "gists_url": "https://api.github.com/users/minkovich/gists{/gist_id}", "starred_url": "https://api.github.com/users/minkovich/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/minkovich/subscriptions", "organizations_url": "https://api.github.com/users/minkovich/orgs", "repos_url": "https://api.github.com/users/minkovich/repos", "events_url": "https://api.github.com/users/minkovich/events{/privacy}", "received_events_url": "https://api.github.com/users/minkovich/received_events", "type": "User", "site_admin": false}, "private": false, "html_url": "https://github.com/minkovich/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": true, "url": "https://api.github.com/repos/minkovich/synapse", "forks_url": "https://api.github.com/repos/minkovich/synapse/forks", "keys_url": "https://api.github.com/repos/minkovich/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/minkovich/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/minkovich/synapse/teams", "hooks_url": "https://api.github.com/repos/minkovich/synapse/hooks", "issue_events_url": "https://api.github.com/repos/minkovich/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/minkovich/synapse/events", "assignees_url": "https://api.github.com/repos/minkovich/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/minkovich/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/minkovich/synapse/tags", "blobs_url": "https://api.github.com/repos/minkovich/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/minkovich/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/minkovich/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/minkovich/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/minkovich/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/minkovich/synapse/languages", "stargazers_url": "https://api.github.com/repos/minkovich/synapse/stargazers", "contributors_url": "https://api.github.com/repos/minkovich/synapse/contributors", "subscribers_url": "https://api.github.com/repos/minkovich/synapse/subscribers", "subscription_url": "https://api.github.com/repos/minkovich/synapse/subscription", "commits_url": "https://api.github.com/repos/minkovich/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/minkovich/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/minkovich/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/minkovich/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/minkovich/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/minkovich/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/minkovich/synapse/merges", "archive_url": "https://api.github.com/repos/minkovich/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/minkovich/synapse/downloads", "issues_url": "https://api.github.com/repos/minkovich/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/minkovich/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/minkovich/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/minkovich/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/minkovich/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/minkovich/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/minkovich/synapse/deployments", "created_at": "2016-02-18T19:57:10Z", "updated_at": "2016-02-18T19:57:11Z", "pushed_at": "2016-08-22T20:28:30Z", "git_url": "git://github.com/minkovich/synapse.git", "ssh_url": "git@github.com:minkovich/synapse.git", "clone_url": "https://github.com/minkovich/synapse.git", "svn_url": "https://github.com/minkovich/synapse", "homepage": "", "size": 463, "stargazers_count": 0, "watchers_count": 0, "language": "Ruby", "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "forks_count": 0, "mirror_url": null, "archived": false, "open_issues_count": 0, "license": null, "forks": 0, "open_issues": 0, "watchers": 0, "default_branch": "master"}}, "base": {"label": "airbnb:master", "ref": "master", "sha": "11e27483789d479ebc8d4d8062b6c549cfb35675", "user": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 6607851, "name": "synapse", "full_name": "airbnb/synapse", "owner": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "private": false, "html_url": "https://github.com/airbnb/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": false, "url": "https://api.github.com/repos/airbnb/synapse", "forks_url": "https://api.github.com/repos/airbnb/synapse/forks", "keys_url": "https://api.github.com/repos/airbnb/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/airbnb/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/airbnb/synapse/teams", "hooks_url": "https://api.github.com/repos/airbnb/synapse/hooks", "issue_events_url": "https://api.github.com/repos/airbnb/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/airbnb/synapse/events", "assignees_url": "https://api.github.com/repos/airbnb/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/airbnb/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/airbnb/synapse/tags", "blobs_url": "https://api.github.com/repos/airbnb/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/airbnb/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/airbnb/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/airbnb/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/airbnb/synapse/languages", "stargazers_url": "https://api.github.com/repos/airbnb/synapse/stargazers", "contributors_url": "https://api.github.com/repos/airbnb/synapse/contributors", "subscribers_url": "https://api.github.com/repos/airbnb/synapse/subscribers", "subscription_url": "https://api.github.com/repos/airbnb/synapse/subscription", "commits_url": "https://api.github.com/repos/airbnb/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/airbnb/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/airbnb/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/airbnb/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/airbnb/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/airbnb/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/airbnb/synapse/merges", "archive_url": "https://api.github.com/repos/airbnb/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/airbnb/synapse/downloads", "issues_url": "https://api.github.com/repos/airbnb/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/airbnb/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/airbnb/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/airbnb/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/airbnb/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/airbnb/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/airbnb/synapse/deployments", "created_at": "2012-11-09T03:03:06Z", "updated_at": "2018-01-22T12:26:59Z", "pushed_at": "2018-01-13T00:21:50Z", "git_url": "git://github.com/airbnb/synapse.git", "ssh_url": "git@github.com:airbnb/synapse.git", "clone_url": "https://github.com/airbnb/synapse.git", "svn_url": "https://github.com/airbnb/synapse", "homepage": "", "size": 630, "stargazers_count": 1753, "watchers_count": 1753, "language": "Ruby", "has_issues": true, "has_projects": false, "has_downloads": true, "has_wiki": false, "has_pages": false, "forks_count": 237, "mirror_url": null, "archived": false, "open_issues_count": 47, "license": {"key": "mit", "name": "MIT License", "spdx_id": "MIT", "url": "https://api.github.com/licenses/mit"}, "forks": 237, "open_issues": 47, "watchers": 1753, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/174"}, "html": {"href": "https://github.com/airbnb/synapse/pull/174"}, "issue": {"href": "https://api.github.com/repos/airbnb/synapse/issues/174"}, "comments": {"href": "https://api.github.com/repos/airbnb/synapse/issues/174/comments"}, "review_comments": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/174/comments"}, "review_comment": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/174/commits"}, "statuses": {"href": "https://api.github.com/repos/airbnb/synapse/statuses/c3bcd295a1c7f5c579b301b7f37bc74617c4b16a"}}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/131", "id": 41021301, "html_url": "https://github.com/airbnb/synapse/pull/131", "diff_url": "https://github.com/airbnb/synapse/pull/131.diff", "patch_url": "https://github.com/airbnb/synapse/pull/131.patch", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/131", "number": 131, "state": "open", "locked": false, "title": "Weights in generated config", "user": {"login": "bobtfish", "id": 42338, "avatar_url": "https://avatars1.githubusercontent.com/u/42338?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bobtfish", "html_url": "https://github.com/bobtfish", "followers_url": "https://api.github.com/users/bobtfish/followers", "following_url": "https://api.github.com/users/bobtfish/following{/other_user}", "gists_url": "https://api.github.com/users/bobtfish/gists{/gist_id}", "starred_url": "https://api.github.com/users/bobtfish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bobtfish/subscriptions", "organizations_url": "https://api.github.com/users/bobtfish/orgs", "repos_url": "https://api.github.com/users/bobtfish/repos", "events_url": "https://api.github.com/users/bobtfish/events{/privacy}", "received_events_url": "https://api.github.com/users/bobtfish/received_events", "type": "User", "site_admin": false}, "body": "cc @vulpine\n\nRebased against airbnb/synapse master\n", "created_at": "2015-07-28T14:59:22Z", "updated_at": "2016-05-26T23:16:49Z", "closed_at": null, "merged_at": null, "merge_commit_sha": "34e7e5cfe08082c5571374657e6c0b704dcacb1c", "assignee": null, "assignees": [], "requested_reviewers": [], "milestone": null, "commits_url": "https://api.github.com/repos/airbnb/synapse/pulls/131/commits", "review_comments_url": "https://api.github.com/repos/airbnb/synapse/pulls/131/comments", "review_comment_url": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/131/comments", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/bc76050d716c7894b5916e2b8c1db49db8a55693", "head": {"label": "bobtfish:weights_in_generated_config", "ref": "weights_in_generated_config", "sha": "bc76050d716c7894b5916e2b8c1db49db8a55693", "user": {"login": "bobtfish", "id": 42338, "avatar_url": "https://avatars1.githubusercontent.com/u/42338?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bobtfish", "html_url": "https://github.com/bobtfish", "followers_url": "https://api.github.com/users/bobtfish/followers", "following_url": "https://api.github.com/users/bobtfish/following{/other_user}", "gists_url": "https://api.github.com/users/bobtfish/gists{/gist_id}", "starred_url": "https://api.github.com/users/bobtfish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bobtfish/subscriptions", "organizations_url": "https://api.github.com/users/bobtfish/orgs", "repos_url": "https://api.github.com/users/bobtfish/repos", "events_url": "https://api.github.com/users/bobtfish/events{/privacy}", "received_events_url": "https://api.github.com/users/bobtfish/received_events", "type": "User", "site_admin": false}, "repo": {"id": 15989700, "name": "synapse", "full_name": "bobtfish/synapse", "owner": {"login": "bobtfish", "id": 42338, "avatar_url": "https://avatars1.githubusercontent.com/u/42338?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bobtfish", "html_url": "https://github.com/bobtfish", "followers_url": "https://api.github.com/users/bobtfish/followers", "following_url": "https://api.github.com/users/bobtfish/following{/other_user}", "gists_url": "https://api.github.com/users/bobtfish/gists{/gist_id}", "starred_url": "https://api.github.com/users/bobtfish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bobtfish/subscriptions", "organizations_url": "https://api.github.com/users/bobtfish/orgs", "repos_url": "https://api.github.com/users/bobtfish/repos", "events_url": "https://api.github.com/users/bobtfish/events{/privacy}", "received_events_url": "https://api.github.com/users/bobtfish/received_events", "type": "User", "site_admin": false}, "private": false, "html_url": "https://github.com/bobtfish/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": true, "url": "https://api.github.com/repos/bobtfish/synapse", "forks_url": "https://api.github.com/repos/bobtfish/synapse/forks", "keys_url": "https://api.github.com/repos/bobtfish/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/bobtfish/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/bobtfish/synapse/teams", "hooks_url": "https://api.github.com/repos/bobtfish/synapse/hooks", "issue_events_url": "https://api.github.com/repos/bobtfish/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/bobtfish/synapse/events", "assignees_url": "https://api.github.com/repos/bobtfish/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/bobtfish/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/bobtfish/synapse/tags", "blobs_url": "https://api.github.com/repos/bobtfish/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/bobtfish/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/bobtfish/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/bobtfish/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/bobtfish/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/bobtfish/synapse/languages", "stargazers_url": "https://api.github.com/repos/bobtfish/synapse/stargazers", "contributors_url": "https://api.github.com/repos/bobtfish/synapse/contributors", "subscribers_url": "https://api.github.com/repos/bobtfish/synapse/subscribers", "subscription_url": "https://api.github.com/repos/bobtfish/synapse/subscription", "commits_url": "https://api.github.com/repos/bobtfish/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/bobtfish/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/bobtfish/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/bobtfish/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/bobtfish/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/bobtfish/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/bobtfish/synapse/merges", "archive_url": "https://api.github.com/repos/bobtfish/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/bobtfish/synapse/downloads", "issues_url": "https://api.github.com/repos/bobtfish/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/bobtfish/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/bobtfish/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/bobtfish/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/bobtfish/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/bobtfish/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/bobtfish/synapse/deployments", "created_at": "2014-01-17T04:05:59Z", "updated_at": "2014-09-03T18:33:50Z", "pushed_at": "2015-09-23T04:42:07Z", "git_url": "git://github.com/bobtfish/synapse.git", "ssh_url": "git@github.com:bobtfish/synapse.git", "clone_url": "https://github.com/bobtfish/synapse.git", "svn_url": "https://github.com/bobtfish/synapse", "homepage": "", "size": 745, "stargazers_count": 0, "watchers_count": 0, "language": "Ruby", "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "forks_count": 1, "mirror_url": null, "archived": false, "open_issues_count": 0, "license": {"key": "mit", "name": "MIT License", "spdx_id": "MIT", "url": "https://api.github.com/licenses/mit"}, "forks": 1, "open_issues": 0, "watchers": 0, "default_branch": "master"}}, "base": {"label": "airbnb:master", "ref": "master", "sha": "11e27483789d479ebc8d4d8062b6c549cfb35675", "user": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 6607851, "name": "synapse", "full_name": "airbnb/synapse", "owner": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "private": false, "html_url": "https://github.com/airbnb/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": false, "url": "https://api.github.com/repos/airbnb/synapse", "forks_url": "https://api.github.com/repos/airbnb/synapse/forks", "keys_url": "https://api.github.com/repos/airbnb/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/airbnb/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/airbnb/synapse/teams", "hooks_url": "https://api.github.com/repos/airbnb/synapse/hooks", "issue_events_url": "https://api.github.com/repos/airbnb/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/airbnb/synapse/events", "assignees_url": "https://api.github.com/repos/airbnb/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/airbnb/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/airbnb/synapse/tags", "blobs_url": "https://api.github.com/repos/airbnb/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/airbnb/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/airbnb/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/airbnb/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/airbnb/synapse/languages", "stargazers_url": "https://api.github.com/repos/airbnb/synapse/stargazers", "contributors_url": "https://api.github.com/repos/airbnb/synapse/contributors", "subscribers_url": "https://api.github.com/repos/airbnb/synapse/subscribers", "subscription_url": "https://api.github.com/repos/airbnb/synapse/subscription", "commits_url": "https://api.github.com/repos/airbnb/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/airbnb/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/airbnb/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/airbnb/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/airbnb/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/airbnb/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/airbnb/synapse/merges", "archive_url": "https://api.github.com/repos/airbnb/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/airbnb/synapse/downloads", "issues_url": "https://api.github.com/repos/airbnb/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/airbnb/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/airbnb/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/airbnb/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/airbnb/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/airbnb/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/airbnb/synapse/deployments", "created_at": "2012-11-09T03:03:06Z", "updated_at": "2018-01-22T12:26:59Z", "pushed_at": "2018-01-13T00:21:50Z", "git_url": "git://github.com/airbnb/synapse.git", "ssh_url": "git@github.com:airbnb/synapse.git", "clone_url": "https://github.com/airbnb/synapse.git", "svn_url": "https://github.com/airbnb/synapse", "homepage": "", "size": 630, "stargazers_count": 1753, "watchers_count": 1753, "language": "Ruby", "has_issues": true, "has_projects": false, "has_downloads": true, "has_wiki": false, "has_pages": false, "forks_count": 237, "mirror_url": null, "archived": false, "open_issues_count": 47, "license": {"key": "mit", "name": "MIT License", "spdx_id": "MIT", "url": "https://api.github.com/licenses/mit"}, "forks": 237, "open_issues": 47, "watchers": 1753, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/131"}, "html": {"href": "https://github.com/airbnb/synapse/pull/131"}, "issue": {"href": "https://api.github.com/repos/airbnb/synapse/issues/131"}, "comments": {"href": "https://api.github.com/repos/airbnb/synapse/issues/131/comments"}, "review_comments": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/131/comments"}, "review_comment": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/131/commits"}, "statuses": {"href": "https://api.github.com/repos/airbnb/synapse/statuses/bc76050d716c7894b5916e2b8c1db49db8a55693"}}, "author_association": "CONTRIBUTOR"}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/119", "id": 34209054, "html_url": "https://github.com/airbnb/synapse/pull/119", "diff_url": "https://github.com/airbnb/synapse/pull/119.diff", "patch_url": "https://github.com/airbnb/synapse/pull/119.patch", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/119", "number": 119, "state": "open", "locked": false, "title": "Zookeeper recursive", "user": {"login": "gfelbing", "id": 10872874, "avatar_url": "https://avatars0.githubusercontent.com/u/10872874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gfelbing", "html_url": "https://github.com/gfelbing", "followers_url": "https://api.github.com/users/gfelbing/followers", "following_url": "https://api.github.com/users/gfelbing/following{/other_user}", "gists_url": "https://api.github.com/users/gfelbing/gists{/gist_id}", "starred_url": "https://api.github.com/users/gfelbing/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gfelbing/subscriptions", "organizations_url": "https://api.github.com/users/gfelbing/orgs", "repos_url": "https://api.github.com/users/gfelbing/repos", "events_url": "https://api.github.com/users/gfelbing/events{/privacy}", "received_events_url": "https://api.github.com/users/gfelbing/received_events", "type": "User", "site_admin": false}, "body": "This branch adds a new service watcher \"zookeeper_recursive\".\nIt doesn't generate backends directly, but generates new \"zookeeper\"-watcher for each persistent node under the configured path (including the path itself).\nThe configuration of the \"zookeeper\"-watcher is based on the configuration of the \"zookeeper_recursive\"-watcher, the \"#[service]\" will be replaced by the node's path in zookeeper, the \"/\" are replaced by \"_\".\nWith this functionality you doesn't have to know which services are existing or will exist in the future.\nFor an example configuration see \"config/synapse_zookeeper_recursive.yaml\"\n", "created_at": "2015-04-27T20:52:43Z", "updated_at": "2016-05-26T23:16:49Z", "closed_at": null, "merged_at": null, "merge_commit_sha": "7453d38a9fcb10b023f08d544801e3252271ae17", "assignee": null, "assignees": [], "requested_reviewers": [], "milestone": null, "commits_url": "https://api.github.com/repos/airbnb/synapse/pulls/119/commits", "review_comments_url": "https://api.github.com/repos/airbnb/synapse/pulls/119/comments", "review_comment_url": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/119/comments", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/0e19ab07a81a417a1fb51a88a03aea7a686a88b1", "head": {"label": "freiheit-com:zookeeper_recursive", "ref": "zookeeper_recursive", "sha": "0e19ab07a81a417a1fb51a88a03aea7a686a88b1", "user": {"login": "freiheit-com", "id": 547588, "avatar_url": "https://avatars1.githubusercontent.com/u/547588?v=4", "gravatar_id": "", "url": "https://api.github.com/users/freiheit-com", "html_url": "https://github.com/freiheit-com", "followers_url": "https://api.github.com/users/freiheit-com/followers", "following_url": "https://api.github.com/users/freiheit-com/following{/other_user}", "gists_url": "https://api.github.com/users/freiheit-com/gists{/gist_id}", "starred_url": "https://api.github.com/users/freiheit-com/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/freiheit-com/subscriptions", "organizations_url": "https://api.github.com/users/freiheit-com/orgs", "repos_url": "https://api.github.com/users/freiheit-com/repos", "events_url": "https://api.github.com/users/freiheit-com/events{/privacy}", "received_events_url": "https://api.github.com/users/freiheit-com/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 34053022, "name": "synapse", "full_name": "freiheit-com/synapse", "owner": {"login": "freiheit-com", "id": 547588, "avatar_url": "https://avatars1.githubusercontent.com/u/547588?v=4", "gravatar_id": "", "url": "https://api.github.com/users/freiheit-com", "html_url": "https://github.com/freiheit-com", "followers_url": "https://api.github.com/users/freiheit-com/followers", "following_url": "https://api.github.com/users/freiheit-com/following{/other_user}", "gists_url": "https://api.github.com/users/freiheit-com/gists{/gist_id}", "starred_url": "https://api.github.com/users/freiheit-com/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/freiheit-com/subscriptions", "organizations_url": "https://api.github.com/users/freiheit-com/orgs", "repos_url": "https://api.github.com/users/freiheit-com/repos", "events_url": "https://api.github.com/users/freiheit-com/events{/privacy}", "received_events_url": "https://api.github.com/users/freiheit-com/received_events", "type": "Organization", "site_admin": false}, "private": false, "html_url": "https://github.com/freiheit-com/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": true, "url": "https://api.github.com/repos/freiheit-com/synapse", "forks_url": "https://api.github.com/repos/freiheit-com/synapse/forks", "keys_url": "https://api.github.com/repos/freiheit-com/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/freiheit-com/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/freiheit-com/synapse/teams", "hooks_url": "https://api.github.com/repos/freiheit-com/synapse/hooks", "issue_events_url": "https://api.github.com/repos/freiheit-com/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/freiheit-com/synapse/events", "assignees_url": "https://api.github.com/repos/freiheit-com/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/freiheit-com/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/freiheit-com/synapse/tags", "blobs_url": "https://api.github.com/repos/freiheit-com/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/freiheit-com/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/freiheit-com/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/freiheit-com/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/freiheit-com/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/freiheit-com/synapse/languages", "stargazers_url": "https://api.github.com/repos/freiheit-com/synapse/stargazers", "contributors_url": "https://api.github.com/repos/freiheit-com/synapse/contributors", "subscribers_url": "https://api.github.com/repos/freiheit-com/synapse/subscribers", "subscription_url": "https://api.github.com/repos/freiheit-com/synapse/subscription", "commits_url": "https://api.github.com/repos/freiheit-com/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/freiheit-com/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/freiheit-com/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/freiheit-com/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/freiheit-com/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/freiheit-com/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/freiheit-com/synapse/merges", "archive_url": "https://api.github.com/repos/freiheit-com/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/freiheit-com/synapse/downloads", "issues_url": "https://api.github.com/repos/freiheit-com/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/freiheit-com/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/freiheit-com/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/freiheit-com/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/freiheit-com/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/freiheit-com/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/freiheit-com/synapse/deployments", "created_at": "2015-04-16T11:54:16Z", "updated_at": "2015-04-27T14:06:21Z", "pushed_at": "2015-05-26T13:46:59Z", "git_url": "git://github.com/freiheit-com/synapse.git", "ssh_url": "git@github.com:freiheit-com/synapse.git", "clone_url": "https://github.com/freiheit-com/synapse.git", "svn_url": "https://github.com/freiheit-com/synapse", "homepage": "", "size": 428, "stargazers_count": 0, "watchers_count": 0, "language": "Ruby", "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "forks_count": 0, "mirror_url": null, "archived": false, "open_issues_count": 0, "license": {"key": "mit", "name": "MIT License", "spdx_id": "MIT", "url": "https://api.github.com/licenses/mit"}, "forks": 0, "open_issues": 0, "watchers": 0, "default_branch": "master"}}, "base": {"label": "airbnb:master", "ref": "master", "sha": "11e27483789d479ebc8d4d8062b6c549cfb35675", "user": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 6607851, "name": "synapse", "full_name": "airbnb/synapse", "owner": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "private": false, "html_url": "https://github.com/airbnb/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": false, "url": "https://api.github.com/repos/airbnb/synapse", "forks_url": "https://api.github.com/repos/airbnb/synapse/forks", "keys_url": "https://api.github.com/repos/airbnb/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/airbnb/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/airbnb/synapse/teams", "hooks_url": "https://api.github.com/repos/airbnb/synapse/hooks", "issue_events_url": "https://api.github.com/repos/airbnb/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/airbnb/synapse/events", "assignees_url": "https://api.github.com/repos/airbnb/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/airbnb/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/airbnb/synapse/tags", "blobs_url": "https://api.github.com/repos/airbnb/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/airbnb/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/airbnb/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/airbnb/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/airbnb/synapse/languages", "stargazers_url": "https://api.github.com/repos/airbnb/synapse/stargazers", "contributors_url": "https://api.github.com/repos/airbnb/synapse/contributors", "subscribers_url": "https://api.github.com/repos/airbnb/synapse/subscribers", "subscription_url": "https://api.github.com/repos/airbnb/synapse/subscription", "commits_url": "https://api.github.com/repos/airbnb/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/airbnb/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/airbnb/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/airbnb/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/airbnb/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/airbnb/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/airbnb/synapse/merges", "archive_url": "https://api.github.com/repos/airbnb/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/airbnb/synapse/downloads", "issues_url": "https://api.github.com/repos/airbnb/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/airbnb/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/airbnb/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/airbnb/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/airbnb/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/airbnb/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/airbnb/synapse/deployments", "created_at": "2012-11-09T03:03:06Z", "updated_at": "2018-01-22T12:26:59Z", "pushed_at": "2018-01-13T00:21:50Z", "git_url": "git://github.com/airbnb/synapse.git", "ssh_url": "git@github.com:airbnb/synapse.git", "clone_url": "https://github.com/airbnb/synapse.git", "svn_url": "https://github.com/airbnb/synapse", "homepage": "", "size": 630, "stargazers_count": 1753, "watchers_count": 1753, "language": "Ruby", "has_issues": true, "has_projects": false, "has_downloads": true, "has_wiki": false, "has_pages": false, "forks_count": 237, "mirror_url": null, "archived": false, "open_issues_count": 47, "license": {"key": "mit", "name": "MIT License", "spdx_id": "MIT", "url": "https://api.github.com/licenses/mit"}, "forks": 237, "open_issues": 47, "watchers": 1753, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/119"}, "html": {"href": "https://github.com/airbnb/synapse/pull/119"}, "issue": {"href": "https://api.github.com/repos/airbnb/synapse/issues/119"}, "comments": {"href": "https://api.github.com/repos/airbnb/synapse/issues/119/comments"}, "review_comments": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/119/comments"}, "review_comment": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/119/commits"}, "statuses": {"href": "https://api.github.com/repos/airbnb/synapse/statuses/0e19ab07a81a417a1fb51a88a03aea7a686a88b1"}}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/118", "id": 32535600, "html_url": "https://github.com/airbnb/synapse/pull/118", "diff_url": "https://github.com/airbnb/synapse/pull/118.diff", "patch_url": "https://github.com/airbnb/synapse/pull/118.patch", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/118", "number": 118, "state": "open", "locked": false, "title": "Add optional image_tag param to docker watcher", "user": {"login": "bcicen", "id": 5673805, "avatar_url": "https://avatars3.githubusercontent.com/u/5673805?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bcicen", "html_url": "https://github.com/bcicen", "followers_url": "https://api.github.com/users/bcicen/followers", "following_url": "https://api.github.com/users/bcicen/following{/other_user}", "gists_url": "https://api.github.com/users/bcicen/gists{/gist_id}", "starred_url": "https://api.github.com/users/bcicen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bcicen/subscriptions", "organizations_url": "https://api.github.com/users/bcicen/orgs", "repos_url": "https://api.github.com/users/bcicen/repos", "events_url": "https://api.github.com/users/bcicen/events{/privacy}", "received_events_url": "https://api.github.com/users/bcicen/received_events", "type": "User", "site_admin": false}, "body": "Rebase of #96 with minor changes.\n\nAdd param to explicitly discover only containers running image_name:image_tag. I've found this to be quite valuable in the deploy cycle as I can bring up containers and move them to the tag defined in synapse config when I'm ready for them to be discovered.\n", "created_at": "2015-04-02T18:09:21Z", "updated_at": "2016-05-26T23:16:49Z", "closed_at": null, "merged_at": null, "merge_commit_sha": "df10a043c2b48eeb27dead0dff74e7aaf4cd7228", "assignee": null, "assignees": [], "requested_reviewers": [], "milestone": null, "commits_url": "https://api.github.com/repos/airbnb/synapse/pulls/118/commits", "review_comments_url": "https://api.github.com/repos/airbnb/synapse/pulls/118/comments", "review_comment_url": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/118/comments", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/3b8d7dd8e436e6471fce5bbf8a8a8761fb715b0f", "head": {"label": "bcicen:docker-add-img-tag", "ref": "docker-add-img-tag", "sha": "3b8d7dd8e436e6471fce5bbf8a8a8761fb715b0f", "user": {"login": "bcicen", "id": 5673805, "avatar_url": "https://avatars3.githubusercontent.com/u/5673805?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bcicen", "html_url": "https://github.com/bcicen", "followers_url": "https://api.github.com/users/bcicen/followers", "following_url": "https://api.github.com/users/bcicen/following{/other_user}", "gists_url": "https://api.github.com/users/bcicen/gists{/gist_id}", "starred_url": "https://api.github.com/users/bcicen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bcicen/subscriptions", "organizations_url": "https://api.github.com/users/bcicen/orgs", "repos_url": "https://api.github.com/users/bcicen/repos", "events_url": "https://api.github.com/users/bcicen/events{/privacy}", "received_events_url": "https://api.github.com/users/bcicen/received_events", "type": "User", "site_admin": false}, "repo": {"id": 23811728, "name": "synapse", "full_name": "bcicen/synapse", "owner": {"login": "bcicen", "id": 5673805, "avatar_url": "https://avatars3.githubusercontent.com/u/5673805?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bcicen", "html_url": "https://github.com/bcicen", "followers_url": "https://api.github.com/users/bcicen/followers", "following_url": "https://api.github.com/users/bcicen/following{/other_user}", "gists_url": "https://api.github.com/users/bcicen/gists{/gist_id}", "starred_url": "https://api.github.com/users/bcicen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bcicen/subscriptions", "organizations_url": "https://api.github.com/users/bcicen/orgs", "repos_url": "https://api.github.com/users/bcicen/repos", "events_url": "https://api.github.com/users/bcicen/events{/privacy}", "received_events_url": "https://api.github.com/users/bcicen/received_events", "type": "User", "site_admin": false}, "private": false, "html_url": "https://github.com/bcicen/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": true, "url": "https://api.github.com/repos/bcicen/synapse", "forks_url": "https://api.github.com/repos/bcicen/synapse/forks", "keys_url": "https://api.github.com/repos/bcicen/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/bcicen/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/bcicen/synapse/teams", "hooks_url": "https://api.github.com/repos/bcicen/synapse/hooks", "issue_events_url": "https://api.github.com/repos/bcicen/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/bcicen/synapse/events", "assignees_url": "https://api.github.com/repos/bcicen/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/bcicen/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/bcicen/synapse/tags", "blobs_url": "https://api.github.com/repos/bcicen/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/bcicen/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/bcicen/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/bcicen/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/bcicen/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/bcicen/synapse/languages", "stargazers_url": "https://api.github.com/repos/bcicen/synapse/stargazers", "contributors_url": "https://api.github.com/repos/bcicen/synapse/contributors", "subscribers_url": "https://api.github.com/repos/bcicen/synapse/subscribers", "subscription_url": "https://api.github.com/repos/bcicen/synapse/subscription", "commits_url": "https://api.github.com/repos/bcicen/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/bcicen/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/bcicen/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/bcicen/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/bcicen/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/bcicen/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/bcicen/synapse/merges", "archive_url": "https://api.github.com/repos/bcicen/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/bcicen/synapse/downloads", "issues_url": "https://api.github.com/repos/bcicen/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/bcicen/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/bcicen/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/bcicen/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/bcicen/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/bcicen/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/bcicen/synapse/deployments", "created_at": "2014-09-08T23:03:59Z", "updated_at": "2015-04-02T18:05:09Z", "pushed_at": "2015-11-15T18:15:09Z", "git_url": "git://github.com/bcicen/synapse.git", "ssh_url": "git@github.com:bcicen/synapse.git", "clone_url": "https://github.com/bcicen/synapse.git", "svn_url": "https://github.com/bcicen/synapse", "homepage": "", "size": 516, "stargazers_count": 0, "watchers_count": 0, "language": "Ruby", "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "forks_count": 0, "mirror_url": null, "archived": false, "open_issues_count": 0, "license": {"key": "mit", "name": "MIT License", "spdx_id": "MIT", "url": "https://api.github.com/licenses/mit"}, "forks": 0, "open_issues": 0, "watchers": 0, "default_branch": "master"}}, "base": {"label": "airbnb:master", "ref": "master", "sha": "11e27483789d479ebc8d4d8062b6c549cfb35675", "user": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 6607851, "name": "synapse", "full_name": "airbnb/synapse", "owner": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "private": false, "html_url": "https://github.com/airbnb/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": false, "url": "https://api.github.com/repos/airbnb/synapse", "forks_url": "https://api.github.com/repos/airbnb/synapse/forks", "keys_url": "https://api.github.com/repos/airbnb/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/airbnb/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/airbnb/synapse/teams", "hooks_url": "https://api.github.com/repos/airbnb/synapse/hooks", "issue_events_url": "https://api.github.com/repos/airbnb/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/airbnb/synapse/events", "assignees_url": "https://api.github.com/repos/airbnb/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/airbnb/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/airbnb/synapse/tags", "blobs_url": "https://api.github.com/repos/airbnb/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/airbnb/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/airbnb/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/airbnb/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/airbnb/synapse/languages", "stargazers_url": "https://api.github.com/repos/airbnb/synapse/stargazers", "contributors_url": "https://api.github.com/repos/airbnb/synapse/contributors", "subscribers_url": "https://api.github.com/repos/airbnb/synapse/subscribers", "subscription_url": "https://api.github.com/repos/airbnb/synapse/subscription", "commits_url": "https://api.github.com/repos/airbnb/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/airbnb/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/airbnb/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/airbnb/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/airbnb/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/airbnb/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/airbnb/synapse/merges", "archive_url": "https://api.github.com/repos/airbnb/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/airbnb/synapse/downloads", "issues_url": "https://api.github.com/repos/airbnb/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/airbnb/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/airbnb/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/airbnb/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/airbnb/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/airbnb/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/airbnb/synapse/deployments", "created_at": "2012-11-09T03:03:06Z", "updated_at": "2018-01-22T12:26:59Z", "pushed_at": "2018-01-13T00:21:50Z", "git_url": "git://github.com/airbnb/synapse.git", "ssh_url": "git@github.com:airbnb/synapse.git", "clone_url": "https://github.com/airbnb/synapse.git", "svn_url": "https://github.com/airbnb/synapse", "homepage": "", "size": 630, "stargazers_count": 1753, "watchers_count": 1753, "language": "Ruby", "has_issues": true, "has_projects": false, "has_downloads": true, "has_wiki": false, "has_pages": false, "forks_count": 237, "mirror_url": null, "archived": false, "open_issues_count": 47, "license": {"key": "mit", "name": "MIT License", "spdx_id": "MIT", "url": "https://api.github.com/licenses/mit"}, "forks": 237, "open_issues": 47, "watchers": 1753, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/118"}, "html": {"href": "https://github.com/airbnb/synapse/pull/118"}, "issue": {"href": "https://api.github.com/repos/airbnb/synapse/issues/118"}, "comments": {"href": "https://api.github.com/repos/airbnb/synapse/issues/118/comments"}, "review_comments": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/118/comments"}, "review_comment": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/118/commits"}, "statuses": {"href": "https://api.github.com/repos/airbnb/synapse/statuses/3b8d7dd8e436e6471fce5bbf8a8a8761fb715b0f"}}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/116", "id": 31385424, "html_url": "https://github.com/airbnb/synapse/pull/116", "diff_url": "https://github.com/airbnb/synapse/pull/116.diff", "patch_url": "https://github.com/airbnb/synapse/pull/116.patch", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/116", "number": 116, "state": "open", "locked": false, "title": "Update Rakefile", "user": {"login": "worldsouptester", "id": 6422216, "avatar_url": "https://avatars1.githubusercontent.com/u/6422216?v=4", "gravatar_id": "", "url": "https://api.github.com/users/worldsouptester", "html_url": "https://github.com/worldsouptester", "followers_url": "https://api.github.com/users/worldsouptester/followers", "following_url": "https://api.github.com/users/worldsouptester/following{/other_user}", "gists_url": "https://api.github.com/users/worldsouptester/gists{/gist_id}", "starred_url": "https://api.github.com/users/worldsouptester/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/worldsouptester/subscriptions", "organizations_url": "https://api.github.com/users/worldsouptester/orgs", "repos_url": "https://api.github.com/users/worldsouptester/repos", "events_url": "https://api.github.com/users/worldsouptester/events{/privacy}", "received_events_url": "https://api.github.com/users/worldsouptester/received_events", "type": "User", "site_admin": false}, "body": "", "created_at": "2015-03-17T22:41:47Z", "updated_at": "2016-05-26T23:16:49Z", "closed_at": null, "merged_at": null, "merge_commit_sha": "8244df3e9f38dca5efe4472f5ba3940747648d26", "assignee": null, "assignees": [], "requested_reviewers": [], "milestone": null, "commits_url": "https://api.github.com/repos/airbnb/synapse/pulls/116/commits", "review_comments_url": "https://api.github.com/repos/airbnb/synapse/pulls/116/comments", "review_comment_url": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/116/comments", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/c9e1a8d6734ef43a8dd4a8a4b4c749901b7adba6", "head": {"label": "worldsouptester:td-test", "ref": "td-test", "sha": "c9e1a8d6734ef43a8dd4a8a4b4c749901b7adba6", "user": {"login": "worldsouptester", "id": 6422216, "avatar_url": "https://avatars1.githubusercontent.com/u/6422216?v=4", "gravatar_id": "", "url": "https://api.github.com/users/worldsouptester", "html_url": "https://github.com/worldsouptester", "followers_url": "https://api.github.com/users/worldsouptester/followers", "following_url": "https://api.github.com/users/worldsouptester/following{/other_user}", "gists_url": "https://api.github.com/users/worldsouptester/gists{/gist_id}", "starred_url": "https://api.github.com/users/worldsouptester/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/worldsouptester/subscriptions", "organizations_url": "https://api.github.com/users/worldsouptester/orgs", "repos_url": "https://api.github.com/users/worldsouptester/repos", "events_url": "https://api.github.com/users/worldsouptester/events{/privacy}", "received_events_url": "https://api.github.com/users/worldsouptester/received_events", "type": "User", "site_admin": false}, "repo": {"id": 29605034, "name": "synapse", "full_name": "worldsouptester/synapse", "owner": {"login": "worldsouptester", "id": 6422216, "avatar_url": "https://avatars1.githubusercontent.com/u/6422216?v=4", "gravatar_id": "", "url": "https://api.github.com/users/worldsouptester", "html_url": "https://github.com/worldsouptester", "followers_url": "https://api.github.com/users/worldsouptester/followers", "following_url": "https://api.github.com/users/worldsouptester/following{/other_user}", "gists_url": "https://api.github.com/users/worldsouptester/gists{/gist_id}", "starred_url": "https://api.github.com/users/worldsouptester/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/worldsouptester/subscriptions", "organizations_url": "https://api.github.com/users/worldsouptester/orgs", "repos_url": "https://api.github.com/users/worldsouptester/repos", "events_url": "https://api.github.com/users/worldsouptester/events{/privacy}", "received_events_url": "https://api.github.com/users/worldsouptester/received_events", "type": "User", "site_admin": false}, "private": false, "html_url": "https://github.com/worldsouptester/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": true, "url": "https://api.github.com/repos/worldsouptester/synapse", "forks_url": "https://api.github.com/repos/worldsouptester/synapse/forks", "keys_url": "https://api.github.com/repos/worldsouptester/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/worldsouptester/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/worldsouptester/synapse/teams", "hooks_url": "https://api.github.com/repos/worldsouptester/synapse/hooks", "issue_events_url": "https://api.github.com/repos/worldsouptester/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/worldsouptester/synapse/events", "assignees_url": "https://api.github.com/repos/worldsouptester/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/worldsouptester/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/worldsouptester/synapse/tags", "blobs_url": "https://api.github.com/repos/worldsouptester/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/worldsouptester/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/worldsouptester/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/worldsouptester/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/worldsouptester/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/worldsouptester/synapse/languages", "stargazers_url": "https://api.github.com/repos/worldsouptester/synapse/stargazers", "contributors_url": "https://api.github.com/repos/worldsouptester/synapse/contributors", "subscribers_url": "https://api.github.com/repos/worldsouptester/synapse/subscribers", "subscription_url": "https://api.github.com/repos/worldsouptester/synapse/subscription", "commits_url": "https://api.github.com/repos/worldsouptester/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/worldsouptester/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/worldsouptester/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/worldsouptester/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/worldsouptester/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/worldsouptester/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/worldsouptester/synapse/merges", "archive_url": "https://api.github.com/repos/worldsouptester/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/worldsouptester/synapse/downloads", "issues_url": "https://api.github.com/repos/worldsouptester/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/worldsouptester/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/worldsouptester/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/worldsouptester/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/worldsouptester/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/worldsouptester/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/worldsouptester/synapse/deployments", "created_at": "2015-01-21T18:38:42Z", "updated_at": "2015-01-21T18:38:42Z", "pushed_at": "2015-03-17T22:41:40Z", "git_url": "git://github.com/worldsouptester/synapse.git", "ssh_url": "git@github.com:worldsouptester/synapse.git", "clone_url": "https://github.com/worldsouptester/synapse.git", "svn_url": "https://github.com/worldsouptester/synapse", "homepage": "", "size": 385, "stargazers_count": 0, "watchers_count": 0, "language": "Ruby", "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "forks_count": 0, "mirror_url": null, "archived": false, "open_issues_count": 0, "license": {"key": "mit", "name": "MIT License", "spdx_id": "MIT", "url": "https://api.github.com/licenses/mit"}, "forks": 0, "open_issues": 0, "watchers": 0, "default_branch": "master"}}, "base": {"label": "airbnb:master", "ref": "master", "sha": "11e27483789d479ebc8d4d8062b6c549cfb35675", "user": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 6607851, "name": "synapse", "full_name": "airbnb/synapse", "owner": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "private": false, "html_url": "https://github.com/airbnb/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": false, "url": "https://api.github.com/repos/airbnb/synapse", "forks_url": "https://api.github.com/repos/airbnb/synapse/forks", "keys_url": "https://api.github.com/repos/airbnb/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/airbnb/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/airbnb/synapse/teams", "hooks_url": "https://api.github.com/repos/airbnb/synapse/hooks", "issue_events_url": "https://api.github.com/repos/airbnb/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/airbnb/synapse/events", "assignees_url": "https://api.github.com/repos/airbnb/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/airbnb/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/airbnb/synapse/tags", "blobs_url": "https://api.github.com/repos/airbnb/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/airbnb/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/airbnb/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/airbnb/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/airbnb/synapse/languages", "stargazers_url": "https://api.github.com/repos/airbnb/synapse/stargazers", "contributors_url": "https://api.github.com/repos/airbnb/synapse/contributors", "subscribers_url": "https://api.github.com/repos/airbnb/synapse/subscribers", "subscription_url": "https://api.github.com/repos/airbnb/synapse/subscription", "commits_url": "https://api.github.com/repos/airbnb/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/airbnb/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/airbnb/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/airbnb/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/airbnb/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/airbnb/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/airbnb/synapse/merges", "archive_url": "https://api.github.com/repos/airbnb/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/airbnb/synapse/downloads", "issues_url": "https://api.github.com/repos/airbnb/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/airbnb/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/airbnb/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/airbnb/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/airbnb/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/airbnb/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/airbnb/synapse/deployments", "created_at": "2012-11-09T03:03:06Z", "updated_at": "2018-01-22T12:26:59Z", "pushed_at": "2018-01-13T00:21:50Z", "git_url": "git://github.com/airbnb/synapse.git", "ssh_url": "git@github.com:airbnb/synapse.git", "clone_url": "https://github.com/airbnb/synapse.git", "svn_url": "https://github.com/airbnb/synapse", "homepage": "", "size": 630, "stargazers_count": 1753, "watchers_count": 1753, "language": "Ruby", "has_issues": true, "has_projects": false, "has_downloads": true, "has_wiki": false, "has_pages": false, "forks_count": 237, "mirror_url": null, "archived": false, "open_issues_count": 47, "license": {"key": "mit", "name": "MIT License", "spdx_id": "MIT", "url": "https://api.github.com/licenses/mit"}, "forks": 237, "open_issues": 47, "watchers": 1753, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/116"}, "html": {"href": "https://github.com/airbnb/synapse/pull/116"}, "issue": {"href": "https://api.github.com/repos/airbnb/synapse/issues/116"}, "comments": {"href": "https://api.github.com/repos/airbnb/synapse/issues/116/comments"}, "review_comments": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/116/comments"}, "review_comment": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/116/commits"}, "statuses": {"href": "https://api.github.com/repos/airbnb/synapse/statuses/c9e1a8d6734ef43a8dd4a8a4b4c749901b7adba6"}}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/114", "id": 30476400, "html_url": "https://github.com/airbnb/synapse/pull/114", "diff_url": "https://github.com/airbnb/synapse/pull/114.diff", "patch_url": "https://github.com/airbnb/synapse/pull/114.patch", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/114", "number": 114, "state": "open", "locked": false, "title": "SRV support for dns watcher", "user": {"login": "danieleva", "id": 6079455, "avatar_url": "https://avatars2.githubusercontent.com/u/6079455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danieleva", "html_url": "https://github.com/danieleva", "followers_url": "https://api.github.com/users/danieleva/followers", "following_url": "https://api.github.com/users/danieleva/following{/other_user}", "gists_url": "https://api.github.com/users/danieleva/gists{/gist_id}", "starred_url": "https://api.github.com/users/danieleva/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danieleva/subscriptions", "organizations_url": "https://api.github.com/users/danieleva/orgs", "repos_url": "https://api.github.com/users/danieleva/repos", "events_url": "https://api.github.com/users/danieleva/events{/privacy}", "received_events_url": "https://api.github.com/users/danieleva/received_events", "type": "User", "site_admin": false}, "body": "Accepts an optional \"srv\" field in the servers definition. The port will be fetched from the srv record, with fallback on the \"port\" field in case of failure/empty value\n", "created_at": "2015-03-04T15:48:08Z", "updated_at": "2016-05-26T23:16:49Z", "closed_at": null, "merged_at": null, "merge_commit_sha": "2454f8119a6020b024410ce60992cffa45b1f7a4", "assignee": null, "assignees": [], "requested_reviewers": [], "milestone": null, "commits_url": "https://api.github.com/repos/airbnb/synapse/pulls/114/commits", "review_comments_url": "https://api.github.com/repos/airbnb/synapse/pulls/114/comments", "review_comment_url": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/114/comments", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/5d17a5228315b3445d38d24e3ca414a131507f15", "head": {"label": "smartboxgroup:dns_SRV_support", "ref": "dns_SRV_support", "sha": "5d17a5228315b3445d38d24e3ca414a131507f15", "user": {"login": "smartboxgroup", "id": 8255219, "avatar_url": "https://avatars1.githubusercontent.com/u/8255219?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smartboxgroup", "html_url": "https://github.com/smartboxgroup", "followers_url": "https://api.github.com/users/smartboxgroup/followers", "following_url": "https://api.github.com/users/smartboxgroup/following{/other_user}", "gists_url": "https://api.github.com/users/smartboxgroup/gists{/gist_id}", "starred_url": "https://api.github.com/users/smartboxgroup/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smartboxgroup/subscriptions", "organizations_url": "https://api.github.com/users/smartboxgroup/orgs", "repos_url": "https://api.github.com/users/smartboxgroup/repos", "events_url": "https://api.github.com/users/smartboxgroup/events{/privacy}", "received_events_url": "https://api.github.com/users/smartboxgroup/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 31649236, "name": "synapse", "full_name": "smartboxgroup/synapse", "owner": {"login": "smartboxgroup", "id": 8255219, "avatar_url": "https://avatars1.githubusercontent.com/u/8255219?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smartboxgroup", "html_url": "https://github.com/smartboxgroup", "followers_url": "https://api.github.com/users/smartboxgroup/followers", "following_url": "https://api.github.com/users/smartboxgroup/following{/other_user}", "gists_url": "https://api.github.com/users/smartboxgroup/gists{/gist_id}", "starred_url": "https://api.github.com/users/smartboxgroup/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smartboxgroup/subscriptions", "organizations_url": "https://api.github.com/users/smartboxgroup/orgs", "repos_url": "https://api.github.com/users/smartboxgroup/repos", "events_url": "https://api.github.com/users/smartboxgroup/events{/privacy}", "received_events_url": "https://api.github.com/users/smartboxgroup/received_events", "type": "Organization", "site_admin": false}, "private": false, "html_url": "https://github.com/smartboxgroup/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": true, "url": "https://api.github.com/repos/smartboxgroup/synapse", "forks_url": "https://api.github.com/repos/smartboxgroup/synapse/forks", "keys_url": "https://api.github.com/repos/smartboxgroup/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/smartboxgroup/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/smartboxgroup/synapse/teams", "hooks_url": "https://api.github.com/repos/smartboxgroup/synapse/hooks", "issue_events_url": "https://api.github.com/repos/smartboxgroup/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/smartboxgroup/synapse/events", "assignees_url": "https://api.github.com/repos/smartboxgroup/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/smartboxgroup/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/smartboxgroup/synapse/tags", "blobs_url": "https://api.github.com/repos/smartboxgroup/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/smartboxgroup/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/smartboxgroup/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/smartboxgroup/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/smartboxgroup/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/smartboxgroup/synapse/languages", "stargazers_url": "https://api.github.com/repos/smartboxgroup/synapse/stargazers", "contributors_url": "https://api.github.com/repos/smartboxgroup/synapse/contributors", "subscribers_url": "https://api.github.com/repos/smartboxgroup/synapse/subscribers", "subscription_url": "https://api.github.com/repos/smartboxgroup/synapse/subscription", "commits_url": "https://api.github.com/repos/smartboxgroup/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/smartboxgroup/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/smartboxgroup/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/smartboxgroup/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/smartboxgroup/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/smartboxgroup/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/smartboxgroup/synapse/merges", "archive_url": "https://api.github.com/repos/smartboxgroup/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/smartboxgroup/synapse/downloads", "issues_url": "https://api.github.com/repos/smartboxgroup/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/smartboxgroup/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/smartboxgroup/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/smartboxgroup/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/smartboxgroup/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/smartboxgroup/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/smartboxgroup/synapse/deployments", "created_at": "2015-03-04T09:39:26Z", "updated_at": "2015-03-04T15:50:28Z", "pushed_at": "2015-03-04T15:50:28Z", "git_url": "git://github.com/smartboxgroup/synapse.git", "ssh_url": "git@github.com:smartboxgroup/synapse.git", "clone_url": "https://github.com/smartboxgroup/synapse.git", "svn_url": "https://github.com/smartboxgroup/synapse", "homepage": "", "size": 386, "stargazers_count": 0, "watchers_count": 0, "language": "Ruby", "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "forks_count": 0, "mirror_url": null, "archived": false, "open_issues_count": 0, "license": {"key": "mit", "name": "MIT License", "spdx_id": "MIT", "url": "https://api.github.com/licenses/mit"}, "forks": 0, "open_issues": 0, "watchers": 0, "default_branch": "master"}}, "base": {"label": "airbnb:master", "ref": "master", "sha": "11e27483789d479ebc8d4d8062b6c549cfb35675", "user": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 6607851, "name": "synapse", "full_name": "airbnb/synapse", "owner": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "private": false, "html_url": "https://github.com/airbnb/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": false, "url": "https://api.github.com/repos/airbnb/synapse", "forks_url": "https://api.github.com/repos/airbnb/synapse/forks", "keys_url": "https://api.github.com/repos/airbnb/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/airbnb/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/airbnb/synapse/teams", "hooks_url": "https://api.github.com/repos/airbnb/synapse/hooks", "issue_events_url": "https://api.github.com/repos/airbnb/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/airbnb/synapse/events", "assignees_url": "https://api.github.com/repos/airbnb/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/airbnb/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/airbnb/synapse/tags", "blobs_url": "https://api.github.com/repos/airbnb/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/airbnb/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/airbnb/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/airbnb/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/airbnb/synapse/languages", "stargazers_url": "https://api.github.com/repos/airbnb/synapse/stargazers", "contributors_url": "https://api.github.com/repos/airbnb/synapse/contributors", "subscribers_url": "https://api.github.com/repos/airbnb/synapse/subscribers", "subscription_url": "https://api.github.com/repos/airbnb/synapse/subscription", "commits_url": "https://api.github.com/repos/airbnb/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/airbnb/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/airbnb/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/airbnb/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/airbnb/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/airbnb/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/airbnb/synapse/merges", "archive_url": "https://api.github.com/repos/airbnb/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/airbnb/synapse/downloads", "issues_url": "https://api.github.com/repos/airbnb/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/airbnb/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/airbnb/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/airbnb/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/airbnb/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/airbnb/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/airbnb/synapse/deployments", "created_at": "2012-11-09T03:03:06Z", "updated_at": "2018-01-22T12:26:59Z", "pushed_at": "2018-01-13T00:21:50Z", "git_url": "git://github.com/airbnb/synapse.git", "ssh_url": "git@github.com:airbnb/synapse.git", "clone_url": "https://github.com/airbnb/synapse.git", "svn_url": "https://github.com/airbnb/synapse", "homepage": "", "size": 630, "stargazers_count": 1753, "watchers_count": 1753, "language": "Ruby", "has_issues": true, "has_projects": false, "has_downloads": true, "has_wiki": false, "has_pages": false, "forks_count": 237, "mirror_url": null, "archived": false, "open_issues_count": 47, "license": {"key": "mit", "name": "MIT License", "spdx_id": "MIT", "url": "https://api.github.com/licenses/mit"}, "forks": 237, "open_issues": 47, "watchers": 1753, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/114"}, "html": {"href": "https://github.com/airbnb/synapse/pull/114"}, "issue": {"href": "https://api.github.com/repos/airbnb/synapse/issues/114"}, "comments": {"href": "https://api.github.com/repos/airbnb/synapse/issues/114/comments"}, "review_comments": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/114/comments"}, "review_comment": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/114/commits"}, "statuses": {"href": "https://api.github.com/repos/airbnb/synapse/statuses/5d17a5228315b3445d38d24e3ca414a131507f15"}}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/108", "id": 27938480, "html_url": "https://github.com/airbnb/synapse/pull/108", "diff_url": "https://github.com/airbnb/synapse/pull/108.diff", "patch_url": "https://github.com/airbnb/synapse/pull/108.patch", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/108", "number": 108, "state": "open", "locked": false, "title": "Update example configs for DNS", "user": {"login": "ajohnstone", "id": 173567, "avatar_url": "https://avatars1.githubusercontent.com/u/173567?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ajohnstone", "html_url": "https://github.com/ajohnstone", "followers_url": "https://api.github.com/users/ajohnstone/followers", "following_url": "https://api.github.com/users/ajohnstone/following{/other_user}", "gists_url": "https://api.github.com/users/ajohnstone/gists{/gist_id}", "starred_url": "https://api.github.com/users/ajohnstone/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ajohnstone/subscriptions", "organizations_url": "https://api.github.com/users/ajohnstone/orgs", "repos_url": "https://api.github.com/users/ajohnstone/repos", "events_url": "https://api.github.com/users/ajohnstone/events{/privacy}", "received_events_url": "https://api.github.com/users/ajohnstone/received_events", "type": "User", "site_admin": false}, "body": "", "created_at": "2015-01-23T17:02:29Z", "updated_at": "2016-05-26T23:16:48Z", "closed_at": null, "merged_at": null, "merge_commit_sha": "58cd67c868b127ceae94ec3f2475a6302f2053bc", "assignee": null, "assignees": [], "requested_reviewers": [], "milestone": null, "commits_url": "https://api.github.com/repos/airbnb/synapse/pulls/108/commits", "review_comments_url": "https://api.github.com/repos/airbnb/synapse/pulls/108/comments", "review_comment_url": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/108/comments", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/4b8382c97f391c7f729f1f1db194c4e577bed657", "head": {"label": "ajohnstone:correct-example-configs", "ref": "correct-example-configs", "sha": "4b8382c97f391c7f729f1f1db194c4e577bed657", "user": {"login": "ajohnstone", "id": 173567, "avatar_url": "https://avatars1.githubusercontent.com/u/173567?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ajohnstone", "html_url": "https://github.com/ajohnstone", "followers_url": "https://api.github.com/users/ajohnstone/followers", "following_url": "https://api.github.com/users/ajohnstone/following{/other_user}", "gists_url": "https://api.github.com/users/ajohnstone/gists{/gist_id}", "starred_url": "https://api.github.com/users/ajohnstone/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ajohnstone/subscriptions", "organizations_url": "https://api.github.com/users/ajohnstone/orgs", "repos_url": "https://api.github.com/users/ajohnstone/repos", "events_url": "https://api.github.com/users/ajohnstone/events{/privacy}", "received_events_url": "https://api.github.com/users/ajohnstone/received_events", "type": "User", "site_admin": false}, "repo": {"id": 29688748, "name": "synapse", "full_name": "ajohnstone/synapse", "owner": {"login": "ajohnstone", "id": 173567, "avatar_url": "https://avatars1.githubusercontent.com/u/173567?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ajohnstone", "html_url": "https://github.com/ajohnstone", "followers_url": "https://api.github.com/users/ajohnstone/followers", "following_url": "https://api.github.com/users/ajohnstone/following{/other_user}", "gists_url": "https://api.github.com/users/ajohnstone/gists{/gist_id}", "starred_url": "https://api.github.com/users/ajohnstone/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ajohnstone/subscriptions", "organizations_url": "https://api.github.com/users/ajohnstone/orgs", "repos_url": "https://api.github.com/users/ajohnstone/repos", "events_url": "https://api.github.com/users/ajohnstone/events{/privacy}", "received_events_url": "https://api.github.com/users/ajohnstone/received_events", "type": "User", "site_admin": false}, "private": false, "html_url": "https://github.com/ajohnstone/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": true, "url": "https://api.github.com/repos/ajohnstone/synapse", "forks_url": "https://api.github.com/repos/ajohnstone/synapse/forks", "keys_url": "https://api.github.com/repos/ajohnstone/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/ajohnstone/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/ajohnstone/synapse/teams", "hooks_url": "https://api.github.com/repos/ajohnstone/synapse/hooks", "issue_events_url": "https://api.github.com/repos/ajohnstone/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/ajohnstone/synapse/events", "assignees_url": "https://api.github.com/repos/ajohnstone/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/ajohnstone/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/ajohnstone/synapse/tags", "blobs_url": "https://api.github.com/repos/ajohnstone/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/ajohnstone/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/ajohnstone/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/ajohnstone/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/ajohnstone/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/ajohnstone/synapse/languages", "stargazers_url": "https://api.github.com/repos/ajohnstone/synapse/stargazers", "contributors_url": "https://api.github.com/repos/ajohnstone/synapse/contributors", "subscribers_url": "https://api.github.com/repos/ajohnstone/synapse/subscribers", "subscription_url": "https://api.github.com/repos/ajohnstone/synapse/subscription", "commits_url": "https://api.github.com/repos/ajohnstone/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/ajohnstone/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/ajohnstone/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/ajohnstone/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/ajohnstone/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/ajohnstone/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/ajohnstone/synapse/merges", "archive_url": "https://api.github.com/repos/ajohnstone/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/ajohnstone/synapse/downloads", "issues_url": "https://api.github.com/repos/ajohnstone/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/ajohnstone/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/ajohnstone/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/ajohnstone/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/ajohnstone/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/ajohnstone/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/ajohnstone/synapse/deployments", "created_at": "2015-01-22T16:42:29Z", "updated_at": "2015-01-22T16:42:30Z", "pushed_at": "2015-01-23T17:02:19Z", "git_url": "git://github.com/ajohnstone/synapse.git", "ssh_url": "git@github.com:ajohnstone/synapse.git", "clone_url": "https://github.com/ajohnstone/synapse.git", "svn_url": "https://github.com/ajohnstone/synapse", "homepage": "", "size": 386, "stargazers_count": 0, "watchers_count": 0, "language": "Ruby", "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "forks_count": 0, "mirror_url": null, "archived": false, "open_issues_count": 0, "license": {"key": "mit", "name": "MIT License", "spdx_id": "MIT", "url": "https://api.github.com/licenses/mit"}, "forks": 0, "open_issues": 0, "watchers": 0, "default_branch": "master"}}, "base": {"label": "airbnb:master", "ref": "master", "sha": "11e27483789d479ebc8d4d8062b6c549cfb35675", "user": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 6607851, "name": "synapse", "full_name": "airbnb/synapse", "owner": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "private": false, "html_url": "https://github.com/airbnb/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": false, "url": "https://api.github.com/repos/airbnb/synapse", "forks_url": "https://api.github.com/repos/airbnb/synapse/forks", "keys_url": "https://api.github.com/repos/airbnb/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/airbnb/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/airbnb/synapse/teams", "hooks_url": "https://api.github.com/repos/airbnb/synapse/hooks", "issue_events_url": "https://api.github.com/repos/airbnb/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/airbnb/synapse/events", "assignees_url": "https://api.github.com/repos/airbnb/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/airbnb/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/airbnb/synapse/tags", "blobs_url": "https://api.github.com/repos/airbnb/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/airbnb/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/airbnb/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/airbnb/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/airbnb/synapse/languages", "stargazers_url": "https://api.github.com/repos/airbnb/synapse/stargazers", "contributors_url": "https://api.github.com/repos/airbnb/synapse/contributors", "subscribers_url": "https://api.github.com/repos/airbnb/synapse/subscribers", "subscription_url": "https://api.github.com/repos/airbnb/synapse/subscription", "commits_url": "https://api.github.com/repos/airbnb/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/airbnb/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/airbnb/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/airbnb/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/airbnb/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/airbnb/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/airbnb/synapse/merges", "archive_url": "https://api.github.com/repos/airbnb/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/airbnb/synapse/downloads", "issues_url": "https://api.github.com/repos/airbnb/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/airbnb/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/airbnb/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/airbnb/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/airbnb/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/airbnb/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/airbnb/synapse/deployments", "created_at": "2012-11-09T03:03:06Z", "updated_at": "2018-01-22T12:26:59Z", "pushed_at": "2018-01-13T00:21:50Z", "git_url": "git://github.com/airbnb/synapse.git", "ssh_url": "git@github.com:airbnb/synapse.git", "clone_url": "https://github.com/airbnb/synapse.git", "svn_url": "https://github.com/airbnb/synapse", "homepage": "", "size": 630, "stargazers_count": 1753, "watchers_count": 1753, "language": "Ruby", "has_issues": true, "has_projects": false, "has_downloads": true, "has_wiki": false, "has_pages": false, "forks_count": 237, "mirror_url": null, "archived": false, "open_issues_count": 47, "license": {"key": "mit", "name": "MIT License", "spdx_id": "MIT", "url": "https://api.github.com/licenses/mit"}, "forks": 237, "open_issues": 47, "watchers": 1753, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/108"}, "html": {"href": "https://github.com/airbnb/synapse/pull/108"}, "issue": {"href": "https://api.github.com/repos/airbnb/synapse/issues/108"}, "comments": {"href": "https://api.github.com/repos/airbnb/synapse/issues/108/comments"}, "review_comments": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/108/comments"}, "review_comment": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/108/commits"}, "statuses": {"href": "https://api.github.com/repos/airbnb/synapse/statuses/4b8382c97f391c7f729f1f1db194c4e577bed657"}}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/91", "id": 20741449, "html_url": "https://github.com/airbnb/synapse/pull/91", "diff_url": "https://github.com/airbnb/synapse/pull/91.diff", "patch_url": "https://github.com/airbnb/synapse/pull/91.patch", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/91", "number": 91, "state": "open", "locked": false, "title": "Feature/addressable ips", "user": {"login": "csconnell", "id": 981156, "avatar_url": "https://avatars0.githubusercontent.com/u/981156?v=4", "gravatar_id": "", "url": "https://api.github.com/users/csconnell", "html_url": "https://github.com/csconnell", "followers_url": "https://api.github.com/users/csconnell/followers", "following_url": "https://api.github.com/users/csconnell/following{/other_user}", "gists_url": "https://api.github.com/users/csconnell/gists{/gist_id}", "starred_url": "https://api.github.com/users/csconnell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/csconnell/subscriptions", "organizations_url": "https://api.github.com/users/csconnell/orgs", "repos_url": "https://api.github.com/users/csconnell/repos", "events_url": "https://api.github.com/users/csconnell/events{/privacy}", "received_events_url": "https://api.github.com/users/csconnell/received_events", "type": "User", "site_admin": false}, "body": "These changes provide a way to update the HAProxy config for docker containers that are on addressable IPs (i.e IP addresses reachable on the network / outside of the local docker host).  The change allows you to provide a discovery setting of \"addressable_ip\" for docker discovered services as shown below:\n\n``` JSON\n\"services\": {\n    \"local-nodes\": {\n      \"discovery\": {\n        \"method\": \"docker\",\n        \"addressable_ip\": \"true\",\n        \"servers\": [\n          {\n            \"name\": \"localhost\",\n            \"host\": \"192.168.224.2\",\n            \"port\": 4243\n          }\n    ],\n    \"container_port\": 8000,\n        \"image_name\": \"local/testapp\"\n      },\n      \"haproxy\": {\n        \"port\": 9091,\n      }\n```\n\nThis change then looks up the actual IP address of the docker container instead of using the docker host and then uses the private port of the service.  The change does not affect the previous functionality - both services with non-addressable IPs and those with addressable IPs are properly written to the HAProxy config.  So a synapse config file that looks like this:\n\n``` JSON\n{\n  \"services\": {\n    \"local-nodes\": {\n      \"discovery\": {\n        \"method\": \"docker\",\n        \"addressable_ip\": \"true\",\n        \"servers\": [\n          {\n            \"name\": \"localhost\",\n            \"host\": \"192.168.224.2\",\n            \"port\": 4243\n          }\n    ],\n    \"container_port\": 8000,\n        \"image_name\": \"local/testapp\"\n      },\n      \"haproxy\": {\n        \"port\": 9091,\n\n      }\n\n    },\n    \"remote-nodes\":{\n      \"discovery\": {\n        \"method\": \"docker\",\n        \"servers\": [\n          {\n            \"name\": \"cconnell3\",\n            \"host\": \"192.168.222.153\",\n        \"port\": 4243\n      }\n        ],\n      \"container_port\": 8000,\n        \"image_name\": \"local/testapp\"\n      },\n      \"haproxy\": {\n        \"port\": 9091,\n\n      }\n\n    },\n    \"proxy-clients\": {\n      \"discovery\": {\n        \"method\": \"docker\",\n        \"addressable_ip\": \"true\",\n        \"servers\": [\n          {\n            \"name\": \"localhost\",\n            \"host\": \"192.168.224.2\",\n            \"port\": 4243\n      }\n        ],\n        \"container_port\": 9090,\n        \"image_name\": \"local/proxy-node\"\n      },\n      \"haproxy\": {\n        \"port\": 9090,\n\n      }\n\n    },\n\n  },\n\"haproxy\": {\n    \"reload_command\": \"systemctl reload haproxy.service\",\n    \"config_file_path\": \"/etc/haproxy/haproxy.cfg\",\n    \"do_writes\": true,\n    \"do_reloads\": true,\n    \"bind_address\": \"*\",\n    \"global\": [\n      \"daemon\",\n      \"maxconn 4096\",\n    ],\n    \"defaults\": [\n      \"maxconn  2000\",\n      \"timeout  connect 5s\",\n      \"timeout  client  1m\",\n      \"timeout  server  1m\",\n      \"mode http\",\n    ],\n  }\n}\n```\n\nwill result in an haproxy config like:\n\n```\n# auto-generated by synapse at 2014-09-03 16:04:10 -0400\n\nglobal\n        daemon\n    maxconn 4096\ndefaults\n        maxconn  2000\n        timeout  connect 5s\n        timeout  client  1m\n        timeout  server  1m\n        mode http\n\nfrontend local-nodes\n        bind *:9091\n        default_backend local-nodes\n\nbackend local-nodes\n        server 192.168.224.19:8000_27f8db643d74 192.168.224.19:8000 cookie 192.168.224.19:8000_27f8db643d74\n        server 192.168.224.22:8000_c5dd48c1adac 192.168.224.22:8000 cookie 192.168.224.22:8000_c5dd48c1adac\n        server 192.168.224.18:8000_df6616b4e4af 192.168.224.18:8000 cookie 192.168.224.18:8000_df6616b4e4af\n\nfrontend remote-nodes\n        bind *:9091\n        default_backend remote-nodes\n\nbackend remote-nodes\n        server 192.168.222.153:49155_cconnell3 192.168.222.153:49155 cookie 192.168.222.153:49155_cconnell3\n        server 192.168.222.153:49154_cconnell3 192.168.222.153:49154 cookie 192.168.222.153:49154_cconnell3\n        server 192.168.222.153:49153_cconnell3 192.168.222.153:49153 cookie 192.168.222.153:49153_cconnell3\n\nfrontend proxy-clients\n        bind *:9090\n        default_backend proxy-clients\n\nbackend proxy-clients\n        server 192.168.224.28:9090_sel-node-6 192.168.224.28:9090 cookie 192.168.224.28:9090_sel-node-6\n        server 192.168.224.29:9090_sel-node-7 192.168.224.29:9090 cookie 192.168.224.29:9090_sel-node-7\n        server 192.168.224.25:9090_sel-node-4 192.168.224.25:9090 cookie 192.168.224.25:9090_sel-node-4\n        server 192.168.224.30:9090_sel-node-8 192.168.224.30:9090 cookie 192.168.224.30:9090_sel-node-8\n        server 192.168.224.24:9090_sel-node-3 192.168.224.24:9090 cookie 192.168.224.24:9090_sel-node-3\n        server 192.168.224.27:9090_sel-node-5 192.168.224.27:9090 cookie 192.168.224.27:9090_sel-node-5\n```\n", "created_at": "2014-09-04T12:59:57Z", "updated_at": "2016-05-26T23:16:48Z", "closed_at": null, "merged_at": null, "merge_commit_sha": "fae871cd858fa58595ad9af4b13188a4315ad79a", "assignee": null, "assignees": [], "requested_reviewers": [], "milestone": null, "commits_url": "https://api.github.com/repos/airbnb/synapse/pulls/91/commits", "review_comments_url": "https://api.github.com/repos/airbnb/synapse/pulls/91/comments", "review_comment_url": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/91/comments", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/6ae5b8073251418ddce86d8294e6f9fd8cb040b5", "head": {"label": "csconnell:feature/addressable_ips", "ref": "feature/addressable_ips", "sha": "6ae5b8073251418ddce86d8294e6f9fd8cb040b5", "user": {"login": "csconnell", "id": 981156, "avatar_url": "https://avatars0.githubusercontent.com/u/981156?v=4", "gravatar_id": "", "url": "https://api.github.com/users/csconnell", "html_url": "https://github.com/csconnell", "followers_url": "https://api.github.com/users/csconnell/followers", "following_url": "https://api.github.com/users/csconnell/following{/other_user}", "gists_url": "https://api.github.com/users/csconnell/gists{/gist_id}", "starred_url": "https://api.github.com/users/csconnell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/csconnell/subscriptions", "organizations_url": "https://api.github.com/users/csconnell/orgs", "repos_url": "https://api.github.com/users/csconnell/repos", "events_url": "https://api.github.com/users/csconnell/events{/privacy}", "received_events_url": "https://api.github.com/users/csconnell/received_events", "type": "User", "site_admin": false}, "repo": {"id": 23471848, "name": "synapse", "full_name": "csconnell/synapse", "owner": {"login": "csconnell", "id": 981156, "avatar_url": "https://avatars0.githubusercontent.com/u/981156?v=4", "gravatar_id": "", "url": "https://api.github.com/users/csconnell", "html_url": "https://github.com/csconnell", "followers_url": "https://api.github.com/users/csconnell/followers", "following_url": "https://api.github.com/users/csconnell/following{/other_user}", "gists_url": "https://api.github.com/users/csconnell/gists{/gist_id}", "starred_url": "https://api.github.com/users/csconnell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/csconnell/subscriptions", "organizations_url": "https://api.github.com/users/csconnell/orgs", "repos_url": "https://api.github.com/users/csconnell/repos", "events_url": "https://api.github.com/users/csconnell/events{/privacy}", "received_events_url": "https://api.github.com/users/csconnell/received_events", "type": "User", "site_admin": false}, "private": false, "html_url": "https://github.com/csconnell/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": true, "url": "https://api.github.com/repos/csconnell/synapse", "forks_url": "https://api.github.com/repos/csconnell/synapse/forks", "keys_url": "https://api.github.com/repos/csconnell/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/csconnell/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/csconnell/synapse/teams", "hooks_url": "https://api.github.com/repos/csconnell/synapse/hooks", "issue_events_url": "https://api.github.com/repos/csconnell/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/csconnell/synapse/events", "assignees_url": "https://api.github.com/repos/csconnell/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/csconnell/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/csconnell/synapse/tags", "blobs_url": "https://api.github.com/repos/csconnell/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/csconnell/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/csconnell/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/csconnell/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/csconnell/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/csconnell/synapse/languages", "stargazers_url": "https://api.github.com/repos/csconnell/synapse/stargazers", "contributors_url": "https://api.github.com/repos/csconnell/synapse/contributors", "subscribers_url": "https://api.github.com/repos/csconnell/synapse/subscribers", "subscription_url": "https://api.github.com/repos/csconnell/synapse/subscription", "commits_url": "https://api.github.com/repos/csconnell/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/csconnell/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/csconnell/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/csconnell/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/csconnell/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/csconnell/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/csconnell/synapse/merges", "archive_url": "https://api.github.com/repos/csconnell/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/csconnell/synapse/downloads", "issues_url": "https://api.github.com/repos/csconnell/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/csconnell/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/csconnell/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/csconnell/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/csconnell/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/csconnell/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/csconnell/synapse/deployments", "created_at": "2014-08-29T17:24:03Z", "updated_at": "2014-08-29T05:39:24Z", "pushed_at": "2014-09-02T20:06:54Z", "git_url": "git://github.com/csconnell/synapse.git", "ssh_url": "git@github.com:csconnell/synapse.git", "clone_url": "https://github.com/csconnell/synapse.git", "svn_url": "https://github.com/csconnell/synapse", "homepage": "", "size": 400, "stargazers_count": 0, "watchers_count": 0, "language": null, "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "forks_count": 0, "mirror_url": null, "archived": false, "open_issues_count": 0, "license": {"key": "mit", "name": "MIT License", "spdx_id": "MIT", "url": "https://api.github.com/licenses/mit"}, "forks": 0, "open_issues": 0, "watchers": 0, "default_branch": "master"}}, "base": {"label": "airbnb:master", "ref": "master", "sha": "11e27483789d479ebc8d4d8062b6c549cfb35675", "user": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 6607851, "name": "synapse", "full_name": "airbnb/synapse", "owner": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "private": false, "html_url": "https://github.com/airbnb/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": false, "url": "https://api.github.com/repos/airbnb/synapse", "forks_url": "https://api.github.com/repos/airbnb/synapse/forks", "keys_url": "https://api.github.com/repos/airbnb/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/airbnb/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/airbnb/synapse/teams", "hooks_url": "https://api.github.com/repos/airbnb/synapse/hooks", "issue_events_url": "https://api.github.com/repos/airbnb/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/airbnb/synapse/events", "assignees_url": "https://api.github.com/repos/airbnb/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/airbnb/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/airbnb/synapse/tags", "blobs_url": "https://api.github.com/repos/airbnb/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/airbnb/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/airbnb/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/airbnb/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/airbnb/synapse/languages", "stargazers_url": "https://api.github.com/repos/airbnb/synapse/stargazers", "contributors_url": "https://api.github.com/repos/airbnb/synapse/contributors", "subscribers_url": "https://api.github.com/repos/airbnb/synapse/subscribers", "subscription_url": "https://api.github.com/repos/airbnb/synapse/subscription", "commits_url": "https://api.github.com/repos/airbnb/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/airbnb/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/airbnb/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/airbnb/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/airbnb/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/airbnb/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/airbnb/synapse/merges", "archive_url": "https://api.github.com/repos/airbnb/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/airbnb/synapse/downloads", "issues_url": "https://api.github.com/repos/airbnb/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/airbnb/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/airbnb/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/airbnb/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/airbnb/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/airbnb/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/airbnb/synapse/deployments", "created_at": "2012-11-09T03:03:06Z", "updated_at": "2018-01-22T12:26:59Z", "pushed_at": "2018-01-13T00:21:50Z", "git_url": "git://github.com/airbnb/synapse.git", "ssh_url": "git@github.com:airbnb/synapse.git", "clone_url": "https://github.com/airbnb/synapse.git", "svn_url": "https://github.com/airbnb/synapse", "homepage": "", "size": 630, "stargazers_count": 1753, "watchers_count": 1753, "language": "Ruby", "has_issues": true, "has_projects": false, "has_downloads": true, "has_wiki": false, "has_pages": false, "forks_count": 237, "mirror_url": null, "archived": false, "open_issues_count": 47, "license": {"key": "mit", "name": "MIT License", "spdx_id": "MIT", "url": "https://api.github.com/licenses/mit"}, "forks": 237, "open_issues": 47, "watchers": 1753, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/91"}, "html": {"href": "https://github.com/airbnb/synapse/pull/91"}, "issue": {"href": "https://api.github.com/repos/airbnb/synapse/issues/91"}, "comments": {"href": "https://api.github.com/repos/airbnb/synapse/issues/91/comments"}, "review_comments": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/91/comments"}, "review_comment": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/91/commits"}, "statuses": {"href": "https://api.github.com/repos/airbnb/synapse/statuses/6ae5b8073251418ddce86d8294e6f9fd8cb040b5"}}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/89", "id": 20197208, "html_url": "https://github.com/airbnb/synapse/pull/89", "diff_url": "https://github.com/airbnb/synapse/pull/89.diff", "patch_url": "https://github.com/airbnb/synapse/pull/89.patch", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/89", "number": 89, "state": "open", "locked": false, "title": "Ec2tags selector", "user": {"login": "mandarjog", "id": 800375, "avatar_url": "https://avatars2.githubusercontent.com/u/800375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mandarjog", "html_url": "https://github.com/mandarjog", "followers_url": "https://api.github.com/users/mandarjog/followers", "following_url": "https://api.github.com/users/mandarjog/following{/other_user}", "gists_url": "https://api.github.com/users/mandarjog/gists{/gist_id}", "starred_url": "https://api.github.com/users/mandarjog/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mandarjog/subscriptions", "organizations_url": "https://api.github.com/users/mandarjog/orgs", "repos_url": "https://api.github.com/users/mandarjog/repos", "events_url": "https://api.github.com/users/mandarjog/events{/privacy}", "received_events_url": "https://api.github.com/users/mandarjog/received_events", "type": "User", "site_admin": false}, "body": "2 commits.\n1. Adds max_checks and check_interval as top level options. This cuts down on synapse cpu usage. \n    We run in under supervisord, so max_check = 10 would exit after those many loops.\n1. Adds a fancier selector  with a @discovery['selector'] option.\n   This option as actually eval'd with 'i' being the AWSInstance variable.\n\nWe are using this in production.\n", "created_at": "2014-08-22T21:06:06Z", "updated_at": "2016-05-26T23:16:48Z", "closed_at": null, "merged_at": null, "merge_commit_sha": "3cb022ffe1ef8e94ef9dc6bfc1d99a299e0ae23f", "assignee": null, "assignees": [], "requested_reviewers": [], "milestone": null, "commits_url": "https://api.github.com/repos/airbnb/synapse/pulls/89/commits", "review_comments_url": "https://api.github.com/repos/airbnb/synapse/pulls/89/comments", "review_comment_url": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/89/comments", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/17e953fade09337544acf7a9c9815f9eb701715f", "head": {"label": "mandarjog:ec2tags_selector", "ref": "ec2tags_selector", "sha": "17e953fade09337544acf7a9c9815f9eb701715f", "user": {"login": "mandarjog", "id": 800375, "avatar_url": "https://avatars2.githubusercontent.com/u/800375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mandarjog", "html_url": "https://github.com/mandarjog", "followers_url": "https://api.github.com/users/mandarjog/followers", "following_url": "https://api.github.com/users/mandarjog/following{/other_user}", "gists_url": "https://api.github.com/users/mandarjog/gists{/gist_id}", "starred_url": "https://api.github.com/users/mandarjog/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mandarjog/subscriptions", "organizations_url": "https://api.github.com/users/mandarjog/orgs", "repos_url": "https://api.github.com/users/mandarjog/repos", "events_url": "https://api.github.com/users/mandarjog/events{/privacy}", "received_events_url": "https://api.github.com/users/mandarjog/received_events", "type": "User", "site_admin": false}, "repo": {"id": 22743628, "name": "synapse", "full_name": "mandarjog/synapse", "owner": {"login": "mandarjog", "id": 800375, "avatar_url": "https://avatars2.githubusercontent.com/u/800375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mandarjog", "html_url": "https://github.com/mandarjog", "followers_url": "https://api.github.com/users/mandarjog/followers", "following_url": "https://api.github.com/users/mandarjog/following{/other_user}", "gists_url": "https://api.github.com/users/mandarjog/gists{/gist_id}", "starred_url": "https://api.github.com/users/mandarjog/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mandarjog/subscriptions", "organizations_url": "https://api.github.com/users/mandarjog/orgs", "repos_url": "https://api.github.com/users/mandarjog/repos", "events_url": "https://api.github.com/users/mandarjog/events{/privacy}", "received_events_url": "https://api.github.com/users/mandarjog/received_events", "type": "User", "site_admin": false}, "private": false, "html_url": "https://github.com/mandarjog/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": true, "url": "https://api.github.com/repos/mandarjog/synapse", "forks_url": "https://api.github.com/repos/mandarjog/synapse/forks", "keys_url": "https://api.github.com/repos/mandarjog/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/mandarjog/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/mandarjog/synapse/teams", "hooks_url": "https://api.github.com/repos/mandarjog/synapse/hooks", "issue_events_url": "https://api.github.com/repos/mandarjog/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/mandarjog/synapse/events", "assignees_url": "https://api.github.com/repos/mandarjog/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/mandarjog/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/mandarjog/synapse/tags", "blobs_url": "https://api.github.com/repos/mandarjog/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/mandarjog/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/mandarjog/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/mandarjog/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/mandarjog/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/mandarjog/synapse/languages", "stargazers_url": "https://api.github.com/repos/mandarjog/synapse/stargazers", "contributors_url": "https://api.github.com/repos/mandarjog/synapse/contributors", "subscribers_url": "https://api.github.com/repos/mandarjog/synapse/subscribers", "subscription_url": "https://api.github.com/repos/mandarjog/synapse/subscription", "commits_url": "https://api.github.com/repos/mandarjog/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/mandarjog/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/mandarjog/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/mandarjog/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/mandarjog/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/mandarjog/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/mandarjog/synapse/merges", "archive_url": "https://api.github.com/repos/mandarjog/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/mandarjog/synapse/downloads", "issues_url": "https://api.github.com/repos/mandarjog/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/mandarjog/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/mandarjog/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/mandarjog/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/mandarjog/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/mandarjog/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/mandarjog/synapse/deployments", "created_at": "2014-08-08T02:39:47Z", "updated_at": "2014-08-22T16:08:02Z", "pushed_at": "2014-08-28T03:23:00Z", "git_url": "git://github.com/mandarjog/synapse.git", "ssh_url": "git@github.com:mandarjog/synapse.git", "clone_url": "https://github.com/mandarjog/synapse.git", "svn_url": "https://github.com/mandarjog/synapse", "homepage": "", "size": 444, "stargazers_count": 0, "watchers_count": 0, "language": "Ruby", "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "forks_count": 0, "mirror_url": null, "archived": false, "open_issues_count": 0, "license": {"key": "mit", "name": "MIT License", "spdx_id": "MIT", "url": "https://api.github.com/licenses/mit"}, "forks": 0, "open_issues": 0, "watchers": 0, "default_branch": "master"}}, "base": {"label": "airbnb:master", "ref": "master", "sha": "11e27483789d479ebc8d4d8062b6c549cfb35675", "user": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 6607851, "name": "synapse", "full_name": "airbnb/synapse", "owner": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "private": false, "html_url": "https://github.com/airbnb/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": false, "url": "https://api.github.com/repos/airbnb/synapse", "forks_url": "https://api.github.com/repos/airbnb/synapse/forks", "keys_url": "https://api.github.com/repos/airbnb/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/airbnb/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/airbnb/synapse/teams", "hooks_url": "https://api.github.com/repos/airbnb/synapse/hooks", "issue_events_url": "https://api.github.com/repos/airbnb/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/airbnb/synapse/events", "assignees_url": "https://api.github.com/repos/airbnb/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/airbnb/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/airbnb/synapse/tags", "blobs_url": "https://api.github.com/repos/airbnb/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/airbnb/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/airbnb/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/airbnb/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/airbnb/synapse/languages", "stargazers_url": "https://api.github.com/repos/airbnb/synapse/stargazers", "contributors_url": "https://api.github.com/repos/airbnb/synapse/contributors", "subscribers_url": "https://api.github.com/repos/airbnb/synapse/subscribers", "subscription_url": "https://api.github.com/repos/airbnb/synapse/subscription", "commits_url": "https://api.github.com/repos/airbnb/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/airbnb/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/airbnb/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/airbnb/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/airbnb/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/airbnb/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/airbnb/synapse/merges", "archive_url": "https://api.github.com/repos/airbnb/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/airbnb/synapse/downloads", "issues_url": "https://api.github.com/repos/airbnb/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/airbnb/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/airbnb/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/airbnb/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/airbnb/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/airbnb/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/airbnb/synapse/deployments", "created_at": "2012-11-09T03:03:06Z", "updated_at": "2018-01-22T12:26:59Z", "pushed_at": "2018-01-13T00:21:50Z", "git_url": "git://github.com/airbnb/synapse.git", "ssh_url": "git@github.com:airbnb/synapse.git", "clone_url": "https://github.com/airbnb/synapse.git", "svn_url": "https://github.com/airbnb/synapse", "homepage": "", "size": 630, "stargazers_count": 1753, "watchers_count": 1753, "language": "Ruby", "has_issues": true, "has_projects": false, "has_downloads": true, "has_wiki": false, "has_pages": false, "forks_count": 237, "mirror_url": null, "archived": false, "open_issues_count": 47, "license": {"key": "mit", "name": "MIT License", "spdx_id": "MIT", "url": "https://api.github.com/licenses/mit"}, "forks": 237, "open_issues": 47, "watchers": 1753, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/89"}, "html": {"href": "https://github.com/airbnb/synapse/pull/89"}, "issue": {"href": "https://api.github.com/repos/airbnb/synapse/issues/89"}, "comments": {"href": "https://api.github.com/repos/airbnb/synapse/issues/89/comments"}, "review_comments": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/89/comments"}, "review_comment": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/89/commits"}, "statuses": {"href": "https://api.github.com/repos/airbnb/synapse/statuses/17e953fade09337544acf7a9c9815f9eb701715f"}}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/86", "id": 19812158, "html_url": "https://github.com/airbnb/synapse/pull/86", "diff_url": "https://github.com/airbnb/synapse/pull/86.diff", "patch_url": "https://github.com/airbnb/synapse/pull/86.patch", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/86", "number": 86, "state": "open", "locked": false, "title": "Multi-host compatible etcd service watcher", "user": {"login": "cloakedcode", "id": 177435, "avatar_url": "https://avatars0.githubusercontent.com/u/177435?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cloakedcode", "html_url": "https://github.com/cloakedcode", "followers_url": "https://api.github.com/users/cloakedcode/followers", "following_url": "https://api.github.com/users/cloakedcode/following{/other_user}", "gists_url": "https://api.github.com/users/cloakedcode/gists{/gist_id}", "starred_url": "https://api.github.com/users/cloakedcode/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cloakedcode/subscriptions", "organizations_url": "https://api.github.com/users/cloakedcode/orgs", "repos_url": "https://api.github.com/users/cloakedcode/repos", "events_url": "https://api.github.com/users/cloakedcode/events{/privacy}", "received_events_url": "https://api.github.com/users/cloakedcode/received_events", "type": "User", "site_admin": false}, "body": "Merged bobtfish's etcd service watcher and added etcd host failover.\n", "created_at": "2014-08-14T20:20:16Z", "updated_at": "2016-05-26T23:16:48Z", "closed_at": null, "merged_at": null, "merge_commit_sha": "41a81fbdb78a5e7e3a1c6ef2817a4abc29c35b07", "assignee": null, "assignees": [], "requested_reviewers": [], "milestone": null, "commits_url": "https://api.github.com/repos/airbnb/synapse/pulls/86/commits", "review_comments_url": "https://api.github.com/repos/airbnb/synapse/pulls/86/comments", "review_comment_url": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/86/comments", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/8c51ed17a5fdaa99d381c27e071f3d21110ef739", "head": {"label": "S2Games:master", "ref": "master", "sha": "8c51ed17a5fdaa99d381c27e071f3d21110ef739", "user": {"login": "S2Games", "id": 7903520, "avatar_url": "https://avatars1.githubusercontent.com/u/7903520?v=4", "gravatar_id": "", "url": "https://api.github.com/users/S2Games", "html_url": "https://github.com/S2Games", "followers_url": "https://api.github.com/users/S2Games/followers", "following_url": "https://api.github.com/users/S2Games/following{/other_user}", "gists_url": "https://api.github.com/users/S2Games/gists{/gist_id}", "starred_url": "https://api.github.com/users/S2Games/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/S2Games/subscriptions", "organizations_url": "https://api.github.com/users/S2Games/orgs", "repos_url": "https://api.github.com/users/S2Games/repos", "events_url": "https://api.github.com/users/S2Games/events{/privacy}", "received_events_url": "https://api.github.com/users/S2Games/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 22965437, "name": "synapse", "full_name": "S2Games/synapse", "owner": {"login": "S2Games", "id": 7903520, "avatar_url": "https://avatars1.githubusercontent.com/u/7903520?v=4", "gravatar_id": "", "url": "https://api.github.com/users/S2Games", "html_url": "https://github.com/S2Games", "followers_url": "https://api.github.com/users/S2Games/followers", "following_url": "https://api.github.com/users/S2Games/following{/other_user}", "gists_url": "https://api.github.com/users/S2Games/gists{/gist_id}", "starred_url": "https://api.github.com/users/S2Games/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/S2Games/subscriptions", "organizations_url": "https://api.github.com/users/S2Games/orgs", "repos_url": "https://api.github.com/users/S2Games/repos", "events_url": "https://api.github.com/users/S2Games/events{/privacy}", "received_events_url": "https://api.github.com/users/S2Games/received_events", "type": "Organization", "site_admin": false}, "private": false, "html_url": "https://github.com/S2Games/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": true, "url": "https://api.github.com/repos/S2Games/synapse", "forks_url": "https://api.github.com/repos/S2Games/synapse/forks", "keys_url": "https://api.github.com/repos/S2Games/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/S2Games/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/S2Games/synapse/teams", "hooks_url": "https://api.github.com/repos/S2Games/synapse/hooks", "issue_events_url": "https://api.github.com/repos/S2Games/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/S2Games/synapse/events", "assignees_url": "https://api.github.com/repos/S2Games/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/S2Games/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/S2Games/synapse/tags", "blobs_url": "https://api.github.com/repos/S2Games/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/S2Games/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/S2Games/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/S2Games/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/S2Games/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/S2Games/synapse/languages", "stargazers_url": "https://api.github.com/repos/S2Games/synapse/stargazers", "contributors_url": "https://api.github.com/repos/S2Games/synapse/contributors", "subscribers_url": "https://api.github.com/repos/S2Games/synapse/subscribers", "subscription_url": "https://api.github.com/repos/S2Games/synapse/subscription", "commits_url": "https://api.github.com/repos/S2Games/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/S2Games/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/S2Games/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/S2Games/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/S2Games/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/S2Games/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/S2Games/synapse/merges", "archive_url": "https://api.github.com/repos/S2Games/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/S2Games/synapse/downloads", "issues_url": "https://api.github.com/repos/S2Games/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/S2Games/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/S2Games/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/S2Games/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/S2Games/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/S2Games/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/S2Games/synapse/deployments", "created_at": "2014-08-14T19:10:44Z", "updated_at": "2014-08-14T19:23:11Z", "pushed_at": "2014-08-15T14:41:26Z", "git_url": "git://github.com/S2Games/synapse.git", "ssh_url": "git@github.com:S2Games/synapse.git", "clone_url": "https://github.com/S2Games/synapse.git", "svn_url": "https://github.com/S2Games/synapse", "homepage": "", "size": 436, "stargazers_count": 0, "watchers_count": 0, "language": "Ruby", "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "forks_count": 1, "mirror_url": null, "archived": false, "open_issues_count": 0, "license": {"key": "mit", "name": "MIT License", "spdx_id": "MIT", "url": "https://api.github.com/licenses/mit"}, "forks": 1, "open_issues": 0, "watchers": 0, "default_branch": "master"}}, "base": {"label": "airbnb:master", "ref": "master", "sha": "11e27483789d479ebc8d4d8062b6c549cfb35675", "user": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 6607851, "name": "synapse", "full_name": "airbnb/synapse", "owner": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "private": false, "html_url": "https://github.com/airbnb/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": false, "url": "https://api.github.com/repos/airbnb/synapse", "forks_url": "https://api.github.com/repos/airbnb/synapse/forks", "keys_url": "https://api.github.com/repos/airbnb/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/airbnb/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/airbnb/synapse/teams", "hooks_url": "https://api.github.com/repos/airbnb/synapse/hooks", "issue_events_url": "https://api.github.com/repos/airbnb/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/airbnb/synapse/events", "assignees_url": "https://api.github.com/repos/airbnb/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/airbnb/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/airbnb/synapse/tags", "blobs_url": "https://api.github.com/repos/airbnb/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/airbnb/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/airbnb/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/airbnb/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/airbnb/synapse/languages", "stargazers_url": "https://api.github.com/repos/airbnb/synapse/stargazers", "contributors_url": "https://api.github.com/repos/airbnb/synapse/contributors", "subscribers_url": "https://api.github.com/repos/airbnb/synapse/subscribers", "subscription_url": "https://api.github.com/repos/airbnb/synapse/subscription", "commits_url": "https://api.github.com/repos/airbnb/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/airbnb/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/airbnb/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/airbnb/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/airbnb/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/airbnb/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/airbnb/synapse/merges", "archive_url": "https://api.github.com/repos/airbnb/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/airbnb/synapse/downloads", "issues_url": "https://api.github.com/repos/airbnb/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/airbnb/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/airbnb/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/airbnb/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/airbnb/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/airbnb/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/airbnb/synapse/deployments", "created_at": "2012-11-09T03:03:06Z", "updated_at": "2018-01-22T12:26:59Z", "pushed_at": "2018-01-13T00:21:50Z", "git_url": "git://github.com/airbnb/synapse.git", "ssh_url": "git@github.com:airbnb/synapse.git", "clone_url": "https://github.com/airbnb/synapse.git", "svn_url": "https://github.com/airbnb/synapse", "homepage": "", "size": 630, "stargazers_count": 1753, "watchers_count": 1753, "language": "Ruby", "has_issues": true, "has_projects": false, "has_downloads": true, "has_wiki": false, "has_pages": false, "forks_count": 237, "mirror_url": null, "archived": false, "open_issues_count": 47, "license": {"key": "mit", "name": "MIT License", "spdx_id": "MIT", "url": "https://api.github.com/licenses/mit"}, "forks": 237, "open_issues": 47, "watchers": 1753, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/86"}, "html": {"href": "https://github.com/airbnb/synapse/pull/86"}, "issue": {"href": "https://api.github.com/repos/airbnb/synapse/issues/86"}, "comments": {"href": "https://api.github.com/repos/airbnb/synapse/issues/86/comments"}, "review_comments": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/86/comments"}, "review_comment": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/86/commits"}, "statuses": {"href": "https://api.github.com/repos/airbnb/synapse/statuses/8c51ed17a5fdaa99d381c27e071f3d21110ef739"}}, "author_association": "NONE"}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/58", "id": 14692213, "html_url": "https://github.com/airbnb/synapse/pull/58", "diff_url": "https://github.com/airbnb/synapse/pull/58.diff", "patch_url": "https://github.com/airbnb/synapse/pull/58.patch", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/58", "number": 58, "state": "open", "locked": false, "title": "Etcd service watcher", "user": {"login": "bobtfish", "id": 42338, "avatar_url": "https://avatars1.githubusercontent.com/u/42338?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bobtfish", "html_url": "https://github.com/bobtfish", "followers_url": "https://api.github.com/users/bobtfish/followers", "following_url": "https://api.github.com/users/bobtfish/following{/other_user}", "gists_url": "https://api.github.com/users/bobtfish/gists{/gist_id}", "starred_url": "https://api.github.com/users/bobtfish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bobtfish/subscriptions", "organizations_url": "https://api.github.com/users/bobtfish/orgs", "repos_url": "https://api.github.com/users/bobtfish/repos", "events_url": "https://api.github.com/users/bobtfish/events{/privacy}", "received_events_url": "https://api.github.com/users/bobtfish/received_events", "type": "User", "site_admin": false}, "body": "And the etcd watcher part to go with the reporter :)\n", "created_at": "2014-04-13T07:40:54Z", "updated_at": "2016-10-23T17:41:26Z", "closed_at": null, "merged_at": null, "merge_commit_sha": "d6fa68ad6dad942b7140be62eb247bd5615c34ca", "assignee": null, "assignees": [], "requested_reviewers": [], "milestone": null, "commits_url": "https://api.github.com/repos/airbnb/synapse/pulls/58/commits", "review_comments_url": "https://api.github.com/repos/airbnb/synapse/pulls/58/comments", "review_comment_url": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/airbnb/synapse/issues/58/comments", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/9426ba7dc954e0bb73ef0943c1b4b747670bd416", "head": {"label": "bobtfish:etcd_service_watcher", "ref": "etcd_service_watcher", "sha": "9426ba7dc954e0bb73ef0943c1b4b747670bd416", "user": {"login": "bobtfish", "id": 42338, "avatar_url": "https://avatars1.githubusercontent.com/u/42338?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bobtfish", "html_url": "https://github.com/bobtfish", "followers_url": "https://api.github.com/users/bobtfish/followers", "following_url": "https://api.github.com/users/bobtfish/following{/other_user}", "gists_url": "https://api.github.com/users/bobtfish/gists{/gist_id}", "starred_url": "https://api.github.com/users/bobtfish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bobtfish/subscriptions", "organizations_url": "https://api.github.com/users/bobtfish/orgs", "repos_url": "https://api.github.com/users/bobtfish/repos", "events_url": "https://api.github.com/users/bobtfish/events{/privacy}", "received_events_url": "https://api.github.com/users/bobtfish/received_events", "type": "User", "site_admin": false}, "repo": {"id": 15989700, "name": "synapse", "full_name": "bobtfish/synapse", "owner": {"login": "bobtfish", "id": 42338, "avatar_url": "https://avatars1.githubusercontent.com/u/42338?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bobtfish", "html_url": "https://github.com/bobtfish", "followers_url": "https://api.github.com/users/bobtfish/followers", "following_url": "https://api.github.com/users/bobtfish/following{/other_user}", "gists_url": "https://api.github.com/users/bobtfish/gists{/gist_id}", "starred_url": "https://api.github.com/users/bobtfish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bobtfish/subscriptions", "organizations_url": "https://api.github.com/users/bobtfish/orgs", "repos_url": "https://api.github.com/users/bobtfish/repos", "events_url": "https://api.github.com/users/bobtfish/events{/privacy}", "received_events_url": "https://api.github.com/users/bobtfish/received_events", "type": "User", "site_admin": false}, "private": false, "html_url": "https://github.com/bobtfish/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": true, "url": "https://api.github.com/repos/bobtfish/synapse", "forks_url": "https://api.github.com/repos/bobtfish/synapse/forks", "keys_url": "https://api.github.com/repos/bobtfish/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/bobtfish/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/bobtfish/synapse/teams", "hooks_url": "https://api.github.com/repos/bobtfish/synapse/hooks", "issue_events_url": "https://api.github.com/repos/bobtfish/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/bobtfish/synapse/events", "assignees_url": "https://api.github.com/repos/bobtfish/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/bobtfish/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/bobtfish/synapse/tags", "blobs_url": "https://api.github.com/repos/bobtfish/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/bobtfish/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/bobtfish/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/bobtfish/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/bobtfish/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/bobtfish/synapse/languages", "stargazers_url": "https://api.github.com/repos/bobtfish/synapse/stargazers", "contributors_url": "https://api.github.com/repos/bobtfish/synapse/contributors", "subscribers_url": "https://api.github.com/repos/bobtfish/synapse/subscribers", "subscription_url": "https://api.github.com/repos/bobtfish/synapse/subscription", "commits_url": "https://api.github.com/repos/bobtfish/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/bobtfish/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/bobtfish/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/bobtfish/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/bobtfish/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/bobtfish/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/bobtfish/synapse/merges", "archive_url": "https://api.github.com/repos/bobtfish/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/bobtfish/synapse/downloads", "issues_url": "https://api.github.com/repos/bobtfish/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/bobtfish/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/bobtfish/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/bobtfish/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/bobtfish/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/bobtfish/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/bobtfish/synapse/deployments", "created_at": "2014-01-17T04:05:59Z", "updated_at": "2014-09-03T18:33:50Z", "pushed_at": "2015-09-23T04:42:07Z", "git_url": "git://github.com/bobtfish/synapse.git", "ssh_url": "git@github.com:bobtfish/synapse.git", "clone_url": "https://github.com/bobtfish/synapse.git", "svn_url": "https://github.com/bobtfish/synapse", "homepage": "", "size": 745, "stargazers_count": 0, "watchers_count": 0, "language": "Ruby", "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "forks_count": 1, "mirror_url": null, "archived": false, "open_issues_count": 0, "license": {"key": "mit", "name": "MIT License", "spdx_id": "MIT", "url": "https://api.github.com/licenses/mit"}, "forks": 1, "open_issues": 0, "watchers": 0, "default_branch": "master"}}, "base": {"label": "airbnb:master", "ref": "master", "sha": "11e27483789d479ebc8d4d8062b6c549cfb35675", "user": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 6607851, "name": "synapse", "full_name": "airbnb/synapse", "owner": {"login": "airbnb", "id": 698437, "avatar_url": "https://avatars3.githubusercontent.com/u/698437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/airbnb", "html_url": "https://github.com/airbnb", "followers_url": "https://api.github.com/users/airbnb/followers", "following_url": "https://api.github.com/users/airbnb/following{/other_user}", "gists_url": "https://api.github.com/users/airbnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/airbnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/airbnb/subscriptions", "organizations_url": "https://api.github.com/users/airbnb/orgs", "repos_url": "https://api.github.com/users/airbnb/repos", "events_url": "https://api.github.com/users/airbnb/events{/privacy}", "received_events_url": "https://api.github.com/users/airbnb/received_events", "type": "Organization", "site_admin": false}, "private": false, "html_url": "https://github.com/airbnb/synapse", "description": "A transparent service discovery framework for connecting an SOA", "fork": false, "url": "https://api.github.com/repos/airbnb/synapse", "forks_url": "https://api.github.com/repos/airbnb/synapse/forks", "keys_url": "https://api.github.com/repos/airbnb/synapse/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/airbnb/synapse/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/airbnb/synapse/teams", "hooks_url": "https://api.github.com/repos/airbnb/synapse/hooks", "issue_events_url": "https://api.github.com/repos/airbnb/synapse/issues/events{/number}", "events_url": "https://api.github.com/repos/airbnb/synapse/events", "assignees_url": "https://api.github.com/repos/airbnb/synapse/assignees{/user}", "branches_url": "https://api.github.com/repos/airbnb/synapse/branches{/branch}", "tags_url": "https://api.github.com/repos/airbnb/synapse/tags", "blobs_url": "https://api.github.com/repos/airbnb/synapse/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/airbnb/synapse/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/airbnb/synapse/git/refs{/sha}", "trees_url": "https://api.github.com/repos/airbnb/synapse/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/airbnb/synapse/statuses/{sha}", "languages_url": "https://api.github.com/repos/airbnb/synapse/languages", "stargazers_url": "https://api.github.com/repos/airbnb/synapse/stargazers", "contributors_url": "https://api.github.com/repos/airbnb/synapse/contributors", "subscribers_url": "https://api.github.com/repos/airbnb/synapse/subscribers", "subscription_url": "https://api.github.com/repos/airbnb/synapse/subscription", "commits_url": "https://api.github.com/repos/airbnb/synapse/commits{/sha}", "git_commits_url": "https://api.github.com/repos/airbnb/synapse/git/commits{/sha}", "comments_url": "https://api.github.com/repos/airbnb/synapse/comments{/number}", "issue_comment_url": "https://api.github.com/repos/airbnb/synapse/issues/comments{/number}", "contents_url": "https://api.github.com/repos/airbnb/synapse/contents/{+path}", "compare_url": "https://api.github.com/repos/airbnb/synapse/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/airbnb/synapse/merges", "archive_url": "https://api.github.com/repos/airbnb/synapse/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/airbnb/synapse/downloads", "issues_url": "https://api.github.com/repos/airbnb/synapse/issues{/number}", "pulls_url": "https://api.github.com/repos/airbnb/synapse/pulls{/number}", "milestones_url": "https://api.github.com/repos/airbnb/synapse/milestones{/number}", "notifications_url": "https://api.github.com/repos/airbnb/synapse/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/airbnb/synapse/labels{/name}", "releases_url": "https://api.github.com/repos/airbnb/synapse/releases{/id}", "deployments_url": "https://api.github.com/repos/airbnb/synapse/deployments", "created_at": "2012-11-09T03:03:06Z", "updated_at": "2018-01-22T12:26:59Z", "pushed_at": "2018-01-13T00:21:50Z", "git_url": "git://github.com/airbnb/synapse.git", "ssh_url": "git@github.com:airbnb/synapse.git", "clone_url": "https://github.com/airbnb/synapse.git", "svn_url": "https://github.com/airbnb/synapse", "homepage": "", "size": 630, "stargazers_count": 1753, "watchers_count": 1753, "language": "Ruby", "has_issues": true, "has_projects": false, "has_downloads": true, "has_wiki": false, "has_pages": false, "forks_count": 237, "mirror_url": null, "archived": false, "open_issues_count": 47, "license": {"key": "mit", "name": "MIT License", "spdx_id": "MIT", "url": "https://api.github.com/licenses/mit"}, "forks": 237, "open_issues": 47, "watchers": 1753, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/58"}, "html": {"href": "https://github.com/airbnb/synapse/pull/58"}, "issue": {"href": "https://api.github.com/repos/airbnb/synapse/issues/58"}, "comments": {"href": "https://api.github.com/repos/airbnb/synapse/issues/58/comments"}, "review_comments": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/58/comments"}, "review_comment": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/58/commits"}, "statuses": {"href": "https://api.github.com/repos/airbnb/synapse/statuses/9426ba7dc954e0bb73ef0943c1b4b747670bd416"}}, "author_association": "CONTRIBUTOR"}], "issue_comments": [{"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/13465010", "html_url": "https://github.com/airbnb/synapse/pull/1#issuecomment-13465010", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/1", "id": 13465010, "user": {"login": "martinrhoads", "id": 52137, "avatar_url": "https://avatars2.githubusercontent.com/u/52137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martinrhoads", "html_url": "https://github.com/martinrhoads", "followers_url": "https://api.github.com/users/martinrhoads/followers", "following_url": "https://api.github.com/users/martinrhoads/following{/other_user}", "gists_url": "https://api.github.com/users/martinrhoads/gists{/gist_id}", "starred_url": "https://api.github.com/users/martinrhoads/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martinrhoads/subscriptions", "organizations_url": "https://api.github.com/users/martinrhoads/orgs", "repos_url": "https://api.github.com/users/martinrhoads/repos", "events_url": "https://api.github.com/users/martinrhoads/events{/privacy}", "received_events_url": "https://api.github.com/users/martinrhoads/received_events", "type": "User", "site_admin": false}, "created_at": "2013-02-12T23:06:14Z", "updated_at": "2013-02-12T23:06:14Z", "author_association": "CONTRIBUTOR", "body": "Awesome!\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/13465010/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/14743310", "html_url": "https://github.com/airbnb/synapse/pull/2#issuecomment-14743310", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/2", "id": 14743310, "user": {"login": "schleyfox", "id": 4259, "avatar_url": "https://avatars0.githubusercontent.com/u/4259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/schleyfox", "html_url": "https://github.com/schleyfox", "followers_url": "https://api.github.com/users/schleyfox/followers", "following_url": "https://api.github.com/users/schleyfox/following{/other_user}", "gists_url": "https://api.github.com/users/schleyfox/gists{/gist_id}", "starred_url": "https://api.github.com/users/schleyfox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schleyfox/subscriptions", "organizations_url": "https://api.github.com/users/schleyfox/orgs", "repos_url": "https://api.github.com/users/schleyfox/repos", "events_url": "https://api.github.com/users/schleyfox/events{/privacy}", "received_events_url": "https://api.github.com/users/schleyfox/received_events", "type": "User", "site_admin": false}, "created_at": "2013-03-11T21:17:42Z", "updated_at": "2013-03-11T21:17:42Z", "author_association": "OWNER", "body": "Mixed Messages ftw\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/14743310/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/14743374", "html_url": "https://github.com/airbnb/synapse/pull/2#issuecomment-14743374", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/2", "id": 14743374, "user": {"login": "clizzin", "id": 55812, "avatar_url": "https://avatars3.githubusercontent.com/u/55812?v=4", "gravatar_id": "", "url": "https://api.github.com/users/clizzin", "html_url": "https://github.com/clizzin", "followers_url": "https://api.github.com/users/clizzin/followers", "following_url": "https://api.github.com/users/clizzin/following{/other_user}", "gists_url": "https://api.github.com/users/clizzin/gists{/gist_id}", "starred_url": "https://api.github.com/users/clizzin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/clizzin/subscriptions", "organizations_url": "https://api.github.com/users/clizzin/orgs", "repos_url": "https://api.github.com/users/clizzin/repos", "events_url": "https://api.github.com/users/clizzin/events{/privacy}", "received_events_url": "https://api.github.com/users/clizzin/received_events", "type": "User", "site_admin": false}, "created_at": "2013-03-11T21:19:01Z", "updated_at": "2013-03-11T21:19:01Z", "author_association": "CONTRIBUTOR", "body": "wat\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/14743374/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/14744368", "html_url": "https://github.com/airbnb/synapse/pull/2#issuecomment-14744368", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/2", "id": 14744368, "user": {"login": "martinrhoads", "id": 52137, "avatar_url": "https://avatars2.githubusercontent.com/u/52137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martinrhoads", "html_url": "https://github.com/martinrhoads", "followers_url": "https://api.github.com/users/martinrhoads/followers", "following_url": "https://api.github.com/users/martinrhoads/following{/other_user}", "gists_url": "https://api.github.com/users/martinrhoads/gists{/gist_id}", "starred_url": "https://api.github.com/users/martinrhoads/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martinrhoads/subscriptions", "organizations_url": "https://api.github.com/users/martinrhoads/orgs", "repos_url": "https://api.github.com/users/martinrhoads/repos", "events_url": "https://api.github.com/users/martinrhoads/events{/privacy}", "received_events_url": "https://api.github.com/users/martinrhoads/received_events", "type": "User", "site_admin": false}, "created_at": "2013-03-11T21:36:49Z", "updated_at": "2013-03-11T21:36:49Z", "author_association": "CONTRIBUTOR", "body": "I should have removed the message, it was safe ;)\n\nOn Mon, Mar 11, 2013 at 2:19 PM, Christopher Lin\nnotifications@github.comwrote:\n\n> wat\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/airbnb/synapse/pull/2#issuecomment-14743374\n> .\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/14744368/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/16481539", "html_url": "https://github.com/airbnb/synapse/pull/7#issuecomment-16481539", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/7", "id": 16481539, "user": {"login": "jtai", "id": 696036, "avatar_url": "https://avatars2.githubusercontent.com/u/696036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jtai", "html_url": "https://github.com/jtai", "followers_url": "https://api.github.com/users/jtai/followers", "following_url": "https://api.github.com/users/jtai/following{/other_user}", "gists_url": "https://api.github.com/users/jtai/gists{/gist_id}", "starred_url": "https://api.github.com/users/jtai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jtai/subscriptions", "organizations_url": "https://api.github.com/users/jtai/orgs", "repos_url": "https://api.github.com/users/jtai/repos", "events_url": "https://api.github.com/users/jtai/events{/privacy}", "received_events_url": "https://api.github.com/users/jtai/received_events", "type": "User", "site_admin": false}, "created_at": "2013-04-17T01:13:14Z", "updated_at": "2013-04-17T01:13:14Z", "author_association": "CONTRIBUTOR", "body": "LGTM\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/16481539/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/17831665", "html_url": "https://github.com/airbnb/synapse/pull/8#issuecomment-17831665", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/8", "id": 17831665, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2013-05-13T18:38:57Z", "updated_at": "2013-05-13T18:38:57Z", "author_association": "COLLABORATOR", "body": "you can run synapse locally and it will do the right thing. this doesn't quite work as-is. lets sync up.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/17831665/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/17843566", "html_url": "https://github.com/airbnb/synapse/pull/8#issuecomment-17843566", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/8", "id": 17843566, "user": {"login": "schleyfox", "id": 4259, "avatar_url": "https://avatars0.githubusercontent.com/u/4259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/schleyfox", "html_url": "https://github.com/schleyfox", "followers_url": "https://api.github.com/users/schleyfox/followers", "following_url": "https://api.github.com/users/schleyfox/following{/other_user}", "gists_url": "https://api.github.com/users/schleyfox/gists{/gist_id}", "starred_url": "https://api.github.com/users/schleyfox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schleyfox/subscriptions", "organizations_url": "https://api.github.com/users/schleyfox/orgs", "repos_url": "https://api.github.com/users/schleyfox/repos", "events_url": "https://api.github.com/users/schleyfox/events{/privacy}", "received_events_url": "https://api.github.com/users/schleyfox/received_events", "type": "User", "site_admin": false}, "created_at": "2013-05-13T21:53:12Z", "updated_at": "2013-05-13T21:53:12Z", "author_association": "OWNER", "body": "Updated this per comments and also to handle multiple addresses from DNS.  I have also tested locally and checked behavior with loss of network connection.\n\nThe next step is to get a new version of synapse out, set it up on my test boxes, smoke test a bit more, and then run the third dress rehearsal.\n\nBen\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/17843566/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/17844752", "html_url": "https://github.com/airbnb/synapse/pull/8#issuecomment-17844752", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/8", "id": 17844752, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2013-05-13T22:15:17Z", "updated_at": "2013-05-13T22:15:17Z", "author_association": "COLLABORATOR", "body": "lgtm\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/17844752/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/19632740", "html_url": "https://github.com/airbnb/synapse/pull/9#issuecomment-19632740", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/9", "id": 19632740, "user": {"login": "pcarrier", "id": 8641, "avatar_url": "https://avatars0.githubusercontent.com/u/8641?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcarrier", "html_url": "https://github.com/pcarrier", "followers_url": "https://api.github.com/users/pcarrier/followers", "following_url": "https://api.github.com/users/pcarrier/following{/other_user}", "gists_url": "https://api.github.com/users/pcarrier/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcarrier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcarrier/subscriptions", "organizations_url": "https://api.github.com/users/pcarrier/orgs", "repos_url": "https://api.github.com/users/pcarrier/repos", "events_url": "https://api.github.com/users/pcarrier/events{/privacy}", "received_events_url": "https://api.github.com/users/pcarrier/received_events", "type": "User", "site_admin": false}, "created_at": "2013-06-18T18:55:01Z", "updated_at": "2013-06-18T18:55:01Z", "author_association": "CONTRIBUTOR", "body": ":+1: \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/19632740/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/19633507", "html_url": "https://github.com/airbnb/synapse/pull/9#issuecomment-19633507", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/9", "id": 19633507, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2013-06-18T19:05:54Z", "updated_at": "2013-06-18T19:05:54Z", "author_association": "COLLABORATOR", "body": "tested on vagrant, and does the correct thing. exciting times!\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/19633507/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/19648073", "html_url": "https://github.com/airbnb/synapse/pull/10#issuecomment-19648073", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/10", "id": 19648073, "user": {"login": "jtai", "id": 696036, "avatar_url": "https://avatars2.githubusercontent.com/u/696036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jtai", "html_url": "https://github.com/jtai", "followers_url": "https://api.github.com/users/jtai/followers", "following_url": "https://api.github.com/users/jtai/following{/other_user}", "gists_url": "https://api.github.com/users/jtai/gists{/gist_id}", "starred_url": "https://api.github.com/users/jtai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jtai/subscriptions", "organizations_url": "https://api.github.com/users/jtai/orgs", "repos_url": "https://api.github.com/users/jtai/repos", "events_url": "https://api.github.com/users/jtai/events{/privacy}", "received_events_url": "https://api.github.com/users/jtai/received_events", "type": "User", "site_admin": false}, "created_at": "2013-06-18T22:37:34Z", "updated_at": "2013-06-18T22:37:34Z", "author_association": "CONTRIBUTOR", "body": "Other than that, LGTM\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/19648073/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/20099792", "html_url": "https://github.com/airbnb/synapse/pull/11#issuecomment-20099792", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/11", "id": 20099792, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2013-06-27T06:36:20Z", "updated_at": "2013-06-27T06:36:20Z", "author_association": "COLLABORATOR", "body": "tested in vagrant; not only does it work, but it actually exits when zookeeper starts acting funny\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/20099792/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/20146727", "html_url": "https://github.com/airbnb/synapse/pull/11#issuecomment-20146727", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/11", "id": 20146727, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2013-06-27T18:50:38Z", "updated_at": "2013-06-27T18:50:38Z", "author_association": "COLLABORATOR", "body": "tested on admin as well; it generated the same haproxy config. i was concerned that the synchronous updates would cause a noticeable lag in taking down services, but i couldn't discern much the difference when stopping/starting nerve on an optica box.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/20146727/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/20146741", "html_url": "https://github.com/airbnb/synapse/pull/11#issuecomment-20146741", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/11", "id": 20146741, "user": {"login": "martinrhoads", "id": 52137, "avatar_url": "https://avatars2.githubusercontent.com/u/52137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martinrhoads", "html_url": "https://github.com/martinrhoads", "followers_url": "https://api.github.com/users/martinrhoads/followers", "following_url": "https://api.github.com/users/martinrhoads/following{/other_user}", "gists_url": "https://api.github.com/users/martinrhoads/gists{/gist_id}", "starred_url": "https://api.github.com/users/martinrhoads/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martinrhoads/subscriptions", "organizations_url": "https://api.github.com/users/martinrhoads/orgs", "repos_url": "https://api.github.com/users/martinrhoads/repos", "events_url": "https://api.github.com/users/martinrhoads/events{/privacy}", "received_events_url": "https://api.github.com/users/martinrhoads/received_events", "type": "User", "site_admin": false}, "created_at": "2013-06-27T18:50:59Z", "updated_at": "2013-06-27T18:50:59Z", "author_association": "CONTRIBUTOR", "body": "more or less great, but I would like a comment on what the dns resolution check is supposed to do. \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/20146741/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/24695672", "html_url": "https://github.com/airbnb/synapse/pull/13#issuecomment-24695672", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/13", "id": 24695672, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2013-09-18T20:16:12Z", "updated_at": "2013-09-18T20:16:12Z", "author_association": "COLLABORATOR", "body": "tested on admin boxes btw\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/24695672/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/24713845", "html_url": "https://github.com/airbnb/synapse/pull/13#issuecomment-24713845", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/13", "id": 24713845, "user": {"login": "pcarrier", "id": 8641, "avatar_url": "https://avatars0.githubusercontent.com/u/8641?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcarrier", "html_url": "https://github.com/pcarrier", "followers_url": "https://api.github.com/users/pcarrier/followers", "following_url": "https://api.github.com/users/pcarrier/following{/other_user}", "gists_url": "https://api.github.com/users/pcarrier/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcarrier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcarrier/subscriptions", "organizations_url": "https://api.github.com/users/pcarrier/orgs", "repos_url": "https://api.github.com/users/pcarrier/repos", "events_url": "https://api.github.com/users/pcarrier/events{/privacy}", "received_events_url": "https://api.github.com/users/pcarrier/received_events", "type": "User", "site_admin": false}, "created_at": "2013-09-19T02:39:01Z", "updated_at": "2013-09-19T02:39:01Z", "author_association": "CONTRIBUTOR", "body": "Am I missing some commits? I only see a version bump and a dep removal.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/24713845/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/24944030", "html_url": "https://github.com/airbnb/synapse/pull/13#issuecomment-24944030", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/13", "id": 24944030, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2013-09-23T18:53:03Z", "updated_at": "2013-09-23T18:53:03Z", "author_association": "COLLABORATOR", "body": "yes a lot of the changes were to the `gemfile.lock`\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/24944030/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/25312684", "html_url": "https://github.com/airbnb/synapse/pull/14#issuecomment-25312684", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/14", "id": 25312684, "user": {"login": "nelgau", "id": 1800798, "avatar_url": "https://avatars0.githubusercontent.com/u/1800798?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nelgau", "html_url": "https://github.com/nelgau", "followers_url": "https://api.github.com/users/nelgau/followers", "following_url": "https://api.github.com/users/nelgau/following{/other_user}", "gists_url": "https://api.github.com/users/nelgau/gists{/gist_id}", "starred_url": "https://api.github.com/users/nelgau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nelgau/subscriptions", "organizations_url": "https://api.github.com/users/nelgau/orgs", "repos_url": "https://api.github.com/users/nelgau/repos", "events_url": "https://api.github.com/users/nelgau/events{/privacy}", "received_events_url": "https://api.github.com/users/nelgau/received_events", "type": "User", "site_admin": false}, "created_at": "2013-09-29T01:55:07Z", "updated_at": "2013-09-29T01:55:07Z", "author_association": "NONE", "body": "Seems reasonable. :+1:\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/25312684/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/25418022", "html_url": "https://github.com/airbnb/synapse/pull/14#issuecomment-25418022", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/14", "id": 25418022, "user": {"login": "pcarrier", "id": 8641, "avatar_url": "https://avatars0.githubusercontent.com/u/8641?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcarrier", "html_url": "https://github.com/pcarrier", "followers_url": "https://api.github.com/users/pcarrier/followers", "following_url": "https://api.github.com/users/pcarrier/following{/other_user}", "gists_url": "https://api.github.com/users/pcarrier/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcarrier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcarrier/subscriptions", "organizations_url": "https://api.github.com/users/pcarrier/orgs", "repos_url": "https://api.github.com/users/pcarrier/repos", "events_url": "https://api.github.com/users/pcarrier/events{/privacy}", "received_events_url": "https://api.github.com/users/pcarrier/received_events", "type": "User", "site_admin": false}, "created_at": "2013-10-01T00:32:21Z", "updated_at": "2013-10-01T00:32:21Z", "author_association": "CONTRIBUTOR", "body": "https://github.com/airbnb/smartstack4j/pull/1\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/25418022/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/26572634", "html_url": "https://github.com/airbnb/synapse/pull/15#issuecomment-26572634", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/15", "id": 26572634, "user": {"login": "pcarrier", "id": 8641, "avatar_url": "https://avatars0.githubusercontent.com/u/8641?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcarrier", "html_url": "https://github.com/pcarrier", "followers_url": "https://api.github.com/users/pcarrier/followers", "following_url": "https://api.github.com/users/pcarrier/following{/other_user}", "gists_url": "https://api.github.com/users/pcarrier/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcarrier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcarrier/subscriptions", "organizations_url": "https://api.github.com/users/pcarrier/orgs", "repos_url": "https://api.github.com/users/pcarrier/repos", "events_url": "https://api.github.com/users/pcarrier/events{/privacy}", "received_events_url": "https://api.github.com/users/pcarrier/received_events", "type": "User", "site_admin": false}, "created_at": "2013-10-18T05:07:13Z", "updated_at": "2013-10-18T05:07:13Z", "author_association": "CONTRIBUTOR", "body": "Completely agree on the changes.\n\nNothing obviously wrong with the code, didn't review very carefully but if it's tested then go!\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/26572634/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/27515126", "html_url": "https://github.com/airbnb/synapse/pull/16#issuecomment-27515126", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/16", "id": 27515126, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2013-10-31T18:58:08Z", "updated_at": "2013-10-31T18:58:08Z", "author_association": "COLLABORATOR", "body": "thanks for the pr! it looks generally good to me.\n\nmy main concern: i'm wary of adding a second config format; there should be only one way to configure synapse, and it should be the same as nerve. i often add comments to json hashes by just adding a \"comment\" field (which is ignored by the code). would that be sufficient?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/27515126/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/27516099", "html_url": "https://github.com/airbnb/synapse/pull/16#issuecomment-27516099", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/16", "id": 27516099, "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "created_at": "2013-10-31T19:09:47Z", "updated_at": "2013-10-31T19:09:47Z", "author_association": "NONE", "body": "On Thu, Oct 31, 2013 at 11:58 AM, Igor Serebryany\nnotifications@github.comwrote:\n\n> thanks for the pr! it looks generally good to me.\n> \n> Cool, glad you like it. :)\n> \n> my main concern: i'm wary of adding a second config format; there should\n> be only one way to configure synapse, and it should be the same as nerve. i\n> often add comments to json hashes by just adding a \"comment\" field (which\n> is ignored by the code). would that be sufficient?\n> \n> I should probably just back out the JSON/YAML stuff and offer it as a\n> separate PR.  FWIW, I'd argue for doing it in nerve as well.  My general\n> feeling is that JSON is great as a formal interchange format between\n> programs, but lousy as a configuration file format that has to be edited\n> (and read!) by humans, because of issues like this:\n\n{ \"valid_json?\":\n  { \"lets\":\n    [\"play\",\n     \"spot\",\n     \"the\",\n     \"syntax\",\n     \"errors\",\n   ]\n  },\n}\n\n...and while you can certainly do:\n\n{\n  \"this_dict\": {\n\n```\n\"has\": \"values\",\n\n\"and\": \"a\",\n\n\"comment\": \"which is me!\"\n```\n\n  }\n\n}\n\n...it's much harder to do something like this:\n\n{\n  \"this_dict\": {\n\n```\n# TODO: restore when bug #7 closes\n\n# \"has\": \"values\",\n\n# \"and\": \"a\",\n\n\"comment\": \"which is me!\"\n```\n\n  }\n\n}\n\n...whereas all of the above strings are valid and correct YAML.\n\nBTW, are you on freenode?  I have some general architecture questions I'd\nlike to pepper you with.\n\n-n\n\n## \n\nEveryone knows history moves in circles;\nthe surprise is how big the circles are.\n  (--Greil Marcus)\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/27516099/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/27516718", "html_url": "https://github.com/airbnb/synapse/pull/16#issuecomment-27516718", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/16", "id": 27516718, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2013-10-31T19:17:25Z", "updated_at": "2013-10-31T19:17:25Z", "author_association": "COLLABORATOR", "body": "i would merge this PR with the yaml stuff factored out. i'd be happy to set up a time to chat with you about infrastructure. email me (firstname.lastname@airbnb.com) to set up a time.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/27516718/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/27743806", "html_url": "https://github.com/airbnb/synapse/issues/17#issuecomment-27743806", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/17", "id": 27743806, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2013-11-05T02:52:30Z", "updated_at": "2013-11-05T02:52:30Z", "author_association": "COLLABORATOR", "body": "bah, i'm a bad maintainer; @memory which arguments that normally go into `listen` can go into `backend`? can these be the same thing?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/27743806/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/27744194", "html_url": "https://github.com/airbnb/synapse/issues/17#issuecomment-27744194", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/17", "id": 27744194, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2013-11-05T03:02:48Z", "updated_at": "2013-11-05T03:02:48Z", "author_association": "COLLABORATOR", "body": "the matrix says no; now we're going to have duplication of config information between `listen` and `backend` sections. probably, as part of the changes to the config format, we should have dynamically build the `listen` directive.\n\ni think we can do this by being a little smarter about what the different haproxy directives mean and which sections they can go in. then, we can extract the ones that relate to `backend` or `frontend` from `listen` and put them there without requiring an extra `backend` config section...\n\n@memory does that sound like a reasonable approach?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/27744194/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/27745380", "html_url": "https://github.com/airbnb/synapse/issues/17#issuecomment-27745380", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/17", "id": 27745380, "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "created_at": "2013-11-05T03:36:43Z", "updated_at": "2013-11-05T03:36:43Z", "author_association": "NONE", "body": "Actually my original pass at this involved trying to build out the listen section a little more dynamically, but I went for the minimal-changes route.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/27745380/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/27745393", "html_url": "https://github.com/airbnb/synapse/issues/17#issuecomment-27745393", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/17", "id": 27745393, "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "created_at": "2013-11-05T03:37:11Z", "updated_at": "2013-11-05T03:37:11Z", "author_association": "NONE", "body": "In short: yes. :)\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/27745393/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/27790606", "html_url": "https://github.com/airbnb/synapse/pull/20#issuecomment-27790606", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/20", "id": 27790606, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2013-11-05T16:55:30Z", "updated_at": "2013-11-05T16:55:30Z", "author_association": "COLLABORATOR", "body": "the list of keywords and their applicability was auto-generated using [this gist](https://gist.github.com/igor47/7322131). prettified by piping through [jq](http://stedolan.github.io/jq/)\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/27790606/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/27792318", "html_url": "https://github.com/airbnb/synapse/pull/19#issuecomment-27792318", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/19", "id": 27792318, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2013-11-05T17:12:59Z", "updated_at": "2013-11-05T17:12:59Z", "author_association": "COLLABORATOR", "body": "thanks for the PR! looks great except for the few nits. i would definitely want to see the config handling addressed.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/27792318/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/27797253", "html_url": "https://github.com/airbnb/synapse/pull/19#issuecomment-27797253", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/19", "id": 27797253, "user": {"login": "rgarcia", "id": 72655, "avatar_url": "https://avatars3.githubusercontent.com/u/72655?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rgarcia", "html_url": "https://github.com/rgarcia", "followers_url": "https://api.github.com/users/rgarcia/followers", "following_url": "https://api.github.com/users/rgarcia/following{/other_user}", "gists_url": "https://api.github.com/users/rgarcia/gists{/gist_id}", "starred_url": "https://api.github.com/users/rgarcia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rgarcia/subscriptions", "organizations_url": "https://api.github.com/users/rgarcia/orgs", "repos_url": "https://api.github.com/users/rgarcia/repos", "events_url": "https://api.github.com/users/rgarcia/events{/privacy}", "received_events_url": "https://api.github.com/users/rgarcia/received_events", "type": "User", "site_admin": false}, "created_at": "2013-11-05T18:08:35Z", "updated_at": "2013-11-05T18:08:35Z", "author_association": "CONTRIBUTOR", "body": "thanks for the review\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/27797253/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/27909890", "html_url": "https://github.com/airbnb/synapse/pull/20#issuecomment-27909890", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/20", "id": 27909890, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2013-11-06T20:20:32Z", "updated_at": "2013-11-06T20:20:32Z", "author_association": "COLLABORATOR", "body": "i added some additional commits what might address the concerns from @memory \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/27909890/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/28260993", "html_url": "https://github.com/airbnb/synapse/pull/22#issuecomment-28260993", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/22", "id": 28260993, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2013-11-12T01:41:56Z", "updated_at": "2013-11-12T01:41:56Z", "author_association": "COLLABORATOR", "body": "this fixes airbnb/synapse#17\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/28260993/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/28335651", "html_url": "https://github.com/airbnb/synapse/pull/19#issuecomment-28335651", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/19", "id": 28335651, "user": {"login": "cgarvis", "id": 213125, "avatar_url": "https://avatars1.githubusercontent.com/u/213125?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cgarvis", "html_url": "https://github.com/cgarvis", "followers_url": "https://api.github.com/users/cgarvis/followers", "following_url": "https://api.github.com/users/cgarvis/following{/other_user}", "gists_url": "https://api.github.com/users/cgarvis/gists{/gist_id}", "starred_url": "https://api.github.com/users/cgarvis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cgarvis/subscriptions", "organizations_url": "https://api.github.com/users/cgarvis/orgs", "repos_url": "https://api.github.com/users/cgarvis/repos", "events_url": "https://api.github.com/users/cgarvis/events{/privacy}", "received_events_url": "https://api.github.com/users/cgarvis/received_events", "type": "User", "site_admin": false}, "created_at": "2013-11-12T21:34:50Z", "updated_at": "2013-11-12T21:34:50Z", "author_association": "NONE", "body": "+1\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/28335651/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/28337885", "html_url": "https://github.com/airbnb/synapse/pull/19#issuecomment-28337885", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/19", "id": 28337885, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2013-11-12T21:59:51Z", "updated_at": "2013-11-12T21:59:51Z", "author_association": "COLLABORATOR", "body": "thanks! this will be in a release later today. if you're feeling motivated, write some tests around your watcher in the smartstack cookbook: https://github.com/airbnb/smartstack-cookbook\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/28337885/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/28430094", "html_url": "https://github.com/airbnb/synapse/pull/23#issuecomment-28430094", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/23", "id": 28430094, "user": {"login": "rgarcia", "id": 72655, "avatar_url": "https://avatars3.githubusercontent.com/u/72655?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rgarcia", "html_url": "https://github.com/rgarcia", "followers_url": "https://api.github.com/users/rgarcia/followers", "following_url": "https://api.github.com/users/rgarcia/following{/other_user}", "gists_url": "https://api.github.com/users/rgarcia/gists{/gist_id}", "starred_url": "https://api.github.com/users/rgarcia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rgarcia/subscriptions", "organizations_url": "https://api.github.com/users/rgarcia/orgs", "repos_url": "https://api.github.com/users/rgarcia/repos", "events_url": "https://api.github.com/users/rgarcia/events{/privacy}", "received_events_url": "https://api.github.com/users/rgarcia/received_events", "type": "User", "site_admin": false}, "created_at": "2013-11-13T20:20:22Z", "updated_at": "2013-11-13T20:20:22Z", "author_association": "CONTRIBUTOR", "body": ":+1: also ran into this issue.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/28430094/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/28430109", "html_url": "https://github.com/airbnb/synapse/pull/23#issuecomment-28430109", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/23", "id": 28430109, "user": {"login": "jamessharp", "id": 1677854, "avatar_url": "https://avatars0.githubusercontent.com/u/1677854?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamessharp", "html_url": "https://github.com/jamessharp", "followers_url": "https://api.github.com/users/jamessharp/followers", "following_url": "https://api.github.com/users/jamessharp/following{/other_user}", "gists_url": "https://api.github.com/users/jamessharp/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamessharp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamessharp/subscriptions", "organizations_url": "https://api.github.com/users/jamessharp/orgs", "repos_url": "https://api.github.com/users/jamessharp/repos", "events_url": "https://api.github.com/users/jamessharp/events{/privacy}", "received_events_url": "https://api.github.com/users/jamessharp/received_events", "type": "User", "site_admin": false}, "created_at": "2013-11-13T20:20:34Z", "updated_at": "2013-11-13T20:20:34Z", "author_association": "NONE", "body": "P.S. I also tweaked the debug logging to pretty print the haproxy config\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/28430109/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/28440650", "html_url": "https://github.com/airbnb/synapse/pull/23#issuecomment-28440650", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/23", "id": 28440650, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2013-11-13T22:28:58Z", "updated_at": "2013-11-13T22:28:58Z", "author_association": "COLLABORATOR", "body": "this runs contrary to how synapse should be used.\n\nsynapse is meant to serve as a proxy ONLY for other services running on the same machine as synapse. if you would like synapse to help you configure a central routing layer, you should write your own `listen` or `frontend` directives in `extra_sections`. however, i do not recommend using such a pattern.\n\ni considered suggesting that you parameterize this option instead of just setting it to `0.0.0.0`, but i don't want to send the wrong message to future users.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/28440650/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/28445461", "html_url": "https://github.com/airbnb/synapse/pull/24#issuecomment-28445461", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/24", "id": 28445461, "user": {"login": "brndnmtthws", "id": 3129093, "avatar_url": "https://avatars1.githubusercontent.com/u/3129093?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brndnmtthws", "html_url": "https://github.com/brndnmtthws", "followers_url": "https://api.github.com/users/brndnmtthws/followers", "following_url": "https://api.github.com/users/brndnmtthws/following{/other_user}", "gists_url": "https://api.github.com/users/brndnmtthws/gists{/gist_id}", "starred_url": "https://api.github.com/users/brndnmtthws/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brndnmtthws/subscriptions", "organizations_url": "https://api.github.com/users/brndnmtthws/orgs", "repos_url": "https://api.github.com/users/brndnmtthws/repos", "events_url": "https://api.github.com/users/brndnmtthws/events{/privacy}", "received_events_url": "https://api.github.com/users/brndnmtthws/received_events", "type": "User", "site_admin": false}, "created_at": "2013-11-13T23:35:59Z", "updated_at": "2013-11-13T23:35:59Z", "author_association": "CONTRIBUTOR", "body": "Hey James,\n\nWe're doing something similar to this as well.  I don't think we've quite figured out the best way to go about it, however.  There's a nerve branch with a proposed solution: https://github.com/airbnb/nerve/tree/dynamic-config2\n\nThe current goal is to a) provide a simple, robust interface and b) allow services to be announced and discovered at run-time.\n\nWe have not updated synapse yet, but it would make sense to have both nerve and synapse behave the same way.  Do you want to take a look at how we're doing it with nerve?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/28445461/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/28466822", "html_url": "https://github.com/airbnb/synapse/pull/23#issuecomment-28466822", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/23", "id": 28466822, "user": {"login": "jamessharp", "id": 1677854, "avatar_url": "https://avatars0.githubusercontent.com/u/1677854?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamessharp", "html_url": "https://github.com/jamessharp", "followers_url": "https://api.github.com/users/jamessharp/followers", "following_url": "https://api.github.com/users/jamessharp/following{/other_user}", "gists_url": "https://api.github.com/users/jamessharp/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamessharp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamessharp/subscriptions", "organizations_url": "https://api.github.com/users/jamessharp/orgs", "repos_url": "https://api.github.com/users/jamessharp/repos", "events_url": "https://api.github.com/users/jamessharp/events{/privacy}", "received_events_url": "https://api.github.com/users/jamessharp/received_events", "type": "User", "site_admin": false}, "created_at": "2013-11-14T08:26:13Z", "updated_at": "2013-11-14T08:26:13Z", "author_association": "NONE", "body": "Ah OK. What's the rationale behind having it _only_ for other services on the same machine? \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/28466822/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/28467497", "html_url": "https://github.com/airbnb/synapse/pull/24#issuecomment-28467497", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/24", "id": 28467497, "user": {"login": "jamessharp", "id": 1677854, "avatar_url": "https://avatars0.githubusercontent.com/u/1677854?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamessharp", "html_url": "https://github.com/jamessharp", "followers_url": "https://api.github.com/users/jamessharp/followers", "following_url": "https://api.github.com/users/jamessharp/following{/other_user}", "gists_url": "https://api.github.com/users/jamessharp/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamessharp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamessharp/subscriptions", "organizations_url": "https://api.github.com/users/jamessharp/orgs", "repos_url": "https://api.github.com/users/jamessharp/repos", "events_url": "https://api.github.com/users/jamessharp/events{/privacy}", "received_events_url": "https://api.github.com/users/jamessharp/received_events", "type": "User", "site_admin": false}, "created_at": "2013-11-14T08:39:30Z", "updated_at": "2013-11-14T08:39:30Z", "author_association": "NONE", "body": "Interesting. I hadn't seen the nerve stuff. For now I've worked around the problem with nerve by modifying the nerve config and restarting every time I deploy a service. But its not ideal.\n\nMy thought process for synapse was\n- You need some way of discovering when a service has been added or removed\n- You need some way of getting the config for any new, unknown services\n- You don't really want anything else - it should just happen magically\n\nI then decided to abstract away the problem of how to do that (copying from the service watchers), and allow people to use whatever they want. The zookeeper discoverer works well with the current nerve/synapse zookeeper set up. The S3 idea I'm not completely happy with but it works.\n\nI'll take a look at the nerve stuff, but as you say, nerve and synapse should behave the same\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/28467497/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/28500408", "html_url": "https://github.com/airbnb/synapse/pull/23#issuecomment-28500408", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/23", "id": 28500408, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2013-11-14T16:49:23Z", "updated_at": "2013-11-14T16:49:23Z", "author_association": "COLLABORATOR", "body": "the rationale is resiliency and conceptual simplicity.\n\nonly two machines should be involved in a service transaction -- the client, and the server. if you introduce additional intermediary machines, then the failure of those machines needlessly interrupts communication. ideally, with synapse, even the failure of a particular server instance is transient because it will be removed from rotation and other machines will take it's place.\n\nthere are no advantages to introducing additional machines in the pathway, and plenty of disadvantages.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/28500408/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/28501101", "html_url": "https://github.com/airbnb/synapse/pull/23#issuecomment-28501101", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/23", "id": 28501101, "user": {"login": "jamessharp", "id": 1677854, "avatar_url": "https://avatars0.githubusercontent.com/u/1677854?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamessharp", "html_url": "https://github.com/jamessharp", "followers_url": "https://api.github.com/users/jamessharp/followers", "following_url": "https://api.github.com/users/jamessharp/following{/other_user}", "gists_url": "https://api.github.com/users/jamessharp/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamessharp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamessharp/subscriptions", "organizations_url": "https://api.github.com/users/jamessharp/orgs", "repos_url": "https://api.github.com/users/jamessharp/repos", "events_url": "https://api.github.com/users/jamessharp/events{/privacy}", "received_events_url": "https://api.github.com/users/jamessharp/received_events", "type": "User", "site_admin": false}, "created_at": "2013-11-14T16:56:12Z", "updated_at": "2013-11-14T16:56:12Z", "author_association": "NONE", "body": "makes a lot of sense - thanks\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/28501101/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/28503004", "html_url": "https://github.com/airbnb/synapse/pull/24#issuecomment-28503004", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/24", "id": 28503004, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2013-11-14T17:15:24Z", "updated_at": "2013-11-14T17:15:37Z", "author_association": "COLLABORATOR", "body": "thanks for the pr; we've been having a lot of internal debate about how best to handle the mesos use case. we have two broad avenues:\n1. configuration management; this is how we roll out our deployments to static machines, but in the Airbnb environment even our mesos slaves are on chef. for synapse, this means that to accomodate your use case (every service is available on every machine), when you deploy a new service, you would also need to run configuration management on every slave to inform it about the new service. in our environment, this approach works well because we add services fairly infrequently. however, this could be a bigger deal in more dynamic environments such as multi-tenant ones.\n2. dynamic discovery; this is how our internal fork of nerve works on the mesos cluster, with services pinging nerve with their check information when they come up. the disadvantages are that services have to be modified to support nerve. the advantages are that services can share the same nerve instance. an alternate approach would be to deploy a copy of nerve alongside every service when it's scheduled, which would waste memory but be transparent to the service.\n\neverything we can try will fall somewhere on the spectrum from static config files, made perhaps slightly more dynamic with configuration management, and purely dynamic configuration that happens inside the application at runtime (by reading from a data store, or being remotely configured, or whatever). the question is, where on the spectrum do we want to end up.\n\ni'm not sure of the answer to that question. my gut feeling says to avoid dynamism as much as possible because it keeps things simpler. how is the program going to behave at runtime? just look at it's config file!\n\nhowever, i recognize that for some use cases dynamism might be unavoidable, and a multi-tenant mesos environment might be one of those cases.\n\nif we do agree on a dynamic approach, what's the best implementation? i've spoken to engineers at youtube and baidu who have taken the tack of making zookeeper keys available as a local filesystem to source their configuration. if we take such an approach, the additional complexity to synapse and nerve would be watching for updates to their config files (inotify?) and acting on the change (restarting itself?). a separate, out-of-band process can dynamically update the configs based on any number of comfiguration sources. this is more general, abstracts the complexity, and can fail independently and still leave a running synapse and nerve.\n\ni haven't yet really looked at the PR, but let me do so to see how much complexity this would introduce. but my initial preference is to keep nerve/synapse as simple as possible and be very very careful about the dynamism we introduce into them.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/28503004/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/28953600", "html_url": "https://github.com/airbnb/synapse/issues/28#issuecomment-28953600", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/28", "id": 28953600, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2013-11-21T02:41:32Z", "updated_at": "2013-11-21T02:41:32Z", "author_association": "COLLABORATOR", "body": "yup. right you are. for us, the reasoning was \"if airbnb.com won't resolve we have bigger issues anyway\". i think the second solution you propose (does it get a response in the first place?) is good enough.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/28953600/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/29009973", "html_url": "https://github.com/airbnb/synapse/pull/26#issuecomment-29009973", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/26", "id": 29009973, "user": {"login": "cgarvis", "id": 213125, "avatar_url": "https://avatars1.githubusercontent.com/u/213125?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cgarvis", "html_url": "https://github.com/cgarvis", "followers_url": "https://api.github.com/users/cgarvis/followers", "following_url": "https://api.github.com/users/cgarvis/following{/other_user}", "gists_url": "https://api.github.com/users/cgarvis/gists{/gist_id}", "starred_url": "https://api.github.com/users/cgarvis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cgarvis/subscriptions", "organizations_url": "https://api.github.com/users/cgarvis/orgs", "repos_url": "https://api.github.com/users/cgarvis/repos", "events_url": "https://api.github.com/users/cgarvis/events{/privacy}", "received_events_url": "https://api.github.com/users/cgarvis/received_events", "type": "User", "site_admin": false}, "created_at": "2013-11-21T18:28:26Z", "updated_at": "2013-11-21T18:28:26Z", "author_association": "NONE", "body": "+1\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/29009973/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/29316553", "html_url": "https://github.com/airbnb/synapse/pull/25#issuecomment-29316553", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/25", "id": 29316553, "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "created_at": "2013-11-26T18:10:57Z", "updated_at": "2013-11-26T18:10:57Z", "author_association": "NONE", "body": "Ping? :)\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/29316553/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/29403291", "html_url": "https://github.com/airbnb/synapse/pull/25#issuecomment-29403291", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/25", "id": 29403291, "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "created_at": "2013-11-27T17:29:18Z", "updated_at": "2013-11-27T17:29:18Z", "author_association": "NONE", "body": "(rebased against synapse 0.7.0)\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/29403291/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/29546506", "html_url": "https://github.com/airbnb/synapse/pull/30#issuecomment-29546506", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/30", "id": 29546506, "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "created_at": "2013-11-30T05:53:15Z", "updated_at": "2013-11-30T05:53:15Z", "author_association": "NONE", "body": "While this works, it's obviously pretty rough-and-ready -- posting here to get some feedback on the approach.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/29546506/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/29581957", "html_url": "https://github.com/airbnb/synapse/pull/25#issuecomment-29581957", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/25", "id": 29581957, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2013-12-01T20:15:05Z", "updated_at": "2013-12-01T20:15:05Z", "author_association": "COLLABORATOR", "body": "i've thought about this a bit and i'm not happy about the additional complexity. \n\nyou can accomplish the exact behavior if you define each of your backup zk paths as a separate service; for instance, `service1`, `backup-service`. in the `service1` config, you can use the [`nb_srv`](http://cbonte.github.io/haproxy-dconv/configuration-1.4.html#7.5.1-nbsrv) acl and redirect to the `backup-service` backend if the number of backends in the `service1` backend is too low (in your case, 0, but using this approach you can have more flexible rules)\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/29581957/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/29643228", "html_url": "https://github.com/airbnb/synapse/pull/27#issuecomment-29643228", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/27", "id": 29643228, "user": {"login": "brndnmtthws", "id": 3129093, "avatar_url": "https://avatars1.githubusercontent.com/u/3129093?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brndnmtthws", "html_url": "https://github.com/brndnmtthws", "followers_url": "https://api.github.com/users/brndnmtthws/followers", "following_url": "https://api.github.com/users/brndnmtthws/following{/other_user}", "gists_url": "https://api.github.com/users/brndnmtthws/gists{/gist_id}", "starred_url": "https://api.github.com/users/brndnmtthws/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brndnmtthws/subscriptions", "organizations_url": "https://api.github.com/users/brndnmtthws/orgs", "repos_url": "https://api.github.com/users/brndnmtthws/repos", "events_url": "https://api.github.com/users/brndnmtthws/events{/privacy}", "received_events_url": "https://api.github.com/users/brndnmtthws/received_events", "type": "User", "site_admin": false}, "created_at": "2013-12-02T18:22:04Z", "updated_at": "2013-12-02T18:22:04Z", "author_association": "CONTRIBUTOR", "body": "@igor47 @pcarrier \n\nHave been running this for a few weeks now.  Would love to see it merged.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/29643228/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/29742275", "html_url": "https://github.com/airbnb/synapse/pull/31#issuecomment-29742275", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/31", "id": 29742275, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2013-12-03T19:25:05Z", "updated_at": "2013-12-03T19:25:05Z", "author_association": "COLLABORATOR", "body": "we've already discussed this idea in this issue: https://github.com/airbnb/synapse/pull/23 currently, if you would like to bind to additional addresses, you can just use a `bind` directive in the frontend stanza. however, i don't recommend this mode of operation, as i said in the linked issue.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/29742275/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/29742446", "html_url": "https://github.com/airbnb/synapse/issues/17#issuecomment-29742446", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/17", "id": 29742446, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2013-12-03T19:26:40Z", "updated_at": "2013-12-03T19:26:40Z", "author_association": "COLLABORATOR", "body": "i think this is fixed now; closing\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/29742446/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/29744783", "html_url": "https://github.com/airbnb/synapse/pull/30#issuecomment-29744783", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/30", "id": 29744783, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2013-12-03T19:51:58Z", "updated_at": "2013-12-03T19:51:58Z", "author_association": "COLLABORATOR", "body": "i could have sworn i commented on this issue over the weekend, but my comment seems to have disappeared... or is this a different PR?\n\ncan you show an example of the kind of configuration you would include in `shared_config`? do we need any special configuration? i guess at least the port to bind to... \n\nmaybe the config format could be: `\"shared_frontend\" => { \"port\" => 8081, \"frontend\" => [] }` to fit in with the definition of services? maybe we could reuse the code from service validation to also validate `shared_frontend` ? \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/29744783/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/29826884", "html_url": "https://github.com/airbnb/synapse/pull/30#issuecomment-29826884", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/30", "id": 29826884, "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "created_at": "2013-12-04T17:38:10Z", "updated_at": "2013-12-04T17:38:10Z", "author_association": "NONE", "body": "So yeah, as we're currently using it, shared_config just has a bind\nstatement in it, although you could obviously get cleverer if you wanted:\n\n{\n  \"service_conf_dir\": \"/etc/synapse/services\",\n  \"haproxy\": {\n    \"shared_frontend\": [\n      \"bind 127.0.0.1:8081\"\n    ],\n    \"reload_command\": \"service haproxy reload\",\n    \"config_file_path\": \"/etc/haproxy/haproxy.cfg\",\n    \"socket_file_path\": \"/var/run/haproxy.sock\",\n    \"do_writes\": true,\n    \"do_reloads\": true,\n    \"do_socket\": true,\n    \"global\": [\n      \"daemon\",\n      \"user    haproxy\",\n      \"group   haproxy\",\n      \"maxconn 4096\",\n      \"log     127.0.0.1 local0\",\n      \"log     127.0.0.1 local1 notice\",\n      \"stats   socket /var/run/haproxy.sock\"\n    ],\n    \"defaults\": [\n      \"log      global\",\n      \"option   dontlognull\",\n      \"maxconn  2000\",\n      \"retries  3\",\n      \"mode     http\",\n      \"timeout  connect 5s\",\n      \"timeout  client  1m\",\n      \"timeout  server  1m\",\n      \"option   redispatch\",\n      \"balance  roundrobin\"\n    ],\n    \"extra_sections\": {\n      \"listen stats :7070\": [\n        \"mode http\",\n        \"stats enable\",\n        \"stats uri /\",\n        \"stats refresh 5s\"\n      ]\n    }\n  }\n}\n\n...and then various per-service json blobs get constructed by puppet and\ndropped into /etc/synapse/services, for instance:\n\n{\n  \"discovery\": {\n    \"method\": \"zookeeper\",\n    \"path\":  \"/nerve/services/qa/seer-server/default\",\n    \"hosts\": [\n      \"0.zookeeper-server.climate.net:2181\",\n      \"1.zookeeper-server.climate.net:2181\",\n      \"2.zookeeper-server.climate.net:2181\"\n    ]\n  },\n  \"haproxy\": {\n    \"server_options\": \"check inter 2s rise 3 fall 2\",\n    \"shared_frontend\": [\n     \"acl is_seer-server hdr_dom(host) -i seer-server.lb\",\n     \"use_backend seer-server if is_seer-server\"\n    ],\n    \"backend\": [\n      \"mode http\"\n    ]\n  }\n}\n\nAnd yeah; I've got a TODO in there to extract the frontend validation code\nso that it can be used against the shared_frontend section as well.\n\n-n\n\nOn Tue, Dec 3, 2013 at 11:52 AM, Igor Serebryany\nnotifications@github.comwrote:\n\n> i could have sworn i commented on this issue over the weekend, but my\n> comment seems to have disappeared... or is this a different PR?\n> \n> can you show an example of the kind of configuration you would include in\n> shared_config? do we need any special configuration? i guess at least the\n> port to bind to...\n> \n> maybe the config format could be: \"shared_frontend\" => { \"port\" => 8081,\n> \"frontend\" => [] } to fit in with the definition of services? maybe we\n> could reuse the code from service validation to also validate\n> shared_frontend ?\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/airbnb/synapse/pull/30#issuecomment-29744783\n> .\n\n## \n\nEveryone knows history moves in circles;\nthe surprise is how big the circles are.\n  (--Greil Marcus)\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/29826884/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/29834315", "html_url": "https://github.com/airbnb/synapse/pull/32#issuecomment-29834315", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/32", "id": 29834315, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2013-12-04T19:04:00Z", "updated_at": "2013-12-04T19:04:00Z", "author_association": "COLLABORATOR", "body": "lgtm in general except for nitpick\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/29834315/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/29920717", "html_url": "https://github.com/airbnb/synapse/pull/31#issuecomment-29920717", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/31", "id": 29920717, "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "created_at": "2013-12-05T17:54:26Z", "updated_at": "2013-12-05T17:54:26Z", "author_association": "NONE", "body": "On Tue, Dec 3, 2013 at 11:25 AM, Igor Serebryany\nnotifications@github.comwrote:\n\n> we've already discussed this idea in this issue: #23https://github.com/airbnb/synapse/pull/23currently, if you would like to bind to additional addresses, you can just\n> use a bind directive in the frontend stanza.\n\nPossibly I'm missing something, but:\n- If you define a \"port\" section in a service, it automatically inserts\n  \"bind localhost:#{port}\" via the code in question in this pull\n- ...if you add an additional bind in the frontend section (ie: \"bind\n  0.0.0.0:port\"), you have to bind on a _different_ port, otherwise haproxy\n  will complain about the conflicting bind statements\n- If you do _not_ define a port section in a service, synapse will never\n  generate a frontend stanza, and anythign you define in frontend:[] is\n  ignored.\n\nSo without this change, the only way to bind to a non-loopback address is\nfor each service you want to consume two different ports, one on localhost\nand one on 0.0.0.0.  (Or somehow determine the IP address of each\nnon-loopback interface and define each of them manually.)\n\n-n\n\n## \n\nEveryone knows history moves in circles;\nthe surprise is how big the circles are.\n  (--Greil Marcus)\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/29920717/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/30461004", "html_url": "https://github.com/airbnb/synapse/pull/27#issuecomment-30461004", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/27", "id": 30461004, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2013-12-12T20:57:26Z", "updated_at": "2013-12-12T20:57:26Z", "author_association": "COLLABORATOR", "body": "yup, was waiting to get it tested. looks great!\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/30461004/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/30461105", "html_url": "https://github.com/airbnb/synapse/pull/25#issuecomment-30461105", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/25", "id": 30461105, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2013-12-12T20:58:38Z", "updated_at": "2013-12-12T20:58:38Z", "author_association": "COLLABORATOR", "body": "does the approach i've outlined sound reasonable? can i close this issue?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/30461105/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/30461235", "html_url": "https://github.com/airbnb/synapse/pull/31#issuecomment-30461235", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/31", "id": 30461235, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2013-12-12T21:00:15Z", "updated_at": "2013-12-12T21:00:15Z", "author_association": "COLLABORATOR", "body": "yup, you're totally right. i'm still really uneasy opening up this use case, but enough people are asking for it that maybe it's a good idea?\n\nwhy do you want to have a pool of dedicated haproxy machines?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/30461235/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/30462065", "html_url": "https://github.com/airbnb/synapse/pull/25#issuecomment-30462065", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/25", "id": 30462065, "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "created_at": "2013-12-12T21:10:15Z", "updated_at": "2013-12-12T21:10:15Z", "author_association": "NONE", "body": "On Thu, Dec 12, 2013 at 12:58 PM, Igor Serebryany\nnotifications@github.comwrote:\n\n> does the approach i've outlined sound reasonable? can i close this issue?\n\nI'm still playing around with it, but I saw some very weird ZK-related\nproblems when testing this patch, so I think it's a dead end either way.\n Close it. :)\n\n-n\n\n## \n\nEveryone knows history moves in circles;\nthe surprise is how big the circles are.\n  (--Greil Marcus)\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/30462065/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/30462304", "html_url": "https://github.com/airbnb/synapse/pull/31#issuecomment-30462304", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/31", "id": 30462304, "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "created_at": "2013-12-12T21:13:07Z", "updated_at": "2013-12-12T21:13:07Z", "author_association": "NONE", "body": "On Thu, Dec 12, 2013 at 1:00 PM, Igor Serebryany\nnotifications@github.comwrote:\n\n> yup, you're totally right. i'm still really uneasy opening up this use\n> case, but enough people are asking for it that maybe it's a good idea?\n> \n> why do you want to have a pool of dedicated haproxy machines?\n\nConsider a test environment in EC2 with a pool of services that developers\nrunning code on their laptops want to use as backends.  Running a fully\ncopy of synapse+haproxy on their laptop is of course possible, but way\noverkill when they just want to test their client code against a backend\nAPI.  But if there's an external haproxy they could point everything at...\n\n(There are some other possible use cases, but this is the primary one.)\n\n-n\n\n## \n\nEveryone knows history moves in circles;\nthe surprise is how big the circles are.\n  (--Greil Marcus)\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/30462304/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/30462603", "html_url": "https://github.com/airbnb/synapse/pull/25#issuecomment-30462603", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/25", "id": 30462603, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2013-12-12T21:16:47Z", "updated_at": "2013-12-12T21:16:47Z", "author_association": "COLLABORATOR", "body": "closing; we have a workaround for the use case\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/30462603/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/31199172", "html_url": "https://github.com/airbnb/synapse/pull/31#issuecomment-31199172", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/31", "id": 31199172, "user": {"login": "ernoaapa", "id": 662535, "avatar_url": "https://avatars2.githubusercontent.com/u/662535?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ernoaapa", "html_url": "https://github.com/ernoaapa", "followers_url": "https://api.github.com/users/ernoaapa/followers", "following_url": "https://api.github.com/users/ernoaapa/following{/other_user}", "gists_url": "https://api.github.com/users/ernoaapa/gists{/gist_id}", "starred_url": "https://api.github.com/users/ernoaapa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ernoaapa/subscriptions", "organizations_url": "https://api.github.com/users/ernoaapa/orgs", "repos_url": "https://api.github.com/users/ernoaapa/repos", "events_url": "https://api.github.com/users/ernoaapa/events{/privacy}", "received_events_url": "https://api.github.com/users/ernoaapa/received_events", "type": "User", "site_admin": false}, "created_at": "2013-12-25T13:24:44Z", "updated_at": "2013-12-25T13:24:44Z", "author_association": "NONE", "body": "I faced this problem also. In my case I played Synapse with Docker. \n\nSynapse (and Nerve) run in container. And my service is running in own container. Thats why I needed Synapse to listen network what is build around these containers not localhost. \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/31199172/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/31595564", "html_url": "https://github.com/airbnb/synapse/issues/33#issuecomment-31595564", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/33", "id": 31595564, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-01-05T03:44:56Z", "updated_at": "2014-01-05T03:44:56Z", "author_association": "COLLABORATOR", "body": "because STDERR is unbuffered; if we were outputting to STDOUT, we would see a bunch of log lines appearing in files all at once with long periods of no output, which makes debugging harder. we saw this happening when we ran those programs via `runit` and logged via `runit`'s `svlog`.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/31595564/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/31611229", "html_url": "https://github.com/airbnb/synapse/issues/33#issuecomment-31611229", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/33", "id": 31611229, "user": {"login": "ernoaapa", "id": 662535, "avatar_url": "https://avatars2.githubusercontent.com/u/662535?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ernoaapa", "html_url": "https://github.com/ernoaapa", "followers_url": "https://api.github.com/users/ernoaapa/followers", "following_url": "https://api.github.com/users/ernoaapa/following{/other_user}", "gists_url": "https://api.github.com/users/ernoaapa/gists{/gist_id}", "starred_url": "https://api.github.com/users/ernoaapa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ernoaapa/subscriptions", "organizations_url": "https://api.github.com/users/ernoaapa/orgs", "repos_url": "https://api.github.com/users/ernoaapa/repos", "events_url": "https://api.github.com/users/ernoaapa/events{/privacy}", "received_events_url": "https://api.github.com/users/ernoaapa/received_events", "type": "User", "site_admin": false}, "created_at": "2014-01-05T18:26:16Z", "updated_at": "2014-01-05T18:26:16Z", "author_association": "NONE", "body": "Ok, in that case it make sense. That's something what I didn't know.\n\nThanks for reply!\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/31611229/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/31678143", "html_url": "https://github.com/airbnb/synapse/issues/34#issuecomment-31678143", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/34", "id": 31678143, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-01-06T19:24:50Z", "updated_at": "2014-01-06T19:24:50Z", "author_association": "COLLABORATOR", "body": "we've recently observed this problem in our environment as well; it's my top priority to investigate ATM\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/31678143/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/31679711", "html_url": "https://github.com/airbnb/synapse/issues/34#issuecomment-31679711", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/34", "id": 31679711, "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "created_at": "2014-01-06T19:41:25Z", "updated_at": "2014-01-06T19:41:25Z", "author_association": "NONE", "body": "Well, I guess I'm glad to know it's not just me.  If I can provide any additional info for debugging, please ping me on freenode or gchat.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/31679711/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/31680638", "html_url": "https://github.com/airbnb/synapse/issues/34#issuecomment-31680638", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/34", "id": 31680638, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-01-06T19:51:03Z", "updated_at": "2014-01-06T19:51:03Z", "author_association": "COLLABORATOR", "body": "a way to reproduce this would be AWESOME\n\nOn Mon, Jan 6, 2014 at 11:41 AM, memory notifications@github.com wrote:\n\n> Well, I guess I'm glad to know it's not just me. If I can provide any\n> additional info for debugging, please ping me on freenode or gchat.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/airbnb/synapse/issues/34#issuecomment-31679711\n> .\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/31680638/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/31691635", "html_url": "https://github.com/airbnb/synapse/issues/34#issuecomment-31691635", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/34", "id": 31691635, "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "created_at": "2014-01-06T21:57:17Z", "updated_at": "2014-01-06T21:57:17Z", "author_association": "NONE", "body": "Ugh, I wish.  I have yet to have it happen in <10 hours of process uptime. :(\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/31691635/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/31800831", "html_url": "https://github.com/airbnb/synapse/issues/34#issuecomment-31800831", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/34", "id": 31800831, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-01-08T02:30:00Z", "updated_at": "2014-01-08T02:30:00Z", "author_association": "COLLABORATOR", "body": "a stack trace from a stuck synapse process, curtesy of @nelgau : https://gist.github.com/nelgau/3a910d5da1ac09abfd22\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/31800831/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/31803093", "html_url": "https://github.com/airbnb/synapse/issues/34#issuecomment-31803093", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/34", "id": 31803093, "user": {"login": "schleyfox", "id": 4259, "avatar_url": "https://avatars0.githubusercontent.com/u/4259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/schleyfox", "html_url": "https://github.com/schleyfox", "followers_url": "https://api.github.com/users/schleyfox/followers", "following_url": "https://api.github.com/users/schleyfox/following{/other_user}", "gists_url": "https://api.github.com/users/schleyfox/gists{/gist_id}", "starred_url": "https://api.github.com/users/schleyfox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schleyfox/subscriptions", "organizations_url": "https://api.github.com/users/schleyfox/orgs", "repos_url": "https://api.github.com/users/schleyfox/repos", "events_url": "https://api.github.com/users/schleyfox/events{/privacy}", "received_events_url": "https://api.github.com/users/schleyfox/received_events", "type": "User", "site_admin": false}, "created_at": "2014-01-08T03:28:57Z", "updated_at": "2014-01-08T03:28:57Z", "author_association": "OWNER", "body": "Worth noting, that this indicates that the process gets stuck when trying to exit.  We will investigate this further and let you know what we find.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/31803093/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/31985486", "html_url": "https://github.com/airbnb/synapse/issues/34#issuecomment-31985486", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/34", "id": 31985486, "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "created_at": "2014-01-09T22:47:52Z", "updated_at": "2014-01-09T22:47:52Z", "author_association": "NONE", "body": "Found another one in the catatonic state; attached with gdb to get a stacktrace; if I'm reading this correctly it does indeed look like it's trying to shut down?\n\n(gdb) bt\n#0  0x00007f363f7e9f67 in sched_yield () from /lib/libc.so.6\n#1  0x00007f3640724045 in gvl_yield (vm=0x1176010, th=<value optimized out>) at thread_pthread.c:123\n#2  0x00007f3640724b60 in rb_thread_schedule_limits () at thread.c:1025\n#3  rb_thread_schedule () at thread.c:1035\n#4  0x00007f3640724d77 in rb_thread_terminate_all () at thread.c:375\n#5  0x00007f3640604516 in ruby_cleanup (ex=6) at eval.c:140\n#6  0x00007f36406046d5 in ruby_run_node (n=0x1562808) at eval.c:244\n#7  0x0000000000400a0b in main (argc=4, argv=0x7fff2342b518) at main.c:38\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/31985486/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/31986793", "html_url": "https://github.com/airbnb/synapse/issues/34#issuecomment-31986793", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/34", "id": 31986793, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-01-09T23:03:43Z", "updated_at": "2014-01-09T23:03:43Z", "author_association": "COLLABORATOR", "body": "so, reading through the code, we don't really have any shutdown handling to speak of. what's more confusing is that it shuts down cleanly so much of the time. i'm going to try to add shutdown handling modeled after nerve's and see if this helps\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/31986793/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/32231591", "html_url": "https://github.com/airbnb/synapse/issues/35#issuecomment-32231591", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/35", "id": 32231591, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-01-14T01:41:47Z", "updated_at": "2014-01-14T01:41:47Z", "author_association": "COLLABORATOR", "body": "hi! i would definitely be interested in having etcd watchers for synapse as well as etcd publisher in nerve. the nerve part would require some refactoring since we only support a single type of reporter ATM. let me know how i can help!\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/32231591/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/32299512", "html_url": "https://github.com/airbnb/synapse/pull/36#issuecomment-32299512", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/36", "id": 32299512, "user": {"login": "martinrhoads", "id": 52137, "avatar_url": "https://avatars2.githubusercontent.com/u/52137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martinrhoads", "html_url": "https://github.com/martinrhoads", "followers_url": "https://api.github.com/users/martinrhoads/followers", "following_url": "https://api.github.com/users/martinrhoads/following{/other_user}", "gists_url": "https://api.github.com/users/martinrhoads/gists{/gist_id}", "starred_url": "https://api.github.com/users/martinrhoads/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martinrhoads/subscriptions", "organizations_url": "https://api.github.com/users/martinrhoads/orgs", "repos_url": "https://api.github.com/users/martinrhoads/repos", "events_url": "https://api.github.com/users/martinrhoads/events{/privacy}", "received_events_url": "https://api.github.com/users/martinrhoads/received_events", "type": "User", "site_admin": false}, "created_at": "2014-01-14T19:40:09Z", "updated_at": "2014-01-14T19:40:09Z", "author_association": "CONTRIBUTOR", "body": "changes look good to me. would be good to have a way to test this to make sure that it solves the issue \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/32299512/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/32301573", "html_url": "https://github.com/airbnb/synapse/issues/35#issuecomment-32301573", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/35", "id": 32301573, "user": {"login": "bketelsen", "id": 37492, "avatar_url": "https://avatars1.githubusercontent.com/u/37492?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bketelsen", "html_url": "https://github.com/bketelsen", "followers_url": "https://api.github.com/users/bketelsen/followers", "following_url": "https://api.github.com/users/bketelsen/following{/other_user}", "gists_url": "https://api.github.com/users/bketelsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/bketelsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bketelsen/subscriptions", "organizations_url": "https://api.github.com/users/bketelsen/orgs", "repos_url": "https://api.github.com/users/bketelsen/repos", "events_url": "https://api.github.com/users/bketelsen/events{/privacy}", "received_events_url": "https://api.github.com/users/bketelsen/received_events", "type": "User", "site_admin": false}, "created_at": "2014-01-14T20:02:02Z", "updated_at": "2014-01-14T20:02:02Z", "author_association": "NONE", "body": "+1\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/32301573/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/32303499", "html_url": "https://github.com/airbnb/synapse/pull/36#issuecomment-32303499", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/36", "id": 32303499, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-01-14T20:23:15Z", "updated_at": "2014-01-14T20:23:15Z", "author_association": "COLLABORATOR", "body": "this is now running on a small subset of airbnb machines, and will be rolled out to the rest of the machines later today. the early tests are encouraging, so i'm going to make this the next version.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/32303499/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/32324958", "html_url": "https://github.com/airbnb/synapse/pull/31#issuecomment-32324958", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/31", "id": 32324958, "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "created_at": "2014-01-15T00:57:11Z", "updated_at": "2014-01-15T00:57:11Z", "author_association": "NONE", "body": "Okay, sorry for some weird pushes there; this should be good to go now.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/32324958/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/32414433", "html_url": "https://github.com/airbnb/synapse/pull/31#issuecomment-32414433", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/31", "id": 32414433, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-01-15T21:01:23Z", "updated_at": "2014-01-15T21:01:23Z", "author_association": "COLLABORATOR", "body": "thanks!\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/32414433/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/32502234", "html_url": "https://github.com/airbnb/synapse/issues/34#issuecomment-32502234", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/34", "id": 32502234, "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "created_at": "2014-01-16T18:25:12Z", "updated_at": "2014-01-16T18:25:12Z", "author_association": "NONE", "body": "FWIW, after deploying 0.8.0 across an environment with ~45 synapse instances, 10 hours after starting each process I was able to SIGTERM all of them and see them exit correctly.  It's not conclusive, but it's at least positive enough that I'll turn off my cronned midnight SIGKILL and see if we're still in good shape after 48-72 hours.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/32502234/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/32626497", "html_url": "https://github.com/airbnb/synapse/issues/34#issuecomment-32626497", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/34", "id": 32626497, "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "created_at": "2014-01-17T17:31:14Z", "updated_at": "2014-01-17T17:31:14Z", "author_association": "NONE", "body": "Okay, now that we have proper cleanup, the underlying problem is a little clearer:\n\n2014-01-17 17:15:48.525411500 I, [2014-01-17T17:15:48.525289 #6877]  INFO -- Synapse::ZookeeperWatcher: synapse: discovering backends for service klima-server\n2014-01-17 17:16:18.529763500 E, [2014-01-17T17:16:18.529633 #6877] ERROR -- Synapse::Synapse: synapse: encountered unexpected exception #<Zookeeper::Exceptions::ContinuationTimeoutError: response for meth: :get_children, args: [0, \"/nerve/services/staging/klima-server/default\", nil, #<Zookeeper::Callbacks::WatcherCallback:0x00000002732038 @completed=false, @proc=#<Proc:0x00000002731cc8@/export/disk0/wb/bin/synapse/vendor/bundle/ruby/1.9.1/gems/zookeeper-1.4.7/lib/zookeeper/callbacks.rb:24>>], not received within 30 seconds> in main thread\n2014-01-17 17:16:18.529873500 W, [2014-01-17T17:16:18.529827 #6877]  WARN -- Synapse::Synapse: synapse: exiting; sending stop signal to all watchers\n2014-01-17 17:16:18.529951500 W, [2014-01-17T17:16:18.529907 #6877]  WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533320500 I, [2014-01-17T17:16:18.531645 #6877]  INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533323500 W, [2014-01-17T17:16:18.531713 #6877]  WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533324500 I, [2014-01-17T17:16:18.531747 #6877]  INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533325500 W, [2014-01-17T17:16:18.531779 #6877]  WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533351500 I, [2014-01-17T17:16:18.531810 #6877]  INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533353500 W, [2014-01-17T17:16:18.531848 #6877]  WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533354500 I, [2014-01-17T17:16:18.531879 #6877]  INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533358500 W, [2014-01-17T17:16:18.531909 #6877]  WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533359500 I, [2014-01-17T17:16:18.531940 #6877]  INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533367500 W, [2014-01-17T17:16:18.531969 #6877]  WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533368500 I, [2014-01-17T17:16:18.531998 #6877]  INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533370500 W, [2014-01-17T17:16:18.532030 #6877]  WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533373500 I, [2014-01-17T17:16:18.532061 #6877]  INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533374500 W, [2014-01-17T17:16:18.532091 #6877]  WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533376500 I, [2014-01-17T17:16:18.532121 #6877]  INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533379500 W, [2014-01-17T17:16:18.532150 #6877]  WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533380500 I, [2014-01-17T17:16:18.532179 #6877]  INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533382500 W, [2014-01-17T17:16:18.532208 #6877]  WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533389500 I, [2014-01-17T17:16:18.532235 #6877]  INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533390500 W, [2014-01-17T17:16:18.532265 #6877]  WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533392500 I, [2014-01-17T17:16:18.532293 #6877]  INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533395500 W, [2014-01-17T17:16:18.532325 #6877]  WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533396500 I, [2014-01-17T17:16:18.532355 #6877]  INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533398500 W, [2014-01-17T17:16:18.532386 #6877]  WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533401500 I, [2014-01-17T17:16:18.532414 #6877]  INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533402500 W, [2014-01-17T17:16:18.532443 #6877]  WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533404500 I, [2014-01-17T17:16:18.532470 #6877]  INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533411500 W, [2014-01-17T17:16:18.532498 #6877]  WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533413500 I, [2014-01-17T17:16:18.532526 #6877]  INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533414500 W, [2014-01-17T17:16:18.532555 #6877]  WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533417500 I, [2014-01-17T17:16:18.532582 #6877]  INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533419500 W, [2014-01-17T17:16:18.532610 #6877]  WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533420500 I, [2014-01-17T17:16:18.532637 #6877]  INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533428500 W, [2014-01-17T17:16:18.532665 #6877]  WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533429500 I, [2014-01-17T17:16:18.532693 #6877]  INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533436500 W, [2014-01-17T17:16:18.532722 #6877]  WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533437500 I, [2014-01-17T17:16:18.532750 #6877]  INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533439500 W, [2014-01-17T17:16:18.532780 #6877]  WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533442500 I, [2014-01-17T17:16:18.532808 #6877]  INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533444500 W, [2014-01-17T17:16:18.532836 #6877]  WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533445500 I, [2014-01-17T17:16:18.532864 #6877]  INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533448500 W, [2014-01-17T17:16:18.532892 #6877]  WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533450500 I, [2014-01-17T17:16:18.532919 #6877]  INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533451500 W, [2014-01-17T17:16:18.532946 #6877]  WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533458500 I, [2014-01-17T17:16:18.532974 #6877]  INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533459500 W, [2014-01-17T17:16:18.533003 #6877]  WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533461500 I, [2014-01-17T17:16:18.533031 #6877]  INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533464500 W, [2014-01-17T17:16:18.533059 #6877]  WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533465500 I, [2014-01-17T17:16:18.533087 #6877]  INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533467500 W, [2014-01-17T17:16:18.533119 #6877]  WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533470500 I, [2014-01-17T17:16:18.533148 #6877]  INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533471500 W, [2014-01-17T17:16:18.533176 #6877]  WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533473500 I, [2014-01-17T17:16:18.533204 #6877]  INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533481500 W, [2014-01-17T17:16:18.533233 #6877]  WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533482500 I, [2014-01-17T17:16:18.533261 #6877]  INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533515500 /export/disk0/wb/bin/synapse/vendor/bundle/ruby/1.9.1/gems/zookeeper-1.4.7/lib/zookeeper/continuation.rb:117:in `block in value': response for meth: :get_children, args: [0, \"/nerve/services/staging/klima-server/default\", nil, #<Zookeeper::Callbacks::WatcherCallback:0x00000002732038 @completed=false, @proc=#<Proc:0x00000002731cc8@/export/disk0/wb/bin/synapse/vendor/bundle/ruby/1.9.1/gems/zookeeper-1.4.7/lib/zookeeper/callbacks.rb:24>>], not received within 30 seconds (Zookeeper::Exceptions::ContinuationTimeoutError)\n2014-01-17 17:16:18.533608500   from /export/disk0/wb/bin/ruby-env/clemens/lib/ruby/1.9.1/monitor.rb:211:in`mon_synchronize'\n2014-01-17 17:16:18.533631500   from /export/disk0/wb/bin/synapse/vendor/bundle/ruby/1.9.1/gems/zookeeper-1.4.7/lib/zookeeper/continuation.rb:107:in `value'\n2014-01-17 17:16:18.533649500   from /export/disk0/wb/bin/synapse/vendor/bundle/ruby/1.9.1/gems/zookeeper-1.4.7/ext/c_zookeeper.rb:224:in`submit_and_block'\n2014-01-17 17:16:18.533666500   from /export/disk0/wb/bin/synapse/vendor/bundle/ruby/1.9.1/gems/zookeeper-1.4.7/ext/c_zookeeper.rb:40:in `get_children'\n2014-01-17 17:16:18.533683500   from /export/disk0/wb/bin/synapse/vendor/bundle/ruby/1.9.1/gems/zookeeper-1.4.7/lib/zookeeper/client_methods.rb:69:in`get_children'\n2014-01-17 17:16:18.533699500   from /export/disk0/wb/bin/synapse/vendor/bundle/ruby/1.9.1/gems/zk-1.9.2/lib/zk/client/base.rb:1055:in `call_and_check_rc'\n2014-01-17 17:16:18.533716500   from /export/disk0/wb/bin/synapse/vendor/bundle/ruby/1.9.1/gems/zk-1.9.2/lib/zk/client/threaded.rb:584:in`call_and_check_rc'\n2014-01-17 17:16:18.533733500   from /export/disk0/wb/bin/synapse/vendor/bundle/ruby/1.9.1/gems/zk-1.9.2/lib/zk/client/base.rb:717:in `block in children'\n2014-01-17 17:16:18.533750500   from /export/disk0/wb/bin/synapse/vendor/bundle/ruby/1.9.1/gems/zk-1.9.2/lib/zk/event_handler.rb:296:in`block in setup_watcher!'\n2014-01-17 17:16:18.533766500   from /export/disk0/wb/bin/synapse/vendor/bundle/ruby/1.9.1/gems/zk-1.9.2/lib/zk/event_handler.rb:314:in `block in synchronize'\n2014-01-17 17:16:18.533783500   from /export/disk0/wb/bin/ruby-env/clemens/lib/ruby/1.9.1/monitor.rb:211:in`mon_synchronize'\n2014-01-17 17:16:18.533799500   from /export/disk0/wb/bin/synapse/vendor/bundle/ruby/1.9.1/gems/zk-1.9.2/lib/zk/event_handler.rb:314:in `synchronize'\n2014-01-17 17:16:18.533815500   from /export/disk0/wb/bin/synapse/vendor/bundle/ruby/1.9.1/gems/zk-1.9.2/lib/zk/event_handler.rb:283:in`setup_watcher!'\n2014-01-17 17:16:18.533832500   from /export/disk0/wb/bin/synapse/vendor/bundle/ruby/1.9.1/gems/zk-1.9.2/lib/zk/client/base.rb:1100:in `setup_watcher!'\n2014-01-17 17:16:18.533848500   from /export/disk0/wb/bin/synapse/vendor/bundle/ruby/1.9.1/gems/zk-1.9.2/lib/zk/client/base.rb:716:in`children'\n2014-01-17 17:16:18.533865500   from /export/disk0/wb/bin/synapse/lib/synapse/service_watcher/zookeeper.rb:58:in `discover'\n2014-01-17 17:16:18.533881500   from /export/disk0/wb/bin/synapse/lib/synapse/service_watcher/zookeeper.rb:105:in`block in watcher_callback'\n2014-01-17 17:16:18.533898500   from /export/disk0/wb/bin/synapse/lib/synapse/service_watcher/zookeeper.rb:17:in `call'\n2014-01-17 17:16:18.533914500   from /export/disk0/wb/bin/synapse/lib/synapse/service_watcher/zookeeper.rb:17:in`start'\n2014-01-17 17:16:18.533930500   from /export/disk0/wb/bin/synapse/lib/synapse.rb:33:in `block in run'\n2014-01-17 17:16:18.533947500   from /export/disk0/wb/bin/synapse/lib/synapse.rb:33:in`map'\n2014-01-17 17:16:18.533963500   from /export/disk0/wb/bin/synapse/lib/synapse.rb:33:in `run'\n2014-01-17 17:16:18.533979500   from bin/synapse:60:in`<main>'\n2014-01-17 17:16:18.880718500 fatal: Not a git repository (or any of the parent directories): .git\n2014-01-17 17:16:19.203039500 fatal: Not a git repository (or any of the parent directories): .git\n\nObviously it's not great if a ZK server times out, but should that really be a fatal error for synapse?  We're passing in multiple ZK servers, and a single timeout in one watcher should, it seems to me, be cause at worst for restarting that watcher and/or falling through to the next ZK server.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/32626497/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/32639691", "html_url": "https://github.com/airbnb/synapse/issues/34#issuecomment-32639691", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/34", "id": 32639691, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-01-17T19:42:09Z", "updated_at": "2014-01-17T19:42:09Z", "author_association": "COLLABORATOR", "body": "@memory agreed, but this is a separate issue; i opened a new one [here](https://github.com/airbnb/synapse/issues/38)\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/32639691/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/32957845", "html_url": "https://github.com/airbnb/synapse/issues/38#issuecomment-32957845", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/38", "id": 32957845, "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "created_at": "2014-01-21T20:08:24Z", "updated_at": "2014-01-21T20:08:24Z", "author_association": "NONE", "body": "To re-hoist my comment on #34 that kicked off this one:\n\n2014-01-17 17:15:48.525411500 I, [2014-01-17T17:15:48.525289 #6877] INFO -- Synapse::ZookeeperWatcher: synapse: discovering backends for service klima-server\n2014-01-17 17:16:18.529763500 E, [2014-01-17T17:16:18.529633 #6877] ERROR -- Synapse::Synapse: synapse: encountered unexpected exception #>], not received within 30 seconds> in main thread\n2014-01-17 17:16:18.529873500 W, [2014-01-17T17:16:18.529827 #6877] WARN -- Synapse::Synapse: synapse: exiting; sending stop signal to all watchers\n2014-01-17 17:16:18.529951500 W, [2014-01-17T17:16:18.529907 #6877] WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533320500 I, [2014-01-17T17:16:18.531645 #6877] INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533323500 W, [2014-01-17T17:16:18.531713 #6877] WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533324500 I, [2014-01-17T17:16:18.531747 #6877] INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533325500 W, [2014-01-17T17:16:18.531779 #6877] WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533351500 I, [2014-01-17T17:16:18.531810 #6877] INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533353500 W, [2014-01-17T17:16:18.531848 #6877] WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533354500 I, [2014-01-17T17:16:18.531879 #6877] INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533358500 W, [2014-01-17T17:16:18.531909 #6877] WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533359500 I, [2014-01-17T17:16:18.531940 #6877] INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533367500 W, [2014-01-17T17:16:18.531969 #6877] WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533368500 I, [2014-01-17T17:16:18.531998 #6877] INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533370500 W, [2014-01-17T17:16:18.532030 #6877] WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533373500 I, [2014-01-17T17:16:18.532061 #6877] INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533374500 W, [2014-01-17T17:16:18.532091 #6877] WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533376500 I, [2014-01-17T17:16:18.532121 #6877] INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533379500 W, [2014-01-17T17:16:18.532150 #6877] WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533380500 I, [2014-01-17T17:16:18.532179 #6877] INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533382500 W, [2014-01-17T17:16:18.532208 #6877] WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533389500 I, [2014-01-17T17:16:18.532235 #6877] INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533390500 W, [2014-01-17T17:16:18.532265 #6877] WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533392500 I, [2014-01-17T17:16:18.532293 #6877] INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533395500 W, [2014-01-17T17:16:18.532325 #6877] WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533396500 I, [2014-01-17T17:16:18.532355 #6877] INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533398500 W, [2014-01-17T17:16:18.532386 #6877] WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533401500 I, [2014-01-17T17:16:18.532414 #6877] INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533402500 W, [2014-01-17T17:16:18.532443 #6877] WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533404500 I, [2014-01-17T17:16:18.532470 #6877] INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533411500 W, [2014-01-17T17:16:18.532498 #6877] WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533413500 I, [2014-01-17T17:16:18.532526 #6877] INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533414500 W, [2014-01-17T17:16:18.532555 #6877] WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533417500 I, [2014-01-17T17:16:18.532582 #6877] INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533419500 W, [2014-01-17T17:16:18.532610 #6877] WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533420500 I, [2014-01-17T17:16:18.532637 #6877] INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533428500 W, [2014-01-17T17:16:18.532665 #6877] WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533429500 I, [2014-01-17T17:16:18.532693 #6877] INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533436500 W, [2014-01-17T17:16:18.532722 #6877] WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533437500 I, [2014-01-17T17:16:18.532750 #6877] INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533439500 W, [2014-01-17T17:16:18.532780 #6877] WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533442500 I, [2014-01-17T17:16:18.532808 #6877] INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533444500 W, [2014-01-17T17:16:18.532836 #6877] WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533445500 I, [2014-01-17T17:16:18.532864 #6877] INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533448500 W, [2014-01-17T17:16:18.532892 #6877] WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533450500 I, [2014-01-17T17:16:18.532919 #6877] INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533451500 W, [2014-01-17T17:16:18.532946 #6877] WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533458500 I, [2014-01-17T17:16:18.532974 #6877] INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533459500 W, [2014-01-17T17:16:18.533003 #6877] WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533461500 I, [2014-01-17T17:16:18.533031 #6877] INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533464500 W, [2014-01-17T17:16:18.533059 #6877] WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533465500 I, [2014-01-17T17:16:18.533087 #6877] INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533467500 W, [2014-01-17T17:16:18.533119 #6877] WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533470500 I, [2014-01-17T17:16:18.533148 #6877] INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533471500 W, [2014-01-17T17:16:18.533176 #6877] WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533473500 I, [2014-01-17T17:16:18.533204 #6877] INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533481500 W, [2014-01-17T17:16:18.533233 #6877] WARN -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher exiting\n2014-01-17 17:16:18.533482500 I, [2014-01-17T17:16:18.533261 #6877] INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher cleaned up successfully\n2014-01-17 17:16:18.533515500 /export/disk0/wb/bin/synapse/vendor/bundle/ruby/1.9.1/gems/zookeeper-1.4.7/lib/zookeeper/continuation.rb:117:in block in value': response for meth: :get_children, args: [0, \"/nerve/services/staging/klima-server/default\", nil, #<Zookeeper::Callbacks::WatcherCallback:0x00000002732038 @completed=false, @proc=#<Proc:0x00000002731cc8@/export/disk0/wb/bin/synapse/vendor/bundle/ruby/1.9.1/gems/zookeeper-1.4.7/lib/zookeeper/callbacks.rb:24>>], not received within 30 seconds (Zookeeper::Exceptions::ContinuationTimeoutError)\n2014-01-17 17:16:18.533608500 from /export/disk0/wb/bin/ruby-env/clemens/lib/ruby/1.9.1/monitor.rb:211:inmon_synchronize'\n2014-01-17 17:16:18.533631500 from /export/disk0/wb/bin/synapse/vendor/bundle/ruby/1.9.1/gems/zookeeper-1.4.7/lib/zookeeper/continuation.rb:107:in value'\n2014-01-17 17:16:18.533649500 from /export/disk0/wb/bin/synapse/vendor/bundle/ruby/1.9.1/gems/zookeeper-1.4.7/ext/c_zookeeper.rb:224:insubmit_and_block'\n2014-01-17 17:16:18.533666500 from /export/disk0/wb/bin/synapse/vendor/bundle/ruby/1.9.1/gems/zookeeper-1.4.7/ext/c_zookeeper.rb:40:in get_children'\n2014-01-17 17:16:18.533683500 from /export/disk0/wb/bin/synapse/vendor/bundle/ruby/1.9.1/gems/zookeeper-1.4.7/lib/zookeeper/client_methods.rb:69:inget_children'\n2014-01-17 17:16:18.533699500 from /export/disk0/wb/bin/synapse/vendor/bundle/ruby/1.9.1/gems/zk-1.9.2/lib/zk/client/base.rb:1055:in call_and_check_rc'\n2014-01-17 17:16:18.533716500 from /export/disk0/wb/bin/synapse/vendor/bundle/ruby/1.9.1/gems/zk-1.9.2/lib/zk/client/threaded.rb:584:incall_and_check_rc'\n2014-01-17 17:16:18.533733500 from /export/disk0/wb/bin/synapse/vendor/bundle/ruby/1.9.1/gems/zk-1.9.2/lib/zk/client/base.rb:717:in block in children'\n2014-01-17 17:16:18.533750500 from /export/disk0/wb/bin/synapse/vendor/bundle/ruby/1.9.1/gems/zk-1.9.2/lib/zk/event_handler.rb:296:inblock in setup_watcher!'\n2014-01-17 17:16:18.533766500 from /export/disk0/wb/bin/synapse/vendor/bundle/ruby/1.9.1/gems/zk-1.9.2/lib/zk/event_handler.rb:314:in block in synchronize'\n2014-01-17 17:16:18.533783500 from /export/disk0/wb/bin/ruby-env/clemens/lib/ruby/1.9.1/monitor.rb:211:inmon_synchronize'\n2014-01-17 17:16:18.533799500 from /export/disk0/wb/bin/synapse/vendor/bundle/ruby/1.9.1/gems/zk-1.9.2/lib/zk/event_handler.rb:314:in synchronize'\n2014-01-17 17:16:18.533815500 from /export/disk0/wb/bin/synapse/vendor/bundle/ruby/1.9.1/gems/zk-1.9.2/lib/zk/event_handler.rb:283:insetup_watcher!'\n2014-01-17 17:16:18.533832500 from /export/disk0/wb/bin/synapse/vendor/bundle/ruby/1.9.1/gems/zk-1.9.2/lib/zk/client/base.rb:1100:in setup_watcher!'\n2014-01-17 17:16:18.533848500 from /export/disk0/wb/bin/synapse/vendor/bundle/ruby/1.9.1/gems/zk-1.9.2/lib/zk/client/base.rb:716:inchildren'\n2014-01-17 17:16:18.533865500 from /export/disk0/wb/bin/synapse/lib/synapse/service_watcher/zookeeper.rb:58:in discover'\n2014-01-17 17:16:18.533881500 from /export/disk0/wb/bin/synapse/lib/synapse/service_watcher/zookeeper.rb:105:inblock in watcher_callback'\n2014-01-17 17:16:18.533898500 from /export/disk0/wb/bin/synapse/lib/synapse/service_watcher/zookeeper.rb:17:in call'\n2014-01-17 17:16:18.533914500 from /export/disk0/wb/bin/synapse/lib/synapse/service_watcher/zookeeper.rb:17:instart'\n2014-01-17 17:16:18.533930500 from /export/disk0/wb/bin/synapse/lib/synapse.rb:33:in block in run'\n2014-01-17 17:16:18.533947500 from /export/disk0/wb/bin/synapse/lib/synapse.rb:33:inmap'\n2014-01-17 17:16:18.533963500 from /export/disk0/wb/bin/synapse/lib/synapse.rb:33:in run'\n2014-01-17 17:16:18.533979500 from bin/synapse:60:in'\n2014-01-17 17:16:18.880718500 fatal: Not a git repository (or any of the parent directories): .git\n2014-01-17 17:16:19.203039500 fatal: Not a git repository (or any of the parent directories): .git\n\nObviously it's not great if a ZK server times out, but should that really be a fatal error for synapse? We're passing in multiple ZK servers, and a single timeout in one watcher should, it seems to me, be cause at worst for restarting that watcher and/or falling through to the next ZK server.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/32957845/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/32958539", "html_url": "https://github.com/airbnb/synapse/issues/38#issuecomment-32958539", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/38", "id": 32958539, "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "created_at": "2014-01-21T20:15:47Z", "updated_at": "2014-01-21T20:15:47Z", "author_association": "NONE", "body": "There are actually two issues to my eye here:\n1. Synapse should simply restart the watcher (possibly with some decaying backoff algorithm) rather than kill itself, although at least ending the whole process is definitive. :)\n2. Despite being passed in a list of ZK servers, the ZK watcher is extremely sensitive to failures on a single server. I haven't dug into this enough to understand if this is an artifact of the zookeeper gem or how we are using it.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/32958539/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/33064520", "html_url": "https://github.com/airbnb/synapse/pull/26#issuecomment-33064520", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/26", "id": 33064520, "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "created_at": "2014-01-22T20:32:11Z", "updated_at": "2014-01-22T20:32:11Z", "author_association": "NONE", "body": "Thoughts? :)\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/33064520/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/33148094", "html_url": "https://github.com/airbnb/synapse/pull/26#issuecomment-33148094", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/26", "id": 33148094, "user": {"login": "cgarvis", "id": 213125, "avatar_url": "https://avatars1.githubusercontent.com/u/213125?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cgarvis", "html_url": "https://github.com/cgarvis", "followers_url": "https://api.github.com/users/cgarvis/followers", "following_url": "https://api.github.com/users/cgarvis/following{/other_user}", "gists_url": "https://api.github.com/users/cgarvis/gists{/gist_id}", "starred_url": "https://api.github.com/users/cgarvis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cgarvis/subscriptions", "organizations_url": "https://api.github.com/users/cgarvis/orgs", "repos_url": "https://api.github.com/users/cgarvis/repos", "events_url": "https://api.github.com/users/cgarvis/events{/privacy}", "received_events_url": "https://api.github.com/users/cgarvis/received_events", "type": "User", "site_admin": false}, "created_at": "2014-01-23T17:40:16Z", "updated_at": "2014-01-23T17:40:16Z", "author_association": "NONE", "body": "i find json for configuration to be horrible when humans have to edit it.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/33148094/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/33307157", "html_url": "https://github.com/airbnb/synapse/issues/35#issuecomment-33307157", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/35", "id": 33307157, "user": {"login": "SEJeff", "id": 4603, "avatar_url": "https://avatars1.githubusercontent.com/u/4603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SEJeff", "html_url": "https://github.com/SEJeff", "followers_url": "https://api.github.com/users/SEJeff/followers", "following_url": "https://api.github.com/users/SEJeff/following{/other_user}", "gists_url": "https://api.github.com/users/SEJeff/gists{/gist_id}", "starred_url": "https://api.github.com/users/SEJeff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SEJeff/subscriptions", "organizations_url": "https://api.github.com/users/SEJeff/orgs", "repos_url": "https://api.github.com/users/SEJeff/repos", "events_url": "https://api.github.com/users/SEJeff/events{/privacy}", "received_events_url": "https://api.github.com/users/SEJeff/received_events", "type": "User", "site_admin": false}, "created_at": "2014-01-26T02:24:07Z", "updated_at": "2014-01-26T02:24:07Z", "author_association": "NONE", "body": "https://github.com/ranjib/etcd-ruby supports the v2 etcd protocol. I too would be interested in this.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/33307157/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/33414270", "html_url": "https://github.com/airbnb/synapse/issues/42#issuecomment-33414270", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/42", "id": 33414270, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-01-27T19:58:47Z", "updated_at": "2014-01-27T19:58:47Z", "author_association": "COLLABORATOR", "body": "yup, this was done. sorry for the trouble!\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/33414270/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/34085215", "html_url": "https://github.com/airbnb/synapse/pull/40#issuecomment-34085215", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/40", "id": 34085215, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-02-04T17:36:09Z", "updated_at": "2014-02-04T17:36:09Z", "author_association": "COLLABORATOR", "body": "this is awesome! :+1: \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/34085215/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/34086228", "html_url": "https://github.com/airbnb/synapse/pull/37#issuecomment-34086228", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/37", "id": 34086228, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-02-04T17:44:26Z", "updated_at": "2014-02-04T17:44:26Z", "author_association": "COLLABORATOR", "body": "i guess this buys you the ability to add custom service watchers while using stock synapse? i'm okay with the change, but i'd rather have only one system for adding new watchers. do you want to convert existing watchers to use the new system?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/34086228/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/34121499", "html_url": "https://github.com/airbnb/synapse/pull/37#issuecomment-34121499", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/37", "id": 34121499, "user": {"login": "bakins", "id": 205350, "avatar_url": "https://avatars0.githubusercontent.com/u/205350?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bakins", "html_url": "https://github.com/bakins", "followers_url": "https://api.github.com/users/bakins/followers", "following_url": "https://api.github.com/users/bakins/following{/other_user}", "gists_url": "https://api.github.com/users/bakins/gists{/gist_id}", "starred_url": "https://api.github.com/users/bakins/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bakins/subscriptions", "organizations_url": "https://api.github.com/users/bakins/orgs", "repos_url": "https://api.github.com/users/bakins/repos", "events_url": "https://api.github.com/users/bakins/events{/privacy}", "received_events_url": "https://api.github.com/users/bakins/received_events", "type": "User", "site_admin": false}, "created_at": "2014-02-04T23:36:38Z", "updated_at": "2014-02-04T23:36:38Z", "author_association": "NONE", "body": "You want that conversion in this PR?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/34121499/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/34126309", "html_url": "https://github.com/airbnb/synapse/pull/37#issuecomment-34126309", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/37", "id": 34126309, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-02-05T00:45:08Z", "updated_at": "2014-02-05T00:45:08Z", "author_association": "COLLABORATOR", "body": "sure!\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/34126309/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/34611295", "html_url": "https://github.com/airbnb/synapse/issues/35#issuecomment-34611295", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/35", "id": 34611295, "user": {"login": "arohter", "id": 360418, "avatar_url": "https://avatars1.githubusercontent.com/u/360418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arohter", "html_url": "https://github.com/arohter", "followers_url": "https://api.github.com/users/arohter/followers", "following_url": "https://api.github.com/users/arohter/following{/other_user}", "gists_url": "https://api.github.com/users/arohter/gists{/gist_id}", "starred_url": "https://api.github.com/users/arohter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arohter/subscriptions", "organizations_url": "https://api.github.com/users/arohter/orgs", "repos_url": "https://api.github.com/users/arohter/repos", "events_url": "https://api.github.com/users/arohter/events{/privacy}", "received_events_url": "https://api.github.com/users/arohter/received_events", "type": "User", "site_admin": false}, "created_at": "2014-02-10T09:08:38Z", "updated_at": "2014-02-10T09:08:38Z", "author_association": "NONE", "body": "+1\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/34611295/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/34719958", "html_url": "https://github.com/airbnb/synapse/pull/29#issuecomment-34719958", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/29", "id": 34719958, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-02-11T02:04:24Z", "updated_at": "2014-02-11T02:04:24Z", "author_association": "COLLABORATOR", "body": "closing since this functionality was addressed in #43 \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/34719958/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/34729261", "html_url": "https://github.com/airbnb/synapse/pull/30#issuecomment-34729261", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/30", "id": 34729261, "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "created_at": "2014-02-11T06:23:48Z", "updated_at": "2014-02-11T06:23:48Z", "author_association": "NONE", "body": "Okay, finally coming back to this: new version of the commit runs the shared frontend sections through haproxy config validation; adds documentation to readme.md.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/34729261/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/34830445", "html_url": "https://github.com/airbnb/synapse/pull/46#issuecomment-34830445", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/46", "id": 34830445, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-02-12T01:45:43Z", "updated_at": "2014-02-12T01:45:43Z", "author_association": "COLLABORATOR", "body": "cool! i wish there was a way to automatically run the integration tests in the smartstack cookbook, too...\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/34830445/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/35020231", "html_url": "https://github.com/airbnb/synapse/pull/30#issuecomment-35020231", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/30", "id": 35020231, "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "created_at": "2014-02-13T20:10:19Z", "updated_at": "2014-02-13T20:10:19Z", "author_association": "NONE", "body": "all addressed; new patchset up\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/35020231/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/37200506", "html_url": "https://github.com/airbnb/synapse/pull/30#issuecomment-37200506", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/30", "id": 37200506, "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "created_at": "2014-03-10T16:13:30Z", "updated_at": "2014-03-10T16:13:30Z", "author_association": "NONE", "body": "Poke? :)\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/37200506/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/38324831", "html_url": "https://github.com/airbnb/synapse/pull/51#issuecomment-38324831", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/51", "id": 38324831, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-03-21T21:12:59Z", "updated_at": "2014-03-21T21:12:59Z", "author_association": "COLLABORATOR", "body": "thanks for the PR!\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/38324831/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/38373479", "html_url": "https://github.com/airbnb/synapse/issues/41#issuecomment-38373479", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/41", "id": 38373479, "user": {"login": "coderlol", "id": 6237996, "avatar_url": "https://avatars2.githubusercontent.com/u/6237996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/coderlol", "html_url": "https://github.com/coderlol", "followers_url": "https://api.github.com/users/coderlol/followers", "following_url": "https://api.github.com/users/coderlol/following{/other_user}", "gists_url": "https://api.github.com/users/coderlol/gists{/gist_id}", "starred_url": "https://api.github.com/users/coderlol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/coderlol/subscriptions", "organizations_url": "https://api.github.com/users/coderlol/orgs", "repos_url": "https://api.github.com/users/coderlol/repos", "events_url": "https://api.github.com/users/coderlol/events{/privacy}", "received_events_url": "https://api.github.com/users/coderlol/received_events", "type": "User", "site_admin": false}, "created_at": "2014-03-23T04:19:32Z", "updated_at": "2014-03-23T04:19:32Z", "author_association": "NONE", "body": "Any chance we can get a watcher for docker hosts which in turn will feed the actual docker container watcher?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/38373479/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/38501179", "html_url": "https://github.com/airbnb/synapse/pull/30#issuecomment-38501179", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/30", "id": 38501179, "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "created_at": "2014-03-24T21:07:29Z", "updated_at": "2014-03-24T21:07:29Z", "author_association": "NONE", "body": "Poke? :)\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/38501179/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/38501689", "html_url": "https://github.com/airbnb/synapse/pull/30#issuecomment-38501689", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/30", "id": 38501689, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-03-24T21:12:01Z", "updated_at": "2014-03-24T21:12:01Z", "author_association": "COLLABORATOR", "body": "thanks! looks great\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/38501689/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/38501895", "html_url": "https://github.com/airbnb/synapse/pull/30#issuecomment-38501895", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/30", "id": 38501895, "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "created_at": "2014-03-24T21:14:05Z", "updated_at": "2014-03-24T21:14:05Z", "author_association": "NONE", "body": "Woo!\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/38501895/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/38712895", "html_url": "https://github.com/airbnb/synapse/pull/54#issuecomment-38712895", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/54", "id": 38712895, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-03-26T17:22:51Z", "updated_at": "2014-03-26T17:22:51Z", "author_association": "COLLABORATOR", "body": "ah, i've read about this project! this is awesome. merging.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/38712895/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/38769484", "html_url": "https://github.com/airbnb/synapse/pull/53#issuecomment-38769484", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/53", "id": 38769484, "user": {"login": "mirakui", "id": 20384, "avatar_url": "https://avatars0.githubusercontent.com/u/20384?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mirakui", "html_url": "https://github.com/mirakui", "followers_url": "https://api.github.com/users/mirakui/followers", "following_url": "https://api.github.com/users/mirakui/following{/other_user}", "gists_url": "https://api.github.com/users/mirakui/gists{/gist_id}", "starred_url": "https://api.github.com/users/mirakui/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mirakui/subscriptions", "organizations_url": "https://api.github.com/users/mirakui/orgs", "repos_url": "https://api.github.com/users/mirakui/repos", "events_url": "https://api.github.com/users/mirakui/events{/privacy}", "received_events_url": "https://api.github.com/users/mirakui/received_events", "type": "User", "site_admin": false}, "created_at": "2014-03-27T05:05:54Z", "updated_at": "2014-03-27T05:05:54Z", "author_association": "NONE", "body": "cool :sparkles: \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/38769484/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/39432383", "html_url": "https://github.com/airbnb/synapse/pull/53#issuecomment-39432383", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/53", "id": 39432383, "user": {"login": "patrickviet", "id": 2391018, "avatar_url": "https://avatars0.githubusercontent.com/u/2391018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/patrickviet", "html_url": "https://github.com/patrickviet", "followers_url": "https://api.github.com/users/patrickviet/followers", "following_url": "https://api.github.com/users/patrickviet/following{/other_user}", "gists_url": "https://api.github.com/users/patrickviet/gists{/gist_id}", "starred_url": "https://api.github.com/users/patrickviet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/patrickviet/subscriptions", "organizations_url": "https://api.github.com/users/patrickviet/orgs", "repos_url": "https://api.github.com/users/patrickviet/repos", "events_url": "https://api.github.com/users/patrickviet/events{/privacy}", "received_events_url": "https://api.github.com/users/patrickviet/received_events", "type": "User", "site_admin": false}, "created_at": "2014-04-03T09:41:19Z", "updated_at": "2014-04-03T09:42:35Z", "author_association": "NONE", "body": "@ryotarai there is a bug here if you aren't explicitly using inotify with the listen gem (and even if you do, it might overflow - I once implemented a filesystem mirror with inotify and in case of very many file changes it would miss some). Here is how it goes:\n- there is a netsplit, lots of servers leave\n- there is a rejoin, they all come back\n\nThis means that you might have the file be created by serf at the beginning of the second with 10 servers, and then at the end of the second with 11 servers (for example). If you are polling with stat(2) (default behavior) and not using inotify, then 'listen' will only see one change.\n\nThis is how I solved it:\nhttps://github.com/patrickviet/synapse/blob/serf/lib/synapse/service_watcher/serf.rb#L38\n\nPatrick\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/39432383/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/39480362", "html_url": "https://github.com/airbnb/synapse/pull/56#issuecomment-39480362", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/56", "id": 39480362, "user": {"login": "brndnmtthws", "id": 3129093, "avatar_url": "https://avatars1.githubusercontent.com/u/3129093?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brndnmtthws", "html_url": "https://github.com/brndnmtthws", "followers_url": "https://api.github.com/users/brndnmtthws/followers", "following_url": "https://api.github.com/users/brndnmtthws/following{/other_user}", "gists_url": "https://api.github.com/users/brndnmtthws/gists{/gist_id}", "starred_url": "https://api.github.com/users/brndnmtthws/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brndnmtthws/subscriptions", "organizations_url": "https://api.github.com/users/brndnmtthws/orgs", "repos_url": "https://api.github.com/users/brndnmtthws/repos", "events_url": "https://api.github.com/users/brndnmtthws/events{/privacy}", "received_events_url": "https://api.github.com/users/brndnmtthws/received_events", "type": "User", "site_admin": false}, "created_at": "2014-04-03T17:32:17Z", "updated_at": "2014-04-03T17:32:17Z", "author_association": "CONTRIBUTOR", "body": "@joshbuddy \n\nThis may also be of interest to you.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/39480362/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/39481912", "html_url": "https://github.com/airbnb/synapse/pull/56#issuecomment-39481912", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/56", "id": 39481912, "user": {"login": "wmoss", "id": 187472, "avatar_url": "https://avatars3.githubusercontent.com/u/187472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wmoss", "html_url": "https://github.com/wmoss", "followers_url": "https://api.github.com/users/wmoss/followers", "following_url": "https://api.github.com/users/wmoss/following{/other_user}", "gists_url": "https://api.github.com/users/wmoss/gists{/gist_id}", "starred_url": "https://api.github.com/users/wmoss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wmoss/subscriptions", "organizations_url": "https://api.github.com/users/wmoss/orgs", "repos_url": "https://api.github.com/users/wmoss/repos", "events_url": "https://api.github.com/users/wmoss/events{/privacy}", "received_events_url": "https://api.github.com/users/wmoss/received_events", "type": "User", "site_admin": false}, "created_at": "2014-04-03T17:45:06Z", "updated_at": "2014-04-03T17:45:06Z", "author_association": "NONE", "body": "I don't understand Zookeeper well enough to be sure, but it seems like it might be possible to get into a tight look trying to connect if we and fail to successfully setup the watcher.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/39481912/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/39482800", "html_url": "https://github.com/airbnb/synapse/pull/56#issuecomment-39482800", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/56", "id": 39482800, "user": {"login": "brndnmtthws", "id": 3129093, "avatar_url": "https://avatars1.githubusercontent.com/u/3129093?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brndnmtthws", "html_url": "https://github.com/brndnmtthws", "followers_url": "https://api.github.com/users/brndnmtthws/followers", "following_url": "https://api.github.com/users/brndnmtthws/following{/other_user}", "gists_url": "https://api.github.com/users/brndnmtthws/gists{/gist_id}", "starred_url": "https://api.github.com/users/brndnmtthws/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brndnmtthws/subscriptions", "organizations_url": "https://api.github.com/users/brndnmtthws/orgs", "repos_url": "https://api.github.com/users/brndnmtthws/repos", "events_url": "https://api.github.com/users/brndnmtthws/events{/privacy}", "received_events_url": "https://api.github.com/users/brndnmtthws/received_events", "type": "User", "site_admin": false}, "created_at": "2014-04-03T17:51:44Z", "updated_at": "2014-04-03T17:51:44Z", "author_association": "CONTRIBUTOR", "body": "That's possible if it's completely unable to connect properly, but in that case it will start throwing exceptions before creating a death loop. \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/39482800/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/39484457", "html_url": "https://github.com/airbnb/synapse/pull/56#issuecomment-39484457", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/56", "id": 39484457, "user": {"login": "wmoss", "id": 187472, "avatar_url": "https://avatars3.githubusercontent.com/u/187472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wmoss", "html_url": "https://github.com/wmoss", "followers_url": "https://api.github.com/users/wmoss/followers", "following_url": "https://api.github.com/users/wmoss/following{/other_user}", "gists_url": "https://api.github.com/users/wmoss/gists{/gist_id}", "starred_url": "https://api.github.com/users/wmoss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wmoss/subscriptions", "organizations_url": "https://api.github.com/users/wmoss/orgs", "repos_url": "https://api.github.com/users/wmoss/repos", "events_url": "https://api.github.com/users/wmoss/events{/privacy}", "received_events_url": "https://api.github.com/users/wmoss/received_events", "type": "User", "site_admin": false}, "created_at": "2014-04-03T18:05:35Z", "updated_at": "2014-04-03T18:05:35Z", "author_association": "NONE", "body": "Okay, makes sense.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/39484457/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/39486203", "html_url": "https://github.com/airbnb/synapse/pull/56#issuecomment-39486203", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/56", "id": 39486203, "user": {"login": "brndnmtthws", "id": 3129093, "avatar_url": "https://avatars1.githubusercontent.com/u/3129093?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brndnmtthws", "html_url": "https://github.com/brndnmtthws", "followers_url": "https://api.github.com/users/brndnmtthws/followers", "following_url": "https://api.github.com/users/brndnmtthws/following{/other_user}", "gists_url": "https://api.github.com/users/brndnmtthws/gists{/gist_id}", "starred_url": "https://api.github.com/users/brndnmtthws/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brndnmtthws/subscriptions", "organizations_url": "https://api.github.com/users/brndnmtthws/orgs", "repos_url": "https://api.github.com/users/brndnmtthws/repos", "events_url": "https://api.github.com/users/brndnmtthws/events{/privacy}", "received_events_url": "https://api.github.com/users/brndnmtthws/received_events", "type": "User", "site_admin": false}, "created_at": "2014-04-03T18:20:16Z", "updated_at": "2014-04-03T18:20:16Z", "author_association": "CONTRIBUTOR", "body": "Updated as per Will's comments.\n\nTested & verified in staging.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/39486203/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/39486768", "html_url": "https://github.com/airbnb/synapse/pull/56#issuecomment-39486768", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/56", "id": 39486768, "user": {"login": "wmoss", "id": 187472, "avatar_url": "https://avatars3.githubusercontent.com/u/187472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wmoss", "html_url": "https://github.com/wmoss", "followers_url": "https://api.github.com/users/wmoss/followers", "following_url": "https://api.github.com/users/wmoss/following{/other_user}", "gists_url": "https://api.github.com/users/wmoss/gists{/gist_id}", "starred_url": "https://api.github.com/users/wmoss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wmoss/subscriptions", "organizations_url": "https://api.github.com/users/wmoss/orgs", "repos_url": "https://api.github.com/users/wmoss/repos", "events_url": "https://api.github.com/users/wmoss/events{/privacy}", "received_events_url": "https://api.github.com/users/wmoss/received_events", "type": "User", "site_admin": false}, "created_at": "2014-04-03T18:24:53Z", "updated_at": "2014-04-03T18:24:53Z", "author_association": "NONE", "body": "No further question, your honor.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/39486768/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/39500930", "html_url": "https://github.com/airbnb/synapse/issues/52#issuecomment-39500930", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/52", "id": 39500930, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-04-03T20:30:45Z", "updated_at": "2014-04-03T20:30:45Z", "author_association": "COLLABORATOR", "body": "you need to pass arguments to the `synapse` command; run it like this: `synapse -c path_to_config_file`\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/39500930/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/40014141", "html_url": "https://github.com/airbnb/synapse/pull/57#issuecomment-40014141", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/57", "id": 40014141, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-04-09T20:45:37Z", "updated_at": "2014-04-09T20:45:37Z", "author_association": "COLLABORATOR", "body": "thanks! this is awesome.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/40014141/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/40137752", "html_url": "https://github.com/airbnb/synapse/issues/35#issuecomment-40137752", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/35", "id": 40137752, "user": {"login": "cromulus", "id": 3233, "avatar_url": "https://avatars1.githubusercontent.com/u/3233?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cromulus", "html_url": "https://github.com/cromulus", "followers_url": "https://api.github.com/users/cromulus/followers", "following_url": "https://api.github.com/users/cromulus/following{/other_user}", "gists_url": "https://api.github.com/users/cromulus/gists{/gist_id}", "starred_url": "https://api.github.com/users/cromulus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cromulus/subscriptions", "organizations_url": "https://api.github.com/users/cromulus/orgs", "repos_url": "https://api.github.com/users/cromulus/repos", "events_url": "https://api.github.com/users/cromulus/events{/privacy}", "received_events_url": "https://api.github.com/users/cromulus/received_events", "type": "User", "site_admin": false}, "created_at": "2014-04-10T20:46:20Z", "updated_at": "2014-04-10T20:46:20Z", "author_association": "NONE", "body": "+1\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/40137752/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/40137780", "html_url": "https://github.com/airbnb/synapse/issues/35#issuecomment-40137780", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/35", "id": 40137780, "user": {"login": "cromulus", "id": 3233, "avatar_url": "https://avatars1.githubusercontent.com/u/3233?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cromulus", "html_url": "https://github.com/cromulus", "followers_url": "https://api.github.com/users/cromulus/followers", "following_url": "https://api.github.com/users/cromulus/following{/other_user}", "gists_url": "https://api.github.com/users/cromulus/gists{/gist_id}", "starred_url": "https://api.github.com/users/cromulus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cromulus/subscriptions", "organizations_url": "https://api.github.com/users/cromulus/orgs", "repos_url": "https://api.github.com/users/cromulus/repos", "events_url": "https://api.github.com/users/cromulus/events{/privacy}", "received_events_url": "https://api.github.com/users/cromulus/received_events", "type": "User", "site_admin": false}, "created_at": "2014-04-10T20:46:23Z", "updated_at": "2014-04-10T20:46:23Z", "author_association": "NONE", "body": "+1\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/40137780/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/40854591", "html_url": "https://github.com/airbnb/synapse/pull/60#issuecomment-40854591", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/60", "id": 40854591, "user": {"login": "jnb", "id": 514311, "avatar_url": "https://avatars2.githubusercontent.com/u/514311?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnb", "html_url": "https://github.com/jnb", "followers_url": "https://api.github.com/users/jnb/followers", "following_url": "https://api.github.com/users/jnb/following{/other_user}", "gists_url": "https://api.github.com/users/jnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnb/subscriptions", "organizations_url": "https://api.github.com/users/jnb/orgs", "repos_url": "https://api.github.com/users/jnb/repos", "events_url": "https://api.github.com/users/jnb/events{/privacy}", "received_events_url": "https://api.github.com/users/jnb/received_events", "type": "User", "site_admin": false}, "created_at": "2014-04-19T00:02:41Z", "updated_at": "2014-04-19T00:02:41Z", "author_association": "CONTRIBUTOR", "body": "Looks like this is a dupe of https://github.com/airbnb/synapse/pull/55.  Take your pick :)\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/40854591/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/41344237", "html_url": "https://github.com/airbnb/synapse/pull/37#issuecomment-41344237", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/37", "id": 41344237, "user": {"login": "bakins", "id": 205350, "avatar_url": "https://avatars0.githubusercontent.com/u/205350?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bakins", "html_url": "https://github.com/bakins", "followers_url": "https://api.github.com/users/bakins/followers", "following_url": "https://api.github.com/users/bakins/following{/other_user}", "gists_url": "https://api.github.com/users/bakins/gists{/gist_id}", "starred_url": "https://api.github.com/users/bakins/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bakins/subscriptions", "organizations_url": "https://api.github.com/users/bakins/orgs", "repos_url": "https://api.github.com/users/bakins/repos", "events_url": "https://api.github.com/users/bakins/events{/privacy}", "received_events_url": "https://api.github.com/users/bakins/received_events", "type": "User", "site_admin": false}, "created_at": "2014-04-24T23:21:04Z", "updated_at": "2014-04-24T23:21:04Z", "author_association": "NONE", "body": "Just a ping on this. Happy to refactor, etc, to help it get merged.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/41344237/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/42259969", "html_url": "https://github.com/airbnb/synapse/pull/65#issuecomment-42259969", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/65", "id": 42259969, "user": {"login": "schleyfox", "id": 4259, "avatar_url": "https://avatars0.githubusercontent.com/u/4259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/schleyfox", "html_url": "https://github.com/schleyfox", "followers_url": "https://api.github.com/users/schleyfox/followers", "following_url": "https://api.github.com/users/schleyfox/following{/other_user}", "gists_url": "https://api.github.com/users/schleyfox/gists{/gist_id}", "starred_url": "https://api.github.com/users/schleyfox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schleyfox/subscriptions", "organizations_url": "https://api.github.com/users/schleyfox/orgs", "repos_url": "https://api.github.com/users/schleyfox/repos", "events_url": "https://api.github.com/users/schleyfox/events{/privacy}", "received_events_url": "https://api.github.com/users/schleyfox/received_events", "type": "User", "site_admin": false}, "created_at": "2014-05-06T01:42:36Z", "updated_at": "2014-05-06T01:42:36Z", "author_association": "OWNER", "body": "Also, should note that I have put this through its paces locally.\n\nAlso /cc @nelgau \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/42259969/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/42260800", "html_url": "https://github.com/airbnb/synapse/pull/60#issuecomment-42260800", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/60", "id": 42260800, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-05-06T02:03:12Z", "updated_at": "2014-05-06T02:03:12Z", "author_association": "COLLABORATOR", "body": "thanks! i merged #55 \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/42260800/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/42260822", "html_url": "https://github.com/airbnb/synapse/pull/59#issuecomment-42260822", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/59", "id": 42260822, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-05-06T02:04:00Z", "updated_at": "2014-05-06T02:04:00Z", "author_association": "COLLABORATOR", "body": "thanks for the PR!\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/42260822/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/42260839", "html_url": "https://github.com/airbnb/synapse/pull/61#issuecomment-42260839", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/61", "id": 42260839, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-05-06T02:04:38Z", "updated_at": "2014-05-06T02:04:38Z", "author_association": "COLLABORATOR", "body": "thanks for the PR!\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/42260839/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/42261529", "html_url": "https://github.com/airbnb/synapse/pull/63#issuecomment-42261529", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/63", "id": 42261529, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-05-06T02:25:07Z", "updated_at": "2014-05-06T02:25:07Z", "author_association": "COLLABORATOR", "body": "thanks for the PR!\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/42261529/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/42263047", "html_url": "https://github.com/airbnb/synapse/pull/65#issuecomment-42263047", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/65", "id": 42263047, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-05-06T02:55:49Z", "updated_at": "2014-05-06T02:55:49Z", "author_association": "COLLABORATOR", "body": "okay, so, you have three new objects:\n- a modified zk watcher, which instead of signaling synapse signals your modified dns watcher\n- a modified dns watcher, which is different in that it doesn't run it's own sleep loop but waits to be signaled by the dnszookeeperwatcher. it also permits an empty list of servers to discover\n- your dnszookeeperwatcher, which sets everything up and then mainly just sends 'do stuff' signals to the modified dns watcher\n\nplus there are some message-type objects that don't do stuff but cary structured information\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/42263047/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/42377661", "html_url": "https://github.com/airbnb/synapse/pull/65#issuecomment-42377661", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/65", "id": 42377661, "user": {"login": "schleyfox", "id": 4259, "avatar_url": "https://avatars0.githubusercontent.com/u/4259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/schleyfox", "html_url": "https://github.com/schleyfox", "followers_url": "https://api.github.com/users/schleyfox/followers", "following_url": "https://api.github.com/users/schleyfox/following{/other_user}", "gists_url": "https://api.github.com/users/schleyfox/gists{/gist_id}", "starred_url": "https://api.github.com/users/schleyfox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schleyfox/subscriptions", "organizations_url": "https://api.github.com/users/schleyfox/orgs", "repos_url": "https://api.github.com/users/schleyfox/repos", "events_url": "https://api.github.com/users/schleyfox/events{/privacy}", "received_events_url": "https://api.github.com/users/schleyfox/received_events", "type": "User", "site_admin": false}, "created_at": "2014-05-07T00:48:53Z", "updated_at": "2014-05-07T00:48:53Z", "author_association": "OWNER", "body": "Ok, I believe I have addressed the comments.  PTAL.\n\n@igor47 note that I changed the implementation of `ping?` to ensure that watcher threads are running.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/42377661/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/42379438", "html_url": "https://github.com/airbnb/synapse/pull/65#issuecomment-42379438", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/65", "id": 42379438, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-05-07T01:22:57Z", "updated_at": "2014-05-07T01:22:57Z", "author_association": "COLLABORATOR", "body": "this looks good to me; lets :shipit: \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/42379438/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/42387501", "html_url": "https://github.com/airbnb/synapse/pull/67#issuecomment-42387501", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/67", "id": 42387501, "user": {"login": "jtai", "id": 696036, "avatar_url": "https://avatars2.githubusercontent.com/u/696036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jtai", "html_url": "https://github.com/jtai", "followers_url": "https://api.github.com/users/jtai/followers", "following_url": "https://api.github.com/users/jtai/following{/other_user}", "gists_url": "https://api.github.com/users/jtai/gists{/gist_id}", "starred_url": "https://api.github.com/users/jtai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jtai/subscriptions", "organizations_url": "https://api.github.com/users/jtai/orgs", "repos_url": "https://api.github.com/users/jtai/repos", "events_url": "https://api.github.com/users/jtai/events{/privacy}", "received_events_url": "https://api.github.com/users/jtai/received_events", "type": "User", "site_admin": false}, "created_at": "2014-05-07T04:01:42Z", "updated_at": "2014-05-07T04:01:42Z", "author_association": "CONTRIBUTOR", "body": ":+1: \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/42387501/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/42426051", "html_url": "https://github.com/airbnb/synapse/pull/66#issuecomment-42426051", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/66", "id": 42426051, "user": {"login": "bobtfish", "id": 42338, "avatar_url": "https://avatars1.githubusercontent.com/u/42338?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bobtfish", "html_url": "https://github.com/bobtfish", "followers_url": "https://api.github.com/users/bobtfish/followers", "following_url": "https://api.github.com/users/bobtfish/following{/other_user}", "gists_url": "https://api.github.com/users/bobtfish/gists{/gist_id}", "starred_url": "https://api.github.com/users/bobtfish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bobtfish/subscriptions", "organizations_url": "https://api.github.com/users/bobtfish/orgs", "repos_url": "https://api.github.com/users/bobtfish/repos", "events_url": "https://api.github.com/users/bobtfish/events{/privacy}", "received_events_url": "https://api.github.com/users/bobtfish/received_events", "type": "User", "site_admin": false}, "created_at": "2014-05-07T13:26:29Z", "updated_at": "2014-05-07T13:26:29Z", "author_association": "CONTRIBUTOR", "body": ":thumbsup: \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/42426051/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/44474863", "html_url": "https://github.com/airbnb/synapse/pull/56#issuecomment-44474863", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/56", "id": 44474863, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-05-28T22:50:55Z", "updated_at": "2014-05-28T22:50:55Z", "author_association": "COLLABORATOR", "body": "@airbnb/di PTAL; this looks good to me, and it passes integration test suite, so i'm happy to merge it.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/44474863/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/44477378", "html_url": "https://github.com/airbnb/synapse/pull/56#issuecomment-44477378", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/56", "id": 44477378, "user": {"login": "wmoss", "id": 187472, "avatar_url": "https://avatars3.githubusercontent.com/u/187472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wmoss", "html_url": "https://github.com/wmoss", "followers_url": "https://api.github.com/users/wmoss/followers", "following_url": "https://api.github.com/users/wmoss/following{/other_user}", "gists_url": "https://api.github.com/users/wmoss/gists{/gist_id}", "starred_url": "https://api.github.com/users/wmoss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wmoss/subscriptions", "organizations_url": "https://api.github.com/users/wmoss/orgs", "repos_url": "https://api.github.com/users/wmoss/repos", "events_url": "https://api.github.com/users/wmoss/events{/privacy}", "received_events_url": "https://api.github.com/users/wmoss/received_events", "type": "User", "site_admin": false}, "created_at": "2014-05-28T23:24:53Z", "updated_at": "2014-05-28T23:24:53Z", "author_association": "NONE", "body": "@igor47 we can also deploy to part of the DI cluster for a while if you want to let it bake for a bit before going to the whole cluster with it. Whatever you prefer.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/44477378/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/44491808", "html_url": "https://github.com/airbnb/synapse/pull/56#issuecomment-44491808", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/56", "id": 44491808, "user": {"login": "brndnmtthws", "id": 3129093, "avatar_url": "https://avatars1.githubusercontent.com/u/3129093?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brndnmtthws", "html_url": "https://github.com/brndnmtthws", "followers_url": "https://api.github.com/users/brndnmtthws/followers", "following_url": "https://api.github.com/users/brndnmtthws/following{/other_user}", "gists_url": "https://api.github.com/users/brndnmtthws/gists{/gist_id}", "starred_url": "https://api.github.com/users/brndnmtthws/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brndnmtthws/subscriptions", "organizations_url": "https://api.github.com/users/brndnmtthws/orgs", "repos_url": "https://api.github.com/users/brndnmtthws/repos", "events_url": "https://api.github.com/users/brndnmtthws/events{/privacy}", "received_events_url": "https://api.github.com/users/brndnmtthws/received_events", "type": "User", "site_admin": false}, "created_at": "2014-05-29T03:50:16Z", "updated_at": "2014-05-29T03:50:16Z", "author_association": "CONTRIBUTOR", "body": "FYI, we have been running this for a while (since I authored it).\nOn May 28, 2014 4:24 PM, \"Will Moss\" notifications@github.com wrote:\n\n> @igor47 https://github.com/igor47 we can also deploy to part of the DI\n> cluster for a while if you want to let it bake for a bit before going to\n> the whole cluster with it. Whatever you prefer.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/airbnb/synapse/pull/56#issuecomment-44477378\n> .\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/44491808/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/44590468", "html_url": "https://github.com/airbnb/synapse/pull/68#issuecomment-44590468", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/68", "id": 44590468, "user": {"login": "wmoss", "id": 187472, "avatar_url": "https://avatars3.githubusercontent.com/u/187472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wmoss", "html_url": "https://github.com/wmoss", "followers_url": "https://api.github.com/users/wmoss/followers", "following_url": "https://api.github.com/users/wmoss/following{/other_user}", "gists_url": "https://api.github.com/users/wmoss/gists{/gist_id}", "starred_url": "https://api.github.com/users/wmoss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wmoss/subscriptions", "organizations_url": "https://api.github.com/users/wmoss/orgs", "repos_url": "https://api.github.com/users/wmoss/repos", "events_url": "https://api.github.com/users/wmoss/events{/privacy}", "received_events_url": "https://api.github.com/users/wmoss/received_events", "type": "User", "site_admin": false}, "created_at": "2014-05-29T21:53:55Z", "updated_at": "2014-05-29T21:53:55Z", "author_association": "NONE", "body": "This seems reasonable to me. :+1: \n\nIf the failure mode is for the process to restart it seems like having some monitoring around how often synapse is restarting would be good. If that jumps up, we know we've got a problem. Also, does upstart restart processes immediately? Seems like we could hammer zk in those failure modes unless it backs off somehow.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/44590468/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/44590557", "html_url": "https://github.com/airbnb/synapse/pull/68#issuecomment-44590557", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/68", "id": 44590557, "user": {"login": "brndnmtthws", "id": 3129093, "avatar_url": "https://avatars1.githubusercontent.com/u/3129093?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brndnmtthws", "html_url": "https://github.com/brndnmtthws", "followers_url": "https://api.github.com/users/brndnmtthws/followers", "following_url": "https://api.github.com/users/brndnmtthws/following{/other_user}", "gists_url": "https://api.github.com/users/brndnmtthws/gists{/gist_id}", "starred_url": "https://api.github.com/users/brndnmtthws/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brndnmtthws/subscriptions", "organizations_url": "https://api.github.com/users/brndnmtthws/orgs", "repos_url": "https://api.github.com/users/brndnmtthws/repos", "events_url": "https://api.github.com/users/brndnmtthws/events{/privacy}", "received_events_url": "https://api.github.com/users/brndnmtthws/received_events", "type": "User", "site_admin": false}, "created_at": "2014-05-29T21:54:55Z", "updated_at": "2014-05-29T21:54:55Z", "author_association": "CONTRIBUTOR", "body": "Seems fine to me.  The \"exit on error\" thing seems odd to me, but I'm opinionated about it.  Regarding the API, I removed only the things which seemed unused.\n\nThe only other thing is that this hasn't been tested (afaik), whereas the other version has (and a bug was found & fixed as a result).\n:+1:\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/44590557/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/45372408", "html_url": "https://github.com/airbnb/synapse/issues/70#issuecomment-45372408", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/70", "id": 45372408, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-06-06T18:58:14Z", "updated_at": "2014-06-06T18:58:14Z", "author_association": "COLLABORATOR", "body": "the reason is that your `haproxy` section is at the same level of indentation as the `application` section, under `services`; `haproxy` should be a top-level key, at the same level as `services` instead of under it. currently, it looks like you have no `haproxy` section but two services, one `application` which a valid discovery method and one `haproxy` with no valid discovery method.\n\nthis took me a long time to spot. the point of YAML was to make writing these kinds of configs easier, but it still doesn't do an amazing job...\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/45372408/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/45375164", "html_url": "https://github.com/airbnb/synapse/issues/70#issuecomment-45375164", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/70", "id": 45375164, "user": {"login": "Jaykah", "id": 5440172, "avatar_url": "https://avatars3.githubusercontent.com/u/5440172?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jaykah", "html_url": "https://github.com/Jaykah", "followers_url": "https://api.github.com/users/Jaykah/followers", "following_url": "https://api.github.com/users/Jaykah/following{/other_user}", "gists_url": "https://api.github.com/users/Jaykah/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jaykah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jaykah/subscriptions", "organizations_url": "https://api.github.com/users/Jaykah/orgs", "repos_url": "https://api.github.com/users/Jaykah/repos", "events_url": "https://api.github.com/users/Jaykah/events{/privacy}", "received_events_url": "https://api.github.com/users/Jaykah/received_events", "type": "User", "site_admin": false}, "created_at": "2014-06-06T19:27:46Z", "updated_at": "2014-06-06T19:27:46Z", "author_association": "CONTRIBUTOR", "body": "Thank you, Igor! Looks like this has taken me a step forward. \n\nHowever, now I get:\n\n```\n/usr/local/lib/ruby/gems/2.1.0/gems/synapse-0.10.0/lib/synapse/service_watcher.rb:28:in `create': Invalid discovery method [\"zookeeper\"] (ArgumentError)\n    from /usr/local/lib/ruby/gems/2.1.0/gems/synapse-0.10.0/lib/synapse.rb:72:in `block in create_service_watchers'\n    from /usr/local/lib/ruby/gems/2.1.0/gems/synapse-0.10.0/lib/synapse.rb:71:in `each'\n    from /usr/local/lib/ruby/gems/2.1.0/gems/synapse-0.10.0/lib/synapse.rb:71:in `create_service_watchers'\n    from /usr/local/lib/ruby/gems/2.1.0/gems/synapse-0.10.0/lib/synapse.rb:18:in `initialize'\n    from /usr/local/lib/ruby/gems/2.1.0/gems/synapse-0.10.0/bin/synapse:59:in `new'\n    from /usr/local/lib/ruby/gems/2.1.0/gems/synapse-0.10.0/bin/synapse:59:in `<top (required)>'\n    from /usr/local/bin/synapse:23:in `load'\n    from /usr/local/bin/synapse:23:in `<main>'\n```\n\nI have tried to follow the project documentation, but it seems like it's a bit outdated (with YAML instead of JSON, and apparently the methods). Would be glad to help fix it up once I understand how to make it work.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/45375164/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/45375535", "html_url": "https://github.com/airbnb/synapse/issues/70#issuecomment-45375535", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/70", "id": 45375535, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-06-06T19:31:33Z", "updated_at": "2014-06-06T19:31:33Z", "author_association": "COLLABORATOR", "body": "why is it `[\"zookeeper\"]` in square brackets? are you accidentally creating a yaml list?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/45375535/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/45378228", "html_url": "https://github.com/airbnb/synapse/issues/70#issuecomment-45378228", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/70", "id": 45378228, "user": {"login": "Jaykah", "id": 5440172, "avatar_url": "https://avatars3.githubusercontent.com/u/5440172?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jaykah", "html_url": "https://github.com/Jaykah", "followers_url": "https://api.github.com/users/Jaykah/followers", "following_url": "https://api.github.com/users/Jaykah/following{/other_user}", "gists_url": "https://api.github.com/users/Jaykah/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jaykah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jaykah/subscriptions", "organizations_url": "https://api.github.com/users/Jaykah/orgs", "repos_url": "https://api.github.com/users/Jaykah/repos", "events_url": "https://api.github.com/users/Jaykah/events{/privacy}", "received_events_url": "https://api.github.com/users/Jaykah/received_events", "type": "User", "site_admin": false}, "created_at": "2014-06-06T20:00:33Z", "updated_at": "2014-06-06T20:23:48Z", "author_association": "CONTRIBUTOR", "body": "That's the thing, my YAML does not contain any square brackets, nor does it have the hyphen+space that indicates a list in the case of discovery method.\n\nI have tried a number of variations, with no luck.\n\nIt currently looks like this:\n\n```\nservices:\n application:\n  default_servers:\n    name: \"default-app\"\n    host: \"111.111.111.111\"\n    port: 443\n  discovery:\n    method: \"zookeeper\"\n    path: \"/services/application\"\n    hosts:\n     - \"xhbtr.site.com:2181\"\n     - \"xhbtr2.site.com:2181\"\n     - \"xhbtr3.site.com:2181\"\n  haproxy:\n    port: 3213\n    server_options: \"check inter 2s rise 3 fall 2\"\n    listen:\n     - \"mode http\"\n     - \"option httpchk /health\"\n     - \"http-check expect string OK\"\nhaproxy:\n reload_command: \"sudo service haproxy reload\"\n config_file_path: \"/etc/haproxy/haproxy.cfg\"\n socket_file_path: \"/var/haproxy/stats.sock\"\n do_writes: true\n do_reloads: true\n do_socket: false\n global:\n  - \"daemon\"\n  - \"user haproxy\"\n  - \"group haproxy\"\n  - \"maxconn 4096\"\n  - \"log     127.0.0.1 local0\"\n  - \"log     127.0.0.1 local1 notice\"\n  - \"stats   socket /var/haproxy/stats.sock mode 666 level admin\"\n defaults:\n  - \"log      global\"\n  - \"option   dontlognull\"\n  - \"maxconn  2000\"\n  - \"retries  3\"\n  - \"timeout  connect 5s\"\n  - \"timeout  client  1m\"\n  - \"timeout  server  1m\"\n  - \"option   redispatch\"\n  - \"balance  leastconn\"\n extra_sections:\n  listen stats :3212:\n   - \"mode http\"\n   - \"stats enable\"\n   - \"stats uri /\"\n   - \"stats refresh 5s\"\n```\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/45378228/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/45380576", "html_url": "https://github.com/airbnb/synapse/issues/70#issuecomment-45380576", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/70", "id": 45380576, "user": {"login": "Jaykah", "id": 5440172, "avatar_url": "https://avatars3.githubusercontent.com/u/5440172?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jaykah", "html_url": "https://github.com/Jaykah", "followers_url": "https://api.github.com/users/Jaykah/followers", "following_url": "https://api.github.com/users/Jaykah/following{/other_user}", "gists_url": "https://api.github.com/users/Jaykah/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jaykah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jaykah/subscriptions", "organizations_url": "https://api.github.com/users/Jaykah/orgs", "repos_url": "https://api.github.com/users/Jaykah/repos", "events_url": "https://api.github.com/users/Jaykah/events{/privacy}", "received_events_url": "https://api.github.com/users/Jaykah/received_events", "type": "User", "site_admin": false}, "created_at": "2014-06-06T20:26:11Z", "updated_at": "2014-06-06T22:50:57Z", "author_association": "CONTRIBUTOR", "body": "Figured it out, had an extra space that I didn't notice.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/45380576/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/45391829", "html_url": "https://github.com/airbnb/synapse/issues/70#issuecomment-45391829", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/70", "id": 45391829, "user": {"login": "Jaykah", "id": 5440172, "avatar_url": "https://avatars3.githubusercontent.com/u/5440172?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jaykah", "html_url": "https://github.com/Jaykah", "followers_url": "https://api.github.com/users/Jaykah/followers", "following_url": "https://api.github.com/users/Jaykah/following{/other_user}", "gists_url": "https://api.github.com/users/Jaykah/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jaykah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jaykah/subscriptions", "organizations_url": "https://api.github.com/users/Jaykah/orgs", "repos_url": "https://api.github.com/users/Jaykah/repos", "events_url": "https://api.github.com/users/Jaykah/events{/privacy}", "received_events_url": "https://api.github.com/users/Jaykah/received_events", "type": "User", "site_admin": false}, "created_at": "2014-06-06T22:51:00Z", "updated_at": "2014-06-09T16:00:44Z", "author_association": "CONTRIBUTOR", "body": "--comment moved to a separate ticket--\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/45391829/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/45814864", "html_url": "https://github.com/airbnb/synapse/pull/68#issuecomment-45814864", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/68", "id": 45814864, "user": {"login": "jnb", "id": 514311, "avatar_url": "https://avatars2.githubusercontent.com/u/514311?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnb", "html_url": "https://github.com/jnb", "followers_url": "https://api.github.com/users/jnb/followers", "following_url": "https://api.github.com/users/jnb/following{/other_user}", "gists_url": "https://api.github.com/users/jnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnb/subscriptions", "organizations_url": "https://api.github.com/users/jnb/orgs", "repos_url": "https://api.github.com/users/jnb/repos", "events_url": "https://api.github.com/users/jnb/events{/privacy}", "received_events_url": "https://api.github.com/users/jnb/received_events", "type": "User", "site_admin": false}, "created_at": "2014-06-11T23:49:29Z", "updated_at": "2014-06-11T23:49:29Z", "author_association": "CONTRIBUTOR", "body": "+1 for failing fast on session expiry and letting a process watcher restart synapse.  I think this leads to a cleaner design than trying to re-establish sessions.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/45814864/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/45831300", "html_url": "https://github.com/airbnb/synapse/issues/71#issuecomment-45831300", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/71", "id": 45831300, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-06-12T05:24:09Z", "updated_at": "2014-06-12T05:24:29Z", "author_association": "COLLABORATOR", "body": "default servers should be a list; see this example, here: https://github.com/airbnb/synapse/blob/master/config/synapse.conf.json#L4-L10\n\nbased on the error message, i think you made it into a plan hash.\n\nwe should really let you know sooner if you don't configure it as a list. feel free to submit a PR to do this validation, or i'll get around to it sometime next week.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/45831300/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/45899213", "html_url": "https://github.com/airbnb/synapse/issues/52#issuecomment-45899213", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/52", "id": 45899213, "user": {"login": "bploetz", "id": 92764, "avatar_url": "https://avatars3.githubusercontent.com/u/92764?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bploetz", "html_url": "https://github.com/bploetz", "followers_url": "https://api.github.com/users/bploetz/followers", "following_url": "https://api.github.com/users/bploetz/following{/other_user}", "gists_url": "https://api.github.com/users/bploetz/gists{/gist_id}", "starred_url": "https://api.github.com/users/bploetz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bploetz/subscriptions", "organizations_url": "https://api.github.com/users/bploetz/orgs", "repos_url": "https://api.github.com/users/bploetz/repos", "events_url": "https://api.github.com/users/bploetz/events{/privacy}", "received_events_url": "https://api.github.com/users/bploetz/received_events", "type": "User", "site_admin": false}, "created_at": "2014-06-12T14:34:44Z", "updated_at": "2014-06-12T14:34:44Z", "author_association": "NONE", "body": "That's not the problem. The problem is, as of Ruby 1.9.3, Syck was removed as the default YAML parser, and replaced with Psych (see https://bugs.ruby-lang.org/issues/2340). Psych does not have a class `ParseError`, which is why you get this error. Nerve has the same exact problem.\n\nhttps://github.com/airbnb/synapse/blob/master/bin/synapse#L40\nhttps://github.com/airbnb/nerve/blob/master/bin/nerve#L48\n\nSo in a nutshell, Synapse and Nerve simply don't work in Ruby 1.9.3 and above due to this bug. I'm working on PRs to make these scripts work across all ruby versions, and will send shortly....\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/45899213/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/45909582", "html_url": "https://github.com/airbnb/synapse/issues/52#issuecomment-45909582", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/52", "id": 45909582, "user": {"login": "bploetz", "id": 92764, "avatar_url": "https://avatars3.githubusercontent.com/u/92764?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bploetz", "html_url": "https://github.com/bploetz", "followers_url": "https://api.github.com/users/bploetz/followers", "following_url": "https://api.github.com/users/bploetz/following{/other_user}", "gists_url": "https://api.github.com/users/bploetz/gists{/gist_id}", "starred_url": "https://api.github.com/users/bploetz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bploetz/subscriptions", "organizations_url": "https://api.github.com/users/bploetz/orgs", "repos_url": "https://api.github.com/users/bploetz/repos", "events_url": "https://api.github.com/users/bploetz/events{/privacy}", "received_events_url": "https://api.github.com/users/bploetz/received_events", "type": "User", "site_admin": false}, "created_at": "2014-06-12T15:48:16Z", "updated_at": "2014-06-12T15:48:16Z", "author_association": "NONE", "body": "Ah, looking closer, it looks like this was \"fixed\" in synapse in dea5662240b3a0fd077de75d484cacc63b50b82f  but not fixed in nerve. Although this is now introducing the opposite problem, where this will now only work in Ruby 1.9.3+, and not in 1.9.2 and below. If that's what the library wants to support that's fine, but it should be called out in the README.\n\nAnyways, I will send a PR for nerve which introduces the same change there.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/45909582/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/46337837", "html_url": "https://github.com/airbnb/synapse/pull/74#issuecomment-46337837", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/74", "id": 46337837, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-06-17T17:20:47Z", "updated_at": "2014-06-17T17:20:47Z", "author_association": "COLLABORATOR", "body": "thanks for the PR!\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/46337837/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/46337932", "html_url": "https://github.com/airbnb/synapse/pull/73#issuecomment-46337932", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/73", "id": 46337932, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-06-17T17:21:30Z", "updated_at": "2014-06-17T17:21:30Z", "author_association": "COLLABORATOR", "body": "thanks!\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/46337932/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/46338079", "html_url": "https://github.com/airbnb/synapse/pull/69#issuecomment-46338079", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/69", "id": 46338079, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-06-17T17:22:46Z", "updated_at": "2014-06-17T17:22:46Z", "author_association": "COLLABORATOR", "body": "closing as a duplicate of #73 \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/46338079/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/46338185", "html_url": "https://github.com/airbnb/synapse/pull/68#issuecomment-46338185", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/68", "id": 46338185, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-06-17T17:23:37Z", "updated_at": "2014-06-17T17:23:37Z", "author_association": "COLLABORATOR", "body": "this has been tested at Airbnb, and will be deployed org-wide; merging and then bumping synapse version\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/46338185/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/46338252", "html_url": "https://github.com/airbnb/synapse/pull/56#issuecomment-46338252", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/56", "id": 46338252, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-06-17T17:24:12Z", "updated_at": "2014-06-17T17:24:12Z", "author_association": "COLLABORATOR", "body": "closing as a duplicate of #68 \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/46338252/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/46493979", "html_url": "https://github.com/airbnb/synapse/pull/76#issuecomment-46493979", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/76", "id": 46493979, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-06-18T21:05:08Z", "updated_at": "2014-06-18T21:05:08Z", "author_association": "COLLABORATOR", "body": "@airbnb/sre \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/46493979/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/46592697", "html_url": "https://github.com/airbnb/synapse/pull/76#issuecomment-46592697", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/76", "id": 46592697, "user": {"login": "dcerri", "id": 1693264, "avatar_url": "https://avatars0.githubusercontent.com/u/1693264?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dcerri", "html_url": "https://github.com/dcerri", "followers_url": "https://api.github.com/users/dcerri/followers", "following_url": "https://api.github.com/users/dcerri/following{/other_user}", "gists_url": "https://api.github.com/users/dcerri/gists{/gist_id}", "starred_url": "https://api.github.com/users/dcerri/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dcerri/subscriptions", "organizations_url": "https://api.github.com/users/dcerri/orgs", "repos_url": "https://api.github.com/users/dcerri/repos", "events_url": "https://api.github.com/users/dcerri/events{/privacy}", "received_events_url": "https://api.github.com/users/dcerri/received_events", "type": "User", "site_admin": false}, "created_at": "2014-06-19T17:42:12Z", "updated_at": "2014-06-19T17:42:12Z", "author_association": "NONE", "body": ":thumbsup: ship it\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/46592697/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/46595477", "html_url": "https://github.com/airbnb/synapse/pull/76#issuecomment-46595477", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/76", "id": 46595477, "user": {"login": "daveaugustine", "id": 39878, "avatar_url": "https://avatars2.githubusercontent.com/u/39878?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daveaugustine", "html_url": "https://github.com/daveaugustine", "followers_url": "https://api.github.com/users/daveaugustine/followers", "following_url": "https://api.github.com/users/daveaugustine/following{/other_user}", "gists_url": "https://api.github.com/users/daveaugustine/gists{/gist_id}", "starred_url": "https://api.github.com/users/daveaugustine/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daveaugustine/subscriptions", "organizations_url": "https://api.github.com/users/daveaugustine/orgs", "repos_url": "https://api.github.com/users/daveaugustine/repos", "events_url": "https://api.github.com/users/daveaugustine/events{/privacy}", "received_events_url": "https://api.github.com/users/daveaugustine/received_events", "type": "User", "site_admin": false}, "created_at": "2014-06-19T18:05:02Z", "updated_at": "2014-06-19T18:05:02Z", "author_association": "MEMBER", "body": "Do you need an `insert` after the cookie SRV statement? Is it in the `server_options`? Just parroting what I briefly saw while googling / reading the doc you linked.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/46595477/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/46889013", "html_url": "https://github.com/airbnb/synapse/pull/76#issuecomment-46889013", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/76", "id": 46889013, "user": {"login": "joshbuddy", "id": 8898, "avatar_url": "https://avatars2.githubusercontent.com/u/8898?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joshbuddy", "html_url": "https://github.com/joshbuddy", "followers_url": "https://api.github.com/users/joshbuddy/followers", "following_url": "https://api.github.com/users/joshbuddy/following{/other_user}", "gists_url": "https://api.github.com/users/joshbuddy/gists{/gist_id}", "starred_url": "https://api.github.com/users/joshbuddy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joshbuddy/subscriptions", "organizations_url": "https://api.github.com/users/joshbuddy/orgs", "repos_url": "https://api.github.com/users/joshbuddy/repos", "events_url": "https://api.github.com/users/joshbuddy/events{/privacy}", "received_events_url": "https://api.github.com/users/joshbuddy/received_events", "type": "User", "site_admin": false}, "created_at": "2014-06-23T19:17:22Z", "updated_at": "2014-06-23T19:17:28Z", "author_association": "CONTRIBUTOR", "body": "Just tested this, looks good.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/46889013/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/47984369", "html_url": "https://github.com/airbnb/synapse/pull/66#issuecomment-47984369", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/66", "id": 47984369, "user": {"login": "dcosson", "id": 708904, "avatar_url": "https://avatars0.githubusercontent.com/u/708904?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dcosson", "html_url": "https://github.com/dcosson", "followers_url": "https://api.github.com/users/dcosson/followers", "following_url": "https://api.github.com/users/dcosson/following{/other_user}", "gists_url": "https://api.github.com/users/dcosson/gists{/gist_id}", "starred_url": "https://api.github.com/users/dcosson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dcosson/subscriptions", "organizations_url": "https://api.github.com/users/dcosson/orgs", "repos_url": "https://api.github.com/users/dcosson/repos", "events_url": "https://api.github.com/users/dcosson/events{/privacy}", "received_events_url": "https://api.github.com/users/dcosson/received_events", "type": "User", "site_admin": false}, "created_at": "2014-07-03T21:01:37Z", "updated_at": "2014-07-03T21:01:37Z", "author_association": "CONTRIBUTOR", "body": "Is this going to get merged? The README makes it sound like it's already implemented\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/47984369/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/47986961", "html_url": "https://github.com/airbnb/synapse/pull/66#issuecomment-47986961", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/66", "id": 47986961, "user": {"login": "bazbremner", "id": 173771, "avatar_url": "https://avatars1.githubusercontent.com/u/173771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bazbremner", "html_url": "https://github.com/bazbremner", "followers_url": "https://api.github.com/users/bazbremner/followers", "following_url": "https://api.github.com/users/bazbremner/following{/other_user}", "gists_url": "https://api.github.com/users/bazbremner/gists{/gist_id}", "starred_url": "https://api.github.com/users/bazbremner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bazbremner/subscriptions", "organizations_url": "https://api.github.com/users/bazbremner/orgs", "repos_url": "https://api.github.com/users/bazbremner/repos", "events_url": "https://api.github.com/users/bazbremner/events{/privacy}", "received_events_url": "https://api.github.com/users/bazbremner/received_events", "type": "User", "site_admin": false}, "created_at": "2014-07-03T21:28:46Z", "updated_at": "2014-07-03T21:28:46Z", "author_association": "CONTRIBUTOR", "body": "@dcosson Indeed, the README on master implies the functionality was there, which isn't the case, hence this PR - this was functionality I required.\n\n@igor47 could this be merged, please? I note that it's now a conflicted merge - if I need to have a look at this/rebase to get it merged, please let me know.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/47986961/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/47993133", "html_url": "https://github.com/airbnb/synapse/pull/66#issuecomment-47993133", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/66", "id": 47993133, "user": {"login": "dcosson", "id": 708904, "avatar_url": "https://avatars0.githubusercontent.com/u/708904?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dcosson", "html_url": "https://github.com/dcosson", "followers_url": "https://api.github.com/users/dcosson/followers", "following_url": "https://api.github.com/users/dcosson/following{/other_user}", "gists_url": "https://api.github.com/users/dcosson/gists{/gist_id}", "starred_url": "https://api.github.com/users/dcosson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dcosson/subscriptions", "organizations_url": "https://api.github.com/users/dcosson/orgs", "repos_url": "https://api.github.com/users/dcosson/repos", "events_url": "https://api.github.com/users/dcosson/events{/privacy}", "received_events_url": "https://api.github.com/users/dcosson/received_events", "type": "User", "site_admin": false}, "created_at": "2014-07-03T22:51:00Z", "updated_at": "2014-07-03T22:51:00Z", "author_association": "CONTRIBUTOR", "body": "fwiw I just tried this out in EC2 and it works well\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/47993133/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/48246470", "html_url": "https://github.com/airbnb/synapse/pull/66#issuecomment-48246470", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/66", "id": 48246470, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-07-07T21:55:10Z", "updated_at": "2014-07-07T21:55:10Z", "author_association": "COLLABORATOR", "body": "yes, it's going to get merged; i'm going to work on it this week.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/48246470/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/48246691", "html_url": "https://github.com/airbnb/synapse/pull/66#issuecomment-48246691", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/66", "id": 48246691, "user": {"login": "bazbremner", "id": 173771, "avatar_url": "https://avatars1.githubusercontent.com/u/173771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bazbremner", "html_url": "https://github.com/bazbremner", "followers_url": "https://api.github.com/users/bazbremner/followers", "following_url": "https://api.github.com/users/bazbremner/following{/other_user}", "gists_url": "https://api.github.com/users/bazbremner/gists{/gist_id}", "starred_url": "https://api.github.com/users/bazbremner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bazbremner/subscriptions", "organizations_url": "https://api.github.com/users/bazbremner/orgs", "repos_url": "https://api.github.com/users/bazbremner/repos", "events_url": "https://api.github.com/users/bazbremner/events{/privacy}", "received_events_url": "https://api.github.com/users/bazbremner/received_events", "type": "User", "site_admin": false}, "created_at": "2014-07-07T21:57:10Z", "updated_at": "2014-07-07T21:57:10Z", "author_association": "CONTRIBUTOR", "body": "@igor47 Excellent, thank you.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/48246691/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/48249312", "html_url": "https://github.com/airbnb/synapse/pull/66#issuecomment-48249312", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/66", "id": 48249312, "user": {"login": "dcosson", "id": 708904, "avatar_url": "https://avatars0.githubusercontent.com/u/708904?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dcosson", "html_url": "https://github.com/dcosson", "followers_url": "https://api.github.com/users/dcosson/followers", "following_url": "https://api.github.com/users/dcosson/following{/other_user}", "gists_url": "https://api.github.com/users/dcosson/gists{/gist_id}", "starred_url": "https://api.github.com/users/dcosson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dcosson/subscriptions", "organizations_url": "https://api.github.com/users/dcosson/orgs", "repos_url": "https://api.github.com/users/dcosson/repos", "events_url": "https://api.github.com/users/dcosson/events{/privacy}", "received_events_url": "https://api.github.com/users/dcosson/received_events", "type": "User", "site_admin": false}, "created_at": "2014-07-07T22:22:27Z", "updated_at": "2014-07-07T22:22:27Z", "author_association": "CONTRIBUTOR", "body": "Great, looking forward to it!\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/48249312/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/48799883", "html_url": "https://github.com/airbnb/synapse/issues/35#issuecomment-48799883", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/35", "id": 48799883, "user": {"login": "ChristianBusch", "id": 649742, "avatar_url": "https://avatars3.githubusercontent.com/u/649742?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ChristianBusch", "html_url": "https://github.com/ChristianBusch", "followers_url": "https://api.github.com/users/ChristianBusch/followers", "following_url": "https://api.github.com/users/ChristianBusch/following{/other_user}", "gists_url": "https://api.github.com/users/ChristianBusch/gists{/gist_id}", "starred_url": "https://api.github.com/users/ChristianBusch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ChristianBusch/subscriptions", "organizations_url": "https://api.github.com/users/ChristianBusch/orgs", "repos_url": "https://api.github.com/users/ChristianBusch/repos", "events_url": "https://api.github.com/users/ChristianBusch/events{/privacy}", "received_events_url": "https://api.github.com/users/ChristianBusch/received_events", "type": "User", "site_admin": false}, "created_at": "2014-07-12T02:21:03Z", "updated_at": "2014-07-12T02:21:03Z", "author_association": "NONE", "body": "I am interested in this feature as well.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/48799883/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/48983823", "html_url": "https://github.com/airbnb/synapse/pull/50#issuecomment-48983823", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/50", "id": 48983823, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-07-15T02:31:21Z", "updated_at": "2014-07-15T02:31:21Z", "author_association": "COLLABORATOR", "body": "thanks for the PR, @patrickviet ; this has already been addressed in #76 , so I'm closing this.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/48983823/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/48984478", "html_url": "https://github.com/airbnb/synapse/pull/72#issuecomment-48984478", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/72", "id": 48984478, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-07-15T02:43:44Z", "updated_at": "2014-07-15T02:43:44Z", "author_association": "COLLABORATOR", "body": "this is an optimization, but i'm wondering about the purpose; zookeeper tends to be fairly happy about even large numbers of open connections, and you won't be reducing the number of watches, which are more expensive.\n\ni'm curious if you're running into some limits on your ZK cluster without this? are you seeing performance issues? can you describe more the problem this is trying to solve?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/48984478/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/49036804", "html_url": "https://github.com/airbnb/synapse/pull/81#issuecomment-49036804", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/81", "id": 49036804, "user": {"login": "bobtfish", "id": 42338, "avatar_url": "https://avatars1.githubusercontent.com/u/42338?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bobtfish", "html_url": "https://github.com/bobtfish", "followers_url": "https://api.github.com/users/bobtfish/followers", "following_url": "https://api.github.com/users/bobtfish/following{/other_user}", "gists_url": "https://api.github.com/users/bobtfish/gists{/gist_id}", "starred_url": "https://api.github.com/users/bobtfish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bobtfish/subscriptions", "organizations_url": "https://api.github.com/users/bobtfish/orgs", "repos_url": "https://api.github.com/users/bobtfish/repos", "events_url": "https://api.github.com/users/bobtfish/events{/privacy}", "received_events_url": "https://api.github.com/users/bobtfish/received_events", "type": "User", "site_admin": false}, "created_at": "2014-07-15T14:11:05Z", "updated_at": "2014-07-15T14:11:05Z", "author_association": "CONTRIBUTOR", "body": "@igor47 this change is a big deal to us (Yelp) - any chance you can expedite merging/releasing it given it's really small? :)\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/49036804/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/49053545", "html_url": "https://github.com/airbnb/synapse/pull/81#issuecomment-49053545", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/81", "id": 49053545, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-07-15T15:59:09Z", "updated_at": "2014-07-15T15:59:09Z", "author_association": "COLLABORATOR", "body": "i'm a little confused by the description; how are the auto-generated frontends interfering with your custom frontend? i'd also like to see a commit documenting the option.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/49053545/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/49055120", "html_url": "https://github.com/airbnb/synapse/pull/81#issuecomment-49055120", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/81", "id": 49055120, "user": {"login": "bobtfish", "id": 42338, "avatar_url": "https://avatars1.githubusercontent.com/u/42338?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bobtfish", "html_url": "https://github.com/bobtfish", "followers_url": "https://api.github.com/users/bobtfish/followers", "following_url": "https://api.github.com/users/bobtfish/following{/other_user}", "gists_url": "https://api.github.com/users/bobtfish/gists{/gist_id}", "starred_url": "https://api.github.com/users/bobtfish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bobtfish/subscriptions", "organizations_url": "https://api.github.com/users/bobtfish/orgs", "repos_url": "https://api.github.com/users/bobtfish/repos", "events_url": "https://api.github.com/users/bobtfish/events{/privacy}", "received_events_url": "https://api.github.com/users/bobtfish/received_events", "type": "User", "site_admin": false}, "created_at": "2014-07-15T16:10:25Z", "updated_at": "2014-07-15T16:10:25Z", "author_association": "CONTRIBUTOR", "body": "Thanks for the quick response! <3\n\nWe want to map multiple backends to one frontend, and we don't want to have to allocate IPs for the frontends we're not using. Does this explain the use-case?\n\nI'll leave @vulpine to add some docs :)\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/49055120/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/49056432", "html_url": "https://github.com/airbnb/synapse/pull/81#issuecomment-49056432", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/81", "id": 49056432, "user": {"login": "vulpine", "id": 1384718, "avatar_url": "https://avatars0.githubusercontent.com/u/1384718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vulpine", "html_url": "https://github.com/vulpine", "followers_url": "https://api.github.com/users/vulpine/followers", "following_url": "https://api.github.com/users/vulpine/following{/other_user}", "gists_url": "https://api.github.com/users/vulpine/gists{/gist_id}", "starred_url": "https://api.github.com/users/vulpine/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vulpine/subscriptions", "organizations_url": "https://api.github.com/users/vulpine/orgs", "repos_url": "https://api.github.com/users/vulpine/repos", "events_url": "https://api.github.com/users/vulpine/events{/privacy}", "received_events_url": "https://api.github.com/users/vulpine/received_events", "type": "User", "site_admin": false}, "created_at": "2014-07-15T16:19:52Z", "updated_at": "2014-07-15T16:19:52Z", "author_association": "NONE", "body": "@bobtfish is correct -- we'd like to be able to do something like\n\n```\nfrontend www\n    bind 1.2.3.4:80\n    use backend www_backend_ro if ...\n    use backend www_backend_rw if ...\n\nbackend www_backend_ro \n\nbackend www_backend_rw\n\nfrontend mobile\n...\n```\n\nwithout needing to have one frontend block per backend block.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/49056432/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/49062356", "html_url": "https://github.com/airbnb/synapse/pull/81#issuecomment-49062356", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/81", "id": 49062356, "user": {"login": "vulpine", "id": 1384718, "avatar_url": "https://avatars0.githubusercontent.com/u/1384718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vulpine", "html_url": "https://github.com/vulpine", "followers_url": "https://api.github.com/users/vulpine/followers", "following_url": "https://api.github.com/users/vulpine/following{/other_user}", "gists_url": "https://api.github.com/users/vulpine/gists{/gist_id}", "starred_url": "https://api.github.com/users/vulpine/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vulpine/subscriptions", "organizations_url": "https://api.github.com/users/vulpine/orgs", "repos_url": "https://api.github.com/users/vulpine/repos", "events_url": "https://api.github.com/users/vulpine/events{/privacy}", "received_events_url": "https://api.github.com/users/vulpine/received_events", "type": "User", "site_admin": false}, "created_at": "2014-07-15T17:04:26Z", "updated_at": "2014-07-15T17:04:26Z", "author_association": "NONE", "body": "I've added some documentation in the most recent commit.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/49062356/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/49083627", "html_url": "https://github.com/airbnb/synapse/pull/81#issuecomment-49083627", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/81", "id": 49083627, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-07-15T19:53:33Z", "updated_at": "2014-07-15T19:53:33Z", "author_association": "COLLABORATOR", "body": "what you want to accomplish is already possible, simply by leaving out the `port` directive for your service's `haproxy` section. i've better-documented this in this commit: https://github.com/airbnb/synapse/commit/3f93b1be7d79e31961771d304b09b2be60d27d0e\n\nyou may want to look into using the `shared_frontend` to further enable your use case.\n\ni'm going to close this PR; feel free to re-open if i've misunderstood something.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/49083627/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/49541060", "html_url": "https://github.com/airbnb/synapse/pull/43#issuecomment-49541060", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/43", "id": 49541060, "user": {"login": "Dareen", "id": 5462442, "avatar_url": "https://avatars1.githubusercontent.com/u/5462442?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dareen", "html_url": "https://github.com/Dareen", "followers_url": "https://api.github.com/users/Dareen/followers", "following_url": "https://api.github.com/users/Dareen/following{/other_user}", "gists_url": "https://api.github.com/users/Dareen/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dareen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dareen/subscriptions", "organizations_url": "https://api.github.com/users/Dareen/orgs", "repos_url": "https://api.github.com/users/Dareen/repos", "events_url": "https://api.github.com/users/Dareen/events{/privacy}", "received_events_url": "https://api.github.com/users/Dareen/received_events", "type": "User", "site_admin": false}, "created_at": "2014-07-20T09:02:00Z", "updated_at": "2014-07-20T09:02:00Z", "author_association": "NONE", "body": "@igor47 this works great in a happy scenario, but in edge cases like Synapse unable to connect to ZK (which delegates the health check to haproxy by default), and then the master node fails, this will cause downtime.\nIn https://github.com/airbnb/synapse/pull/29 I added the \"backup\" haproxy option to all the slave nodes while generating the backend stanza \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/49541060/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/49541080", "html_url": "https://github.com/airbnb/synapse/pull/43#issuecomment-49541080", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/43", "id": 49541080, "user": {"login": "Dareen", "id": 5462442, "avatar_url": "https://avatars1.githubusercontent.com/u/5462442?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dareen", "html_url": "https://github.com/Dareen", "followers_url": "https://api.github.com/users/Dareen/followers", "following_url": "https://api.github.com/users/Dareen/following{/other_user}", "gists_url": "https://api.github.com/users/Dareen/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dareen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dareen/subscriptions", "organizations_url": "https://api.github.com/users/Dareen/orgs", "repos_url": "https://api.github.com/users/Dareen/repos", "events_url": "https://api.github.com/users/Dareen/events{/privacy}", "received_events_url": "https://api.github.com/users/Dareen/received_events", "type": "User", "site_admin": false}, "created_at": "2014-07-20T09:02:53Z", "updated_at": "2014-07-20T12:38:36Z", "author_association": "NONE", "body": "This PR addresses the backup option https://github.com/airbnb/synapse/pull/83\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/49541080/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/49955464", "html_url": "https://github.com/airbnb/synapse/pull/72#issuecomment-49955464", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/72", "id": 49955464, "user": {"login": "smarth-madan", "id": 418337, "avatar_url": "https://avatars0.githubusercontent.com/u/418337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smarth-madan", "html_url": "https://github.com/smarth-madan", "followers_url": "https://api.github.com/users/smarth-madan/followers", "following_url": "https://api.github.com/users/smarth-madan/following{/other_user}", "gists_url": "https://api.github.com/users/smarth-madan/gists{/gist_id}", "starred_url": "https://api.github.com/users/smarth-madan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smarth-madan/subscriptions", "organizations_url": "https://api.github.com/users/smarth-madan/orgs", "repos_url": "https://api.github.com/users/smarth-madan/repos", "events_url": "https://api.github.com/users/smarth-madan/events{/privacy}", "received_events_url": "https://api.github.com/users/smarth-madan/received_events", "type": "User", "site_admin": false}, "created_at": "2014-07-24T00:51:15Z", "updated_at": "2014-07-24T00:51:15Z", "author_association": "NONE", "body": "Actually the problem is not with the Zookeeper service but the host where we are running Synapse. We have a config file with more than 800 services. When we tried to use synapse, we say an error \"too many file descriptors open\". This fix actually re-uses the global zookeeper connection and keeps registering a new watch with the same. Now we don't see any issue with the file descriptors after using the fix. \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/49955464/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/51237917", "html_url": "https://github.com/airbnb/synapse/pull/85#issuecomment-51237917", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/85", "id": 51237917, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-08-05T18:19:40Z", "updated_at": "2014-08-05T18:19:40Z", "author_association": "COLLABORATOR", "body": ":+1: thanks for the PR!\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/51237917/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/51477719", "html_url": "https://github.com/airbnb/synapse/pull/85#issuecomment-51477719", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/85", "id": 51477719, "user": {"login": "bazbremner", "id": 173771, "avatar_url": "https://avatars1.githubusercontent.com/u/173771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bazbremner", "html_url": "https://github.com/bazbremner", "followers_url": "https://api.github.com/users/bazbremner/followers", "following_url": "https://api.github.com/users/bazbremner/following{/other_user}", "gists_url": "https://api.github.com/users/bazbremner/gists{/gist_id}", "starred_url": "https://api.github.com/users/bazbremner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bazbremner/subscriptions", "organizations_url": "https://api.github.com/users/bazbremner/orgs", "repos_url": "https://api.github.com/users/bazbremner/repos", "events_url": "https://api.github.com/users/bazbremner/events{/privacy}", "received_events_url": "https://api.github.com/users/bazbremner/received_events", "type": "User", "site_admin": false}, "created_at": "2014-08-07T14:19:36Z", "updated_at": "2014-08-07T14:19:36Z", "author_association": "CONTRIBUTOR", "body": "@liamstewart nice work! Sorry, I obviously overlooked that with #66 \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/51477719/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/52458646", "html_url": "https://github.com/airbnb/synapse/pull/87#issuecomment-52458646", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/87", "id": 52458646, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-08-18T07:09:58Z", "updated_at": "2014-08-18T07:09:58Z", "author_association": "COLLABORATOR", "body": "hey thanks for the PR. i'm going have a chance to look through this and other PRs when i get back from vacation in september.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/52458646/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/52458681", "html_url": "https://github.com/airbnb/synapse/pull/72#issuecomment-52458681", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/72", "id": 52458681, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-08-18T07:10:41Z", "updated_at": "2014-08-18T07:10:41Z", "author_association": "COLLABORATOR", "body": "i'm currently on vacation, but this PR is my number-one desired thing to get into synapse next. i'll look into merging some version of this when i get back in september.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/52458681/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/52864417", "html_url": "https://github.com/airbnb/synapse/issues/35#issuecomment-52864417", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/35", "id": 52864417, "user": {"login": "calebbrown", "id": 56095, "avatar_url": "https://avatars2.githubusercontent.com/u/56095?v=4", "gravatar_id": "", "url": "https://api.github.com/users/calebbrown", "html_url": "https://github.com/calebbrown", "followers_url": "https://api.github.com/users/calebbrown/followers", "following_url": "https://api.github.com/users/calebbrown/following{/other_user}", "gists_url": "https://api.github.com/users/calebbrown/gists{/gist_id}", "starred_url": "https://api.github.com/users/calebbrown/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/calebbrown/subscriptions", "organizations_url": "https://api.github.com/users/calebbrown/orgs", "repos_url": "https://api.github.com/users/calebbrown/repos", "events_url": "https://api.github.com/users/calebbrown/events{/privacy}", "received_events_url": "https://api.github.com/users/calebbrown/received_events", "type": "User", "site_admin": false}, "created_at": "2014-08-21T00:34:15Z", "updated_at": "2014-08-21T00:34:15Z", "author_association": "NONE", "body": "+1\n\nI see PR #58 implements this.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/52864417/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/52966504", "html_url": "https://github.com/airbnb/synapse/pull/58#issuecomment-52966504", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/58", "id": 52966504, "user": {"login": "SEJeff", "id": 4603, "avatar_url": "https://avatars1.githubusercontent.com/u/4603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SEJeff", "html_url": "https://github.com/SEJeff", "followers_url": "https://api.github.com/users/SEJeff/followers", "following_url": "https://api.github.com/users/SEJeff/following{/other_user}", "gists_url": "https://api.github.com/users/SEJeff/gists{/gist_id}", "starred_url": "https://api.github.com/users/SEJeff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SEJeff/subscriptions", "organizations_url": "https://api.github.com/users/SEJeff/orgs", "repos_url": "https://api.github.com/users/SEJeff/repos", "events_url": "https://api.github.com/users/SEJeff/events{/privacy}", "received_events_url": "https://api.github.com/users/SEJeff/received_events", "type": "User", "site_admin": false}, "created_at": "2014-08-21T19:02:32Z", "updated_at": "2014-08-21T19:02:32Z", "author_association": "NONE", "body": "@bobtfish mind rebasing this to merge cleanly with master?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/52966504/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/58676664", "html_url": "https://github.com/airbnb/synapse/pull/84#issuecomment-58676664", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/84", "id": 58676664, "user": {"login": "liamstewart", "id": 1117074, "avatar_url": "https://avatars3.githubusercontent.com/u/1117074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liamstewart", "html_url": "https://github.com/liamstewart", "followers_url": "https://api.github.com/users/liamstewart/followers", "following_url": "https://api.github.com/users/liamstewart/following{/other_user}", "gists_url": "https://api.github.com/users/liamstewart/gists{/gist_id}", "starred_url": "https://api.github.com/users/liamstewart/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liamstewart/subscriptions", "organizations_url": "https://api.github.com/users/liamstewart/orgs", "repos_url": "https://api.github.com/users/liamstewart/repos", "events_url": "https://api.github.com/users/liamstewart/events{/privacy}", "received_events_url": "https://api.github.com/users/liamstewart/received_events", "type": "User", "site_admin": false}, "created_at": "2014-10-10T16:03:02Z", "updated_at": "2014-10-10T16:03:02Z", "author_association": "CONTRIBUTOR", "body": "Any thoughts on this? It would be nice to have it merged in - we deploy a forked version with this change as we use IAM profiles rather than keys and secrets.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/58676664/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/58863037", "html_url": "https://github.com/airbnb/synapse/pull/58#issuecomment-58863037", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/58", "id": 58863037, "user": {"login": "tcolgate", "id": 76019, "avatar_url": "https://avatars0.githubusercontent.com/u/76019?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tcolgate", "html_url": "https://github.com/tcolgate", "followers_url": "https://api.github.com/users/tcolgate/followers", "following_url": "https://api.github.com/users/tcolgate/following{/other_user}", "gists_url": "https://api.github.com/users/tcolgate/gists{/gist_id}", "starred_url": "https://api.github.com/users/tcolgate/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tcolgate/subscriptions", "organizations_url": "https://api.github.com/users/tcolgate/orgs", "repos_url": "https://api.github.com/users/tcolgate/repos", "events_url": "https://api.github.com/users/tcolgate/events{/privacy}", "received_events_url": "https://api.github.com/users/tcolgate/received_events", "type": "User", "site_admin": false}, "created_at": "2014-10-13T08:50:38Z", "updated_at": "2014-10-13T08:50:38Z", "author_association": "NONE", "body": "Is this likely to merged soon? The nerve part already seems to be merged? etcd does seem like a better choice (nicer cli tools,and less of a total collapse if quorum is lost).\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/58863037/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/59334767", "html_url": "https://github.com/airbnb/synapse/pull/90#issuecomment-59334767", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/90", "id": 59334767, "user": {"login": "dkerwin", "id": 168948, "avatar_url": "https://avatars2.githubusercontent.com/u/168948?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dkerwin", "html_url": "https://github.com/dkerwin", "followers_url": "https://api.github.com/users/dkerwin/followers", "following_url": "https://api.github.com/users/dkerwin/following{/other_user}", "gists_url": "https://api.github.com/users/dkerwin/gists{/gist_id}", "starred_url": "https://api.github.com/users/dkerwin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dkerwin/subscriptions", "organizations_url": "https://api.github.com/users/dkerwin/orgs", "repos_url": "https://api.github.com/users/dkerwin/repos", "events_url": "https://api.github.com/users/dkerwin/events{/privacy}", "received_events_url": "https://api.github.com/users/dkerwin/received_events", "type": "User", "site_admin": false}, "created_at": "2014-10-16T09:16:03Z", "updated_at": "2014-10-16T09:16:03Z", "author_association": "NONE", "body": ":+1: +1\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/59334767/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/59358920", "html_url": "https://github.com/airbnb/synapse/issues/94#issuecomment-59358920", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/94", "id": 59358920, "user": {"login": "Jaykah", "id": 5440172, "avatar_url": "https://avatars3.githubusercontent.com/u/5440172?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jaykah", "html_url": "https://github.com/Jaykah", "followers_url": "https://api.github.com/users/Jaykah/followers", "following_url": "https://api.github.com/users/Jaykah/following{/other_user}", "gists_url": "https://api.github.com/users/Jaykah/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jaykah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jaykah/subscriptions", "organizations_url": "https://api.github.com/users/Jaykah/orgs", "repos_url": "https://api.github.com/users/Jaykah/repos", "events_url": "https://api.github.com/users/Jaykah/events{/privacy}", "received_events_url": "https://api.github.com/users/Jaykah/received_events", "type": "User", "site_admin": false}, "created_at": "2014-10-16T13:16:42Z", "updated_at": "2014-10-16T13:16:42Z", "author_association": "CONTRIBUTOR", "body": "I've done some further debugging, and so far I can say that:\n\n-Haproxy config is getting successfully re-applied when there are changes in the number of endpoints (begin begins & end ends below)\n-But it does not get changed by Synapse once the number of endpoints changes\n-Because it is not getting re-read for changes in the first place\n-Because it is not getting changes from Zookeeper unless it is restarted\n\n```\nI, [2014-10-14T12:55:37.381646 #500]  INFO -- Synapse::ZookeeperWatcher: synapse: discovering backends for service db\nI, [2014-10-14T12:55:37.388731 #500]  INFO -- Synapse::ZookeeperWatcher: synapse: discovered 4 backends for service db\nW, [2014-10-14T12:55:37.389157 #500]  WARN -- Synapse::ZookeeperWatcher: synapse: warning: begin begins\nW, [2014-10-14T12:55:37.389220 #500]  WARN -- Synapse::ZookeeperWatcher: synapse: warning: end ends\n```\n\nHere's what happens if I restart Synapse (for reference):\n\n```\n I, [2014-10-14T12:56:55.014435 #524]  INFO -- Synapse::ZookeeperWatcher: synapse: discovered 4 backends for service db\nW, [2014-10-14T12:56:55.014877 #524]  WARN -- Synapse::ZookeeperWatcher: synapse: warning: begin begins\nW, [2014-10-14T12:56:55.014951 #524]  WARN -- Synapse::ZookeeperWatcher: synapse: warning: end ends\nI, [2014-10-14T12:56:55.015023 #524]  INFO -- Synapse::Synapse: synapse: regenerating haproxy config\nW, [2014-10-14T12:56:55.016053 #524]  WARN -- Synapse::Haproxy: synapse: warning: read old conf start\nW, [2014-10-14T12:56:55.016214 #524]  WARN -- Synapse::Haproxy: synapse: warning: read old conf end\nW, [2014-10-14T12:56:55.016265 #524]  WARN -- Synapse::Haproxy: synapse: warning: conf write begin\nW, [2014-10-14T12:56:55.016481 #524]  WARN -- Synapse::Haproxy: synapse: warning: conf write ends\n```\n\nI'm curious if anyone is experiencing a similar issue, or if it is a corner case caused by Docker/Supervisord combination\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/59358920/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/59404023", "html_url": "https://github.com/airbnb/synapse/pull/90#issuecomment-59404023", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/90", "id": 59404023, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-10-16T18:06:04Z", "updated_at": "2014-10-16T18:06:04Z", "author_association": "COLLABORATOR", "body": "lgtm; just our of curiousity, does this actually cause any problems in tcp mode? we have some tcp services running with this and haven't seen any effects\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/59404023/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/59569590", "html_url": "https://github.com/airbnb/synapse/pull/90#issuecomment-59569590", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/90", "id": 59569590, "user": {"login": "bcicen", "id": 5673805, "avatar_url": "https://avatars3.githubusercontent.com/u/5673805?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bcicen", "html_url": "https://github.com/bcicen", "followers_url": "https://api.github.com/users/bcicen/followers", "following_url": "https://api.github.com/users/bcicen/following{/other_user}", "gists_url": "https://api.github.com/users/bcicen/gists{/gist_id}", "starred_url": "https://api.github.com/users/bcicen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bcicen/subscriptions", "organizations_url": "https://api.github.com/users/bcicen/orgs", "repos_url": "https://api.github.com/users/bcicen/repos", "events_url": "https://api.github.com/users/bcicen/events{/privacy}", "received_events_url": "https://api.github.com/users/bcicen/received_events", "type": "User", "site_admin": false}, "created_at": "2014-10-17T20:18:49Z", "updated_at": "2014-10-17T20:18:49Z", "author_association": "NONE", "body": "@igor47 -- running in tcp mode for me results in the below error and haproxy not restarting:\n\n```\n[ALERT] 289/125039 (25347) : config : backend 'test' : server cannot have cookie or redirect prefix in non-HTTP mode.\n```\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/59569590/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/59569883", "html_url": "https://github.com/airbnb/synapse/pull/90#issuecomment-59569883", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/90", "id": 59569883, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2014-10-17T20:20:37Z", "updated_at": "2014-10-17T20:20:37Z", "author_association": "COLLABORATOR", "body": "@bcicen cool, will merge. just curious, what version of haproxy are you using?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/59569883/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/59570488", "html_url": "https://github.com/airbnb/synapse/pull/90#issuecomment-59570488", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/90", "id": 59570488, "user": {"login": "bcicen", "id": 5673805, "avatar_url": "https://avatars3.githubusercontent.com/u/5673805?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bcicen", "html_url": "https://github.com/bcicen", "followers_url": "https://api.github.com/users/bcicen/followers", "following_url": "https://api.github.com/users/bcicen/following{/other_user}", "gists_url": "https://api.github.com/users/bcicen/gists{/gist_id}", "starred_url": "https://api.github.com/users/bcicen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bcicen/subscriptions", "organizations_url": "https://api.github.com/users/bcicen/orgs", "repos_url": "https://api.github.com/users/bcicen/repos", "events_url": "https://api.github.com/users/bcicen/events{/privacy}", "received_events_url": "https://api.github.com/users/bcicen/received_events", "type": "User", "site_admin": false}, "created_at": "2014-10-17T20:24:33Z", "updated_at": "2014-10-17T20:24:33Z", "author_association": "NONE", "body": "Currently haproxy 1.4.18(ancient, I know).\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/59570488/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/59571991", "html_url": "https://github.com/airbnb/synapse/issues/88#issuecomment-59571991", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/88", "id": 59571991, "user": {"login": "bcicen", "id": 5673805, "avatar_url": "https://avatars3.githubusercontent.com/u/5673805?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bcicen", "html_url": "https://github.com/bcicen", "followers_url": "https://api.github.com/users/bcicen/followers", "following_url": "https://api.github.com/users/bcicen/following{/other_user}", "gists_url": "https://api.github.com/users/bcicen/gists{/gist_id}", "starred_url": "https://api.github.com/users/bcicen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bcicen/subscriptions", "organizations_url": "https://api.github.com/users/bcicen/orgs", "repos_url": "https://api.github.com/users/bcicen/repos", "events_url": "https://api.github.com/users/bcicen/events{/privacy}", "received_events_url": "https://api.github.com/users/bcicen/received_events", "type": "User", "site_admin": false}, "created_at": "2014-10-17T20:35:00Z", "updated_at": "2014-10-17T22:15:15Z", "author_association": "NONE", "body": "Presumably so if you have a single container with multiple open ports(say, an http server and some type of monitoring daemon) you can discover them both and apply different backend settings in haproxy. Hence, service discovery rather than container discovery.\n\nConcerning the image-tag combination -- I do currently deploy this way and have https://github.com/airbnb/synapse/pull/96 open for the feature. This also provides the benefit of preventing conflicting image versions of an application from being used as valid backends if your orchestration tool or sysadmin doesn't always clean up after itself.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/59571991/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/59572352", "html_url": "https://github.com/airbnb/synapse/pull/95#issuecomment-59572352", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/95", "id": 59572352, "user": {"login": "bcicen", "id": 5673805, "avatar_url": "https://avatars3.githubusercontent.com/u/5673805?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bcicen", "html_url": "https://github.com/bcicen", "followers_url": "https://api.github.com/users/bcicen/followers", "following_url": "https://api.github.com/users/bcicen/following{/other_user}", "gists_url": "https://api.github.com/users/bcicen/gists{/gist_id}", "starred_url": "https://api.github.com/users/bcicen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bcicen/subscriptions", "organizations_url": "https://api.github.com/users/bcicen/orgs", "repos_url": "https://api.github.com/users/bcicen/repos", "events_url": "https://api.github.com/users/bcicen/events{/privacy}", "received_events_url": "https://api.github.com/users/bcicen/received_events", "type": "User", "site_admin": false}, "created_at": "2014-10-17T20:37:26Z", "updated_at": "2014-10-17T20:37:26Z", "author_association": "NONE", "body": "Closing until I can append a proper test.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/59572352/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/60876510", "html_url": "https://github.com/airbnb/synapse/pull/87#issuecomment-60876510", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/87", "id": 60876510, "user": {"login": "mrud", "id": 350922, "avatar_url": "https://avatars3.githubusercontent.com/u/350922?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrud", "html_url": "https://github.com/mrud", "followers_url": "https://api.github.com/users/mrud/followers", "following_url": "https://api.github.com/users/mrud/following{/other_user}", "gists_url": "https://api.github.com/users/mrud/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrud/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrud/subscriptions", "organizations_url": "https://api.github.com/users/mrud/orgs", "repos_url": "https://api.github.com/users/mrud/repos", "events_url": "https://api.github.com/users/mrud/events{/privacy}", "received_events_url": "https://api.github.com/users/mrud/received_events", "type": "User", "site_admin": false}, "created_at": "2014-10-29T05:34:34Z", "updated_at": "2014-10-29T05:34:34Z", "author_association": "NONE", "body": "Any update on this? \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/60876510/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/61629492", "html_url": "https://github.com/airbnb/synapse/pull/24#issuecomment-61629492", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/24", "id": 61629492, "user": {"login": "bobrik", "id": 89186, "avatar_url": "https://avatars0.githubusercontent.com/u/89186?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bobrik", "html_url": "https://github.com/bobrik", "followers_url": "https://api.github.com/users/bobrik/followers", "following_url": "https://api.github.com/users/bobrik/following{/other_user}", "gists_url": "https://api.github.com/users/bobrik/gists{/gist_id}", "starred_url": "https://api.github.com/users/bobrik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bobrik/subscriptions", "organizations_url": "https://api.github.com/users/bobrik/orgs", "repos_url": "https://api.github.com/users/bobrik/repos", "events_url": "https://api.github.com/users/bobrik/events{/privacy}", "received_events_url": "https://api.github.com/users/bobrik/received_events", "type": "User", "site_admin": false}, "created_at": "2014-11-04T11:58:13Z", "updated_at": "2014-11-04T11:58:13Z", "author_association": "NONE", "body": "Hey!\n\nI'm trying to use marathon and mesos to build SOA and made a docker container that provides automatic service discovery just like synapse does. It is available as a [docker container](https://hub.docker.com/u/bobrik/marathon-tcp-haproxy/) and also does registrations for new services.\n\nAnd then I found [post from airbnb](http://nerds.airbnb.com/smartstack-service-discovery-cloud/) that described almost exactly what I did. I was like \"hey! let's throw home-grown stuff and use that thing from airbnb! they surely know how to deal with haproxy better than me anyway!\".\n\nLooks like I was wrong, because synapse can only provide service discovery for apps that are already described in config. After a little thinking it could be extended to what I need by rewriting synapse config whenever new app appears and restarting synapse (but now haproxy, obviously).\n\nWas there any progress in \"dynamism\" direction? Is it worth it to apply synapse to my use-case?\n\nSorry for bumping a year old PR though.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/61629492/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/61663567", "html_url": "https://github.com/airbnb/synapse/pull/24#issuecomment-61663567", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/24", "id": 61663567, "user": {"login": "brndnmtthws", "id": 3129093, "avatar_url": "https://avatars1.githubusercontent.com/u/3129093?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brndnmtthws", "html_url": "https://github.com/brndnmtthws", "followers_url": "https://api.github.com/users/brndnmtthws/followers", "following_url": "https://api.github.com/users/brndnmtthws/following{/other_user}", "gists_url": "https://api.github.com/users/brndnmtthws/gists{/gist_id}", "starred_url": "https://api.github.com/users/brndnmtthws/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brndnmtthws/subscriptions", "organizations_url": "https://api.github.com/users/brndnmtthws/orgs", "repos_url": "https://api.github.com/users/brndnmtthws/repos", "events_url": "https://api.github.com/users/brndnmtthws/events{/privacy}", "received_events_url": "https://api.github.com/users/brndnmtthws/received_events", "type": "User", "site_admin": false}, "created_at": "2014-11-04T16:07:40Z", "updated_at": "2014-11-04T16:07:40Z", "author_association": "CONTRIBUTOR", "body": "On the synapse side there is no dynamic config stuff (I never implemented it).  For nerve, there's a branch that we've been running in production (with Mesos) for about a year now, [here](https://github.com/airbnb/nerve/tree/dynamic-config2).\n\nWe currently define synapse services statically, and then announce services to nerve dynamically.  For each app on Marathon, we send a heartbeat to a local nerve instance which creates the appropriate ZK nodes.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/61663567/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/61757065", "html_url": "https://github.com/airbnb/synapse/pull/87#issuecomment-61757065", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/87", "id": 61757065, "user": {"login": "acmcelwee", "id": 1056585, "avatar_url": "https://avatars1.githubusercontent.com/u/1056585?v=4", "gravatar_id": "", "url": "https://api.github.com/users/acmcelwee", "html_url": "https://github.com/acmcelwee", "followers_url": "https://api.github.com/users/acmcelwee/followers", "following_url": "https://api.github.com/users/acmcelwee/following{/other_user}", "gists_url": "https://api.github.com/users/acmcelwee/gists{/gist_id}", "starred_url": "https://api.github.com/users/acmcelwee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/acmcelwee/subscriptions", "organizations_url": "https://api.github.com/users/acmcelwee/orgs", "repos_url": "https://api.github.com/users/acmcelwee/repos", "events_url": "https://api.github.com/users/acmcelwee/events{/privacy}", "received_events_url": "https://api.github.com/users/acmcelwee/received_events", "type": "User", "site_admin": false}, "created_at": "2014-11-05T04:04:06Z", "updated_at": "2014-11-05T04:04:06Z", "author_association": "NONE", "body": "Here's another series of commits that I needed to get this working w/ marathon 0.7.3 https://github.com/acmcelwee/synapse/commits/marathon. Unfortunately, those are also blocked until 0.3.0 of the marathon_client is published to rubygems.org, [issue #14 over there](https://github.com/mesosphere/marathon_client/issues/14). For now, I've hacked in the updated marathon_client in my env, and that, plus the commits referenced above got me all set w/ this new watcher.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/61757065/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/61971128", "html_url": "https://github.com/airbnb/synapse/pull/24#issuecomment-61971128", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/24", "id": 61971128, "user": {"login": "bobrik", "id": 89186, "avatar_url": "https://avatars0.githubusercontent.com/u/89186?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bobrik", "html_url": "https://github.com/bobrik", "followers_url": "https://api.github.com/users/bobrik/followers", "following_url": "https://api.github.com/users/bobrik/following{/other_user}", "gists_url": "https://api.github.com/users/bobrik/gists{/gist_id}", "starred_url": "https://api.github.com/users/bobrik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bobrik/subscriptions", "organizations_url": "https://api.github.com/users/bobrik/orgs", "repos_url": "https://api.github.com/users/bobrik/repos", "events_url": "https://api.github.com/users/bobrik/events{/privacy}", "received_events_url": "https://api.github.com/users/bobrik/received_events", "type": "User", "site_admin": false}, "created_at": "2014-11-06T12:20:30Z", "updated_at": "2014-11-06T12:20:30Z", "author_association": "NONE", "body": "@brndnmtthws what If I generate synapse config and restart it (maybe with haproxy too) when app list changes? Can this solution work without service interruption?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/61971128/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/61988255", "html_url": "https://github.com/airbnb/synapse/pull/24#issuecomment-61988255", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/24", "id": 61988255, "user": {"login": "brndnmtthws", "id": 3129093, "avatar_url": "https://avatars1.githubusercontent.com/u/3129093?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brndnmtthws", "html_url": "https://github.com/brndnmtthws", "followers_url": "https://api.github.com/users/brndnmtthws/followers", "following_url": "https://api.github.com/users/brndnmtthws/following{/other_user}", "gists_url": "https://api.github.com/users/brndnmtthws/gists{/gist_id}", "starred_url": "https://api.github.com/users/brndnmtthws/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brndnmtthws/subscriptions", "organizations_url": "https://api.github.com/users/brndnmtthws/orgs", "repos_url": "https://api.github.com/users/brndnmtthws/repos", "events_url": "https://api.github.com/users/brndnmtthws/events{/privacy}", "received_events_url": "https://api.github.com/users/brndnmtthws/received_events", "type": "User", "site_admin": false}, "created_at": "2014-11-06T14:43:16Z", "updated_at": "2014-11-06T14:43:16Z", "author_association": "CONTRIBUTOR", "body": "Yes, you could certainly do that.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/61988255/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/62064532", "html_url": "https://github.com/airbnb/synapse/issues/94#issuecomment-62064532", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/94", "id": 62064532, "user": {"login": "Jaykah", "id": 5440172, "avatar_url": "https://avatars3.githubusercontent.com/u/5440172?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jaykah", "html_url": "https://github.com/Jaykah", "followers_url": "https://api.github.com/users/Jaykah/followers", "following_url": "https://api.github.com/users/Jaykah/following{/other_user}", "gists_url": "https://api.github.com/users/Jaykah/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jaykah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jaykah/subscriptions", "organizations_url": "https://api.github.com/users/Jaykah/orgs", "repos_url": "https://api.github.com/users/Jaykah/repos", "events_url": "https://api.github.com/users/Jaykah/events{/privacy}", "received_events_url": "https://api.github.com/users/Jaykah/received_events", "type": "User", "site_admin": false}, "created_at": "2014-11-06T22:37:58Z", "updated_at": "2014-11-06T22:37:58Z", "author_association": "CONTRIBUTOR", "body": "More debugging:\n1. Identifying threads:\n\nRestart Synapse\n\n```\nI, [2014-11-06T22:02:59.634475 #3181]  INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher connecting to ZK at xhbtr.internal.com:2181,xhbtr3.internal.com:2181,xhbtr2.internal.com:2181\nI, [2014-11-06T22:02:59.707555 #3181]  INFO -- Synapse::ZookeeperWatcher: synapse: discovering backends for service db\nI, [2014-11-06T22:02:59.719320 #3181]  INFO -- Synapse::ZookeeperWatcher: synapse: discovered 5 backends for service db\nI, [2014-11-06T22:02:59.719512 #3181]  INFO -- Synapse::Synapse: RECONFIGURE INSIDE SYNAPSE OBJECT ID 70237320665780 THREAD ID 70237310423840\nI, [2014-11-06T22:02:59.719685 #3181]  INFO -- Synapse::Synapse: TEST PING OBJECT ID 70237320665780 THREAD ID 70237310423840\nI, [2014-11-06T22:02:59.719853 #3181]  INFO -- Synapse::Synapse: TEST PING OBJECT ID 70237320665780 THREAD ID 70237310423840\nI, [2014-11-06T22:02:59.720117 #3181]  INFO -- Synapse::Synapse: TEST PING OBJECT ID 70237320665780 THREAD ID 70237310423840\nI, [2014-11-06T22:02:59.720362 #3181]  INFO -- Synapse::Synapse: CONFIG UPDATED IS true OBJECT ID 70237320665780 THREAD ID 70237310423840\nI, [2014-11-06T22:02:59.720582 #3181]  INFO -- Synapse::Synapse: synapse: regenerating haproxy config\nI, [2014-11-06T22:02:59.720797 #3181]  INFO -- Synapse::Haproxy: CODE BLOCK 1 OBJECT ID 70237320663500 THREAD ID 70237310423840\nI, [2014-11-06T22:02:59.721970 #3181]  INFO -- Synapse::Haproxy: CODE BLOCK 2 OBJECT ID 70237320663500 THREAD ID 70237310423840\nI, [2014-11-06T22:02:59.722415 #3181]  INFO -- Synapse::Haproxy: SLEEP IS -63582530577.72238\n[WARNING] 309/220259 (3198) : config : backend 'chat' : ignoring cookie for server '100.0.10.13:5280_100.0.10.13' as HTTP mode is disabled.\n[WARNING] 309/220259 (3198) : config : backend 'db' : ignoring cookie for server '100.0.10.11:3306_100.0.10.11' as HTTP mode is disabled.\n[WARNING] 309/220259 (3198) : config : backend 'db' : ignoring cookie for server '100.1.10.4:3306_100.1.10.4' as HTTP mode is disabled.\n[WARNING] 309/220259 (3198) : config : backend 'db' : ignoring cookie for server '100.0.10.5:3306_100.0.10.5' as HTTP mode is disabled.\n[WARNING] 309/220259 (3198) : config : backend 'db' : ignoring cookie for server '100.0.10.20:3306_100.0.10.20' as HTTP mode is disabled.\n[WARNING] 309/220259 (3198) : config : backend 'db' : ignoring cookie for server '100.0.10.10:3306_100.0.10.10' as HTTP mode is disabled.\n```\n\nKill one of the nodes:\n\n```\n[WARNING] 309/220329 (3198) : Server db/100.0.10.10:3306_100.0.10.10 is DOWN, reason: Layer4 connection problem, info: \"Connection refused\", check duration: 0ms. 4 active and 0 backup servers left. 0 sessions active, 0 requeued, 0 remaining in queue.\nI, [2014-11-06T22:03:48.709254 #3181]  INFO -- Synapse::ZookeeperWatcher: synapse: discovering backends for service db\nI, [2014-11-06T22:03:48.717118 #3181]  INFO -- Synapse::ZookeeperWatcher: synapse: discovered 4 backends for service db\nI, [2014-11-06T22:03:48.717329 #3181]  INFO -- Synapse::Synapse: RECONFIGURE INSIDE SYNAPSE OBJECT ID 70237320665780 THREAD ID 70236942398180\n```\n1. Counting threads\n\nRestart Synapse\n\n```\nI, [2014-11-06T22:18:53.418929 #3283]  INFO -- Synapse::Synapse: THREAD COUNT IN INTIALIZE 2\nI, [2014-11-06T22:18:53.419181 #3283]  INFO -- Synapse::Synapse: synapse: starting...\nI, [2014-11-06T22:18:53.419383 #3283]  INFO -- Synapse::ZookeeperWatcher: synapse: starting ZK watcher application @ hosts: xhbtr3.internal.com:2181,xhbtr2.internal.com:2181,xhbtr.internal.com:2181, path: /services/application\nI, [2014-11-06T22:18:53.419662 #3283]  INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher connecting to ZK at xhbtr3.internal.com:2181,xhbtr2.internal.com:2181,xhbtr.internal.com:2181\nI, [2014-11-06T22:18:53.490143 #3283]  INFO -- Synapse::ZookeeperWatcher: synapse: discovering backends for service application\nI, [2014-11-06T22:18:53.492769 #3283]  INFO -- Synapse::ZookeeperWatcher: synapse: discovered 1 backends for service application\nI, [2014-11-06T22:18:53.492996 #3283]  INFO -- Synapse::ZookeeperWatcher: synapse: starting ZK watcher chat @ hosts: xhbtr.internal.com:2181,xhbtr3.internal.com:2181,xhbtr2.internal.com:2181, path: /services/chat\nI, [2014-11-06T22:18:53.493161 #3283]  INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher connecting to ZK at xhbtr.internal.com:2181,xhbtr3.internal.com:2181,xhbtr2.internal.com:2181\nI, [2014-11-06T22:18:53.562536 #3283]  INFO -- Synapse::ZookeeperWatcher: synapse: discovering backends for service chat\nI, [2014-11-06T22:18:53.564986 #3283]  INFO -- Synapse::ZookeeperWatcher: synapse: discovered 1 backends for service chat\nI, [2014-11-06T22:18:53.565202 #3283]  INFO -- Synapse::ZookeeperWatcher: synapse: starting ZK watcher db @ hosts: xhbtr3.internal.com:2181,xhbtr.internal.com:2181,xhbtr2.internal.com:2181, path: /services/db\nI, [2014-11-06T22:18:53.565365 #3283]  INFO -- Synapse::ZookeeperWatcher: synapse: zookeeper watcher connecting to ZK at xhbtr3.internal.com:2181,xhbtr.internal.com:2181,xhbtr2.internal.com:2181\nI, [2014-11-06T22:18:53.631336 #3283]  INFO -- Synapse::ZookeeperWatcher: synapse: discovering backends for service db\nI, [2014-11-06T22:18:53.639681 #3283]  INFO -- Synapse::ZookeeperWatcher: synapse: discovered 5 backends for service db\nI, [2014-11-06T22:18:53.639878 #3283]  INFO -- Synapse::Synapse: THREAD COUNT IN LOOP 14\nI, [2014-11-06T22:18:53.640057 #3283]  INFO -- Synapse::Synapse: synapse: regenerating haproxy config\n```\n\nKill one of the nodes:\n\n```\n[WARNING] 309/221943 (3300) : Server db/100.0.10.10:3306_100.0.10.10 is DOWN, reason: Layer4 connection problem, info: \"Connection refused\", check duration: 0ms. 4 active and 0 backup servers left. 0 sessions active, 0 requeued, 0 remaining in queue.\nI, [2014-11-06T22:20:02.709009 #3283]  INFO -- Synapse::ZookeeperWatcher: synapse: discovering backends for service db\nI, [2014-11-06T22:20:02.724917 #3283]  INFO -- Synapse::ZookeeperWatcher: synapse: discovered 4 backends for service db\n```\n\nSomehow, when the update happens, another thread is taking over, and @config_updated gets overwritten by each of them, causing the config update to fail (so I assume).\n\nMost likely, it's the ZK gem that's causing the issue (by creating threads and locks).\n\nI will try various Ruby versions, as well as to roll back ZK/Synapse, to see if that helps, as I am out of ideas.\n\nP.S. I am using a manually compiled Ruby 2.1.2\n\n```\n# Install RUBY\nRUN wget http://cache.ruby-lang.org/pub/ruby/2.1/ruby-2.1.2.tar.gz\nRUN tar xzfv ruby-2.1.2.tar.gz\nWORKDIR /tmp/ruby-2.1.2\nENV RUBY_CONFIGURE_OPTS --with-readline-dir=/usr/lib/x86_64-linux-gnu/libreadline.so\nRUN ./configure\nRUN make && make install\nRUN echo \"gem: --no-ri --no-rdoc\" > ~/.gemrc\n```\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/62064532/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/62225765", "html_url": "https://github.com/airbnb/synapse/issues/94#issuecomment-62225765", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/94", "id": 62225765, "user": {"login": "Jaykah", "id": 5440172, "avatar_url": "https://avatars3.githubusercontent.com/u/5440172?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jaykah", "html_url": "https://github.com/Jaykah", "followers_url": "https://api.github.com/users/Jaykah/followers", "following_url": "https://api.github.com/users/Jaykah/following{/other_user}", "gists_url": "https://api.github.com/users/Jaykah/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jaykah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jaykah/subscriptions", "organizations_url": "https://api.github.com/users/Jaykah/orgs", "repos_url": "https://api.github.com/users/Jaykah/repos", "events_url": "https://api.github.com/users/Jaykah/events{/privacy}", "received_events_url": "https://api.github.com/users/Jaykah/received_events", "type": "User", "site_admin": false}, "created_at": "2014-11-07T22:36:15Z", "updated_at": "2014-11-09T23:11:38Z", "author_association": "CONTRIBUTOR", "body": "Update: I have taken Synapse out of Docker and Supervisord, as well as have tried multiple versions of Ruby and Synapse and still have the same issue.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/62225765/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/62306001", "html_url": "https://github.com/airbnb/synapse/pull/58#issuecomment-62306001", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/58", "id": 62306001, "user": {"login": "gebrits", "id": 393259, "avatar_url": "https://avatars3.githubusercontent.com/u/393259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gebrits", "html_url": "https://github.com/gebrits", "followers_url": "https://api.github.com/users/gebrits/followers", "following_url": "https://api.github.com/users/gebrits/following{/other_user}", "gists_url": "https://api.github.com/users/gebrits/gists{/gist_id}", "starred_url": "https://api.github.com/users/gebrits/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gebrits/subscriptions", "organizations_url": "https://api.github.com/users/gebrits/orgs", "repos_url": "https://api.github.com/users/gebrits/repos", "events_url": "https://api.github.com/users/gebrits/events{/privacy}", "received_events_url": "https://api.github.com/users/gebrits/received_events", "type": "User", "site_admin": false}, "created_at": "2014-11-09T14:58:42Z", "updated_at": "2014-11-09T14:58:42Z", "author_association": "NONE", "body": "any progress on this?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/62306001/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/62452639", "html_url": "https://github.com/airbnb/synapse/pull/58#issuecomment-62452639", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/58", "id": 62452639, "user": {"login": "bobtfish", "id": 42338, "avatar_url": "https://avatars1.githubusercontent.com/u/42338?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bobtfish", "html_url": "https://github.com/bobtfish", "followers_url": "https://api.github.com/users/bobtfish/followers", "following_url": "https://api.github.com/users/bobtfish/following{/other_user}", "gists_url": "https://api.github.com/users/bobtfish/gists{/gist_id}", "starred_url": "https://api.github.com/users/bobtfish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bobtfish/subscriptions", "organizations_url": "https://api.github.com/users/bobtfish/orgs", "repos_url": "https://api.github.com/users/bobtfish/repos", "events_url": "https://api.github.com/users/bobtfish/events{/privacy}", "received_events_url": "https://api.github.com/users/bobtfish/received_events", "type": "User", "site_admin": false}, "created_at": "2014-11-10T20:50:50Z", "updated_at": "2014-11-10T20:50:50Z", "author_association": "CONTRIBUTOR", "body": "AFAIK this is good to merge, and it's waiting on someone from airbnb to actually merge it, rather than me to do anything to make it mergeable. (If not, I've missed something - please point it out?)\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/62452639/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/62466154", "html_url": "https://github.com/airbnb/synapse/issues/94#issuecomment-62466154", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/94", "id": 62466154, "user": {"login": "Jaykah", "id": 5440172, "avatar_url": "https://avatars3.githubusercontent.com/u/5440172?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jaykah", "html_url": "https://github.com/Jaykah", "followers_url": "https://api.github.com/users/Jaykah/followers", "following_url": "https://api.github.com/users/Jaykah/following{/other_user}", "gists_url": "https://api.github.com/users/Jaykah/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jaykah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jaykah/subscriptions", "organizations_url": "https://api.github.com/users/Jaykah/orgs", "repos_url": "https://api.github.com/users/Jaykah/repos", "events_url": "https://api.github.com/users/Jaykah/events{/privacy}", "received_events_url": "https://api.github.com/users/Jaykah/received_events", "type": "User", "site_admin": false}, "created_at": "2014-11-10T22:17:49Z", "updated_at": "2014-11-10T22:18:46Z", "author_association": "CONTRIBUTOR", "body": "FINALLY!\n\nA solution:\n\nTL;DR\n\n```\nThe issue has been caused an has been repeatedly reproduced because of the way it was being launched - in the foreground.\n\nForking the process did the trick.\n```\n\nApparently, having one instance of Synapse would prevent it from being able to both query for changes and execute loops - something that I still can't wrap my head around. \n\nRunning from Supevisord, as a command, or via plain synapse -c /etc/synapse.conf.yaml in the foreground was doing just that - making the process busy and not able to write modified Haproxy configs.\n\nTo make it work, I had to adjust my Supervisord config:\n\n[program:synapse]\nprocess_name=synapse-%(process_num)s\ncommand=synapse -c /etc/synapse.conf.yaml\n**numprocs=2**\nstopasgroup=true\nautorestart=unexpected\n\nthus forking Synapse.\n\nIt took me a while to debug, so hopefully this will help someone else too.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/62466154/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/62466659", "html_url": "https://github.com/airbnb/synapse/pull/58#issuecomment-62466659", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/58", "id": 62466659, "user": {"login": "gebrits", "id": 393259, "avatar_url": "https://avatars3.githubusercontent.com/u/393259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gebrits", "html_url": "https://github.com/gebrits", "followers_url": "https://api.github.com/users/gebrits/followers", "following_url": "https://api.github.com/users/gebrits/following{/other_user}", "gists_url": "https://api.github.com/users/gebrits/gists{/gist_id}", "starred_url": "https://api.github.com/users/gebrits/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gebrits/subscriptions", "organizations_url": "https://api.github.com/users/gebrits/orgs", "repos_url": "https://api.github.com/users/gebrits/repos", "events_url": "https://api.github.com/users/gebrits/events{/privacy}", "received_events_url": "https://api.github.com/users/gebrits/received_events", "type": "User", "site_admin": false}, "created_at": "2014-11-10T22:21:19Z", "updated_at": "2014-11-10T22:21:19Z", "author_association": "NONE", "body": "@bobtfish Cheers. Hope this will be merged soon. \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/62466659/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/63199585", "html_url": "https://github.com/airbnb/synapse/issues/94#issuecomment-63199585", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/94", "id": 63199585, "user": {"login": "Jaykah", "id": 5440172, "avatar_url": "https://avatars3.githubusercontent.com/u/5440172?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jaykah", "html_url": "https://github.com/Jaykah", "followers_url": "https://api.github.com/users/Jaykah/followers", "following_url": "https://api.github.com/users/Jaykah/following{/other_user}", "gists_url": "https://api.github.com/users/Jaykah/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jaykah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jaykah/subscriptions", "organizations_url": "https://api.github.com/users/Jaykah/orgs", "repos_url": "https://api.github.com/users/Jaykah/repos", "events_url": "https://api.github.com/users/Jaykah/events{/privacy}", "received_events_url": "https://api.github.com/users/Jaykah/received_events", "type": "User", "site_admin": false}, "created_at": "2014-11-16T00:51:44Z", "updated_at": "2014-11-16T00:51:44Z", "author_association": "CONTRIBUTOR", "body": "Today I have noticed another abnormality - although the changes made (as per my previous comment) did help with dead node removal, new nodes never made it to Haproxy config when registered.\n\nHowever, they started adding with **numprocs=4**, which is even stranger.\n\nDespite that working, I am still convinced that repeating every command multiple times is not the right way to go. What I have also noticed is that with **numprocs=4** there are only 3 processes executing, which means that something is getting lost.\n\nCan anyone shed some light on how forking/threading is being done in Synapse?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/63199585/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/63199615", "html_url": "https://github.com/airbnb/synapse/issues/99#issuecomment-63199615", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/99", "id": 63199615, "user": {"login": "Jaykah", "id": 5440172, "avatar_url": "https://avatars3.githubusercontent.com/u/5440172?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jaykah", "html_url": "https://github.com/Jaykah", "followers_url": "https://api.github.com/users/Jaykah/followers", "following_url": "https://api.github.com/users/Jaykah/following{/other_user}", "gists_url": "https://api.github.com/users/Jaykah/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jaykah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jaykah/subscriptions", "organizations_url": "https://api.github.com/users/Jaykah/orgs", "repos_url": "https://api.github.com/users/Jaykah/repos", "events_url": "https://api.github.com/users/Jaykah/events{/privacy}", "received_events_url": "https://api.github.com/users/Jaykah/received_events", "type": "User", "site_admin": false}, "created_at": "2014-11-16T00:53:14Z", "updated_at": "2014-11-16T00:53:14Z", "author_association": "CONTRIBUTOR", "body": "Looks like the issue that I'm also having - check out #94 for details.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/63199615/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/63629789", "html_url": "https://github.com/airbnb/synapse/pull/58#issuecomment-63629789", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/58", "id": 63629789, "user": {"login": "bobtfish", "id": 42338, "avatar_url": "https://avatars1.githubusercontent.com/u/42338?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bobtfish", "html_url": "https://github.com/bobtfish", "followers_url": "https://api.github.com/users/bobtfish/followers", "following_url": "https://api.github.com/users/bobtfish/following{/other_user}", "gists_url": "https://api.github.com/users/bobtfish/gists{/gist_id}", "starred_url": "https://api.github.com/users/bobtfish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bobtfish/subscriptions", "organizations_url": "https://api.github.com/users/bobtfish/orgs", "repos_url": "https://api.github.com/users/bobtfish/repos", "events_url": "https://api.github.com/users/bobtfish/events{/privacy}", "received_events_url": "https://api.github.com/users/bobtfish/received_events", "type": "User", "site_admin": false}, "created_at": "2014-11-19T11:59:33Z", "updated_at": "2014-11-19T11:59:33Z", "author_association": "CONTRIBUTOR", "body": "> On Nov 18, 2014, at 8:54 AM, Zane notifications@github.com wrote:\n> \n> Greetings -\n> \n> I've implemented this watcher, but I am running into an error:\n> \n> E, [2014-11-18T08:51:02.005658 #7449] ERROR -- Synapse::EtcdWatcher: synapse: invalid data in etcd node # at /service: 757: unexpected token at 'running' DATA running\n> \n> For all entries in my etcd instance I get a return from synapse noted above.\n> \n> Can you also show us what\u2019s in etcd? (The key layout, and JSON contents)\n\nI\u2019m guessed that there is some somehow bad data that\u2019s crashing things - if you can show me what it is, I\u2019ll fix and add a test :)\n\nCheers\nTom\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/63629789/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/63634099", "html_url": "https://github.com/airbnb/synapse/pull/58#issuecomment-63634099", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/58", "id": 63634099, "user": {"login": "tcolgate", "id": 76019, "avatar_url": "https://avatars0.githubusercontent.com/u/76019?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tcolgate", "html_url": "https://github.com/tcolgate", "followers_url": "https://api.github.com/users/tcolgate/followers", "following_url": "https://api.github.com/users/tcolgate/following{/other_user}", "gists_url": "https://api.github.com/users/tcolgate/gists{/gist_id}", "starred_url": "https://api.github.com/users/tcolgate/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tcolgate/subscriptions", "organizations_url": "https://api.github.com/users/tcolgate/orgs", "repos_url": "https://api.github.com/users/tcolgate/repos", "events_url": "https://api.github.com/users/tcolgate/events{/privacy}", "received_events_url": "https://api.github.com/users/tcolgate/received_events", "type": "User", "site_admin": false}, "created_at": "2014-11-19T12:42:49Z", "updated_at": "2014-11-19T12:42:49Z", "author_association": "NONE", "body": "For what it is worth, I've done some additional work on the etcd watcher,\nto include the failover host support, and add some retry logic. I've not\ntidied it up enough for a PR yet but code is on master here:\n\nhttps://github.com/we7/synapse\n\nOn 19 November 2014 11:59, Tomas Doran notifications@github.com wrote:\n\n> > On Nov 18, 2014, at 8:54 AM, Zane notifications@github.com wrote:\n> > \n> > Greetings -\n> > \n> > I've implemented this watcher, but I am running into an error:\n> > \n> > E, [2014-11-18T08:51:02.005658 #7449] ERROR -- Synapse::EtcdWatcher:\n> > synapse: invalid data in etcd node # at /service: 757: unexpected token at\n> > 'running' DATA running\n> > \n> > For all entries in my etcd instance I get a return from synapse noted\n> > above.\n> > \n> > Can you also show us what\u2019s in etcd? (The key layout, and JSON contents)\n> \n> I\u2019m guessed that there is some somehow bad data that\u2019s crashing things -\n> if you can show me what it is, I\u2019ll fix and add a test :)\n> \n> Cheers\n> Tom\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/airbnb/synapse/pull/58#issuecomment-63629789.\n\n## \n\n## Tristan Colgate-McFarlane\n\n  \"You can get all your daily vitamins from 52 pints of guiness, and a\nglass of milk\"\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/63634099/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/63853922", "html_url": "https://github.com/airbnb/synapse/pull/58#issuecomment-63853922", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/58", "id": 63853922, "user": {"login": "sepulworld", "id": 538171, "avatar_url": "https://avatars3.githubusercontent.com/u/538171?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sepulworld", "html_url": "https://github.com/sepulworld", "followers_url": "https://api.github.com/users/sepulworld/followers", "following_url": "https://api.github.com/users/sepulworld/following{/other_user}", "gists_url": "https://api.github.com/users/sepulworld/gists{/gist_id}", "starred_url": "https://api.github.com/users/sepulworld/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sepulworld/subscriptions", "organizations_url": "https://api.github.com/users/sepulworld/orgs", "repos_url": "https://api.github.com/users/sepulworld/repos", "events_url": "https://api.github.com/users/sepulworld/events{/privacy}", "received_events_url": "https://api.github.com/users/sepulworld/received_events", "type": "User", "site_admin": false}, "created_at": "2014-11-20T18:18:58Z", "updated_at": "2014-11-20T18:18:58Z", "author_association": "NONE", "body": "Thanks Tom. Yes, I wasn't using Nerve to populate host information in Etcd so the key values didn't match up with what the Etcd watcher on synapse was looking for. I am trying to switch over to using Nerve but etcd support doesn't seem to be a part of the current Gem version and doing a gem install_specific against the github repo doesn't work either. Do we know when the etcd functionality for Nerve will be stable?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/63853922/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/64095865", "html_url": "https://github.com/airbnb/synapse/pull/58#issuecomment-64095865", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/58", "id": 64095865, "user": {"login": "sepulworld", "id": 538171, "avatar_url": "https://avatars3.githubusercontent.com/u/538171?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sepulworld", "html_url": "https://github.com/sepulworld", "followers_url": "https://api.github.com/users/sepulworld/followers", "following_url": "https://api.github.com/users/sepulworld/following{/other_user}", "gists_url": "https://api.github.com/users/sepulworld/gists{/gist_id}", "starred_url": "https://api.github.com/users/sepulworld/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sepulworld/subscriptions", "organizations_url": "https://api.github.com/users/sepulworld/orgs", "repos_url": "https://api.github.com/users/sepulworld/repos", "events_url": "https://api.github.com/users/sepulworld/events{/privacy}", "received_events_url": "https://api.github.com/users/sepulworld/received_events", "type": "User", "site_admin": false}, "created_at": "2014-11-22T21:18:46Z", "updated_at": "2014-11-22T21:18:46Z", "author_association": "NONE", "body": "Hi Tom,\n\nHere is my etcd key layout:\n\ncurl http://192.168.183.171:4001/v2/keys/service\n\n{\"action\":\"get\",\"node\":{\"key\":\"/service\",\"dir\":true,\"nodes\":[{\"key\":\"/service/192.168.186.158:49234\",\"value\":\"running\",\"expiration\":\"2014-11-22T21:17:37.738052203Z\",\"ttl\":18,\"modifiedIndex\":73811,\"createdIndex\":73811},{\"key\":\"/service/192.168.186.158:49235\",\"value\":\"running\",\"expiration\":\"2014-11-22T21:17:38.321944617Z\",\"ttl\":18,\"modifiedIndex\":73812,\"createdIndex\":73812},{\"key\":\"/service/192.168.186.158:49231\",\"value\":\"running\",\"expiration\":\"2014-11-22T21:17:36.733670014Z\",\"ttl\":17,\"modifiedIndex\":73809,\"createdIndex\":73809},{\"key\":\"/service/192.168.186.158:49233\",\"value\":\"running\",\"expiration\":\"2014-11-22T21:17:36.878094294Z\",\"ttl\":17,\"modifiedIndex\":73810,\"createdIndex\":73810},{\"key\":\"/service/192.168.186.158:49232\",\"value\":\"running\",\"expiration\":\"2014-11-22T21:17:36.517818371Z\",\"ttl\":17,\"modifiedIndex\":73808,\"createdIndex\":73808}],\"modifiedIndex\":3\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/64095865/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/64754411", "html_url": "https://github.com/airbnb/synapse/pull/87#issuecomment-64754411", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/87", "id": 64754411, "user": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "created_at": "2014-11-27T07:24:20Z", "updated_at": "2014-11-27T07:24:20Z", "author_association": "CONTRIBUTOR", "body": "+1 for this functionality. I accidentally implemented the same thing earlier today in #101. Anyway, merging one of these would be awesome.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/64754411/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/66222889", "html_url": "https://github.com/airbnb/synapse/issues/105#issuecomment-66222889", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/105", "id": 66222889, "user": {"login": "dylanmei", "id": 109874, "avatar_url": "https://avatars1.githubusercontent.com/u/109874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dylanmei", "html_url": "https://github.com/dylanmei", "followers_url": "https://api.github.com/users/dylanmei/followers", "following_url": "https://api.github.com/users/dylanmei/following{/other_user}", "gists_url": "https://api.github.com/users/dylanmei/gists{/gist_id}", "starred_url": "https://api.github.com/users/dylanmei/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dylanmei/subscriptions", "organizations_url": "https://api.github.com/users/dylanmei/orgs", "repos_url": "https://api.github.com/users/dylanmei/repos", "events_url": "https://api.github.com/users/dylanmei/events{/privacy}", "received_events_url": "https://api.github.com/users/dylanmei/received_events", "type": "User", "site_admin": false}, "created_at": "2014-12-09T01:58:13Z", "updated_at": "2014-12-09T01:58:13Z", "author_association": "NONE", "body": "Is setting it port 80 a workaround for you?\n\n```\nservices:\n  mybackend:\n    discovery:\n      method: \"ec2tag\"\n      tag_name: \"...\"\n      tag_value: \"...\"\n    haproxy:\n      server_options: \"check\"\n      server_port_override: \"80\"\n```\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/66222889/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/67841568", "html_url": "https://github.com/airbnb/synapse/pull/58#issuecomment-67841568", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/58", "id": 67841568, "user": {"login": "konsti", "id": 184014, "avatar_url": "https://avatars2.githubusercontent.com/u/184014?v=4", "gravatar_id": "", "url": "https://api.github.com/users/konsti", "html_url": "https://github.com/konsti", "followers_url": "https://api.github.com/users/konsti/followers", "following_url": "https://api.github.com/users/konsti/following{/other_user}", "gists_url": "https://api.github.com/users/konsti/gists{/gist_id}", "starred_url": "https://api.github.com/users/konsti/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/konsti/subscriptions", "organizations_url": "https://api.github.com/users/konsti/orgs", "repos_url": "https://api.github.com/users/konsti/repos", "events_url": "https://api.github.com/users/konsti/events{/privacy}", "received_events_url": "https://api.github.com/users/konsti/received_events", "type": "User", "site_admin": false}, "created_at": "2014-12-22T14:19:57Z", "updated_at": "2014-12-22T14:19:57Z", "author_association": "NONE", "body": "@igor47 Any change this is merged with master?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/67841568/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/69247747", "html_url": "https://github.com/airbnb/synapse/pull/100#issuecomment-69247747", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/100", "id": 69247747, "user": {"login": "Jaykah", "id": 5440172, "avatar_url": "https://avatars3.githubusercontent.com/u/5440172?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jaykah", "html_url": "https://github.com/Jaykah", "followers_url": "https://api.github.com/users/Jaykah/followers", "following_url": "https://api.github.com/users/Jaykah/following{/other_user}", "gists_url": "https://api.github.com/users/Jaykah/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jaykah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jaykah/subscriptions", "organizations_url": "https://api.github.com/users/Jaykah/orgs", "repos_url": "https://api.github.com/users/Jaykah/repos", "events_url": "https://api.github.com/users/Jaykah/events{/privacy}", "received_events_url": "https://api.github.com/users/Jaykah/received_events", "type": "User", "site_admin": false}, "created_at": "2015-01-08T20:56:47Z", "updated_at": "2015-01-08T20:56:47Z", "author_association": "CONTRIBUTOR", "body": "Can we please have this merged?\n\nIt has been quite a while, is the project still maintained?\n\nThanks\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/69247747/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/70732461", "html_url": "https://github.com/airbnb/synapse/pull/106#issuecomment-70732461", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/106", "id": 70732461, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2015-01-20T21:01:32Z", "updated_at": "2015-01-20T21:01:32Z", "author_association": "COLLABORATOR", "body": "this is great; i've been wanting to do a refactor like this for awhile.\n\n@jnb we talked about you becoming a maintainer of this repo. are you still interested? i have a few days this week to focus squarely on synapse, so i'm going to work on clearing out the current backlog and adding more unit testing. i've already done this for airbnb/nerve last week.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/70732461/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/71414089", "html_url": "https://github.com/airbnb/synapse/issues/105#issuecomment-71414089", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/105", "id": 71414089, "user": {"login": "ajohnstone", "id": 173567, "avatar_url": "https://avatars1.githubusercontent.com/u/173567?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ajohnstone", "html_url": "https://github.com/ajohnstone", "followers_url": "https://api.github.com/users/ajohnstone/followers", "following_url": "https://api.github.com/users/ajohnstone/following{/other_user}", "gists_url": "https://api.github.com/users/ajohnstone/gists{/gist_id}", "starred_url": "https://api.github.com/users/ajohnstone/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ajohnstone/subscriptions", "organizations_url": "https://api.github.com/users/ajohnstone/orgs", "repos_url": "https://api.github.com/users/ajohnstone/repos", "events_url": "https://api.github.com/users/ajohnstone/events{/privacy}", "received_events_url": "https://api.github.com/users/ajohnstone/received_events", "type": "User", "site_admin": false}, "created_at": "2015-01-26T04:39:01Z", "updated_at": "2015-01-26T04:39:01Z", "author_association": "NONE", "body": "Thanks for that :)\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/71414089/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/72488983", "html_url": "https://github.com/airbnb/synapse/pull/110#issuecomment-72488983", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/110", "id": 72488983, "user": {"login": "jhspaybar", "id": 1356513, "avatar_url": "https://avatars2.githubusercontent.com/u/1356513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhspaybar", "html_url": "https://github.com/jhspaybar", "followers_url": "https://api.github.com/users/jhspaybar/followers", "following_url": "https://api.github.com/users/jhspaybar/following{/other_user}", "gists_url": "https://api.github.com/users/jhspaybar/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhspaybar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhspaybar/subscriptions", "organizations_url": "https://api.github.com/users/jhspaybar/orgs", "repos_url": "https://api.github.com/users/jhspaybar/repos", "events_url": "https://api.github.com/users/jhspaybar/events{/privacy}", "received_events_url": "https://api.github.com/users/jhspaybar/received_events", "type": "User", "site_admin": false}, "created_at": "2015-02-02T16:38:48Z", "updated_at": "2015-02-02T16:38:48Z", "author_association": "NONE", "body": "Any other details needed for this to be eligible for a merge?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/72488983/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/72983874", "html_url": "https://github.com/airbnb/synapse/pull/58#issuecomment-72983874", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/58", "id": 72983874, "user": {"login": "Zolmeister", "id": 700546, "avatar_url": "https://avatars3.githubusercontent.com/u/700546?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zolmeister", "html_url": "https://github.com/Zolmeister", "followers_url": "https://api.github.com/users/Zolmeister/followers", "following_url": "https://api.github.com/users/Zolmeister/following{/other_user}", "gists_url": "https://api.github.com/users/Zolmeister/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zolmeister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zolmeister/subscriptions", "organizations_url": "https://api.github.com/users/Zolmeister/orgs", "repos_url": "https://api.github.com/users/Zolmeister/repos", "events_url": "https://api.github.com/users/Zolmeister/events{/privacy}", "received_events_url": "https://api.github.com/users/Zolmeister/received_events", "type": "User", "site_admin": false}, "created_at": "2015-02-05T02:33:34Z", "updated_at": "2015-02-05T02:33:34Z", "author_association": "NONE", "body": "status?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/72983874/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/73313449", "html_url": "https://github.com/airbnb/synapse/pull/58#issuecomment-73313449", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/58", "id": 73313449, "user": {"login": "SEJeff", "id": 4603, "avatar_url": "https://avatars1.githubusercontent.com/u/4603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SEJeff", "html_url": "https://github.com/SEJeff", "followers_url": "https://api.github.com/users/SEJeff/followers", "following_url": "https://api.github.com/users/SEJeff/following{/other_user}", "gists_url": "https://api.github.com/users/SEJeff/gists{/gist_id}", "starred_url": "https://api.github.com/users/SEJeff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SEJeff/subscriptions", "organizations_url": "https://api.github.com/users/SEJeff/orgs", "repos_url": "https://api.github.com/users/SEJeff/repos", "events_url": "https://api.github.com/users/SEJeff/events{/privacy}", "received_events_url": "https://api.github.com/users/SEJeff/received_events", "type": "User", "site_admin": false}, "created_at": "2015-02-06T21:13:37Z", "updated_at": "2015-02-06T21:13:37Z", "author_association": "NONE", "body": "Well this has merge conflicts, so at a minimum needs to be rebased before it is merged.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/73313449/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/73406871", "html_url": "https://github.com/airbnb/synapse/pull/111#issuecomment-73406871", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/111", "id": 73406871, "user": {"login": "Zolmeister", "id": 700546, "avatar_url": "https://avatars3.githubusercontent.com/u/700546?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zolmeister", "html_url": "https://github.com/Zolmeister", "followers_url": "https://api.github.com/users/Zolmeister/followers", "following_url": "https://api.github.com/users/Zolmeister/following{/other_user}", "gists_url": "https://api.github.com/users/Zolmeister/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zolmeister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zolmeister/subscriptions", "organizations_url": "https://api.github.com/users/Zolmeister/orgs", "repos_url": "https://api.github.com/users/Zolmeister/repos", "events_url": "https://api.github.com/users/Zolmeister/events{/privacy}", "received_events_url": "https://api.github.com/users/Zolmeister/received_events", "type": "User", "site_admin": false}, "created_at": "2015-02-08T11:25:45Z", "updated_at": "2015-02-08T11:25:45Z", "author_association": "NONE", "body": "Forked, let me know if you still want the Dockerfile though\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/73406871/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/74967334", "html_url": "https://github.com/airbnb/synapse/pull/110#issuecomment-74967334", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/110", "id": 74967334, "user": {"login": "jhspaybar", "id": 1356513, "avatar_url": "https://avatars2.githubusercontent.com/u/1356513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhspaybar", "html_url": "https://github.com/jhspaybar", "followers_url": "https://api.github.com/users/jhspaybar/followers", "following_url": "https://api.github.com/users/jhspaybar/following{/other_user}", "gists_url": "https://api.github.com/users/jhspaybar/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhspaybar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhspaybar/subscriptions", "organizations_url": "https://api.github.com/users/jhspaybar/orgs", "repos_url": "https://api.github.com/users/jhspaybar/repos", "events_url": "https://api.github.com/users/jhspaybar/events{/privacy}", "received_events_url": "https://api.github.com/users/jhspaybar/received_events", "type": "User", "site_admin": false}, "created_at": "2015-02-18T23:01:27Z", "updated_at": "2015-02-18T23:01:27Z", "author_association": "NONE", "body": "Sorry to keep pinging this, is there a process I should be following to get this merged?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/74967334/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/75014877", "html_url": "https://github.com/airbnb/synapse/pull/58#issuecomment-75014877", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/58", "id": 75014877, "user": {"login": "WooDzu", "id": 2228236, "avatar_url": "https://avatars3.githubusercontent.com/u/2228236?v=4", "gravatar_id": "", "url": "https://api.github.com/users/WooDzu", "html_url": "https://github.com/WooDzu", "followers_url": "https://api.github.com/users/WooDzu/followers", "following_url": "https://api.github.com/users/WooDzu/following{/other_user}", "gists_url": "https://api.github.com/users/WooDzu/gists{/gist_id}", "starred_url": "https://api.github.com/users/WooDzu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/WooDzu/subscriptions", "organizations_url": "https://api.github.com/users/WooDzu/orgs", "repos_url": "https://api.github.com/users/WooDzu/repos", "events_url": "https://api.github.com/users/WooDzu/events{/privacy}", "received_events_url": "https://api.github.com/users/WooDzu/received_events", "type": "User", "site_admin": false}, "created_at": "2015-02-19T08:35:51Z", "updated_at": "2015-02-19T08:35:51Z", "author_association": "NONE", "body": "Any update on this?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/75014877/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/75051897", "html_url": "https://github.com/airbnb/synapse/pull/58#issuecomment-75051897", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/58", "id": 75051897, "user": {"login": "tcolgate", "id": 76019, "avatar_url": "https://avatars0.githubusercontent.com/u/76019?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tcolgate", "html_url": "https://github.com/tcolgate", "followers_url": "https://api.github.com/users/tcolgate/followers", "following_url": "https://api.github.com/users/tcolgate/following{/other_user}", "gists_url": "https://api.github.com/users/tcolgate/gists{/gist_id}", "starred_url": "https://api.github.com/users/tcolgate/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tcolgate/subscriptions", "organizations_url": "https://api.github.com/users/tcolgate/orgs", "repos_url": "https://api.github.com/users/tcolgate/repos", "events_url": "https://api.github.com/users/tcolgate/events{/privacy}", "received_events_url": "https://api.github.com/users/tcolgate/received_events", "type": "User", "site_admin": false}, "created_at": "2015-02-19T13:31:50Z", "updated_at": "2015-02-19T13:31:50Z", "author_association": "NONE", "body": "I've dropped my version of this PR. We've migrated to consul.\n\nOn 19 February 2015 at 08:35, Piotr Gasiorowski notifications@github.com\nwrote:\n\n> Any update on this?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/airbnb/synapse/pull/58#issuecomment-75014877.\n\n## \n\n## Tristan Colgate-McFarlane\n\n  \"You can get all your daily vitamins from 52 pints of guiness, and a\nglass of milk\"\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/75051897/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/75111690", "html_url": "https://github.com/airbnb/synapse/pull/110#issuecomment-75111690", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/110", "id": 75111690, "user": {"login": "clizzin", "id": 55812, "avatar_url": "https://avatars3.githubusercontent.com/u/55812?v=4", "gravatar_id": "", "url": "https://api.github.com/users/clizzin", "html_url": "https://github.com/clizzin", "followers_url": "https://api.github.com/users/clizzin/followers", "following_url": "https://api.github.com/users/clizzin/following{/other_user}", "gists_url": "https://api.github.com/users/clizzin/gists{/gist_id}", "starred_url": "https://api.github.com/users/clizzin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/clizzin/subscriptions", "organizations_url": "https://api.github.com/users/clizzin/orgs", "repos_url": "https://api.github.com/users/clizzin/repos", "events_url": "https://api.github.com/users/clizzin/events{/privacy}", "received_events_url": "https://api.github.com/users/clizzin/received_events", "type": "User", "site_admin": false}, "created_at": "2015-02-19T18:49:25Z", "updated_at": "2015-02-19T18:49:25Z", "author_association": "CONTRIBUTOR", "body": "Sorry @jhspaybar, your procedure is all fine, it's just that @igor47 is really busy these days working on other projects for Airbnb.  We're doing our best to find time to respond to pull requests, and we're sorry contributors are waiting so long.  Please bear with us in the meantime.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/75111690/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/75112032", "html_url": "https://github.com/airbnb/synapse/pull/58#issuecomment-75112032", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/58", "id": 75112032, "user": {"login": "clizzin", "id": 55812, "avatar_url": "https://avatars3.githubusercontent.com/u/55812?v=4", "gravatar_id": "", "url": "https://api.github.com/users/clizzin", "html_url": "https://github.com/clizzin", "followers_url": "https://api.github.com/users/clizzin/followers", "following_url": "https://api.github.com/users/clizzin/following{/other_user}", "gists_url": "https://api.github.com/users/clizzin/gists{/gist_id}", "starred_url": "https://api.github.com/users/clizzin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/clizzin/subscriptions", "organizations_url": "https://api.github.com/users/clizzin/orgs", "repos_url": "https://api.github.com/users/clizzin/repos", "events_url": "https://api.github.com/users/clizzin/events{/privacy}", "received_events_url": "https://api.github.com/users/clizzin/received_events", "type": "User", "site_admin": false}, "created_at": "2015-02-19T18:51:21Z", "updated_at": "2015-02-19T18:51:21Z", "author_association": "CONTRIBUTOR", "body": "Sorry folks, the project maintainer @igor47 is really busy with other projects for Airbnb these days.  We're doing our best to find time to respond to pull requests, and we're sorry contributors are waiting so long. Please bear with us in the meantime.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/75112032/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/75112206", "html_url": "https://github.com/airbnb/synapse/pull/100#issuecomment-75112206", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/100", "id": 75112206, "user": {"login": "clizzin", "id": 55812, "avatar_url": "https://avatars3.githubusercontent.com/u/55812?v=4", "gravatar_id": "", "url": "https://api.github.com/users/clizzin", "html_url": "https://github.com/clizzin", "followers_url": "https://api.github.com/users/clizzin/followers", "following_url": "https://api.github.com/users/clizzin/following{/other_user}", "gists_url": "https://api.github.com/users/clizzin/gists{/gist_id}", "starred_url": "https://api.github.com/users/clizzin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/clizzin/subscriptions", "organizations_url": "https://api.github.com/users/clizzin/orgs", "repos_url": "https://api.github.com/users/clizzin/repos", "events_url": "https://api.github.com/users/clizzin/events{/privacy}", "received_events_url": "https://api.github.com/users/clizzin/received_events", "type": "User", "site_admin": false}, "created_at": "2015-02-19T18:52:23Z", "updated_at": "2015-02-19T18:52:23Z", "author_association": "CONTRIBUTOR", "body": "Sorry @Jaykah, the project maintainer @igor47 is really busy with other projects for Airbnb these days. We're doing our best to find time to respond to pull requests, and we're sorry contributors are waiting so long. Please bear with us in the meantime.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/75112206/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/77096943", "html_url": "https://github.com/airbnb/synapse/pull/104#issuecomment-77096943", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/104", "id": 77096943, "user": {"login": "larryweya", "id": 127282, "avatar_url": "https://avatars2.githubusercontent.com/u/127282?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larryweya", "html_url": "https://github.com/larryweya", "followers_url": "https://api.github.com/users/larryweya/followers", "following_url": "https://api.github.com/users/larryweya/following{/other_user}", "gists_url": "https://api.github.com/users/larryweya/gists{/gist_id}", "starred_url": "https://api.github.com/users/larryweya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larryweya/subscriptions", "organizations_url": "https://api.github.com/users/larryweya/orgs", "repos_url": "https://api.github.com/users/larryweya/repos", "events_url": "https://api.github.com/users/larryweya/events{/privacy}", "received_events_url": "https://api.github.com/users/larryweya/received_events", "type": "User", "site_admin": false}, "created_at": "2015-03-04T04:52:30Z", "updated_at": "2015-03-04T04:52:30Z", "author_association": "CONTRIBUTOR", "body": "@benley  I like your implementation, allowing a custom port_name, since the rest is exactly the same, I'll merge yours into mine.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/77096943/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/78533730", "html_url": "https://github.com/airbnb/synapse/pull/106#issuecomment-78533730", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/106", "id": 78533730, "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "created_at": "2015-03-12T17:16:13Z", "updated_at": "2015-03-12T17:16:13Z", "author_association": "CONTRIBUTOR", "body": "Note, if you accept #115, that supersedes this change.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/78533730/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/88632551", "html_url": "https://github.com/airbnb/synapse/pull/115#issuecomment-88632551", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/115", "id": 88632551, "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "created_at": "2015-04-01T21:10:08Z", "updated_at": "2015-04-01T21:10:08Z", "author_association": "CONTRIBUTOR", "body": "To give some context on the allredisp option:\n\nhttp://marc.info/?l=haproxy&m=142740715826651&w=2\n\nTo give some context on the deduplication, we currently restart nerve gracefully (i.e. not de-registering a whole box) by starting two nerves and relying on synapse to deduplicate.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/88632551/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/88987809", "html_url": "https://github.com/airbnb/synapse/pull/115#issuecomment-88987809", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/115", "id": 88987809, "user": {"login": "Jaykah", "id": 5440172, "avatar_url": "https://avatars3.githubusercontent.com/u/5440172?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jaykah", "html_url": "https://github.com/Jaykah", "followers_url": "https://api.github.com/users/Jaykah/followers", "following_url": "https://api.github.com/users/Jaykah/following{/other_user}", "gists_url": "https://api.github.com/users/Jaykah/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jaykah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jaykah/subscriptions", "organizations_url": "https://api.github.com/users/Jaykah/orgs", "repos_url": "https://api.github.com/users/Jaykah/repos", "events_url": "https://api.github.com/users/Jaykah/events{/privacy}", "received_events_url": "https://api.github.com/users/Jaykah/received_events", "type": "User", "site_admin": false}, "created_at": "2015-04-02T17:44:25Z", "updated_at": "2015-04-02T17:44:25Z", "author_association": "CONTRIBUTOR", "body": "Hi Joseph,\n\nFirst of all, thanks for the PR! \n\nSecondly, I have a question on deduplication. How does it work with process managers that control forking? \n\nPrecisely, I've had issues with running synapse via Supervisord (#94) where it would not restart when a change in backends is detected, unless I manually specify to run 4 processes of Synapse in Supervisord.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/88987809/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/88992177", "html_url": "https://github.com/airbnb/synapse/pull/115#issuecomment-88992177", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/115", "id": 88992177, "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "created_at": "2015-04-02T17:58:57Z", "updated_at": "2015-04-02T17:58:57Z", "author_association": "CONTRIBUTOR", "body": "My deduplication comment was not the clearest. The deduping logic is just referring to synapse ignoring duplicated service backends, e.g. (host1, 1234), (host1, 1234), (host2, 1234) => (host1, 1234), (host2, 1234).\n\nI would want to run some tests since supervisord is not the setup we use (we use a cron job that restarts synapse whenever our synapse config file changes), but the deduplication is implemented by synapse filtering out duplicate backends by the tuple of (host, port, name?), so I imagine that all of the forked synapse instances would deduplicate in the same way. To be honest I am not sure without digging into #94 more.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/88992177/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/93516039", "html_url": "https://github.com/airbnb/synapse/pull/100#issuecomment-93516039", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/100", "id": 93516039, "user": {"login": "Jaykah", "id": 5440172, "avatar_url": "https://avatars3.githubusercontent.com/u/5440172?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jaykah", "html_url": "https://github.com/Jaykah", "followers_url": "https://api.github.com/users/Jaykah/followers", "following_url": "https://api.github.com/users/Jaykah/following{/other_user}", "gists_url": "https://api.github.com/users/Jaykah/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jaykah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jaykah/subscriptions", "organizations_url": "https://api.github.com/users/Jaykah/orgs", "repos_url": "https://api.github.com/users/Jaykah/repos", "events_url": "https://api.github.com/users/Jaykah/events{/privacy}", "received_events_url": "https://api.github.com/users/Jaykah/received_events", "type": "User", "site_admin": false}, "created_at": "2015-04-15T18:18:07Z", "updated_at": "2015-04-15T18:18:07Z", "author_association": "CONTRIBUTOR", "body": "Hi,\n\nAny updates on the potential merge?\n\nThanks!\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/93516039/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/96801258", "html_url": "https://github.com/airbnb/synapse/pull/58#issuecomment-96801258", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/58", "id": 96801258, "user": {"login": "apennebaker-ni", "id": 10622042, "avatar_url": "https://avatars1.githubusercontent.com/u/10622042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apennebaker-ni", "html_url": "https://github.com/apennebaker-ni", "followers_url": "https://api.github.com/users/apennebaker-ni/followers", "following_url": "https://api.github.com/users/apennebaker-ni/following{/other_user}", "gists_url": "https://api.github.com/users/apennebaker-ni/gists{/gist_id}", "starred_url": "https://api.github.com/users/apennebaker-ni/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apennebaker-ni/subscriptions", "organizations_url": "https://api.github.com/users/apennebaker-ni/orgs", "repos_url": "https://api.github.com/users/apennebaker-ni/repos", "events_url": "https://api.github.com/users/apennebaker-ni/events{/privacy}", "received_events_url": "https://api.github.com/users/apennebaker-ni/received_events", "type": "User", "site_admin": false}, "created_at": "2015-04-27T20:10:59Z", "updated_at": "2015-04-27T20:10:59Z", "author_association": "NONE", "body": "+1\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/96801258/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/97197769", "html_url": "https://github.com/airbnb/synapse/pull/106#issuecomment-97197769", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/106", "id": 97197769, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2015-04-28T20:24:42Z", "updated_at": "2015-04-28T20:24:42Z", "author_association": "COLLABORATOR", "body": "cool, we'll just work with #115 \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/97197769/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/97229646", "html_url": "https://github.com/airbnb/synapse/pull/115#issuecomment-97229646", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/115", "id": 97229646, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2015-04-28T21:41:43Z", "updated_at": "2015-04-28T21:41:43Z", "author_association": "COLLABORATOR", "body": "done with first pass, i left a couple of questions/comments. mostly, it looks great!\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/97229646/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/97282046", "html_url": "https://github.com/airbnb/synapse/pull/110#issuecomment-97282046", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/110", "id": 97282046, "user": {"login": "desmondmorris", "id": 129360, "avatar_url": "https://avatars0.githubusercontent.com/u/129360?v=4", "gravatar_id": "", "url": "https://api.github.com/users/desmondmorris", "html_url": "https://github.com/desmondmorris", "followers_url": "https://api.github.com/users/desmondmorris/followers", "following_url": "https://api.github.com/users/desmondmorris/following{/other_user}", "gists_url": "https://api.github.com/users/desmondmorris/gists{/gist_id}", "starred_url": "https://api.github.com/users/desmondmorris/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/desmondmorris/subscriptions", "organizations_url": "https://api.github.com/users/desmondmorris/orgs", "repos_url": "https://api.github.com/users/desmondmorris/repos", "events_url": "https://api.github.com/users/desmondmorris/events{/privacy}", "received_events_url": "https://api.github.com/users/desmondmorris/received_events", "type": "User", "site_admin": false}, "created_at": "2015-04-29T01:49:44Z", "updated_at": "2015-04-29T01:49:44Z", "author_association": "NONE", "body": "+1\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/97282046/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/102710228", "html_url": "https://github.com/airbnb/synapse/issues/109#issuecomment-102710228", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/109", "id": 102710228, "user": {"login": "dnephin", "id": 442180, "avatar_url": "https://avatars1.githubusercontent.com/u/442180?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dnephin", "html_url": "https://github.com/dnephin", "followers_url": "https://api.github.com/users/dnephin/followers", "following_url": "https://api.github.com/users/dnephin/following{/other_user}", "gists_url": "https://api.github.com/users/dnephin/gists{/gist_id}", "starred_url": "https://api.github.com/users/dnephin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dnephin/subscriptions", "organizations_url": "https://api.github.com/users/dnephin/orgs", "repos_url": "https://api.github.com/users/dnephin/repos", "events_url": "https://api.github.com/users/dnephin/events{/privacy}", "received_events_url": "https://api.github.com/users/dnephin/received_events", "type": "User", "site_admin": false}, "created_at": "2015-05-16T23:06:24Z", "updated_at": "2015-05-16T23:06:24Z", "author_association": "NONE", "body": "+1 \nexposing ports to the host should be unnecessary\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/102710228/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/102711379", "html_url": "https://github.com/airbnb/synapse/issues/120#issuecomment-102711379", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/120", "id": 102711379, "user": {"login": "dnephin", "id": 442180, "avatar_url": "https://avatars1.githubusercontent.com/u/442180?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dnephin", "html_url": "https://github.com/dnephin", "followers_url": "https://api.github.com/users/dnephin/followers", "following_url": "https://api.github.com/users/dnephin/following{/other_user}", "gists_url": "https://api.github.com/users/dnephin/gists{/gist_id}", "starred_url": "https://api.github.com/users/dnephin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dnephin/subscriptions", "organizations_url": "https://api.github.com/users/dnephin/orgs", "repos_url": "https://api.github.com/users/dnephin/repos", "events_url": "https://api.github.com/users/dnephin/events{/privacy}", "received_events_url": "https://api.github.com/users/dnephin/received_events", "type": "User", "site_admin": false}, "created_at": "2015-05-16T23:26:26Z", "updated_at": "2015-05-16T23:26:26Z", "author_association": "NONE", "body": "cc @bobtfish, @bcicen, @rgarcia \n\nYou've all worked with this watcher or have pending PRs for it. What do you think about this idea?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/102711379/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/106475047", "html_url": "https://github.com/airbnb/synapse/pull/100#issuecomment-106475047", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/100", "id": 106475047, "user": {"login": "Jaykah", "id": 5440172, "avatar_url": "https://avatars3.githubusercontent.com/u/5440172?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jaykah", "html_url": "https://github.com/Jaykah", "followers_url": "https://api.github.com/users/Jaykah/followers", "following_url": "https://api.github.com/users/Jaykah/following{/other_user}", "gists_url": "https://api.github.com/users/Jaykah/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jaykah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jaykah/subscriptions", "organizations_url": "https://api.github.com/users/Jaykah/orgs", "repos_url": "https://api.github.com/users/Jaykah/repos", "events_url": "https://api.github.com/users/Jaykah/events{/privacy}", "received_events_url": "https://api.github.com/users/Jaykah/received_events", "type": "User", "site_admin": false}, "created_at": "2015-05-28T16:40:44Z", "updated_at": "2015-05-28T16:40:44Z", "author_association": "CONTRIBUTOR", "body": "@clizzin @igor47 Hi guys, when do you think it will be possible to have this reviewed? \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/106475047/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/110488033", "html_url": "https://github.com/airbnb/synapse/issues/124#issuecomment-110488033", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/124", "id": 110488033, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2015-06-09T20:06:12Z", "updated_at": "2015-06-09T20:06:12Z", "author_association": "COLLABORATOR", "body": "this project is in active use at a few places, and contributors from airbnb and yelp have commit privs. things have been a bit slow in the code review department, but documentation PRs should be fairly trivial to merge\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/110488033/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/110495152", "html_url": "https://github.com/airbnb/synapse/issues/124#issuecomment-110495152", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/124", "id": 110495152, "user": {"login": "chrono", "id": 76803, "avatar_url": "https://avatars3.githubusercontent.com/u/76803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chrono", "html_url": "https://github.com/chrono", "followers_url": "https://api.github.com/users/chrono/followers", "following_url": "https://api.github.com/users/chrono/following{/other_user}", "gists_url": "https://api.github.com/users/chrono/gists{/gist_id}", "starred_url": "https://api.github.com/users/chrono/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chrono/subscriptions", "organizations_url": "https://api.github.com/users/chrono/orgs", "repos_url": "https://api.github.com/users/chrono/repos", "events_url": "https://api.github.com/users/chrono/events{/privacy}", "received_events_url": "https://api.github.com/users/chrono/received_events", "type": "User", "site_admin": false}, "created_at": "2015-06-09T20:28:08Z", "updated_at": "2015-06-09T20:28:08Z", "author_association": "NONE", "body": "just had to dig down into source to discover what #112 already addresses \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/110495152/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/110522258", "html_url": "https://github.com/airbnb/synapse/pull/123#issuecomment-110522258", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/123", "id": 110522258, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2015-06-09T22:26:05Z", "updated_at": "2015-06-09T22:26:05Z", "author_association": "COLLABORATOR", "body": "oops, thanks!\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/110522258/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/110956473", "html_url": "https://github.com/airbnb/synapse/pull/98#issuecomment-110956473", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/98", "id": 110956473, "user": {"login": "liammac", "id": 867921, "avatar_url": "https://avatars0.githubusercontent.com/u/867921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liammac", "html_url": "https://github.com/liammac", "followers_url": "https://api.github.com/users/liammac/followers", "following_url": "https://api.github.com/users/liammac/following{/other_user}", "gists_url": "https://api.github.com/users/liammac/gists{/gist_id}", "starred_url": "https://api.github.com/users/liammac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liammac/subscriptions", "organizations_url": "https://api.github.com/users/liammac/orgs", "repos_url": "https://api.github.com/users/liammac/repos", "events_url": "https://api.github.com/users/liammac/events{/privacy}", "received_events_url": "https://api.github.com/users/liammac/received_events", "type": "User", "site_admin": false}, "created_at": "2015-06-11T00:48:43Z", "updated_at": "2015-06-11T00:48:43Z", "author_association": "NONE", "body": "Can someone please merge this pull request? Having to expose the secret is non optimal\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/110956473/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/111222072", "html_url": "https://github.com/airbnb/synapse/pull/98#issuecomment-111222072", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/98", "id": 111222072, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2015-06-11T17:52:08Z", "updated_at": "2015-06-11T17:52:08Z", "author_association": "COLLABORATOR", "body": "i don't think we need `use_iam_profile` -- we can just avoid requiring the creds if they're not specified. that's the typical behavior for AWS tools that can automatically use IAM roles.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/111222072/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/111225105", "html_url": "https://github.com/airbnb/synapse/pull/98#issuecomment-111225105", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/98", "id": 111225105, "user": {"login": "dylanmei", "id": 109874, "avatar_url": "https://avatars1.githubusercontent.com/u/109874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dylanmei", "html_url": "https://github.com/dylanmei", "followers_url": "https://api.github.com/users/dylanmei/followers", "following_url": "https://api.github.com/users/dylanmei/following{/other_user}", "gists_url": "https://api.github.com/users/dylanmei/gists{/gist_id}", "starred_url": "https://api.github.com/users/dylanmei/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dylanmei/subscriptions", "organizations_url": "https://api.github.com/users/dylanmei/orgs", "repos_url": "https://api.github.com/users/dylanmei/repos", "events_url": "https://api.github.com/users/dylanmei/events{/privacy}", "received_events_url": "https://api.github.com/users/dylanmei/received_events", "type": "User", "site_admin": false}, "created_at": "2015-06-11T18:04:53Z", "updated_at": "2015-06-11T18:05:39Z", "author_association": "NONE", "body": "Great, then we just need to stop demanding that they are defined. Does that sound right?\nhttps://github.com/airbnb/synapse/blob/master/lib/synapse/service_watcher/ec2tag.rb#L49-L53\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/111225105/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/111863508", "html_url": "https://github.com/airbnb/synapse/issues/125#issuecomment-111863508", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/125", "id": 111863508, "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "created_at": "2015-06-14T18:41:47Z", "updated_at": "2015-06-14T18:41:47Z", "author_association": "CONTRIBUTOR", "body": "If you want synapse to write the config, or modify the running HAProxy you'll want to set do_writes, do_reloads, do_socket appropriately.\n\nSo for a basic proof of concept I'd set all three to true.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/111863508/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/111864103", "html_url": "https://github.com/airbnb/synapse/issues/125#issuecomment-111864103", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/125", "id": 111864103, "user": {"login": "ellardli", "id": 617886, "avatar_url": "https://avatars0.githubusercontent.com/u/617886?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ellardli", "html_url": "https://github.com/ellardli", "followers_url": "https://api.github.com/users/ellardli/followers", "following_url": "https://api.github.com/users/ellardli/following{/other_user}", "gists_url": "https://api.github.com/users/ellardli/gists{/gist_id}", "starred_url": "https://api.github.com/users/ellardli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ellardli/subscriptions", "organizations_url": "https://api.github.com/users/ellardli/orgs", "repos_url": "https://api.github.com/users/ellardli/repos", "events_url": "https://api.github.com/users/ellardli/events{/privacy}", "received_events_url": "https://api.github.com/users/ellardli/received_events", "type": "User", "site_admin": false}, "created_at": "2015-06-14T18:52:30Z", "updated_at": "2015-06-14T18:52:30Z", "author_association": "NONE", "body": "Awesome. Thanks @jolynch. That got me past this!\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/111864103/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/111864164", "html_url": "https://github.com/airbnb/synapse/pull/115#issuecomment-111864164", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/115", "id": 111864164, "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "created_at": "2015-06-14T18:54:07Z", "updated_at": "2015-06-14T18:54:07Z", "author_association": "CONTRIBUTOR", "body": "Sorry that I've just been adding a ton more commits to this \"de-fork\" pull-request. We ended up hitting some serious reliability problems when we turned on some new multi-datacenter functionality and had to focus on fixing that up. I'll be getting this ready for merge ASAP.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/111864164/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/111864495", "html_url": "https://github.com/airbnb/synapse/issues/124#issuecomment-111864495", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/124", "id": 111864495, "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "created_at": "2015-06-14T19:00:44Z", "updated_at": "2015-06-14T19:00:44Z", "author_association": "CONTRIBUTOR", "body": "@chrono,\n@jnb and I from Yelp plan to help maintain this going forward along with @igor47 and the airbnb crew.\n\nRight now we're concentrating on getting the Yelp forks of nerve/synapse merged back into upstream as they have a lot of important reliability fixes for multi-datacenter setups (connection pooling, removal of fast fail in nerve, allowing synapse to reconfigure more aggressively than it restarts, etc ...). Once we do that we're going to start going through pull requests and working with @igor47 to get everything tidied up.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/111864495/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/114192173", "html_url": "https://github.com/airbnb/synapse/issues/124#issuecomment-114192173", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/124", "id": 114192173, "user": {"login": "dcosson", "id": 708904, "avatar_url": "https://avatars0.githubusercontent.com/u/708904?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dcosson", "html_url": "https://github.com/dcosson", "followers_url": "https://api.github.com/users/dcosson/followers", "following_url": "https://api.github.com/users/dcosson/following{/other_user}", "gists_url": "https://api.github.com/users/dcosson/gists{/gist_id}", "starred_url": "https://api.github.com/users/dcosson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dcosson/subscriptions", "organizations_url": "https://api.github.com/users/dcosson/orgs", "repos_url": "https://api.github.com/users/dcosson/repos", "events_url": "https://api.github.com/users/dcosson/events{/privacy}", "received_events_url": "https://api.github.com/users/dcosson/received_events", "type": "User", "site_admin": false}, "created_at": "2015-06-22T17:31:54Z", "updated_at": "2015-06-22T17:37:30Z", "author_association": "CONTRIBUTOR", "body": "+1. Maybe you could give a few community members commit access if airbnb doesn't have the bandwidth to support this?\n\nFWIW, here was my experience trying it out with a super simple config, maybe it'll help anyone coming here in the future before these issues get addressed. It crashes when I start it because\n- In the global haproxy section, `shared_frontend` needs to be a list not a string (already in #112 as @chrono mentioned)\n- `method: stub` is not a thing, it needs to be \"base\" ([link](https://github.com/airbnb/synapse/blob/40aa25759ce264a941d24317d93d85e0d78a76e1/lib/synapse/service_watcher.rb#L11-18))\n\nNow I can launch synapse and it stays running and logs that it is writing the haproxy config. It is not, the config silently never gets written.  The README says that the global haproxy option `do_writes` [defaults to true](https://github.com/airbnb/synapse/blob/40aa25759ce264a941d24317d93d85e0d78a76e1/README.md#configuring-haproxy) but it doesn't, anything that's not explicitly set in my config is not present in the options hash in the Haproxy object when synapse runs so everything defaults to false.\n\nNow it's finally running as expected for my simple example.\n\nUnrelated, @jolynch when you say you have a fix for \"allowing synapse to reconfigure more aggressively than it restarts\" is that the same thing described in #78? \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/114192173/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/114229505", "html_url": "https://github.com/airbnb/synapse/issues/124#issuecomment-114229505", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/124", "id": 114229505, "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "created_at": "2015-06-22T19:29:50Z", "updated_at": "2015-06-22T19:31:01Z", "author_association": "CONTRIBUTOR", "body": "@dcosson Yes our fork does help mitigate that problem, but it is not a complete solution. Basically we cache synapse state locally for 30m and will always put cached backends in regardless of if they are in zookeeper (if we don't know about them in zookeeper they go in disabled). Then because our fork can reconfigure (but not restart) every loop of the main loop we can enable them via the stats socket as soon as they report up.\n\nIt doesn't totally solve the problem, but we've seen a significant decrease in 503s related to restarts since we rolled it out. That being said we're still dogfooding internally and have found a bug or two. The next step is putting them in as backups automatically (that should solve your problem).\n\nI'm pushing internally to get our forks merged back. We're waiting for a 2 week period of zero bugs in production before we go ahead and merge them in.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/114229505/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/114232209", "html_url": "https://github.com/airbnb/synapse/issues/124#issuecomment-114232209", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/124", "id": 114232209, "user": {"login": "dcosson", "id": 708904, "avatar_url": "https://avatars0.githubusercontent.com/u/708904?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dcosson", "html_url": "https://github.com/dcosson", "followers_url": "https://api.github.com/users/dcosson/followers", "following_url": "https://api.github.com/users/dcosson/following{/other_user}", "gists_url": "https://api.github.com/users/dcosson/gists{/gist_id}", "starred_url": "https://api.github.com/users/dcosson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dcosson/subscriptions", "organizations_url": "https://api.github.com/users/dcosson/orgs", "repos_url": "https://api.github.com/users/dcosson/repos", "events_url": "https://api.github.com/users/dcosson/events{/privacy}", "received_events_url": "https://api.github.com/users/dcosson/received_events", "type": "User", "site_admin": false}, "created_at": "2015-06-22T19:39:04Z", "updated_at": "2015-06-22T19:39:04Z", "author_association": "CONTRIBUTOR", "body": "@jolynch cool to hear. Thanks for the update\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/114232209/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/115307920", "html_url": "https://github.com/airbnb/synapse/issues/122#issuecomment-115307920", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/122", "id": 115307920, "user": {"login": "dcosson", "id": 708904, "avatar_url": "https://avatars0.githubusercontent.com/u/708904?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dcosson", "html_url": "https://github.com/dcosson", "followers_url": "https://api.github.com/users/dcosson/followers", "following_url": "https://api.github.com/users/dcosson/following{/other_user}", "gists_url": "https://api.github.com/users/dcosson/gists{/gist_id}", "starred_url": "https://api.github.com/users/dcosson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dcosson/subscriptions", "organizations_url": "https://api.github.com/users/dcosson/orgs", "repos_url": "https://api.github.com/users/dcosson/repos", "events_url": "https://api.github.com/users/dcosson/events{/privacy}", "received_events_url": "https://api.github.com/users/dcosson/received_events", "type": "User", "site_admin": false}, "created_at": "2015-06-25T16:18:37Z", "updated_at": "2015-06-25T16:18:37Z", "author_association": "CONTRIBUTOR", "body": "I added support for them in #126 \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/115307920/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/116362122", "html_url": "https://github.com/airbnb/synapse/pull/110#issuecomment-116362122", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/110", "id": 116362122, "user": {"login": "beedub", "id": 102646, "avatar_url": "https://avatars0.githubusercontent.com/u/102646?v=4", "gravatar_id": "", "url": "https://api.github.com/users/beedub", "html_url": "https://github.com/beedub", "followers_url": "https://api.github.com/users/beedub/followers", "following_url": "https://api.github.com/users/beedub/following{/other_user}", "gists_url": "https://api.github.com/users/beedub/gists{/gist_id}", "starred_url": "https://api.github.com/users/beedub/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/beedub/subscriptions", "organizations_url": "https://api.github.com/users/beedub/orgs", "repos_url": "https://api.github.com/users/beedub/repos", "events_url": "https://api.github.com/users/beedub/events{/privacy}", "received_events_url": "https://api.github.com/users/beedub/received_events", "type": "User", "site_admin": false}, "created_at": "2015-06-29T00:14:19Z", "updated_at": "2015-06-29T00:14:19Z", "author_association": "NONE", "body": "@jhspaybar fyi the indentation in many of the files is inconsistent\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/116362122/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/118668418", "html_url": "https://github.com/airbnb/synapse/issues/35#issuecomment-118668418", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/35", "id": 118668418, "user": {"login": "Hades32", "id": 167847, "avatar_url": "https://avatars3.githubusercontent.com/u/167847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Hades32", "html_url": "https://github.com/Hades32", "followers_url": "https://api.github.com/users/Hades32/followers", "following_url": "https://api.github.com/users/Hades32/following{/other_user}", "gists_url": "https://api.github.com/users/Hades32/gists{/gist_id}", "starred_url": "https://api.github.com/users/Hades32/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Hades32/subscriptions", "organizations_url": "https://api.github.com/users/Hades32/orgs", "repos_url": "https://api.github.com/users/Hades32/repos", "events_url": "https://api.github.com/users/Hades32/events{/privacy}", "received_events_url": "https://api.github.com/users/Hades32/received_events", "type": "User", "site_admin": false}, "created_at": "2015-07-05T21:23:52Z", "updated_at": "2015-07-05T21:23:52Z", "author_association": "NONE", "body": "https://github.com/GoToAssist/synapse/blob/master/synapse/lib/synapse/service_watcher/etcd.rb seems to be the most mature fork AFAICS\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/118668418/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/118841224", "html_url": "https://github.com/airbnb/synapse/issues/35#issuecomment-118841224", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/35", "id": 118841224, "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "created_at": "2015-07-06T12:37:33Z", "updated_at": "2015-07-06T12:37:33Z", "author_association": "CONTRIBUTOR", "body": "I'm also working with @bobtfish  to get this merged into Yelp's synapse fork over at https://github.com/Yelp/synapse/pull/3 and we're going to be merging that back into upstream once we get some more production experience with it.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/118841224/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/123498501", "html_url": "https://github.com/airbnb/synapse/pull/129#issuecomment-123498501", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/129", "id": 123498501, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2015-07-21T22:29:37Z", "updated_at": "2015-07-21T22:29:37Z", "author_association": "COLLABORATOR", "body": ":+1: -- after this is merged, we should release a new version of synapse and roll it out in our infra\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/123498501/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/123515573", "html_url": "https://github.com/airbnb/synapse/pull/115#issuecomment-123515573", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/115", "id": 123515573, "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "created_at": "2015-07-22T00:20:51Z", "updated_at": "2015-07-22T00:20:51Z", "author_association": "CONTRIBUTOR", "body": "We're going to take care of this in #130 \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/123515573/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/123839518", "html_url": "https://github.com/airbnb/synapse/pull/130#issuecomment-123839518", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/130", "id": 123839518, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2015-07-22T19:39:17Z", "updated_at": "2015-07-22T19:39:17Z", "author_association": "COLLABORATOR", "body": "looks pretty good overall. i left a few questions in a few places. i also think the test coverage is a little light, especially around zk connection pooling and all of the new haproxy functionality.\n\ni think a few additional airbnb peeps from our production infrastructure team would like to take a look. ping @schleyfox @jtai \n\nthanks for doing this, i'm excited about all of the great new functionality (especially connection pooling, the disabling of the keep-backends misfeature, and the haproxy state file so you can continue to see the disabled backends)\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/123839518/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/123924369", "html_url": "https://github.com/airbnb/synapse/pull/130#issuecomment-123924369", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/130", "id": 123924369, "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "created_at": "2015-07-23T01:14:51Z", "updated_at": "2015-07-23T01:14:51Z", "author_association": "CONTRIBUTOR", "body": "Yea, the connection pooling and haproxy cache code was sorta done under P0 pressure (site was actively degraded kind of P0), so we didn't write too many tests heh. Do you think the lack of test coverage blocks merge or is it something that I can work on in separate PRs against this repo after the fork is gone?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/123924369/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/123956505", "html_url": "https://github.com/airbnb/synapse/pull/130#issuecomment-123956505", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/130", "id": 123956505, "user": {"login": "schleyfox", "id": 4259, "avatar_url": "https://avatars0.githubusercontent.com/u/4259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/schleyfox", "html_url": "https://github.com/schleyfox", "followers_url": "https://api.github.com/users/schleyfox/followers", "following_url": "https://api.github.com/users/schleyfox/following{/other_user}", "gists_url": "https://api.github.com/users/schleyfox/gists{/gist_id}", "starred_url": "https://api.github.com/users/schleyfox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schleyfox/subscriptions", "organizations_url": "https://api.github.com/users/schleyfox/orgs", "repos_url": "https://api.github.com/users/schleyfox/repos", "events_url": "https://api.github.com/users/schleyfox/events{/privacy}", "received_events_url": "https://api.github.com/users/schleyfox/received_events", "type": "User", "site_admin": false}, "created_at": "2015-07-23T03:58:31Z", "updated_at": "2015-07-23T03:58:31Z", "author_association": "OWNER", "body": "I gave it a skim and it seems pretty reasonable to me. I'm excited.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/123956505/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/124176883", "html_url": "https://github.com/airbnb/synapse/pull/130#issuecomment-124176883", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/130", "id": 124176883, "user": {"login": "jtai", "id": 696036, "avatar_url": "https://avatars2.githubusercontent.com/u/696036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jtai", "html_url": "https://github.com/jtai", "followers_url": "https://api.github.com/users/jtai/followers", "following_url": "https://api.github.com/users/jtai/following{/other_user}", "gists_url": "https://api.github.com/users/jtai/gists{/gist_id}", "starred_url": "https://api.github.com/users/jtai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jtai/subscriptions", "organizations_url": "https://api.github.com/users/jtai/orgs", "repos_url": "https://api.github.com/users/jtai/repos", "events_url": "https://api.github.com/users/jtai/events{/privacy}", "received_events_url": "https://api.github.com/users/jtai/received_events", "type": "User", "site_admin": false}, "created_at": "2015-07-23T17:37:36Z", "updated_at": "2015-07-23T17:37:36Z", "author_association": "CONTRIBUTOR", "body": "These improvements are awesome! Thank you!\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/124176883/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/124236614", "html_url": "https://github.com/airbnb/synapse/pull/130#issuecomment-124236614", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/130", "id": 124236614, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2015-07-23T20:50:05Z", "updated_at": "2015-07-23T20:50:05Z", "author_association": "COLLABORATOR", "body": "okay i think this is ready to merge. once that's done, i'll bump the version and release a build, and we can start trying to run it in airbnbland\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/124236614/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/124255669", "html_url": "https://github.com/airbnb/synapse/pull/128#issuecomment-124255669", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/128", "id": 124255669, "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "created_at": "2015-07-23T22:30:40Z", "updated_at": "2015-07-23T22:30:40Z", "author_association": "CONTRIBUTOR", "body": "I think per the discussion in https://github.com/airbnb/synapse/pull/130#discussion_r35285222 indicates that this might break core functionality for airbnb. Perhaps this can be an option to either sort or not sort the backends?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/124255669/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/124256742", "html_url": "https://github.com/airbnb/synapse/pull/130#issuecomment-124256742", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/130", "id": 124256742, "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "created_at": "2015-07-23T22:35:11Z", "updated_at": "2015-07-23T22:35:11Z", "author_association": "CONTRIBUTOR", "body": "We're going to start dogfooding 3e36e88559 and then when you release we'll switch to that. \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/124256742/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/124277338", "html_url": "https://github.com/airbnb/synapse/pull/130#issuecomment-124277338", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/130", "id": 124277338, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2015-07-24T00:29:19Z", "updated_at": "2015-07-24T00:29:19Z", "author_association": "COLLABORATOR", "body": "ok i released v0.12.1; i'm going to start trying it here as well\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/124277338/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/125019942", "html_url": "https://github.com/airbnb/synapse/issues/120#issuecomment-125019942", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/120", "id": 125019942, "user": {"login": "bobtfish", "id": 42338, "avatar_url": "https://avatars1.githubusercontent.com/u/42338?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bobtfish", "html_url": "https://github.com/bobtfish", "followers_url": "https://api.github.com/users/bobtfish/followers", "following_url": "https://api.github.com/users/bobtfish/following{/other_user}", "gists_url": "https://api.github.com/users/bobtfish/gists{/gist_id}", "starred_url": "https://api.github.com/users/bobtfish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bobtfish/subscriptions", "organizations_url": "https://api.github.com/users/bobtfish/orgs", "repos_url": "https://api.github.com/users/bobtfish/repos", "events_url": "https://api.github.com/users/bobtfish/events{/privacy}", "received_events_url": "https://api.github.com/users/bobtfish/received_events", "type": "User", "site_admin": false}, "created_at": "2015-07-26T17:30:32Z", "updated_at": "2015-07-26T17:30:32Z", "author_association": "CONTRIBUTOR", "body": ":+1: \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/125019942/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/125663987", "html_url": "https://github.com/airbnb/synapse/pull/131#issuecomment-125663987", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/131", "id": 125663987, "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "created_at": "2015-07-28T16:03:10Z", "updated_at": "2015-07-28T16:03:10Z", "author_association": "CONTRIBUTOR", "body": "Looks reasonable, can you check that this works with the state file (we should/will add tests of that soon)?\n\nAlso this doesn't have code for doing updates over the socket, but we presumably want that. Is that going to come in a follow up patch?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/125663987/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/125680463", "html_url": "https://github.com/airbnb/synapse/pull/130#issuecomment-125680463", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/130", "id": 125680463, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2015-07-28T17:05:53Z", "updated_at": "2015-07-28T17:05:53Z", "author_association": "COLLABORATOR", "body": "my smoke testing went well, and now i'm allowing synapse v0.12.1 to propagate through our infrastructure; i'm going to tackle airbnb/nerve#71 now\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/125680463/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/127295186", "html_url": "https://github.com/airbnb/synapse/pull/131#issuecomment-127295186", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/131", "id": 127295186, "user": {"login": "bobtfish", "id": 42338, "avatar_url": "https://avatars1.githubusercontent.com/u/42338?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bobtfish", "html_url": "https://github.com/bobtfish", "followers_url": "https://api.github.com/users/bobtfish/followers", "following_url": "https://api.github.com/users/bobtfish/following{/other_user}", "gists_url": "https://api.github.com/users/bobtfish/gists{/gist_id}", "starred_url": "https://api.github.com/users/bobtfish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bobtfish/subscriptions", "organizations_url": "https://api.github.com/users/bobtfish/orgs", "repos_url": "https://api.github.com/users/bobtfish/repos", "events_url": "https://api.github.com/users/bobtfish/events{/privacy}", "received_events_url": "https://api.github.com/users/bobtfish/received_events", "type": "User", "site_admin": false}, "created_at": "2015-08-03T16:16:31Z", "updated_at": "2015-08-03T16:16:31Z", "author_association": "CONTRIBUTOR", "body": "@jolynch ack - thanks for the feedback. I'll add tests around the state file, and I had totally forgotten the weight updates over the socket. I'd however prefer to do that as a separate patch to keep things relatively simple. Does that work for you?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/127295186/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/127309267", "html_url": "https://github.com/airbnb/synapse/pull/131#issuecomment-127309267", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/131", "id": 127309267, "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "created_at": "2015-08-03T16:28:21Z", "updated_at": "2015-08-03T16:28:21Z", "author_association": "CONTRIBUTOR", "body": "My only issue with doing the socket update in a subsequent change is that something else will have to trigger a HAProxy reload to pick up any change in weights (since this patch neither informs the haproxy module that it needs to reload nor changes the weights over the stats socket). At the very least I think it should inform haproxy to restart?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/127309267/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/129961173", "html_url": "https://github.com/airbnb/synapse/pull/104#issuecomment-129961173", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/104", "id": 129961173, "user": {"login": "StephanErb", "id": 483730, "avatar_url": "https://avatars2.githubusercontent.com/u/483730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/StephanErb", "html_url": "https://github.com/StephanErb", "followers_url": "https://api.github.com/users/StephanErb/followers", "following_url": "https://api.github.com/users/StephanErb/following{/other_user}", "gists_url": "https://api.github.com/users/StephanErb/gists{/gist_id}", "starred_url": "https://api.github.com/users/StephanErb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/StephanErb/subscriptions", "organizations_url": "https://api.github.com/users/StephanErb/orgs", "repos_url": "https://api.github.com/users/StephanErb/repos", "events_url": "https://api.github.com/users/StephanErb/events{/privacy}", "received_events_url": "https://api.github.com/users/StephanErb/received_events", "type": "User", "site_admin": false}, "created_at": "2015-08-11T16:38:43Z", "updated_at": "2015-08-11T16:38:43Z", "author_association": "NONE", "body": "Anything missing to get this one merged?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/129961173/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/130184550", "html_url": "https://github.com/airbnb/synapse/pull/132#issuecomment-130184550", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/132", "id": 130184550, "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "created_at": "2015-08-12T06:23:36Z", "updated_at": "2015-08-12T06:23:36Z", "author_association": "CONTRIBUTOR", "body": "@igor47 We should probably create a repo for community contributed synapse watchers and nerve reporters. Also I need to actually figure out how to ninja in a watcher/reporter class without a checkout + patch.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/130184550/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/130367659", "html_url": "https://github.com/airbnb/synapse/pull/133#issuecomment-130367659", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/133", "id": 130367659, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2015-08-12T16:50:32Z", "updated_at": "2015-08-12T16:50:32Z", "author_association": "COLLABORATOR", "body": "i left some feedback on the corresponding nerve PR (airbnb/nerve#74) that i would like to see answered before reviewing this\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/130367659/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/131435609", "html_url": "https://github.com/airbnb/synapse/pull/135#issuecomment-131435609", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/135", "id": 131435609, "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "created_at": "2015-08-15T19:40:13Z", "updated_at": "2015-08-15T19:40:13Z", "author_association": "CONTRIBUTOR", "body": "For context I'm thinking something like:\n\n``` json\n  \"services\": {                                                                 \n    \"service1\": {                                                               \n      \"default_servers\": [],                                                    \n      \"use_previous_backends\": false,                                           \n      \"discovery\": {                                                            \n        \"method\": \"zookeeper\",                                                  \n        \"path\": \"/services/service1\",                                           \n        \"hosts\": [                                                              \n          \"localhost:2181\"                                                      \n        ]                                                                       \n      },                                                                        \n      \"haproxy\": {                                                              \n        \"port\": 3213,                                                           \n        \"backend_name\": \"service1\",                                             \n        \"listen\": [                                                             \n          \"mode http\",                                                          \n        ],                                                                      \n        \"frontend\": [                                                           \n          \"acl needs_fallback nbsrv(service1) le 0\",                            \n          \"use_backend service1_backup if needs_fallback\"                       \n        ]                                                                       \n      }                                                                         \n    },                                                                          \n    \"service1_backup\": {                                                        \n      \"default_servers\": [],                                                    \n      \"use_previous_backends\": false,                                           \n      \"discovery\": {                                                            \n        \"method\": \"zookeeper\",                                                  \n        \"path\": \"/services/service1_backup\",                                    \n        \"hosts\": [                                                              \n          \"localhost:2181\"                                                      \n        ]                                                                       \n      },                                                                        \n      \"haproxy\": {                                                              \n        \"backend_name\": \"service1_backup\",                                                                                                   \n      }                                                                         \n    }\n}\n```\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/131435609/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/131438657", "html_url": "https://github.com/airbnb/synapse/pull/97#issuecomment-131438657", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/97", "id": 131438657, "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "created_at": "2015-08-15T20:01:36Z", "updated_at": "2015-08-15T20:01:36Z", "author_association": "CONTRIBUTOR", "body": "I believe this was fixed in commit 64c2bd802b\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/131438657/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/131439694", "html_url": "https://github.com/airbnb/synapse/pull/135#issuecomment-131439694", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/135", "id": 131439694, "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "created_at": "2015-08-15T20:07:11Z", "updated_at": "2015-08-15T20:07:11Z", "author_association": "CONTRIBUTOR", "body": "fwiw the shared frontend section sorta allows this although afaik it only allows one shared frontend for the entire haproxy instance?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/131439694/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/131442390", "html_url": "https://github.com/airbnb/synapse/pull/24#issuecomment-131442390", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/24", "id": 131442390, "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "created_at": "2015-08-15T20:17:55Z", "updated_at": "2015-08-15T20:17:55Z", "author_association": "CONTRIBUTOR", "body": "@igor47, @bobrik, @jamessharp  I'd like to revisit this because I sorta don't like adding the dynamic complexity directly to synapse/nerve. We use a cron job that reconfigures nerve/synapse every N seconds and I really like that approach because it keeps the design very unixy and easy to reason about IMO. At least for us it has made extending and debugging SmartStack really easy and I sorta want to keep it that way.\n\nThe only downside that I'm aware of is that synapse decides to restart haproxy the first time it starts and sometimes the watchers don't find all the backends immediately (why not sure). I think we can fix this using the state_file work that @jnb has done. Can anyone think of any other reasons that dynamically reacting to which watchers should exist should be synapse's responsibility and not an external component? \n\nIf not then I'll close this PR and we'll continue down the state_file path.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/131442390/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/131442474", "html_url": "https://github.com/airbnb/synapse/pull/24#issuecomment-131442474", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/24", "id": 131442474, "user": {"login": "brndnmtthws", "id": 3129093, "avatar_url": "https://avatars1.githubusercontent.com/u/3129093?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brndnmtthws", "html_url": "https://github.com/brndnmtthws", "followers_url": "https://api.github.com/users/brndnmtthws/followers", "following_url": "https://api.github.com/users/brndnmtthws/following{/other_user}", "gists_url": "https://api.github.com/users/brndnmtthws/gists{/gist_id}", "starred_url": "https://api.github.com/users/brndnmtthws/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brndnmtthws/subscriptions", "organizations_url": "https://api.github.com/users/brndnmtthws/orgs", "repos_url": "https://api.github.com/users/brndnmtthws/repos", "events_url": "https://api.github.com/users/brndnmtthws/events{/privacy}", "received_events_url": "https://api.github.com/users/brndnmtthws/received_events", "type": "User", "site_admin": false}, "created_at": "2015-08-15T20:20:33Z", "updated_at": "2015-08-15T20:20:33Z", "author_association": "CONTRIBUTOR", "body": "Feel free to close it. My 2 cents.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/131442474/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/131927061", "html_url": "https://github.com/airbnb/synapse/pull/24#issuecomment-131927061", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/24", "id": 131927061, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2015-08-17T18:53:47Z", "updated_at": "2015-08-17T18:53:47Z", "author_association": "COLLABORATOR", "body": "agreed; closing.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/131927061/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/131928001", "html_url": "https://github.com/airbnb/synapse/pull/136#issuecomment-131928001", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/136", "id": 131928001, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2015-08-17T18:55:27Z", "updated_at": "2015-08-17T18:55:27Z", "author_association": "COLLABORATOR", "body": ":+1: \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/131928001/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/133904401", "html_url": "https://github.com/airbnb/synapse/pull/132#issuecomment-133904401", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/132", "id": 133904401, "user": {"login": "bobtfish", "id": 42338, "avatar_url": "https://avatars1.githubusercontent.com/u/42338?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bobtfish", "html_url": "https://github.com/bobtfish", "followers_url": "https://api.github.com/users/bobtfish/followers", "following_url": "https://api.github.com/users/bobtfish/following{/other_user}", "gists_url": "https://api.github.com/users/bobtfish/gists{/gist_id}", "starred_url": "https://api.github.com/users/bobtfish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bobtfish/subscriptions", "organizations_url": "https://api.github.com/users/bobtfish/orgs", "repos_url": "https://api.github.com/users/bobtfish/repos", "events_url": "https://api.github.com/users/bobtfish/events{/privacy}", "received_events_url": "https://api.github.com/users/bobtfish/received_events", "type": "User", "site_admin": false}, "created_at": "2015-08-23T19:20:23Z", "updated_at": "2015-08-23T19:20:23Z", "author_association": "CONTRIBUTOR", "body": ":+1: \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/133904401/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/135487743", "html_url": "https://github.com/airbnb/synapse/pull/100#issuecomment-135487743", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/100", "id": 135487743, "user": {"login": "Jaykah", "id": 5440172, "avatar_url": "https://avatars3.githubusercontent.com/u/5440172?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jaykah", "html_url": "https://github.com/Jaykah", "followers_url": "https://api.github.com/users/Jaykah/followers", "following_url": "https://api.github.com/users/Jaykah/following{/other_user}", "gists_url": "https://api.github.com/users/Jaykah/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jaykah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jaykah/subscriptions", "organizations_url": "https://api.github.com/users/Jaykah/orgs", "repos_url": "https://api.github.com/users/Jaykah/repos", "events_url": "https://api.github.com/users/Jaykah/events{/privacy}", "received_events_url": "https://api.github.com/users/Jaykah/received_events", "type": "User", "site_admin": false}, "created_at": "2015-08-27T16:40:28Z", "updated_at": "2015-08-27T16:40:28Z", "author_association": "CONTRIBUTOR", "body": "@clizzin @igor47 Just wanted to bump this, since it is a one-line change that, if merged, would make our lives much easier :) There's not much to review either...\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/135487743/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/135491445", "html_url": "https://github.com/airbnb/synapse/pull/100#issuecomment-135491445", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/100", "id": 135491445, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2015-08-27T16:53:04Z", "updated_at": "2015-08-27T16:53:04Z", "author_association": "COLLABORATOR", "body": "ah sorry about the delay; this could use a rebase.\n\nalso, we handle this problem for non-default servers with a `server_options` argument, which can cover all of the use cases you introduce plus any other arbitrary ones. maybe this PR should also just include a `server_options` argument for the backup servers section instead?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/135491445/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/135524564", "html_url": "https://github.com/airbnb/synapse/pull/100#issuecomment-135524564", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/100", "id": 135524564, "user": {"login": "Jaykah", "id": 5440172, "avatar_url": "https://avatars3.githubusercontent.com/u/5440172?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jaykah", "html_url": "https://github.com/Jaykah", "followers_url": "https://api.github.com/users/Jaykah/followers", "following_url": "https://api.github.com/users/Jaykah/following{/other_user}", "gists_url": "https://api.github.com/users/Jaykah/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jaykah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jaykah/subscriptions", "organizations_url": "https://api.github.com/users/Jaykah/orgs", "repos_url": "https://api.github.com/users/Jaykah/repos", "events_url": "https://api.github.com/users/Jaykah/events{/privacy}", "received_events_url": "https://api.github.com/users/Jaykah/received_events", "type": "User", "site_admin": false}, "created_at": "2015-08-27T19:02:53Z", "updated_at": "2015-08-27T19:02:53Z", "author_association": "CONTRIBUTOR", "body": "Rebase done.\n\nThe reason it's done without server_options is to assign \"backup\" labels to individual backup nodes instead of the whole group (if I understand your question correctly).\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/135524564/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/135538889", "html_url": "https://github.com/airbnb/synapse/pull/100#issuecomment-135538889", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/100", "id": 135538889, "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "created_at": "2015-08-27T20:10:18Z", "updated_at": "2015-08-27T20:10:18Z", "author_association": "CONTRIBUTOR", "body": "We're also adding something like this for the weight change as well in #131. Perhaps we should add something like server_options to the backend registrations themselves to allow this kind of metadata to be propagated from nerve? If we're going to do that it might make senseto keep all this frontend specific metadata in one top level key?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/135538889/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/135556220", "html_url": "https://github.com/airbnb/synapse/pull/100#issuecomment-135556220", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/100", "id": 135556220, "user": {"login": "Jaykah", "id": 5440172, "avatar_url": "https://avatars3.githubusercontent.com/u/5440172?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jaykah", "html_url": "https://github.com/Jaykah", "followers_url": "https://api.github.com/users/Jaykah/followers", "following_url": "https://api.github.com/users/Jaykah/following{/other_user}", "gists_url": "https://api.github.com/users/Jaykah/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jaykah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jaykah/subscriptions", "organizations_url": "https://api.github.com/users/Jaykah/orgs", "repos_url": "https://api.github.com/users/Jaykah/repos", "events_url": "https://api.github.com/users/Jaykah/events{/privacy}", "received_events_url": "https://api.github.com/users/Jaykah/received_events", "type": "User", "site_admin": false}, "created_at": "2015-08-27T21:12:39Z", "updated_at": "2015-08-27T21:12:39Z", "author_association": "CONTRIBUTOR", "body": "@jolynch Sure, that's a good approach for ZK-listed servers. However, this particular scenario deals with static default servers, so I don't see an overlap there.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/135556220/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/135567460", "html_url": "https://github.com/airbnb/synapse/pull/100#issuecomment-135567460", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/100", "id": 135567460, "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "created_at": "2015-08-27T22:01:20Z", "updated_at": "2015-08-27T22:01:20Z", "author_association": "CONTRIBUTOR", "body": "@Jaykah The static registrations from the default servers should (afaik) be identical to what nerve is registering as far as Synapse can tell. In BaseWatcher's set_backends method they are just merged all together.\n\nI guess what I'm saying is that we can solve both use cases with a generic \"server_options\" top level key in backend registration hashes.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/135567460/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/135575432", "html_url": "https://github.com/airbnb/synapse/pull/100#issuecomment-135575432", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/100", "id": 135575432, "user": {"login": "Jaykah", "id": 5440172, "avatar_url": "https://avatars3.githubusercontent.com/u/5440172?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jaykah", "html_url": "https://github.com/Jaykah", "followers_url": "https://api.github.com/users/Jaykah/followers", "following_url": "https://api.github.com/users/Jaykah/following{/other_user}", "gists_url": "https://api.github.com/users/Jaykah/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jaykah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jaykah/subscriptions", "organizations_url": "https://api.github.com/users/Jaykah/orgs", "repos_url": "https://api.github.com/users/Jaykah/repos", "events_url": "https://api.github.com/users/Jaykah/events{/privacy}", "received_events_url": "https://api.github.com/users/Jaykah/received_events", "type": "User", "site_admin": false}, "created_at": "2015-08-27T22:40:48Z", "updated_at": "2015-08-27T23:43:07Z", "author_association": "CONTRIBUTOR", "body": "@jolynch\n\nWhat I am referring to is the \"stub\" watcher, rather than any backend discovered via Zookeeper/Docker/etc. My use case is a server in Region A that would use backends from Region B only if all local nodes fail. Those backends are marked as \"backup\" in the Synapse config. At the same time, region B's backends are primary for their own region (so they won't be marked as \"backup\" in Nerve), and are discovered through a different path in Zookeeper.\n\nA better option would be to discover backup nodes from another Zookeeper path, but that's a different discussion (we would still need default servers if ZK fails).\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/135575432/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/135592786", "html_url": "https://github.com/airbnb/synapse/pull/100#issuecomment-135592786", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/100", "id": 135592786, "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "created_at": "2015-08-28T00:41:16Z", "updated_at": "2015-08-28T00:41:16Z", "author_association": "CONTRIBUTOR", "body": "Ah, that's good context. We're experimenting with zone failover by using multiple backends and a frontend acl. We've been relying on the implicit backend name for a bit but I opened #135 to make it explicit so you can reference backends in acls. That being said the HAProxy guys recommend combining multiple backends + acl with backups so we should probably support it. Definitely interested in coming up with a good way to do failover.\n\nI think I'm starting to see your use case, I'm just trying to find the way to address a few similar feature requests. I feel like adding a bunch of HAProxy specific keys (like httpchk) is the wrong way going forward, especially if we ever want to be able to add more outputs than HAProxy/file output. I'm not sure the right abstraction though, what do you think?\n\nAlso just FYI you can use the state cache as an additional guard (it's the only guard we use) against zookeeper flakiness. \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/135592786/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/135597685", "html_url": "https://github.com/airbnb/synapse/pull/100#issuecomment-135597685", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/100", "id": 135597685, "user": {"login": "Jaykah", "id": 5440172, "avatar_url": "https://avatars3.githubusercontent.com/u/5440172?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jaykah", "html_url": "https://github.com/Jaykah", "followers_url": "https://api.github.com/users/Jaykah/followers", "following_url": "https://api.github.com/users/Jaykah/following{/other_user}", "gists_url": "https://api.github.com/users/Jaykah/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jaykah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jaykah/subscriptions", "organizations_url": "https://api.github.com/users/Jaykah/orgs", "repos_url": "https://api.github.com/users/Jaykah/repos", "events_url": "https://api.github.com/users/Jaykah/events{/privacy}", "received_events_url": "https://api.github.com/users/Jaykah/received_events", "type": "User", "site_admin": false}, "created_at": "2015-08-28T01:24:46Z", "updated_at": "2015-08-28T20:57:41Z", "author_association": "CONTRIBUTOR", "body": "> We've been relying on the implicit backend name for a bit but I opened #135 to make it explicit so you can reference backends in acls. \n\nSo if I understand correctly, in that case we would define two (or more) backends (main and backup) in frontend's Synapse and failover to that backup using ACL? If so, that seems to solve a part of what I am trying to achieve, since your example shows ZK discovery for the backup node, which can be done from a different ZK path.\n\nAre there any limitations to such approach?\n\n> That being said the HAProxy guys recommend combining multiple backends + acl with backups so we should probably support it. \n\nThat's what I meant by\n\n`A better option would be to discover backup nodes from another Zookeeper\npath, but that's a different discussion (we would still need default\nservers if ZK fails).` \n\nHaving the backup option available on a per-node basis for stub watcher is complementary to #135 \n\n> I feel like adding a bunch of HAProxy specific keys (like httpchk) is the wrong way going forward, especially if we ever want to be able to add more outputs than HAProxy/file output. I'm not sure the right abstraction though, what do you think?\n\nSure, having more flexibility is always great, but we should not forget that even per Synapse's readme, \"The heart of synapse is actually HAProxy, a stable and proven routing component.\"\n\n> Also just FYI you can use the state cache as an additional guard (it's the only guard we use) against zookeeper flakiness.\n\nWhat cache are you referring to? We are not using Curator, if you are talking about the path cache.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/135597685/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/135956565", "html_url": "https://github.com/airbnb/synapse/issues/94#issuecomment-135956565", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/94", "id": 135956565, "user": {"login": "hankya", "id": 1751289, "avatar_url": "https://avatars2.githubusercontent.com/u/1751289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hankya", "html_url": "https://github.com/hankya", "followers_url": "https://api.github.com/users/hankya/followers", "following_url": "https://api.github.com/users/hankya/following{/other_user}", "gists_url": "https://api.github.com/users/hankya/gists{/gist_id}", "starred_url": "https://api.github.com/users/hankya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hankya/subscriptions", "organizations_url": "https://api.github.com/users/hankya/orgs", "repos_url": "https://api.github.com/users/hankya/repos", "events_url": "https://api.github.com/users/hankya/events{/privacy}", "received_events_url": "https://api.github.com/users/hankya/received_events", "type": "User", "site_admin": false}, "created_at": "2015-08-29T07:48:09Z", "updated_at": "2015-08-29T07:48:09Z", "author_association": "NONE", "body": "is this fixed? anyone?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/135956565/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/135972566", "html_url": "https://github.com/airbnb/synapse/issues/94#issuecomment-135972566", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/94", "id": 135972566, "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "created_at": "2015-08-29T11:09:33Z", "updated_at": "2015-08-29T11:09:33Z", "author_association": "CONTRIBUTOR", "body": "@hankya We haven't seen the behavior referenced in this PR but we don't use the supervisord. Have you been seeing the same issue and if so what's your setup?\n\nI did see something that I thought was like this bug when ZK was overloaded, but in that case the issue was just a large lag in event delivery. Our connection pooling fix alleviated those issues (plus a bug fix to the pooling code). While investigating the pooling bug though I setup a pretty thorough test setup where I was removing and adding nodes while messing with the network via netem and I still wasnt able to repro with Ruby 1.9 and running Synapse directly. I could try to modify that setup to get a repro of this issue if it's still impacting people.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/135972566/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/136277651", "html_url": "https://github.com/airbnb/synapse/issues/137#issuecomment-136277651", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/137", "id": 136277651, "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "created_at": "2015-08-31T06:15:50Z", "updated_at": "2015-08-31T06:15:50Z", "author_association": "CONTRIBUTOR", "body": "Thanks for the bug report. We definitely rely on nerve/zookeeper/synapse at Yelp to manage 100s of constantly changing services, and I'm fairly sure Airbnb depends on it in production as well.\n\nLet's dig into this. First off how are you starting Synapse and do you have any output or logs from the Synapse startup? I'd expect to see some stdout that might be helpful in diagnosing what's going on.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/136277651/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/136281261", "html_url": "https://github.com/airbnb/synapse/issues/137#issuecomment-136281261", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/137", "id": 136281261, "user": {"login": "hankya", "id": 1751289, "avatar_url": "https://avatars2.githubusercontent.com/u/1751289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hankya", "html_url": "https://github.com/hankya", "followers_url": "https://api.github.com/users/hankya/followers", "following_url": "https://api.github.com/users/hankya/following{/other_user}", "gists_url": "https://api.github.com/users/hankya/gists{/gist_id}", "starred_url": "https://api.github.com/users/hankya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hankya/subscriptions", "organizations_url": "https://api.github.com/users/hankya/orgs", "repos_url": "https://api.github.com/users/hankya/repos", "events_url": "https://api.github.com/users/hankya/events{/privacy}", "received_events_url": "https://api.github.com/users/hankya/received_events", "type": "User", "site_admin": false}, "created_at": "2015-08-31T06:47:29Z", "updated_at": "2015-08-31T06:47:29Z", "author_association": "NONE", "body": "thanks very much for the response, it looks like this issue is a duplication of #134,  the ruby version i am using is ruby 2.1.2p95 (2014-05-08) [x86_64-linux-gnu], synapse hung when unsubscribing from zookeeper, is this a known issue that synapse doesn't work with this ruby version?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/136281261/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/136297322", "html_url": "https://github.com/airbnb/synapse/issues/134#issuecomment-136297322", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/134", "id": 136297322, "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "created_at": "2015-08-31T08:15:51Z", "updated_at": "2015-08-31T08:15:51Z", "author_association": "CONTRIBUTOR", "body": "It appears that the zk library just started running tests on 2.2, and they are currently failing. I am going to close this until the underlying zookeeper library at least claims to work on 2.2.\n\nFor now I encourage you to use an older ruby version, and when zk supports 2.2. please do open another issue or comment on this one and I'll take another look.\n\nhttps://travis-ci.org/zk-ruby/zk\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/136297322/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/136297568", "html_url": "https://github.com/airbnb/synapse/issues/137#issuecomment-136297568", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/137", "id": 136297568, "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "created_at": "2015-08-31T08:17:33Z", "updated_at": "2015-08-31T08:17:33Z", "author_association": "CONTRIBUTOR", "body": "I thought that it would work with 2.1, but that may be enough information for me to reproduce tomorrow. If you could paste the stdout you're seeing that would probably help save me some time debugging it. We actually run 1.9 in production, so it might just be 2.X issues.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/136297568/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/136421890", "html_url": "https://github.com/airbnb/synapse/issues/94#issuecomment-136421890", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/94", "id": 136421890, "user": {"login": "Jaykah", "id": 5440172, "avatar_url": "https://avatars3.githubusercontent.com/u/5440172?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jaykah", "html_url": "https://github.com/Jaykah", "followers_url": "https://api.github.com/users/Jaykah/followers", "following_url": "https://api.github.com/users/Jaykah/following{/other_user}", "gists_url": "https://api.github.com/users/Jaykah/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jaykah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jaykah/subscriptions", "organizations_url": "https://api.github.com/users/Jaykah/orgs", "repos_url": "https://api.github.com/users/Jaykah/repos", "events_url": "https://api.github.com/users/Jaykah/events{/privacy}", "received_events_url": "https://api.github.com/users/Jaykah/received_events", "type": "User", "site_admin": false}, "created_at": "2015-08-31T16:31:36Z", "updated_at": "2015-08-31T16:31:36Z", "author_association": "CONTRIBUTOR", "body": "@jolynch This issue is related to the fact that (AFAIK) Synapse does reloads by forking the process and then executing the reload. The problem with Supervisord is that it keeps attached to STDOUT, running the process in the foreground, thus messing with the ability to fork&reload. That's a pity, because Supervisord is a really great tool for process monitoring.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/136421890/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/136429076", "html_url": "https://github.com/airbnb/synapse/issues/94#issuecomment-136429076", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/94", "id": 136429076, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2015-08-31T17:02:42Z", "updated_at": "2015-08-31T17:02:42Z", "author_association": "COLLABORATOR", "body": "i don't think that makes sense. we run synapse via runit, which also keeps the process attached in the foreground, and we have no problems. also, i'm not sure what you're referring to as far as reloads via forking. our usual model is to exit the process and allow the process supervisor to restart it.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/136429076/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/136440887", "html_url": "https://github.com/airbnb/synapse/issues/127#issuecomment-136440887", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/127", "id": 136440887, "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "created_at": "2015-08-31T17:43:00Z", "updated_at": "2015-08-31T17:43:00Z", "author_association": "CONTRIBUTOR", "body": "@asiragusa They are shuffled because of long lived clients and round robin load balancing. Imagine that Synapse restarts haproxy, and then all your clients reconnect to the same host (because round robin), this could be pretty bad for something like HAProxy.\n\nLike I mention in the linked PR I am not against adding the capability for backends to be shuffled or not. Happy to accept a PR that adds that functionality.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/136440887/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/136441619", "html_url": "https://github.com/airbnb/synapse/issues/94#issuecomment-136441619", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/94", "id": 136441619, "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "created_at": "2015-08-31T17:46:08Z", "updated_at": "2015-08-31T17:46:08Z", "author_association": "CONTRIBUTOR", "body": "I'm also confused by the forking issue. We use upstart and just have it kill the old process before starting the new one. For nerve we run two copies during a flip to achieve hitless nerve reloads. @Jaykah why do you need to fork Synapse to reload?\n\nI think that @hankya is having a separate issue, which I'm following up on in #137. \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/136441619/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/136472682", "html_url": "https://github.com/airbnb/synapse/issues/94#issuecomment-136472682", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/94", "id": 136472682, "user": {"login": "Jaykah", "id": 5440172, "avatar_url": "https://avatars3.githubusercontent.com/u/5440172?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jaykah", "html_url": "https://github.com/Jaykah", "followers_url": "https://api.github.com/users/Jaykah/followers", "following_url": "https://api.github.com/users/Jaykah/following{/other_user}", "gists_url": "https://api.github.com/users/Jaykah/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jaykah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jaykah/subscriptions", "organizations_url": "https://api.github.com/users/Jaykah/orgs", "repos_url": "https://api.github.com/users/Jaykah/repos", "events_url": "https://api.github.com/users/Jaykah/events{/privacy}", "received_events_url": "https://api.github.com/users/Jaykah/received_events", "type": "User", "site_admin": false}, "created_at": "2015-08-31T19:15:37Z", "updated_at": "2015-08-31T19:15:37Z", "author_association": "CONTRIBUTOR", "body": "@jolynch The first six comments of this ticket explain my reasoning. Basically what happens is if we have only one instance of Synapse running it does not write modified Haproxy configs for node removal, if we run two it does remove nodes, but does not add new ones. And if we run is as numprocs=4 (basically forking it into 4 processes) it _seems to_ work fine, but I've still had some cases with reloads not happening (maybe once every 100 reloads or so as opposed to 100% of the time without forking). Unfortunately, this is something that I wasn't yet able to figure out...\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/136472682/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/136487058", "html_url": "https://github.com/airbnb/synapse/issues/94#issuecomment-136487058", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/94", "id": 136487058, "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "created_at": "2015-08-31T20:16:32Z", "updated_at": "2015-08-31T20:16:32Z", "author_association": "CONTRIBUTOR", "body": "@Jaykah I think the relevant context here is that you are using ruby 2.1.2, same as @hankya over in #137. I will focus my efforts on that ruby version. It's also been reported that 2.2 doesn't work (although ruby-zk doesn't work with 2.2 so ...).\n\nFor context, I am unable to reproduce this at all in our production environment or in my own testing using ruby 1.9, so if you can downgrade, that might be a good short term solution.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/136487058/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/136488312", "html_url": "https://github.com/airbnb/synapse/issues/94#issuecomment-136488312", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/94", "id": 136488312, "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "created_at": "2015-08-31T20:21:46Z", "updated_at": "2015-08-31T20:21:46Z", "author_association": "CONTRIBUTOR", "body": "@igor47 I thought you had mentioned airbnb moving to ruby 2.X soon, if you guys get around to debugging this before me that is also cool heh :-)\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/136488312/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/136512677", "html_url": "https://github.com/airbnb/synapse/issues/94#issuecomment-136512677", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/94", "id": 136512677, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "created_at": "2015-08-31T21:59:12Z", "updated_at": "2015-08-31T21:59:12Z", "author_association": "COLLABORATOR", "body": "fyi @rickypai \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/136512677/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/136513588", "html_url": "https://github.com/airbnb/synapse/issues/137#issuecomment-136513588", "issue_url": "https://api.github.com/repos/airbnb/synapse/issues/137", "id": 136513588, "user": {"login": "drewcsillag", "id": 5121910, "avatar_url": "https://avatars1.githubusercontent.com/u/5121910?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drewcsillag", "html_url": "https://github.com/drewcsillag", "followers_url": "https://api.github.com/users/drewcsillag/followers", "following_url": "https://api.github.com/users/drewcsillag/following{/other_user}", "gists_url": "https://api.github.com/users/drewcsillag/gists{/gist_id}", "starred_url": "https://api.github.com/users/drewcsillag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drewcsillag/subscriptions", "organizations_url": "https://api.github.com/users/drewcsillag/orgs", "repos_url": "https://api.github.com/users/drewcsillag/repos", "events_url": "https://api.github.com/users/drewcsillag/events{/privacy}", "received_events_url": "https://api.github.com/users/drewcsillag/received_events", "type": "User", "site_admin": false}, "created_at": "2015-08-31T22:04:35Z", "updated_at": "2015-08-31T22:04:35Z", "author_association": "NONE", "body": "Can confirm that synapse works with ruby 1.9.3 and doesn't with 2.x\n\nPossibly relevant datapoint: if I set DEBUG to true on 2.x.x (to see _all_ the log messages), I don't get the \"setting watch at....\" log message until after the first new nerve is started.....\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/issues/comments/136513588/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}], "commit_comments": [{"url": "https://api.github.com/repos/airbnb/synapse/comments/3026562", "html_url": "https://github.com/airbnb/synapse/commit/557cf9dff9218f6c3ae9f10d9557e41128dc0334#commitcomment-3026562", "id": 3026562, "user": {"login": "jtai", "id": 696036, "avatar_url": "https://avatars2.githubusercontent.com/u/696036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jtai", "html_url": "https://github.com/jtai", "followers_url": "https://api.github.com/users/jtai/followers", "following_url": "https://api.github.com/users/jtai/following{/other_user}", "gists_url": "https://api.github.com/users/jtai/gists{/gist_id}", "starred_url": "https://api.github.com/users/jtai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jtai/subscriptions", "organizations_url": "https://api.github.com/users/jtai/orgs", "repos_url": "https://api.github.com/users/jtai/repos", "events_url": "https://api.github.com/users/jtai/events{/privacy}", "received_events_url": "https://api.github.com/users/jtai/received_events", "type": "User", "site_admin": false}, "position": 41, "line": 54, "path": "lib/synapse/service_watcher/zookeeper.rb", "commit_id": "557cf9dff9218f6c3ae9f10d9557e41128dc0334", "created_at": "2013-04-17T01:13:50Z", "updated_at": "2013-04-17T01:13:50Z", "author_association": "CONTRIBUTOR", "body": "The service name would be helpful here so we can filter on service and aggregate on backend.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/comments/3026562/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/comments/3453011", "html_url": "https://github.com/airbnb/synapse/commit/971452a65bdf380422eee34fe399f9baae03327f#commitcomment-3453011", "id": 3453011, "user": {"login": "schleyfox", "id": 4259, "avatar_url": "https://avatars0.githubusercontent.com/u/4259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/schleyfox", "html_url": "https://github.com/schleyfox", "followers_url": "https://api.github.com/users/schleyfox/followers", "following_url": "https://api.github.com/users/schleyfox/following{/other_user}", "gists_url": "https://api.github.com/users/schleyfox/gists{/gist_id}", "starred_url": "https://api.github.com/users/schleyfox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schleyfox/subscriptions", "organizations_url": "https://api.github.com/users/schleyfox/orgs", "repos_url": "https://api.github.com/users/schleyfox/repos", "events_url": "https://api.github.com/users/schleyfox/events{/privacy}", "received_events_url": "https://api.github.com/users/schleyfox/received_events", "type": "User", "site_admin": false}, "position": null, "line": null, "path": null, "commit_id": "971452a65bdf380422eee34fe399f9baae03327f", "created_at": "2013-06-18T22:23:14Z", "updated_at": "2013-06-18T22:23:14Z", "author_association": "OWNER", "body": "LGTM\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/comments/3453011/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/comments/4509510", "html_url": "https://github.com/airbnb/synapse/commit/7e237476ecb5f826f8607088060d7247e08f1e0a#commitcomment-4509510", "id": 4509510, "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "position": 504, "line": 585, "path": "lib/synapse/haproxy.rb", "commit_id": "7e237476ecb5f826f8607088060d7247e08f1e0a", "created_at": "2013-11-05T04:20:28Z", "updated_at": "2013-11-05T04:20:28Z", "author_association": "NONE", "body": "is there any advantage here over line.strip.start_with?(fieldname) ?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/comments/4509510/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/comments/4509623", "html_url": "https://github.com/airbnb/synapse/commit/7e237476ecb5f826f8607088060d7247e08f1e0a#commitcomment-4509623", "id": 4509623, "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "position": 506, "line": 587, "path": "lib/synapse/haproxy.rb", "commit_id": "7e237476ecb5f826f8607088060d7247e08f1e0a", "created_at": "2013-11-05T04:40:18Z", "updated_at": "2013-11-05T04:40:18Z", "author_association": "NONE", "body": "log a warning if we encounter a line that doesn't seem to belong?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/comments/4509623/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/comments/4509642", "html_url": "https://github.com/airbnb/synapse/commit/7e237476ecb5f826f8607088060d7247e08f1e0a#commitcomment-4509642", "id": 4509642, "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "position": 519, "line": 606, "path": "lib/synapse/haproxy.rb", "commit_id": "7e237476ecb5f826f8607088060d7247e08f1e0a", "created_at": "2013-11-05T04:43:25Z", "updated_at": "2013-11-05T04:43:25Z", "author_association": "NONE", "body": "starts to feel like a DRY violation.\n\ndef check_directives(array_of_lines, directive_section)\n  array_of_lines.each do |line|\n    section_fields[directive_section].each do |fieldname|\n...etc...\nend\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/comments/4509642/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/comments/4509660", "html_url": "https://github.com/airbnb/synapse/commit/7e237476ecb5f826f8607088060d7247e08f1e0a#commitcomment-4509660", "id": 4509660, "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "position": null, "line": null, "path": null, "commit_id": "7e237476ecb5f826f8607088060d7247e08f1e0a", "created_at": "2013-11-05T04:46:50Z", "updated_at": "2013-11-05T04:46:50Z", "author_association": "NONE", "body": "Appears to do what it says on the tin.  But:\n- The match section feels a bit fragile: is haproxy's config parser whitespace-sensitive?  case-sensitive?\n- Iterating over the whole long list of valid config directives each time we parse a line feels janky.  Maybe tokenize the line and drill down over an array of arrays?  e.g.:\n\nlisten_directives = {\n  'acl' => nil,\n  'option' => {\n    'httpchk' => nil,\n    'httplog' => nil,\n  }\n}\n\n...then walk down the list of tokens until you either hit a nil value in the array (hooray, left-hand match, everything else is an argument) or an unknown word (boo, return error)?  (Possibly I'm overthinking this.)\n\nAlso, this puts the onus on you, the maintainer, to keep the list of allowed service directives for each section up-to-date with haproxy itself.  Previously we'd just handed the user a sufficient amount of rope and assumed they'd read the docs.  Your call as to which approach you think is best, but probably there should be some sort of --no-really-trust-me flag to turn off the validation in case someone wants to play with some hypothetical haproxy 1.6?  And maybe it would just make more sense to pass the whole thing off to 'haproxy -c testconfig.cfg' and kick up an error if haproxy complains?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/comments/4509660/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/comments/4597121", "html_url": "https://github.com/airbnb/synapse/commit/9127f69e79cbe0c4f797188bf42d432eae92387d#commitcomment-4597121", "id": 4597121, "user": {"login": "matschaffer", "id": 690, "avatar_url": "https://avatars2.githubusercontent.com/u/690?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matschaffer", "html_url": "https://github.com/matschaffer", "followers_url": "https://api.github.com/users/matschaffer/followers", "following_url": "https://api.github.com/users/matschaffer/following{/other_user}", "gists_url": "https://api.github.com/users/matschaffer/gists{/gist_id}", "starred_url": "https://api.github.com/users/matschaffer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matschaffer/subscriptions", "organizations_url": "https://api.github.com/users/matschaffer/orgs", "repos_url": "https://api.github.com/users/matschaffer/repos", "events_url": "https://api.github.com/users/matschaffer/events{/privacy}", "received_events_url": "https://api.github.com/users/matschaffer/received_events", "type": "User", "site_admin": false}, "position": null, "line": null, "path": null, "commit_id": "9127f69e79cbe0c4f797188bf42d432eae92387d", "created_at": "2013-11-14T07:01:45Z", "updated_at": "2013-11-14T07:01:45Z", "author_association": "NONE", "body": "Just to make sure I'm reading this right; Does HAProxy bounce whenever you add a new service? Or even when a new node is added for an existing service?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/comments/4597121/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/comments/4602524", "html_url": "https://github.com/airbnb/synapse/commit/9127f69e79cbe0c4f797188bf42d432eae92387d#commitcomment-4602524", "id": 4602524, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "position": null, "line": null, "path": null, "commit_id": "9127f69e79cbe0c4f797188bf42d432eae92387d", "created_at": "2013-11-14T17:22:35Z", "updated_at": "2013-11-14T17:22:35Z", "author_association": "COLLABORATOR", "body": "unfortunately, we have to bounce haproxy to add new backends for an existing service (if we've never seen the backend before). if a backend that previously existed disappears, it's placed in maintenance mode via the haproxy stats socket, and later we can re-enable it if it comes back.\n\nbut we win a lot by avoiding haproxy bounces during the worst times (deploys, outages). in those cases, we can usually keep the same haproxy process throughout unless we start spinning up new backends. we've seen haproxy instances last for days or weeks in our environment.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/comments/4602524/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/comments/4602538", "html_url": "https://github.com/airbnb/synapse/commit/9127f69e79cbe0c4f797188bf42d432eae92387d#commitcomment-4602538", "id": 4602538, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "position": 46, "line": 99, "path": "lib/synapse/haproxy.rb", "commit_id": "9127f69e79cbe0c4f797188bf42d432eae92387d", "created_at": "2013-11-14T17:23:58Z", "updated_at": "2013-11-14T17:23:58Z", "author_association": "COLLABORATOR", "body": "i should update the comments and get my terminology straight. synapse watches services, and services have backends. a backend is identified to haproxy via a `server` line, but i should stop using the word `server` otherwise.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/comments/4602538/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/comments/4603946", "html_url": "https://github.com/airbnb/synapse/commit/9127f69e79cbe0c4f797188bf42d432eae92387d#commitcomment-4603946", "id": 4603946, "user": {"login": "matschaffer", "id": 690, "avatar_url": "https://avatars2.githubusercontent.com/u/690?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matschaffer", "html_url": "https://github.com/matschaffer", "followers_url": "https://api.github.com/users/matschaffer/followers", "following_url": "https://api.github.com/users/matschaffer/following{/other_user}", "gists_url": "https://api.github.com/users/matschaffer/gists{/gist_id}", "starred_url": "https://api.github.com/users/matschaffer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matschaffer/subscriptions", "organizations_url": "https://api.github.com/users/matschaffer/orgs", "repos_url": "https://api.github.com/users/matschaffer/repos", "events_url": "https://api.github.com/users/matschaffer/events{/privacy}", "received_events_url": "https://api.github.com/users/matschaffer/received_events", "type": "User", "site_admin": false}, "position": 46, "line": 99, "path": "lib/synapse/haproxy.rb", "commit_id": "9127f69e79cbe0c4f797188bf42d432eae92387d", "created_at": "2013-11-14T19:32:44Z", "updated_at": "2013-11-14T19:32:44Z", "author_association": "NONE", "body": "So am I right in assuming that (for example) auto scaling a service behind\nhaproxy would require restarts?\n\nOn Thursday, November 14, 2013, Igor Serebryany wrote:\n\n> i should update the comments and get my terminology straight. synapse\n> watches services, and services have backends. a backend is identified to\n> haproxy via a server line, but i should stop using the word serverotherwise.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/airbnb/synapse/commit/9127f69e79cbe0c4f797188bf42d432eae92387d#commitcomment-4602538\n> .\n## \n\n-Mat\n\nabout.me/matschaffer\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/comments/4603946/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/comments/4605208", "html_url": "https://github.com/airbnb/synapse/commit/9127f69e79cbe0c4f797188bf42d432eae92387d#commitcomment-4605208", "id": 4605208, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "position": 46, "line": 99, "path": "lib/synapse/haproxy.rb", "commit_id": "9127f69e79cbe0c4f797188bf42d432eae92387d", "created_at": "2013-11-14T21:29:07Z", "updated_at": "2013-11-14T21:29:07Z", "author_association": "COLLABORATOR", "body": "yes. but haproxy restarts are not as scary as they sound. existing connections are unaffected -- the previous haproxy process is left running until they close. \n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/comments/4605208/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/comments/4609207", "html_url": "https://github.com/airbnb/synapse/commit/9127f69e79cbe0c4f797188bf42d432eae92387d#commitcomment-4609207", "id": 4609207, "user": {"login": "matschaffer", "id": 690, "avatar_url": "https://avatars2.githubusercontent.com/u/690?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matschaffer", "html_url": "https://github.com/matschaffer", "followers_url": "https://api.github.com/users/matschaffer/followers", "following_url": "https://api.github.com/users/matschaffer/following{/other_user}", "gists_url": "https://api.github.com/users/matschaffer/gists{/gist_id}", "starred_url": "https://api.github.com/users/matschaffer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matschaffer/subscriptions", "organizations_url": "https://api.github.com/users/matschaffer/orgs", "repos_url": "https://api.github.com/users/matschaffer/repos", "events_url": "https://api.github.com/users/matschaffer/events{/privacy}", "received_events_url": "https://api.github.com/users/matschaffer/received_events", "type": "User", "site_admin": false}, "position": 46, "line": 99, "path": "lib/synapse/haproxy.rb", "commit_id": "9127f69e79cbe0c4f797188bf42d432eae92387d", "created_at": "2013-11-15T03:13:05Z", "updated_at": "2013-11-15T03:13:05Z", "author_association": "NONE", "body": "That's encouraging. Is there any period between processes where you'd have\nnew requests or connections get rejected?\n\nOn Thursday, November 14, 2013, Igor Serebryany wrote:\n\n> yes. but haproxy restarts are not as scary as they sound. existing\n> connections are unaffected -- the previous haproxy process is left running\n> until they close.\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/airbnb/synapse/commit/9127f69e79cbe0c4f797188bf42d432eae92387d#commitcomment-4605208\n> .\n## \n\n-Mat\n\nabout.me/matschaffer\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/comments/4609207/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/comments/4616189", "html_url": "https://github.com/airbnb/synapse/commit/9127f69e79cbe0c4f797188bf42d432eae92387d#commitcomment-4616189", "id": 4616189, "user": {"login": "martinrhoads", "id": 52137, "avatar_url": "https://avatars2.githubusercontent.com/u/52137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martinrhoads", "html_url": "https://github.com/martinrhoads", "followers_url": "https://api.github.com/users/martinrhoads/followers", "following_url": "https://api.github.com/users/martinrhoads/following{/other_user}", "gists_url": "https://api.github.com/users/martinrhoads/gists{/gist_id}", "starred_url": "https://api.github.com/users/martinrhoads/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martinrhoads/subscriptions", "organizations_url": "https://api.github.com/users/martinrhoads/orgs", "repos_url": "https://api.github.com/users/martinrhoads/repos", "events_url": "https://api.github.com/users/martinrhoads/events{/privacy}", "received_events_url": "https://api.github.com/users/martinrhoads/received_events", "type": "User", "site_admin": false}, "position": 46, "line": 99, "path": "lib/synapse/haproxy.rb", "commit_id": "9127f69e79cbe0c4f797188bf42d432eae92387d", "created_at": "2013-11-15T19:50:24Z", "updated_at": "2013-11-15T19:50:24Z", "author_association": "CONTRIBUTOR", "body": "no, this should not be the case\n\nOn Thu, Nov 14, 2013 at 7:13 PM, Mat Schaffer notifications@github.comwrote:\n\n> That's encouraging. Is there any period between processes where you'd have\n> new requests or connections get rejected?\n> \n> On Thursday, November 14, 2013, Igor Serebryany wrote:\n> \n> > yes. but haproxy restarts are not as scary as they sound. existing\n> > connections are unaffected -- the previous haproxy process is left\n> > running\n> > until they close.\n> > \n> > \u2014\n> > Reply to this email directly or view it on GitHub<\n> > https://github.com/airbnb/synapse/commit/9127f69e79cbe0c4f797188bf42d432eae92387d#commitcomment-4605208>\n> > \n> > .\n> ## \n> \n> -Mat\n> \n> about.me/matschaffer\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/airbnb/synapse/commit/9127f69e79cbe0c4f797188bf42d432eae92387d#commitcomment-4609207\n> .\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/comments/4616189/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/comments/4624060", "html_url": "https://github.com/airbnb/synapse/commit/9127f69e79cbe0c4f797188bf42d432eae92387d#commitcomment-4624060", "id": 4624060, "user": {"login": "matschaffer", "id": 690, "avatar_url": "https://avatars2.githubusercontent.com/u/690?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matschaffer", "html_url": "https://github.com/matschaffer", "followers_url": "https://api.github.com/users/matschaffer/followers", "following_url": "https://api.github.com/users/matschaffer/following{/other_user}", "gists_url": "https://api.github.com/users/matschaffer/gists{/gist_id}", "starred_url": "https://api.github.com/users/matschaffer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matschaffer/subscriptions", "organizations_url": "https://api.github.com/users/matschaffer/orgs", "repos_url": "https://api.github.com/users/matschaffer/repos", "events_url": "https://api.github.com/users/matschaffer/events{/privacy}", "received_events_url": "https://api.github.com/users/matschaffer/received_events", "type": "User", "site_admin": false}, "position": 46, "line": 99, "path": "lib/synapse/haproxy.rb", "commit_id": "9127f69e79cbe0c4f797188bf42d432eae92387d", "created_at": "2013-11-17T23:15:17Z", "updated_at": "2013-11-17T23:15:17Z", "author_association": "NONE", "body": "Sweet! Well done then. Look forward to experimenting with this :)\n\n-Mat\n\nabout.me/matschaffer\n\nOn Fri, Nov 15, 2013 at 11:50 AM, Martin Rhoads notifications@github.comwrote:\n\n> no, this should not be the case\n> \n> On Thu, Nov 14, 2013 at 7:13 PM, Mat Schaffer notifications@github.comwrote:\n> \n> > That's encouraging. Is there any period between processes where you'd\n> > have\n> > new requests or connections get rejected?\n> > \n> > On Thursday, November 14, 2013, Igor Serebryany wrote:\n> > \n> > > yes. but haproxy restarts are not as scary as they sound. existing\n> > > connections are unaffected -- the previous haproxy process is left\n> > > running\n> > > until they close.\n> > > \n> > > \u2014\n> > > Reply to this email directly or view it on GitHub<\n> > \n> > https://github.com/airbnb/synapse/commit/9127f69e79cbe0c4f797188bf42d432eae92387d#commitcomment-4605208>\n> > \n> > > .\n> > ## \n> > \n> > -Mat\n> > \n> > about.me/matschaffer\n> > \n> > \u2014\n> > Reply to this email directly or view it on GitHub<\n> > https://github.com/airbnb/synapse/commit/9127f69e79cbe0c4f797188bf42d432eae92387d#commitcomment-4609207>\n> > \n> > .\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/airbnb/synapse/commit/9127f69e79cbe0c4f797188bf42d432eae92387d#commitcomment-4616189\n> .\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/comments/4624060/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/comments/5335378", "html_url": "https://github.com/airbnb/synapse/commit/cf3b0123110e02897b1f6b69ad0d3a61fabfd7e6#commitcomment-5335378", "id": 5335378, "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "position": 5, "line": 43, "path": "bin/synapse", "commit_id": "cf3b0123110e02897b1f6b69ad0d3a61fabfd7e6", "created_at": "2014-02-11T06:32:22Z", "updated_at": "2014-02-11T06:32:22Z", "author_association": "NONE", "body": "Okay, I'm willing to be stupid in public: I can't find this method in the 1.8.7, 1.9.3, 2.0.0 or 2.1.0 versions of the stdlib yaml library, and this raises an undefined method error.\n\nbin/synapse:43:in `parseconfig': undefined method`to_ruby' for #Hash:0x00000001cdb760 (NoMethodError)\n        from bin/synapse:46:in `<main>'\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/comments/5335378/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/comments/5344069", "html_url": "https://github.com/airbnb/synapse/commit/cf3b0123110e02897b1f6b69ad0d3a61fabfd7e6#commitcomment-5344069", "id": 5344069, "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "position": 5, "line": 43, "path": "bin/synapse", "commit_id": "cf3b0123110e02897b1f6b69ad0d3a61fabfd7e6", "created_at": "2014-02-11T20:06:34Z", "updated_at": "2014-02-11T20:06:34Z", "author_association": "COLLABORATOR", "body": "bah, the one with pie on his face is me. https://github.com/airbnb/synapse/pull/47\n\nthanks for drawing attention!\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/comments/5344069/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/comments/5344076", "html_url": "https://github.com/airbnb/synapse/commit/ef0be0f808e17048cda4a9bb346690855b296bd9#commitcomment-5344076", "id": 5344076, "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "position": null, "line": null, "path": null, "commit_id": "ef0be0f808e17048cda4a9bb346690855b296bd9", "created_at": "2014-02-11T20:07:12Z", "updated_at": "2014-02-11T20:07:12Z", "author_association": "NONE", "body": "D'oh.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/comments/5344076/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/comments/6493187", "html_url": "https://github.com/airbnb/synapse/commit/a0f40d337c87ccac90a3aac00b5c6f5e2bf4c1ac#commitcomment-6493187", "id": 6493187, "user": {"login": "wmoss", "id": 187472, "avatar_url": "https://avatars3.githubusercontent.com/u/187472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wmoss", "html_url": "https://github.com/wmoss", "followers_url": "https://api.github.com/users/wmoss/followers", "following_url": "https://api.github.com/users/wmoss/following{/other_user}", "gists_url": "https://api.github.com/users/wmoss/gists{/gist_id}", "starred_url": "https://api.github.com/users/wmoss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wmoss/subscriptions", "organizations_url": "https://api.github.com/users/wmoss/orgs", "repos_url": "https://api.github.com/users/wmoss/repos", "events_url": "https://api.github.com/users/wmoss/events{/privacy}", "received_events_url": "https://api.github.com/users/wmoss/received_events", "type": "User", "site_admin": false}, "position": null, "line": null, "path": null, "commit_id": "a0f40d337c87ccac90a3aac00b5c6f5e2bf4c1ac", "created_at": "2014-05-29T18:53:53Z", "updated_at": "2014-05-29T18:53:53Z", "author_association": "NONE", "body": "Do we want to add this if it evaluated to `false` but is not `nil`?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/comments/6493187/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/comments/6493219", "html_url": "https://github.com/airbnb/synapse/commit/a0f40d337c87ccac90a3aac00b5c6f5e2bf4c1ac#commitcomment-6493219", "id": 6493219, "user": {"login": "brndnmtthws", "id": 3129093, "avatar_url": "https://avatars1.githubusercontent.com/u/3129093?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brndnmtthws", "html_url": "https://github.com/brndnmtthws", "followers_url": "https://api.github.com/users/brndnmtthws/followers", "following_url": "https://api.github.com/users/brndnmtthws/following{/other_user}", "gists_url": "https://api.github.com/users/brndnmtthws/gists{/gist_id}", "starred_url": "https://api.github.com/users/brndnmtthws/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brndnmtthws/subscriptions", "organizations_url": "https://api.github.com/users/brndnmtthws/orgs", "repos_url": "https://api.github.com/users/brndnmtthws/repos", "events_url": "https://api.github.com/users/brndnmtthws/events{/privacy}", "received_events_url": "https://api.github.com/users/brndnmtthws/received_events", "type": "User", "site_admin": false}, "position": null, "line": null, "path": null, "commit_id": "a0f40d337c87ccac90a3aac00b5c6f5e2bf4c1ac", "created_at": "2014-05-29T18:55:36Z", "updated_at": "2014-05-29T18:55:36Z", "author_association": "CONTRIBUTOR", "body": "My Ruby knowledge is not sufficient to answer that question.\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/comments/6493219/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/comments/6493318", "html_url": "https://github.com/airbnb/synapse/commit/a0f40d337c87ccac90a3aac00b5c6f5e2bf4c1ac#commitcomment-6493318", "id": 6493318, "user": {"login": "wmoss", "id": 187472, "avatar_url": "https://avatars3.githubusercontent.com/u/187472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wmoss", "html_url": "https://github.com/wmoss", "followers_url": "https://api.github.com/users/wmoss/followers", "following_url": "https://api.github.com/users/wmoss/following{/other_user}", "gists_url": "https://api.github.com/users/wmoss/gists{/gist_id}", "starred_url": "https://api.github.com/users/wmoss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wmoss/subscriptions", "organizations_url": "https://api.github.com/users/wmoss/orgs", "repos_url": "https://api.github.com/users/wmoss/repos", "events_url": "https://api.github.com/users/wmoss/events{/privacy}", "received_events_url": "https://api.github.com/users/wmoss/received_events", "type": "User", "site_admin": false}, "position": null, "line": null, "path": null, "commit_id": "a0f40d337c87ccac90a3aac00b5c6f5e2bf4c1ac", "created_at": "2014-05-29T19:02:33Z", "updated_at": "2014-05-29T19:02:33Z", "author_association": "NONE", "body": "What was the original problem this was trying to solve?\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/comments/6493318/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/comments/6493400", "html_url": "https://github.com/airbnb/synapse/commit/a0f40d337c87ccac90a3aac00b5c6f5e2bf4c1ac#commitcomment-6493400", "id": 6493400, "user": {"login": "brndnmtthws", "id": 3129093, "avatar_url": "https://avatars1.githubusercontent.com/u/3129093?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brndnmtthws", "html_url": "https://github.com/brndnmtthws", "followers_url": "https://api.github.com/users/brndnmtthws/followers", "following_url": "https://api.github.com/users/brndnmtthws/following{/other_user}", "gists_url": "https://api.github.com/users/brndnmtthws/gists{/gist_id}", "starred_url": "https://api.github.com/users/brndnmtthws/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brndnmtthws/subscriptions", "organizations_url": "https://api.github.com/users/brndnmtthws/orgs", "repos_url": "https://api.github.com/users/brndnmtthws/repos", "events_url": "https://api.github.com/users/brndnmtthws/events{/privacy}", "received_events_url": "https://api.github.com/users/brndnmtthws/received_events", "type": "User", "site_admin": false}, "position": null, "line": null, "path": null, "commit_id": "a0f40d337c87ccac90a3aac00b5c6f5e2bf4c1ac", "created_at": "2014-05-29T19:09:14Z", "updated_at": "2014-05-29T19:09:14Z", "author_association": "CONTRIBUTOR", "body": "Nelson found a bug where the znodes occasionally disappeared because we\nnever handled session expiry.\nOn May 29, 2014 12:02 PM, \"Will Moss\" notifications@github.com wrote:\n\n> What was the original problem this was trying to solve?\n> \n> \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/airbnb/synapse/commit/a0f40d337c87ccac90a3aac00b5c6f5e2bf4c1ac#commitcomment-6493318\n> .\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/comments/6493400/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/comments/6496477", "html_url": "https://github.com/airbnb/synapse/commit/a0f40d337c87ccac90a3aac00b5c6f5e2bf4c1ac#commitcomment-6496477", "id": 6496477, "user": {"login": "brndnmtthws", "id": 3129093, "avatar_url": "https://avatars1.githubusercontent.com/u/3129093?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brndnmtthws", "html_url": "https://github.com/brndnmtthws", "followers_url": "https://api.github.com/users/brndnmtthws/followers", "following_url": "https://api.github.com/users/brndnmtthws/following{/other_user}", "gists_url": "https://api.github.com/users/brndnmtthws/gists{/gist_id}", "starred_url": "https://api.github.com/users/brndnmtthws/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brndnmtthws/subscriptions", "organizations_url": "https://api.github.com/users/brndnmtthws/orgs", "repos_url": "https://api.github.com/users/brndnmtthws/repos", "events_url": "https://api.github.com/users/brndnmtthws/events{/privacy}", "received_events_url": "https://api.github.com/users/brndnmtthws/received_events", "type": "User", "site_admin": false}, "position": null, "line": null, "path": null, "commit_id": "a0f40d337c87ccac90a3aac00b5c6f5e2bf4c1ac", "created_at": "2014-05-29T23:19:13Z", "updated_at": "2014-05-29T23:19:13Z", "author_association": "CONTRIBUTOR", "body": "I just realized I responded to the wrong question.  There was a ruby syntax\nerror, which has also been fixed in master (as you can see in the diff).\n I'll drop my patch.\n\nOn Thu, May 29, 2014 at 12:09 PM, Brenden Matthews <\nbrenden.matthews@airbedandbreakfast.com> wrote:\n\n> Nelson found a bug where the znodes occasionally disappeared because we\n> never handled session expiry.\n> On May 29, 2014 12:02 PM, \"Will Moss\" notifications@github.com wrote:\n> \n> > What was the original problem this was trying to solve?\n> > \n> > \u2014\n> > Reply to this email directly or view it on GitHub\n> > https://github.com/airbnb/synapse/commit/a0f40d337c87ccac90a3aac00b5c6f5e2bf4c1ac#commitcomment-6493318\n> > .\n", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/comments/6496477/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/comments/21483273", "html_url": "https://github.com/airbnb/synapse/commit/98ec64ccdf242be5c199ac27bd2fb4a2037fc119#commitcomment-21483273", "id": 21483273, "user": {"login": "somic", "id": 16408, "avatar_url": "https://avatars0.githubusercontent.com/u/16408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/somic", "html_url": "https://github.com/somic", "followers_url": "https://api.github.com/users/somic/followers", "following_url": "https://api.github.com/users/somic/following{/other_user}", "gists_url": "https://api.github.com/users/somic/gists{/gist_id}", "starred_url": "https://api.github.com/users/somic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/somic/subscriptions", "organizations_url": "https://api.github.com/users/somic/orgs", "repos_url": "https://api.github.com/users/somic/repos", "events_url": "https://api.github.com/users/somic/events{/privacy}", "received_events_url": "https://api.github.com/users/somic/received_events", "type": "User", "site_admin": false}, "position": 17, "line": 36, "path": "lib/synapse/config_generator/file_output.rb", "commit_id": "98ec64ccdf242be5c199ac27bd2fb4a2037fc119", "created_at": "2017-03-24T22:31:24Z", "updated_at": "2017-03-24T22:31:24Z", "author_association": "CONTRIBUTOR", "body": "@jolynch do we need to sort watcher.backends? Appears to me that it's an array that will be in order we read them from zk - is the order guaranteed to be deterministic here?\r\n\r\nWe of course can sort it anywhere (when we read from zk or here etc) but just wanted to double check.", "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/comments/21483273/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}], "review_comments": [{"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/3824782", "pull_request_review_id": null, "id": 3824782, "diff_hunk": "@@ -61,7 +61,17 @@ def discover\n         STDERR.puts \"new_backends is #{new_backends.inspect}\"\n       end\n \n-      @backends = new_backends.empty? ? @default_servers : new_backends\n+      if new_backends.empty?\n+        if @default_servers.empty?\n+          log.warn \"synapse: no backends and no default servers for service #{@name}; using previous list: #{@backends.inspect}\"\n+        else\n+          log.warn \"synapse: no backends for service #{@name}; using default backends: #{@default_servers.inspect}\"\n+          @backends = @default_servers\n+        end\n+      else\n+        log.info \"synapse: discovered new backends for service #{@name}: #{new_backends.inspect}\"", "path": "lib/synapse/service_watcher/zookeeper.rb", "position": null, "original_position": 13, "commit_id": "100a4a8276ae7817ea5248059f5ee01cac4440a4", "original_commit_id": "6bb906a350f5345b32da5a6f1063f28d83830e58", "user": {"login": "jtai", "id": 696036, "avatar_url": "https://avatars2.githubusercontent.com/u/696036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jtai", "html_url": "https://github.com/jtai", "followers_url": "https://api.github.com/users/jtai/followers", "following_url": "https://api.github.com/users/jtai/following{/other_user}", "gists_url": "https://api.github.com/users/jtai/gists{/gist_id}", "starred_url": "https://api.github.com/users/jtai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jtai/subscriptions", "organizations_url": "https://api.github.com/users/jtai/orgs", "repos_url": "https://api.github.com/users/jtai/repos", "events_url": "https://api.github.com/users/jtai/events{/privacy}", "received_events_url": "https://api.github.com/users/jtai/received_events", "type": "User", "site_admin": false}, "body": "I would change the earlier debug line to an info line and just drop this one.\n", "created_at": "2013-04-17T01:13:07Z", "updated_at": "2013-04-18T18:24:38Z", "html_url": "https://github.com/airbnb/synapse/pull/7#discussion_r3824782", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/7", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/3824782"}, "html": {"href": "https://github.com/airbnb/synapse/pull/7#discussion_r3824782"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/7"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/3824782/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4199788", "pull_request_review_id": null, "id": 4199788, "diff_hunk": "@@ -0,0 +1,60 @@\n+require_relative \"./base\"\n+\n+require 'thread'\n+require 'resolv'\n+\n+module Synapse\n+  class DnsWatcher < BaseWatcher\n+    def start\n+      @backends = @discovery['servers']\n+      @mutex = Mutex.new\n+      @check_interval = @discover['check_interval'] || 30.0\n+\n+      watch\n+    end\n+\n+    private\n+    def validate_discovery_opts\n+      raise ArgumentError, \"invalid discovery method #{@discovery['method']}\" \\\n+        unless @discovery['method'] == 'dns'\n+      raise ArgumentError, \"a non-empty list of servers is required\" \\\n+        if @discovery['servers'].empty?\n+    end\n+\n+    def watch\n+      @watcher = Thread.new do\n+        last_resolution = resolve_servers\n+        while true\n+          begin\n+            start = Time.now\n+            current_resolution = resolve_servers\n+            unless last_resolution == current_resolution\n+              last_resolution = current_resolution\n+              @mutex.synchronize { @synapse.configure }", "path": "lib/synapse/service_watcher/dns.rb", "position": null, "original_position": 33, "commit_id": "1e638eb73896cce48fc3fa056935faa73cf117ed", "original_commit_id": "a71d5ea33332f2853137d6b956a6f8b64eb86158", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "hmmm; i'm not sure this is necessary. if it _is_ necessary it should live in the configure code in `synapse.rb`, but what are you worried about? multiple calls to configure happening at once mean the haproxy.rb grabs the backends again...\n", "created_at": "2013-05-13T18:36:49Z", "updated_at": "2013-05-13T21:24:54Z", "html_url": "https://github.com/airbnb/synapse/pull/8#discussion_r4199788", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/8", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4199788"}, "html": {"href": "https://github.com/airbnb/synapse/pull/8#discussion_r4199788"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/8"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4199788/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4199802", "pull_request_review_id": null, "id": 4199802, "diff_hunk": "@@ -0,0 +1,60 @@\n+require_relative \"./base\"\n+\n+require 'thread'\n+require 'resolv'\n+\n+module Synapse\n+  class DnsWatcher < BaseWatcher\n+    def start\n+      @backends = @discovery['servers']\n+      @mutex = Mutex.new\n+      @check_interval = @discover['check_interval'] || 30.0\n+\n+      watch\n+    end\n+\n+    private\n+    def validate_discovery_opts\n+      raise ArgumentError, \"invalid discovery method #{@discovery['method']}\" \\\n+        unless @discovery['method'] == 'dns'\n+      raise ArgumentError, \"a non-empty list of servers is required\" \\\n+        if @discovery['servers'].empty?\n+    end\n+\n+    def watch\n+      @watcher = Thread.new do\n+        last_resolution = resolve_servers\n+        while true\n+          begin\n+            start = Time.now\n+            current_resolution = resolve_servers\n+            unless last_resolution == current_resolution\n+              last_resolution = current_resolution", "path": "lib/synapse/service_watcher/dns.rb", "position": 32, "original_position": 32, "commit_id": "1e638eb73896cce48fc3fa056935faa73cf117ed", "original_commit_id": "a71d5ea33332f2853137d6b956a6f8b64eb86158", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "you never set `@backends` to the list of new ips you resolved... haproxy.rb wants to look at `@backends` to create the listen stanza.\n", "created_at": "2013-05-13T18:37:23Z", "updated_at": "2013-05-13T21:24:54Z", "html_url": "https://github.com/airbnb/synapse/pull/8#discussion_r4199802", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/8", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4199802"}, "html": {"href": "https://github.com/airbnb/synapse/pull/8#discussion_r4199802"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/8"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4199802/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4199821", "pull_request_review_id": null, "id": 4199821, "diff_hunk": "@@ -0,0 +1,60 @@\n+require_relative \"./base\"\n+\n+require 'thread'\n+require 'resolv'\n+\n+module Synapse\n+  class DnsWatcher < BaseWatcher\n+    def start\n+      @backends = @discovery['servers']", "path": "lib/synapse/service_watcher/dns.rb", "position": null, "original_position": 9, "commit_id": "1e638eb73896cce48fc3fa056935faa73cf117ed", "original_commit_id": "a71d5ea33332f2853137d6b956a6f8b64eb86158", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "hmmm, what is the `servers` argument exactly? \n", "created_at": "2013-05-13T18:38:04Z", "updated_at": "2013-05-13T21:24:54Z", "html_url": "https://github.com/airbnb/synapse/pull/8#discussion_r4199821", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/8", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4199821"}, "html": {"href": "https://github.com/airbnb/synapse/pull/8#discussion_r4199821"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/8"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4199821/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4203792", "pull_request_review_id": null, "id": 4203792, "diff_hunk": "@@ -0,0 +1,101 @@\n+require_relative \"./base\"\n+\n+require 'thread'\n+require 'resolv'\n+\n+module Synapse\n+  class DnsWatcher < BaseWatcher\n+    def start\n+      @check_interval = @discovery['check_interval'] || 30.0\n+      @nameserver = @discovery['nameserver']", "path": "lib/synapse/service_watcher/dns.rb", "position": 10, "original_position": 10, "commit_id": "1e638eb73896cce48fc3fa056935faa73cf117ed", "original_commit_id": "1e638eb73896cce48fc3fa056935faa73cf117ed", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "do you need an `|| nil` here?\n", "created_at": "2013-05-13T22:00:41Z", "updated_at": "2013-05-13T22:00:41Z", "html_url": "https://github.com/airbnb/synapse/pull/8#discussion_r4203792", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/8", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4203792"}, "html": {"href": "https://github.com/airbnb/synapse/pull/8#discussion_r4203792"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/8"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4203792/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4204076", "pull_request_review_id": null, "id": 4204076, "diff_hunk": "@@ -0,0 +1,101 @@\n+require_relative \"./base\"\n+\n+require 'thread'\n+require 'resolv'\n+\n+module Synapse\n+  class DnsWatcher < BaseWatcher\n+    def start\n+      @check_interval = @discovery['check_interval'] || 30.0\n+      @nameserver = @discovery['nameserver']", "path": "lib/synapse/service_watcher/dns.rb", "position": 10, "original_position": 10, "commit_id": "1e638eb73896cce48fc3fa056935faa73cf117ed", "original_commit_id": "1e638eb73896cce48fc3fa056935faa73cf117ed", "user": {"login": "schleyfox", "id": 4259, "avatar_url": "https://avatars0.githubusercontent.com/u/4259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/schleyfox", "html_url": "https://github.com/schleyfox", "followers_url": "https://api.github.com/users/schleyfox/followers", "following_url": "https://api.github.com/users/schleyfox/following{/other_user}", "gists_url": "https://api.github.com/users/schleyfox/gists{/gist_id}", "starred_url": "https://api.github.com/users/schleyfox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schleyfox/subscriptions", "organizations_url": "https://api.github.com/users/schleyfox/orgs", "repos_url": "https://api.github.com/users/schleyfox/repos", "events_url": "https://api.github.com/users/schleyfox/events{/privacy}", "received_events_url": "https://api.github.com/users/schleyfox/received_events", "type": "User", "site_admin": false}, "body": "no, an `|| nil` would only force it to be `nil` instead of potentially `nil` or `false`, both of which are falsey anyway.\n", "created_at": "2013-05-13T22:14:03Z", "updated_at": "2013-05-13T22:14:03Z", "html_url": "https://github.com/airbnb/synapse/pull/8#discussion_r4204076", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/8", "author_association": "OWNER", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4204076"}, "html": {"href": "https://github.com/airbnb/synapse/pull/8#discussion_r4204076"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/8"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4204076/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4755143", "pull_request_review_id": null, "id": 4755143, "diff_hunk": "@@ -64,15 +87,91 @@ def generate_listen_stanza(watcher)\n       end\n \n       watcher.backends.shuffle.each do |backend|\n-        stanza << \"\\tserver #{backend['name']} #{backend['host']}:#{backend['port']} #{watcher.server_options}\\n\" \n+        stanza << \"\\tserver #{backend['name']} #{backend['host']}:#{backend['port']} #{watcher.server_options}\\n\"\n       end\n \n       return stanza\n     end\n \n+    # tries to set active backends via haproxy's stats socket\n+    # because we can't add backends via the socket, we might still need to restart haproxy\n+    def update_backends(watchers)\n+      # first, get a list of existing servers for various backends\n+      begin\n+        s = UNIXSocket.new(@opts['socket_file_path'])\n+        s.write('show stat;')\n+        info = s.read()\n+      rescue StandardError => e\n+        log.warn \"synapse: unhandled error reading stats socket: #{e.inspect}\"\n+        @restart_required = true\n+        return\n+      end\n+\n+      # parse the stats output to get current backends\n+      cur_backends = {}\n+      info.split(\"\\n\").each do |line|\n+        next if line[0] == '#'\n+\n+        parts = line.split(',')\n+        next if ['FRONTEND', 'BACKEND'].include?(parts[1])\n+\n+        cur_backends[parts[0]] ||= []\n+        cur_backends[parts[0]] << parts[1]\n+      end\n+\n+      # build a list of backends that should be enabled\n+      enabled_backends = {}\n+      watchers.each do |watcher|\n+        unless cur_backends.include? watcher.name\n+          log.debug \"synapse: restart required because we added new section #{watcher.name}\"\n+          @restart_required = true\n+          return\n+        end\n+\n+        watcher.backends.each do |backend|\n+          unless cur_backends[watcher.name].include? backend['name']\n+            log.debug \"synapse: restart required because we have a new backend #{watcher.name}/#{backend['name']}\"\n+            @restart_required = true\n+            return\n+          end\n+\n+          enabled_backends[watcher.name] ||= []\n+          enabled_backends[wathcer.name] << backend['name']", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 102, "commit_id": "85faf724b6ec881540c02a58369b26ceecfc4b25", "original_commit_id": "12086f53fe9b8eb74b596ebdd6ffea5331314008", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "oops\n", "created_at": "2013-06-18T18:11:55Z", "updated_at": "2013-06-18T19:04:34Z", "html_url": "https://github.com/airbnb/synapse/pull/9#discussion_r4755143", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/9", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4755143"}, "html": {"href": "https://github.com/airbnb/synapse/pull/9#discussion_r4755143"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/9"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4755143/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4761748", "pull_request_review_id": null, "id": 4761748, "diff_hunk": "@@ -69,9 +69,9 @@ def resolver\n \n     def configure_backends(servers)\n       new_backends = servers.flat_map do |(server, addresses)|\n-        addresses.to_enum.with_index.map do |address, idx|\n+        addresses.each do |address|\n           {\n-            'name' => \"#{server['name']}-#{idx}\",\n+            'name' => \"#{server['name']}-#{address.hash}\",", "path": "lib/synapse/service_watcher/dns.rb", "position": null, "original_position": 8, "commit_id": "8626c80028ca9649966606437175b1feb7a22688", "original_commit_id": "11a31cb4cc89a1d14b100e44fd7f936fc56a1463", "user": {"login": "jtai", "id": 696036, "avatar_url": "https://avatars2.githubusercontent.com/u/696036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jtai", "html_url": "https://github.com/jtai", "followers_url": "https://api.github.com/users/jtai/followers", "following_url": "https://api.github.com/users/jtai/following{/other_user}", "gists_url": "https://api.github.com/users/jtai/gists{/gist_id}", "starred_url": "https://api.github.com/users/jtai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jtai/subscriptions", "organizations_url": "https://api.github.com/users/jtai/orgs", "repos_url": "https://api.github.com/users/jtai/repos", "events_url": "https://api.github.com/users/jtai/events{/privacy}", "received_events_url": "https://api.github.com/users/jtai/received_events", "type": "User", "site_admin": false}, "body": "Even though the port doesn't change with the DNS watcher, should we hash the address and port here for consistency?\n", "created_at": "2013-06-18T22:36:59Z", "updated_at": "2013-06-18T22:54:54Z", "html_url": "https://github.com/airbnb/synapse/pull/10#discussion_r4761748", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/10", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4761748"}, "html": {"href": "https://github.com/airbnb/synapse/pull/10#discussion_r4761748"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/10"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4761748/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4923471", "pull_request_review_id": null, "id": 4923471, "diff_hunk": "@@ -29,14 +29,20 @@ def initialize(opts={}, synapse)\n       validate_discovery_opts\n     end\n \n+    # this should be overridden to actually start your watcher\n     def start\n       log.info \"synapse: starting stub watcher; this means doing nothing at all!\"\n     end\n \n+    # this should be overridden to do a health check of the watcher\n+    def ping?\n+      true", "path": "lib/synapse/service_watcher/base.rb", "position": 11, "original_position": 11, "commit_id": "761a2062d9814b69f4ed9a263c8566409050a5b2", "original_commit_id": "b64cf65a3bc6b2d6acbc5b03f0c2c88957128b50", "user": {"login": "martinrhoads", "id": 52137, "avatar_url": "https://avatars2.githubusercontent.com/u/52137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martinrhoads", "html_url": "https://github.com/martinrhoads", "followers_url": "https://api.github.com/users/martinrhoads/followers", "following_url": "https://api.github.com/users/martinrhoads/following{/other_user}", "gists_url": "https://api.github.com/users/martinrhoads/gists{/gist_id}", "starred_url": "https://api.github.com/users/martinrhoads/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martinrhoads/subscriptions", "organizations_url": "https://api.github.com/users/martinrhoads/orgs", "repos_url": "https://api.github.com/users/martinrhoads/repos", "events_url": "https://api.github.com/users/martinrhoads/events{/privacy}", "received_events_url": "https://api.github.com/users/martinrhoads/received_events", "type": "User", "site_admin": false}, "body": "should this raise an exception? \n", "created_at": "2013-06-27T18:48:26Z", "updated_at": "2013-06-27T20:53:12Z", "html_url": "https://github.com/airbnb/synapse/pull/11#discussion_r4923471", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/11", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4923471"}, "html": {"href": "https://github.com/airbnb/synapse/pull/11#discussion_r4923471"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/11"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4923471/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4923489", "pull_request_review_id": null, "id": 4923489, "diff_hunk": "@@ -12,6 +12,10 @@ def start\n       watch\n     end\n \n+    def ping?\n+      !(resolver.getaddresses('airbnb.com').empty?)\n+    end\n+", "path": "lib/synapse/service_watcher/dns.rb", "position": 7, "original_position": 7, "commit_id": "761a2062d9814b69f4ed9a263c8566409050a5b2", "original_commit_id": "b64cf65a3bc6b2d6acbc5b03f0c2c88957128b50", "user": {"login": "martinrhoads", "id": 52137, "avatar_url": "https://avatars2.githubusercontent.com/u/52137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martinrhoads", "html_url": "https://github.com/martinrhoads", "followers_url": "https://api.github.com/users/martinrhoads/followers", "following_url": "https://api.github.com/users/martinrhoads/following{/other_user}", "gists_url": "https://api.github.com/users/martinrhoads/gists{/gist_id}", "starred_url": "https://api.github.com/users/martinrhoads/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martinrhoads/subscriptions", "organizations_url": "https://api.github.com/users/martinrhoads/orgs", "repos_url": "https://api.github.com/users/martinrhoads/repos", "events_url": "https://api.github.com/users/martinrhoads/events{/privacy}", "received_events_url": "https://api.github.com/users/martinrhoads/received_events", "type": "User", "site_admin": false}, "body": "what exactly are you trying to test here? that the watcher can resolve dns? why airbnb.com? \n", "created_at": "2013-06-27T18:49:03Z", "updated_at": "2013-06-27T20:53:12Z", "html_url": "https://github.com/airbnb/synapse/pull/11#discussion_r4923489", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/11", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4923489"}, "html": {"href": "https://github.com/airbnb/synapse/pull/11#discussion_r4923489"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/11"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4923489/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4923654", "pull_request_review_id": null, "id": 4923654, "diff_hunk": "@@ -21,44 +20,47 @@ def initialize(opts={})\n       # create the haproxy object\n       raise \"haproxy config section is missing\" unless opts.has_key?('haproxy')\n       @haproxy = Haproxy.new(opts['haproxy'])\n+\n+      # configuration is initially enabled to configure on first loop\n+      @config_updated = true\n     end\n \n     # start all the watchers and enable haproxy configuration\n     def run\n       log.info \"synapse: starting...\"\n \n+      # start all the watchers\n       @service_watchers.map { |watcher| watcher.start }\n-      @configure_enabled = true\n-      configure\n \n-      # loop forever\n+      # main loop\n       loops = 0\n-      loop do \n-        sleep 1\n+      loop do\n+        @service_watchers.each do |w|", "path": "lib/synapse.rb", "position": 34, "original_position": 37, "commit_id": "761a2062d9814b69f4ed9a263c8566409050a5b2", "original_commit_id": "b64cf65a3bc6b2d6acbc5b03f0c2c88957128b50", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "now that i think about it, i wonder if we can get into a bad state with a single service watcher having problems and as a result breaking updates on the rest of the services. this would definitely happen now, but the question is how do we want to handle such a scenario...\n", "created_at": "2013-06-27T18:54:03Z", "updated_at": "2013-06-27T20:53:12Z", "html_url": "https://github.com/airbnb/synapse/pull/11#discussion_r4923654", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/11", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4923654"}, "html": {"href": "https://github.com/airbnb/synapse/pull/11#discussion_r4923654"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/11"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4923654/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4923756", "pull_request_review_id": null, "id": 4923756, "diff_hunk": "@@ -29,14 +29,20 @@ def initialize(opts={}, synapse)\n       validate_discovery_opts\n     end\n \n+    # this should be overridden to actually start your watcher\n     def start\n       log.info \"synapse: starting stub watcher; this means doing nothing at all!\"\n     end\n \n+    # this should be overridden to do a health check of the watcher\n+    def ping?\n+      true", "path": "lib/synapse/service_watcher/base.rb", "position": 11, "original_position": 11, "commit_id": "761a2062d9814b69f4ed9a263c8566409050a5b2", "original_commit_id": "b64cf65a3bc6b2d6acbc5b03f0c2c88957128b50", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "no, i think the stub watcher is always healthy\n", "created_at": "2013-06-27T18:57:18Z", "updated_at": "2013-06-27T20:53:12Z", "html_url": "https://github.com/airbnb/synapse/pull/11#discussion_r4923756", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/11", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4923756"}, "html": {"href": "https://github.com/airbnb/synapse/pull/11#discussion_r4923756"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/11"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4923756/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4923786", "pull_request_review_id": null, "id": 4923786, "diff_hunk": "@@ -12,6 +12,10 @@ def start\n       watch\n     end\n \n+    def ping?\n+      !(resolver.getaddresses('airbnb.com').empty?)\n+    end\n+", "path": "lib/synapse/service_watcher/dns.rb", "position": 7, "original_position": 7, "commit_id": "761a2062d9814b69f4ed9a263c8566409050a5b2", "original_commit_id": "b64cf65a3bc6b2d6acbc5b03f0c2c88957128b50", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "i'm not sure what a better way to test if DNS resolution is working. this just makes sure that the list of addresses for `airbnb.com` is not empty. i chose `airbnb.com` because that's the place where we do the thing; if our domain is not resolving, we've got bigger problems than synapse restarting.\n\ni'm very very open to ideas about what to do here instead\n", "created_at": "2013-06-27T18:58:48Z", "updated_at": "2013-06-27T20:53:12Z", "html_url": "https://github.com/airbnb/synapse/pull/11#discussion_r4923786", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/11", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4923786"}, "html": {"href": "https://github.com/airbnb/synapse/pull/11#discussion_r4923786"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/11"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4923786/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4924278", "pull_request_review_id": null, "id": 4924278, "diff_hunk": "@@ -21,44 +20,47 @@ def initialize(opts={})\n       # create the haproxy object\n       raise \"haproxy config section is missing\" unless opts.has_key?('haproxy')\n       @haproxy = Haproxy.new(opts['haproxy'])\n+\n+      # configuration is initially enabled to configure on first loop\n+      @config_updated = true\n     end\n \n     # start all the watchers and enable haproxy configuration\n     def run\n       log.info \"synapse: starting...\"\n \n+      # start all the watchers\n       @service_watchers.map { |watcher| watcher.start }\n-      @configure_enabled = true\n-      configure\n \n-      # loop forever\n+      # main loop\n       loops = 0\n-      loop do \n-        sleep 1\n+      loop do\n+        @service_watchers.each do |w|", "path": "lib/synapse.rb", "position": 34, "original_position": 37, "commit_id": "761a2062d9814b69f4ed9a263c8566409050a5b2", "original_commit_id": "b64cf65a3bc6b2d6acbc5b03f0c2c88957128b50", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "i guess we have a hierarchy of desirable behaviors here. i think, from least to most desirable:\n- a single watcher breaks synapse silently; it's still running but not functional and requires manual intervention\n- a single watcher fails silently, leaving the rest of synapse functional; requires manual intervention\n- a single watcher breaks and takes synapse down with it, leaving runit to restart it\n- a single watcher breaks but the rest of synapse still runs; the watcher later recovers on it's own\n\nwe're at the first of these. this pull request moves us to the 3rd. getting to 4 is hard...\n", "created_at": "2013-06-27T19:18:49Z", "updated_at": "2013-06-27T20:53:12Z", "html_url": "https://github.com/airbnb/synapse/pull/11#discussion_r4924278", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/11", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4924278"}, "html": {"href": "https://github.com/airbnb/synapse/pull/11#discussion_r4924278"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/11"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4924278/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4926223", "pull_request_review_id": null, "id": 4926223, "diff_hunk": "@@ -92,7 +96,7 @@ def configure_backends(servers)\n         log.info \"synapse: discovered #{new_backends.length} backends for service #{@name}\"\n         @backends = new_backends\n       end\n-      @synapse.configure\n+      @synapse.config_updated = true", "path": "lib/synapse/service_watcher/dns.rb", "position": null, "original_position": 16, "commit_id": "761a2062d9814b69f4ed9a263c8566409050a5b2", "original_commit_id": "b64cf65a3bc6b2d6acbc5b03f0c2c88957128b50", "user": {"login": "schleyfox", "id": 4259, "avatar_url": "https://avatars0.githubusercontent.com/u/4259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/schleyfox", "html_url": "https://github.com/schleyfox", "followers_url": "https://api.github.com/users/schleyfox/followers", "following_url": "https://api.github.com/users/schleyfox/following{/other_user}", "gists_url": "https://api.github.com/users/schleyfox/gists{/gist_id}", "starred_url": "https://api.github.com/users/schleyfox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schleyfox/subscriptions", "organizations_url": "https://api.github.com/users/schleyfox/orgs", "repos_url": "https://api.github.com/users/schleyfox/repos", "events_url": "https://api.github.com/users/schleyfox/events{/privacy}", "received_events_url": "https://api.github.com/users/schleyfox/received_events", "type": "User", "site_admin": false}, "body": "I don't love the reaching in and setting the variable.  It's a minor thing but something like `@synapse.schedule_configure!` or just `@synapse.configure!` might be happier.\n", "created_at": "2013-06-27T20:45:58Z", "updated_at": "2013-06-27T20:53:12Z", "html_url": "https://github.com/airbnb/synapse/pull/11#discussion_r4926223", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/11", "author_association": "OWNER", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4926223"}, "html": {"href": "https://github.com/airbnb/synapse/pull/11#discussion_r4926223"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/11"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4926223/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4926264", "pull_request_review_id": null, "id": 4926264, "diff_hunk": "@@ -84,13 +88,13 @@ def watch\n \n     # handles the event that a watched path has changed in zookeeper\n     def watcher_callback\n-      Proc.new do |event|\n+      callback ||= Proc.new do |event|", "path": "lib/synapse/service_watcher/zookeeper.rb", "position": null, "original_position": 20, "commit_id": "761a2062d9814b69f4ed9a263c8566409050a5b2", "original_commit_id": "b64cf65a3bc6b2d6acbc5b03f0c2c88957128b50", "user": {"login": "schleyfox", "id": 4259, "avatar_url": "https://avatars0.githubusercontent.com/u/4259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/schleyfox", "html_url": "https://github.com/schleyfox", "followers_url": "https://api.github.com/users/schleyfox/followers", "following_url": "https://api.github.com/users/schleyfox/following{/other_user}", "gists_url": "https://api.github.com/users/schleyfox/gists{/gist_id}", "starred_url": "https://api.github.com/users/schleyfox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schleyfox/subscriptions", "organizations_url": "https://api.github.com/users/schleyfox/orgs", "repos_url": "https://api.github.com/users/schleyfox/repos", "events_url": "https://api.github.com/users/schleyfox/events{/privacy}", "received_events_url": "https://api.github.com/users/schleyfox/received_events", "type": "User", "site_admin": false}, "body": "this is a local variable (and thus created fresh on every call to this method), you probably want an instance variable\n", "created_at": "2013-06-27T20:47:18Z", "updated_at": "2013-06-27T20:53:12Z", "html_url": "https://github.com/airbnb/synapse/pull/11#discussion_r4926264", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/11", "author_association": "OWNER", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4926264"}, "html": {"href": "https://github.com/airbnb/synapse/pull/11#discussion_r4926264"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/11"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4926264/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4926327", "pull_request_review_id": null, "id": 4926327, "diff_hunk": "@@ -1,3 +1,3 @@\n module Synapse\n-  VERSION = \"0.2.1\"\n+  VERSION = \"0.2.2\"", "path": "lib/synapse/version.rb", "position": null, "original_position": 3, "commit_id": "761a2062d9814b69f4ed9a263c8566409050a5b2", "original_commit_id": "b64cf65a3bc6b2d6acbc5b03f0c2c88957128b50", "user": {"login": "schleyfox", "id": 4259, "avatar_url": "https://avatars0.githubusercontent.com/u/4259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/schleyfox", "html_url": "https://github.com/schleyfox", "followers_url": "https://api.github.com/users/schleyfox/followers", "following_url": "https://api.github.com/users/schleyfox/following{/other_user}", "gists_url": "https://api.github.com/users/schleyfox/gists{/gist_id}", "starred_url": "https://api.github.com/users/schleyfox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schleyfox/subscriptions", "organizations_url": "https://api.github.com/users/schleyfox/orgs", "repos_url": "https://api.github.com/users/schleyfox/repos", "events_url": "https://api.github.com/users/schleyfox/events{/privacy}", "received_events_url": "https://api.github.com/users/schleyfox/received_events", "type": "User", "site_admin": false}, "body": "This might make sense as 0.3.0, we're doing big things here.\n", "created_at": "2013-06-27T20:49:55Z", "updated_at": "2013-06-27T20:53:12Z", "html_url": "https://github.com/airbnb/synapse/pull/11#discussion_r4926327", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/11", "author_association": "OWNER", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4926327"}, "html": {"href": "https://github.com/airbnb/synapse/pull/11#discussion_r4926327"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/11"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4926327/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4929602", "pull_request_review_id": null, "id": 4929602, "diff_hunk": "@@ -22,7 +22,11 @@ def initialize(opts)\n       end\n \n       @opts = opts\n+\n+      # how to restart haproxy", "path": "lib/synapse/haproxy.rb", "position": 5, "original_position": 5, "commit_id": "761a2062d9814b69f4ed9a263c8566409050a5b2", "original_commit_id": "761a2062d9814b69f4ed9a263c8566409050a5b2", "user": {"login": "jtai", "id": 696036, "avatar_url": "https://avatars2.githubusercontent.com/u/696036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jtai", "html_url": "https://github.com/jtai", "followers_url": "https://api.github.com/users/jtai/followers", "following_url": "https://api.github.com/users/jtai/following{/other_user}", "gists_url": "https://api.github.com/users/jtai/gists{/gist_id}", "starred_url": "https://api.github.com/users/jtai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jtai/subscriptions", "organizations_url": "https://api.github.com/users/jtai/orgs", "repos_url": "https://api.github.com/users/jtai/repos", "events_url": "https://api.github.com/users/jtai/events{/privacy}", "received_events_url": "https://api.github.com/users/jtai/received_events", "type": "User", "site_admin": false}, "body": "I'm not sure what this comment is supposed to mean. If it's referring to `@restart_interval`, it should be \"how often to restart haproxy\", or better yet, \"minimum time between haproxy restarts\"\n", "created_at": "2013-06-27T23:34:58Z", "updated_at": "2013-06-27T23:34:58Z", "html_url": "https://github.com/airbnb/synapse/pull/11#discussion_r4929602", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/11", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4929602"}, "html": {"href": "https://github.com/airbnb/synapse/pull/11#discussion_r4929602"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/11"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4929602/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4929650", "pull_request_review_id": null, "id": 4929650, "diff_hunk": "@@ -192,8 +196,15 @@ def write_config(new_config)\n \n     # restarts haproxy\n     def restart\n+      # sleep if we restarted too recently\n+      delay = (@last_restart - Time.now) + @restart_interval\n+      sleep(delay) if delay > 0\n+\n+      # do the actual restart\n       res = `#{opts['reload_command']}`.chomp\n       raise \"failed to reload haproxy via #{opts['reload_command']}: #{res}\" unless $?.success?", "path": "lib/synapse/haproxy.rb", "position": 22, "original_position": 22, "commit_id": "761a2062d9814b69f4ed9a263c8566409050a5b2", "original_commit_id": "761a2062d9814b69f4ed9a263c8566409050a5b2", "user": {"login": "jtai", "id": 696036, "avatar_url": "https://avatars2.githubusercontent.com/u/696036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jtai", "html_url": "https://github.com/jtai", "followers_url": "https://api.github.com/users/jtai/followers", "following_url": "https://api.github.com/users/jtai/following{/other_user}", "gists_url": "https://api.github.com/users/jtai/gists{/gist_id}", "starred_url": "https://api.github.com/users/jtai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jtai/subscriptions", "organizations_url": "https://api.github.com/users/jtai/orgs", "repos_url": "https://api.github.com/users/jtai/repos", "events_url": "https://api.github.com/users/jtai/events{/privacy}", "received_events_url": "https://api.github.com/users/jtai/received_events", "type": "User", "site_admin": false}, "body": "Unless we patched the init script, this line will never trigger.\n", "created_at": "2013-06-27T23:38:15Z", "updated_at": "2013-06-27T23:38:15Z", "html_url": "https://github.com/airbnb/synapse/pull/11#discussion_r4929650", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/11", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4929650"}, "html": {"href": "https://github.com/airbnb/synapse/pull/11#discussion_r4929650"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/11"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/4929650/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7054218", "pull_request_review_id": null, "id": 7054218, "diff_hunk": "@@ -86,14 +87,15 @@ def generate_listen_stanza(watcher)\n         return \"\"\n       end\n \n-      stanza = \"listen #{watcher.name} localhost:#{watcher.local_port}\\n\"\n+      stanza = \"listen #{watcher.name} localhost:#{watcher.haproxy['port']}\\n\"\n \n-      watcher.listen.each do |line|\n+      watcher.haproxy['listen'].each do |line|", "path": "lib/synapse/haproxy.rb", "position": 14, "original_position": 14, "commit_id": "8e3adc24304b71b2ae75c440acfb5b51e9a0ffe6", "original_commit_id": "8e3adc24304b71b2ae75c440acfb5b51e9a0ffe6", "user": {"login": "pcarrier", "id": 8641, "avatar_url": "https://avatars0.githubusercontent.com/u/8641?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcarrier", "html_url": "https://github.com/pcarrier", "followers_url": "https://api.github.com/users/pcarrier/followers", "following_url": "https://api.github.com/users/pcarrier/following{/other_user}", "gists_url": "https://api.github.com/users/pcarrier/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcarrier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcarrier/subscriptions", "organizations_url": "https://api.github.com/users/pcarrier/orgs", "repos_url": "https://api.github.com/users/pcarrier/repos", "events_url": "https://api.github.com/users/pcarrier/events{/privacy}", "received_events_url": "https://api.github.com/users/pcarrier/received_events", "type": "User", "site_admin": false}, "body": "Looks great to me. Would be nice to have haproxy a class with its own attributes instead of keeping it around as a hash, but that's a refinement that could come later if we wanted to spend more time on the Ruby implementation.\n", "created_at": "2013-10-18T05:09:02Z", "updated_at": "2013-10-18T05:09:02Z", "html_url": "https://github.com/airbnb/synapse/pull/15#discussion_r7054218", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/15", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7054218"}, "html": {"href": "https://github.com/airbnb/synapse/pull/15#discussion_r7054218"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/15"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7054218/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7351841", "pull_request_review_id": null, "id": 7351841, "diff_hunk": "@@ -82,14 +84,31 @@ def generate_base_config\n \n     # generates an individual stanza for a particular watcher\n     def generate_listen_stanza(watcher)\n+      if not watcher.haproxy.has_key?(\"port\") then\n+        log.warn \"synapse: no port found for watcher #{watcher.name}\"", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 15, "commit_id": "5a886fbf93943e7343ea6cb8ef74c312d6c0ec9c", "original_commit_id": "43f335c181c84ff6029bc1614961666178d3cf7e", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "not sure this calls for a warning; this seems like a generally common state of affairs.\n", "created_at": "2013-10-31T18:37:38Z", "updated_at": "2013-10-31T19:23:26Z", "html_url": "https://github.com/airbnb/synapse/pull/16#discussion_r7351841", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/16", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7351841"}, "html": {"href": "https://github.com/airbnb/synapse/pull/16#discussion_r7351841"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/16"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7351841/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7351895", "pull_request_review_id": null, "id": 7351895, "diff_hunk": "@@ -82,14 +84,31 @@ def generate_base_config\n \n     # generates an individual stanza for a particular watcher\n     def generate_listen_stanza(watcher)\n+      if not watcher.haproxy.has_key?(\"port\") then\n+        log.warn \"synapse: no port found for watcher #{watcher.name}\"", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 15, "commit_id": "5a886fbf93943e7343ea6cb8ef74c312d6c0ec9c", "original_commit_id": "43f335c181c84ff6029bc1614961666178d3cf7e", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "i would make this a descriptive debug message: `log.debug \"synapse: not generating listen stanza for watcher #{water.name} because it has no port\"`\n", "created_at": "2013-10-31T18:39:13Z", "updated_at": "2013-10-31T19:23:26Z", "html_url": "https://github.com/airbnb/synapse/pull/16#discussion_r7351895", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/16", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7351895"}, "html": {"href": "https://github.com/airbnb/synapse/pull/16#discussion_r7351895"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/16"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7351895/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7351905", "pull_request_review_id": null, "id": 7351905, "diff_hunk": "@@ -82,14 +84,31 @@ def generate_base_config\n \n     # generates an individual stanza for a particular watcher\n     def generate_listen_stanza(watcher)\n+      if not watcher.haproxy.has_key?(\"port\") then", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 14, "commit_id": "5a886fbf93943e7343ea6cb8ef74c312d6c0ec9c", "original_commit_id": "43f335c181c84ff6029bc1614961666178d3cf7e", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "s/if not/unless\n", "created_at": "2013-10-31T18:39:22Z", "updated_at": "2013-10-31T19:23:26Z", "html_url": "https://github.com/airbnb/synapse/pull/16#discussion_r7351905", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/16", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7351905"}, "html": {"href": "https://github.com/airbnb/synapse/pull/16#discussion_r7351905"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/16"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7351905/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7352301", "pull_request_review_id": null, "id": 7352301, "diff_hunk": "@@ -82,14 +84,31 @@ def generate_base_config\n \n     # generates an individual stanza for a particular watcher\n     def generate_listen_stanza(watcher)\n+      if not watcher.haproxy.has_key?(\"port\") then", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 14, "commit_id": "5a886fbf93943e7343ea6cb8ef74c312d6c0ec9c", "original_commit_id": "43f335c181c84ff6029bc1614961666178d3cf7e", "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "body": "python brain damage ahoy. :)\n", "created_at": "2013-10-31T18:52:21Z", "updated_at": "2013-10-31T19:23:26Z", "html_url": "https://github.com/airbnb/synapse/pull/16#discussion_r7352301", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/16", "author_association": "NONE", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7352301"}, "html": {"href": "https://github.com/airbnb/synapse/pull/16#discussion_r7352301"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/16"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7352301/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7352336", "pull_request_review_id": null, "id": 7352336, "diff_hunk": "@@ -82,14 +84,31 @@ def generate_base_config\n \n     # generates an individual stanza for a particular watcher\n     def generate_listen_stanza(watcher)\n+      if not watcher.haproxy.has_key?(\"port\") then\n+        log.warn \"synapse: no port found for watcher #{watcher.name}\"", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 15, "commit_id": "5a886fbf93943e7343ea6cb8ef74c312d6c0ec9c", "original_commit_id": "43f335c181c84ff6029bc1614961666178d3cf7e", "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "body": "Reasonable.\n", "created_at": "2013-10-31T18:53:38Z", "updated_at": "2013-10-31T19:23:26Z", "html_url": "https://github.com/airbnb/synapse/pull/16#discussion_r7352336", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/16", "author_association": "NONE", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7352336"}, "html": {"href": "https://github.com/airbnb/synapse/pull/16#discussion_r7352336"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/16"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7352336/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7352435", "pull_request_review_id": null, "id": 7352435, "diff_hunk": "@@ -82,14 +84,31 @@ def generate_base_config\n \n     # generates an individual stanza for a particular watcher\n     def generate_listen_stanza(watcher)\n+      if not watcher.haproxy.has_key?(\"port\") then\n+        log.warn \"synapse: no port found for watcher #{watcher.name}\"\n+        return \"\"\n+      end\n+\n+      stanza = \"\\nlisten #{watcher.name}_in localhost:#{watcher.haproxy['port']}\\n\"", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 19, "commit_id": "5a886fbf93943e7343ea6cb8ef74c312d6c0ec9c", "original_commit_id": "43f335c181c84ff6029bc1614961666178d3cf7e", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "changing the name of the listen section to `<name>_in` will break dynamic haproxy reconfiguration. is it possible to have a `listen` and a `backend` section both named the same? if not, some changes will have to happen in `update_backends` or we will end up flapping haproxy\n", "created_at": "2013-10-31T18:56:31Z", "updated_at": "2013-10-31T19:23:26Z", "html_url": "https://github.com/airbnb/synapse/pull/16#discussion_r7352435", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/16", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7352435"}, "html": {"href": "https://github.com/airbnb/synapse/pull/16#discussion_r7352435"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/16"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7352435/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7352448", "pull_request_review_id": null, "id": 7352448, "diff_hunk": "@@ -82,14 +84,31 @@ def generate_base_config\n \n     # generates an individual stanza for a particular watcher\n     def generate_listen_stanza(watcher)\n+      if not watcher.haproxy.has_key?(\"port\") then\n+        log.warn \"synapse: no port found for watcher #{watcher.name}\"\n+        return \"\"\n+      end\n+\n+      stanza = \"\\nlisten #{watcher.name}_in localhost:#{watcher.haproxy['port']}\\n\"", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 19, "commit_id": "5a886fbf93943e7343ea6cb8ef74c312d6c0ec9c", "original_commit_id": "43f335c181c84ff6029bc1614961666178d3cf7e", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "oh i see; that won't matter!\n", "created_at": "2013-10-31T18:56:53Z", "updated_at": "2013-10-31T19:23:26Z", "html_url": "https://github.com/airbnb/synapse/pull/16#discussion_r7352448", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/16", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7352448"}, "html": {"href": "https://github.com/airbnb/synapse/pull/16#discussion_r7352448"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/16"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7352448/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7470509", "pull_request_review_id": null, "id": 7470509, "diff_hunk": "@@ -31,16 +31,33 @@ end\n # parse command line arguments\n optparse.parse!\n \n+def parseconfig(filename)\n+  # parse synapse config file\n+  begin\n+    c = JSON::parse(File.read(filename))\n+  rescue Errno::ENOENT => e\n+    raise ArgumentError, \"config file does not exist:\\n#{e.inspect}\"\n+  rescue Errno::EACCES => e\n+    raise ArgumentError, \"could not open config file:\\n#{e.inspect}\"\n+  rescue JSON::ParserError => e\n+    raise \"config file #{options[:config]} is not json:\\n#{e.inspect}\"", "path": "bin/synapse", "position": null, "original_position": 22, "commit_id": "bb21454dbae9e9bd39bf02b410260bfae77ef4a8", "original_commit_id": "80e27c6152ccb8674af726521b597f08dcb425f2", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "same as nerve, this should be `filename` instead of `options[:config]`\n", "created_at": "2013-11-06T17:12:44Z", "updated_at": "2013-11-06T21:37:36Z", "html_url": "https://github.com/airbnb/synapse/pull/18#discussion_r7470509", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/18", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7470509"}, "html": {"href": "https://github.com/airbnb/synapse/pull/18#discussion_r7470509"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/18"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7470509/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7470530", "pull_request_review_id": null, "id": 7470530, "diff_hunk": "@@ -31,16 +31,33 @@ end\n # parse command line arguments\n optparse.parse!\n \n+def parseconfig(filename)\n+  # parse synapse config file\n+  begin\n+    c = JSON::parse(File.read(filename))\n+  rescue Errno::ENOENT => e\n+    raise ArgumentError, \"config file does not exist:\\n#{e.inspect}\"\n+  rescue Errno::EACCES => e\n+    raise ArgumentError, \"could not open config file:\\n#{e.inspect}\"\n+  rescue JSON::ParserError => e\n+    raise \"config file #{options[:config]} is not json:\\n#{e.inspect}\"\n+  end\n+  return c\n+end\n+\n+config = parseconfig(options[:config])\n \n-# parse synapse config file\n-begin\n-  config = JSON::parse(File.read(options[:config]))\n-rescue Errno::ENOENT => e\n-  raise ArgumentError, \"config file does not exist:\\n#{e.inspect}\"\n-rescue Errno::EACCES => e\n-  raise ArgumentError, \"could not open config file:\\n#{e.inspect}\"\n-rescue JSON::ParserError => e\n-  raise \"config file #{options[:config]} is not json:\\n#{e.inspect}\" \n+if ! config.has_key?('services') then", "path": "bin/synapse", "position": null, "original_position": 38, "commit_id": "bb21454dbae9e9bd39bf02b410260bfae77ef4a8", "original_commit_id": "80e27c6152ccb8674af726521b597f08dcb425f2", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "same as nerve, more ideomatic is `config['services'] ||= {}`\n", "created_at": "2013-11-06T17:13:10Z", "updated_at": "2013-11-06T21:37:36Z", "html_url": "https://github.com/airbnb/synapse/pull/18#discussion_r7470530", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/18", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7470530"}, "html": {"href": "https://github.com/airbnb/synapse/pull/18#discussion_r7470530"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/18"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7470530/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7478824", "pull_request_review_id": null, "id": 7478824, "diff_hunk": "@@ -31,16 +31,33 @@ end\n # parse command line arguments\n optparse.parse!\n \n+def parseconfig(filename)\n+  # parse synapse config file\n+  begin\n+    c = JSON::parse(File.read(filename))\n+  rescue Errno::ENOENT => e\n+    raise ArgumentError, \"config file does not exist:\\n#{e.inspect}\"\n+  rescue Errno::EACCES => e\n+    raise ArgumentError, \"could not open config file:\\n#{e.inspect}\"\n+  rescue JSON::ParserError => e\n+    raise \"config file #{options[:config]} is not json:\\n#{e.inspect}\"", "path": "bin/synapse", "position": null, "original_position": 22, "commit_id": "bb21454dbae9e9bd39bf02b410260bfae77ef4a8", "original_commit_id": "80e27c6152ccb8674af726521b597f08dcb425f2", "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "body": "done\n", "created_at": "2013-11-06T21:29:14Z", "updated_at": "2013-11-06T21:37:36Z", "html_url": "https://github.com/airbnb/synapse/pull/18#discussion_r7478824", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/18", "author_association": "NONE", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7478824"}, "html": {"href": "https://github.com/airbnb/synapse/pull/18#discussion_r7478824"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/18"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7478824/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7478960", "pull_request_review_id": null, "id": 7478960, "diff_hunk": "@@ -31,16 +31,33 @@ end\n # parse command line arguments\n optparse.parse!\n \n+def parseconfig(filename)\n+  # parse synapse config file\n+  begin\n+    c = JSON::parse(File.read(filename))\n+  rescue Errno::ENOENT => e\n+    raise ArgumentError, \"config file does not exist:\\n#{e.inspect}\"\n+  rescue Errno::EACCES => e\n+    raise ArgumentError, \"could not open config file:\\n#{e.inspect}\"\n+  rescue JSON::ParserError => e\n+    raise \"config file #{options[:config]} is not json:\\n#{e.inspect}\"\n+  end\n+  return c\n+end\n+\n+config = parseconfig(options[:config])\n \n-# parse synapse config file\n-begin\n-  config = JSON::parse(File.read(options[:config]))\n-rescue Errno::ENOENT => e\n-  raise ArgumentError, \"config file does not exist:\\n#{e.inspect}\"\n-rescue Errno::EACCES => e\n-  raise ArgumentError, \"could not open config file:\\n#{e.inspect}\"\n-rescue JSON::ParserError => e\n-  raise \"config file #{options[:config]} is not json:\\n#{e.inspect}\" \n+if ! config.has_key?('services') then", "path": "bin/synapse", "position": null, "original_position": 38, "commit_id": "bb21454dbae9e9bd39bf02b410260bfae77ef4a8", "original_commit_id": "80e27c6152ccb8674af726521b597f08dcb425f2", "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "body": "done\n", "created_at": "2013-11-06T21:33:08Z", "updated_at": "2013-11-06T21:37:36Z", "html_url": "https://github.com/airbnb/synapse/pull/18#discussion_r7478960", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/18", "author_association": "NONE", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7478960"}, "html": {"href": "https://github.com/airbnb/synapse/pull/18#discussion_r7478960"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/18"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7478960/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7436978", "pull_request_review_id": null, "id": 7436978, "diff_hunk": "@@ -0,0 +1,102 @@\n+require_relative \"./base\"\n+require 'docker'\n+\n+module Synapse\n+  class DockerWatcher < BaseWatcher\n+    def start\n+      @check_interval = @discovery['check_interval'] || 15.0\n+      watch\n+    end\n+\n+    private\n+    def validate_discovery_opts\n+      raise ArgumentError, \"invalid discovery method #{@discovery['method']}\" \\\n+        unless @discovery['method'] == 'docker'\n+      raise ArgumentError, \"a non-empty list of servers is required\" \\\n+        if @discovery['servers'].empty?", "path": "lib/synapse/service_watcher/docker.rb", "position": null, "original_position": 16, "commit_id": "d69192dcdef78fd8cf277b2e75e281aebf14e1b1", "original_commit_id": "a5653de258cf8befe1236e107f80f31302fe6c2d", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "will you fail was a non-pretty message if `servers` isn't even specified? `undefined method`empty?' for nil:NilClass` \n\nthis might be true for other arguments in this section. i would do `if @discovery['servers'].nil? || @discovery['servers'].empty?`\n", "created_at": "2013-11-05T17:00:09Z", "updated_at": "2013-11-12T18:05:29Z", "html_url": "https://github.com/airbnb/synapse/pull/19#discussion_r7436978", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/19", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7436978"}, "html": {"href": "https://github.com/airbnb/synapse/pull/19#discussion_r7436978"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/19"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7436978/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7437019", "pull_request_review_id": null, "id": 7437019, "diff_hunk": "@@ -0,0 +1,102 @@\n+require_relative \"./base\"\n+require 'docker'\n+\n+module Synapse\n+  class DockerWatcher < BaseWatcher\n+    def start\n+      @check_interval = @discovery['check_interval'] || 15.0\n+      watch\n+    end\n+\n+    private\n+    def validate_discovery_opts\n+      raise ArgumentError, \"invalid discovery method #{@discovery['method']}\" \\\n+        unless @discovery['method'] == 'docker'\n+      raise ArgumentError, \"a non-empty list of servers is required\" \\\n+        if @discovery['servers'].empty?\n+      raise ArgumentError, \"non-empty image_name required\" \\\n+        if @discovery['image_name'].nil? or @discovery['image_name'].empty?\n+      raise ArgumentError, \"container_port required\" \\\n+        if @discovery['container_port'].nil?\n+    end\n+\n+    def watch\n+      @watcher = Thread.new do", "path": "lib/synapse/service_watcher/docker.rb", "position": null, "original_position": 24, "commit_id": "d69192dcdef78fd8cf277b2e75e281aebf14e1b1", "original_commit_id": "a5653de258cf8befe1236e107f80f31302fe6c2d", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "style: to avoid an extra level of indentation in the main function, i would put the Thread starting in the `start` method\n", "created_at": "2013-11-05T17:01:33Z", "updated_at": "2013-11-12T18:05:29Z", "html_url": "https://github.com/airbnb/synapse/pull/19#discussion_r7437019", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/19", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7437019"}, "html": {"href": "https://github.com/airbnb/synapse/pull/19#discussion_r7437019"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/19"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7437019/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7439488", "pull_request_review_id": null, "id": 7439488, "diff_hunk": "@@ -0,0 +1,102 @@\n+require_relative \"./base\"\n+require 'docker'\n+\n+module Synapse\n+  class DockerWatcher < BaseWatcher\n+    def start\n+      @check_interval = @discovery['check_interval'] || 15.0\n+      watch\n+    end\n+\n+    private\n+    def validate_discovery_opts\n+      raise ArgumentError, \"invalid discovery method #{@discovery['method']}\" \\\n+        unless @discovery['method'] == 'docker'\n+      raise ArgumentError, \"a non-empty list of servers is required\" \\\n+        if @discovery['servers'].empty?", "path": "lib/synapse/service_watcher/docker.rb", "position": null, "original_position": 16, "commit_id": "d69192dcdef78fd8cf277b2e75e281aebf14e1b1", "original_commit_id": "a5653de258cf8befe1236e107f80f31302fe6c2d", "user": {"login": "rgarcia", "id": 72655, "avatar_url": "https://avatars3.githubusercontent.com/u/72655?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rgarcia", "html_url": "https://github.com/rgarcia", "followers_url": "https://api.github.com/users/rgarcia/followers", "following_url": "https://api.github.com/users/rgarcia/following{/other_user}", "gists_url": "https://api.github.com/users/rgarcia/gists{/gist_id}", "starred_url": "https://api.github.com/users/rgarcia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rgarcia/subscriptions", "organizations_url": "https://api.github.com/users/rgarcia/orgs", "repos_url": "https://api.github.com/users/rgarcia/repos", "events_url": "https://api.github.com/users/rgarcia/events{/privacy}", "received_events_url": "https://api.github.com/users/rgarcia/received_events", "type": "User", "site_admin": false}, "body": "60dc37d\n", "created_at": "2013-11-05T18:08:14Z", "updated_at": "2013-11-12T18:05:29Z", "html_url": "https://github.com/airbnb/synapse/pull/19#discussion_r7439488", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/19", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7439488"}, "html": {"href": "https://github.com/airbnb/synapse/pull/19#discussion_r7439488"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/19"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7439488/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7439491", "pull_request_review_id": null, "id": 7439491, "diff_hunk": "@@ -0,0 +1,102 @@\n+require_relative \"./base\"\n+require 'docker'\n+\n+module Synapse\n+  class DockerWatcher < BaseWatcher\n+    def start\n+      @check_interval = @discovery['check_interval'] || 15.0\n+      watch\n+    end\n+\n+    private\n+    def validate_discovery_opts\n+      raise ArgumentError, \"invalid discovery method #{@discovery['method']}\" \\\n+        unless @discovery['method'] == 'docker'\n+      raise ArgumentError, \"a non-empty list of servers is required\" \\\n+        if @discovery['servers'].empty?\n+      raise ArgumentError, \"non-empty image_name required\" \\\n+        if @discovery['image_name'].nil? or @discovery['image_name'].empty?\n+      raise ArgumentError, \"container_port required\" \\\n+        if @discovery['container_port'].nil?\n+    end\n+\n+    def watch\n+      @watcher = Thread.new do", "path": "lib/synapse/service_watcher/docker.rb", "position": null, "original_position": 24, "commit_id": "d69192dcdef78fd8cf277b2e75e281aebf14e1b1", "original_commit_id": "a5653de258cf8befe1236e107f80f31302fe6c2d", "user": {"login": "rgarcia", "id": 72655, "avatar_url": "https://avatars3.githubusercontent.com/u/72655?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rgarcia", "html_url": "https://github.com/rgarcia", "followers_url": "https://api.github.com/users/rgarcia/followers", "following_url": "https://api.github.com/users/rgarcia/following{/other_user}", "gists_url": "https://api.github.com/users/rgarcia/gists{/gist_id}", "starred_url": "https://api.github.com/users/rgarcia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rgarcia/subscriptions", "organizations_url": "https://api.github.com/users/rgarcia/orgs", "repos_url": "https://api.github.com/users/rgarcia/repos", "events_url": "https://api.github.com/users/rgarcia/events{/privacy}", "received_events_url": "https://api.github.com/users/rgarcia/received_events", "type": "User", "site_admin": false}, "body": "edabd03\n", "created_at": "2013-11-05T18:08:15Z", "updated_at": "2013-11-12T18:05:29Z", "html_url": "https://github.com/airbnb/synapse/pull/19#discussion_r7439491", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/19", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7439491"}, "html": {"href": "https://github.com/airbnb/synapse/pull/19#discussion_r7439491"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/19"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7439491/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7579939", "pull_request_review_id": null, "id": 7579939, "diff_hunk": "@@ -0,0 +1,102 @@\n+require_relative \"./base\"\n+require 'docker'\n+\n+module Synapse\n+  class DockerWatcher < BaseWatcher\n+    def start\n+      @check_interval = @discovery['check_interval'] || 15.0\n+      @watcher = Thread.new do\n+        watch\n+      end\n+    end\n+\n+    private\n+    def validate_discovery_opts\n+      raise ArgumentError, \"invalid discovery method #{@discovery['method']}\" \\\n+        unless @discovery['method'] == 'docker'\n+      raise ArgumentError, \"a non-empty list of servers is required\" \\\n+        if @discovery['servers'].nil? or @discovery['servers'].empty?\n+      raise ArgumentError, \"non-empty image_name required\" \\\n+        if @discovery['image_name'].nil? or @discovery['image_name'].empty?\n+      raise ArgumentError, \"container_port required\" \\\n+        if @discovery['container_port'].nil?\n+    end\n+\n+    def watch\n+      last_containers = containers", "path": "lib/synapse/service_watcher/docker.rb", "position": null, "original_position": 26, "commit_id": "d69192dcdef78fd8cf277b2e75e281aebf14e1b1", "original_commit_id": "edabd035cfafda6fb176e4f7055fe317bfe11e13", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "upon startup, if your call to `containers` fails, then your thread will exit with an exception. synapse will keep running, but you will never discover anything again. i think the solution is to initialize `last_containers` to an empty list, or just to `nil` and get rid of the initial call to `configure_backends`; in your first loop, you will discover a containers list, and it will be different from `last_containers` so you'll just call `configure_backends` at that point.\n", "created_at": "2013-11-12T01:07:02Z", "updated_at": "2013-11-12T18:05:29Z", "html_url": "https://github.com/airbnb/synapse/pull/19#discussion_r7579939", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/19", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7579939"}, "html": {"href": "https://github.com/airbnb/synapse/pull/19#discussion_r7579939"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/19"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7579939/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7579951", "pull_request_review_id": null, "id": 7579951, "diff_hunk": "@@ -0,0 +1,102 @@\n+require_relative \"./base\"\n+require 'docker'\n+\n+module Synapse\n+  class DockerWatcher < BaseWatcher\n+    def start\n+      @check_interval = @discovery['check_interval'] || 15.0\n+      @watcher = Thread.new do\n+        watch\n+      end\n+    end\n+\n+    private\n+    def validate_discovery_opts\n+      raise ArgumentError, \"invalid discovery method #{@discovery['method']}\" \\\n+        unless @discovery['method'] == 'docker'\n+      raise ArgumentError, \"a non-empty list of servers is required\" \\\n+        if @discovery['servers'].nil? or @discovery['servers'].empty?\n+      raise ArgumentError, \"non-empty image_name required\" \\\n+        if @discovery['image_name'].nil? or @discovery['image_name'].empty?\n+      raise ArgumentError, \"container_port required\" \\\n+        if @discovery['container_port'].nil?\n+    end\n+\n+    def watch\n+      last_containers = containers", "path": "lib/synapse/service_watcher/docker.rb", "position": null, "original_position": 26, "commit_id": "d69192dcdef78fd8cf277b2e75e281aebf14e1b1", "original_commit_id": "edabd035cfafda6fb176e4f7055fe317bfe11e13", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "this approach allows you to leverage your existing failure handling and avoid special cases\n", "created_at": "2013-11-12T01:07:37Z", "updated_at": "2013-11-12T18:05:29Z", "html_url": "https://github.com/airbnb/synapse/pull/19#discussion_r7579951", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/19", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7579951"}, "html": {"href": "https://github.com/airbnb/synapse/pull/19#discussion_r7579951"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/19"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7579951/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7600521", "pull_request_review_id": null, "id": 7600521, "diff_hunk": "@@ -0,0 +1,102 @@\n+require_relative \"./base\"\n+require 'docker'\n+\n+module Synapse\n+  class DockerWatcher < BaseWatcher\n+    def start\n+      @check_interval = @discovery['check_interval'] || 15.0\n+      @watcher = Thread.new do\n+        watch\n+      end\n+    end\n+\n+    private\n+    def validate_discovery_opts\n+      raise ArgumentError, \"invalid discovery method #{@discovery['method']}\" \\\n+        unless @discovery['method'] == 'docker'\n+      raise ArgumentError, \"a non-empty list of servers is required\" \\\n+        if @discovery['servers'].nil? or @discovery['servers'].empty?\n+      raise ArgumentError, \"non-empty image_name required\" \\\n+        if @discovery['image_name'].nil? or @discovery['image_name'].empty?\n+      raise ArgumentError, \"container_port required\" \\\n+        if @discovery['container_port'].nil?\n+    end\n+\n+    def watch\n+      last_containers = containers", "path": "lib/synapse/service_watcher/docker.rb", "position": null, "original_position": 26, "commit_id": "d69192dcdef78fd8cf277b2e75e281aebf14e1b1", "original_commit_id": "edabd035cfafda6fb176e4f7055fe317bfe11e13", "user": {"login": "rgarcia", "id": 72655, "avatar_url": "https://avatars3.githubusercontent.com/u/72655?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rgarcia", "html_url": "https://github.com/rgarcia", "followers_url": "https://api.github.com/users/rgarcia/followers", "following_url": "https://api.github.com/users/rgarcia/following{/other_user}", "gists_url": "https://api.github.com/users/rgarcia/gists{/gist_id}", "starred_url": "https://api.github.com/users/rgarcia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rgarcia/subscriptions", "organizations_url": "https://api.github.com/users/rgarcia/orgs", "repos_url": "https://api.github.com/users/rgarcia/repos", "events_url": "https://api.github.com/users/rgarcia/events{/privacy}", "received_events_url": "https://api.github.com/users/rgarcia/received_events", "type": "User", "site_admin": false}, "body": "d69192d\n\nThe dns watcher uses this pattern too, fwiw\n", "created_at": "2013-11-12T18:07:25Z", "updated_at": "2013-11-12T18:07:25Z", "html_url": "https://github.com/airbnb/synapse/pull/19#discussion_r7600521", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/19", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7600521"}, "html": {"href": "https://github.com/airbnb/synapse/pull/19#discussion_r7600521"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/19"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7600521/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7705352", "pull_request_review_id": null, "id": 7705352, "diff_hunk": "@@ -0,0 +1,9 @@\n+build: synapse.jar\n+\n+push:\n+\tcurl -X PUT -F file=@synapse.jar https://ssspy.d.musta.ch/synapse/synapse-dev.jar", "path": "Makefile", "position": null, "original_position": 4, "commit_id": "c939916d3d52e5529c7e934d1ff6e9e915dfd383", "original_commit_id": "a59074c06dfdd564a2a54422b5f9099d5e5d3838", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "public repo, remember?\n", "created_at": "2013-11-15T23:01:09Z", "updated_at": "2013-12-02T18:21:38Z", "html_url": "https://github.com/airbnb/synapse/pull/27#discussion_r7705352", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/27", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7705352"}, "html": {"href": "https://github.com/airbnb/synapse/pull/27#discussion_r7705352"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/27"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7705352/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7705383", "pull_request_review_id": null, "id": 7705383, "diff_hunk": "@@ -0,0 +1,9 @@\n+build: synapse.jar\n+\n+push:\n+\tcurl -X PUT -F file=@synapse.jar https://ssspy.d.musta.ch/synapse/synapse-dev.jar", "path": "Makefile", "position": null, "original_position": 4, "commit_id": "c939916d3d52e5529c7e934d1ff6e9e915dfd383", "original_commit_id": "a59074c06dfdd564a2a54422b5f9099d5e5d3838", "user": {"login": "brndnmtthws", "id": 3129093, "avatar_url": "https://avatars1.githubusercontent.com/u/3129093?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brndnmtthws", "html_url": "https://github.com/brndnmtthws", "followers_url": "https://api.github.com/users/brndnmtthws/followers", "following_url": "https://api.github.com/users/brndnmtthws/following{/other_user}", "gists_url": "https://api.github.com/users/brndnmtthws/gists{/gist_id}", "starred_url": "https://api.github.com/users/brndnmtthws/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brndnmtthws/subscriptions", "organizations_url": "https://api.github.com/users/brndnmtthws/orgs", "repos_url": "https://api.github.com/users/brndnmtthws/repos", "events_url": "https://api.github.com/users/brndnmtthws/events{/privacy}", "received_events_url": "https://api.github.com/users/brndnmtthws/received_events", "type": "User", "site_admin": false}, "body": "Yeah, it was in the Makefile from the nerve repo and I just copypasta'd.  I'll drop it.\n", "created_at": "2013-11-15T23:02:25Z", "updated_at": "2013-12-02T18:21:38Z", "html_url": "https://github.com/airbnb/synapse/pull/27#discussion_r7705383", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/27", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7705383"}, "html": {"href": "https://github.com/airbnb/synapse/pull/27#discussion_r7705383"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/27"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/7705383/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/8105894", "pull_request_review_id": null, "id": 8105894, "diff_hunk": "@@ -51,7 +51,12 @@ def sleep_until_next_check(start_time)\n     def containers\n       backends = @discovery['servers'].map do |server|\n         Docker.url = \"http://#{server['host']}:#{server['port'] || 4243}\"\n-        cnts = Docker::Util.parse_json(Docker.connection.get('/containers/json', {}))\n+        begin\n+          cnts = Docker::Util.parse_json(Docker.connection.get('/containers/json', {}))\n+        rescue => e\n+          log.warn \"Error polling docker host #{Docker.url}: #{e.inspect}\"", "path": "lib/synapse/service_watcher/docker.rb", "position": null, "original_position": 8, "commit_id": "624b59987c09c9876b42121af8d17d6769709932", "original_commit_id": "d8d1a85bb33cf3962a2c6a9fba3aa4a3cd5cb3eb", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "please follow the log format; synapse prefixes all log messages with '\"synapse:\"`\n", "created_at": "2013-12-04T19:03:49Z", "updated_at": "2013-12-04T19:08:45Z", "html_url": "https://github.com/airbnb/synapse/pull/32#discussion_r8105894", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/32", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/8105894"}, "html": {"href": "https://github.com/airbnb/synapse/pull/32#discussion_r8105894"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/32"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/8105894/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/8106094", "pull_request_review_id": null, "id": 8106094, "diff_hunk": "@@ -51,7 +51,12 @@ def sleep_until_next_check(start_time)\n     def containers\n       backends = @discovery['servers'].map do |server|\n         Docker.url = \"http://#{server['host']}:#{server['port'] || 4243}\"\n-        cnts = Docker::Util.parse_json(Docker.connection.get('/containers/json', {}))\n+        begin\n+          cnts = Docker::Util.parse_json(Docker.connection.get('/containers/json', {}))\n+        rescue => e\n+          log.warn \"Error polling docker host #{Docker.url}: #{e.inspect}\"", "path": "lib/synapse/service_watcher/docker.rb", "position": null, "original_position": 8, "commit_id": "624b59987c09c9876b42121af8d17d6769709932", "original_commit_id": "d8d1a85bb33cf3962a2c6a9fba3aa4a3cd5cb3eb", "user": {"login": "rgarcia", "id": 72655, "avatar_url": "https://avatars3.githubusercontent.com/u/72655?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rgarcia", "html_url": "https://github.com/rgarcia", "followers_url": "https://api.github.com/users/rgarcia/followers", "following_url": "https://api.github.com/users/rgarcia/following{/other_user}", "gists_url": "https://api.github.com/users/rgarcia/gists{/gist_id}", "starred_url": "https://api.github.com/users/rgarcia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rgarcia/subscriptions", "organizations_url": "https://api.github.com/users/rgarcia/orgs", "repos_url": "https://api.github.com/users/rgarcia/repos", "events_url": "https://api.github.com/users/rgarcia/events{/privacy}", "received_events_url": "https://api.github.com/users/rgarcia/received_events", "type": "User", "site_admin": false}, "body": "624b59987c09c9876b42121af8d17d6769709932\n", "created_at": "2013-12-04T19:09:02Z", "updated_at": "2013-12-04T19:09:02Z", "html_url": "https://github.com/airbnb/synapse/pull/32#discussion_r8106094", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/32", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/8106094"}, "html": {"href": "https://github.com/airbnb/synapse/pull/32#discussion_r8106094"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/32"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/8106094/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/8848849", "pull_request_review_id": null, "id": 8848849, "diff_hunk": "@@ -50,6 +50,15 @@ def run\n         loops += 1\n         log.debug \"synapse: still running at #{Time.now}\" if (loops % 60) == 0\n       end\n+\n+    rescue StandardError => e\n+      log.error \"synapse: encountered unexpected exception #{e.inspect} in main thread\"\n+      throw e", "path": "lib/synapse.rb", "position": null, "original_position": 7, "commit_id": "248784a0d6adde2bfbec962b763df0352eed72ae", "original_commit_id": "a33be1c845f41ad480461911047f34b85dd90338", "user": {"login": "schleyfox", "id": 4259, "avatar_url": "https://avatars0.githubusercontent.com/u/4259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/schleyfox", "html_url": "https://github.com/schleyfox", "followers_url": "https://api.github.com/users/schleyfox/followers", "following_url": "https://api.github.com/users/schleyfox/following{/other_user}", "gists_url": "https://api.github.com/users/schleyfox/gists{/gist_id}", "starred_url": "https://api.github.com/users/schleyfox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schleyfox/subscriptions", "organizations_url": "https://api.github.com/users/schleyfox/orgs", "repos_url": "https://api.github.com/users/schleyfox/repos", "events_url": "https://api.github.com/users/schleyfox/events{/privacy}", "received_events_url": "https://api.github.com/users/schleyfox/received_events", "type": "User", "site_admin": false}, "body": "raise\n", "created_at": "2014-01-14T02:12:19Z", "updated_at": "2014-01-14T02:25:00Z", "html_url": "https://github.com/airbnb/synapse/pull/36#discussion_r8848849", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/36", "author_association": "OWNER", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/8848849"}, "html": {"href": "https://github.com/airbnb/synapse/pull/36#discussion_r8848849"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/36"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/8848849/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/8771794", "pull_request_review_id": null, "id": 8771794, "diff_hunk": "@@ -616,7 +616,7 @@ def generate_frontend_stanza(watcher, config)\n       stanza = [\n         \"\\nfrontend #{watcher.name}\",\n         config.map {|c| \"\\t#{c}\"},\n-        \"\\tbind localhost:#{watcher.haproxy['port']}\",\n+        \"\\tbind #{@opts['bind_address'] or 'localhost'}:#{watcher.haproxy['port']}\",", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 5, "commit_id": "03714c9e5cf48290ae9e3b7a21211600e7f9d95c", "original_commit_id": "aee44af6fd089768e3f30fed55024ed9171f38d2", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "okay, lets merge this; two comments: use `||` instead of `or` -- this is in most ruby style guides because of the unclear precedence rules for `or`. also, can you add some documentation on this option?\n", "created_at": "2014-01-09T21:29:13Z", "updated_at": "2014-01-15T19:14:06Z", "html_url": "https://github.com/airbnb/synapse/pull/31#discussion_r8771794", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/31", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/8771794"}, "html": {"href": "https://github.com/airbnb/synapse/pull/31#discussion_r8771794"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/31"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/8771794/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/8771934", "pull_request_review_id": null, "id": 8771934, "diff_hunk": "@@ -616,7 +616,7 @@ def generate_frontend_stanza(watcher, config)\n       stanza = [\n         \"\\nfrontend #{watcher.name}\",\n         config.map {|c| \"\\t#{c}\"},\n-        \"\\tbind localhost:#{watcher.haproxy['port']}\",\n+        \"\\tbind #{@opts['bind_address'] or 'localhost'}:#{watcher.haproxy['port']}\",", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 5, "commit_id": "03714c9e5cf48290ae9e3b7a21211600e7f9d95c", "original_commit_id": "aee44af6fd089768e3f30fed55024ed9171f38d2", "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "body": "Willdo!\n", "created_at": "2014-01-09T21:33:24Z", "updated_at": "2014-01-15T19:14:06Z", "html_url": "https://github.com/airbnb/synapse/pull/31#discussion_r8771934", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/31", "author_association": "NONE", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/8771934"}, "html": {"href": "https://github.com/airbnb/synapse/pull/31#discussion_r8771934"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/31"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/8771934/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/8884016", "pull_request_review_id": null, "id": 8884016, "diff_hunk": "@@ -197,6 +197,9 @@ The `haproxy` section of the config file has the following options:\n * `do_reloads`: whether or not Synapse will reload HAProxy (default to `true`)\n * `global`: options listed here will be written into the `global` section of the HAProxy config\n * `defaults`: options listed here will be written into the `defaults` section of the HAProxy config\n+* `bind_address`: force HAProxy to listen  on this address (default is 127.0.0.1)", "path": "README.md", "position": null, "original_position": 4, "commit_id": "03714c9e5cf48290ae9e3b7a21211600e7f9d95c", "original_commit_id": "ec650990ea388ff3ea84991f21f4479feebe65c1", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "s/default is 127.0.0.1/default is `localhost`/\n\nalmost there, thanks for the work!\n", "created_at": "2014-01-15T01:28:16Z", "updated_at": "2014-01-15T19:14:06Z", "html_url": "https://github.com/airbnb/synapse/pull/31#discussion_r8884016", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/31", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/8884016"}, "html": {"href": "https://github.com/airbnb/synapse/pull/31#discussion_r8884016"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/31"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/8884016/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/8908066", "pull_request_review_id": null, "id": 8908066, "diff_hunk": "@@ -197,6 +197,9 @@ The `haproxy` section of the config file has the following options:\n * `do_reloads`: whether or not Synapse will reload HAProxy (default to `true`)\n * `global`: options listed here will be written into the `global` section of the HAProxy config\n * `defaults`: options listed here will be written into the `defaults` section of the HAProxy config\n+* `bind_address`: force HAProxy to listen  on this address (default is 127.0.0.1)", "path": "README.md", "position": null, "original_position": 4, "commit_id": "03714c9e5cf48290ae9e3b7a21211600e7f9d95c", "original_commit_id": "ec650990ea388ff3ea84991f21f4479feebe65c1", "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "body": "Done!\n", "created_at": "2014-01-15T19:16:16Z", "updated_at": "2014-01-15T19:16:16Z", "html_url": "https://github.com/airbnb/synapse/pull/31#discussion_r8908066", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/31", "author_association": "NONE", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/8908066"}, "html": {"href": "https://github.com/airbnb/synapse/pull/31#discussion_r8908066"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/31"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/8908066/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/9652376", "pull_request_review_id": null, "id": 9652376, "diff_hunk": "@@ -593,20 +604,38 @@ def parse_watcher_config(watcher)\n           })\n \n         # pick only those fields that are valid and warn about the invalid ones\n-        config[section].select!{|setting|\n-          parsed_setting = setting.strip.gsub(/\\s+/, ' ').downcase\n-          if @@section_fields[section].any? {|field| parsed_setting.start_with?(field)}\n-            true\n-          else\n-            log.warn \"synapse: service #{watcher.name} contains invalid #{section} setting: '#{setting}'\"\n-            false\n-          end\n-        }\n+        config[section] = validate_haproxy_config(watcher.name, section, config[section])\n       end\n \n       return config\n     end\n \n+    def validate_haproxy_config(name, section, snippet)\n+      return snippet.select {|setting|\n+        parsed_setting = setting.strip.gsub(/\\s+/, ' ').downcase\n+        if @@section_fields[section].any? {|field| parsed_setting.start_with?(field)}\n+          true\n+        else\n+          log.warn \"synapse: service #{name} contains invalid #{section} setting: '#{setting}', discarding\"\n+          false\n+        end\n+      }\n+    end\n+\n+    # pull out the shared frontend section if any\n+    def generate_shared_frontend\n+      if @opts.include?('shared_frontend')", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 59, "commit_id": "da01d39787f95ded7d4c716bbfff08d5c3c01942", "original_commit_id": "9672e83efb7c0d5f8b0245235480089400c9c53e", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "`return nil unless @opts.include?('shared_frontend')`\n", "created_at": "2014-02-12T01:22:26Z", "updated_at": "2014-02-13T20:10:10Z", "html_url": "https://github.com/airbnb/synapse/pull/30#discussion_r9652376", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/30", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/9652376"}, "html": {"href": "https://github.com/airbnb/synapse/pull/30#discussion_r9652376"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/30"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/9652376/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/9652449", "pull_request_review_id": null, "id": 9652449, "diff_hunk": "@@ -593,20 +604,38 @@ def parse_watcher_config(watcher)\n           })\n \n         # pick only those fields that are valid and warn about the invalid ones\n-        config[section].select!{|setting|\n-          parsed_setting = setting.strip.gsub(/\\s+/, ' ').downcase\n-          if @@section_fields[section].any? {|field| parsed_setting.start_with?(field)}\n-            true\n-          else\n-            log.warn \"synapse: service #{watcher.name} contains invalid #{section} setting: '#{setting}'\"\n-            false\n-          end\n-        }\n+        config[section] = validate_haproxy_config(watcher.name, section, config[section])\n       end\n \n       return config\n     end\n \n+    def validate_haproxy_config(name, section, snippet)\n+      return snippet.select {|setting|\n+        parsed_setting = setting.strip.gsub(/\\s+/, ' ').downcase\n+        if @@section_fields[section].any? {|field| parsed_setting.start_with?(field)}\n+          true\n+        else\n+          log.warn \"synapse: service #{name} contains invalid #{section} setting: '#{setting}', discarding\"\n+          false\n+        end\n+      }\n+    end\n+\n+    # pull out the shared frontend section if any\n+    def generate_shared_frontend\n+      if @opts.include?('shared_frontend')\n+        log.debug \"synapse: found a shared frontend section\"\n+        shared_frontend = [\"\\nfrontend shared-frontend\"]\n+        @opts['shared_frontend'] = validate_haproxy_config('shared frontend', 'frontend', @opts['shared_frontend'])", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 62, "commit_id": "da01d39787f95ded7d4c716bbfff08d5c3c01942", "original_commit_id": "9672e83efb7c0d5f8b0245235480089400c9c53e", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "instead of assigning back to `@opts`, use normal memoization here; something like:\n\n```\n@shared_frontend ||= validate_haproxy_config('shared frontend', 'frontend', @opts['shared_frontend']).map{|l| \"\\t#{l}\"}\n```\n", "created_at": "2014-02-12T01:25:44Z", "updated_at": "2014-02-13T20:10:10Z", "html_url": "https://github.com/airbnb/synapse/pull/30#discussion_r9652449", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/30", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/9652449"}, "html": {"href": "https://github.com/airbnb/synapse/pull/30#discussion_r9652449"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/30"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/9652449/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/9652503", "pull_request_review_id": null, "id": 9652503, "diff_hunk": "@@ -593,20 +604,38 @@ def parse_watcher_config(watcher)\n           })\n \n         # pick only those fields that are valid and warn about the invalid ones\n-        config[section].select!{|setting|\n-          parsed_setting = setting.strip.gsub(/\\s+/, ' ').downcase\n-          if @@section_fields[section].any? {|field| parsed_setting.start_with?(field)}\n-            true\n-          else\n-            log.warn \"synapse: service #{watcher.name} contains invalid #{section} setting: '#{setting}'\"\n-            false\n-          end\n-        }\n+        config[section] = validate_haproxy_config(watcher.name, section, config[section])\n       end\n \n       return config\n     end\n \n+    def validate_haproxy_config(name, section, snippet)", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 45, "commit_id": "da01d39787f95ded7d4c716bbfff08d5c3c01942", "original_commit_id": "9672e83efb7c0d5f8b0245235480089400c9c53e", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "nitpick: maybe call this `validate_haproxy_stanza(stanza, stanza_type, service_name)` ? \n", "created_at": "2014-02-12T01:28:28Z", "updated_at": "2014-02-13T20:10:10Z", "html_url": "https://github.com/airbnb/synapse/pull/30#discussion_r9652503", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/30", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/9652503"}, "html": {"href": "https://github.com/airbnb/synapse/pull/30#discussion_r9652503"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/30"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/9652503/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/9652651", "pull_request_review_id": null, "id": 9652651, "diff_hunk": "@@ -198,9 +199,96 @@ The `haproxy` section of the config file has the following options:\n * `global`: options listed here will be written into the `global` section of the HAProxy config\n * `defaults`: options listed here will be written into the `defaults` section of the HAProxy config\n * `bind_address`: force HAProxy to listen  on this address (default is localhost)\n+* `shared_fronted`: (OPTIONAL) additional lines passed to the HAProxy config used to configure a shared HTTP frontend (see below)\n \n Note that a non-default `bind_address` can be dangerous: it is up to you to ensure that HAProxy will not attempt to bind an address:port combination that is not already in use by one of your services.\n \n+### HAProxy shared HTTP Frontend ###\n+\n+For HTTP-only services, it it not always necessary or desirable to dedicate a TCP port per service, since HAProxy can route traffic based on host headers.  To support this, the optional `shared_fronted` section can be added to both the `haproxy` section and each indvidual service definition: synapse will concatenate them all into a single frontend section in the generated haproxy.cfg file.  Note that synapse does not assemble the routing ACLs for you: you have to do that yourself based on your needs.  (This is probably most useful in combination with the `service_conf_dir` directive in a case where the individual service config files are being distributed by a configuration manager such as puppet or chef, or bundled into service packages.) For example:", "path": "README.md", "position": null, "original_position": 18, "commit_id": "da01d39787f95ded7d4c716bbfff08d5c3c01942", "original_commit_id": "9672e83efb7c0d5f8b0245235480089400c9c53e", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "nitpick: one sentence per line makes it easier to read future diffs\n", "created_at": "2014-02-12T01:32:42Z", "updated_at": "2014-02-13T20:10:10Z", "html_url": "https://github.com/airbnb/synapse/pull/30#discussion_r9652651", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/30", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/9652651"}, "html": {"href": "https://github.com/airbnb/synapse/pull/30#discussion_r9652651"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/30"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/9652651/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/9652804", "pull_request_review_id": null, "id": 9652804, "diff_hunk": "@@ -543,13 +543,24 @@ def update_config(watchers)\n     # generates a new config based on the state of the watchers\n     def generate_config(watchers)\n       new_config = generate_base_config\n+      shared_frontend = generate_shared_frontend\n \n       watchers.each do |watcher|\n         @watcher_configs[watcher.name] ||= parse_watcher_config(watcher)\n-\n         new_config << generate_frontend_stanza(watcher, @watcher_configs[watcher.name]['frontend'])\n         new_config << generate_backend_stanza(watcher, @watcher_configs[watcher.name]['backend'])\n+        if watcher.haproxy.include?('shared_frontend')\n+          if shared_frontend == nil\n+            log.warn \"synapse: service #{watcher.name} contains a shared frontend section but the base config does not! skipping.\"\n+          else\n+            watcher.haproxy['shared_frontend'].each do |line|\n+              shared_frontend << \"\\t#{line}\"", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 16, "commit_id": "da01d39787f95ded7d4c716bbfff08d5c3c01942", "original_commit_id": "9672e83efb7c0d5f8b0245235480089400c9c53e", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "well now these lines aren't validated even though the default config was validated; a suggested flow:\n\n```\nshared_frontend_lines = @opts['shared_frontend'] || nil\n...\nelse\n  shared_frontend_lines << watcher.haproxy['shared_frontend'].map{|l| \"\\t#{l}}\nend\n...\nnew_config << generate_shared_frontend(shared_frontend_lines.flatten)\n```\n", "created_at": "2014-02-12T01:38:57Z", "updated_at": "2014-02-13T20:10:10Z", "html_url": "https://github.com/airbnb/synapse/pull/30#discussion_r9652804", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/30", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/9652804"}, "html": {"href": "https://github.com/airbnb/synapse/pull/30#discussion_r9652804"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/30"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/9652804/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/9652819", "pull_request_review_id": null, "id": 9652819, "diff_hunk": "@@ -543,13 +543,24 @@ def update_config(watchers)\n     # generates a new config based on the state of the watchers\n     def generate_config(watchers)\n       new_config = generate_base_config\n+      shared_frontend = generate_shared_frontend\n \n       watchers.each do |watcher|\n         @watcher_configs[watcher.name] ||= parse_watcher_config(watcher)\n-\n         new_config << generate_frontend_stanza(watcher, @watcher_configs[watcher.name]['frontend'])\n         new_config << generate_backend_stanza(watcher, @watcher_configs[watcher.name]['backend'])\n+        if watcher.haproxy.include?('shared_frontend')\n+          if shared_frontend == nil\n+            log.warn \"synapse: service #{watcher.name} contains a shared frontend section but the base config does not! skipping.\"\n+          else\n+            watcher.haproxy['shared_frontend'].each do |line|\n+              shared_frontend << \"\\t#{line}\"", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 16, "commit_id": "da01d39787f95ded7d4c716bbfff08d5c3c01942", "original_commit_id": "9672e83efb7c0d5f8b0245235480089400c9c53e", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "obviously if you do this don't memoize the config in `generate_shared_frontend`\n", "created_at": "2014-02-12T01:39:36Z", "updated_at": "2014-02-13T20:10:10Z", "html_url": "https://github.com/airbnb/synapse/pull/30#discussion_r9652819", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/30", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/9652819"}, "html": {"href": "https://github.com/airbnb/synapse/pull/30#discussion_r9652819"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/30"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/9652819/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/9721991", "pull_request_review_id": null, "id": 9721991, "diff_hunk": "@@ -593,20 +604,38 @@ def parse_watcher_config(watcher)\n           })\n \n         # pick only those fields that are valid and warn about the invalid ones\n-        config[section].select!{|setting|\n-          parsed_setting = setting.strip.gsub(/\\s+/, ' ').downcase\n-          if @@section_fields[section].any? {|field| parsed_setting.start_with?(field)}\n-            true\n-          else\n-            log.warn \"synapse: service #{watcher.name} contains invalid #{section} setting: '#{setting}'\"\n-            false\n-          end\n-        }\n+        config[section] = validate_haproxy_config(watcher.name, section, config[section])\n       end\n \n       return config\n     end\n \n+    def validate_haproxy_config(name, section, snippet)\n+      return snippet.select {|setting|\n+        parsed_setting = setting.strip.gsub(/\\s+/, ' ').downcase\n+        if @@section_fields[section].any? {|field| parsed_setting.start_with?(field)}\n+          true\n+        else\n+          log.warn \"synapse: service #{name} contains invalid #{section} setting: '#{setting}', discarding\"\n+          false\n+        end\n+      }\n+    end\n+\n+    # pull out the shared frontend section if any\n+    def generate_shared_frontend\n+      if @opts.include?('shared_frontend')", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 59, "commit_id": "da01d39787f95ded7d4c716bbfff08d5c3c01942", "original_commit_id": "9672e83efb7c0d5f8b0245235480089400c9c53e", "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "body": "done\n", "created_at": "2014-02-13T19:03:45Z", "updated_at": "2014-02-13T20:10:10Z", "html_url": "https://github.com/airbnb/synapse/pull/30#discussion_r9721991", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/30", "author_association": "NONE", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/9721991"}, "html": {"href": "https://github.com/airbnb/synapse/pull/30#discussion_r9721991"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/30"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/9721991/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/9722384", "pull_request_review_id": null, "id": 9722384, "diff_hunk": "@@ -593,20 +604,38 @@ def parse_watcher_config(watcher)\n           })\n \n         # pick only those fields that are valid and warn about the invalid ones\n-        config[section].select!{|setting|\n-          parsed_setting = setting.strip.gsub(/\\s+/, ' ').downcase\n-          if @@section_fields[section].any? {|field| parsed_setting.start_with?(field)}\n-            true\n-          else\n-            log.warn \"synapse: service #{watcher.name} contains invalid #{section} setting: '#{setting}'\"\n-            false\n-          end\n-        }\n+        config[section] = validate_haproxy_config(watcher.name, section, config[section])\n       end\n \n       return config\n     end\n \n+    def validate_haproxy_config(name, section, snippet)\n+      return snippet.select {|setting|\n+        parsed_setting = setting.strip.gsub(/\\s+/, ' ').downcase\n+        if @@section_fields[section].any? {|field| parsed_setting.start_with?(field)}\n+          true\n+        else\n+          log.warn \"synapse: service #{name} contains invalid #{section} setting: '#{setting}', discarding\"\n+          false\n+        end\n+      }\n+    end\n+\n+    # pull out the shared frontend section if any\n+    def generate_shared_frontend\n+      if @opts.include?('shared_frontend')\n+        log.debug \"synapse: found a shared frontend section\"\n+        shared_frontend = [\"\\nfrontend shared-frontend\"]\n+        @opts['shared_frontend'] = validate_haproxy_config('shared frontend', 'frontend', @opts['shared_frontend'])", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 62, "commit_id": "da01d39787f95ded7d4c716bbfff08d5c3c01942", "original_commit_id": "9672e83efb7c0d5f8b0245235480089400c9c53e", "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "body": "pass; see below. :)\n", "created_at": "2014-02-13T19:12:27Z", "updated_at": "2014-02-13T20:10:10Z", "html_url": "https://github.com/airbnb/synapse/pull/30#discussion_r9722384", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/30", "author_association": "NONE", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/9722384"}, "html": {"href": "https://github.com/airbnb/synapse/pull/30#discussion_r9722384"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/30"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/9722384/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/9722528", "pull_request_review_id": null, "id": 9722528, "diff_hunk": "@@ -593,20 +604,38 @@ def parse_watcher_config(watcher)\n           })\n \n         # pick only those fields that are valid and warn about the invalid ones\n-        config[section].select!{|setting|\n-          parsed_setting = setting.strip.gsub(/\\s+/, ' ').downcase\n-          if @@section_fields[section].any? {|field| parsed_setting.start_with?(field)}\n-            true\n-          else\n-            log.warn \"synapse: service #{watcher.name} contains invalid #{section} setting: '#{setting}'\"\n-            false\n-          end\n-        }\n+        config[section] = validate_haproxy_config(watcher.name, section, config[section])\n       end\n \n       return config\n     end\n \n+    def validate_haproxy_config(name, section, snippet)", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 45, "commit_id": "da01d39787f95ded7d4c716bbfff08d5c3c01942", "original_commit_id": "9672e83efb7c0d5f8b0245235480089400c9c53e", "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "body": "done\n", "created_at": "2014-02-13T19:15:04Z", "updated_at": "2014-02-13T20:10:10Z", "html_url": "https://github.com/airbnb/synapse/pull/30#discussion_r9722528", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/30", "author_association": "NONE", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/9722528"}, "html": {"href": "https://github.com/airbnb/synapse/pull/30#discussion_r9722528"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/30"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/9722528/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/9722600", "pull_request_review_id": null, "id": 9722600, "diff_hunk": "@@ -198,9 +199,96 @@ The `haproxy` section of the config file has the following options:\n * `global`: options listed here will be written into the `global` section of the HAProxy config\n * `defaults`: options listed here will be written into the `defaults` section of the HAProxy config\n * `bind_address`: force HAProxy to listen  on this address (default is localhost)\n+* `shared_fronted`: (OPTIONAL) additional lines passed to the HAProxy config used to configure a shared HTTP frontend (see below)\n \n Note that a non-default `bind_address` can be dangerous: it is up to you to ensure that HAProxy will not attempt to bind an address:port combination that is not already in use by one of your services.\n \n+### HAProxy shared HTTP Frontend ###\n+\n+For HTTP-only services, it it not always necessary or desirable to dedicate a TCP port per service, since HAProxy can route traffic based on host headers.  To support this, the optional `shared_fronted` section can be added to both the `haproxy` section and each indvidual service definition: synapse will concatenate them all into a single frontend section in the generated haproxy.cfg file.  Note that synapse does not assemble the routing ACLs for you: you have to do that yourself based on your needs.  (This is probably most useful in combination with the `service_conf_dir` directive in a case where the individual service config files are being distributed by a configuration manager such as puppet or chef, or bundled into service packages.) For example:", "path": "README.md", "position": null, "original_position": 18, "commit_id": "da01d39787f95ded7d4c716bbfff08d5c3c01942", "original_commit_id": "9672e83efb7c0d5f8b0245235480089400c9c53e", "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "body": "done\n", "created_at": "2014-02-13T19:16:31Z", "updated_at": "2014-02-13T20:10:10Z", "html_url": "https://github.com/airbnb/synapse/pull/30#discussion_r9722600", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/30", "author_association": "NONE", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/9722600"}, "html": {"href": "https://github.com/airbnb/synapse/pull/30#discussion_r9722600"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/30"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/9722600/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/9725127", "pull_request_review_id": null, "id": 9725127, "diff_hunk": "@@ -543,13 +543,24 @@ def update_config(watchers)\n     # generates a new config based on the state of the watchers\n     def generate_config(watchers)\n       new_config = generate_base_config\n+      shared_frontend = generate_shared_frontend\n \n       watchers.each do |watcher|\n         @watcher_configs[watcher.name] ||= parse_watcher_config(watcher)\n-\n         new_config << generate_frontend_stanza(watcher, @watcher_configs[watcher.name]['frontend'])\n         new_config << generate_backend_stanza(watcher, @watcher_configs[watcher.name]['backend'])\n+        if watcher.haproxy.include?('shared_frontend')\n+          if shared_frontend == nil\n+            log.warn \"synapse: service #{watcher.name} contains a shared frontend section but the base config does not! skipping.\"\n+          else\n+            watcher.haproxy['shared_frontend'].each do |line|\n+              shared_frontend << \"\\t#{line}\"", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 16, "commit_id": "da01d39787f95ded7d4c716bbfff08d5c3c01942", "original_commit_id": "9672e83efb7c0d5f8b0245235480089400c9c53e", "user": {"login": "memory", "id": 394064, "avatar_url": "https://avatars0.githubusercontent.com/u/394064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memory", "html_url": "https://github.com/memory", "followers_url": "https://api.github.com/users/memory/followers", "following_url": "https://api.github.com/users/memory/following{/other_user}", "gists_url": "https://api.github.com/users/memory/gists{/gist_id}", "starred_url": "https://api.github.com/users/memory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memory/subscriptions", "organizations_url": "https://api.github.com/users/memory/orgs", "repos_url": "https://api.github.com/users/memory/repos", "events_url": "https://api.github.com/users/memory/events{/privacy}", "received_events_url": "https://api.github.com/users/memory/received_events", "type": "User", "site_admin": false}, "body": "done\n", "created_at": "2014-02-13T20:09:20Z", "updated_at": "2014-02-13T20:10:10Z", "html_url": "https://github.com/airbnb/synapse/pull/30#discussion_r9725127", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/30", "author_association": "NONE", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/9725127"}, "html": {"href": "https://github.com/airbnb/synapse/pull/30#discussion_r9725127"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/30"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/9725127/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12308568", "pull_request_review_id": null, "id": 12308568, "diff_hunk": "@@ -79,7 +83,8 @@ def configure_backends(servers)\n         addresses.map do |address|\n           {\n             'host' => address,\n-            'port' => server['port']\n+            'port' => server['port'],\n+            'name' => server['name'],", "path": "lib/synapse/service_watcher/dns.rb", "position": 37, "original_position": 33, "commit_id": "9243fdf6b4a9c07a1e4054ab0dd59ab5ec55c884", "original_commit_id": "a9486797636fb507e62af895499d90bcf55e7cb5", "user": {"login": "schleyfox", "id": 4259, "avatar_url": "https://avatars0.githubusercontent.com/u/4259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/schleyfox", "html_url": "https://github.com/schleyfox", "followers_url": "https://api.github.com/users/schleyfox/followers", "following_url": "https://api.github.com/users/schleyfox/following{/other_user}", "gists_url": "https://api.github.com/users/schleyfox/gists{/gist_id}", "starred_url": "https://api.github.com/users/schleyfox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schleyfox/subscriptions", "organizations_url": "https://api.github.com/users/schleyfox/orgs", "repos_url": "https://api.github.com/users/schleyfox/repos", "events_url": "https://api.github.com/users/schleyfox/events{/privacy}", "received_events_url": "https://api.github.com/users/schleyfox/received_events", "type": "User", "site_admin": false}, "body": "@igor47 I'm basically undoing: https://github.com/airbnb/synapse/commit/6b66e1bc18c8f9b767a88d5fec6b49a7ca69a914#diff-0e99371a377e31bb01e79735c2b3f621\n\nLooking at our internal haproxy stats pages, it looks like have the name would actually add additional information (assuming that there are multiple CNAMES named differently in the server config).  Curious as to what your thinking was on this.\n", "created_at": "2014-05-06T01:48:25Z", "updated_at": "2014-05-07T00:47:35Z", "html_url": "https://github.com/airbnb/synapse/pull/65#discussion_r12308568", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/65", "author_association": "OWNER", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12308568"}, "html": {"href": "https://github.com/airbnb/synapse/pull/65#discussion_r12308568"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/65"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12308568/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12308965", "pull_request_review_id": null, "id": 12308965, "diff_hunk": "@@ -79,7 +83,8 @@ def configure_backends(servers)\n         addresses.map do |address|\n           {\n             'host' => address,\n-            'port' => server['port']\n+            'port' => server['port'],\n+            'name' => server['name'],", "path": "lib/synapse/service_watcher/dns.rb", "position": 37, "original_position": 33, "commit_id": "9243fdf6b4a9c07a1e4054ab0dd59ab5ec55c884", "original_commit_id": "a9486797636fb507e62af895499d90bcf55e7cb5", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "yup, you're right. this is fine\n", "created_at": "2014-05-06T02:24:01Z", "updated_at": "2014-05-07T00:47:35Z", "html_url": "https://github.com/airbnb/synapse/pull/65#discussion_r12308965", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/65", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12308965"}, "html": {"href": "https://github.com/airbnb/synapse/pull/65#discussion_r12308965"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/65"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12308965/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12309193", "pull_request_review_id": null, "id": 12309193, "diff_hunk": "@@ -0,0 +1,183 @@\n+require 'synapse/service_watcher/base'\n+require 'synapse/service_watcher/dns'\n+require 'synapse/service_watcher/zookeeper'\n+\n+require 'thread'\n+\n+# Watcher for watching Zookeeper for entries containing DNS names that are\n+# continuously resolved to IP Addresses.  The use case for this watcher is to\n+# allow services that are addressed by DNS to be reconfigured via Zookeeper\n+# instead of an update of the synapse config.\n+#\n+# The implementation builds on top of the existing DNS and Zookeeper watchers.\n+# This watcher creates a thread to manage the lifecycle of the DNS and\n+# Zookeeper watchers.  This thread also publishes messages on a queue to\n+# indicate that DNS should be re-resolved (after the check interval) or that\n+# the DNS watcher should be shut down.  The Zookeeper watcher waits for changes\n+# in backends from zookeeper and publishes those changes on an internal queue\n+# consumed by the DNS watcher.  The DNS watcher blocks on this queue waiting\n+# for messages indicating that new servers are available, the check interval\n+# has passed (triggering a re-resolve), or that the watcher should shut down.\n+# The DNS watcher is responsible for the actual reconfiguring of backends.\n+module Synapse\n+  class ZookeeperDnsWatcher < BaseWatcher\n+\n+    module Messages\n+      class InvalidMessageError < RuntimeError; end\n+\n+      class NewServers < Struct.new(:servers); end\n+      class CheckInterval; end\n+      class StopWatcher; end\n+\n+      STOP_WATCHER_MESSAGE = StopWatcher.new\n+      CHECK_INTERVAL_MESSAGE = CheckInterval.new\n+    end\n+\n+    class Dns < Synapse::DnsWatcher\n+\n+      attr_accessor :discovery_servers\n+\n+      def initialize(opts={}, synapse, message_queue)\n+        @message_queue = message_queue\n+\n+        super(opts, synapse)\n+      end\n+\n+      def stop\n+        @message_queue.push(Messages::STOP_WATCHER_MESSAGE)\n+      end\n+\n+      def watch\n+        last_resolution = nil\n+        while true\n+          message = @message_queue.pop\n+\n+          case message\n+          when Messages::StopWatcher\n+            break\n+          when Messages::NewServers\n+            self.discovery_servers = message.servers\n+          when Messages::CheckInterval\n+            # Proceed to re-resolve the DNS\n+          else\n+            raise Messages::InvalidMessageError,\n+              \"Received unrecognized message: #{message.inspect}\"\n+          end\n+\n+          # Empty servers means we haven't heard back from ZK yet\n+          unless self.discovery_servers.nil? || self.discovery_servers.empty?\n+            current_resolution = resolve_servers\n+            unless last_resolution == current_resolution\n+              last_resolution = current_resolution\n+              configure_backends(last_resolution)\n+            end\n+          end\n+        end\n+      end\n+\n+      private\n+\n+      def validate_discovery_opts\n+      end\n+    end\n+\n+    class Zookeeper < Synapse::ZookeeperWatcher\n+      def initialize(opts={}, synapse, message_queue)\n+        super(opts, synapse)\n+\n+        @message_queue = message_queue\n+      end\n+\n+      def reconfigure!\n+        # push the new backends onto the queue\n+        @message_queue.push(Messages::NewServers.new(@backends))\n+      end\n+\n+      private\n+\n+      def validate_discovery_opts", "path": "lib/synapse/service_watcher/zookeeper_dns.rb", "position": null, "original_position": 98, "commit_id": "9243fdf6b4a9c07a1e4054ab0dd59ab5ec55c884", "original_commit_id": "6d20ce283e181d8126791df842a5295ef5c4cb37", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "a comment for why you're disabling validation might be helpful\n", "created_at": "2014-05-06T02:41:38Z", "updated_at": "2014-05-07T00:47:35Z", "html_url": "https://github.com/airbnb/synapse/pull/65#discussion_r12309193", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/65", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12309193"}, "html": {"href": "https://github.com/airbnb/synapse/pull/65#discussion_r12309193"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/65"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12309193/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12309213", "pull_request_review_id": null, "id": 12309213, "diff_hunk": "@@ -0,0 +1,183 @@\n+require 'synapse/service_watcher/base'\n+require 'synapse/service_watcher/dns'\n+require 'synapse/service_watcher/zookeeper'\n+\n+require 'thread'\n+\n+# Watcher for watching Zookeeper for entries containing DNS names that are\n+# continuously resolved to IP Addresses.  The use case for this watcher is to\n+# allow services that are addressed by DNS to be reconfigured via Zookeeper\n+# instead of an update of the synapse config.\n+#\n+# The implementation builds on top of the existing DNS and Zookeeper watchers.\n+# This watcher creates a thread to manage the lifecycle of the DNS and\n+# Zookeeper watchers.  This thread also publishes messages on a queue to\n+# indicate that DNS should be re-resolved (after the check interval) or that\n+# the DNS watcher should be shut down.  The Zookeeper watcher waits for changes\n+# in backends from zookeeper and publishes those changes on an internal queue\n+# consumed by the DNS watcher.  The DNS watcher blocks on this queue waiting\n+# for messages indicating that new servers are available, the check interval\n+# has passed (triggering a re-resolve), or that the watcher should shut down.\n+# The DNS watcher is responsible for the actual reconfiguring of backends.\n+module Synapse\n+  class ZookeeperDnsWatcher < BaseWatcher\n+\n+    module Messages\n+      class InvalidMessageError < RuntimeError; end\n+\n+      class NewServers < Struct.new(:servers); end\n+      class CheckInterval; end\n+      class StopWatcher; end\n+\n+      STOP_WATCHER_MESSAGE = StopWatcher.new", "path": "lib/synapse/service_watcher/zookeeper_dns.rb", "position": null, "original_position": 32, "commit_id": "9243fdf6b4a9c07a1e4054ab0dd59ab5ec55c884", "original_commit_id": "6d20ce283e181d8126791df842a5295ef5c4cb37", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "a comment explaining what each message that passes through the queue means might be helpful\n", "created_at": "2014-05-06T02:42:51Z", "updated_at": "2014-05-07T00:47:35Z", "html_url": "https://github.com/airbnb/synapse/pull/65#discussion_r12309213", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/65", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12309213"}, "html": {"href": "https://github.com/airbnb/synapse/pull/65#discussion_r12309213"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/65"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12309213/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12309237", "pull_request_review_id": null, "id": 12309237, "diff_hunk": "@@ -0,0 +1,183 @@\n+require 'synapse/service_watcher/base'\n+require 'synapse/service_watcher/dns'\n+require 'synapse/service_watcher/zookeeper'\n+\n+require 'thread'\n+\n+# Watcher for watching Zookeeper for entries containing DNS names that are\n+# continuously resolved to IP Addresses.  The use case for this watcher is to\n+# allow services that are addressed by DNS to be reconfigured via Zookeeper\n+# instead of an update of the synapse config.\n+#\n+# The implementation builds on top of the existing DNS and Zookeeper watchers.\n+# This watcher creates a thread to manage the lifecycle of the DNS and\n+# Zookeeper watchers.  This thread also publishes messages on a queue to\n+# indicate that DNS should be re-resolved (after the check interval) or that\n+# the DNS watcher should be shut down.  The Zookeeper watcher waits for changes\n+# in backends from zookeeper and publishes those changes on an internal queue\n+# consumed by the DNS watcher.  The DNS watcher blocks on this queue waiting\n+# for messages indicating that new servers are available, the check interval\n+# has passed (triggering a re-resolve), or that the watcher should shut down.\n+# The DNS watcher is responsible for the actual reconfiguring of backends.\n+module Synapse\n+  class ZookeeperDnsWatcher < BaseWatcher\n+\n+    module Messages\n+      class InvalidMessageError < RuntimeError; end\n+\n+      class NewServers < Struct.new(:servers); end\n+      class CheckInterval; end\n+      class StopWatcher; end\n+\n+      STOP_WATCHER_MESSAGE = StopWatcher.new\n+      CHECK_INTERVAL_MESSAGE = CheckInterval.new\n+    end\n+\n+    class Dns < Synapse::DnsWatcher\n+\n+      attr_accessor :discovery_servers\n+\n+      def initialize(opts={}, synapse, message_queue)\n+        @message_queue = message_queue\n+\n+        super(opts, synapse)\n+      end\n+\n+      def stop\n+        @message_queue.push(Messages::STOP_WATCHER_MESSAGE)\n+      end\n+\n+      def watch\n+        last_resolution = nil\n+        while true\n+          message = @message_queue.pop\n+\n+          case message\n+          when Messages::StopWatcher\n+            break\n+          when Messages::NewServers\n+            self.discovery_servers = message.servers", "path": "lib/synapse/service_watcher/zookeeper_dns.rb", "position": 78, "original_position": 59, "commit_id": "9243fdf6b4a9c07a1e4054ab0dd59ab5ec55c884", "original_commit_id": "6d20ce283e181d8126791df842a5295ef5c4cb37", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "how is this settable? i don't see an `attr_writer` for it...\n", "created_at": "2014-05-06T02:45:05Z", "updated_at": "2014-05-07T00:47:35Z", "html_url": "https://github.com/airbnb/synapse/pull/65#discussion_r12309237", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/65", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12309237"}, "html": {"href": "https://github.com/airbnb/synapse/pull/65#discussion_r12309237"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/65"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12309237/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12309248", "pull_request_review_id": null, "id": 12309248, "diff_hunk": "@@ -0,0 +1,183 @@\n+require 'synapse/service_watcher/base'\n+require 'synapse/service_watcher/dns'\n+require 'synapse/service_watcher/zookeeper'\n+\n+require 'thread'\n+\n+# Watcher for watching Zookeeper for entries containing DNS names that are\n+# continuously resolved to IP Addresses.  The use case for this watcher is to\n+# allow services that are addressed by DNS to be reconfigured via Zookeeper\n+# instead of an update of the synapse config.\n+#\n+# The implementation builds on top of the existing DNS and Zookeeper watchers.\n+# This watcher creates a thread to manage the lifecycle of the DNS and\n+# Zookeeper watchers.  This thread also publishes messages on a queue to\n+# indicate that DNS should be re-resolved (after the check interval) or that\n+# the DNS watcher should be shut down.  The Zookeeper watcher waits for changes\n+# in backends from zookeeper and publishes those changes on an internal queue\n+# consumed by the DNS watcher.  The DNS watcher blocks on this queue waiting\n+# for messages indicating that new servers are available, the check interval\n+# has passed (triggering a re-resolve), or that the watcher should shut down.\n+# The DNS watcher is responsible for the actual reconfiguring of backends.\n+module Synapse\n+  class ZookeeperDnsWatcher < BaseWatcher\n+\n+    module Messages\n+      class InvalidMessageError < RuntimeError; end\n+\n+      class NewServers < Struct.new(:servers); end\n+      class CheckInterval; end\n+      class StopWatcher; end\n+\n+      STOP_WATCHER_MESSAGE = StopWatcher.new\n+      CHECK_INTERVAL_MESSAGE = CheckInterval.new\n+    end\n+\n+    class Dns < Synapse::DnsWatcher\n+\n+      attr_accessor :discovery_servers\n+\n+      def initialize(opts={}, synapse, message_queue)\n+        @message_queue = message_queue\n+\n+        super(opts, synapse)\n+      end\n+\n+      def stop\n+        @message_queue.push(Messages::STOP_WATCHER_MESSAGE)\n+      end\n+\n+      def watch\n+        last_resolution = nil\n+        while true\n+          message = @message_queue.pop\n+\n+          case message\n+          when Messages::StopWatcher\n+            break\n+          when Messages::NewServers\n+            self.discovery_servers = message.servers", "path": "lib/synapse/service_watcher/zookeeper_dns.rb", "position": 78, "original_position": 59, "commit_id": "9243fdf6b4a9c07a1e4054ab0dd59ab5ec55c884", "original_commit_id": "6d20ce283e181d8126791df842a5295ef5c4cb37", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "oh never mind\n", "created_at": "2014-05-06T02:45:28Z", "updated_at": "2014-05-07T00:47:35Z", "html_url": "https://github.com/airbnb/synapse/pull/65#discussion_r12309248", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/65", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12309248"}, "html": {"href": "https://github.com/airbnb/synapse/pull/65#discussion_r12309248"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/65"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12309248/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12309340", "pull_request_review_id": null, "id": 12309340, "diff_hunk": "@@ -0,0 +1,183 @@\n+require 'synapse/service_watcher/base'\n+require 'synapse/service_watcher/dns'\n+require 'synapse/service_watcher/zookeeper'\n+\n+require 'thread'\n+\n+# Watcher for watching Zookeeper for entries containing DNS names that are\n+# continuously resolved to IP Addresses.  The use case for this watcher is to\n+# allow services that are addressed by DNS to be reconfigured via Zookeeper\n+# instead of an update of the synapse config.\n+#\n+# The implementation builds on top of the existing DNS and Zookeeper watchers.\n+# This watcher creates a thread to manage the lifecycle of the DNS and\n+# Zookeeper watchers.  This thread also publishes messages on a queue to\n+# indicate that DNS should be re-resolved (after the check interval) or that\n+# the DNS watcher should be shut down.  The Zookeeper watcher waits for changes\n+# in backends from zookeeper and publishes those changes on an internal queue\n+# consumed by the DNS watcher.  The DNS watcher blocks on this queue waiting\n+# for messages indicating that new servers are available, the check interval\n+# has passed (triggering a re-resolve), or that the watcher should shut down.\n+# The DNS watcher is responsible for the actual reconfiguring of backends.\n+module Synapse\n+  class ZookeeperDnsWatcher < BaseWatcher\n+\n+    module Messages\n+      class InvalidMessageError < RuntimeError; end\n+\n+      class NewServers < Struct.new(:servers); end\n+      class CheckInterval; end\n+      class StopWatcher; end\n+\n+      STOP_WATCHER_MESSAGE = StopWatcher.new\n+      CHECK_INTERVAL_MESSAGE = CheckInterval.new\n+    end\n+\n+    class Dns < Synapse::DnsWatcher\n+\n+      attr_accessor :discovery_servers\n+\n+      def initialize(opts={}, synapse, message_queue)\n+        @message_queue = message_queue\n+\n+        super(opts, synapse)\n+      end\n+\n+      def stop\n+        @message_queue.push(Messages::STOP_WATCHER_MESSAGE)\n+      end\n+\n+      def watch\n+        last_resolution = nil\n+        while true\n+          message = @message_queue.pop\n+\n+          case message\n+          when Messages::StopWatcher\n+            break\n+          when Messages::NewServers\n+            self.discovery_servers = message.servers\n+          when Messages::CheckInterval\n+            # Proceed to re-resolve the DNS\n+          else\n+            raise Messages::InvalidMessageError,\n+              \"Received unrecognized message: #{message.inspect}\"\n+          end\n+\n+          # Empty servers means we haven't heard back from ZK yet\n+          unless self.discovery_servers.nil? || self.discovery_servers.empty?\n+            current_resolution = resolve_servers", "path": "lib/synapse/service_watcher/zookeeper_dns.rb", "position": null, "original_position": 69, "commit_id": "9243fdf6b4a9c07a1e4054ab0dd59ab5ec55c884", "original_commit_id": "6d20ce283e181d8126791df842a5295ef5c4cb37", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "mmmm, copypasta\n", "created_at": "2014-05-06T02:52:32Z", "updated_at": "2014-05-07T00:47:35Z", "html_url": "https://github.com/airbnb/synapse/pull/65#discussion_r12309340", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/65", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12309340"}, "html": {"href": "https://github.com/airbnb/synapse/pull/65#discussion_r12309340"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/65"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12309340/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12309387", "pull_request_review_id": null, "id": 12309387, "diff_hunk": "@@ -0,0 +1,183 @@\n+require 'synapse/service_watcher/base'\n+require 'synapse/service_watcher/dns'\n+require 'synapse/service_watcher/zookeeper'\n+\n+require 'thread'\n+\n+# Watcher for watching Zookeeper for entries containing DNS names that are\n+# continuously resolved to IP Addresses.  The use case for this watcher is to\n+# allow services that are addressed by DNS to be reconfigured via Zookeeper\n+# instead of an update of the synapse config.\n+#\n+# The implementation builds on top of the existing DNS and Zookeeper watchers.\n+# This watcher creates a thread to manage the lifecycle of the DNS and\n+# Zookeeper watchers.  This thread also publishes messages on a queue to\n+# indicate that DNS should be re-resolved (after the check interval) or that\n+# the DNS watcher should be shut down.  The Zookeeper watcher waits for changes\n+# in backends from zookeeper and publishes those changes on an internal queue\n+# consumed by the DNS watcher.  The DNS watcher blocks on this queue waiting\n+# for messages indicating that new servers are available, the check interval\n+# has passed (triggering a re-resolve), or that the watcher should shut down.\n+# The DNS watcher is responsible for the actual reconfiguring of backends.\n+module Synapse\n+  class ZookeeperDnsWatcher < BaseWatcher\n+\n+    module Messages\n+      class InvalidMessageError < RuntimeError; end\n+\n+      class NewServers < Struct.new(:servers); end\n+      class CheckInterval; end\n+      class StopWatcher; end\n+\n+      STOP_WATCHER_MESSAGE = StopWatcher.new\n+      CHECK_INTERVAL_MESSAGE = CheckInterval.new\n+    end\n+\n+    class Dns < Synapse::DnsWatcher\n+\n+      attr_accessor :discovery_servers\n+\n+      def initialize(opts={}, synapse, message_queue)\n+        @message_queue = message_queue\n+\n+        super(opts, synapse)\n+      end\n+\n+      def stop\n+        @message_queue.push(Messages::STOP_WATCHER_MESSAGE)\n+      end\n+\n+      def watch\n+        last_resolution = nil\n+        while true\n+          message = @message_queue.pop\n+\n+          case message\n+          when Messages::StopWatcher\n+            break\n+          when Messages::NewServers\n+            self.discovery_servers = message.servers\n+          when Messages::CheckInterval\n+            # Proceed to re-resolve the DNS\n+          else\n+            raise Messages::InvalidMessageError,\n+              \"Received unrecognized message: #{message.inspect}\"\n+          end\n+\n+          # Empty servers means we haven't heard back from ZK yet", "path": "lib/synapse/service_watcher/zookeeper_dns.rb", "position": null, "original_position": 67, "commit_id": "9243fdf6b4a9c07a1e4054ab0dd59ab5ec55c884", "original_commit_id": "6d20ce283e181d8126791df842a5295ef5c4cb37", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "this could also mean that the list of servers _became_ empty, right?\n", "created_at": "2014-05-06T02:56:19Z", "updated_at": "2014-05-07T00:47:35Z", "html_url": "https://github.com/airbnb/synapse/pull/65#discussion_r12309387", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/65", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12309387"}, "html": {"href": "https://github.com/airbnb/synapse/pull/65#discussion_r12309387"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/65"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12309387/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12309402", "pull_request_review_id": null, "id": 12309402, "diff_hunk": "@@ -0,0 +1,183 @@\n+require 'synapse/service_watcher/base'\n+require 'synapse/service_watcher/dns'\n+require 'synapse/service_watcher/zookeeper'\n+\n+require 'thread'\n+\n+# Watcher for watching Zookeeper for entries containing DNS names that are\n+# continuously resolved to IP Addresses.  The use case for this watcher is to\n+# allow services that are addressed by DNS to be reconfigured via Zookeeper\n+# instead of an update of the synapse config.\n+#\n+# The implementation builds on top of the existing DNS and Zookeeper watchers.\n+# This watcher creates a thread to manage the lifecycle of the DNS and\n+# Zookeeper watchers.  This thread also publishes messages on a queue to\n+# indicate that DNS should be re-resolved (after the check interval) or that\n+# the DNS watcher should be shut down.  The Zookeeper watcher waits for changes\n+# in backends from zookeeper and publishes those changes on an internal queue\n+# consumed by the DNS watcher.  The DNS watcher blocks on this queue waiting\n+# for messages indicating that new servers are available, the check interval\n+# has passed (triggering a re-resolve), or that the watcher should shut down.\n+# The DNS watcher is responsible for the actual reconfiguring of backends.\n+module Synapse\n+  class ZookeeperDnsWatcher < BaseWatcher\n+\n+    module Messages\n+      class InvalidMessageError < RuntimeError; end\n+\n+      class NewServers < Struct.new(:servers); end\n+      class CheckInterval; end\n+      class StopWatcher; end\n+\n+      STOP_WATCHER_MESSAGE = StopWatcher.new\n+      CHECK_INTERVAL_MESSAGE = CheckInterval.new\n+    end\n+\n+    class Dns < Synapse::DnsWatcher\n+\n+      attr_accessor :discovery_servers\n+\n+      def initialize(opts={}, synapse, message_queue)\n+        @message_queue = message_queue\n+\n+        super(opts, synapse)\n+      end\n+\n+      def stop\n+        @message_queue.push(Messages::STOP_WATCHER_MESSAGE)\n+      end\n+\n+      def watch\n+        last_resolution = nil\n+        while true\n+          message = @message_queue.pop\n+\n+          case message\n+          when Messages::StopWatcher\n+            break\n+          when Messages::NewServers\n+            self.discovery_servers = message.servers\n+          when Messages::CheckInterval\n+            # Proceed to re-resolve the DNS\n+          else\n+            raise Messages::InvalidMessageError,\n+              \"Received unrecognized message: #{message.inspect}\"\n+          end\n+\n+          # Empty servers means we haven't heard back from ZK yet\n+          unless self.discovery_servers.nil? || self.discovery_servers.empty?\n+            current_resolution = resolve_servers", "path": "lib/synapse/service_watcher/zookeeper_dns.rb", "position": null, "original_position": 69, "commit_id": "9243fdf6b4a9c07a1e4054ab0dd59ab5ec55c884", "original_commit_id": "6d20ce283e181d8126791df842a5295ef5c4cb37", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "i wonder if by modifying the regular DNS watcher more, you could reuse more of the logic there? for instance, what is the justification for abandoning the sleep math there for the simpler sleep math in `zookeeper_dns`? \n", "created_at": "2014-05-06T02:57:43Z", "updated_at": "2014-05-07T00:47:35Z", "html_url": "https://github.com/airbnb/synapse/pull/65#discussion_r12309402", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/65", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12309402"}, "html": {"href": "https://github.com/airbnb/synapse/pull/65#discussion_r12309402"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/65"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12309402/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12309498", "pull_request_review_id": null, "id": 12309498, "diff_hunk": "@@ -0,0 +1,183 @@\n+require 'synapse/service_watcher/base'\n+require 'synapse/service_watcher/dns'\n+require 'synapse/service_watcher/zookeeper'\n+\n+require 'thread'\n+\n+# Watcher for watching Zookeeper for entries containing DNS names that are\n+# continuously resolved to IP Addresses.  The use case for this watcher is to\n+# allow services that are addressed by DNS to be reconfigured via Zookeeper\n+# instead of an update of the synapse config.\n+#\n+# The implementation builds on top of the existing DNS and Zookeeper watchers.\n+# This watcher creates a thread to manage the lifecycle of the DNS and\n+# Zookeeper watchers.  This thread also publishes messages on a queue to\n+# indicate that DNS should be re-resolved (after the check interval) or that\n+# the DNS watcher should be shut down.  The Zookeeper watcher waits for changes\n+# in backends from zookeeper and publishes those changes on an internal queue\n+# consumed by the DNS watcher.  The DNS watcher blocks on this queue waiting\n+# for messages indicating that new servers are available, the check interval\n+# has passed (triggering a re-resolve), or that the watcher should shut down.\n+# The DNS watcher is responsible for the actual reconfiguring of backends.\n+module Synapse\n+  class ZookeeperDnsWatcher < BaseWatcher\n+\n+    module Messages\n+      class InvalidMessageError < RuntimeError; end\n+\n+      class NewServers < Struct.new(:servers); end\n+      class CheckInterval; end\n+      class StopWatcher; end\n+\n+      STOP_WATCHER_MESSAGE = StopWatcher.new\n+      CHECK_INTERVAL_MESSAGE = CheckInterval.new\n+    end\n+\n+    class Dns < Synapse::DnsWatcher\n+\n+      attr_accessor :discovery_servers\n+\n+      def initialize(opts={}, synapse, message_queue)\n+        @message_queue = message_queue\n+\n+        super(opts, synapse)\n+      end\n+\n+      def stop\n+        @message_queue.push(Messages::STOP_WATCHER_MESSAGE)\n+      end\n+\n+      def watch\n+        last_resolution = nil\n+        while true\n+          message = @message_queue.pop\n+\n+          case message\n+          when Messages::StopWatcher\n+            break\n+          when Messages::NewServers\n+            self.discovery_servers = message.servers\n+          when Messages::CheckInterval\n+            # Proceed to re-resolve the DNS\n+          else\n+            raise Messages::InvalidMessageError,\n+              \"Received unrecognized message: #{message.inspect}\"\n+          end\n+\n+          # Empty servers means we haven't heard back from ZK yet\n+          unless self.discovery_servers.nil? || self.discovery_servers.empty?\n+            current_resolution = resolve_servers", "path": "lib/synapse/service_watcher/zookeeper_dns.rb", "position": null, "original_position": 69, "commit_id": "9243fdf6b4a9c07a1e4054ab0dd59ab5ec55c884", "original_commit_id": "6d20ce283e181d8126791df842a5295ef5c4cb37", "user": {"login": "schleyfox", "id": 4259, "avatar_url": "https://avatars0.githubusercontent.com/u/4259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/schleyfox", "html_url": "https://github.com/schleyfox", "followers_url": "https://api.github.com/users/schleyfox/followers", "following_url": "https://api.github.com/users/schleyfox/following{/other_user}", "gists_url": "https://api.github.com/users/schleyfox/gists{/gist_id}", "starred_url": "https://api.github.com/users/schleyfox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schleyfox/subscriptions", "organizations_url": "https://api.github.com/users/schleyfox/orgs", "repos_url": "https://api.github.com/users/schleyfox/repos", "events_url": "https://api.github.com/users/schleyfox/events{/privacy}", "received_events_url": "https://api.github.com/users/schleyfox/received_events", "type": "User", "site_admin": false}, "body": "it's possible that I could, though the local variables (that should probably stay local) complicate the refactoring.\n\nI'm able to abandon the more complicated sleep math because running the simple sleep math from a separate thread that communicates over a queue has nearly the same timing characteristics, since a message will be pushed every X seconds to trigger a re-resolve.  I will ensure that a CheckInterval message is only pushed onto an empty queue, as a non-empty queue will trigger a re-resolve ASAP anyway.\n", "created_at": "2014-05-06T03:07:50Z", "updated_at": "2014-05-07T00:47:35Z", "html_url": "https://github.com/airbnb/synapse/pull/65#discussion_r12309498", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/65", "author_association": "OWNER", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12309498"}, "html": {"href": "https://github.com/airbnb/synapse/pull/65#discussion_r12309498"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/65"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12309498/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12311388", "pull_request_review_id": null, "id": 12311388, "diff_hunk": "@@ -0,0 +1,212 @@\n+require 'synapse/service_watcher/base'\n+require 'synapse/service_watcher/dns'\n+require 'synapse/service_watcher/zookeeper'\n+\n+require 'thread'\n+\n+# Watcher for watching Zookeeper for entries containing DNS names that are\n+# continuously resolved to IP Addresses.  The use case for this watcher is to\n+# allow services that are addressed by DNS to be reconfigured via Zookeeper\n+# instead of an update of the synapse config.\n+#\n+# The implementation builds on top of the existing DNS and Zookeeper watchers.\n+# This watcher creates a thread to manage the lifecycle of the DNS and\n+# Zookeeper watchers.  This thread also publishes messages on a queue to\n+# indicate that DNS should be re-resolved (after the check interval) or that\n+# the DNS watcher should be shut down.  The Zookeeper watcher waits for changes\n+# in backends from zookeeper and publishes those changes on an internal queue\n+# consumed by the DNS watcher.  The DNS watcher blocks on this queue waiting\n+# for messages indicating that new servers are available, the check interval\n+# has passed (triggering a re-resolve), or that the watcher should shut down.\n+# The DNS watcher is responsible for the actual reconfiguring of backends.\n+module Synapse\n+  class ZookeeperDnsWatcher < BaseWatcher\n+\n+    # Valid messages that can be passed through the internal message queue\n+    module Messages\n+      class InvalidMessageError < RuntimeError; end\n+\n+      # Indicates new servers identified by DNS names to be resolved.  This is\n+      # sent from Zookeeper on events that modify the ZK node. The payload is\n+      # an array of hashes containing {'host', 'port', 'name'}\n+      class NewServers < Struct.new(:servers); end\n+\n+      # Indicates that DNS should be re-resolved.  This is sent by the\n+      # ZookeeperDnsWatcher thread every check_interval seconds to cause a\n+      # refresh of the IP addresses.\n+      class CheckInterval; end\n+\n+      # Indicates that the DNS watcher should shut down.  This is sent when\n+      # stop is called.\n+      class StopWatcher; end\n+\n+      # Saved instances of message types with contents that cannot vary.  This\n+      # reduces object allocation.\n+      STOP_WATCHER_MESSAGE = StopWatcher.new\n+      CHECK_INTERVAL_MESSAGE = CheckInterval.new\n+    end\n+\n+    class Dns < Synapse::DnsWatcher\n+\n+      attr_accessor :discovery_servers\n+\n+      def initialize(opts={}, synapse, message_queue)\n+        @message_queue = message_queue\n+\n+        super(opts, synapse)\n+      end\n+\n+      def stop\n+        @message_queue.push(Messages::STOP_WATCHER_MESSAGE)\n+      end\n+\n+      def watch\n+        last_resolution = nil\n+        while true\n+          # Blocks on message queue, the message will be a signal to stop\n+          # watching, to check a new set of servers from ZK, or to re-resolve\n+          # the DNS (triggered every check_interval seconds)\n+          message = @message_queue.pop\n+\n+          case message\n+          when Messages::StopWatcher\n+            break\n+          when Messages::NewServers\n+            self.discovery_servers = message.servers\n+          when Messages::CheckInterval\n+            # Proceed to re-resolve the DNS\n+          else\n+            raise Messages::InvalidMessageError,", "path": "lib/synapse/service_watcher/zookeeper_dns.rb", "position": 82, "original_position": 79, "commit_id": "9243fdf6b4a9c07a1e4054ab0dd59ab5ec55c884", "original_commit_id": "89efc593267c6cfdedeecf7be08266ff95a7f9f1", "user": {"login": "pcarrier", "id": 8641, "avatar_url": "https://avatars0.githubusercontent.com/u/8641?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcarrier", "html_url": "https://github.com/pcarrier", "followers_url": "https://api.github.com/users/pcarrier/followers", "following_url": "https://api.github.com/users/pcarrier/following{/other_user}", "gists_url": "https://api.github.com/users/pcarrier/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcarrier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcarrier/subscriptions", "organizations_url": "https://api.github.com/users/pcarrier/orgs", "repos_url": "https://api.github.com/users/pcarrier/repos", "events_url": "https://api.github.com/users/pcarrier/events{/privacy}", "received_events_url": "https://api.github.com/users/pcarrier/received_events", "type": "User", "site_admin": false}, "body": "Thread would die silently.\n", "created_at": "2014-05-06T05:44:58Z", "updated_at": "2014-05-07T00:47:35Z", "html_url": "https://github.com/airbnb/synapse/pull/65#discussion_r12311388", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/65", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12311388"}, "html": {"href": "https://github.com/airbnb/synapse/pull/65#discussion_r12311388"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/65"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12311388/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12311667", "pull_request_review_id": null, "id": 12311667, "diff_hunk": "@@ -0,0 +1,212 @@\n+require 'synapse/service_watcher/base'\n+require 'synapse/service_watcher/dns'\n+require 'synapse/service_watcher/zookeeper'\n+\n+require 'thread'\n+\n+# Watcher for watching Zookeeper for entries containing DNS names that are\n+# continuously resolved to IP Addresses.  The use case for this watcher is to\n+# allow services that are addressed by DNS to be reconfigured via Zookeeper\n+# instead of an update of the synapse config.\n+#\n+# The implementation builds on top of the existing DNS and Zookeeper watchers.\n+# This watcher creates a thread to manage the lifecycle of the DNS and\n+# Zookeeper watchers.  This thread also publishes messages on a queue to\n+# indicate that DNS should be re-resolved (after the check interval) or that\n+# the DNS watcher should be shut down.  The Zookeeper watcher waits for changes\n+# in backends from zookeeper and publishes those changes on an internal queue\n+# consumed by the DNS watcher.  The DNS watcher blocks on this queue waiting\n+# for messages indicating that new servers are available, the check interval\n+# has passed (triggering a re-resolve), or that the watcher should shut down.\n+# The DNS watcher is responsible for the actual reconfiguring of backends.\n+module Synapse\n+  class ZookeeperDnsWatcher < BaseWatcher\n+\n+    # Valid messages that can be passed through the internal message queue\n+    module Messages\n+      class InvalidMessageError < RuntimeError; end\n+\n+      # Indicates new servers identified by DNS names to be resolved.  This is\n+      # sent from Zookeeper on events that modify the ZK node. The payload is\n+      # an array of hashes containing {'host', 'port', 'name'}\n+      class NewServers < Struct.new(:servers); end\n+\n+      # Indicates that DNS should be re-resolved.  This is sent by the\n+      # ZookeeperDnsWatcher thread every check_interval seconds to cause a\n+      # refresh of the IP addresses.\n+      class CheckInterval; end\n+\n+      # Indicates that the DNS watcher should shut down.  This is sent when\n+      # stop is called.\n+      class StopWatcher; end\n+\n+      # Saved instances of message types with contents that cannot vary.  This\n+      # reduces object allocation.\n+      STOP_WATCHER_MESSAGE = StopWatcher.new\n+      CHECK_INTERVAL_MESSAGE = CheckInterval.new\n+    end\n+\n+    class Dns < Synapse::DnsWatcher\n+\n+      attr_accessor :discovery_servers\n+\n+      def initialize(opts={}, synapse, message_queue)\n+        @message_queue = message_queue\n+\n+        super(opts, synapse)\n+      end\n+\n+      def stop\n+        @message_queue.push(Messages::STOP_WATCHER_MESSAGE)\n+      end\n+\n+      def watch\n+        last_resolution = nil\n+        while true\n+          # Blocks on message queue, the message will be a signal to stop\n+          # watching, to check a new set of servers from ZK, or to re-resolve\n+          # the DNS (triggered every check_interval seconds)\n+          message = @message_queue.pop\n+\n+          case message\n+          when Messages::StopWatcher\n+            break\n+          when Messages::NewServers\n+            self.discovery_servers = message.servers\n+          when Messages::CheckInterval\n+            # Proceed to re-resolve the DNS\n+          else\n+            raise Messages::InvalidMessageError,", "path": "lib/synapse/service_watcher/zookeeper_dns.rb", "position": 82, "original_position": 79, "commit_id": "9243fdf6b4a9c07a1e4054ab0dd59ab5ec55c884", "original_commit_id": "89efc593267c6cfdedeecf7be08266ff95a7f9f1", "user": {"login": "schleyfox", "id": 4259, "avatar_url": "https://avatars0.githubusercontent.com/u/4259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/schleyfox", "html_url": "https://github.com/schleyfox", "followers_url": "https://api.github.com/users/schleyfox/followers", "following_url": "https://api.github.com/users/schleyfox/following{/other_user}", "gists_url": "https://api.github.com/users/schleyfox/gists{/gist_id}", "starred_url": "https://api.github.com/users/schleyfox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schleyfox/subscriptions", "organizations_url": "https://api.github.com/users/schleyfox/orgs", "repos_url": "https://api.github.com/users/schleyfox/repos", "events_url": "https://api.github.com/users/schleyfox/events{/privacy}", "received_events_url": "https://api.github.com/users/schleyfox/received_events", "type": "User", "site_admin": false}, "body": "good call, I will change the ping? calls to take thread health into account as well.\n", "created_at": "2014-05-06T06:08:26Z", "updated_at": "2014-05-07T00:47:35Z", "html_url": "https://github.com/airbnb/synapse/pull/65#discussion_r12311667", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/65", "author_association": "OWNER", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12311667"}, "html": {"href": "https://github.com/airbnb/synapse/pull/65#discussion_r12311667"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/65"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12311667/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12311905", "pull_request_review_id": null, "id": 12311905, "diff_hunk": "@@ -0,0 +1,183 @@\n+require 'synapse/service_watcher/base'\n+require 'synapse/service_watcher/dns'\n+require 'synapse/service_watcher/zookeeper'\n+\n+require 'thread'\n+\n+# Watcher for watching Zookeeper for entries containing DNS names that are\n+# continuously resolved to IP Addresses.  The use case for this watcher is to\n+# allow services that are addressed by DNS to be reconfigured via Zookeeper\n+# instead of an update of the synapse config.\n+#\n+# The implementation builds on top of the existing DNS and Zookeeper watchers.\n+# This watcher creates a thread to manage the lifecycle of the DNS and\n+# Zookeeper watchers.  This thread also publishes messages on a queue to\n+# indicate that DNS should be re-resolved (after the check interval) or that\n+# the DNS watcher should be shut down.  The Zookeeper watcher waits for changes\n+# in backends from zookeeper and publishes those changes on an internal queue\n+# consumed by the DNS watcher.  The DNS watcher blocks on this queue waiting\n+# for messages indicating that new servers are available, the check interval\n+# has passed (triggering a re-resolve), or that the watcher should shut down.\n+# The DNS watcher is responsible for the actual reconfiguring of backends.\n+module Synapse\n+  class ZookeeperDnsWatcher < BaseWatcher\n+\n+    module Messages\n+      class InvalidMessageError < RuntimeError; end\n+\n+      class NewServers < Struct.new(:servers); end\n+      class CheckInterval; end\n+      class StopWatcher; end\n+\n+      STOP_WATCHER_MESSAGE = StopWatcher.new\n+      CHECK_INTERVAL_MESSAGE = CheckInterval.new\n+    end\n+\n+    class Dns < Synapse::DnsWatcher\n+\n+      attr_accessor :discovery_servers\n+\n+      def initialize(opts={}, synapse, message_queue)\n+        @message_queue = message_queue\n+\n+        super(opts, synapse)\n+      end\n+\n+      def stop\n+        @message_queue.push(Messages::STOP_WATCHER_MESSAGE)\n+      end\n+\n+      def watch\n+        last_resolution = nil\n+        while true\n+          message = @message_queue.pop\n+\n+          case message\n+          when Messages::StopWatcher\n+            break\n+          when Messages::NewServers\n+            self.discovery_servers = message.servers\n+          when Messages::CheckInterval\n+            # Proceed to re-resolve the DNS\n+          else\n+            raise Messages::InvalidMessageError,\n+              \"Received unrecognized message: #{message.inspect}\"\n+          end\n+\n+          # Empty servers means we haven't heard back from ZK yet", "path": "lib/synapse/service_watcher/zookeeper_dns.rb", "position": null, "original_position": 67, "commit_id": "9243fdf6b4a9c07a1e4054ab0dd59ab5ec55c884", "original_commit_id": "6d20ce283e181d8126791df842a5295ef5c4cb37", "user": {"login": "schleyfox", "id": 4259, "avatar_url": "https://avatars0.githubusercontent.com/u/4259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/schleyfox", "html_url": "https://github.com/schleyfox", "followers_url": "https://api.github.com/users/schleyfox/followers", "following_url": "https://api.github.com/users/schleyfox/following{/other_user}", "gists_url": "https://api.github.com/users/schleyfox/gists{/gist_id}", "starred_url": "https://api.github.com/users/schleyfox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schleyfox/subscriptions", "organizations_url": "https://api.github.com/users/schleyfox/orgs", "repos_url": "https://api.github.com/users/schleyfox/repos", "events_url": "https://api.github.com/users/schleyfox/events{/privacy}", "received_events_url": "https://api.github.com/users/schleyfox/received_events", "type": "User", "site_admin": false}, "body": "it actually shouldn't because the ZK watcher already has behavior in it to prevent sending a list of empty backends to synapse.\n\nThis does raise the point that figuring out when or how to fall back to defaults is tricky and needs to be figured out.  I'm not sure what the right approach is here.\n", "created_at": "2014-05-06T06:23:33Z", "updated_at": "2014-05-07T00:47:35Z", "html_url": "https://github.com/airbnb/synapse/pull/65#discussion_r12311905", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/65", "author_association": "OWNER", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12311905"}, "html": {"href": "https://github.com/airbnb/synapse/pull/65#discussion_r12311905"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/65"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12311905/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12312088", "pull_request_review_id": null, "id": 12312088, "diff_hunk": "@@ -0,0 +1,183 @@\n+require 'synapse/service_watcher/base'\n+require 'synapse/service_watcher/dns'\n+require 'synapse/service_watcher/zookeeper'\n+\n+require 'thread'\n+\n+# Watcher for watching Zookeeper for entries containing DNS names that are\n+# continuously resolved to IP Addresses.  The use case for this watcher is to\n+# allow services that are addressed by DNS to be reconfigured via Zookeeper\n+# instead of an update of the synapse config.\n+#\n+# The implementation builds on top of the existing DNS and Zookeeper watchers.\n+# This watcher creates a thread to manage the lifecycle of the DNS and\n+# Zookeeper watchers.  This thread also publishes messages on a queue to\n+# indicate that DNS should be re-resolved (after the check interval) or that\n+# the DNS watcher should be shut down.  The Zookeeper watcher waits for changes\n+# in backends from zookeeper and publishes those changes on an internal queue\n+# consumed by the DNS watcher.  The DNS watcher blocks on this queue waiting\n+# for messages indicating that new servers are available, the check interval\n+# has passed (triggering a re-resolve), or that the watcher should shut down.\n+# The DNS watcher is responsible for the actual reconfiguring of backends.\n+module Synapse\n+  class ZookeeperDnsWatcher < BaseWatcher\n+\n+    module Messages\n+      class InvalidMessageError < RuntimeError; end\n+\n+      class NewServers < Struct.new(:servers); end\n+      class CheckInterval; end\n+      class StopWatcher; end\n+\n+      STOP_WATCHER_MESSAGE = StopWatcher.new\n+      CHECK_INTERVAL_MESSAGE = CheckInterval.new\n+    end\n+\n+    class Dns < Synapse::DnsWatcher\n+\n+      attr_accessor :discovery_servers\n+\n+      def initialize(opts={}, synapse, message_queue)\n+        @message_queue = message_queue\n+\n+        super(opts, synapse)\n+      end\n+\n+      def stop\n+        @message_queue.push(Messages::STOP_WATCHER_MESSAGE)\n+      end\n+\n+      def watch\n+        last_resolution = nil\n+        while true\n+          message = @message_queue.pop\n+\n+          case message\n+          when Messages::StopWatcher\n+            break\n+          when Messages::NewServers\n+            self.discovery_servers = message.servers\n+          when Messages::CheckInterval\n+            # Proceed to re-resolve the DNS\n+          else\n+            raise Messages::InvalidMessageError,\n+              \"Received unrecognized message: #{message.inspect}\"\n+          end\n+\n+          # Empty servers means we haven't heard back from ZK yet", "path": "lib/synapse/service_watcher/zookeeper_dns.rb", "position": null, "original_position": 67, "commit_id": "9243fdf6b4a9c07a1e4054ab0dd59ab5ec55c884", "original_commit_id": "6d20ce283e181d8126791df842a5295ef5c4cb37", "user": {"login": "schleyfox", "id": 4259, "avatar_url": "https://avatars0.githubusercontent.com/u/4259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/schleyfox", "html_url": "https://github.com/schleyfox", "followers_url": "https://api.github.com/users/schleyfox/followers", "following_url": "https://api.github.com/users/schleyfox/following{/other_user}", "gists_url": "https://api.github.com/users/schleyfox/gists{/gist_id}", "starred_url": "https://api.github.com/users/schleyfox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schleyfox/subscriptions", "organizations_url": "https://api.github.com/users/schleyfox/orgs", "repos_url": "https://api.github.com/users/schleyfox/repos", "events_url": "https://api.github.com/users/schleyfox/events{/privacy}", "received_events_url": "https://api.github.com/users/schleyfox/received_events", "type": "User", "site_admin": false}, "body": "It's also worth noting that default_servers won't work particularly well as a fallback because DNS will only be resolved once, which would introduce a fairly severe risk that all servers seem to be behaving well, but some have accidentally gotten in a state in which they are only coasting on their default servers, which would stop working if the DNS changes.\n", "created_at": "2014-05-06T06:33:55Z", "updated_at": "2014-05-07T00:47:35Z", "html_url": "https://github.com/airbnb/synapse/pull/65#discussion_r12312088", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/65", "author_association": "OWNER", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12312088"}, "html": {"href": "https://github.com/airbnb/synapse/pull/65#discussion_r12312088"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/65"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12312088/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12312104", "pull_request_review_id": null, "id": 12312104, "diff_hunk": "@@ -0,0 +1,212 @@\n+require 'synapse/service_watcher/base'\n+require 'synapse/service_watcher/dns'\n+require 'synapse/service_watcher/zookeeper'\n+\n+require 'thread'\n+\n+# Watcher for watching Zookeeper for entries containing DNS names that are\n+# continuously resolved to IP Addresses.  The use case for this watcher is to\n+# allow services that are addressed by DNS to be reconfigured via Zookeeper\n+# instead of an update of the synapse config.\n+#\n+# The implementation builds on top of the existing DNS and Zookeeper watchers.\n+# This watcher creates a thread to manage the lifecycle of the DNS and\n+# Zookeeper watchers.  This thread also publishes messages on a queue to\n+# indicate that DNS should be re-resolved (after the check interval) or that\n+# the DNS watcher should be shut down.  The Zookeeper watcher waits for changes\n+# in backends from zookeeper and publishes those changes on an internal queue\n+# consumed by the DNS watcher.  The DNS watcher blocks on this queue waiting\n+# for messages indicating that new servers are available, the check interval\n+# has passed (triggering a re-resolve), or that the watcher should shut down.\n+# The DNS watcher is responsible for the actual reconfiguring of backends.\n+module Synapse\n+  class ZookeeperDnsWatcher < BaseWatcher\n+\n+    # Valid messages that can be passed through the internal message queue\n+    module Messages\n+      class InvalidMessageError < RuntimeError; end\n+\n+      # Indicates new servers identified by DNS names to be resolved.  This is\n+      # sent from Zookeeper on events that modify the ZK node. The payload is\n+      # an array of hashes containing {'host', 'port', 'name'}\n+      class NewServers < Struct.new(:servers); end\n+\n+      # Indicates that DNS should be re-resolved.  This is sent by the\n+      # ZookeeperDnsWatcher thread every check_interval seconds to cause a\n+      # refresh of the IP addresses.\n+      class CheckInterval; end\n+\n+      # Indicates that the DNS watcher should shut down.  This is sent when\n+      # stop is called.\n+      class StopWatcher; end\n+\n+      # Saved instances of message types with contents that cannot vary.  This\n+      # reduces object allocation.\n+      STOP_WATCHER_MESSAGE = StopWatcher.new\n+      CHECK_INTERVAL_MESSAGE = CheckInterval.new\n+    end\n+\n+    class Dns < Synapse::DnsWatcher\n+\n+      attr_accessor :discovery_servers\n+\n+      def initialize(opts={}, synapse, message_queue)\n+        @message_queue = message_queue\n+\n+        super(opts, synapse)\n+      end\n+\n+      def stop\n+        @message_queue.push(Messages::STOP_WATCHER_MESSAGE)\n+      end\n+\n+      def watch\n+        last_resolution = nil\n+        while true\n+          # Blocks on message queue, the message will be a signal to stop\n+          # watching, to check a new set of servers from ZK, or to re-resolve\n+          # the DNS (triggered every check_interval seconds)\n+          message = @message_queue.pop\n+\n+          case message\n+          when Messages::StopWatcher\n+            break\n+          when Messages::NewServers\n+            self.discovery_servers = message.servers\n+          when Messages::CheckInterval\n+            # Proceed to re-resolve the DNS\n+          else\n+            raise Messages::InvalidMessageError,\n+              \"Received unrecognized message: #{message.inspect}\"\n+          end\n+\n+          # Empty servers means we haven't heard back from ZK yet\n+          unless self.discovery_servers.nil? || self.discovery_servers.empty?\n+            # Resolve DNS names with the nameserver\n+            current_resolution = resolve_servers\n+            unless last_resolution == current_resolution\n+              last_resolution = current_resolution\n+              configure_backends(last_resolution)\n+            end\n+          end\n+        end\n+      end\n+\n+      private\n+\n+      # Validation is skipped as it has already occurred in the parent watcher\n+      def validate_discovery_opts\n+      end\n+    end\n+\n+    class Zookeeper < Synapse::ZookeeperWatcher\n+      def initialize(opts={}, synapse, message_queue)\n+        super(opts, synapse)\n+\n+        @message_queue = message_queue\n+      end\n+\n+      # Overrides reconfigure! to cause the new list of servers to be messaged\n+      # to the DNS watcher rather than invoking a synapse reconfigure directly\n+      def reconfigure!\n+        # push the new backends onto the queue\n+        @message_queue.push(Messages::NewServers.new(@backends))\n+      end\n+\n+      private\n+\n+      # Validation is skipped as it has already occurred in the parent watcher\n+      def validate_discovery_opts\n+      end\n+    end\n+\n+    def start\n+      dns_discovery_opts = @discovery.select do |k,_|\n+        k == 'nameserver' || k == 'default_servers'", "path": "lib/synapse/service_watcher/zookeeper_dns.rb", "position": null, "original_position": 125, "commit_id": "9243fdf6b4a9c07a1e4054ab0dd59ab5ec55c884", "original_commit_id": "89efc593267c6cfdedeecf7be08266ff95a7f9f1", "user": {"login": "jtai", "id": 696036, "avatar_url": "https://avatars2.githubusercontent.com/u/696036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jtai", "html_url": "https://github.com/jtai", "followers_url": "https://api.github.com/users/jtai/followers", "following_url": "https://api.github.com/users/jtai/following{/other_user}", "gists_url": "https://api.github.com/users/jtai/gists{/gist_id}", "starred_url": "https://api.github.com/users/jtai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jtai/subscriptions", "organizations_url": "https://api.github.com/users/jtai/orgs", "repos_url": "https://api.github.com/users/jtai/repos", "events_url": "https://api.github.com/users/jtai/events{/privacy}", "received_events_url": "https://api.github.com/users/jtai/received_events", "type": "User", "site_admin": false}, "body": "I don't see `default_servers` used anywhere; perhaps this was meant to be used in the empty servers case?\n", "created_at": "2014-05-06T06:34:55Z", "updated_at": "2014-05-07T00:47:35Z", "html_url": "https://github.com/airbnb/synapse/pull/65#discussion_r12312104", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/65", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12312104"}, "html": {"href": "https://github.com/airbnb/synapse/pull/65#discussion_r12312104"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/65"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12312104/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12312154", "pull_request_review_id": null, "id": 12312154, "diff_hunk": "@@ -0,0 +1,212 @@\n+require 'synapse/service_watcher/base'\n+require 'synapse/service_watcher/dns'\n+require 'synapse/service_watcher/zookeeper'\n+\n+require 'thread'\n+\n+# Watcher for watching Zookeeper for entries containing DNS names that are\n+# continuously resolved to IP Addresses.  The use case for this watcher is to\n+# allow services that are addressed by DNS to be reconfigured via Zookeeper\n+# instead of an update of the synapse config.\n+#\n+# The implementation builds on top of the existing DNS and Zookeeper watchers.\n+# This watcher creates a thread to manage the lifecycle of the DNS and\n+# Zookeeper watchers.  This thread also publishes messages on a queue to\n+# indicate that DNS should be re-resolved (after the check interval) or that\n+# the DNS watcher should be shut down.  The Zookeeper watcher waits for changes\n+# in backends from zookeeper and publishes those changes on an internal queue\n+# consumed by the DNS watcher.  The DNS watcher blocks on this queue waiting\n+# for messages indicating that new servers are available, the check interval\n+# has passed (triggering a re-resolve), or that the watcher should shut down.\n+# The DNS watcher is responsible for the actual reconfiguring of backends.\n+module Synapse\n+  class ZookeeperDnsWatcher < BaseWatcher\n+\n+    # Valid messages that can be passed through the internal message queue\n+    module Messages\n+      class InvalidMessageError < RuntimeError; end\n+\n+      # Indicates new servers identified by DNS names to be resolved.  This is\n+      # sent from Zookeeper on events that modify the ZK node. The payload is\n+      # an array of hashes containing {'host', 'port', 'name'}\n+      class NewServers < Struct.new(:servers); end\n+\n+      # Indicates that DNS should be re-resolved.  This is sent by the\n+      # ZookeeperDnsWatcher thread every check_interval seconds to cause a\n+      # refresh of the IP addresses.\n+      class CheckInterval; end\n+\n+      # Indicates that the DNS watcher should shut down.  This is sent when\n+      # stop is called.\n+      class StopWatcher; end\n+\n+      # Saved instances of message types with contents that cannot vary.  This\n+      # reduces object allocation.\n+      STOP_WATCHER_MESSAGE = StopWatcher.new\n+      CHECK_INTERVAL_MESSAGE = CheckInterval.new\n+    end\n+\n+    class Dns < Synapse::DnsWatcher\n+\n+      attr_accessor :discovery_servers\n+\n+      def initialize(opts={}, synapse, message_queue)\n+        @message_queue = message_queue\n+\n+        super(opts, synapse)\n+      end\n+\n+      def stop\n+        @message_queue.push(Messages::STOP_WATCHER_MESSAGE)\n+      end\n+\n+      def watch\n+        last_resolution = nil\n+        while true\n+          # Blocks on message queue, the message will be a signal to stop\n+          # watching, to check a new set of servers from ZK, or to re-resolve\n+          # the DNS (triggered every check_interval seconds)\n+          message = @message_queue.pop\n+\n+          case message\n+          when Messages::StopWatcher\n+            break\n+          when Messages::NewServers\n+            self.discovery_servers = message.servers\n+          when Messages::CheckInterval\n+            # Proceed to re-resolve the DNS\n+          else\n+            raise Messages::InvalidMessageError,\n+              \"Received unrecognized message: #{message.inspect}\"\n+          end\n+\n+          # Empty servers means we haven't heard back from ZK yet\n+          unless self.discovery_servers.nil? || self.discovery_servers.empty?\n+            # Resolve DNS names with the nameserver\n+            current_resolution = resolve_servers\n+            unless last_resolution == current_resolution\n+              last_resolution = current_resolution\n+              configure_backends(last_resolution)\n+            end\n+          end\n+        end\n+      end\n+\n+      private\n+\n+      # Validation is skipped as it has already occurred in the parent watcher\n+      def validate_discovery_opts\n+      end\n+    end\n+\n+    class Zookeeper < Synapse::ZookeeperWatcher\n+      def initialize(opts={}, synapse, message_queue)\n+        super(opts, synapse)\n+\n+        @message_queue = message_queue\n+      end\n+\n+      # Overrides reconfigure! to cause the new list of servers to be messaged\n+      # to the DNS watcher rather than invoking a synapse reconfigure directly\n+      def reconfigure!\n+        # push the new backends onto the queue\n+        @message_queue.push(Messages::NewServers.new(@backends))\n+      end\n+\n+      private\n+\n+      # Validation is skipped as it has already occurred in the parent watcher\n+      def validate_discovery_opts\n+      end\n+    end\n+\n+    def start\n+      dns_discovery_opts = @discovery.select do |k,_|\n+        k == 'nameserver' || k == 'default_servers'", "path": "lib/synapse/service_watcher/zookeeper_dns.rb", "position": null, "original_position": 125, "commit_id": "9243fdf6b4a9c07a1e4054ab0dd59ab5ec55c884", "original_commit_id": "89efc593267c6cfdedeecf7be08266ff95a7f9f1", "user": {"login": "jtai", "id": 696036, "avatar_url": "https://avatars2.githubusercontent.com/u/696036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jtai", "html_url": "https://github.com/jtai", "followers_url": "https://api.github.com/users/jtai/followers", "following_url": "https://api.github.com/users/jtai/following{/other_user}", "gists_url": "https://api.github.com/users/jtai/gists{/gist_id}", "starred_url": "https://api.github.com/users/jtai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jtai/subscriptions", "organizations_url": "https://api.github.com/users/jtai/orgs", "repos_url": "https://api.github.com/users/jtai/repos", "events_url": "https://api.github.com/users/jtai/events{/privacy}", "received_events_url": "https://api.github.com/users/jtai/received_events", "type": "User", "site_admin": false}, "body": "Nevermind; this is used in the parent DNS watcher. I think we still need to call `configure_backends` for the logic to be run though. Currently we're skipping the call if the backends are empty.\n", "created_at": "2014-05-06T06:37:49Z", "updated_at": "2014-05-07T00:47:35Z", "html_url": "https://github.com/airbnb/synapse/pull/65#discussion_r12312154", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/65", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12312154"}, "html": {"href": "https://github.com/airbnb/synapse/pull/65#discussion_r12312154"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/65"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12312154/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12312159", "pull_request_review_id": null, "id": 12312159, "diff_hunk": "@@ -0,0 +1,212 @@\n+require 'synapse/service_watcher/base'\n+require 'synapse/service_watcher/dns'\n+require 'synapse/service_watcher/zookeeper'\n+\n+require 'thread'\n+\n+# Watcher for watching Zookeeper for entries containing DNS names that are\n+# continuously resolved to IP Addresses.  The use case for this watcher is to\n+# allow services that are addressed by DNS to be reconfigured via Zookeeper\n+# instead of an update of the synapse config.\n+#\n+# The implementation builds on top of the existing DNS and Zookeeper watchers.\n+# This watcher creates a thread to manage the lifecycle of the DNS and\n+# Zookeeper watchers.  This thread also publishes messages on a queue to\n+# indicate that DNS should be re-resolved (after the check interval) or that\n+# the DNS watcher should be shut down.  The Zookeeper watcher waits for changes\n+# in backends from zookeeper and publishes those changes on an internal queue\n+# consumed by the DNS watcher.  The DNS watcher blocks on this queue waiting\n+# for messages indicating that new servers are available, the check interval\n+# has passed (triggering a re-resolve), or that the watcher should shut down.\n+# The DNS watcher is responsible for the actual reconfiguring of backends.\n+module Synapse\n+  class ZookeeperDnsWatcher < BaseWatcher\n+\n+    # Valid messages that can be passed through the internal message queue\n+    module Messages\n+      class InvalidMessageError < RuntimeError; end\n+\n+      # Indicates new servers identified by DNS names to be resolved.  This is\n+      # sent from Zookeeper on events that modify the ZK node. The payload is\n+      # an array of hashes containing {'host', 'port', 'name'}\n+      class NewServers < Struct.new(:servers); end\n+\n+      # Indicates that DNS should be re-resolved.  This is sent by the\n+      # ZookeeperDnsWatcher thread every check_interval seconds to cause a\n+      # refresh of the IP addresses.\n+      class CheckInterval; end\n+\n+      # Indicates that the DNS watcher should shut down.  This is sent when\n+      # stop is called.\n+      class StopWatcher; end\n+\n+      # Saved instances of message types with contents that cannot vary.  This\n+      # reduces object allocation.\n+      STOP_WATCHER_MESSAGE = StopWatcher.new\n+      CHECK_INTERVAL_MESSAGE = CheckInterval.new\n+    end\n+\n+    class Dns < Synapse::DnsWatcher\n+\n+      attr_accessor :discovery_servers\n+\n+      def initialize(opts={}, synapse, message_queue)\n+        @message_queue = message_queue\n+\n+        super(opts, synapse)\n+      end\n+\n+      def stop\n+        @message_queue.push(Messages::STOP_WATCHER_MESSAGE)\n+      end\n+\n+      def watch\n+        last_resolution = nil\n+        while true\n+          # Blocks on message queue, the message will be a signal to stop\n+          # watching, to check a new set of servers from ZK, or to re-resolve\n+          # the DNS (triggered every check_interval seconds)\n+          message = @message_queue.pop\n+\n+          case message\n+          when Messages::StopWatcher\n+            break\n+          when Messages::NewServers\n+            self.discovery_servers = message.servers\n+          when Messages::CheckInterval\n+            # Proceed to re-resolve the DNS\n+          else\n+            raise Messages::InvalidMessageError,\n+              \"Received unrecognized message: #{message.inspect}\"\n+          end\n+\n+          # Empty servers means we haven't heard back from ZK yet\n+          unless self.discovery_servers.nil? || self.discovery_servers.empty?\n+            # Resolve DNS names with the nameserver\n+            current_resolution = resolve_servers\n+            unless last_resolution == current_resolution\n+              last_resolution = current_resolution\n+              configure_backends(last_resolution)\n+            end\n+          end\n+        end\n+      end\n+\n+      private\n+\n+      # Validation is skipped as it has already occurred in the parent watcher\n+      def validate_discovery_opts\n+      end\n+    end\n+\n+    class Zookeeper < Synapse::ZookeeperWatcher\n+      def initialize(opts={}, synapse, message_queue)\n+        super(opts, synapse)\n+\n+        @message_queue = message_queue\n+      end\n+\n+      # Overrides reconfigure! to cause the new list of servers to be messaged\n+      # to the DNS watcher rather than invoking a synapse reconfigure directly\n+      def reconfigure!\n+        # push the new backends onto the queue\n+        @message_queue.push(Messages::NewServers.new(@backends))\n+      end\n+\n+      private\n+\n+      # Validation is skipped as it has already occurred in the parent watcher\n+      def validate_discovery_opts\n+      end\n+    end\n+\n+    def start\n+      dns_discovery_opts = @discovery.select do |k,_|\n+        k == 'nameserver' || k == 'default_servers'", "path": "lib/synapse/service_watcher/zookeeper_dns.rb", "position": null, "original_position": 125, "commit_id": "9243fdf6b4a9c07a1e4054ab0dd59ab5ec55c884", "original_commit_id": "89efc593267c6cfdedeecf7be08266ff95a7f9f1", "user": {"login": "schleyfox", "id": 4259, "avatar_url": "https://avatars0.githubusercontent.com/u/4259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/schleyfox", "html_url": "https://github.com/schleyfox", "followers_url": "https://api.github.com/users/schleyfox/followers", "following_url": "https://api.github.com/users/schleyfox/following{/other_user}", "gists_url": "https://api.github.com/users/schleyfox/gists{/gist_id}", "starred_url": "https://api.github.com/users/schleyfox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schleyfox/subscriptions", "organizations_url": "https://api.github.com/users/schleyfox/orgs", "repos_url": "https://api.github.com/users/schleyfox/repos", "events_url": "https://api.github.com/users/schleyfox/events{/privacy}", "received_events_url": "https://api.github.com/users/schleyfox/received_events", "type": "User", "site_admin": false}, "body": "it's actually not even on that hash.  This could be made to work by passing default_servers into at least the Zk watcher, as it will pass on the default servers to the Dns watcher as the list of backends if it resolves an empty set of backends.  The more I think about it, the less I like that particular failure/recovery mode, however.\n", "created_at": "2014-05-06T06:37:56Z", "updated_at": "2014-05-07T00:47:35Z", "html_url": "https://github.com/airbnb/synapse/pull/65#discussion_r12312159", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/65", "author_association": "OWNER", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12312159"}, "html": {"href": "https://github.com/airbnb/synapse/pull/65#discussion_r12312159"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/65"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12312159/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12344012", "pull_request_review_id": null, "id": 12344012, "diff_hunk": "@@ -0,0 +1,212 @@\n+require 'synapse/service_watcher/base'\n+require 'synapse/service_watcher/dns'\n+require 'synapse/service_watcher/zookeeper'\n+\n+require 'thread'\n+\n+# Watcher for watching Zookeeper for entries containing DNS names that are\n+# continuously resolved to IP Addresses.  The use case for this watcher is to\n+# allow services that are addressed by DNS to be reconfigured via Zookeeper\n+# instead of an update of the synapse config.\n+#\n+# The implementation builds on top of the existing DNS and Zookeeper watchers.\n+# This watcher creates a thread to manage the lifecycle of the DNS and\n+# Zookeeper watchers.  This thread also publishes messages on a queue to\n+# indicate that DNS should be re-resolved (after the check interval) or that\n+# the DNS watcher should be shut down.  The Zookeeper watcher waits for changes\n+# in backends from zookeeper and publishes those changes on an internal queue\n+# consumed by the DNS watcher.  The DNS watcher blocks on this queue waiting\n+# for messages indicating that new servers are available, the check interval\n+# has passed (triggering a re-resolve), or that the watcher should shut down.\n+# The DNS watcher is responsible for the actual reconfiguring of backends.\n+module Synapse\n+  class ZookeeperDnsWatcher < BaseWatcher\n+\n+    # Valid messages that can be passed through the internal message queue\n+    module Messages\n+      class InvalidMessageError < RuntimeError; end\n+\n+      # Indicates new servers identified by DNS names to be resolved.  This is\n+      # sent from Zookeeper on events that modify the ZK node. The payload is\n+      # an array of hashes containing {'host', 'port', 'name'}\n+      class NewServers < Struct.new(:servers); end\n+\n+      # Indicates that DNS should be re-resolved.  This is sent by the\n+      # ZookeeperDnsWatcher thread every check_interval seconds to cause a\n+      # refresh of the IP addresses.\n+      class CheckInterval; end\n+\n+      # Indicates that the DNS watcher should shut down.  This is sent when\n+      # stop is called.\n+      class StopWatcher; end\n+\n+      # Saved instances of message types with contents that cannot vary.  This\n+      # reduces object allocation.\n+      STOP_WATCHER_MESSAGE = StopWatcher.new\n+      CHECK_INTERVAL_MESSAGE = CheckInterval.new\n+    end\n+\n+    class Dns < Synapse::DnsWatcher\n+\n+      attr_accessor :discovery_servers\n+\n+      def initialize(opts={}, synapse, message_queue)\n+        @message_queue = message_queue\n+\n+        super(opts, synapse)\n+      end\n+\n+      def stop\n+        @message_queue.push(Messages::STOP_WATCHER_MESSAGE)\n+      end\n+\n+      def watch\n+        last_resolution = nil\n+        while true\n+          # Blocks on message queue, the message will be a signal to stop\n+          # watching, to check a new set of servers from ZK, or to re-resolve\n+          # the DNS (triggered every check_interval seconds)\n+          message = @message_queue.pop\n+\n+          case message\n+          when Messages::StopWatcher\n+            break\n+          when Messages::NewServers\n+            self.discovery_servers = message.servers\n+          when Messages::CheckInterval\n+            # Proceed to re-resolve the DNS\n+          else\n+            raise Messages::InvalidMessageError,\n+              \"Received unrecognized message: #{message.inspect}\"\n+          end\n+\n+          # Empty servers means we haven't heard back from ZK yet\n+          unless self.discovery_servers.nil? || self.discovery_servers.empty?\n+            # Resolve DNS names with the nameserver\n+            current_resolution = resolve_servers\n+            unless last_resolution == current_resolution\n+              last_resolution = current_resolution\n+              configure_backends(last_resolution)\n+            end\n+          end\n+        end\n+      end\n+\n+      private\n+\n+      # Validation is skipped as it has already occurred in the parent watcher\n+      def validate_discovery_opts\n+      end\n+    end\n+\n+    class Zookeeper < Synapse::ZookeeperWatcher\n+      def initialize(opts={}, synapse, message_queue)\n+        super(opts, synapse)\n+\n+        @message_queue = message_queue\n+      end\n+\n+      # Overrides reconfigure! to cause the new list of servers to be messaged\n+      # to the DNS watcher rather than invoking a synapse reconfigure directly\n+      def reconfigure!\n+        # push the new backends onto the queue\n+        @message_queue.push(Messages::NewServers.new(@backends))\n+      end\n+\n+      private\n+\n+      # Validation is skipped as it has already occurred in the parent watcher\n+      def validate_discovery_opts\n+      end\n+    end\n+\n+    def start\n+      dns_discovery_opts = @discovery.select do |k,_|\n+        k == 'nameserver' || k == 'default_servers'", "path": "lib/synapse/service_watcher/zookeeper_dns.rb", "position": null, "original_position": 125, "commit_id": "9243fdf6b4a9c07a1e4054ab0dd59ab5ec55c884", "original_commit_id": "89efc593267c6cfdedeecf7be08266ff95a7f9f1", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "to provide a little more insight with what i was thinking here, i think the current fallback is pretty rudimentary. for instance, the 'don't remove the last server' hack has served it's usefulness.\n\ni was planning on centralizing more logic here: https://github.com/airbnb/synapse/blob/master/lib/synapse/service_watcher/base.rb#L69\n\nmy goal was to add anti-flapping protection, which is to specify a minimum number of servers you want before ANY of them start getting traffic to avoid hammering the first machines that come up. i was thinking of killing any manipulation in the watchers and have them faithfully set whatever they've resolved in `@backends`\n", "created_at": "2014-05-06T19:39:51Z", "updated_at": "2014-05-07T00:47:35Z", "html_url": "https://github.com/airbnb/synapse/pull/65#discussion_r12344012", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/65", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12344012"}, "html": {"href": "https://github.com/airbnb/synapse/pull/65#discussion_r12344012"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/65"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12344012/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12348378", "pull_request_review_id": null, "id": 12348378, "diff_hunk": "@@ -0,0 +1,212 @@\n+require 'synapse/service_watcher/base'\n+require 'synapse/service_watcher/dns'\n+require 'synapse/service_watcher/zookeeper'\n+\n+require 'thread'\n+\n+# Watcher for watching Zookeeper for entries containing DNS names that are\n+# continuously resolved to IP Addresses.  The use case for this watcher is to\n+# allow services that are addressed by DNS to be reconfigured via Zookeeper\n+# instead of an update of the synapse config.\n+#\n+# The implementation builds on top of the existing DNS and Zookeeper watchers.\n+# This watcher creates a thread to manage the lifecycle of the DNS and\n+# Zookeeper watchers.  This thread also publishes messages on a queue to\n+# indicate that DNS should be re-resolved (after the check interval) or that\n+# the DNS watcher should be shut down.  The Zookeeper watcher waits for changes\n+# in backends from zookeeper and publishes those changes on an internal queue\n+# consumed by the DNS watcher.  The DNS watcher blocks on this queue waiting\n+# for messages indicating that new servers are available, the check interval\n+# has passed (triggering a re-resolve), or that the watcher should shut down.\n+# The DNS watcher is responsible for the actual reconfiguring of backends.\n+module Synapse\n+  class ZookeeperDnsWatcher < BaseWatcher\n+\n+    # Valid messages that can be passed through the internal message queue\n+    module Messages\n+      class InvalidMessageError < RuntimeError; end\n+\n+      # Indicates new servers identified by DNS names to be resolved.  This is\n+      # sent from Zookeeper on events that modify the ZK node. The payload is\n+      # an array of hashes containing {'host', 'port', 'name'}\n+      class NewServers < Struct.new(:servers); end\n+\n+      # Indicates that DNS should be re-resolved.  This is sent by the\n+      # ZookeeperDnsWatcher thread every check_interval seconds to cause a\n+      # refresh of the IP addresses.\n+      class CheckInterval; end\n+\n+      # Indicates that the DNS watcher should shut down.  This is sent when\n+      # stop is called.\n+      class StopWatcher; end\n+\n+      # Saved instances of message types with contents that cannot vary.  This\n+      # reduces object allocation.\n+      STOP_WATCHER_MESSAGE = StopWatcher.new\n+      CHECK_INTERVAL_MESSAGE = CheckInterval.new\n+    end\n+\n+    class Dns < Synapse::DnsWatcher\n+\n+      attr_accessor :discovery_servers\n+\n+      def initialize(opts={}, synapse, message_queue)\n+        @message_queue = message_queue\n+\n+        super(opts, synapse)\n+      end\n+\n+      def stop\n+        @message_queue.push(Messages::STOP_WATCHER_MESSAGE)\n+      end\n+\n+      def watch\n+        last_resolution = nil\n+        while true\n+          # Blocks on message queue, the message will be a signal to stop\n+          # watching, to check a new set of servers from ZK, or to re-resolve\n+          # the DNS (triggered every check_interval seconds)\n+          message = @message_queue.pop\n+\n+          case message\n+          when Messages::StopWatcher\n+            break\n+          when Messages::NewServers\n+            self.discovery_servers = message.servers\n+          when Messages::CheckInterval\n+            # Proceed to re-resolve the DNS\n+          else\n+            raise Messages::InvalidMessageError,\n+              \"Received unrecognized message: #{message.inspect}\"\n+          end\n+\n+          # Empty servers means we haven't heard back from ZK yet\n+          unless self.discovery_servers.nil? || self.discovery_servers.empty?", "path": "lib/synapse/service_watcher/zookeeper_dns.rb", "position": null, "original_position": 84, "commit_id": "9243fdf6b4a9c07a1e4054ab0dd59ab5ec55c884", "original_commit_id": "89efc593267c6cfdedeecf7be08266ff95a7f9f1", "user": {"login": "joshbuddy", "id": 8898, "avatar_url": "https://avatars2.githubusercontent.com/u/8898?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joshbuddy", "html_url": "https://github.com/joshbuddy", "followers_url": "https://api.github.com/users/joshbuddy/followers", "following_url": "https://api.github.com/users/joshbuddy/following{/other_user}", "gists_url": "https://api.github.com/users/joshbuddy/gists{/gist_id}", "starred_url": "https://api.github.com/users/joshbuddy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joshbuddy/subscriptions", "organizations_url": "https://api.github.com/users/joshbuddy/orgs", "repos_url": "https://api.github.com/users/joshbuddy/repos", "events_url": "https://api.github.com/users/joshbuddy/events{/privacy}", "received_events_url": "https://api.github.com/users/joshbuddy/received_events", "type": "User", "site_admin": false}, "body": "Can't we just stick this in `when Messages::CheckInterval` case?\n", "created_at": "2014-05-06T20:53:23Z", "updated_at": "2014-05-07T00:47:35Z", "html_url": "https://github.com/airbnb/synapse/pull/65#discussion_r12348378", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/65", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12348378"}, "html": {"href": "https://github.com/airbnb/synapse/pull/65#discussion_r12348378"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/65"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/12348378/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/11263203", "pull_request_review_id": null, "id": 11263203, "diff_hunk": "@@ -96,8 +109,14 @@ def discover\n     def watch\n       return if @should_exit\n \n-      @watcher.unsubscribe if defined? @watcher\n+      @watcher.unsubscribe if @watcher", "path": "lib/synapse/service_watcher/zookeeper.rb", "position": null, "original_position": 46, "commit_id": "e45083f053124a343e378a5621730a6fe5daba0e", "original_commit_id": "4897eccb424d8bb6cbc7cef1065805edab255993", "user": {"login": "wmoss", "id": 187472, "avatar_url": "https://avatars3.githubusercontent.com/u/187472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wmoss", "html_url": "https://github.com/wmoss", "followers_url": "https://api.github.com/users/wmoss/followers", "following_url": "https://api.github.com/users/wmoss/following{/other_user}", "gists_url": "https://api.github.com/users/wmoss/gists{/gist_id}", "starred_url": "https://api.github.com/users/wmoss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wmoss/subscriptions", "organizations_url": "https://api.github.com/users/wmoss/orgs", "repos_url": "https://api.github.com/users/wmoss/repos", "events_url": "https://api.github.com/users/wmoss/events{/privacy}", "received_events_url": "https://api.github.com/users/wmoss/received_events", "type": "User", "site_admin": false}, "body": "Are we sure `@watcher` is defined? I don't see it being created in `initialize` or anywhere else that would guarantee it's existence.\n", "created_at": "2014-04-03T17:42:58Z", "updated_at": "2014-05-29T23:19:35Z", "html_url": "https://github.com/airbnb/synapse/pull/56#discussion_r11263203", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/56", "author_association": "NONE", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/11263203"}, "html": {"href": "https://github.com/airbnb/synapse/pull/56#discussion_r11263203"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/56"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/11263203/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/11263411", "pull_request_review_id": null, "id": 11263411, "diff_hunk": "@@ -96,8 +109,14 @@ def discover\n     def watch\n       return if @should_exit\n \n-      @watcher.unsubscribe if defined? @watcher\n+      @watcher.unsubscribe if @watcher", "path": "lib/synapse/service_watcher/zookeeper.rb", "position": null, "original_position": 46, "commit_id": "e45083f053124a343e378a5621730a6fe5daba0e", "original_commit_id": "4897eccb424d8bb6cbc7cef1065805edab255993", "user": {"login": "brndnmtthws", "id": 3129093, "avatar_url": "https://avatars1.githubusercontent.com/u/3129093?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brndnmtthws", "html_url": "https://github.com/brndnmtthws", "followers_url": "https://api.github.com/users/brndnmtthws/followers", "following_url": "https://api.github.com/users/brndnmtthws/following{/other_user}", "gists_url": "https://api.github.com/users/brndnmtthws/gists{/gist_id}", "starred_url": "https://api.github.com/users/brndnmtthws/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brndnmtthws/subscriptions", "organizations_url": "https://api.github.com/users/brndnmtthws/orgs", "repos_url": "https://api.github.com/users/brndnmtthws/repos", "events_url": "https://api.github.com/users/brndnmtthws/events{/privacy}", "received_events_url": "https://api.github.com/users/brndnmtthws/received_events", "type": "User", "site_admin": false}, "body": "I was confused about the semantics here. I suppose !@watcher.nil? might be\nbetter?\nOn Apr 3, 2014 10:43 AM, \"Will Moss\" notifications@github.com wrote:\n\n> In lib/synapse/service_watcher/zookeeper.rb:\n> \n> > @@ -96,8 +109,14 @@ def discover\n> >      def watch\n> >        return if @should_exit\n> > -      @watcher.unsubscribe if defined? @watcher\n> > -      @watcher.unsubscribe if @watcher\n> \n> Are we sure @watcher is defined? I don't see it being created in\n> initialize or anywhere else that would guarantee it's existence.\n> \n> ## \n> \n> Reply to this email directly or view it on GitHubhttps://github.com/airbnb/synapse/pull/56/files#r11263203\n> .\n", "created_at": "2014-04-03T17:47:30Z", "updated_at": "2014-05-29T23:19:35Z", "html_url": "https://github.com/airbnb/synapse/pull/56#discussion_r11263411", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/56", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/11263411"}, "html": {"href": "https://github.com/airbnb/synapse/pull/56#discussion_r11263411"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/56"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/11263411/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/11263596", "pull_request_review_id": null, "id": 11263596, "diff_hunk": "@@ -96,8 +109,14 @@ def discover\n     def watch\n       return if @should_exit\n \n-      @watcher.unsubscribe if defined? @watcher\n+      @watcher.unsubscribe if @watcher", "path": "lib/synapse/service_watcher/zookeeper.rb", "position": null, "original_position": 46, "commit_id": "e45083f053124a343e378a5621730a6fe5daba0e", "original_commit_id": "4897eccb424d8bb6cbc7cef1065805edab255993", "user": {"login": "wmoss", "id": 187472, "avatar_url": "https://avatars3.githubusercontent.com/u/187472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wmoss", "html_url": "https://github.com/wmoss", "followers_url": "https://api.github.com/users/wmoss/followers", "following_url": "https://api.github.com/users/wmoss/following{/other_user}", "gists_url": "https://api.github.com/users/wmoss/gists{/gist_id}", "starred_url": "https://api.github.com/users/wmoss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wmoss/subscriptions", "organizations_url": "https://api.github.com/users/wmoss/orgs", "repos_url": "https://api.github.com/users/wmoss/repos", "events_url": "https://api.github.com/users/wmoss/events{/privacy}", "received_events_url": "https://api.github.com/users/wmoss/received_events", "type": "User", "site_admin": false}, "body": "I think that will still throw a `NameError` if `@watcher` is not defined yet. I think you might need to do:\n\n``` ruby\ndefined?(@watcher) && !@watcher.nil?\n```\n", "created_at": "2014-04-03T17:51:31Z", "updated_at": "2014-05-29T23:19:35Z", "html_url": "https://github.com/airbnb/synapse/pull/56#discussion_r11263596", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/56", "author_association": "NONE", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/11263596"}, "html": {"href": "https://github.com/airbnb/synapse/pull/56#discussion_r11263596"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/56"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/11263596/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/11263633", "pull_request_review_id": null, "id": 11263633, "diff_hunk": "@@ -96,8 +109,14 @@ def discover\n     def watch\n       return if @should_exit\n \n-      @watcher.unsubscribe if defined? @watcher\n+      @watcher.unsubscribe if @watcher", "path": "lib/synapse/service_watcher/zookeeper.rb", "position": null, "original_position": 46, "commit_id": "e45083f053124a343e378a5621730a6fe5daba0e", "original_commit_id": "4897eccb424d8bb6cbc7cef1065805edab255993", "user": {"login": "wmoss", "id": 187472, "avatar_url": "https://avatars3.githubusercontent.com/u/187472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wmoss", "html_url": "https://github.com/wmoss", "followers_url": "https://api.github.com/users/wmoss/followers", "following_url": "https://api.github.com/users/wmoss/following{/other_user}", "gists_url": "https://api.github.com/users/wmoss/gists{/gist_id}", "starred_url": "https://api.github.com/users/wmoss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wmoss/subscriptions", "organizations_url": "https://api.github.com/users/wmoss/orgs", "repos_url": "https://api.github.com/users/wmoss/repos", "events_url": "https://api.github.com/users/wmoss/events{/privacy}", "received_events_url": "https://api.github.com/users/wmoss/received_events", "type": "User", "site_admin": false}, "body": "Or just set `@watcher` to `nil` in `BaseWatcher::initialize` \n", "created_at": "2014-04-03T17:52:10Z", "updated_at": "2014-05-29T23:19:35Z", "html_url": "https://github.com/airbnb/synapse/pull/56#discussion_r11263633", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/56", "author_association": "NONE", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/11263633"}, "html": {"href": "https://github.com/airbnb/synapse/pull/56#discussion_r11263633"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/56"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/11263633/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/11264419", "pull_request_review_id": null, "id": 11264419, "diff_hunk": "@@ -96,8 +109,14 @@ def discover\n     def watch\n       return if @should_exit\n \n-      @watcher.unsubscribe if defined? @watcher\n+      @watcher.unsubscribe if @watcher", "path": "lib/synapse/service_watcher/zookeeper.rb", "position": null, "original_position": 46, "commit_id": "e45083f053124a343e378a5621730a6fe5daba0e", "original_commit_id": "4897eccb424d8bb6cbc7cef1065805edab255993", "user": {"login": "brndnmtthws", "id": 3129093, "avatar_url": "https://avatars1.githubusercontent.com/u/3129093?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brndnmtthws", "html_url": "https://github.com/brndnmtthws", "followers_url": "https://api.github.com/users/brndnmtthws/followers", "following_url": "https://api.github.com/users/brndnmtthws/following{/other_user}", "gists_url": "https://api.github.com/users/brndnmtthws/gists{/gist_id}", "starred_url": "https://api.github.com/users/brndnmtthws/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brndnmtthws/subscriptions", "organizations_url": "https://api.github.com/users/brndnmtthws/orgs", "repos_url": "https://api.github.com/users/brndnmtthws/repos", "events_url": "https://api.github.com/users/brndnmtthws/events{/privacy}", "received_events_url": "https://api.github.com/users/brndnmtthws/received_events", "type": "User", "site_admin": false}, "body": "Yeah, I'll clean this up so we don't have to speculate.\n", "created_at": "2014-04-03T18:09:12Z", "updated_at": "2014-05-29T23:19:35Z", "html_url": "https://github.com/airbnb/synapse/pull/56#discussion_r11264419", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/56", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/11264419"}, "html": {"href": "https://github.com/airbnb/synapse/pull/56#discussion_r11264419"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/56"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/11264419/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/14913870", "pull_request_review_id": null, "id": 14913870, "diff_hunk": "@@ -1,25 +1,127 @@\n-require \"synapse/service_watcher/base\"\n+require 'synapse/service_watcher/base'\n+require 'aws-sdk'\n \n module Synapse\n   class EC2Watcher < BaseWatcher\n+\n+    attr_reader :check_interval\n+\n     def start\n-      # connect to ec2\n-      # find all servers whose @discovery['tag_name'] matches @discovery['tag_value']\n-      # call @synapse.configure\n+      region = @discovery['aws_region'] || ENV['AWS_REGION']", "path": "lib/synapse/service_watcher/ec2tag.rb", "position": 14, "original_position": 14, "commit_id": "05215d4e822e9c688438f3fd19d12f711efa4c2c", "original_commit_id": "05215d4e822e9c688438f3fd19d12f711efa4c2c", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "if `aws_region` is set in neither the config file nor the environment, we will fail with an odd error later on; we should validate the presence of this, and the other AWS-related options, in `validate_discovery_opts`\n", "created_at": "2014-07-15T01:36:11Z", "updated_at": "2014-07-15T01:36:11Z", "html_url": "https://github.com/airbnb/synapse/pull/66#discussion_r14913870", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/66", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/14913870"}, "html": {"href": "https://github.com/airbnb/synapse/pull/66#discussion_r14913870"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/66"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/14913870/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/14913929", "pull_request_review_id": null, "id": 14913929, "diff_hunk": "@@ -1,25 +1,127 @@\n-require \"synapse/service_watcher/base\"\n+require 'synapse/service_watcher/base'\n+require 'aws-sdk'\n \n module Synapse\n   class EC2Watcher < BaseWatcher\n+\n+    attr_reader :check_interval\n+\n     def start\n-      # connect to ec2\n-      # find all servers whose @discovery['tag_name'] matches @discovery['tag_value']\n-      # call @synapse.configure\n+      region = @discovery['aws_region'] || ENV['AWS_REGION']", "path": "lib/synapse/service_watcher/ec2tag.rb", "position": 14, "original_position": 14, "commit_id": "05215d4e822e9c688438f3fd19d12f711efa4c2c", "original_commit_id": "05215d4e822e9c688438f3fd19d12f711efa4c2c", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "ah you already do that, never mind!\n", "created_at": "2014-07-15T01:38:39Z", "updated_at": "2014-07-15T01:38:39Z", "html_url": "https://github.com/airbnb/synapse/pull/66#discussion_r14913929", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/66", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/14913929"}, "html": {"href": "https://github.com/airbnb/synapse/pull/66#discussion_r14913929"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/66"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/14913929/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/14913963", "pull_request_review_id": null, "id": 14913963, "diff_hunk": "@@ -1,25 +1,127 @@\n-require \"synapse/service_watcher/base\"\n+require 'synapse/service_watcher/base'\n+require 'aws-sdk'\n \n module Synapse\n   class EC2Watcher < BaseWatcher\n+\n+    attr_reader :check_interval\n+\n     def start\n-      # connect to ec2\n-      # find all servers whose @discovery['tag_name'] matches @discovery['tag_value']\n-      # call @synapse.configure\n+      region = @discovery['aws_region'] || ENV['AWS_REGION']\n+      log.info \"Connecting to EC2 region: #{region}\"\n+\n+      @ec2 = AWS::EC2.new(\n+        region:            region,\n+        access_key_id:     @discovery['aws_access_key_id']     || ENV['AWS_ACCESS_KEY_ID'],\n+        secret_access_key: @discovery['aws_secret_access_key'] || ENV['AWS_SECRET_ACCESS_KEY'] )\n+\n+      @check_interval = @discovery['check_interval'] || 15.0\n+\n+      log.info \"synapse: ec2tag watcher looking for instances \" +\n+        \"tagged with #{@discovery['tag_name']}=#{@discovery['tag_value']}\"\n+\n+      @watcher = Thread.new { watch }\n     end\n \n     private\n+\n     def validate_discovery_opts\n+      # Required, via options only.\n       raise ArgumentError, \"invalid discovery method #{@discovery['method']}\" \\\n-        unless @discovery['method'] == 'ec2tag' \n-      raise ArgumentError, \"a `server_port_override` option is required for ec2tag watchers\" \\\n-        unless @server_port_override\n-      raise ArgumentError, \"missing aws credentials for service #{@name}\" \\\n-        unless (@discovery['aws_key'] && @discovery['aws_secret'])\n+        unless @discovery['method'] == 'ec2tag'\n       raise ArgumentError, \"aws tag name is required for service #{@name}\" \\\n         unless @discovery['tag_name']\n       raise ArgumentError, \"aws tag value required for service #{@name}\" \\\n         unless @discovery['tag_value']\n+\n+      # As we're only looking up instances with hostnames/IPs, need to\n+      # be explicitly told which port the service we're balancing for listens on.\n+      unless @haproxy['server_port_override']\n+        raise ArgumentError,\n+          \"Missing server_port_override for service #{@name} - which port are backends listening on?\"\n+      end\n+\n+      unless @haproxy['server_port_override'].match(/^\\d+$/)\n+        raise ArgumentError, \"Invalid server_port_override value\"\n+      end\n+\n+      # Required, but can use well-known environment variables.\n+      %w[aws_access_key_id aws_secret_access_key aws_region].each do |attr|\n+        unless (@discovery[attr] || ENV[attr.upcase])\n+          raise ArgumentError, \"Missing #{attr} option or #{attr.upcase} environment variable\"\n+        end\n+      end\n+    end\n+\n+    def watch\n+      last_backends = []\n+      until @should_exit\n+        begin\n+          start = Time.now\n+          current_backends = discover_instances\n+\n+          if last_backends != current_backends\n+            log.info \"synapse: ec2tag watcher backends have changed.\"\n+            last_backends = current_backends\n+            configure_backends(current_backends)\n+          else\n+            log.info \"synapse: ec2tag watcher backends are unchanged.\"\n+          end\n+\n+          sleep_until_next_check(start)\n+        rescue Exception => e\n+          log.warn \"synapse: error in ec2tag watcher thread: #{e.inspect}\"\n+          log.warn e.backtrace\n+        end\n+      end\n+\n+      log.info \"synapse: ec2tag watcher exited successfully\"\n+    end\n+\n+    def sleep_until_next_check(start_time)\n+      sleep_time = check_interval - (Time.now - start_time)\n+      if sleep_time > 0.0\n+        sleep(sleep_time)\n+      end\n+    end\n+\n+    def discover_instances\n+      instances = instances_with_tags(@discovery['tag_name'], @discovery['tag_value'])\n+\n+      new_backends = []\n+\n+      # choice of private_dns_name, dns_name, private_ip_address or\n+      # ip_address, for now, just stick with the private fields.\n+      instances.each do |instance|\n+        new_backends << {\n+          'name' => instance.private_dns_name,", "path": "lib/synapse/service_watcher/ec2tag.rb", "position": 106, "original_position": 106, "commit_id": "05215d4e822e9c688438f3fd19d12f711efa4c2c", "original_commit_id": "05215d4e822e9c688438f3fd19d12f711efa4c2c", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "maybe instance id is a better name?\n", "created_at": "2014-07-15T01:40:12Z", "updated_at": "2014-07-15T01:40:12Z", "html_url": "https://github.com/airbnb/synapse/pull/66#discussion_r14913963", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/66", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/14913963"}, "html": {"href": "https://github.com/airbnb/synapse/pull/66#discussion_r14913963"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/66"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/14913963/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/29282161", "pull_request_review_id": null, "id": 29282161, "diff_hunk": "@@ -0,0 +1,53 @@\n+require 'synapse/log'\n+require 'fileutils'\n+require 'tempfile'\n+\n+module Synapse\n+  class FileOutput\n+    include Logging\n+    attr_reader :opts, :name\n+\n+    def initialize(opts)\n+      super()", "path": "lib/synapse/file_output.rb", "position": 11, "original_position": 11, "commit_id": "429a20af4d4ba75ad0d395ddd4d55f0a07ce93a0", "original_commit_id": "c6c37fa2907c16c0738189014d94f2b4f51633de", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "not sure what this is calling out to, this class does not inherit from anything\n", "created_at": "2015-04-28T20:01:16Z", "updated_at": "2015-07-15T23:55:45Z", "html_url": "https://github.com/airbnb/synapse/pull/115#discussion_r29282161", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/115", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/29282161"}, "html": {"href": "https://github.com/airbnb/synapse/pull/115#discussion_r29282161"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/115"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/29282161/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/29290309", "pull_request_review_id": null, "id": 29290309, "diff_hunk": "@@ -95,13 +100,44 @@ def validate_discovery_opts\n     end\n \n     def set_backends(new_backends)\n-      if @keep_default_servers\n-        @backends = @default_servers + new_backends\n+      # Aggregate and deduplicate all potential backend service instances.", "path": "lib/synapse/service_watcher/base.rb", "position": 22, "original_position": 22, "commit_id": "429a20af4d4ba75ad0d395ddd4d55f0a07ce93a0", "original_commit_id": "c6c37fa2907c16c0738189014d94f2b4f51633de", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "are you really concerned about duplicates in the default servers list? if that's the case, maybe we should de-dup `@default_servers`  when we set it\n", "created_at": "2015-04-28T21:24:26Z", "updated_at": "2015-07-15T23:55:45Z", "html_url": "https://github.com/airbnb/synapse/pull/115#discussion_r29290309", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/115", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/29290309"}, "html": {"href": "https://github.com/airbnb/synapse/pull/115#discussion_r29290309"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/115"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/29290309/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/29291121", "pull_request_review_id": null, "id": 29291121, "diff_hunk": "@@ -95,13 +100,44 @@ def validate_discovery_opts\n     end\n \n     def set_backends(new_backends)\n-      if @keep_default_servers\n-        @backends = @default_servers + new_backends\n+      # Aggregate and deduplicate all potential backend service instances.\n+      new_backends = (new_backends + (@keep_default_servers ? @default_servers : [])).uniq {|b|\n+        [b['host'], b['port'], b.fetch('name', '')]\n+      }\n+\n+      if new_backends.to_set == @backends.to_set\n+        return false\n+      end\n+\n+      if new_backends.empty?\n+        if @default_servers.empty?\n+          if @use_previous_backends\n+            # Discard this update\n+            log.warn \"synapse: no default servers for service #{@name};\" \\\n+              \"  using previous backends: #{@backends.inspect}\"\n+            return false\n+          else\n+            log.warn \"synapse: no default servers for service #{@name} and\" \\\n+              \" 'use_previous_backends' is disabled; dropping all backends\"\n+            @backends.clear\n+          end\n+        else\n+          log.warn \"synapse: no backends for service #{@name};\" \\\n+            \" using default servers: #{@default_servers.inspect}\"\n+          @backends = @default_servers\n+        end\n       else\n+        log.info \"synapse: discovered #{new_backends.length} backends for service #{@name}\"", "path": "lib/synapse/service_watcher/base.rb", "position": 49, "original_position": 49, "commit_id": "429a20af4d4ba75ad0d395ddd4d55f0a07ce93a0", "original_commit_id": "c6c37fa2907c16c0738189014d94f2b4f51633de", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "on an unrelated note, one thing i always thought might be necessary eventually is to specify the minimum number of backends to serve traffic.\n\nsuppose a service goes down. when functionality is restored, a single backend is naturally going to be the first to come up. that backend might then be pounded with all traffic which is normally meant for many multiple backends, and as a result might go down because of excess traffic. this would then happen to the second backend, etc.. etc.. \n\nit might be nice here to avoid setting any backends unless the number exceeds some limit which we know can handle the traffic. just a brain-dump, not even necessarily a todo.\n", "created_at": "2015-04-28T21:33:31Z", "updated_at": "2015-07-15T23:55:45Z", "html_url": "https://github.com/airbnb/synapse/pull/115#discussion_r29291121", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/115", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/29291121"}, "html": {"href": "https://github.com/airbnb/synapse/pull/115#discussion_r29291121"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/115"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/29291121/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/29291180", "pull_request_review_id": null, "id": 29291180, "diff_hunk": "@@ -89,21 +89,7 @@ def configure_backends(servers)\n         end\n       end\n \n-      if new_backends.empty?\n-        if @default_servers.empty?\n-          log.warn \"synapse: no backends and no default servers for service #{@name};\" \\\n-            \" using previous backends: #{@backends.inspect}\"\n-        else\n-          log.warn \"synapse: no backends for service #{@name};\" \\\n-            \" using default servers: #{@default_servers.inspect}\"\n-          @backends = @default_servers\n-        end\n-      else\n-        log.info \"synapse: discovered #{new_backends.length} backends for service #{@name}\"\n-        set_backends(new_backends)\n-      end\n-\n-      reconfigure!\n+      set_backends(new_backends)", "path": "lib/synapse/service_watcher/dns.rb", "position": 19, "original_position": 19, "commit_id": "429a20af4d4ba75ad0d395ddd4d55f0a07ce93a0", "original_commit_id": "c6c37fa2907c16c0738189014d94f2b4f51633de", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "great!\n", "created_at": "2015-04-28T21:34:27Z", "updated_at": "2015-07-15T23:55:45Z", "html_url": "https://github.com/airbnb/synapse/pull/115#discussion_r29291180", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/115", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/29291180"}, "html": {"href": "https://github.com/airbnb/synapse/pull/115#discussion_r29291180"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/115"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/29291180/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/29291244", "pull_request_review_id": null, "id": 29291244, "diff_hunk": "@@ -95,13 +100,44 @@ def validate_discovery_opts\n     end\n \n     def set_backends(new_backends)\n-      if @keep_default_servers\n-        @backends = @default_servers + new_backends\n+      # Aggregate and deduplicate all potential backend service instances.\n+      new_backends = (new_backends + (@keep_default_servers ? @default_servers : [])).uniq {|b|\n+        [b['host'], b['port'], b.fetch('name', '')]\n+      }\n+\n+      if new_backends.to_set == @backends.to_set\n+        return false\n+      end\n+\n+      if new_backends.empty?\n+        if @default_servers.empty?\n+          if @use_previous_backends", "path": "lib/synapse/service_watcher/base.rb", "position": 33, "original_position": 33, "commit_id": "429a20af4d4ba75ad0d395ddd4d55f0a07ce93a0", "original_commit_id": "c6c37fa2907c16c0738189014d94f2b4f51633de", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "thanks for addressing this original \"mis-feature\"\n", "created_at": "2015-04-28T21:35:17Z", "updated_at": "2015-07-15T23:55:45Z", "html_url": "https://github.com/airbnb/synapse/pull/115#discussion_r29291244", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/115", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/29291244"}, "html": {"href": "https://github.com/airbnb/synapse/pull/115#discussion_r29291244"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/115"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/29291244/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/29291501", "pull_request_review_id": null, "id": 29291501, "diff_hunk": "@@ -386,6 +388,7 @@ class Haproxy\n         \"option accept-invalid-http-request\",\n         \"option accept-invalid-http-response\",\n         \"option allbackups\",\n+        \"option allredisp\",", "path": "lib/synapse/haproxy.rb", "position": 26, "original_position": 29, "commit_id": "429a20af4d4ba75ad0d395ddd4d55f0a07ce93a0", "original_commit_id": "c6c37fa2907c16c0738189014d94f2b4f51633de", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "should we try to re-sync these lists of options with latest haproxy? i wonder what other options have been added since i put these lists in here...\n", "created_at": "2015-04-28T21:38:29Z", "updated_at": "2015-07-15T23:55:45Z", "html_url": "https://github.com/airbnb/synapse/pull/115#discussion_r29291501", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/115", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/29291501"}, "html": {"href": "https://github.com/airbnb/synapse/pull/115#discussion_r29291501"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/115"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/29291501/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/29291727", "pull_request_review_id": null, "id": 29291727, "diff_hunk": "@@ -95,13 +100,44 @@ def validate_discovery_opts\n     end\n \n     def set_backends(new_backends)\n-      if @keep_default_servers\n-        @backends = @default_servers + new_backends\n+      # Aggregate and deduplicate all potential backend service instances.\n+      new_backends = (new_backends + (@keep_default_servers ? @default_servers : [])).uniq {|b|", "path": "lib/synapse/service_watcher/base.rb", "position": 23, "original_position": 23, "commit_id": "429a20af4d4ba75ad0d395ddd4d55f0a07ce93a0", "original_commit_id": "c6c37fa2907c16c0738189014d94f2b4f51633de", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "oh i see. i think this would read a little cleaner if it was not all on one line. i would say:\n\n``` ruby\nnew_backends += @default_servers if @keep_default_servers\nnew_backends.uniq!{|b|  [b['host'], b['port'], b.fetch('name', '')]}\n```\n", "created_at": "2015-04-28T21:41:16Z", "updated_at": "2015-07-15T23:55:45Z", "html_url": "https://github.com/airbnb/synapse/pull/115#discussion_r29291727", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/115", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/29291727"}, "html": {"href": "https://github.com/airbnb/synapse/pull/115#discussion_r29291727"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/115"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/29291727/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/32382874", "pull_request_review_id": null, "id": 32382874, "diff_hunk": "@@ -0,0 +1,53 @@\n+require 'synapse/log'\n+require 'fileutils'\n+require 'tempfile'\n+\n+module Synapse\n+  class FileOutput\n+    include Logging\n+    attr_reader :opts, :name\n+\n+    def initialize(opts)\n+      super()", "path": "lib/synapse/file_output.rb", "position": 11, "original_position": 11, "commit_id": "429a20af4d4ba75ad0d395ddd4d55f0a07ce93a0", "original_commit_id": "c6c37fa2907c16c0738189014d94f2b4f51633de", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Indeed it does not, I'll fix that up\n", "created_at": "2015-06-14T18:46:42Z", "updated_at": "2015-07-15T23:55:45Z", "html_url": "https://github.com/airbnb/synapse/pull/115#discussion_r32382874", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/115", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/32382874"}, "html": {"href": "https://github.com/airbnb/synapse/pull/115#discussion_r32382874"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/115"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/32382874/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/32382890", "pull_request_review_id": null, "id": 32382890, "diff_hunk": "@@ -95,13 +100,44 @@ def validate_discovery_opts\n     end\n \n     def set_backends(new_backends)\n-      if @keep_default_servers\n-        @backends = @default_servers + new_backends\n+      # Aggregate and deduplicate all potential backend service instances.", "path": "lib/synapse/service_watcher/base.rb", "position": 22, "original_position": 22, "commit_id": "429a20af4d4ba75ad0d395ddd4d55f0a07ce93a0", "original_commit_id": "c6c37fa2907c16c0738189014d94f2b4f51633de", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "I'm concerned with duplicates in the set of backends we write out to HAProxy in general. Like, we had a few cases where duplicate backends got written out and then synapse would only down a single one when we failed healthchecks.\n\nIf we dedup the default_servers separately doesn't that mean that we might end up with duplicates between the defaults and new_backends and could end up with the bad situation I mention above?\n", "created_at": "2015-06-14T18:48:41Z", "updated_at": "2015-07-15T23:55:45Z", "html_url": "https://github.com/airbnb/synapse/pull/115#discussion_r32382890", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/115", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/32382890"}, "html": {"href": "https://github.com/airbnb/synapse/pull/115#discussion_r32382890"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/115"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/32382890/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/32382912", "pull_request_review_id": null, "id": 32382912, "diff_hunk": "@@ -95,13 +100,44 @@ def validate_discovery_opts\n     end\n \n     def set_backends(new_backends)\n-      if @keep_default_servers\n-        @backends = @default_servers + new_backends\n+      # Aggregate and deduplicate all potential backend service instances.\n+      new_backends = (new_backends + (@keep_default_servers ? @default_servers : [])).uniq {|b|\n+        [b['host'], b['port'], b.fetch('name', '')]\n+      }\n+\n+      if new_backends.to_set == @backends.to_set\n+        return false\n+      end\n+\n+      if new_backends.empty?\n+        if @default_servers.empty?\n+          if @use_previous_backends\n+            # Discard this update\n+            log.warn \"synapse: no default servers for service #{@name};\" \\\n+              \"  using previous backends: #{@backends.inspect}\"\n+            return false\n+          else\n+            log.warn \"synapse: no default servers for service #{@name} and\" \\\n+              \" 'use_previous_backends' is disabled; dropping all backends\"\n+            @backends.clear\n+          end\n+        else\n+          log.warn \"synapse: no backends for service #{@name};\" \\\n+            \" using default servers: #{@default_servers.inspect}\"\n+          @backends = @default_servers\n+        end\n       else\n+        log.info \"synapse: discovered #{new_backends.length} backends for service #{@name}\"", "path": "lib/synapse/service_watcher/base.rb", "position": 49, "original_position": 49, "commit_id": "429a20af4d4ba75ad0d395ddd4d55f0a07ce93a0", "original_commit_id": "c6c37fa2907c16c0738189014d94f2b4f51633de", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "I agree this is a needed feature. I've been hacking on a \"latency sensitive farm failover\" method as suggested in http://blog.haproxy.com/2013/12/23/failover-and-worst-case-management-with-haproxy/ and determining how many backends are needed is core to that.\n\nThe idea is that you have multiple HAProxy backends powering a single frontend, with each backend having more nodes (e.g. because it encompasses multiple datacenters).\n", "created_at": "2015-06-14T18:50:30Z", "updated_at": "2015-07-15T23:55:45Z", "html_url": "https://github.com/airbnb/synapse/pull/115#discussion_r32382912", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/115", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/32382912"}, "html": {"href": "https://github.com/airbnb/synapse/pull/115#discussion_r32382912"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/115"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/32382912/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/32382944", "pull_request_review_id": null, "id": 32382944, "diff_hunk": "@@ -386,6 +388,7 @@ class Haproxy\n         \"option accept-invalid-http-request\",\n         \"option accept-invalid-http-response\",\n         \"option allbackups\",\n+        \"option allredisp\",", "path": "lib/synapse/haproxy.rb", "position": 26, "original_position": 29, "commit_id": "429a20af4d4ba75ad0d395ddd4d55f0a07ce93a0", "original_commit_id": "c6c37fa2907c16c0738189014d94f2b4f51633de", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Heh, this isn't even the option that I ended up getting accepted. http://marc.info/?l=haproxy&m=143161966505891&w=2 basically added a parameter to \"option redispatch\" which allows this behavior. Until that is released in 1.6 do you mind if we keep this in here (we use is pretty heavily at Yelp)\n", "created_at": "2015-06-14T18:53:03Z", "updated_at": "2015-07-15T23:55:45Z", "html_url": "https://github.com/airbnb/synapse/pull/115#discussion_r32382944", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/115", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/32382944"}, "html": {"href": "https://github.com/airbnb/synapse/pull/115#discussion_r32382944"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/115"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/32382944/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35249892", "pull_request_review_id": null, "id": 35249892, "diff_hunk": "@@ -198,6 +198,19 @@ If you do not list any default servers, no proxy will be created.  The\n `default_servers` will also be used in addition to discovered servers if the\n `keep_default_servers` option is set.\n \n+If you do not list any `default_servers`, and all backends for a service\n+disappear then the previous known backends will be used.  Disable this behavior\n+by unsetting `use_previous_backends`.", "path": "README.md", "position": 6, "original_position": 6, "commit_id": "6f11a826ec23e9741434cdc5daf0a6f767760d0a", "original_commit_id": "b3c0fb7a9e12a771773ed5f1a2a91d49c9690770", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "oh thank god, finally!\n", "created_at": "2015-07-22T18:57:19Z", "updated_at": "2015-07-23T18:29:18Z", "html_url": "https://github.com/airbnb/synapse/pull/130#discussion_r35249892", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/130", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35249892"}, "html": {"href": "https://github.com/airbnb/synapse/pull/130#discussion_r35249892"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/130"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35249892/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35250420", "pull_request_review_id": null, "id": 35250420, "diff_hunk": "@@ -0,0 +1,54 @@\n+require 'synapse/log'\n+require 'fileutils'\n+require 'tempfile'\n+\n+module Synapse\n+  class FileOutput\n+    include Logging\n+    attr_reader :opts, :name\n+\n+    def initialize(opts)\n+      unless opts.has_key?(\"output_directory\")\n+        raise ArgumentError, \"flat file generation requires an output_directory key\"\n+      end\n+\n+      begin\n+        FileUtils.mkdir_p(opts['output_directory'])\n+      rescue SystemCallError => err\n+        raise ArgumentError, \"provided output directory #{opts['output_directory']} is not present or creatable\"\n+      end\n+\n+      @opts = opts\n+      @name = 'file_output'\n+    end\n+\n+    def tick(watchers)\n+    end\n+\n+    def update_config(watchers)\n+      watchers.each do |watcher|\n+        write_backends_to_file(watcher.name, watcher.backends)\n+      end\n+    end\n+\n+    def write_backends_to_file(service_name, new_backends)\n+      data_path = File.join(@opts['output_directory'], \"#{service_name}.json\")\n+      begin\n+        old_backends = JSON.load(File.read(data_path))\n+      rescue Errno::ENOENT\n+        old_backends = nil\n+      end\n+\n+      if old_backends == new_backends", "path": "lib/synapse/file_output.rb", "position": 42, "original_position": 42, "commit_id": "6f11a826ec23e9741434cdc5daf0a6f767760d0a", "original_commit_id": "b3c0fb7a9e12a771773ed5f1a2a91d49c9690770", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "a comment explaining this might be helpful to avoid refactoring this away in the future. are you just trying to avoid modified timestamps/inotify events on the files?\n", "created_at": "2015-07-22T19:02:23Z", "updated_at": "2015-07-23T18:29:18Z", "html_url": "https://github.com/airbnb/synapse/pull/130#discussion_r35250420", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/130", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35250420"}, "html": {"href": "https://github.com/airbnb/synapse/pull/130#discussion_r35250420"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/130"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35250420/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35251138", "pull_request_review_id": null, "id": 35251138, "diff_hunk": "@@ -655,18 +693,33 @@ def generate_frontend_stanza(watcher, config)\n     end\n \n     def generate_backend_stanza(watcher, config)\n+      backends = {}\n+\n+      # The ordering here is important.  First we add all the backends in the\n+      # disabled state...\n+      @seen.fetch(watcher.name, []).each do |backend_name, backend|\n+        backends[backend_name] = backend.merge('enabled' => false)\n+      end\n+\n+      # ... and then we overwite any backends that the watchers know about,\n+      # setting the enabled state.\n+      watcher.backends.each do |backend|\n+        backend_name = construct_name(backend)\n+        backends[backend_name] = backend.merge('enabled' => true)\n+      end\n+\n       if watcher.backends.empty?\n-        log.warn \"synapse: no backends found for watcher #{watcher.name}\"\n+        log.debug \"synapse: no backends found for watcher #{watcher.name}\"\n       end\n \n       stanza = [\n         \"\\nbackend #{watcher.name}\",\n         config.map {|c| \"\\t#{c}\"},\n-        watcher.backends.shuffle.map {|backend|\n-          backend_name = construct_name(backend)\n+        backends.map {|backend_name, backend|", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 124, "commit_id": "6f11a826ec23e9741434cdc5daf0a6f767760d0a", "original_commit_id": "b3c0fb7a9e12a771773ed5f1a2a91d49c9690770", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "curious why you got rid of the `shuffle` here; doesn't it helps to distribute the load more evenly? if all consumers have the same ordering for a set of backends and are using the `roundrobin` algorithm, does that mean that all consumers will first contact the first backend for the first request?\n", "created_at": "2015-07-22T19:09:35Z", "updated_at": "2015-07-23T18:29:18Z", "html_url": "https://github.com/airbnb/synapse/pull/130#discussion_r35251138", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/130", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35251138"}, "html": {"href": "https://github.com/airbnb/synapse/pull/130#discussion_r35251138"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/130"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35251138/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35253781", "pull_request_review_id": null, "id": 35253781, "diff_hunk": "@@ -54,7 +59,7 @@ def discover\n         node = @zk.get(\"#{@discovery['path']}/#{id}\")\n \n         begin\n-          host, port, name = deserialize_service_instance(node.first)\n+          host, port, name, weight = deserialize_service_instance(node.first)", "path": "lib/synapse/service_watcher/zookeeper.rb", "position": 43, "original_position": 34, "commit_id": "6f11a826ec23e9741434cdc5daf0a6f767760d0a", "original_commit_id": "b3c0fb7a9e12a771773ed5f1a2a91d49c9690770", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "i'm guessing that you're using `weight` to preferentially route within latency zones, but i don't see this attribute used anywhere else. is this branch still missing some code?\n", "created_at": "2015-07-22T19:34:57Z", "updated_at": "2015-07-23T18:29:18Z", "html_url": "https://github.com/airbnb/synapse/pull/130#discussion_r35253781", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/130", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35253781"}, "html": {"href": "https://github.com/airbnb/synapse/pull/130#discussion_r35253781"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/130"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35253781/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35281918", "pull_request_review_id": null, "id": 35281918, "diff_hunk": "@@ -0,0 +1,54 @@\n+require 'synapse/log'\n+require 'fileutils'\n+require 'tempfile'\n+\n+module Synapse\n+  class FileOutput\n+    include Logging\n+    attr_reader :opts, :name\n+\n+    def initialize(opts)\n+      unless opts.has_key?(\"output_directory\")\n+        raise ArgumentError, \"flat file generation requires an output_directory key\"\n+      end\n+\n+      begin\n+        FileUtils.mkdir_p(opts['output_directory'])\n+      rescue SystemCallError => err\n+        raise ArgumentError, \"provided output directory #{opts['output_directory']} is not present or creatable\"\n+      end\n+\n+      @opts = opts\n+      @name = 'file_output'\n+    end\n+\n+    def tick(watchers)\n+    end\n+\n+    def update_config(watchers)\n+      watchers.each do |watcher|\n+        write_backends_to_file(watcher.name, watcher.backends)\n+      end\n+    end\n+\n+    def write_backends_to_file(service_name, new_backends)\n+      data_path = File.join(@opts['output_directory'], \"#{service_name}.json\")\n+      begin\n+        old_backends = JSON.load(File.read(data_path))\n+      rescue Errno::ENOENT\n+        old_backends = nil\n+      end\n+\n+      if old_backends == new_backends", "path": "lib/synapse/file_output.rb", "position": 42, "original_position": 42, "commit_id": "6f11a826ec23e9741434cdc5daf0a6f767760d0a", "original_commit_id": "b3c0fb7a9e12a771773ed5f1a2a91d49c9690770", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Yea, in case libraries watch these files for changes and react accordingly. I'll add a comment\n", "created_at": "2015-07-23T01:02:06Z", "updated_at": "2015-07-23T18:29:18Z", "html_url": "https://github.com/airbnb/synapse/pull/130#discussion_r35281918", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/130", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35281918"}, "html": {"href": "https://github.com/airbnb/synapse/pull/130#discussion_r35281918"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/130"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35281918/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35282283", "pull_request_review_id": null, "id": 35282283, "diff_hunk": "@@ -655,18 +693,33 @@ def generate_frontend_stanza(watcher, config)\n     end\n \n     def generate_backend_stanza(watcher, config)\n+      backends = {}\n+\n+      # The ordering here is important.  First we add all the backends in the\n+      # disabled state...\n+      @seen.fetch(watcher.name, []).each do |backend_name, backend|\n+        backends[backend_name] = backend.merge('enabled' => false)\n+      end\n+\n+      # ... and then we overwite any backends that the watchers know about,\n+      # setting the enabled state.\n+      watcher.backends.each do |backend|\n+        backend_name = construct_name(backend)\n+        backends[backend_name] = backend.merge('enabled' => true)\n+      end\n+\n       if watcher.backends.empty?\n-        log.warn \"synapse: no backends found for watcher #{watcher.name}\"\n+        log.debug \"synapse: no backends found for watcher #{watcher.name}\"\n       end\n \n       stanza = [\n         \"\\nbackend #{watcher.name}\",\n         config.map {|c| \"\\t#{c}\"},\n-        watcher.backends.shuffle.map {|backend|\n-          backend_name = construct_name(backend)\n+        backends.map {|backend_name, backend|", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 124, "commit_id": "6f11a826ec23e9741434cdc5daf0a6f767760d0a", "original_commit_id": "b3c0fb7a9e12a771773ed5f1a2a91d49c9690770", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "This is true if all HAProxy instances start up at exactly the same moment and request loads are such that you notice this. In our experience things even out on their own (both haproxy reloads take time and request loads to servers has jitter). We much more often run into situations where HAProxy is restarting a lot and the HAProxy stats page becomes really hard to read which can impede debugging efforts.\n\nThis is purely so that the stats page across reloads doesn't change a ton. I can change it back if you prefer the random behavior :-)\n", "created_at": "2015-07-23T01:11:10Z", "updated_at": "2015-07-23T18:29:18Z", "html_url": "https://github.com/airbnb/synapse/pull/130#discussion_r35282283", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/130", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35282283"}, "html": {"href": "https://github.com/airbnb/synapse/pull/130#discussion_r35282283"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/130"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35282283/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35282361", "pull_request_review_id": null, "id": 35282361, "diff_hunk": "@@ -54,7 +59,7 @@ def discover\n         node = @zk.get(\"#{@discovery['path']}/#{id}\")\n \n         begin\n-          host, port, name = deserialize_service_instance(node.first)\n+          host, port, name, weight = deserialize_service_instance(node.first)", "path": "lib/synapse/service_watcher/zookeeper.rb", "position": 43, "original_position": 34, "commit_id": "6f11a826ec23e9741434cdc5daf0a6f767760d0a", "original_commit_id": "b3c0fb7a9e12a771773ed5f1a2a91d49c9690770", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Yea, we're working on exposing this to HAProxy. This is the first step (see https://github.com/Yelp/synapse/pull/14 for discussion between the author and me regarding this)\n", "created_at": "2015-07-23T01:12:53Z", "updated_at": "2015-07-23T18:29:18Z", "html_url": "https://github.com/airbnb/synapse/pull/130#discussion_r35282361", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/130", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35282361"}, "html": {"href": "https://github.com/airbnb/synapse/pull/130#discussion_r35282361"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/130"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35282361/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35283172", "pull_request_review_id": null, "id": 35283172, "diff_hunk": "@@ -655,18 +693,33 @@ def generate_frontend_stanza(watcher, config)\n     end\n \n     def generate_backend_stanza(watcher, config)\n+      backends = {}\n+\n+      # The ordering here is important.  First we add all the backends in the\n+      # disabled state...\n+      @seen.fetch(watcher.name, []).each do |backend_name, backend|\n+        backends[backend_name] = backend.merge('enabled' => false)\n+      end\n+\n+      # ... and then we overwite any backends that the watchers know about,\n+      # setting the enabled state.\n+      watcher.backends.each do |backend|\n+        backend_name = construct_name(backend)\n+        backends[backend_name] = backend.merge('enabled' => true)\n+      end\n+\n       if watcher.backends.empty?\n-        log.warn \"synapse: no backends found for watcher #{watcher.name}\"\n+        log.debug \"synapse: no backends found for watcher #{watcher.name}\"\n       end\n \n       stanza = [\n         \"\\nbackend #{watcher.name}\",\n         config.map {|c| \"\\t#{c}\"},\n-        watcher.backends.shuffle.map {|backend|\n-          backend_name = construct_name(backend)\n+        backends.map {|backend_name, backend|", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 124, "commit_id": "6f11a826ec23e9741434cdc5daf0a6f767760d0a", "original_commit_id": "b3c0fb7a9e12a771773ed5f1a2a91d49c9690770", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Also possibly helps with issue #127\n", "created_at": "2015-07-23T01:32:09Z", "updated_at": "2015-07-23T18:29:18Z", "html_url": "https://github.com/airbnb/synapse/pull/130#discussion_r35283172", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/130", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35283172"}, "html": {"href": "https://github.com/airbnb/synapse/pull/130#discussion_r35283172"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/130"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35283172/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35285222", "pull_request_review_id": null, "id": 35285222, "diff_hunk": "@@ -655,18 +693,33 @@ def generate_frontend_stanza(watcher, config)\n     end\n \n     def generate_backend_stanza(watcher, config)\n+      backends = {}\n+\n+      # The ordering here is important.  First we add all the backends in the\n+      # disabled state...\n+      @seen.fetch(watcher.name, []).each do |backend_name, backend|\n+        backends[backend_name] = backend.merge('enabled' => false)\n+      end\n+\n+      # ... and then we overwite any backends that the watchers know about,\n+      # setting the enabled state.\n+      watcher.backends.each do |backend|\n+        backend_name = construct_name(backend)\n+        backends[backend_name] = backend.merge('enabled' => true)\n+      end\n+\n       if watcher.backends.empty?\n-        log.warn \"synapse: no backends found for watcher #{watcher.name}\"\n+        log.debug \"synapse: no backends found for watcher #{watcher.name}\"\n       end\n \n       stanza = [\n         \"\\nbackend #{watcher.name}\",\n         config.map {|c| \"\\t#{c}\"},\n-        watcher.backends.shuffle.map {|backend|\n-          backend_name = construct_name(backend)\n+        backends.map {|backend_name, backend|", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 124, "commit_id": "6f11a826ec23e9741434cdc5daf0a6f767760d0a", "original_commit_id": "b3c0fb7a9e12a771773ed5f1a2a91d49c9690770", "user": {"login": "schleyfox", "id": 4259, "avatar_url": "https://avatars0.githubusercontent.com/u/4259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/schleyfox", "html_url": "https://github.com/schleyfox", "followers_url": "https://api.github.com/users/schleyfox/followers", "following_url": "https://api.github.com/users/schleyfox/following{/other_user}", "gists_url": "https://api.github.com/users/schleyfox/gists{/gist_id}", "starred_url": "https://api.github.com/users/schleyfox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schleyfox/subscriptions", "organizations_url": "https://api.github.com/users/schleyfox/orgs", "repos_url": "https://api.github.com/users/schleyfox/repos", "events_url": "https://api.github.com/users/schleyfox/events{/privacy}", "received_events_url": "https://api.github.com/users/schleyfox/received_events", "type": "User", "site_admin": false}, "body": "I think the shuffling is helpful for some of the things that we have that have a predictable number (per box) of long lived connections like our MySQL databases.  Especially since these connections survive haproxy restarts and the time of reconnection is very synchronized on every server, I could definitely see this causing problems for our use case.\n\nThis may help with #127, but unless I'm missing something, I don't understand how consistent hashing could be expected to play nicely with synapse/haproxy.\n", "created_at": "2015-07-23T02:24:12Z", "updated_at": "2015-07-23T18:29:18Z", "html_url": "https://github.com/airbnb/synapse/pull/130#discussion_r35285222", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/130", "author_association": "OWNER", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35285222"}, "html": {"href": "https://github.com/airbnb/synapse/pull/130#discussion_r35285222"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/130"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35285222/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35288174", "pull_request_review_id": null, "id": 35288174, "diff_hunk": "@@ -655,18 +693,33 @@ def generate_frontend_stanza(watcher, config)\n     end\n \n     def generate_backend_stanza(watcher, config)\n+      backends = {}\n+\n+      # The ordering here is important.  First we add all the backends in the\n+      # disabled state...\n+      @seen.fetch(watcher.name, []).each do |backend_name, backend|\n+        backends[backend_name] = backend.merge('enabled' => false)\n+      end\n+\n+      # ... and then we overwite any backends that the watchers know about,\n+      # setting the enabled state.\n+      watcher.backends.each do |backend|\n+        backend_name = construct_name(backend)\n+        backends[backend_name] = backend.merge('enabled' => true)\n+      end\n+\n       if watcher.backends.empty?\n-        log.warn \"synapse: no backends found for watcher #{watcher.name}\"\n+        log.debug \"synapse: no backends found for watcher #{watcher.name}\"\n       end\n \n       stanza = [\n         \"\\nbackend #{watcher.name}\",\n         config.map {|c| \"\\t#{c}\"},\n-        watcher.backends.shuffle.map {|backend|\n-          backend_name = construct_name(backend)\n+        backends.map {|backend_name, backend|", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 124, "commit_id": "6f11a826ec23e9741434cdc5daf0a6f767760d0a", "original_commit_id": "b3c0fb7a9e12a771773ed5f1a2a91d49c9690770", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "That seems like a compelling use case. Going forward maybe we can add an option if people want it to be sorted vs randomized, but I think it makes sense to do that in future versions.\n", "created_at": "2015-07-23T03:50:57Z", "updated_at": "2015-07-23T18:29:18Z", "html_url": "https://github.com/airbnb/synapse/pull/130#discussion_r35288174", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/130", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35288174"}, "html": {"href": "https://github.com/airbnb/synapse/pull/130#discussion_r35288174"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/130"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35288174/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35343993", "pull_request_review_id": null, "id": 35343993, "diff_hunk": "@@ -43,6 +45,7 @@ class Haproxy\n         \"option abortonclose\",\n         \"option accept-invalid-http-response\",\n         \"option allbackups\",\n+        \"option allredisp\",", "path": "lib/synapse/haproxy.rb", "position": 18, "original_position": 18, "commit_id": "6f11a826ec23e9741434cdc5daf0a6f767760d0a", "original_commit_id": "cd2ea63b7fd746defad09e1ee12bfd40110245e7", "user": {"login": "jtai", "id": 696036, "avatar_url": "https://avatars2.githubusercontent.com/u/696036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jtai", "html_url": "https://github.com/jtai", "followers_url": "https://api.github.com/users/jtai/followers", "following_url": "https://api.github.com/users/jtai/following{/other_user}", "gists_url": "https://api.github.com/users/jtai/gists{/gist_id}", "starred_url": "https://api.github.com/users/jtai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jtai/subscriptions", "organizations_url": "https://api.github.com/users/jtai/orgs", "repos_url": "https://api.github.com/users/jtai/repos", "events_url": "https://api.github.com/users/jtai/events{/privacy}", "received_events_url": "https://api.github.com/users/jtai/received_events", "type": "User", "site_admin": false}, "body": "Will this cause problems for standard builds of haproxy?\n", "created_at": "2015-07-23T16:54:09Z", "updated_at": "2015-07-23T18:29:18Z", "html_url": "https://github.com/airbnb/synapse/pull/130#discussion_r35343993", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/130", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35343993"}, "html": {"href": "https://github.com/airbnb/synapse/pull/130#discussion_r35343993"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/130"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35343993/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35345432", "pull_request_review_id": null, "id": 35345432, "diff_hunk": "@@ -95,13 +100,45 @@ def validate_discovery_opts\n     end\n \n     def set_backends(new_backends)\n-      if @keep_default_servers\n-        @backends = @default_servers + new_backends\n+      # Aggregate and deduplicate all potential backend service instances.\n+      new_backends = (new_backends + @default_servers) if @keep_default_servers\n+      new_backends = new_backends.uniq {|b|\n+        [b['host'], b['port'], b.fetch('name', '')]\n+      }\n+\n+      if new_backends.to_set == @backends.to_set\n+        return false\n+      end\n+\n+      if new_backends.empty?\n+        if @default_servers.empty?\n+          if @use_previous_backends\n+            # Discard this update\n+            log.warn \"synapse: no default servers for service #{@name};\" \\", "path": "lib/synapse/service_watcher/base.rb", "position": null, "original_position": 36, "commit_id": "6f11a826ec23e9741434cdc5daf0a6f767760d0a", "original_commit_id": "cd2ea63b7fd746defad09e1ee12bfd40110245e7", "user": {"login": "jtai", "id": 696036, "avatar_url": "https://avatars2.githubusercontent.com/u/696036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jtai", "html_url": "https://github.com/jtai", "followers_url": "https://api.github.com/users/jtai/followers", "following_url": "https://api.github.com/users/jtai/following{/other_user}", "gists_url": "https://api.github.com/users/jtai/gists{/gist_id}", "starred_url": "https://api.github.com/users/jtai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jtai/subscriptions", "organizations_url": "https://api.github.com/users/jtai/orgs", "repos_url": "https://api.github.com/users/jtai/repos", "events_url": "https://api.github.com/users/jtai/events{/privacy}", "received_events_url": "https://api.github.com/users/jtai/received_events", "type": "User", "site_admin": false}, "body": "Should this (and the next `warn` statement) also mention that there are no backends for the service? E.g., `\"synapse: no backends for service #{@name} and no default servers configured; using previous backends: #{backends.inspect}\"`\n", "created_at": "2015-07-23T17:07:35Z", "updated_at": "2015-07-23T18:29:18Z", "html_url": "https://github.com/airbnb/synapse/pull/130#discussion_r35345432", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/130", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35345432"}, "html": {"href": "https://github.com/airbnb/synapse/pull/130#discussion_r35345432"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/130"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35345432/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35348285", "pull_request_review_id": null, "id": 35348285, "diff_hunk": "@@ -43,6 +45,7 @@ class Haproxy\n         \"option abortonclose\",\n         \"option accept-invalid-http-response\",\n         \"option allbackups\",\n+        \"option allredisp\",", "path": "lib/synapse/haproxy.rb", "position": 18, "original_position": 18, "commit_id": "6f11a826ec23e9741434cdc5daf0a6f767760d0a", "original_commit_id": "cd2ea63b7fd746defad09e1ee12bfd40110245e7", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "no this is just a list of valid options so we can validate the in-synapse haproxy config. we already have a few options here which won't work with haproxy < 1.5; the symptoms if you use unsupported options is that synapse will start, but it's every attempt to restart haproxy will fail\n", "created_at": "2015-07-23T17:32:51Z", "updated_at": "2015-07-23T18:29:18Z", "html_url": "https://github.com/airbnb/synapse/pull/130#discussion_r35348285", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/130", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35348285"}, "html": {"href": "https://github.com/airbnb/synapse/pull/130#discussion_r35348285"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/130"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35348285/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35351103", "pull_request_review_id": null, "id": 35351103, "diff_hunk": "@@ -43,6 +45,7 @@ class Haproxy\n         \"option abortonclose\",\n         \"option accept-invalid-http-response\",\n         \"option allbackups\",\n+        \"option allredisp\",", "path": "lib/synapse/haproxy.rb", "position": 18, "original_position": 18, "commit_id": "6f11a826ec23e9741434cdc5daf0a6f767760d0a", "original_commit_id": "cd2ea63b7fd746defad09e1ee12bfd40110245e7", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Both my patches were accepted into 1.6, and Willy just released 1.6-dev3 so we're almost off our fork! Once we upgrade to 1.6 I can go through and re-sync this list with what haproxy accepts. There might be some backwards incompatible changes in 1.6 from 1.5 (only one I have ran into was listen no longer accepts ports in the listen line) so that should be a fun exercise.\n", "created_at": "2015-07-23T17:57:18Z", "updated_at": "2015-07-23T18:29:18Z", "html_url": "https://github.com/airbnb/synapse/pull/130#discussion_r35351103", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/130", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35351103"}, "html": {"href": "https://github.com/airbnb/synapse/pull/130#discussion_r35351103"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/130"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35351103/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35354652", "pull_request_review_id": null, "id": 35354652, "diff_hunk": "@@ -95,13 +100,45 @@ def validate_discovery_opts\n     end\n \n     def set_backends(new_backends)\n-      if @keep_default_servers\n-        @backends = @default_servers + new_backends\n+      # Aggregate and deduplicate all potential backend service instances.\n+      new_backends = (new_backends + @default_servers) if @keep_default_servers\n+      new_backends = new_backends.uniq {|b|\n+        [b['host'], b['port'], b.fetch('name', '')]\n+      }\n+\n+      if new_backends.to_set == @backends.to_set\n+        return false\n+      end\n+\n+      if new_backends.empty?\n+        if @default_servers.empty?\n+          if @use_previous_backends\n+            # Discard this update\n+            log.warn \"synapse: no default servers for service #{@name};\" \\", "path": "lib/synapse/service_watcher/base.rb", "position": null, "original_position": 36, "commit_id": "6f11a826ec23e9741434cdc5daf0a6f767760d0a", "original_commit_id": "cd2ea63b7fd746defad09e1ee12bfd40110245e7", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Sure, seems clearer.\n", "created_at": "2015-07-23T18:27:59Z", "updated_at": "2015-07-23T18:29:18Z", "html_url": "https://github.com/airbnb/synapse/pull/130#discussion_r35354652", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/130", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35354652"}, "html": {"href": "https://github.com/airbnb/synapse/pull/130#discussion_r35354652"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/130"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35354652/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35401857", "pull_request_review_id": null, "id": 35401857, "diff_hunk": "@@ -655,18 +693,33 @@ def generate_frontend_stanza(watcher, config)\n     end\n \n     def generate_backend_stanza(watcher, config)\n+      backends = {}\n+\n+      # The ordering here is important.  First we add all the backends in the\n+      # disabled state...\n+      @seen.fetch(watcher.name, []).each do |backend_name, backend|\n+        backends[backend_name] = backend.merge('enabled' => false)\n+      end\n+\n+      # ... and then we overwite any backends that the watchers know about,\n+      # setting the enabled state.\n+      watcher.backends.each do |backend|\n+        backend_name = construct_name(backend)\n+        backends[backend_name] = backend.merge('enabled' => true)\n+      end\n+\n       if watcher.backends.empty?\n-        log.warn \"synapse: no backends found for watcher #{watcher.name}\"\n+        log.debug \"synapse: no backends found for watcher #{watcher.name}\"\n       end\n \n       stanza = [\n         \"\\nbackend #{watcher.name}\",\n         config.map {|c| \"\\t#{c}\"},\n-        watcher.backends.shuffle.map {|backend|\n-          backend_name = construct_name(backend)\n+        backends.map {|backend_name, backend|", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 124, "commit_id": "6f11a826ec23e9741434cdc5daf0a6f767760d0a", "original_commit_id": "b3c0fb7a9e12a771773ed5f1a2a91d49c9690770", "user": {"login": "asiragusa", "id": 3077760, "avatar_url": "https://avatars1.githubusercontent.com/u/3077760?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asiragusa", "html_url": "https://github.com/asiragusa", "followers_url": "https://api.github.com/users/asiragusa/followers", "following_url": "https://api.github.com/users/asiragusa/following{/other_user}", "gists_url": "https://api.github.com/users/asiragusa/gists{/gist_id}", "starred_url": "https://api.github.com/users/asiragusa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asiragusa/subscriptions", "organizations_url": "https://api.github.com/users/asiragusa/orgs", "repos_url": "https://api.github.com/users/asiragusa/repos", "events_url": "https://api.github.com/users/asiragusa/events{/privacy}", "received_events_url": "https://api.github.com/users/asiragusa/received_events", "type": "User", "site_admin": false}, "body": "@schleyfox It doesn't really work nicely, it works as just hashing. \n\nIn order to work better with consistent hashing we may keep dead backends for longer.\n\nThis may be done by creating two keys in zk, one listing all the machines in the pool and the other telling if it's alive. The key listing all the machines may have an adjustable timeout and the default value should be low to work nicely everywhere.\n\nHowever in case the ordering is really important, we may also introduce sequential numbering of nodes and if an hole is detected in the middle we may fill it with a fake machine. This fake machine will be replaced once a new one joins the cluster.\n\nBtw I'm ok with making shuffling the default option, as long as this is a very specific use case.\n\nOT: take a look at https://github.com/dockerparis/DockStack, it makes really easy to use nerve/synapse as a Docker ambassador. \n", "created_at": "2015-07-24T07:48:43Z", "updated_at": "2015-07-24T07:48:43Z", "html_url": "https://github.com/airbnb/synapse/pull/130#discussion_r35401857", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/130", "author_association": "NONE", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35401857"}, "html": {"href": "https://github.com/airbnb/synapse/pull/130#discussion_r35401857"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/130"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35401857/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35664886", "pull_request_review_id": null, "id": 35664886, "diff_hunk": "@@ -719,6 +720,7 @@ def generate_backend_stanza(watcher, config)\n           backend = backends[backend_name]\n           b = \"\\tserver #{backend_name} #{backend['host']}:#{backend['port']}\"\n           b = \"#{b} cookie #{backend_name}\" unless config.include?('mode tcp')\n+          b = \"#{b} weight #{backend['weight']}\" if backend['weight'] && backend['weight'].is_a?(Fixnum) and backend['weight'] > 0 and !@opts['ignore_weights']", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 12, "commit_id": "bc76050d716c7894b5916e2b8c1db49db8a55693", "original_commit_id": "dccb0e8d78e6c88b02b384a0533967dfa1cb6551", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "I don't think we want to ignore 0 weight backends because that seems like a reasonable use case? (I believe that nerve supplies nil if there is no weight).\n\nWhat do you think?\n", "created_at": "2015-07-28T15:59:16Z", "updated_at": "2015-08-03T16:19:15Z", "html_url": "https://github.com/airbnb/synapse/pull/131#discussion_r35664886", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/131", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35664886"}, "html": {"href": "https://github.com/airbnb/synapse/pull/131#discussion_r35664886"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/131"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35664886/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35665202", "pull_request_review_id": null, "id": 35665202, "diff_hunk": "@@ -222,6 +222,7 @@ This section is its own hash, which should contain the following keys:\n * `backend`: additional lines passed to the HAProxy config in the `backend` stanza of this service\n * `listen`: these lines will be parsed and placed in the correct `frontend`/`backend` section as applicable; you can put lines which are the same for the frontend and backend here.\n * `shared_frontend`: optional: haproxy configuration directives for a shared http frontend (see below)\n+* `ignore_weights`: optional: stops haproxy backend 'weight' options being generated, even if the Nerve registrations contain this information. This will cause all backend servers to be treated equally by haproxy.", "path": "README.md", "position": null, "original_position": 4, "commit_id": "bc76050d716c7894b5916e2b8c1db49db8a55693", "original_commit_id": "dccb0e8d78e6c88b02b384a0533967dfa1cb6551", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Can you mention what the default is?\n", "created_at": "2015-07-28T16:01:05Z", "updated_at": "2015-08-03T16:19:15Z", "html_url": "https://github.com/airbnb/synapse/pull/131#discussion_r35665202", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/131", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35665202"}, "html": {"href": "https://github.com/airbnb/synapse/pull/131#discussion_r35665202"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/131"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35665202/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35666182", "pull_request_review_id": null, "id": 35666182, "diff_hunk": "@@ -29,4 +32,14 @@ class MockWatcher; end;\n     expect(subject.generate_backend_stanza(mockwatcher, mockConfig)).to eql([\"\\nbackend example_service\", [\"\\tmode tcp\"], [\"\\tserver somehost:5555 somehost:5555 check inter 2000 rise 3 fall 2\"]])\n   end\n \n+  it 'generates backend stanza with weight' do\n+    mockConfig = []\n+    expect(subject.generate_backend_stanza(createmockwatcher([{ 'weight' => 1, 'host' => 'somehost', 'port' => '5555'}]), mockConfig)).to eql([\"\\nbackend example_service\", [], [\"\\tserver somehost:5555 somehost:5555 cookie somehost:5555 weight 1 check inter 2000 rise 3 fall 2\"]])\n+  end\n+\n+  it 'generates backend stanza withour bad weight' do", "path": "spec/lib/synapse/haproxy_spec.rb", "position": null, "original_position": 30, "commit_id": "bc76050d716c7894b5916e2b8c1db49db8a55693", "original_commit_id": "dccb0e8d78e6c88b02b384a0533967dfa1cb6551", "user": {"login": "vulpine", "id": 1384718, "avatar_url": "https://avatars0.githubusercontent.com/u/1384718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vulpine", "html_url": "https://github.com/vulpine", "followers_url": "https://api.github.com/users/vulpine/followers", "following_url": "https://api.github.com/users/vulpine/following{/other_user}", "gists_url": "https://api.github.com/users/vulpine/gists{/gist_id}", "starred_url": "https://api.github.com/users/vulpine/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vulpine/subscriptions", "organizations_url": "https://api.github.com/users/vulpine/orgs", "repos_url": "https://api.github.com/users/vulpine/repos", "events_url": "https://api.github.com/users/vulpine/events{/privacy}", "received_events_url": "https://api.github.com/users/vulpine/received_events", "type": "User", "site_admin": false}, "body": "Minor typo here.\n", "created_at": "2015-07-28T16:07:35Z", "updated_at": "2015-08-03T16:19:15Z", "html_url": "https://github.com/airbnb/synapse/pull/131#discussion_r35666182", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/131", "author_association": "NONE", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35666182"}, "html": {"href": "https://github.com/airbnb/synapse/pull/131#discussion_r35666182"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/131"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/35666182/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/37138622", "pull_request_review_id": null, "id": 37138622, "diff_hunk": "@@ -0,0 +1,58 @@\n+Please, do not submit pull requests with new watchers, as Synapse and Nerve", "path": "lib/synapse/service_watcher/README.md", "position": null, "original_position": 1, "commit_id": "6f399de771962644e5cdc46ea49efdc8d2376a1a", "original_commit_id": "164b395ae1921165ee2575ffedd8cec48c3f905e", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Let's give folks somewhere to contribute these though. Don't want to discourage releasing watchers.\n", "created_at": "2015-08-15T19:41:32Z", "updated_at": "2015-09-07T20:05:15Z", "html_url": "https://github.com/airbnb/synapse/pull/132#discussion_r37138622", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/132", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/37138622"}, "html": {"href": "https://github.com/airbnb/synapse/pull/132#discussion_r37138622"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/132"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/37138622/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/39238390", "pull_request_review_id": null, "id": 39238390, "diff_hunk": "@@ -8,8 +8,16 @@\n         \"method\": \"dns\",\n         \"nameserver\": \"127.0.0.1\",\n         \"servers\": [\n-          \"0.www.example.com\",\n-          \"1.www.example.com\"\n+          {\n+            \"name\": \"example-service\",\n+            \"port\": 80,", "path": "config/hostheader_test.json", "position": 8, "original_position": 8, "commit_id": "4b8382c97f391c7f729f1f1db194c4e577bed657", "original_commit_id": "4b8382c97f391c7f729f1f1db194c4e577bed657", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Do you actually want name or port? I'm not terribly well versed in the dns watcher but it seems that it only uses the server's `host` key?\n", "created_at": "2015-09-11T03:21:02Z", "updated_at": "2015-09-11T03:21:02Z", "html_url": "https://github.com/airbnb/synapse/pull/108#discussion_r39238390", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/108", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/39238390"}, "html": {"href": "https://github.com/airbnb/synapse/pull/108#discussion_r39238390"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/108"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/39238390/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/39354752", "pull_request_review_id": null, "id": 39354752, "diff_hunk": "@@ -717,7 +717,7 @@ def generate_backend_stanza(watcher, config)\n         config.map {|c| \"\\t#{c}\"},\n         backends.keys.shuffle.map {|backend_name|\n           backend = backends[backend_name]\n-          b = \"\\tserver #{backend_name} #{backend['host']}:#{backend['port']}\"\n+          b = \"\\tserver #{backend_name} #{backend['host']}:#{backend['port']}#{' backup' if backend['backup']}#{' check port ' if backend['httpchk']}#{backend['chkport']}\"", "path": "lib/synapse/haproxy.rb", "position": 5, "original_position": 5, "commit_id": "0662410bd2a180fde194967c8f16d1479f050052", "original_commit_id": "0662410bd2a180fde194967c8f16d1479f050052", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Thoughts on having a `haproxy_server_options` catch all registration info for backend registrations similar to the watcher's `server_options`?\n\nSo like, instead of `haproxy_backup` and `haproxy_httpchk` you just have `haproxy_server_options` which can contain weights, httpcheck lines, ports, backup status, etc ...\n", "created_at": "2015-09-14T00:29:39Z", "updated_at": "2015-09-14T00:29:39Z", "html_url": "https://github.com/airbnb/synapse/pull/100#discussion_r39354752", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/100", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/39354752"}, "html": {"href": "https://github.com/airbnb/synapse/pull/100#discussion_r39354752"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/100"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/39354752/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/16515162", "pull_request_review_id": null, "id": 16515162, "diff_hunk": "@@ -0,0 +1,173 @@\n+require \"synapse/service_watcher/base\"\n+\n+require 'etcd'\n+\n+# Monkeypatch till 91f9e72d6d57ae3760e9266835f404d986072590 gets to rubygems..", "path": "lib/synapse/service_watcher/etcd.rb", "position": null, "original_position": 5, "commit_id": "9426ba7dc954e0bb73ef0943c1b4b747670bd416", "original_commit_id": "276fcebd2d17019ae08f4c6f80f209951e9980f7", "user": {"login": "calebbrown", "id": 56095, "avatar_url": "https://avatars2.githubusercontent.com/u/56095?v=4", "gravatar_id": "", "url": "https://api.github.com/users/calebbrown", "html_url": "https://github.com/calebbrown", "followers_url": "https://api.github.com/users/calebbrown/followers", "following_url": "https://api.github.com/users/calebbrown/following{/other_user}", "gists_url": "https://api.github.com/users/calebbrown/gists{/gist_id}", "starred_url": "https://api.github.com/users/calebbrown/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/calebbrown/subscriptions", "organizations_url": "https://api.github.com/users/calebbrown/orgs", "repos_url": "https://api.github.com/users/calebbrown/repos", "events_url": "https://api.github.com/users/calebbrown/events{/privacy}", "received_events_url": "https://api.github.com/users/calebbrown/received_events", "type": "User", "site_admin": false}, "body": "0.2.4 was just released and is available in Ruby Gems - so this could probably be cleaned up.\n", "created_at": "2014-08-21T00:37:43Z", "updated_at": "2015-09-23T04:42:07Z", "html_url": "https://github.com/airbnb/synapse/pull/58#discussion_r16515162", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/58", "author_association": "NONE", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/16515162"}, "html": {"href": "https://github.com/airbnb/synapse/pull/58#discussion_r16515162"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/58"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/16515162/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/40289793", "pull_request_review_id": null, "id": 40289793, "diff_hunk": "@@ -0,0 +1,166 @@\n+require \"synapse/service_watcher/base\"\n+\n+require 'etcd'\n+\n+module Synapse", "path": "lib/synapse/service_watcher/etcd.rb", "position": 5, "original_position": 5, "commit_id": "9426ba7dc954e0bb73ef0943c1b4b747670bd416", "original_commit_id": "9426ba7dc954e0bb73ef0943c1b4b747670bd416", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "This should be class Synapse::ServiceWatcher\n\nAlso can you add this watcher to the auto creation test?\n", "created_at": "2015-09-24T06:49:30Z", "updated_at": "2015-09-24T06:57:30Z", "html_url": "https://github.com/airbnb/synapse/pull/58#discussion_r40289793", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/58", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/40289793"}, "html": {"href": "https://github.com/airbnb/synapse/pull/58#discussion_r40289793"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/58"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/40289793/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/40291182", "pull_request_review_id": null, "id": 40291182, "diff_hunk": "@@ -21,6 +22,8 @@ GEM\n       archive-tar-minitar\n       excon (>= 0.28)\n       json\n+    etcd (0.2.4)", "path": "Gemfile.lock", "position": 12, "original_position": 12, "commit_id": "9426ba7dc954e0bb73ef0943c1b4b747670bd416", "original_commit_id": "9426ba7dc954e0bb73ef0943c1b4b747670bd416", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "So while testing this I came across quite a pickle, which is that the etcd ruby gem < 0.3.0 cannot handle etcd 2.0+ (it errors all over the place regarding 404 errors)\n\nhttps://github.com/ranjib/etcd-ruby/pull/51 has been merged and my local testing indicates that version 0.3.0 seems to fix things.\n\n@bobtfish do you think we should depend on an old etcd or the new one? I sorta prefer the new one but I'm not sure what the community progress on moving to etcd 2.0 is like?\n", "created_at": "2015-09-24T07:20:08Z", "updated_at": "2015-09-24T07:20:08Z", "html_url": "https://github.com/airbnb/synapse/pull/58#discussion_r40291182", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/58", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/40291182"}, "html": {"href": "https://github.com/airbnb/synapse/pull/58#discussion_r40291182"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/58"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/40291182/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/40292831", "pull_request_review_id": null, "id": 40292831, "diff_hunk": "@@ -0,0 +1,166 @@\n+require \"synapse/service_watcher/base\"\n+\n+require 'etcd'\n+\n+module Synapse\n+  class EtcdWatcher < BaseWatcher\n+    NUMBERS_RE = /^\\d+$/\n+\n+    def start\n+      @etcd_hosts = @discovery['hosts'].shuffle\n+\n+      log.info \"synapse: starting etcd watcher #{@name} @ hosts: #{@discovery['hosts']}, path: #{@discovery['path']}\"\n+      @should_exit = false\n+\n+      @etcd_hosts.each do |h|\n+        host, port = h.split(':')\n+        port = port || 4003\n+        @etcd = ::Etcd.client(:host => host, :port => port)\n+\n+        connected =\n+          begin\n+            @etcd.leader\n+          rescue\n+            false\n+          end\n+\n+        break if connected\n+      end\n+\n+      # call the callback to bootstrap the process\n+      discover\n+      @synapse.reconfigure!\n+      @watcher = Thread.new do\n+        watch\n+      end\n+    end\n+\n+    def stop\n+      log.warn \"synapse: etcd watcher exiting\"\n+\n+      @should_exit = true\n+      @etcd = nil\n+\n+      log.info \"synapse: etcd watcher cleaned up successfully\"\n+    end\n+\n+    def ping?\n+      @etcd.leader\n+    end\n+\n+    private\n+    def validate_discovery_opts\n+      raise ArgumentError, \"invalid discovery method #{@discovery['method']}\" \\\n+        unless @discovery['method'] == 'etcd'\n+      raise ArgumentError, \"missing or invalid etcd hosts for service #{@name}\" \\\n+        unless @discovery['hosts']\n+      raise ArgumentError, \"invalid etcd path for service #{@name}\" \\\n+        unless @discovery['path']\n+    end\n+\n+    # helper method that ensures that the discovery path exists\n+    def create(path)\n+      log.debug \"synapse: creating etcd path: #{path}\"\n+      @etcd.create(path, dir: true)\n+    end\n+\n+    def each_node(node)\n+      begin\n+        host, port, name = deserialize_service_instance(node.value)\n+      rescue StandardError => e\n+        log.error \"synapse: invalid data in etcd node #{node.inspect} at #{@discovery['path']}: #{e} DATA #{node.value}\"\n+        nil \n+     else\n+        server_port = @server_port_override ? @server_port_override : port\n+\n+        # find the numberic id in the node name; used for leader elections if enabled\n+        numeric_id = node.key.split('/').last\n+        numeric_id = NUMBERS_RE =~ numeric_id ? numeric_id.to_i : nil\n+\n+        log.warn \"synapse: discovered backend #{name} at #{host}:#{server_port} for service #{@name}\"\n+        { 'name' => name, 'host' => host, 'port' => server_port, 'id' => numeric_id}\n+      end\n+    end\n+\n+    def each_dir(d)\n+      new_backends = []\n+      d.children.each do |node|\n+        if node.directory?\n+          new_backends << each_dir(@etcd.get(node.key))\n+        else\n+          backend = each_node(node)\n+          if backend\n+            new_backends << backend\n+          end\n+        end\n+      end\n+      new_backends.flatten\n+    end\n+\n+    # find the current backends at the discovery path; sets @backends\n+    def discover\n+      log.info \"synapse: discovering backends for service #{@name}\"\n+\n+      d = nil\n+      begin\n+        d = @etcd.get(@discovery['path'])\n+      rescue Etcd::KeyNotFound\n+        create(@discovery['path'])\n+        d = @etcd.get(@discovery['path'])\n+      end\n+\n+      new_backends = []\n+      if d.directory?\n+        new_backends = each_dir(d)\n+      else\n+        log.warn \"synapse: path #{@discovery['path']} is not a directory\"\n+      end\n+\n+      if new_backends.empty?\n+        if @default_servers.empty?\n+          log.warn \"synapse: no backends and no default servers for service #{@name}; using previous backends: #{@backends.inspect}\"\n+          false\n+        else\n+          log.warn \"synapse: no backends for service #{@name}; using default servers: #{@default_servers.inspect}\"\n+          @backends = @default_servers\n+          true\n+        end\n+      else\n+        if @backends != new_backends\n+          log.info \"synapse: discovered #{new_backends.length} backends (including new) for service #{@name}\"\n+          @backends = new_backends\n+          true\n+        else\n+          log.info \"synapse: discovered #{new_backends.length} backends for service #{@name}\"\n+          false\n+        end\n+      end\n+    end\n+\n+    def watch\n+      while !@should_exit\n+        begin\n+          @etcd.watch(@discovery['path'], :timeout => 60, :recursive => true)", "path": "lib/synapse/service_watcher/etcd.rb", "position": 143, "original_position": 143, "commit_id": "9426ba7dc954e0bb73ef0943c1b4b747670bd416", "original_commit_id": "9426ba7dc954e0bb73ef0943c1b4b747670bd416", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Alright so while testing I came across this gem. If my understanding is correct etcd makes us not only do our own heartbeats from nerve (hella writes), but we also end up basically constantly polling in this function because there is no capability to filter watch events?\n\nBasically without https://github.com/coreos/etcd/issues/633 or https://github.com/coreos/etcd/issues/174 closed SmartStack scalability on etcd will be limited to ... not very much.\n\nIf that understanding is correct can we implement get children watches internally, where we do a lightweight \"see if the list of children changed\" operation and if that is different we actually go through loading all the data (aka run discover). This way we're at least not constantly pulling all of the etcd state?\n", "created_at": "2015-09-24T07:47:03Z", "updated_at": "2015-09-24T07:47:03Z", "html_url": "https://github.com/airbnb/synapse/pull/58#discussion_r40292831", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/58", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/40292831"}, "html": {"href": "https://github.com/airbnb/synapse/pull/58#discussion_r40292831"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/58"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/40292831/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41230633", "pull_request_review_id": null, "id": 41230633, "diff_hunk": "@@ -21,6 +22,8 @@ GEM\n       archive-tar-minitar\n       excon (>= 0.28)\n       json\n+    etcd (0.2.4)", "path": "Gemfile.lock", "position": 12, "original_position": 12, "commit_id": "9426ba7dc954e0bb73ef0943c1b4b747670bd416", "original_commit_id": "9426ba7dc954e0bb73ef0943c1b4b747670bd416", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Now that we recommend installing via gem, can we just do ~> 0.2 ?\n", "created_at": "2015-10-06T06:51:13Z", "updated_at": "2015-10-06T06:51:13Z", "html_url": "https://github.com/airbnb/synapse/pull/58#discussion_r41230633", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/58", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41230633"}, "html": {"href": "https://github.com/airbnb/synapse/pull/58#discussion_r41230633"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/58"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41230633/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41699389", "pull_request_review_id": null, "id": 41699389, "diff_hunk": "@@ -4,6 +4,7 @@\n require \"synapse/service_watcher/dns\"\n require \"synapse/service_watcher/docker\"\n require \"synapse/service_watcher/zookeeper_dns\"\n+require \"synapse/service_watcher/marathon\"", "path": "lib/synapse/service_watcher.rb", "position": null, "original_position": 4, "commit_id": "b3d5368491540109aa382e9d4ab0a55b0ba5a12d", "original_commit_id": "acde0d312fb8d58f62b1dbf59e200032404af762", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Can you rebase to pick up the auto-loading watcher code? See https://github.com/airbnb/synapse/blob/master/lib/synapse/service_watcher/README.md for the new specification\n", "created_at": "2015-10-10T17:32:30Z", "updated_at": "2015-10-10T20:27:48Z", "html_url": "https://github.com/airbnb/synapse/pull/101#discussion_r41699389", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/101", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41699389"}, "html": {"href": "https://github.com/airbnb/synapse/pull/101#discussion_r41699389"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/101"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41699389/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41699395", "pull_request_review_id": null, "id": 41699395, "diff_hunk": "@@ -0,0 +1,105 @@\n+require \"synapse/service_watcher/base\"\n+require 'json'\n+require 'resolv'\n+\n+module Synapse\n+  class MarathonWatcher < BaseWatcher\n+    def start\n+      @check_interval = @discovery['check_interval'] || 10.0\n+      @connection = nil\n+      @watcher = Thread.new { watch }\n+    end\n+\n+    def stop\n+      @connection.finish\n+    rescue\n+      # pass\n+    end\n+\n+  private\n+\n+    def validate_discovery_opts\n+      required_opts = %w[marathon_api_url application_name]\n+\n+      required_opts.each do |opt|\n+        if @discovery.fetch(opt, '').empty?\n+          raise ArgumentError,\n+            \"a value for services.#{@name}.discovery.#{opt} must be specified\"\n+        end\n+      end\n+    end\n+\n+    def attempt_marathon_connection\n+      @marathon_api = URI.join(@discovery['marathon_api_url'], \"/v2/apps/#{@discovery['application_name']}/tasks\")", "path": "lib/synapse/service_watcher/marathon.rb", "position": null, "original_position": 33, "commit_id": "b3d5368491540109aa382e9d4ab0a55b0ba5a12d", "original_commit_id": "acde0d312fb8d58f62b1dbf59e200032404af762", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Can we make the uri configurable? I'm not sure how often marathon changes it's api but I imagine v2 will only be valid for a little while longer.\n", "created_at": "2015-10-10T17:33:27Z", "updated_at": "2015-10-10T20:27:48Z", "html_url": "https://github.com/airbnb/synapse/pull/101#discussion_r41699395", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/101", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41699395"}, "html": {"href": "https://github.com/airbnb/synapse/pull/101#discussion_r41699395"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/101"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41699395/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41699425", "pull_request_review_id": null, "id": 41699425, "diff_hunk": "@@ -0,0 +1,105 @@\n+require \"synapse/service_watcher/base\"\n+require 'json'\n+require 'resolv'\n+\n+module Synapse\n+  class MarathonWatcher < BaseWatcher\n+    def start\n+      @check_interval = @discovery['check_interval'] || 10.0\n+      @connection = nil\n+      @watcher = Thread.new { watch }\n+    end\n+\n+    def stop\n+      @connection.finish\n+    rescue\n+      # pass\n+    end\n+\n+  private\n+\n+    def validate_discovery_opts\n+      required_opts = %w[marathon_api_url application_name]\n+\n+      required_opts.each do |opt|\n+        if @discovery.fetch(opt, '').empty?\n+          raise ArgumentError,\n+            \"a value for services.#{@name}.discovery.#{opt} must be specified\"\n+        end\n+      end\n+    end\n+\n+    def attempt_marathon_connection\n+      @marathon_api = URI.join(@discovery['marathon_api_url'], \"/v2/apps/#{@discovery['application_name']}/tasks\")\n+\n+      begin\n+        @connection = Net::HTTP.new(@marathon_api.host, @marathon_api.port)\n+        @connection.open_timeout = 5\n+        @connection.start\n+      rescue => ex\n+        @connection = nil\n+        log.error \"synapse: could not connect to marathon at #{@marathon_api}: #{ex}\"\n+\n+        raise ex\n+      end\n+    end\n+\n+    def watch\n+      until @should_exit\n+        retry_count = 0\n+        start = Time.now\n+\n+        begin\n+          if @connection.nil?\n+            attempt_marathon_connection\n+          end\n+\n+          req = Net::HTTP::Get.new(@marathon_api.request_uri)\n+          req['Accept'] = 'application/json'\n+          response = @connection.request(req)\n+\n+          tasks = JSON.parse(response.body).fetch('tasks', [])\n+          backends = tasks.keep_if { |task| task['startedAt'] }.map do |task|\n+            {\n+              'name' => task['host'],\n+              'host' => task['host'],\n+              'port' => task['ports'].first,\n+            }\n+          end.sort_by { |task| task['name'] }\n+\n+          if backends.empty?\n+            log.warn \"synapse: no backends discovered for #{@discovery['application_name']}\"\n+          else\n+            previous_backends = @backends\n+            set_backends(backends)\n+            new_backends = @backends\n+\n+            unless previous_backends == new_backends\n+              log.info \"synapse: found #{backends.length} backends for #{@discovery['application_name']}\"\n+\n+              reconfigure!\n+            end\n+          end\n+        rescue EOFError", "path": "lib/synapse/service_watcher/marathon.rb", "position": null, "original_position": 83, "commit_id": "b3d5368491540109aa382e9d4ab0a55b0ba5a12d", "original_commit_id": "acde0d312fb8d58f62b1dbf59e200032404af762", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Do we need to set @connection to nil here to ensure we attempt to connect back to marathon?\n", "created_at": "2015-10-10T17:37:36Z", "updated_at": "2015-10-10T20:27:48Z", "html_url": "https://github.com/airbnb/synapse/pull/101#discussion_r41699425", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/101", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41699425"}, "html": {"href": "https://github.com/airbnb/synapse/pull/101#discussion_r41699425"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/101"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41699425/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41699585", "pull_request_review_id": null, "id": 41699585, "diff_hunk": "@@ -0,0 +1,105 @@\n+require \"synapse/service_watcher/base\"\n+require 'json'\n+require 'resolv'\n+\n+module Synapse\n+  class MarathonWatcher < BaseWatcher\n+    def start\n+      @check_interval = @discovery['check_interval'] || 10.0\n+      @connection = nil\n+      @watcher = Thread.new { watch }", "path": "lib/synapse/service_watcher/marathon.rb", "position": null, "original_position": 10, "commit_id": "b3d5368491540109aa382e9d4ab0a55b0ba5a12d", "original_commit_id": "acde0d312fb8d58f62b1dbf59e200032404af762", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Can we sleep for the first watch for a random amount of time between 0 and the check_interval? I feel like this could easily thunder your marathon api?\n", "created_at": "2015-10-10T17:48:57Z", "updated_at": "2015-10-10T20:27:48Z", "html_url": "https://github.com/airbnb/synapse/pull/101#discussion_r41699585", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/101", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41699585"}, "html": {"href": "https://github.com/airbnb/synapse/pull/101#discussion_r41699585"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/101"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41699585/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41699613", "pull_request_review_id": null, "id": 41699613, "diff_hunk": "@@ -0,0 +1,105 @@\n+require \"synapse/service_watcher/base\"\n+require 'json'\n+require 'resolv'\n+\n+module Synapse\n+  class MarathonWatcher < BaseWatcher\n+    def start\n+      @check_interval = @discovery['check_interval'] || 10.0\n+      @connection = nil\n+      @watcher = Thread.new { watch }\n+    end\n+\n+    def stop\n+      @connection.finish\n+    rescue\n+      # pass\n+    end\n+\n+  private\n+\n+    def validate_discovery_opts\n+      required_opts = %w[marathon_api_url application_name]\n+\n+      required_opts.each do |opt|\n+        if @discovery.fetch(opt, '').empty?\n+          raise ArgumentError,\n+            \"a value for services.#{@name}.discovery.#{opt} must be specified\"\n+        end\n+      end\n+    end\n+\n+    def attempt_marathon_connection\n+      @marathon_api = URI.join(@discovery['marathon_api_url'], \"/v2/apps/#{@discovery['application_name']}/tasks\")\n+\n+      begin\n+        @connection = Net::HTTP.new(@marathon_api.host, @marathon_api.port)\n+        @connection.open_timeout = 5\n+        @connection.start\n+      rescue => ex\n+        @connection = nil\n+        log.error \"synapse: could not connect to marathon at #{@marathon_api}: #{ex}\"\n+\n+        raise ex\n+      end\n+    end\n+\n+    def watch\n+      until @should_exit\n+        retry_count = 0\n+        start = Time.now\n+\n+        begin\n+          if @connection.nil?\n+            attempt_marathon_connection\n+          end\n+\n+          req = Net::HTTP::Get.new(@marathon_api.request_uri)\n+          req['Accept'] = 'application/json'\n+          response = @connection.request(req)\n+\n+          tasks = JSON.parse(response.body).fetch('tasks', [])\n+          backends = tasks.keep_if { |task| task['startedAt'] }.map do |task|\n+            {\n+              'name' => task['host'],\n+              'host' => task['host'],\n+              'port' => task['ports'].first,\n+            }\n+          end.sort_by { |task| task['name'] }\n+\n+          if backends.empty?\n+            log.warn \"synapse: no backends discovered for #{@discovery['application_name']}\"\n+          else\n+            previous_backends = @backends\n+            set_backends(backends)\n+            new_backends = @backends\n+\n+            unless previous_backends == new_backends\n+              log.info \"synapse: found #{backends.length} backends for #{@discovery['application_name']}\"\n+\n+              reconfigure!", "path": "lib/synapse/service_watcher/marathon.rb", "position": null, "original_position": 80, "commit_id": "b3d5368491540109aa382e9d4ab0a55b0ba5a12d", "original_commit_id": "acde0d312fb8d58f62b1dbf59e200032404af762", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Don't call reconfigure again, set_backends takes care of this for you (taking care of things like de-duplicating host/port pairs and such). Actually this whole bit between backends.empty and this should be removed.\n", "created_at": "2015-10-10T17:51:04Z", "updated_at": "2015-10-10T20:27:48Z", "html_url": "https://github.com/airbnb/synapse/pull/101#discussion_r41699613", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/101", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41699613"}, "html": {"href": "https://github.com/airbnb/synapse/pull/101#discussion_r41699613"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/101"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41699613/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41699852", "pull_request_review_id": null, "id": 41699852, "diff_hunk": "@@ -0,0 +1,105 @@\n+require \"synapse/service_watcher/base\"\n+require 'json'\n+require 'resolv'\n+\n+module Synapse\n+  class MarathonWatcher < BaseWatcher\n+    def start\n+      @check_interval = @discovery['check_interval'] || 10.0\n+      @connection = nil\n+      @watcher = Thread.new { watch }\n+    end\n+\n+    def stop\n+      @connection.finish\n+    rescue\n+      # pass\n+    end\n+\n+  private\n+\n+    def validate_discovery_opts\n+      required_opts = %w[marathon_api_url application_name]\n+\n+      required_opts.each do |opt|\n+        if @discovery.fetch(opt, '').empty?\n+          raise ArgumentError,\n+            \"a value for services.#{@name}.discovery.#{opt} must be specified\"\n+        end\n+      end\n+    end\n+\n+    def attempt_marathon_connection\n+      @marathon_api = URI.join(@discovery['marathon_api_url'], \"/v2/apps/#{@discovery['application_name']}/tasks\")\n+\n+      begin\n+        @connection = Net::HTTP.new(@marathon_api.host, @marathon_api.port)\n+        @connection.open_timeout = 5\n+        @connection.start\n+      rescue => ex\n+        @connection = nil\n+        log.error \"synapse: could not connect to marathon at #{@marathon_api}: #{ex}\"\n+\n+        raise ex\n+      end\n+    end\n+\n+    def watch\n+      until @should_exit\n+        retry_count = 0\n+        start = Time.now\n+\n+        begin\n+          if @connection.nil?\n+            attempt_marathon_connection\n+          end\n+\n+          req = Net::HTTP::Get.new(@marathon_api.request_uri)\n+          req['Accept'] = 'application/json'\n+          response = @connection.request(req)\n+\n+          tasks = JSON.parse(response.body).fetch('tasks', [])\n+          backends = tasks.keep_if { |task| task['startedAt'] }.map do |task|\n+            {\n+              'name' => task['host'],\n+              'host' => task['host'],\n+              'port' => task['ports'].first,", "path": "lib/synapse/service_watcher/marathon.rb", "position": null, "original_position": 66, "commit_id": "b3d5368491540109aa382e9d4ab0a55b0ba5a12d", "original_commit_id": "acde0d312fb8d58f62b1dbf59e200032404af762", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Can you do a port_index like the other PR? I like that flexibility.\n", "created_at": "2015-10-10T18:13:54Z", "updated_at": "2015-10-10T20:27:48Z", "html_url": "https://github.com/airbnb/synapse/pull/101#discussion_r41699852", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/101", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41699852"}, "html": {"href": "https://github.com/airbnb/synapse/pull/101#discussion_r41699852"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/101"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41699852/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41700410", "pull_request_review_id": null, "id": 41700410, "diff_hunk": "@@ -0,0 +1,105 @@\n+require \"synapse/service_watcher/base\"\n+require 'json'\n+require 'resolv'\n+\n+module Synapse\n+  class MarathonWatcher < BaseWatcher\n+    def start\n+      @check_interval = @discovery['check_interval'] || 10.0\n+      @connection = nil\n+      @watcher = Thread.new { watch }\n+    end\n+\n+    def stop\n+      @connection.finish\n+    rescue\n+      # pass\n+    end\n+\n+  private\n+\n+    def validate_discovery_opts\n+      required_opts = %w[marathon_api_url application_name]\n+\n+      required_opts.each do |opt|\n+        if @discovery.fetch(opt, '').empty?\n+          raise ArgumentError,\n+            \"a value for services.#{@name}.discovery.#{opt} must be specified\"\n+        end\n+      end\n+    end\n+\n+    def attempt_marathon_connection\n+      @marathon_api = URI.join(@discovery['marathon_api_url'], \"/v2/apps/#{@discovery['application_name']}/tasks\")", "path": "lib/synapse/service_watcher/marathon.rb", "position": null, "original_position": 33, "commit_id": "b3d5368491540109aa382e9d4ab0a55b0ba5a12d", "original_commit_id": "acde0d312fb8d58f62b1dbf59e200032404af762", "user": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "body": "Idk? It seems pretty stable to me, and I think even if they were to make a breaking change to it they might still maintain the old URL. Nonetheless, I will make it configurable so I don't have to eat my words.\n", "created_at": "2015-10-10T19:08:42Z", "updated_at": "2015-10-10T20:27:48Z", "html_url": "https://github.com/airbnb/synapse/pull/101#discussion_r41700410", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/101", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41700410"}, "html": {"href": "https://github.com/airbnb/synapse/pull/101#discussion_r41700410"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/101"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41700410/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41700700", "pull_request_review_id": null, "id": 41700700, "diff_hunk": "@@ -0,0 +1,105 @@\n+require \"synapse/service_watcher/base\"\n+require 'json'\n+require 'resolv'\n+\n+module Synapse\n+  class MarathonWatcher < BaseWatcher\n+    def start\n+      @check_interval = @discovery['check_interval'] || 10.0\n+      @connection = nil\n+      @watcher = Thread.new { watch }\n+    end\n+\n+    def stop\n+      @connection.finish\n+    rescue\n+      # pass\n+    end\n+\n+  private\n+\n+    def validate_discovery_opts\n+      required_opts = %w[marathon_api_url application_name]\n+\n+      required_opts.each do |opt|\n+        if @discovery.fetch(opt, '').empty?\n+          raise ArgumentError,\n+            \"a value for services.#{@name}.discovery.#{opt} must be specified\"\n+        end\n+      end\n+    end\n+\n+    def attempt_marathon_connection\n+      @marathon_api = URI.join(@discovery['marathon_api_url'], \"/v2/apps/#{@discovery['application_name']}/tasks\")\n+\n+      begin\n+        @connection = Net::HTTP.new(@marathon_api.host, @marathon_api.port)\n+        @connection.open_timeout = 5\n+        @connection.start\n+      rescue => ex\n+        @connection = nil\n+        log.error \"synapse: could not connect to marathon at #{@marathon_api}: #{ex}\"\n+\n+        raise ex\n+      end\n+    end\n+\n+    def watch\n+      until @should_exit\n+        retry_count = 0\n+        start = Time.now\n+\n+        begin\n+          if @connection.nil?\n+            attempt_marathon_connection\n+          end\n+\n+          req = Net::HTTP::Get.new(@marathon_api.request_uri)\n+          req['Accept'] = 'application/json'\n+          response = @connection.request(req)\n+\n+          tasks = JSON.parse(response.body).fetch('tasks', [])\n+          backends = tasks.keep_if { |task| task['startedAt'] }.map do |task|\n+            {\n+              'name' => task['host'],\n+              'host' => task['host'],\n+              'port' => task['ports'].first,\n+            }\n+          end.sort_by { |task| task['name'] }\n+\n+          if backends.empty?\n+            log.warn \"synapse: no backends discovered for #{@discovery['application_name']}\"\n+          else\n+            previous_backends = @backends\n+            set_backends(backends)\n+            new_backends = @backends\n+\n+            unless previous_backends == new_backends\n+              log.info \"synapse: found #{backends.length} backends for #{@discovery['application_name']}\"\n+\n+              reconfigure!\n+            end\n+          end\n+        rescue EOFError", "path": "lib/synapse/service_watcher/marathon.rb", "position": null, "original_position": 83, "commit_id": "b3d5368491540109aa382e9d4ab0a55b0ba5a12d", "original_commit_id": "acde0d312fb8d58f62b1dbf59e200032404af762", "user": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "body": "Yeah, I think so.\n", "created_at": "2015-10-10T19:38:16Z", "updated_at": "2015-10-10T20:27:48Z", "html_url": "https://github.com/airbnb/synapse/pull/101#discussion_r41700700", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/101", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41700700"}, "html": {"href": "https://github.com/airbnb/synapse/pull/101#discussion_r41700700"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/101"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41700700/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41700772", "pull_request_review_id": null, "id": 41700772, "diff_hunk": "@@ -0,0 +1,105 @@\n+require \"synapse/service_watcher/base\"\n+require 'json'\n+require 'resolv'\n+\n+module Synapse\n+  class MarathonWatcher < BaseWatcher\n+    def start\n+      @check_interval = @discovery['check_interval'] || 10.0\n+      @connection = nil\n+      @watcher = Thread.new { watch }", "path": "lib/synapse/service_watcher/marathon.rb", "position": null, "original_position": 10, "commit_id": "b3d5368491540109aa382e9d4ab0a55b0ba5a12d", "original_commit_id": "acde0d312fb8d58f62b1dbf59e200032404af762", "user": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "body": "Done\n", "created_at": "2015-10-10T19:43:52Z", "updated_at": "2015-10-10T20:27:48Z", "html_url": "https://github.com/airbnb/synapse/pull/101#discussion_r41700772", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/101", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41700772"}, "html": {"href": "https://github.com/airbnb/synapse/pull/101#discussion_r41700772"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/101"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41700772/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41700807", "pull_request_review_id": null, "id": 41700807, "diff_hunk": "@@ -0,0 +1,105 @@\n+require \"synapse/service_watcher/base\"\n+require 'json'\n+require 'resolv'\n+\n+module Synapse\n+  class MarathonWatcher < BaseWatcher\n+    def start\n+      @check_interval = @discovery['check_interval'] || 10.0\n+      @connection = nil\n+      @watcher = Thread.new { watch }\n+    end\n+\n+    def stop\n+      @connection.finish\n+    rescue\n+      # pass\n+    end\n+\n+  private\n+\n+    def validate_discovery_opts\n+      required_opts = %w[marathon_api_url application_name]\n+\n+      required_opts.each do |opt|\n+        if @discovery.fetch(opt, '').empty?\n+          raise ArgumentError,\n+            \"a value for services.#{@name}.discovery.#{opt} must be specified\"\n+        end\n+      end\n+    end\n+\n+    def attempt_marathon_connection\n+      @marathon_api = URI.join(@discovery['marathon_api_url'], \"/v2/apps/#{@discovery['application_name']}/tasks\")\n+\n+      begin\n+        @connection = Net::HTTP.new(@marathon_api.host, @marathon_api.port)\n+        @connection.open_timeout = 5\n+        @connection.start\n+      rescue => ex\n+        @connection = nil\n+        log.error \"synapse: could not connect to marathon at #{@marathon_api}: #{ex}\"\n+\n+        raise ex\n+      end\n+    end\n+\n+    def watch\n+      until @should_exit\n+        retry_count = 0\n+        start = Time.now\n+\n+        begin\n+          if @connection.nil?\n+            attempt_marathon_connection\n+          end\n+\n+          req = Net::HTTP::Get.new(@marathon_api.request_uri)\n+          req['Accept'] = 'application/json'\n+          response = @connection.request(req)\n+\n+          tasks = JSON.parse(response.body).fetch('tasks', [])\n+          backends = tasks.keep_if { |task| task['startedAt'] }.map do |task|\n+            {\n+              'name' => task['host'],\n+              'host' => task['host'],\n+              'port' => task['ports'].first,\n+            }\n+          end.sort_by { |task| task['name'] }\n+\n+          if backends.empty?\n+            log.warn \"synapse: no backends discovered for #{@discovery['application_name']}\"\n+          else\n+            previous_backends = @backends\n+            set_backends(backends)\n+            new_backends = @backends\n+\n+            unless previous_backends == new_backends\n+              log.info \"synapse: found #{backends.length} backends for #{@discovery['application_name']}\"\n+\n+              reconfigure!", "path": "lib/synapse/service_watcher/marathon.rb", "position": null, "original_position": 80, "commit_id": "b3d5368491540109aa382e9d4ab0a55b0ba5a12d", "original_commit_id": "acde0d312fb8d58f62b1dbf59e200032404af762", "user": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "body": "Done. (7d512887 moved that logic into `ServiceWatcher::Base`, after my first version of the PR)\n", "created_at": "2015-10-10T19:47:13Z", "updated_at": "2015-10-10T20:27:48Z", "html_url": "https://github.com/airbnb/synapse/pull/101#discussion_r41700807", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/101", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41700807"}, "html": {"href": "https://github.com/airbnb/synapse/pull/101#discussion_r41700807"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/101"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41700807/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41700810", "pull_request_review_id": null, "id": 41700810, "diff_hunk": "@@ -0,0 +1,105 @@\n+require \"synapse/service_watcher/base\"\n+require 'json'\n+require 'resolv'\n+\n+module Synapse\n+  class MarathonWatcher < BaseWatcher\n+    def start\n+      @check_interval = @discovery['check_interval'] || 10.0\n+      @connection = nil\n+      @watcher = Thread.new { watch }\n+    end\n+\n+    def stop\n+      @connection.finish\n+    rescue\n+      # pass\n+    end\n+\n+  private\n+\n+    def validate_discovery_opts\n+      required_opts = %w[marathon_api_url application_name]\n+\n+      required_opts.each do |opt|\n+        if @discovery.fetch(opt, '').empty?\n+          raise ArgumentError,\n+            \"a value for services.#{@name}.discovery.#{opt} must be specified\"\n+        end\n+      end\n+    end\n+\n+    def attempt_marathon_connection\n+      @marathon_api = URI.join(@discovery['marathon_api_url'], \"/v2/apps/#{@discovery['application_name']}/tasks\")\n+\n+      begin\n+        @connection = Net::HTTP.new(@marathon_api.host, @marathon_api.port)\n+        @connection.open_timeout = 5\n+        @connection.start\n+      rescue => ex\n+        @connection = nil\n+        log.error \"synapse: could not connect to marathon at #{@marathon_api}: #{ex}\"\n+\n+        raise ex\n+      end\n+    end\n+\n+    def watch\n+      until @should_exit\n+        retry_count = 0\n+        start = Time.now\n+\n+        begin\n+          if @connection.nil?\n+            attempt_marathon_connection\n+          end\n+\n+          req = Net::HTTP::Get.new(@marathon_api.request_uri)\n+          req['Accept'] = 'application/json'\n+          response = @connection.request(req)\n+\n+          tasks = JSON.parse(response.body).fetch('tasks', [])\n+          backends = tasks.keep_if { |task| task['startedAt'] }.map do |task|\n+            {\n+              'name' => task['host'],\n+              'host' => task['host'],\n+              'port' => task['ports'].first,", "path": "lib/synapse/service_watcher/marathon.rb", "position": null, "original_position": 66, "commit_id": "b3d5368491540109aa382e9d4ab0a55b0ba5a12d", "original_commit_id": "acde0d312fb8d58f62b1dbf59e200032404af762", "user": {"login": "tdooner", "id": 129120, "avatar_url": "https://avatars3.githubusercontent.com/u/129120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdooner", "html_url": "https://github.com/tdooner", "followers_url": "https://api.github.com/users/tdooner/followers", "following_url": "https://api.github.com/users/tdooner/following{/other_user}", "gists_url": "https://api.github.com/users/tdooner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdooner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdooner/subscriptions", "organizations_url": "https://api.github.com/users/tdooner/orgs", "repos_url": "https://api.github.com/users/tdooner/repos", "events_url": "https://api.github.com/users/tdooner/events{/privacy}", "received_events_url": "https://api.github.com/users/tdooner/received_events", "type": "User", "site_admin": false}, "body": "Good idea, we actually needed this too.\n", "created_at": "2015-10-10T19:47:26Z", "updated_at": "2015-10-10T20:27:48Z", "html_url": "https://github.com/airbnb/synapse/pull/101#discussion_r41700810", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/101", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41700810"}, "html": {"href": "https://github.com/airbnb/synapse/pull/101#discussion_r41700810"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/101"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41700810/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41994451", "pull_request_review_id": null, "id": 41994451, "diff_hunk": "@@ -0,0 +1,76 @@\n+# encoding: utf-8\n+#\n+# Variant of the Zookeeper service watcher that works with Apache Aurora\n+# service announcements.\n+#\n+# Parameters:\n+#   hosts: list of zookeeper hosts to query (List of Strings, required)\n+#   path: \"/path/to/serverset/in/zookeeper\" (String, required)\n+#   port_name: Named service endpoint (String, optional)\n+#\n+# If port_name is omitted, uses the default serviceEndpoint port.\n+\n+# zk node data looks like this:\n+#\n+# {\n+#   \"additionalEndpoints\": {\n+#     \"aurora\": {\n+#       \"host\": \"somehostname\",\n+#       \"port\": 31943\n+#     },\n+#     \"http\": {\n+#       \"host\": \"somehostname\",\n+#       \"port\": 31943\n+#     },\n+#     \"otherport\": {\n+#       \"host\": \"somehostname\",\n+#       \"port\": 31944\n+#     }\n+#   },\n+#   \"serviceEndpoint\": {\n+#     \"host\": \"somehostname\",\n+#     \"port\": 31943\n+#   },\n+#   \"shard\": 0,\n+#   \"status\": \"ALIVE\"", "path": "lib/synapse/service_watcher/zookeeper_aurora.rb", "position": 35, "original_position": 35, "commit_id": "39037ceec3b742002ba64fa789f3dda88b28fdd0", "original_commit_id": "39037ceec3b742002ba64fa789f3dda88b28fdd0", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Should we take into account the ALIVE status?\n", "created_at": "2015-10-14T13:47:06Z", "updated_at": "2015-10-14T13:47:06Z", "html_url": "https://github.com/airbnb/synapse/pull/104#discussion_r41994451", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/104", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41994451"}, "html": {"href": "https://github.com/airbnb/synapse/pull/104#discussion_r41994451"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/104"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41994451/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41994713", "pull_request_review_id": null, "id": 41994713, "diff_hunk": "@@ -0,0 +1,76 @@\n+# encoding: utf-8\n+#\n+# Variant of the Zookeeper service watcher that works with Apache Aurora\n+# service announcements.\n+#\n+# Parameters:\n+#   hosts: list of zookeeper hosts to query (List of Strings, required)\n+#   path: \"/path/to/serverset/in/zookeeper\" (String, required)\n+#   port_name: Named service endpoint (String, optional)", "path": "lib/synapse/service_watcher/zookeeper_aurora.rb", "position": 9, "original_position": 9, "commit_id": "39037ceec3b742002ba64fa789f3dda88b28fdd0", "original_commit_id": "39037ceec3b742002ba64fa789f3dda88b28fdd0", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Can we call this 'endpoint_name'? I'm a little confused by 'port_name' what it actually does\n", "created_at": "2015-10-14T13:49:10Z", "updated_at": "2015-10-14T13:49:10Z", "html_url": "https://github.com/airbnb/synapse/pull/104#discussion_r41994713", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/104", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41994713"}, "html": {"href": "https://github.com/airbnb/synapse/pull/104#discussion_r41994713"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/104"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41994713/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41995295", "pull_request_review_id": null, "id": 41995295, "diff_hunk": "@@ -0,0 +1,76 @@\n+# encoding: utf-8\n+#\n+# Variant of the Zookeeper service watcher that works with Apache Aurora\n+# service announcements.\n+#\n+# Parameters:\n+#   hosts: list of zookeeper hosts to query (List of Strings, required)\n+#   path: \"/path/to/serverset/in/zookeeper\" (String, required)\n+#   port_name: Named service endpoint (String, optional)\n+#\n+# If port_name is omitted, uses the default serviceEndpoint port.\n+\n+# zk node data looks like this:\n+#\n+# {\n+#   \"additionalEndpoints\": {\n+#     \"aurora\": {\n+#       \"host\": \"somehostname\",\n+#       \"port\": 31943\n+#     },\n+#     \"http\": {\n+#       \"host\": \"somehostname\",\n+#       \"port\": 31943\n+#     },\n+#     \"otherport\": {\n+#       \"host\": \"somehostname\",\n+#       \"port\": 31944\n+#     }\n+#   },\n+#   \"serviceEndpoint\": {\n+#     \"host\": \"somehostname\",\n+#     \"port\": 31943\n+#   },\n+#   \"shard\": 0,\n+#   \"status\": \"ALIVE\"\n+# }\n+#\n+\n+require 'synapse/service_watcher/zookeeper'\n+\n+module Synapse\n+  # Watcher for Zookeeper announcements from Apache Aurora\n+  class ZookeeperAuroraWatcher < Synapse::ZookeeperWatcher\n+    def validate_discovery_opts\n+      @discovery['method'] == 'zookeeper_aurora' ||\n+        fail(ArgumentError,\n+             \"Invalid discovery method: #{@discovery['method']}\")\n+      @discovery['hosts'] ||\n+        fail(ArgumentError,\n+             \"Missing or invalid zookeeper host for service #{@name}\")\n+      @discovery['path'] ||\n+        fail(ArgumentError, \"Invalid zookeeper path for service #{@name}\")\n+    end\n+\n+    def deserialize_service_instance(data)\n+      log.debug 'Deserializing process data'\n+      decoded = JSON.parse(data)\n+\n+      name = decoded['shard'].to_s ||\n+        fail(\"Instance JSON data missing 'shard' key\")", "path": "lib/synapse/service_watcher/zookeeper_aurora.rb", "position": 60, "original_position": 60, "commit_id": "39037ceec3b742002ba64fa789f3dda88b28fdd0", "original_commit_id": "39037ceec3b742002ba64fa789f3dda88b28fdd0", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "can you raise a ValueError to be consistent with the zk watcher?\n", "created_at": "2015-10-14T13:53:52Z", "updated_at": "2015-10-14T13:53:52Z", "html_url": "https://github.com/airbnb/synapse/pull/104#discussion_r41995295", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/104", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41995295"}, "html": {"href": "https://github.com/airbnb/synapse/pull/104#discussion_r41995295"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/104"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41995295/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41996490", "pull_request_review_id": null, "id": 41996490, "diff_hunk": "@@ -0,0 +1,76 @@\n+# encoding: utf-8\n+#\n+# Variant of the Zookeeper service watcher that works with Apache Aurora\n+# service announcements.\n+#\n+# Parameters:\n+#   hosts: list of zookeeper hosts to query (List of Strings, required)\n+#   path: \"/path/to/serverset/in/zookeeper\" (String, required)\n+#   port_name: Named service endpoint (String, optional)\n+#\n+# If port_name is omitted, uses the default serviceEndpoint port.\n+\n+# zk node data looks like this:\n+#\n+# {\n+#   \"additionalEndpoints\": {\n+#     \"aurora\": {\n+#       \"host\": \"somehostname\",\n+#       \"port\": 31943\n+#     },\n+#     \"http\": {\n+#       \"host\": \"somehostname\",\n+#       \"port\": 31943\n+#     },\n+#     \"otherport\": {\n+#       \"host\": \"somehostname\",\n+#       \"port\": 31944\n+#     }\n+#   },\n+#   \"serviceEndpoint\": {\n+#     \"host\": \"somehostname\",\n+#     \"port\": 31943\n+#   },\n+#   \"shard\": 0,\n+#   \"status\": \"ALIVE\"\n+# }\n+#\n+\n+require 'synapse/service_watcher/zookeeper'\n+\n+module Synapse\n+  # Watcher for Zookeeper announcements from Apache Aurora\n+  class ZookeeperAuroraWatcher < Synapse::ZookeeperWatcher\n+    def validate_discovery_opts\n+      @discovery['method'] == 'zookeeper_aurora' ||\n+        fail(ArgumentError,\n+             \"Invalid discovery method: #{@discovery['method']}\")\n+      @discovery['hosts'] ||\n+        fail(ArgumentError,\n+             \"Missing or invalid zookeeper host for service #{@name}\")\n+      @discovery['path'] ||\n+        fail(ArgumentError, \"Invalid zookeeper path for service #{@name}\")\n+    end\n+\n+    def deserialize_service_instance(data)\n+      log.debug 'Deserializing process data'\n+      decoded = JSON.parse(data)\n+\n+      name = decoded['shard'].to_s ||\n+        fail(\"Instance JSON data missing 'shard' key\")\n+\n+      hostport = if @discovery['port_name']\n+                   decoded['additionalEndpoints'][@discovery['port_name']] ||\n+                     fail(\"Endpoint '#{@discovery['port_name']}' not found \" \\\n+                          'in instance JSON data')\n+                 else\n+                   decoded['serviceEndpoint']\n+                 end\n+\n+      host = hostport['host'] || fail(\"Instance JSON data missing 'host' key\")\n+      port = hostport['port'] || fail(\"Instance JSON data missing 'port' key\")\n+\n+      [host, port, name]", "path": "lib/synapse/service_watcher/zookeeper_aurora.rb", "position": 73, "original_position": 73, "commit_id": "39037ceec3b742002ba64fa789f3dda88b28fdd0", "original_commit_id": "39037ceec3b742002ba64fa789f3dda88b28fdd0", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "The interface for this function has changed in master, and I'll make a PR to support haproxy_server_options so we only have to update this once. The spec for service registration data is now roughly defined by https://github.com/airbnb/synapse/blob/master/lib/synapse/service_watcher/README.md#backend-interface\n\nJust a heads up.\n", "created_at": "2015-10-14T14:02:21Z", "updated_at": "2015-10-14T14:02:21Z", "html_url": "https://github.com/airbnb/synapse/pull/104#discussion_r41996490", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/104", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41996490"}, "html": {"href": "https://github.com/airbnb/synapse/pull/104#discussion_r41996490"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/104"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41996490/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41996555", "pull_request_review_id": null, "id": 41996555, "diff_hunk": "@@ -0,0 +1,76 @@\n+# encoding: utf-8\n+#\n+# Variant of the Zookeeper service watcher that works with Apache Aurora\n+# service announcements.\n+#\n+# Parameters:\n+#   hosts: list of zookeeper hosts to query (List of Strings, required)\n+#   path: \"/path/to/serverset/in/zookeeper\" (String, required)\n+#   port_name: Named service endpoint (String, optional)\n+#\n+# If port_name is omitted, uses the default serviceEndpoint port.\n+\n+# zk node data looks like this:\n+#\n+# {\n+#   \"additionalEndpoints\": {\n+#     \"aurora\": {\n+#       \"host\": \"somehostname\",\n+#       \"port\": 31943\n+#     },\n+#     \"http\": {\n+#       \"host\": \"somehostname\",\n+#       \"port\": 31943\n+#     },\n+#     \"otherport\": {\n+#       \"host\": \"somehostname\",\n+#       \"port\": 31944\n+#     }\n+#   },\n+#   \"serviceEndpoint\": {\n+#     \"host\": \"somehostname\",\n+#     \"port\": 31943\n+#   },\n+#   \"shard\": 0,\n+#   \"status\": \"ALIVE\"", "path": "lib/synapse/service_watcher/zookeeper_aurora.rb", "position": 35, "original_position": 35, "commit_id": "39037ceec3b742002ba64fa789f3dda88b28fdd0", "original_commit_id": "39037ceec3b742002ba64fa789f3dda88b28fdd0", "user": {"login": "StephanErb", "id": 483730, "avatar_url": "https://avatars2.githubusercontent.com/u/483730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/StephanErb", "html_url": "https://github.com/StephanErb", "followers_url": "https://api.github.com/users/StephanErb/followers", "following_url": "https://api.github.com/users/StephanErb/following{/other_user}", "gists_url": "https://api.github.com/users/StephanErb/gists{/gist_id}", "starred_url": "https://api.github.com/users/StephanErb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/StephanErb/subscriptions", "organizations_url": "https://api.github.com/users/StephanErb/orgs", "repos_url": "https://api.github.com/users/StephanErb/repos", "events_url": "https://api.github.com/users/StephanErb/events{/privacy}", "received_events_url": "https://api.github.com/users/StephanErb/received_events", "type": "User", "site_admin": false}, "body": "Looking at Aurora, I am not sure if the status is ever toggled. Aurora seems to simply remove the znode when the registered server disconnects. I'd say we leave it out for now.\n", "created_at": "2015-10-14T14:02:42Z", "updated_at": "2015-10-14T14:02:42Z", "html_url": "https://github.com/airbnb/synapse/pull/104#discussion_r41996555", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/104", "author_association": "NONE", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41996555"}, "html": {"href": "https://github.com/airbnb/synapse/pull/104#discussion_r41996555"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/104"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41996555/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41997824", "pull_request_review_id": null, "id": 41997824, "diff_hunk": "@@ -0,0 +1,76 @@\n+# encoding: utf-8\n+#\n+# Variant of the Zookeeper service watcher that works with Apache Aurora\n+# service announcements.\n+#\n+# Parameters:\n+#   hosts: list of zookeeper hosts to query (List of Strings, required)\n+#   path: \"/path/to/serverset/in/zookeeper\" (String, required)\n+#   port_name: Named service endpoint (String, optional)", "path": "lib/synapse/service_watcher/zookeeper_aurora.rb", "position": 9, "original_position": 9, "commit_id": "39037ceec3b742002ba64fa789f3dda88b28fdd0", "original_commit_id": "39037ceec3b742002ba64fa789f3dda88b28fdd0", "user": {"login": "StephanErb", "id": 483730, "avatar_url": "https://avatars2.githubusercontent.com/u/483730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/StephanErb", "html_url": "https://github.com/StephanErb", "followers_url": "https://api.github.com/users/StephanErb/followers", "following_url": "https://api.github.com/users/StephanErb/following{/other_user}", "gists_url": "https://api.github.com/users/StephanErb/gists{/gist_id}", "starred_url": "https://api.github.com/users/StephanErb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/StephanErb/subscriptions", "organizations_url": "https://api.github.com/users/StephanErb/orgs", "repos_url": "https://api.github.com/users/StephanErb/repos", "events_url": "https://api.github.com/users/StephanErb/events{/privacy}", "received_events_url": "https://api.github.com/users/StephanErb/received_events", "type": "User", "site_admin": false}, "body": "Serversets allow you to register multiple ports for your service. For example, you can say that your service has an `http`, an `https`and a `admin` port. This option can be used to specify which port shall actually be used by synapse.\n", "created_at": "2015-10-14T14:12:11Z", "updated_at": "2015-10-14T14:12:11Z", "html_url": "https://github.com/airbnb/synapse/pull/104#discussion_r41997824", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/104", "author_association": "NONE", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41997824"}, "html": {"href": "https://github.com/airbnb/synapse/pull/104#discussion_r41997824"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/104"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/41997824/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/42006100", "pull_request_review_id": null, "id": 42006100, "diff_hunk": "@@ -0,0 +1,76 @@\n+# encoding: utf-8\n+#\n+# Variant of the Zookeeper service watcher that works with Apache Aurora\n+# service announcements.\n+#\n+# Parameters:\n+#   hosts: list of zookeeper hosts to query (List of Strings, required)\n+#   path: \"/path/to/serverset/in/zookeeper\" (String, required)\n+#   port_name: Named service endpoint (String, optional)", "path": "lib/synapse/service_watcher/zookeeper_aurora.rb", "position": 9, "original_position": 9, "commit_id": "39037ceec3b742002ba64fa789f3dda88b28fdd0", "original_commit_id": "39037ceec3b742002ba64fa789f3dda88b28fdd0", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "I see, ok I'll leave the naming up to you guys :-)\n", "created_at": "2015-10-14T15:09:08Z", "updated_at": "2015-10-14T15:09:08Z", "html_url": "https://github.com/airbnb/synapse/pull/104#discussion_r42006100", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/104", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/42006100"}, "html": {"href": "https://github.com/airbnb/synapse/pull/104#discussion_r42006100"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/104"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/42006100/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/46739265", "pull_request_review_id": null, "id": 46739265, "diff_hunk": "@@ -41,6 +41,21 @@ def validate_discovery_opts\n         unless @discovery['hosts']\n       raise ArgumentError, \"invalid zookeeper path for service #{@name}\" \\\n         unless @discovery['path']\n+      if @discovery['decode']", "path": "lib/synapse/service_watcher/zookeeper.rb", "position": null, "original_position": 4, "commit_id": "18f7d3fb005f2d68a23c7150beae7d2ff07ab9a1", "original_commit_id": "97f496641bede82b0ac7d311a82455c18f8f1222", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "I think we need to set @decode_method even if we don't have a decode (i.e. the default is zookeeper)\n", "created_at": "2015-12-04T22:17:53Z", "updated_at": "2015-12-09T21:20:15Z", "html_url": "https://github.com/airbnb/synapse/pull/148#discussion_r46739265", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/148", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/46739265"}, "html": {"href": "https://github.com/airbnb/synapse/pull/148#discussion_r46739265"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/148"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/46739265/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/46739365", "pull_request_review_id": null, "id": 46739365, "diff_hunk": "@@ -41,6 +41,21 @@ def validate_discovery_opts\n         unless @discovery['hosts']\n       raise ArgumentError, \"invalid zookeeper path for service #{@name}\" \\\n         unless @discovery['path']\n+      if @discovery['decode']\n+        raise ArgumentError, \"missing or invalid decode method #{@discovery['decode']}\" \\\n+          unless @discovery['decode']['method']\n+        if @discovery['decode']['method'] == 'aurora'", "path": "lib/synapse/service_watcher/zookeeper.rb", "position": null, "original_position": 7, "commit_id": "18f7d3fb005f2d68a23c7150beae7d2ff07ab9a1", "original_commit_id": "97f496641bede82b0ac7d311a82455c18f8f1222", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "I feel like this code should live in the constructor and be factored out into a function e.g. parse_decode_options or something. Feel free to go \"meh\" and I'll do it in a follow up.\n", "created_at": "2015-12-04T22:18:48Z", "updated_at": "2015-12-09T21:20:15Z", "html_url": "https://github.com/airbnb/synapse/pull/148#discussion_r46739365", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/148", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/46739365"}, "html": {"href": "https://github.com/airbnb/synapse/pull/148#discussion_r46739365"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/148"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/46739365/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/48336225", "pull_request_review_id": null, "id": 48336225, "diff_hunk": "@@ -141,25 +141,38 @@ Each value in the services hash is also a hash, and should contain the following\n We've included a number of `watchers` which provide service discovery.\n Put these into the `discovery` section of the service hash, with these options:\n \n-##### Stub #####\n+##### Base #####\n \n-The stub watcher is useful in situations where you only want to use the servers in the `default_servers` list.\n+The base watcher is useful in situations where you only want to use the servers in the `default_servers` list.\n It has only one option:\n \n-* `method`: stub\n+* `method`: base\n \n ##### Zookeeper #####\n \n This watcher retrieves a list of servers from zookeeper.\n-It takes the following options:\n+It takes the following mandatory arguments:\n \n * `method`: zookeeper\n * `path`: the zookeeper path where ephemeral nodes will be created for each available service server\n * `hosts`: the list of zookeeper servers to query\n \n The watcher assumes that each node under `path` represents a service server.\n-Synapse attempts to decode the data in each of these nodes using JSON and also using Thrift under the standard Twitter service encoding.\n-We assume that the data contains a hostname and a port for service servers.\n+\n+The following arguments are optional:\n+\n+* `decode`: A hash containing configuration for how to decode the data found in zookeeper.\n+\n+###### Decoding service nodes ######\n+Synapse attempts to decode the data in each of these nodes using JSON and you can control how it is decoded with the `decode` argument. If provided, the `decode` hash should contain the following:\n+\n+* `method` (one of ['nerve', 'aurora'], default: 'nerve'): The kind of data to expect in zookeeper\n+* `port_name` (default: nil): If using the 'aurora' method, this controls which of the `additionalEndpoints` is chosen.\n+\n+If the `method` is `nerve`, then we expect to find nerve registrations with a `host` and a `port`.\n+\n+If the `method` is `aurora` then we expect to find aurora registrations with a `serviceEndpoint` and optionally one or more `additionalEndpoints`.", "path": "README.md", "position": null, "original_position": 40, "commit_id": "6f8f081932ec324ab0f604c93c953b606228f6e6", "original_commit_id": "a84e6cc198fb19f0444448f4b0432eb871f77346", "user": {"login": "benley", "id": 1432730, "avatar_url": "https://avatars1.githubusercontent.com/u/1432730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benley", "html_url": "https://github.com/benley", "followers_url": "https://api.github.com/users/benley/followers", "following_url": "https://api.github.com/users/benley/following{/other_user}", "gists_url": "https://api.github.com/users/benley/gists{/gist_id}", "starred_url": "https://api.github.com/users/benley/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benley/subscriptions", "organizations_url": "https://api.github.com/users/benley/orgs", "repos_url": "https://api.github.com/users/benley/repos", "events_url": "https://api.github.com/users/benley/events{/privacy}", "received_events_url": "https://api.github.com/users/benley/received_events", "type": "User", "site_admin": false}, "body": "might be more appropriate to call this method \"serverset\", since it's actually the finagle serverset format that aurora happens to share.\n", "created_at": "2015-12-23T10:47:50Z", "updated_at": "2015-12-23T16:43:49Z", "html_url": "https://github.com/airbnb/synapse/pull/153#discussion_r48336225", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/153", "author_association": "NONE", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/48336225"}, "html": {"href": "https://github.com/airbnb/synapse/pull/153#discussion_r48336225"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/153"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/48336225/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/48360129", "pull_request_review_id": null, "id": 48360129, "diff_hunk": "@@ -141,25 +141,38 @@ Each value in the services hash is also a hash, and should contain the following\n We've included a number of `watchers` which provide service discovery.\n Put these into the `discovery` section of the service hash, with these options:\n \n-##### Stub #####\n+##### Base #####\n \n-The stub watcher is useful in situations where you only want to use the servers in the `default_servers` list.\n+The base watcher is useful in situations where you only want to use the servers in the `default_servers` list.\n It has only one option:\n \n-* `method`: stub\n+* `method`: base\n \n ##### Zookeeper #####\n \n This watcher retrieves a list of servers from zookeeper.\n-It takes the following options:\n+It takes the following mandatory arguments:\n \n * `method`: zookeeper\n * `path`: the zookeeper path where ephemeral nodes will be created for each available service server\n * `hosts`: the list of zookeeper servers to query\n \n The watcher assumes that each node under `path` represents a service server.\n-Synapse attempts to decode the data in each of these nodes using JSON and also using Thrift under the standard Twitter service encoding.\n-We assume that the data contains a hostname and a port for service servers.\n+\n+The following arguments are optional:\n+\n+* `decode`: A hash containing configuration for how to decode the data found in zookeeper.\n+\n+###### Decoding service nodes ######\n+Synapse attempts to decode the data in each of these nodes using JSON and you can control how it is decoded with the `decode` argument. If provided, the `decode` hash should contain the following:\n+\n+* `method` (one of ['nerve', 'aurora'], default: 'nerve'): The kind of data to expect in zookeeper\n+* `port_name` (default: nil): If using the 'aurora' method, this controls which of the `additionalEndpoints` is chosen.\n+\n+If the `method` is `nerve`, then we expect to find nerve registrations with a `host` and a `port`.\n+\n+If the `method` is `aurora` then we expect to find aurora registrations with a `serviceEndpoint` and optionally one or more `additionalEndpoints`.", "path": "README.md", "position": null, "original_position": 40, "commit_id": "6f8f081932ec324ab0f604c93c953b606228f6e6", "original_commit_id": "a84e6cc198fb19f0444448f4b0432eb871f77346", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Ok, from [the source](https://github.com/twitter/finagle/blob/master/finagle-serversets/src/main/scala/com/twitter/finagle/zookeeper/ZookeeperServerSetCluster.scala) it appears they select ports by \"endpointName\", so I'll do the same to be consistent.\n", "created_at": "2015-12-23T16:44:24Z", "updated_at": "2015-12-23T16:44:24Z", "html_url": "https://github.com/airbnb/synapse/pull/153#discussion_r48360129", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/153", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/48360129"}, "html": {"href": "https://github.com/airbnb/synapse/pull/153#discussion_r48360129"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/153"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/48360129/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/49788005", "pull_request_review_id": null, "id": 49788005, "diff_hunk": "@@ -686,7 +686,7 @@ def generate_frontend_stanza(watcher, config)\n       stanza = [\n         \"\\nfrontend #{watcher.name}\",\n         config.map {|c| \"\\t#{c}\"},\n-        \"\\tbind #{@opts['bind_address'] || 'localhost'}:#{watcher.haproxy['port']}\",\n+        \"\\tbind #{ watcher.haproxy['bind_address'] || @opts['bind_address'] || 'localhost'}:#{watcher.haproxy['port']}\",", "path": "lib/synapse/haproxy.rb", "position": 5, "original_position": 5, "commit_id": "77040b87847f446a7fcb9134844bd514b77008d6", "original_commit_id": "f71667419123d820b339d8c9f31158dffe845f14", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Let's use this as an opportunity to add a generate_frontend_stanza test to the haproxy_spec :-)\n", "created_at": "2016-01-14T21:29:44Z", "updated_at": "2016-01-15T19:54:53Z", "html_url": "https://github.com/airbnb/synapse/pull/156#discussion_r49788005", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/156", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/49788005"}, "html": {"href": "https://github.com/airbnb/synapse/pull/156#discussion_r49788005"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/156"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/49788005/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53061828", "pull_request_review_id": null, "id": 53061828, "diff_hunk": "@@ -109,5 +109,26 @@ def remove_arg(name)\n         expect(subject.backends).to eq(backends + default_servers)\n       end\n     end\n+\n+    context 'with label_filter set' do\n+      labeled_backends = [", "path": "spec/lib/synapse/service_watcher_base_spec.rb", "position": null, "original_position": 6, "commit_id": "e794199e0d4e7f83d95cdb3c7737211898ef8200", "original_commit_id": "49b46789c80afeb694a06bc677f761a1b389a292", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "this should be initialized in a `let`.\n\nalso, for more clarity, might be nice to do something like this:\n\n``` ruby\nlet(:matching_labeled_backends) { [] }\nlet(:non_matching_labeled_backends) { [] }\nlet(:non_labeled_backends) { [] }\n```\n\nthen you can do\n\n``` ruby\nsubject.send(:set_backends, matching_labeled_backends + non_matching + non_labeled)\nexpect(subject.backends).to contain_exactly(matching_labeled_backends)\n```\n", "created_at": "2016-02-16T19:14:34Z", "updated_at": "2016-02-16T20:01:17Z", "html_url": "https://github.com/airbnb/synapse/pull/164#discussion_r53061828", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/164", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53061828"}, "html": {"href": "https://github.com/airbnb/synapse/pull/164#discussion_r53061828"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/164"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53061828/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53069335", "pull_request_review_id": null, "id": 53069335, "diff_hunk": "@@ -109,5 +109,26 @@ def remove_arg(name)\n         expect(subject.backends).to eq(backends + default_servers)\n       end\n     end\n+\n+    context 'with label_filter set' do\n+      labeled_backends = [", "path": "spec/lib/synapse/service_watcher_base_spec.rb", "position": null, "original_position": 6, "commit_id": "e794199e0d4e7f83d95cdb3c7737211898ef8200", "original_commit_id": "49b46789c80afeb694a06bc677f761a1b389a292", "user": {"login": "scarletmeow", "id": 6128469, "avatar_url": "https://avatars2.githubusercontent.com/u/6128469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarletmeow", "html_url": "https://github.com/scarletmeow", "followers_url": "https://api.github.com/users/scarletmeow/followers", "following_url": "https://api.github.com/users/scarletmeow/following{/other_user}", "gists_url": "https://api.github.com/users/scarletmeow/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarletmeow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarletmeow/subscriptions", "organizations_url": "https://api.github.com/users/scarletmeow/orgs", "repos_url": "https://api.github.com/users/scarletmeow/repos", "events_url": "https://api.github.com/users/scarletmeow/events{/privacy}", "received_events_url": "https://api.github.com/users/scarletmeow/received_events", "type": "User", "site_admin": false}, "body": "That's a great suggestion. Done!\n", "created_at": "2016-02-16T20:01:20Z", "updated_at": "2016-02-16T20:01:20Z", "html_url": "https://github.com/airbnb/synapse/pull/164#discussion_r53069335", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/164", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53069335"}, "html": {"href": "https://github.com/airbnb/synapse/pull/164#discussion_r53069335"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/164"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53069335/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53087996", "pull_request_review_id": null, "id": 53087996, "diff_hunk": "@@ -259,6 +259,7 @@ This section is its own hash, which should contain the following keys:\n * `backend_name`: The name of the generated HAProxy backend for this service\n   (defaults to the service's key in the `services` section)\n * `listen`: these lines will be parsed and placed in the correct `frontend`/`backend` section as applicable; you can put lines which are the same for the frontend and backend here.\n+* `backend_order`: optional: how backends should be ordered in the `backend` stanza. (default is shuffling). Setting to `asc` means sorting backends in ascending alphabetical order before generating stanza. `desc` means descending alphabetical order. `no_shuffle` means no shuffling or soring.", "path": "README.md", "position": null, "original_position": 4, "commit_id": "fc81d9afa559c1fd45de5313aececfa69dcd73ba", "original_commit_id": "7d49fdccf1e1122d7339ddf733c1bcc450f5aadd", "user": {"login": "scarletmeow", "id": 6128469, "avatar_url": "https://avatars2.githubusercontent.com/u/6128469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarletmeow", "html_url": "https://github.com/scarletmeow", "followers_url": "https://api.github.com/users/scarletmeow/followers", "following_url": "https://api.github.com/users/scarletmeow/following{/other_user}", "gists_url": "https://api.github.com/users/scarletmeow/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarletmeow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarletmeow/subscriptions", "organizations_url": "https://api.github.com/users/scarletmeow/orgs", "repos_url": "https://api.github.com/users/scarletmeow/repos", "events_url": "https://api.github.com/users/scarletmeow/events{/privacy}", "received_events_url": "https://api.github.com/users/scarletmeow/received_events", "type": "User", "site_admin": false}, "body": "nit: should be `shuffling or sorting`\n", "created_at": "2016-02-16T22:11:23Z", "updated_at": "2016-02-17T08:27:35Z", "html_url": "https://github.com/airbnb/synapse/pull/166#discussion_r53087996", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/166", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53087996"}, "html": {"href": "https://github.com/airbnb/synapse/pull/166#discussion_r53087996"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/166"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53087996/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53298571", "pull_request_review_id": null, "id": 53298571, "diff_hunk": "@@ -261,6 +261,7 @@ This section is its own hash, which should contain the following keys:\n * `listen`: these lines will be parsed and placed in the correct `frontend`/`backend` section as applicable; you can put lines which are the same for the frontend and backend here.\n * `backend_order`: optional: how backends should be ordered in the `backend` stanza. (default is shuffling). Setting to `asc` means sorting backends in ascending alphabetical order before generating stanza. `desc` means descending alphabetical order. `no_shuffle` means no shuffling or sorting.\n * `shared_frontend`: optional: haproxy configuration directives for a shared http frontend (see below)\n+* `cookie_hash_servernames`: optional: if true, synapse hashes backend names on cookie value assignation of your discovered backends, useful in http mode and when you want to use haproxy cookie feature but you do not want that your end users receive a Set-Cookie with your server name and ip readable in clear", "path": "README.md", "position": null, "original_position": 4, "commit_id": "99f8ce96f953fcb1d0dbf9d63ce9463a81122f85", "original_commit_id": "0209551c7189fb47c7ad51328b3c9c30b4ddfd5c", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "What if we called this `cookie_value_method` or some such and had it take values `'name'` (the default) or `'hash'`? That way if we need to support additional cookie values that can't be supplied in server_options we can.  \n", "created_at": "2016-02-18T10:53:15Z", "updated_at": "2016-02-23T10:48:18Z", "html_url": "https://github.com/airbnb/synapse/pull/171#discussion_r53298571", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/171", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53298571"}, "html": {"href": "https://github.com/airbnb/synapse/pull/171#discussion_r53298571"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/171"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53298571/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53576156", "pull_request_review_id": null, "id": 53576156, "diff_hunk": "@@ -1,12 +1,18 @@\n require 'fileutils'\n require 'json'\n require 'socket'\n+require 'digest/sha1'\n \n module Synapse\n   class Haproxy\n     include Logging\n     attr_reader :opts, :name\n \n+    @@cookie_value_methods = [", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 11, "commit_id": "99f8ce96f953fcb1d0dbf9d63ce9463a81122f85", "original_commit_id": "acea6bbc3d9ca17a848b8dd9dce5654dbc04b909", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Let's not actually validate this. Similar to `backend_order` option let's just have a case statement with an else that provides the default behavior.\n", "created_at": "2016-02-21T23:19:06Z", "updated_at": "2016-02-23T10:48:18Z", "html_url": "https://github.com/airbnb/synapse/pull/171#discussion_r53576156", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/171", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53576156"}, "html": {"href": "https://github.com/airbnb/synapse/pull/171#discussion_r53576156"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/171"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53576156/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53576170", "pull_request_review_id": null, "id": 53576170, "diff_hunk": "@@ -734,13 +740,28 @@ def generate_backend_stanza(watcher, config)\n       else\n         backends.keys.shuffle\n       end\n+\n+      cookie_value_method = \"name\"", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 24, "commit_id": "99f8ce96f953fcb1d0dbf9d63ce9463a81122f85", "original_commit_id": "acea6bbc3d9ca17a848b8dd9dce5654dbc04b909", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "This seems redundant to the block down below. Let's just do the case down below (I'll comment with a suggestion)\n", "created_at": "2016-02-21T23:19:46Z", "updated_at": "2016-02-23T10:48:18Z", "html_url": "https://github.com/airbnb/synapse/pull/171#discussion_r53576170", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/171", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53576170"}, "html": {"href": "https://github.com/airbnb/synapse/pull/171#discussion_r53576170"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/171"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53576170/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53576252", "pull_request_review_id": null, "id": 53576252, "diff_hunk": "@@ -734,13 +740,28 @@ def generate_backend_stanza(watcher, config)\n       else\n         backends.keys.shuffle\n       end\n+\n+      cookie_value_method = \"name\"\n+\n+      if watcher.haproxy['cookie_value_method'] && @@cookie_value_methods.any? {|allowed_value| \n+          allowed_value == watcher.haproxy['cookie_value_method']\n+        }\n+        cookie_value_method = watcher.haproxy['cookie_value_method']\n+      end\n+\n       stanza = [\n         \"\\nbackend #{watcher.haproxy.fetch('backend_name', watcher.name)}\",\n         config.map {|c| \"\\t#{c}\"},\n         keys.map {|backend_name|\n           backend = backends[backend_name]\n           b = \"\\tserver #{backend_name} #{backend['host']}:#{backend['port']}\"\n-          b = \"#{b} cookie #{backend_name}\" unless config.include?('mode tcp')\n+          unless config.include?('mode tcp')", "path": "lib/synapse/haproxy.rb", "position": 20, "original_position": 39, "commit_id": "99f8ce96f953fcb1d0dbf9d63ce9463a81122f85", "original_commit_id": "acea6bbc3d9ca17a848b8dd9dce5654dbc04b909", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "How about something like:\n\n``` ruby\nunless config.include?('mode tcp')\n  b = case watcher.haproxy['cookie_value_method']\n  when 'hash'\n    b = \"#{b} cookie #{Digest::SHA1.hexdigest(backend_name)}\"\n  else\n    b = \"#{b} cookie #{backend_name}\"\n  end\nend\n```\n\nTo be consistent with how we do the shuff selection up above (it's probably a good idea to validate these things, but I think this part of the code is the wrong place to do it)\n", "created_at": "2016-02-21T23:24:58Z", "updated_at": "2016-02-23T10:48:18Z", "html_url": "https://github.com/airbnb/synapse/pull/171#discussion_r53576252", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/171", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53576252"}, "html": {"href": "https://github.com/airbnb/synapse/pull/171#discussion_r53576252"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/171"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53576252/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53507496", "pull_request_review_id": null, "id": 53507496, "diff_hunk": "@@ -741,6 +742,10 @@ def generate_backend_stanza(watcher, config)\n           backend = backends[backend_name]\n           b = \"\\tserver #{backend_name} #{backend['host']}:#{backend['port']}\"\n           b = \"#{b} cookie #{backend_name}\" unless config.include?('mode tcp')\n+          if !@opts['ignore_weights'] && backend.has_key?('weight')\n+            weight = backend['weight'].to_i\n+            b = \"#{b} weight #{weight}\"", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 14, "commit_id": "c3bcd295a1c7f5c579b301b7f37bc74617c4b16a", "original_commit_id": "06c84334b48f0c0bee2365dd2320dfe97b5347ef", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "So I believe that HAProxy will use the last weight provided. If that's true I think this should probably slot this in between the HAProxy backend `server_options` and the server `haproxy_server_options` level.\n", "created_at": "2016-02-19T19:37:38Z", "updated_at": "2016-02-24T01:34:36Z", "html_url": "https://github.com/airbnb/synapse/pull/174#discussion_r53507496", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/174", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53507496"}, "html": {"href": "https://github.com/airbnb/synapse/pull/174#discussion_r53507496"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/174"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53507496/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53507555", "pull_request_review_id": null, "id": 53507555, "diff_hunk": "@@ -261,6 +261,7 @@ This section is its own hash, which should contain the following keys:\n * `listen`: these lines will be parsed and placed in the correct `frontend`/`backend` section as applicable; you can put lines which are the same for the frontend and backend here.\n * `backend_order`: optional: how backends should be ordered in the `backend` stanza. (default is shuffling). Setting to `asc` means sorting backends in ascending alphabetical order before generating stanza. `desc` means descending alphabetical order. `no_shuffle` means no shuffling or sorting.\n * `shared_frontend`: optional: haproxy configuration directives for a shared http frontend (see below)\n+* `ignore_weights`: optional: stops haproxy backend 'weight' options being generated, even if the Nerve registrations contain this information. This will cause all backend servers to be treated equally by haproxy. This defaults to true so weights will *NOT* be used by default. ", "path": "README.md", "position": null, "original_position": 4, "commit_id": "c3bcd295a1c7f5c579b301b7f37bc74617c4b16a", "original_commit_id": "06c84334b48f0c0bee2365dd2320dfe97b5347ef", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Do you have strong feelings about this being an option? I'd prefer for folks to just not register weights unless they want them reflected in HAProxy.\n\nYea I know the other PR did it, but I think it's maybe not the best option...\n", "created_at": "2016-02-19T19:38:14Z", "updated_at": "2016-02-24T01:34:36Z", "html_url": "https://github.com/airbnb/synapse/pull/174#discussion_r53507555", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/174", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53507555"}, "html": {"href": "https://github.com/airbnb/synapse/pull/174#discussion_r53507555"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/174"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53507555/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53507922", "pull_request_review_id": null, "id": 53507922, "diff_hunk": "@@ -117,7 +117,7 @@ def set_backends(new_backends)\n       # Aggregate and deduplicate all potential backend service instances.\n       new_backends = (new_backends + @default_servers) if @keep_default_servers\n       new_backends = new_backends.uniq {|b|\n-        [b['host'], b['port'], b.fetch('name', '')]\n+        [b['host'], b['port'], b.fetch('name', ''), b.fetch('weight', 1)]", "path": "lib/synapse/service_watcher/base.rb", "position": null, "original_position": 5, "commit_id": "c3bcd295a1c7f5c579b301b7f37bc74617c4b16a", "original_commit_id": "06c84334b48f0c0bee2365dd2320dfe97b5347ef", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "This is slightly surprising behavior to me because it means while folks are switching weights (i.e. old nerve is running with weight=10 and new nerve is running with weight=20) we'd get both backends. I think I prefer not uniqing on weight (so we'll pick one backend or the other). What do you think? \n", "created_at": "2016-02-19T19:41:04Z", "updated_at": "2016-02-24T01:34:36Z", "html_url": "https://github.com/airbnb/synapse/pull/174#discussion_r53507922", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/174", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53507922"}, "html": {"href": "https://github.com/airbnb/synapse/pull/174#discussion_r53507922"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/174"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53507922/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53508380", "pull_request_review_id": null, "id": 53508380, "diff_hunk": "@@ -261,6 +261,7 @@ This section is its own hash, which should contain the following keys:\n * `listen`: these lines will be parsed and placed in the correct `frontend`/`backend` section as applicable; you can put lines which are the same for the frontend and backend here.\n * `backend_order`: optional: how backends should be ordered in the `backend` stanza. (default is shuffling). Setting to `asc` means sorting backends in ascending alphabetical order before generating stanza. `desc` means descending alphabetical order. `no_shuffle` means no shuffling or sorting.\n * `shared_frontend`: optional: haproxy configuration directives for a shared http frontend (see below)\n+* `ignore_weights`: optional: stops haproxy backend 'weight' options being generated, even if the Nerve registrations contain this information. This will cause all backend servers to be treated equally by haproxy. This defaults to true so weights will *NOT* be used by default. ", "path": "README.md", "position": null, "original_position": 4, "commit_id": "c3bcd295a1c7f5c579b301b7f37bc74617c4b16a", "original_commit_id": "06c84334b48f0c0bee2365dd2320dfe97b5347ef", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "i am also not a big fan of this option\n", "created_at": "2016-02-19T19:44:32Z", "updated_at": "2016-02-24T01:34:36Z", "html_url": "https://github.com/airbnb/synapse/pull/174#discussion_r53508380", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/174", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53508380"}, "html": {"href": "https://github.com/airbnb/synapse/pull/174#discussion_r53508380"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/174"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53508380/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53509377", "pull_request_review_id": null, "id": 53509377, "diff_hunk": "@@ -741,6 +742,10 @@ def generate_backend_stanza(watcher, config)\n           backend = backends[backend_name]\n           b = \"\\tserver #{backend_name} #{backend['host']}:#{backend['port']}\"\n           b = \"#{b} cookie #{backend_name}\" unless config.include?('mode tcp')\n+          if !@opts['ignore_weights'] && backend.has_key?('weight')\n+            weight = backend['weight'].to_i\n+            b = \"#{b} weight #{weight}\"", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 14, "commit_id": "c3bcd295a1c7f5c579b301b7f37bc74617c4b16a", "original_commit_id": "06c84334b48f0c0bee2365dd2320dfe97b5347ef", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "or maybe we should bail of server options also contains weight? i don't have a strong feeling as to what the precedence order should be... at least printing a warning to logs when there are contradictory options seems like a good idea.\n\nthis is probably indicating that it's time to refactor this function, it's getting pretty big.\n", "created_at": "2016-02-19T19:49:19Z", "updated_at": "2016-02-24T01:34:36Z", "html_url": "https://github.com/airbnb/synapse/pull/174#discussion_r53509377", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/174", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53509377"}, "html": {"href": "https://github.com/airbnb/synapse/pull/174#discussion_r53509377"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/174"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53509377/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53509634", "pull_request_review_id": null, "id": 53509634, "diff_hunk": "@@ -117,7 +117,7 @@ def set_backends(new_backends)\n       # Aggregate and deduplicate all potential backend service instances.\n       new_backends = (new_backends + @default_servers) if @keep_default_servers\n       new_backends = new_backends.uniq {|b|\n-        [b['host'], b['port'], b.fetch('name', '')]\n+        [b['host'], b['port'], b.fetch('name', ''), b.fetch('weight', 1)]", "path": "lib/synapse/service_watcher/base.rb", "position": null, "original_position": 5, "commit_id": "c3bcd295a1c7f5c579b301b7f37bc74617c4b16a", "original_commit_id": "06c84334b48f0c0bee2365dd2320dfe97b5347ef", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "we should probably either unique on a strictly limited set of properties (just host, port, possibly name) or on all of the possible properties.\n", "created_at": "2016-02-19T19:51:14Z", "updated_at": "2016-02-24T01:34:36Z", "html_url": "https://github.com/airbnb/synapse/pull/174#discussion_r53509634", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/174", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53509634"}, "html": {"href": "https://github.com/airbnb/synapse/pull/174#discussion_r53509634"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/174"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53509634/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53510914", "pull_request_review_id": null, "id": 53510914, "diff_hunk": "@@ -741,6 +742,10 @@ def generate_backend_stanza(watcher, config)\n           backend = backends[backend_name]\n           b = \"\\tserver #{backend_name} #{backend['host']}:#{backend['port']}\"\n           b = \"#{b} cookie #{backend_name}\" unless config.include?('mode tcp')\n+          if !@opts['ignore_weights'] && backend.has_key?('weight')\n+            weight = backend['weight'].to_i\n+            b = \"#{b} weight #{weight}\"", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 14, "commit_id": "c3bcd295a1c7f5c579b301b7f37bc74617c4b16a", "original_commit_id": "06c84334b48f0c0bee2365dd2320dfe97b5347ef", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Yea, I noted a similar concern about complexity in #171. I'm not sure if these PRs are the right place for that though or if we should refactor it once they're merged.\n\nI agree printing a warning is useful, but I don't think we should bail out as I can understand use cases where someone might want to set some combination as a fallback scheme. `weight` and `haproxy_server_options` come from the registration side and `server_options` come from the discovery side. I can understand a situation where one side might have information the other does not.\n", "created_at": "2016-02-19T20:00:53Z", "updated_at": "2016-02-24T01:34:36Z", "html_url": "https://github.com/airbnb/synapse/pull/174#discussion_r53510914", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/174", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53510914"}, "html": {"href": "https://github.com/airbnb/synapse/pull/174#discussion_r53510914"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/174"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53510914/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53518368", "pull_request_review_id": null, "id": 53518368, "diff_hunk": "@@ -261,6 +261,7 @@ This section is its own hash, which should contain the following keys:\n * `listen`: these lines will be parsed and placed in the correct `frontend`/`backend` section as applicable; you can put lines which are the same for the frontend and backend here.\n * `backend_order`: optional: how backends should be ordered in the `backend` stanza. (default is shuffling). Setting to `asc` means sorting backends in ascending alphabetical order before generating stanza. `desc` means descending alphabetical order. `no_shuffle` means no shuffling or sorting.\n * `shared_frontend`: optional: haproxy configuration directives for a shared http frontend (see below)\n+* `ignore_weights`: optional: stops haproxy backend 'weight' options being generated, even if the Nerve registrations contain this information. This will cause all backend servers to be treated equally by haproxy. This defaults to true so weights will *NOT* be used by default. ", "path": "README.md", "position": null, "original_position": 4, "commit_id": "c3bcd295a1c7f5c579b301b7f37bc74617c4b16a", "original_commit_id": "06c84334b48f0c0bee2365dd2320dfe97b5347ef", "user": {"login": "minkovich", "id": 4672120, "avatar_url": "https://avatars1.githubusercontent.com/u/4672120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/minkovich", "html_url": "https://github.com/minkovich", "followers_url": "https://api.github.com/users/minkovich/followers", "following_url": "https://api.github.com/users/minkovich/following{/other_user}", "gists_url": "https://api.github.com/users/minkovich/gists{/gist_id}", "starred_url": "https://api.github.com/users/minkovich/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/minkovich/subscriptions", "organizations_url": "https://api.github.com/users/minkovich/orgs", "repos_url": "https://api.github.com/users/minkovich/repos", "events_url": "https://api.github.com/users/minkovich/events{/privacy}", "received_events_url": "https://api.github.com/users/minkovich/received_events", "type": "User", "site_admin": false}, "body": "This is mainly for safety so people can rollout a new version without worrying about breaking something. I'm also not a fan of this option but it's kind of necessary unless you roll this into a major release. \n", "created_at": "2016-02-19T21:08:37Z", "updated_at": "2016-02-24T01:34:36Z", "html_url": "https://github.com/airbnb/synapse/pull/174#discussion_r53518368", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/174", "author_association": "NONE", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53518368"}, "html": {"href": "https://github.com/airbnb/synapse/pull/174#discussion_r53518368"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/174"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53518368/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53523658", "pull_request_review_id": null, "id": 53523658, "diff_hunk": "@@ -117,7 +117,7 @@ def set_backends(new_backends)\n       # Aggregate and deduplicate all potential backend service instances.\n       new_backends = (new_backends + @default_servers) if @keep_default_servers\n       new_backends = new_backends.uniq {|b|\n-        [b['host'], b['port'], b.fetch('name', '')]\n+        [b['host'], b['port'], b.fetch('name', ''), b.fetch('weight', 1)]", "path": "lib/synapse/service_watcher/base.rb", "position": null, "original_position": 5, "commit_id": "c3bcd295a1c7f5c579b301b7f37bc74617c4b16a", "original_commit_id": "06c84334b48f0c0bee2365dd2320dfe97b5347ef", "user": {"login": "minkovich", "id": 4672120, "avatar_url": "https://avatars1.githubusercontent.com/u/4672120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/minkovich", "html_url": "https://github.com/minkovich", "followers_url": "https://api.github.com/users/minkovich/followers", "following_url": "https://api.github.com/users/minkovich/following{/other_user}", "gists_url": "https://api.github.com/users/minkovich/gists{/gist_id}", "starred_url": "https://api.github.com/users/minkovich/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/minkovich/subscriptions", "organizations_url": "https://api.github.com/users/minkovich/orgs", "repos_url": "https://api.github.com/users/minkovich/repos", "events_url": "https://api.github.com/users/minkovich/events{/privacy}", "received_events_url": "https://api.github.com/users/minkovich/received_events", "type": "User", "site_admin": false}, "body": "@jolynch, you're right. Let me fix that and add another test. \n", "created_at": "2016-02-19T21:52:36Z", "updated_at": "2016-02-24T01:34:36Z", "html_url": "https://github.com/airbnb/synapse/pull/174#discussion_r53523658", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/174", "author_association": "NONE", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53523658"}, "html": {"href": "https://github.com/airbnb/synapse/pull/174#discussion_r53523658"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/174"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53523658/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53523834", "pull_request_review_id": null, "id": 53523834, "diff_hunk": "@@ -741,6 +742,10 @@ def generate_backend_stanza(watcher, config)\n           backend = backends[backend_name]\n           b = \"\\tserver #{backend_name} #{backend['host']}:#{backend['port']}\"\n           b = \"#{b} cookie #{backend_name}\" unless config.include?('mode tcp')\n+          if !@opts['ignore_weights'] && backend.has_key?('weight')\n+            weight = backend['weight'].to_i\n+            b = \"#{b} weight #{weight}\"", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 14, "commit_id": "c3bcd295a1c7f5c579b301b7f37bc74617c4b16a", "original_commit_id": "06c84334b48f0c0bee2365dd2320dfe97b5347ef", "user": {"login": "minkovich", "id": 4672120, "avatar_url": "https://avatars1.githubusercontent.com/u/4672120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/minkovich", "html_url": "https://github.com/minkovich", "followers_url": "https://api.github.com/users/minkovich/followers", "following_url": "https://api.github.com/users/minkovich/following{/other_user}", "gists_url": "https://api.github.com/users/minkovich/gists{/gist_id}", "starred_url": "https://api.github.com/users/minkovich/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/minkovich/subscriptions", "organizations_url": "https://api.github.com/users/minkovich/orgs", "repos_url": "https://api.github.com/users/minkovich/repos", "events_url": "https://api.github.com/users/minkovich/events{/privacy}", "received_events_url": "https://api.github.com/users/minkovich/received_events", "type": "User", "site_admin": false}, "body": "@igor47 and @jolynch, let me move these lines and add a warning when a conflict is detected. \n", "created_at": "2016-02-19T21:53:51Z", "updated_at": "2016-02-24T01:34:36Z", "html_url": "https://github.com/airbnb/synapse/pull/174#discussion_r53523834", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/174", "author_association": "NONE", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53523834"}, "html": {"href": "https://github.com/airbnb/synapse/pull/174#discussion_r53523834"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/174"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53523834/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53743488", "pull_request_review_id": null, "id": 53743488, "diff_hunk": "@@ -742,6 +743,14 @@ def generate_backend_stanza(watcher, config)\n           b = \"\\tserver #{backend_name} #{backend['host']}:#{backend['port']}\"\n           b = \"#{b} cookie #{backend_name}\" unless config.include?('mode tcp')\n           b = \"#{b} #{watcher.haproxy['server_options']}\" if watcher.haproxy['server_options']\n+          if !@opts['ignore_weights'] && backend.has_key?('weight')\n+            # Check if server_options already contains weight, is so log a warning\n+            if watcher.haproxy['server_options'].include? 'weight'\n+              log.info \"synapse: weight is defined by server_options and by nerve\"", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 15, "commit_id": "c3bcd295a1c7f5c579b301b7f37bc74617c4b16a", "original_commit_id": "d5ea7b047952f6753b14501b60d6a51bac213d6e", "user": {"login": "scarletmeow", "id": 6128469, "avatar_url": "https://avatars2.githubusercontent.com/u/6128469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarletmeow", "html_url": "https://github.com/scarletmeow", "followers_url": "https://api.github.com/users/scarletmeow/followers", "following_url": "https://api.github.com/users/scarletmeow/following{/other_user}", "gists_url": "https://api.github.com/users/scarletmeow/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarletmeow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarletmeow/subscriptions", "organizations_url": "https://api.github.com/users/scarletmeow/orgs", "repos_url": "https://api.github.com/users/scarletmeow/repos", "events_url": "https://api.github.com/users/scarletmeow/events{/privacy}", "received_events_url": "https://api.github.com/users/scarletmeow/received_events", "type": "User", "site_admin": false}, "body": "log.warn (nit)\n", "created_at": "2016-02-23T07:16:15Z", "updated_at": "2016-02-24T01:34:36Z", "html_url": "https://github.com/airbnb/synapse/pull/174#discussion_r53743488", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/174", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53743488"}, "html": {"href": "https://github.com/airbnb/synapse/pull/174#discussion_r53743488"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/174"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53743488/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53745142", "pull_request_review_id": null, "id": 53745142, "diff_hunk": "@@ -261,6 +261,7 @@ This section is its own hash, which should contain the following keys:\n * `listen`: these lines will be parsed and placed in the correct `frontend`/`backend` section as applicable; you can put lines which are the same for the frontend and backend here.\n * `backend_order`: optional: how backends should be ordered in the `backend` stanza. (default is shuffling). Setting to `asc` means sorting backends in ascending alphabetical order before generating stanza. `desc` means descending alphabetical order. `no_shuffle` means no shuffling or sorting.\n * `shared_frontend`: optional: haproxy configuration directives for a shared http frontend (see below)\n+* `ignore_weights`: optional: stops haproxy backend 'weight' options being generated, even if the Nerve registrations contain this information. This will cause all backend servers to be treated equally by haproxy. This defaults to true so weights will *NOT* be used by default. ", "path": "README.md", "position": null, "original_position": 4, "commit_id": "c3bcd295a1c7f5c579b301b7f37bc74617c4b16a", "original_commit_id": "06c84334b48f0c0bee2365dd2320dfe97b5347ef", "user": {"login": "scarletmeow", "id": 6128469, "avatar_url": "https://avatars2.githubusercontent.com/u/6128469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarletmeow", "html_url": "https://github.com/scarletmeow", "followers_url": "https://api.github.com/users/scarletmeow/followers", "following_url": "https://api.github.com/users/scarletmeow/following{/other_user}", "gists_url": "https://api.github.com/users/scarletmeow/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarletmeow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarletmeow/subscriptions", "organizations_url": "https://api.github.com/users/scarletmeow/orgs", "repos_url": "https://api.github.com/users/scarletmeow/repos", "events_url": "https://api.github.com/users/scarletmeow/events{/privacy}", "received_events_url": "https://api.github.com/users/scarletmeow/received_events", "type": "User", "site_admin": false}, "body": "`ignore_weights` doesn't seem very useful as a setting and it is confusing that the default is shipped in a disabled state. There isn't a similar disable switch for `haproxy_server_options` and that's way more powerful than the weights setting (rhetorical question: why not just set `haproxy_server_options` to `weight 10`?). \n\nIf the main concern is a breaking API change, then I would suggest bumping to a new major release for the next version. What do you all think?\n", "created_at": "2016-02-23T07:40:54Z", "updated_at": "2016-02-24T01:34:36Z", "html_url": "https://github.com/airbnb/synapse/pull/174#discussion_r53745142", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/174", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53745142"}, "html": {"href": "https://github.com/airbnb/synapse/pull/174#discussion_r53745142"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/174"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53745142/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53748997", "pull_request_review_id": null, "id": 53748997, "diff_hunk": "@@ -261,6 +261,7 @@ This section is its own hash, which should contain the following keys:\n * `listen`: these lines will be parsed and placed in the correct `frontend`/`backend` section as applicable; you can put lines which are the same for the frontend and backend here.\n * `backend_order`: optional: how backends should be ordered in the `backend` stanza. (default is shuffling). Setting to `asc` means sorting backends in ascending alphabetical order before generating stanza. `desc` means descending alphabetical order. `no_shuffle` means no shuffling or sorting.\n * `shared_frontend`: optional: haproxy configuration directives for a shared http frontend (see below)\n+* `ignore_weights`: optional: stops haproxy backend 'weight' options being generated, even if the Nerve registrations contain this information. This will cause all backend servers to be treated equally by haproxy. This defaults to true so weights will *NOT* be used by default. ", "path": "README.md", "position": null, "original_position": 4, "commit_id": "c3bcd295a1c7f5c579b301b7f37bc74617c4b16a", "original_commit_id": "06c84334b48f0c0bee2365dd2320dfe97b5347ef", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "@minkovich I'm fine with us cutting a new minor (aka major in 0.X parlance) version if that's the concern. I think if folks are registering a `weight` they should expect to have it reflected in the load balancers.\n\n@scarletmeow Weight is separate for a few reasons. The first is because it was merged before I came up with `haproxy_server_options` back when the plan was to merge all the things as top level keys. The second is because it can be dynamically updated over the stats socket making it much more useful for dynamically balancing load while most options that occur in `haproxy_server_options` (e.g. healthcheck, backup status. etc ...) cannot. The third is because it is frontend agnostic, weight is a common concept in all load balancers that I'm aware of.\n", "created_at": "2016-02-23T08:26:38Z", "updated_at": "2016-02-24T01:34:36Z", "html_url": "https://github.com/airbnb/synapse/pull/174#discussion_r53748997", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/174", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53748997"}, "html": {"href": "https://github.com/airbnb/synapse/pull/174#discussion_r53748997"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/174"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53748997/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53881215", "pull_request_review_id": null, "id": 53881215, "diff_hunk": "@@ -261,6 +261,7 @@ This section is its own hash, which should contain the following keys:\n * `listen`: these lines will be parsed and placed in the correct `frontend`/`backend` section as applicable; you can put lines which are the same for the frontend and backend here.\n * `backend_order`: optional: how backends should be ordered in the `backend` stanza. (default is shuffling). Setting to `asc` means sorting backends in ascending alphabetical order before generating stanza. `desc` means descending alphabetical order. `no_shuffle` means no shuffling or sorting.\n * `shared_frontend`: optional: haproxy configuration directives for a shared http frontend (see below)\n+* `ignore_weights`: optional: stops haproxy backend 'weight' options being generated, even if the Nerve registrations contain this information. This will cause all backend servers to be treated equally by haproxy. This defaults to true so weights will *NOT* be used by default. ", "path": "README.md", "position": null, "original_position": 4, "commit_id": "c3bcd295a1c7f5c579b301b7f37bc74617c4b16a", "original_commit_id": "06c84334b48f0c0bee2365dd2320dfe97b5347ef", "user": {"login": "minkovich", "id": 4672120, "avatar_url": "https://avatars1.githubusercontent.com/u/4672120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/minkovich", "html_url": "https://github.com/minkovich", "followers_url": "https://api.github.com/users/minkovich/followers", "following_url": "https://api.github.com/users/minkovich/following{/other_user}", "gists_url": "https://api.github.com/users/minkovich/gists{/gist_id}", "starred_url": "https://api.github.com/users/minkovich/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/minkovich/subscriptions", "organizations_url": "https://api.github.com/users/minkovich/orgs", "repos_url": "https://api.github.com/users/minkovich/repos", "events_url": "https://api.github.com/users/minkovich/events{/privacy}", "received_events_url": "https://api.github.com/users/minkovich/received_events", "type": "User", "site_admin": false}, "body": "@jolynch @igor47 @scarletmeow I'm going to wipe out the option to ignore weights. It's going to simplify the code a lot. I'd just bold it in the announcement when you cut the next release. :)\n", "created_at": "2016-02-24T01:25:20Z", "updated_at": "2016-02-24T01:34:36Z", "html_url": "https://github.com/airbnb/synapse/pull/174#discussion_r53881215", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/174", "author_association": "NONE", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53881215"}, "html": {"href": "https://github.com/airbnb/synapse/pull/174#discussion_r53881215"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/174"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53881215/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53903732", "pull_request_review_id": null, "id": 53903732, "diff_hunk": "@@ -742,6 +742,14 @@ def generate_backend_stanza(watcher, config)\n           b = \"\\tserver #{backend_name} #{backend['host']}:#{backend['port']}\"\n           b = \"#{b} cookie #{backend_name}\" unless config.include?('mode tcp')\n           b = \"#{b} #{watcher.haproxy['server_options']}\" if watcher.haproxy['server_options']\n+          if backend.has_key?('weight')\n+            # Check if server_options already contains weight, is so log a warning\n+            if watcher.haproxy['server_options'].include? 'weight'", "path": "lib/synapse/haproxy.rb", "position": 6, "original_position": 6, "commit_id": "c3bcd295a1c7f5c579b301b7f37bc74617c4b16a", "original_commit_id": "c3bcd295a1c7f5c579b301b7f37bc74617c4b16a", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "I think the backend (server) provided `haproxy_server_options` data is a more concerning conflict than `server_options` (a weight in the `server_options` would be like a default for servers or something).\n", "created_at": "2016-02-24T07:45:35Z", "updated_at": "2016-02-24T07:45:35Z", "html_url": "https://github.com/airbnb/synapse/pull/174#discussion_r53903732", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/174", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53903732"}, "html": {"href": "https://github.com/airbnb/synapse/pull/174#discussion_r53903732"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/174"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/53903732/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/54276876", "pull_request_review_id": null, "id": 54276876, "diff_hunk": "@@ -742,6 +742,14 @@ def generate_backend_stanza(watcher, config)\n           b = \"\\tserver #{backend_name} #{backend['host']}:#{backend['port']}\"\n           b = \"#{b} cookie #{backend_name}\" unless config.include?('mode tcp')\n           b = \"#{b} #{watcher.haproxy['server_options']}\" if watcher.haproxy['server_options']\n+          if backend.has_key?('weight')\n+            # Check if server_options already contains weight, is so log a warning\n+            if watcher.haproxy['server_options'].include? 'weight'", "path": "lib/synapse/haproxy.rb", "position": 6, "original_position": 6, "commit_id": "c3bcd295a1c7f5c579b301b7f37bc74617c4b16a", "original_commit_id": "c3bcd295a1c7f5c579b301b7f37bc74617c4b16a", "user": {"login": "minkovich", "id": 4672120, "avatar_url": "https://avatars1.githubusercontent.com/u/4672120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/minkovich", "html_url": "https://github.com/minkovich", "followers_url": "https://api.github.com/users/minkovich/followers", "following_url": "https://api.github.com/users/minkovich/following{/other_user}", "gists_url": "https://api.github.com/users/minkovich/gists{/gist_id}", "starred_url": "https://api.github.com/users/minkovich/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/minkovich/subscriptions", "organizations_url": "https://api.github.com/users/minkovich/orgs", "repos_url": "https://api.github.com/users/minkovich/repos", "events_url": "https://api.github.com/users/minkovich/events{/privacy}", "received_events_url": "https://api.github.com/users/minkovich/received_events", "type": "User", "site_admin": false}, "body": "@jolynch, that's a good point. To reduce the number of iteration for this PR, could you suggest what message you'd like to see when haproxy_server_options also includes weight?\n", "created_at": "2016-02-26T17:52:09Z", "updated_at": "2016-02-26T17:52:09Z", "html_url": "https://github.com/airbnb/synapse/pull/174#discussion_r54276876", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/174", "author_association": "NONE", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/54276876"}, "html": {"href": "https://github.com/airbnb/synapse/pull/174#discussion_r54276876"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/174"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/54276876/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/60831270", "pull_request_review_id": null, "id": 60831270, "diff_hunk": "@@ -0,0 +1,139 @@\n+require 'synapse/service_watcher/base'\n+require 'aws-sdk'\n+\n+class Synapse::ServiceWatcher\n+  class AsgWatcher < BaseWatcher\n+\n+    attr_reader :check_interval\n+\n+    def start\n+      region = @discovery['aws_region'] || ENV['AWS_REGION']\n+      log.info \"Connecting to EC2 region: #{region}\"\n+\n+      @asg_client = AWS::AutoScaling::Client.new(\n+          region:            region,\n+          access_key_id:     @discovery['aws_access_key_id']     || ENV['AWS_ACCESS_KEY_ID'],\n+          secret_access_key: @discovery['aws_secret_access_key'] || ENV['AWS_SECRET_ACCESS_KEY'] )\n+\n+      @ec2_client = AWS::EC2::Client.new(\n+          region:            region,\n+          access_key_id:     @discovery['aws_access_key_id']     || ENV['AWS_ACCESS_KEY_ID'],\n+          secret_access_key: @discovery['aws_secret_access_key'] || ENV['AWS_SECRET_ACCESS_KEY'] )\n+\n+      @check_interval = @discovery['check_interval'] || 15.0\n+\n+      log.info \"synapse: asg watcher looking for instances in asg #{@discovery[\"asg_name\"]}\"\n+\n+      @watcher = Thread.new { watch }", "path": "lib/synapse/service_watcher/asg.rb", "position": 27, "original_position": 27, "commit_id": "5335b60535179c25fbd26d56d35d97e2898e4b26", "original_commit_id": "5335b60535179c25fbd26d56d35d97e2898e4b26", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Just a heads up there is a flaw with how the ec2tag watcher and other \"watch in a Thread\" watchers are implemented. Because this returns immediately from the thread creation synapse might proceed to restart HAProxy before watch has actually been called. The zookeeper watcher gets around this because it uses a callback system and waits for the callback to finish once before returning.\n\nI'm not saying you have to change it, but I just want you to be aware of the shortcoming. I'm super open to ideas for how to fix it.\n", "created_at": "2016-04-23T16:52:43Z", "updated_at": "2016-04-23T16:52:43Z", "html_url": "https://github.com/airbnb/synapse/pull/184#discussion_r60831270", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/184", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/60831270"}, "html": {"href": "https://github.com/airbnb/synapse/pull/184#discussion_r60831270"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/184"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/60831270/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/60831473", "pull_request_review_id": null, "id": 60831473, "diff_hunk": "@@ -0,0 +1,139 @@\n+require 'synapse/service_watcher/base'\n+require 'aws-sdk'\n+\n+class Synapse::ServiceWatcher\n+  class AsgWatcher < BaseWatcher\n+\n+    attr_reader :check_interval\n+\n+    def start\n+      region = @discovery['aws_region'] || ENV['AWS_REGION']\n+      log.info \"Connecting to EC2 region: #{region}\"\n+\n+      @asg_client = AWS::AutoScaling::Client.new(\n+          region:            region,\n+          access_key_id:     @discovery['aws_access_key_id']     || ENV['AWS_ACCESS_KEY_ID'],\n+          secret_access_key: @discovery['aws_secret_access_key'] || ENV['AWS_SECRET_ACCESS_KEY'] )\n+\n+      @ec2_client = AWS::EC2::Client.new(\n+          region:            region,\n+          access_key_id:     @discovery['aws_access_key_id']     || ENV['AWS_ACCESS_KEY_ID'],\n+          secret_access_key: @discovery['aws_secret_access_key'] || ENV['AWS_SECRET_ACCESS_KEY'] )\n+\n+      @check_interval = @discovery['check_interval'] || 15.0\n+\n+      log.info \"synapse: asg watcher looking for instances in asg #{@discovery[\"asg_name\"]}\"\n+\n+      @watcher = Thread.new { watch }\n+    end\n+\n+    private\n+\n+    def validate_discovery_opts\n+      # Required, via options only.\n+      raise ArgumentError, \"invalid discovery method #{@discovery['method']}\" \\\n+        unless @discovery['method'] == 'asg'\n+      raise ArgumentError, \"aws asg name is required for service #{@name}\" \\\n+        unless @discovery['asg_name']\n+\n+      # As we're only looking up instances with hostnames/IPs, need to\n+      # be explicitly told which port the service we're balancing for listens on.\n+      unless @haproxy['server_port_override']\n+        raise ArgumentError,\n+              \"Missing server_port_override for service #{@name} - which port are backends listening on?\"\n+      end\n+\n+      unless @haproxy['server_port_override'].to_s.match(/^\\d+$/)\n+        raise ArgumentError, \"Invalid server_port_override value\"\n+      end\n+\n+      # aws region is optional in the SDK, aws will use a default value if not provided\n+      unless @discovery['aws_region'] || ENV['AWS_REGION']\n+        log.info \"aws region is missing, will use default\"\n+      end\n+      # access key id & secret are optional, might be using IAM instance profile for credentials\n+      unless ((@discovery['aws_access_key_id'] || ENV['aws_access_key_id']) \\\n+              && (@discovery['aws_secret_access_key'] || ENV['aws_secret_access_key'] ))\n+        log.info \"aws access key id & secret not set in config or env variables for service #{name}, will attempt to use IAM instance profile\"\n+      end\n+    end\n+\n+    def watch\n+      until @should_exit\n+        begin\n+          start = Time.now\n+          if set_backends(discover_instances)\n+            log.info \"synapse: asg watcher backends have changed.\"\n+          end\n+        rescue Exception => e\n+          log.warn \"synapse: error in asg watcher thread: #{e.inspect}\"\n+          log.warn e.backtrace\n+        ensure\n+          sleep_until_next_check(start)", "path": "lib/synapse/service_watcher/asg.rb", "position": 72, "original_position": 72, "commit_id": "5335b60535179c25fbd26d56d35d97e2898e4b26", "original_commit_id": "5335b60535179c25fbd26d56d35d97e2898e4b26", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Polling is definitely ok as a V1 or for small infras, but what are your thoughts on subscribing to a SNS topic of [autoscaling notifications](http://docs.aws.amazon.com/AutoScaling/latest/DeveloperGuide/ASGettingNotifications.html). It could be something super simple like \"if we get any SNS notification at all, rediscover backends\"\n", "created_at": "2016-04-23T17:03:24Z", "updated_at": "2016-04-23T17:03:24Z", "html_url": "https://github.com/airbnb/synapse/pull/184#discussion_r60831473", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/184", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/60831473"}, "html": {"href": "https://github.com/airbnb/synapse/pull/184#discussion_r60831473"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/184"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/60831473/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/64832050", "pull_request_review_id": null, "id": 64832050, "diff_hunk": "@@ -62,15 +64,21 @@ GEM\n     rspec-support (3.1.2)\n     safe_yaml (1.0.4)\n     slop (3.6.0)\n+    slyphon-log4j (1.2.15)", "path": "Gemfile.lock", "position": null, "original_position": 20, "commit_id": "6cf3c853319dec335ddf1d5cee8f4567f955093e", "original_commit_id": "6e754231939baec0ba29114d1eb49c259a9f6a7a", "user": {"login": "scarletmeow", "id": 6128469, "avatar_url": "https://avatars2.githubusercontent.com/u/6128469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarletmeow", "html_url": "https://github.com/scarletmeow", "followers_url": "https://api.github.com/users/scarletmeow/followers", "following_url": "https://api.github.com/users/scarletmeow/following{/other_user}", "gists_url": "https://api.github.com/users/scarletmeow/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarletmeow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarletmeow/subscriptions", "organizations_url": "https://api.github.com/users/scarletmeow/orgs", "repos_url": "https://api.github.com/users/scarletmeow/repos", "events_url": "https://api.github.com/users/scarletmeow/events{/privacy}", "received_events_url": "https://api.github.com/users/scarletmeow/received_events", "type": "User", "site_admin": false}, "body": "So weirdly enough when I run bundle install on your branch I don't pick up these changes- the only delta for me is `timecop (0.8.1)`.\n\n json is `json (1.8.3)` and not `json (1.8.3-java)`. What's up with that and `slyphon`?\n", "created_at": "2016-05-26T22:27:25Z", "updated_at": "2016-05-26T22:44:08Z", "html_url": "https://github.com/airbnb/synapse/pull/191#discussion_r64832050", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/191", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/64832050"}, "html": {"href": "https://github.com/airbnb/synapse/pull/191#discussion_r64832050"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/191"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/64832050/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/57647720", "pull_request_review_id": null, "id": 57647720, "diff_hunk": "@@ -742,6 +747,17 @@ def generate_backend_stanza(watcher, config)\n           b = \"\\tserver #{backend_name} #{backend['host']}:#{backend['port']}\"\n           b = \"#{b} cookie #{backend_name}\" unless config.include?('mode tcp')\n           b = \"#{b} #{watcher.haproxy['server_options']}\" if watcher.haproxy['server_options']\n+          if backend.has_key?('weight')\n+            # Check if server_options/haproxy_server_options already contains weight, if so log a warning\n+            if watcher.haproxy.fetch('server_options', '').include? 'weight'\n+              log.warn \"synapse: weight is defined by server_options and by nerve\"\n+            end\n+            if backend['haproxy_server_options'] and backend['haproxy_server_options'].include? 'weight'", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 21, "commit_id": "42c4d488b692f46697bd46abd4d184c3a76b25ec", "original_commit_id": "ff7da3b53a4f927678bd3f118990d3cf0c6a6fa5", "user": {"login": "scarletmeow", "id": 6128469, "avatar_url": "https://avatars2.githubusercontent.com/u/6128469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarletmeow", "html_url": "https://github.com/scarletmeow", "followers_url": "https://api.github.com/users/scarletmeow/followers", "following_url": "https://api.github.com/users/scarletmeow/following{/other_user}", "gists_url": "https://api.github.com/users/scarletmeow/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarletmeow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarletmeow/subscriptions", "organizations_url": "https://api.github.com/users/scarletmeow/orgs", "repos_url": "https://api.github.com/users/scarletmeow/repos", "events_url": "https://api.github.com/users/scarletmeow/events{/privacy}", "received_events_url": "https://api.github.com/users/scarletmeow/received_events", "type": "User", "site_admin": false}, "body": "unfortunately, due to how the parsing logic in ServiceWatcher works today, `haproxy_server_options` always exists as a key in backend and defaults to value `nil`\n", "created_at": "2016-03-28T22:56:14Z", "updated_at": "2016-05-27T18:50:25Z", "html_url": "https://github.com/airbnb/synapse/pull/179#discussion_r57647720", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/179", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/57647720"}, "html": {"href": "https://github.com/airbnb/synapse/pull/179#discussion_r57647720"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/179"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/57647720/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/60830978", "pull_request_review_id": null, "id": 60830978, "diff_hunk": "@@ -742,6 +747,17 @@ def generate_backend_stanza(watcher, config)\n           b = \"\\tserver #{backend_name} #{backend['host']}:#{backend['port']}\"\n           b = \"#{b} cookie #{backend_name}\" unless config.include?('mode tcp')\n           b = \"#{b} #{watcher.haproxy['server_options']}\" if watcher.haproxy['server_options']\n+          if backend.has_key?('weight')\n+            # Check if server_options/haproxy_server_options already contains weight, if so log a warning\n+            if watcher.haproxy.fetch('server_options', '').include? 'weight'\n+              log.warn \"synapse: weight is defined by server_options and by nerve\"\n+            end\n+            if backend['haproxy_server_options'] and backend['haproxy_server_options'].include? 'weight'\n+              log.warn \"synapse: weight is defined by haproxy_server_options and by nerve\"", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 22, "commit_id": "42c4d488b692f46697bd46abd4d184c3a76b25ec", "original_commit_id": "ff7da3b53a4f927678bd3f118990d3cf0c6a6fa5", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "I'd mention that the haproxy_server_options weight will take precedence.\n", "created_at": "2016-04-23T16:32:14Z", "updated_at": "2016-05-27T18:50:25Z", "html_url": "https://github.com/airbnb/synapse/pull/179#discussion_r60830978", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/179", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/60830978"}, "html": {"href": "https://github.com/airbnb/synapse/pull/179#discussion_r60830978"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/179"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/60830978/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/60830988", "pull_request_review_id": null, "id": 60830988, "diff_hunk": "@@ -742,6 +747,17 @@ def generate_backend_stanza(watcher, config)\n           b = \"\\tserver #{backend_name} #{backend['host']}:#{backend['port']}\"\n           b = \"#{b} cookie #{backend_name}\" unless config.include?('mode tcp')\n           b = \"#{b} #{watcher.haproxy['server_options']}\" if watcher.haproxy['server_options']\n+          if backend.has_key?('weight')\n+            # Check if server_options/haproxy_server_options already contains weight, if so log a warning\n+            if watcher.haproxy.fetch('server_options', '').include? 'weight'\n+              log.warn \"synapse: weight is defined by server_options and by nerve\"", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 19, "commit_id": "42c4d488b692f46697bd46abd4d184c3a76b25ec", "original_commit_id": "ff7da3b53a4f927678bd3f118990d3cf0c6a6fa5", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "I'd mention that the nerve weight will take precedence.\n", "created_at": "2016-04-23T16:32:39Z", "updated_at": "2016-05-27T18:50:25Z", "html_url": "https://github.com/airbnb/synapse/pull/179#discussion_r60830988", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/179", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/60830988"}, "html": {"href": "https://github.com/airbnb/synapse/pull/179#discussion_r60830988"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/179"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/60830988/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/64946620", "pull_request_review_id": null, "id": 64946620, "diff_hunk": "@@ -742,6 +747,17 @@ def generate_backend_stanza(watcher, config)\n           b = \"\\tserver #{backend_name} #{backend['host']}:#{backend['port']}\"\n           b = \"#{b} cookie #{backend_name}\" unless config.include?('mode tcp')\n           b = \"#{b} #{watcher.haproxy['server_options']}\" if watcher.haproxy['server_options']\n+          if backend.has_key?('weight')\n+            # Check if server_options/haproxy_server_options already contains weight, if so log a warning\n+            if watcher.haproxy.fetch('server_options', '').include? 'weight'\n+              log.warn \"synapse: weight is defined by server_options and by nerve\"", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 19, "commit_id": "42c4d488b692f46697bd46abd4d184c3a76b25ec", "original_commit_id": "ff7da3b53a4f927678bd3f118990d3cf0c6a6fa5", "user": {"login": "scarletmeow", "id": 6128469, "avatar_url": "https://avatars2.githubusercontent.com/u/6128469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarletmeow", "html_url": "https://github.com/scarletmeow", "followers_url": "https://api.github.com/users/scarletmeow/followers", "following_url": "https://api.github.com/users/scarletmeow/following{/other_user}", "gists_url": "https://api.github.com/users/scarletmeow/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarletmeow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarletmeow/subscriptions", "organizations_url": "https://api.github.com/users/scarletmeow/orgs", "repos_url": "https://api.github.com/users/scarletmeow/repos", "events_url": "https://api.github.com/users/scarletmeow/events{/privacy}", "received_events_url": "https://api.github.com/users/scarletmeow/received_events", "type": "User", "site_admin": false}, "body": "Done\n", "created_at": "2016-05-27T18:17:27Z", "updated_at": "2016-05-27T18:50:25Z", "html_url": "https://github.com/airbnb/synapse/pull/179#discussion_r64946620", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/179", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/64946620"}, "html": {"href": "https://github.com/airbnb/synapse/pull/179#discussion_r64946620"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/179"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/64946620/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/64947020", "pull_request_review_id": null, "id": 64947020, "diff_hunk": "@@ -742,6 +747,17 @@ def generate_backend_stanza(watcher, config)\n           b = \"\\tserver #{backend_name} #{backend['host']}:#{backend['port']}\"\n           b = \"#{b} cookie #{backend_name}\" unless config.include?('mode tcp')\n           b = \"#{b} #{watcher.haproxy['server_options']}\" if watcher.haproxy['server_options']\n+          if backend.has_key?('weight')\n+            # Check if server_options/haproxy_server_options already contains weight, if so log a warning\n+            if watcher.haproxy.fetch('server_options', '').include? 'weight'\n+              log.warn \"synapse: weight is defined by server_options and by nerve\"\n+            end\n+            if backend['haproxy_server_options'] and backend['haproxy_server_options'].include? 'weight'\n+              log.warn \"synapse: weight is defined by haproxy_server_options and by nerve\"", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 22, "commit_id": "42c4d488b692f46697bd46abd4d184c3a76b25ec", "original_commit_id": "ff7da3b53a4f927678bd3f118990d3cf0c6a6fa5", "user": {"login": "scarletmeow", "id": 6128469, "avatar_url": "https://avatars2.githubusercontent.com/u/6128469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarletmeow", "html_url": "https://github.com/scarletmeow", "followers_url": "https://api.github.com/users/scarletmeow/followers", "following_url": "https://api.github.com/users/scarletmeow/following{/other_user}", "gists_url": "https://api.github.com/users/scarletmeow/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarletmeow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarletmeow/subscriptions", "organizations_url": "https://api.github.com/users/scarletmeow/orgs", "repos_url": "https://api.github.com/users/scarletmeow/repos", "events_url": "https://api.github.com/users/scarletmeow/events{/privacy}", "received_events_url": "https://api.github.com/users/scarletmeow/received_events", "type": "User", "site_admin": false}, "body": "Done\n", "created_at": "2016-05-27T18:20:12Z", "updated_at": "2016-05-27T18:50:25Z", "html_url": "https://github.com/airbnb/synapse/pull/179#discussion_r64947020", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/179", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/64947020"}, "html": {"href": "https://github.com/airbnb/synapse/pull/179#discussion_r64947020"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/179"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/64947020/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/64960350", "pull_request_review_id": null, "id": 64960350, "diff_hunk": "@@ -714,6 +714,11 @@ def generate_backend_stanza(watcher, config)\n             log.info \"synapse: restart required because haproxy_server_options changed for #{backend_name}\"\n             @restart_required = true\n           end\n+          if (old_backend.fetch('weight', \"\") !=", "path": "lib/synapse/haproxy.rb", "position": 4, "original_position": 4, "commit_id": "42c4d488b692f46697bd46abd4d184c3a76b25ec", "original_commit_id": "42c4d488b692f46697bd46abd4d184c3a76b25ec", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "so, it looks like this section of code is only invoked if the state file is enabled. i think this needs a little re-thinking...\n", "created_at": "2016-05-27T20:09:45Z", "updated_at": "2016-05-27T20:09:46Z", "html_url": "https://github.com/airbnb/synapse/pull/179#discussion_r64960350", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/179", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/64960350"}, "html": {"href": "https://github.com/airbnb/synapse/pull/179#discussion_r64960350"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/179"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/64960350/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/64980926", "pull_request_review_id": null, "id": 64980926, "diff_hunk": "@@ -714,6 +714,11 @@ def generate_backend_stanza(watcher, config)\n             log.info \"synapse: restart required because haproxy_server_options changed for #{backend_name}\"\n             @restart_required = true\n           end\n+          if (old_backend.fetch('weight', \"\") !=", "path": "lib/synapse/haproxy.rb", "position": 4, "original_position": 4, "commit_id": "42c4d488b692f46697bd46abd4d184c3a76b25ec", "original_commit_id": "42c4d488b692f46697bd46abd4d184c3a76b25ec", "user": {"login": "scarletmeow", "id": 6128469, "avatar_url": "https://avatars2.githubusercontent.com/u/6128469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarletmeow", "html_url": "https://github.com/scarletmeow", "followers_url": "https://api.github.com/users/scarletmeow/followers", "following_url": "https://api.github.com/users/scarletmeow/following{/other_user}", "gists_url": "https://api.github.com/users/scarletmeow/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarletmeow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarletmeow/subscriptions", "organizations_url": "https://api.github.com/users/scarletmeow/orgs", "repos_url": "https://api.github.com/users/scarletmeow/repos", "events_url": "https://api.github.com/users/scarletmeow/events{/privacy}", "received_events_url": "https://api.github.com/users/scarletmeow/received_events", "type": "User", "site_admin": false}, "body": "We detect a restart as long as the output config file is different: https://github.com/airbnb/synapse/blob/master/lib/synapse/haproxy.rb#L844. So you're right to point out this block of code as being out-of-place. I'm writing some tests to see if we even need any of the logic here.\n", "created_at": "2016-05-28T00:50:31Z", "updated_at": "2016-05-28T00:50:31Z", "html_url": "https://github.com/airbnb/synapse/pull/179#discussion_r64980926", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/179", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/64980926"}, "html": {"href": "https://github.com/airbnb/synapse/pull/179#discussion_r64980926"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/179"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/64980926/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/66312678", "pull_request_review_id": null, "id": 66312678, "diff_hunk": "@@ -1030,19 +1030,33 @@ def generate_backend_stanza(watcher, config)\n       ]\n     end\n \n+    def haproxy_exec(command)\n+      info = nil\n+      s = UNIXSocket.new(@opts['socket_file_path'])\n+      s.write(command)\n+      info = s.read\n+    rescue StandardError => e\n+      log.warn \"synapse: unhandled error reading stats socket: #{e.inspect}\"\n+      @restart_required = true\n+      nil\n+    ensure\n+      unless s.nil?\n+        begin\n+          s.close\n+        rescue StandardError => e\n+          log.warn \"synapse: unhandled error closing stats socket: #{e.inspect}\"\n+        end\n+      end\n+      info", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 21, "commit_id": "7a1660eefc002847db196d4e2b8ff065d4721b85", "original_commit_id": "46ea91c00e2e676cd296d5c149d89c87651cd9fc", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "if you're thinking that this will return `info` from the function since the `ensure` block is the last one that runs, that's incorrect. this does nothing, and can be omitted. example:\n\n```\nirb(main):001:0> a = begin\nirb(main):002:1* 5\nirb(main):003:1> ensure\nirb(main):004:1* 'hi'\nirb(main):005:1> end\n=> 5\nirb(main):006:0> a\n=> 5\n```\n", "created_at": "2016-06-08T18:30:19Z", "updated_at": "2016-06-08T19:20:33Z", "html_url": "https://github.com/airbnb/synapse/pull/196#discussion_r66312678", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/196", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/66312678"}, "html": {"href": "https://github.com/airbnb/synapse/pull/196#discussion_r66312678"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/196"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/66312678/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/66312873", "pull_request_review_id": null, "id": 66312873, "diff_hunk": "@@ -1030,19 +1030,33 @@ def generate_backend_stanza(watcher, config)\n       ]\n     end\n \n+    def haproxy_exec(command)\n+      info = nil", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 5, "commit_id": "7a1660eefc002847db196d4e2b8ff065d4721b85", "original_commit_id": "46ea91c00e2e676cd296d5c149d89c87651cd9fc", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "i think you don't need to initialize this here; this seems like it was done just to have something for the `ensure` block to reference\n", "created_at": "2016-06-08T18:31:32Z", "updated_at": "2016-06-08T19:20:33Z", "html_url": "https://github.com/airbnb/synapse/pull/196#discussion_r66312873", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/196", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/66312873"}, "html": {"href": "https://github.com/airbnb/synapse/pull/196#discussion_r66312873"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/196"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/66312873/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/66313409", "pull_request_review_id": null, "id": 66313409, "diff_hunk": "@@ -1030,19 +1030,33 @@ def generate_backend_stanza(watcher, config)\n       ]\n     end\n \n+    def haproxy_exec(command)\n+      info = nil\n+      s = UNIXSocket.new(@opts['socket_file_path'])\n+      s.write(command)\n+      info = s.read\n+    rescue StandardError => e", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 9, "commit_id": "7a1660eefc002847db196d4e2b8ff065d4721b85", "original_commit_id": "46ea91c00e2e676cd296d5c149d89c87651cd9fc", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "i'm not sure about this `rescue` clause. i think we should allow the caller to decide how to handle exceptions, even though it does make the code more verbose at the call site. i can definitely envision cases where i want to query haproxy via the stats socket but _not_ want to restart haproxy if that fails\n", "created_at": "2016-06-08T18:34:31Z", "updated_at": "2016-06-08T19:20:33Z", "html_url": "https://github.com/airbnb/synapse/pull/196#discussion_r66313409", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/196", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/66313409"}, "html": {"href": "https://github.com/airbnb/synapse/pull/196#discussion_r66313409"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/196"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/66313409/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/66313508", "pull_request_review_id": null, "id": 66313508, "diff_hunk": "@@ -1030,19 +1030,33 @@ def generate_backend_stanza(watcher, config)\n       ]\n     end\n \n+    def haproxy_exec(command)\n+      info = nil\n+      s = UNIXSocket.new(@opts['socket_file_path'])\n+      s.write(command)\n+      info = s.read\n+    rescue StandardError => e\n+      log.warn \"synapse: unhandled error reading stats socket: #{e.inspect}\"\n+      @restart_required = true\n+      nil\n+    ensure\n+      unless s.nil?", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 14, "commit_id": "7a1660eefc002847db196d4e2b8ff065d4721b85", "original_commit_id": "46ea91c00e2e676cd296d5c149d89c87651cd9fc", "user": {"login": "schleyfox", "id": 4259, "avatar_url": "https://avatars0.githubusercontent.com/u/4259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/schleyfox", "html_url": "https://github.com/schleyfox", "followers_url": "https://api.github.com/users/schleyfox/followers", "following_url": "https://api.github.com/users/schleyfox/following{/other_user}", "gists_url": "https://api.github.com/users/schleyfox/gists{/gist_id}", "starred_url": "https://api.github.com/users/schleyfox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schleyfox/subscriptions", "organizations_url": "https://api.github.com/users/schleyfox/orgs", "repos_url": "https://api.github.com/users/schleyfox/repos", "events_url": "https://api.github.com/users/schleyfox/events{/privacy}", "received_events_url": "https://api.github.com/users/schleyfox/received_events", "type": "User", "site_admin": false}, "body": "`if s` might as well use ruby truthiness.\n", "created_at": "2016-06-08T18:35:11Z", "updated_at": "2016-06-08T19:20:33Z", "html_url": "https://github.com/airbnb/synapse/pull/196#discussion_r66313508", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/196", "author_association": "OWNER", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/66313508"}, "html": {"href": "https://github.com/airbnb/synapse/pull/196#discussion_r66313508"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/196"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/66313508/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/66313885", "pull_request_review_id": null, "id": 66313885, "diff_hunk": "@@ -1089,18 +1103,10 @@ def update_backends(watchers)\n           end\n \n           # actually write the command to the socket\n-          begin\n-            s = UNIXSocket.new(@opts['socket_file_path'])\n-            s.write(command)\n-            output = s.read()\n-          rescue StandardError => e\n-            log.warn \"synapse: unknown error writing to socket\"\n+          output = haproxy_exec(command)\n+          unless output == \"\\n\"\n+            log.warn \"synapse: socket command #{command} failed: #{output}\"", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 55, "commit_id": "7a1660eefc002847db196d4e2b8ff065d4721b85", "original_commit_id": "46ea91c00e2e676cd296d5c149d89c87651cd9fc", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "although this is unrelated to the main goal of the PR, i would love to see these log lines follow the `synapse: restart required` format we use elsewhere in this function.\n\n``` ruby\nlog.warn \"synapse: restart required because socket command #{command} failed with out #{output}\"\n```\n", "created_at": "2016-06-08T18:37:09Z", "updated_at": "2016-06-08T19:20:33Z", "html_url": "https://github.com/airbnb/synapse/pull/196#discussion_r66313885", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/196", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/66313885"}, "html": {"href": "https://github.com/airbnb/synapse/pull/196#discussion_r66313885"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/196"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/66313885/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/66314173", "pull_request_review_id": null, "id": 66314173, "diff_hunk": "@@ -1030,19 +1030,33 @@ def generate_backend_stanza(watcher, config)\n       ]\n     end\n \n+    def haproxy_exec(command)\n+      info = nil\n+      s = UNIXSocket.new(@opts['socket_file_path'])\n+      s.write(command)\n+      info = s.read\n+    rescue StandardError => e\n+      log.warn \"synapse: unhandled error reading stats socket: #{e.inspect}\"\n+      @restart_required = true\n+      nil\n+    ensure\n+      unless s.nil?\n+        begin\n+          s.close\n+        rescue StandardError => e\n+          log.warn \"synapse: unhandled error closing stats socket: #{e.inspect}\"\n+        end\n+      end\n+      info\n+    end\n+\n     # tries to set active backends via haproxy's stats socket\n     # because we can't add backends via the socket, we might still need to restart haproxy\n     def update_backends(watchers)\n       # first, get a list of existing servers for various backends\n-      begin\n-        s = UNIXSocket.new(@opts['socket_file_path'])\n-        s.write(\"show stat\\n\")\n-        info = s.read()\n-      rescue StandardError => e\n-        log.warn \"synapse: unhandled error reading stats socket: #{e.inspect}\"\n-        @restart_required = true\n-        return\n-      end\n+      info = haproxy_exec(\"show stat\\n\")\n+\n+      return if info.nil?", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 39, "commit_id": "7a1660eefc002847db196d4e2b8ff065d4721b85", "original_commit_id": "46ea91c00e2e676cd296d5c149d89c87651cd9fc", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "i was confused here, because we appear to just exit without setting `@restart_required`. i suppose the expectation is that we only get `nil` output if there was an error, but this is why i was uncertain about the broad `rescue` block in the `haproxy_exec` function.\n", "created_at": "2016-06-08T18:38:25Z", "updated_at": "2016-06-08T19:20:33Z", "html_url": "https://github.com/airbnb/synapse/pull/196#discussion_r66314173", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/196", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/66314173"}, "html": {"href": "https://github.com/airbnb/synapse/pull/196#discussion_r66314173"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/196"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/66314173/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/66316040", "pull_request_review_id": null, "id": 66316040, "diff_hunk": "@@ -1030,19 +1030,33 @@ def generate_backend_stanza(watcher, config)\n       ]\n     end\n \n+    def haproxy_exec(command)\n+      info = nil\n+      s = UNIXSocket.new(@opts['socket_file_path'])\n+      s.write(command)\n+      info = s.read\n+    rescue StandardError => e", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 9, "commit_id": "7a1660eefc002847db196d4e2b8ff065d4721b85", "original_commit_id": "46ea91c00e2e676cd296d5c149d89c87651cd9fc", "user": {"login": "brianwolfe", "id": 1874252, "avatar_url": "https://avatars2.githubusercontent.com/u/1874252?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brianwolfe", "html_url": "https://github.com/brianwolfe", "followers_url": "https://api.github.com/users/brianwolfe/followers", "following_url": "https://api.github.com/users/brianwolfe/following{/other_user}", "gists_url": "https://api.github.com/users/brianwolfe/gists{/gist_id}", "starred_url": "https://api.github.com/users/brianwolfe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brianwolfe/subscriptions", "organizations_url": "https://api.github.com/users/brianwolfe/orgs", "repos_url": "https://api.github.com/users/brianwolfe/repos", "events_url": "https://api.github.com/users/brianwolfe/events{/privacy}", "received_events_url": "https://api.github.com/users/brianwolfe/received_events", "type": "User", "site_admin": false}, "body": "Ambivalent about it. I would lean towards having a helper method that does not trigger the restart in that case to keep it grouped where possible, but I'll pull up + reduplicate the rescue code for now.\n", "created_at": "2016-06-08T18:48:24Z", "updated_at": "2016-06-08T19:20:33Z", "html_url": "https://github.com/airbnb/synapse/pull/196#discussion_r66316040", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/196", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/66316040"}, "html": {"href": "https://github.com/airbnb/synapse/pull/196#discussion_r66316040"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/196"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/66316040/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/66320512", "pull_request_review_id": null, "id": 66320512, "diff_hunk": "@@ -1030,16 +1030,26 @@ def generate_backend_stanza(watcher, config)\n       ]\n     end\n \n+    def haproxy_exec(command)\n+      s = UNIXSocket.new(@opts['socket_file_path'])\n+      s.write(command)\n+      info = s.read\n+    ensure\n+      if s\n+        s.close", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 10, "commit_id": "7a1660eefc002847db196d4e2b8ff065d4721b85", "original_commit_id": "9fad3c589bc0f455fd0487067255db94ff38956a", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "tighter: `s.close if s`\n", "created_at": "2016-06-08T19:14:02Z", "updated_at": "2016-06-08T19:20:33Z", "html_url": "https://github.com/airbnb/synapse/pull/196#discussion_r66320512", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/196", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/66320512"}, "html": {"href": "https://github.com/airbnb/synapse/pull/196#discussion_r66320512"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/196"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/66320512/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/66320976", "pull_request_review_id": null, "id": 66320976, "diff_hunk": "@@ -1030,16 +1030,26 @@ def generate_backend_stanza(watcher, config)\n       ]\n     end\n \n+    def haproxy_exec(command)\n+      s = UNIXSocket.new(@opts['socket_file_path'])\n+      s.write(command)\n+      info = s.read\n+    ensure\n+      if s\n+        s.close\n+      end\n+    end\n+\n     # tries to set active backends via haproxy's stats socket\n     # because we can't add backends via the socket, we might still need to restart haproxy\n     def update_backends(watchers)\n       # first, get a list of existing servers for various backends\n       begin\n-        s = UNIXSocket.new(@opts['socket_file_path'])\n-        s.write(\"show stat\\n\")\n-        info = s.read()\n+        stat_command = \"show stat\\n\"\n+        info = haproxy_exec(stat_command)", "path": "lib/synapse/haproxy.rb", "position": 21, "original_position": 23, "commit_id": "7a1660eefc002847db196d4e2b8ff065d4721b85", "original_commit_id": "9fad3c589bc0f455fd0487067255db94ff38956a", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "maybe do `info = haproxy_exec(stat_command) || \"\"` ? that way, if info is something funky, we'll just restart below because we don't find any backends, rather than hitting an error at `info.split`\n", "created_at": "2016-06-08T19:16:53Z", "updated_at": "2016-06-08T19:20:33Z", "html_url": "https://github.com/airbnb/synapse/pull/196#discussion_r66320976", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/196", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/66320976"}, "html": {"href": "https://github.com/airbnb/synapse/pull/196#discussion_r66320976"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/196"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/66320976/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/66321441", "pull_request_review_id": null, "id": 66321441, "diff_hunk": "@@ -1030,16 +1030,26 @@ def generate_backend_stanza(watcher, config)\n       ]\n     end\n \n+    def haproxy_exec(command)\n+      s = UNIXSocket.new(@opts['socket_file_path'])\n+      s.write(command)\n+      info = s.read\n+    ensure\n+      if s\n+        s.close\n+      end\n+    end\n+\n     # tries to set active backends via haproxy's stats socket\n     # because we can't add backends via the socket, we might still need to restart haproxy\n     def update_backends(watchers)\n       # first, get a list of existing servers for various backends\n       begin\n-        s = UNIXSocket.new(@opts['socket_file_path'])\n-        s.write(\"show stat\\n\")\n-        info = s.read()\n+        stat_command = \"show stat\\n\"\n+        info = haproxy_exec(stat_command)", "path": "lib/synapse/haproxy.rb", "position": 21, "original_position": 23, "commit_id": "7a1660eefc002847db196d4e2b8ff065d4721b85", "original_commit_id": "9fad3c589bc0f455fd0487067255db94ff38956a", "user": {"login": "brianwolfe", "id": 1874252, "avatar_url": "https://avatars2.githubusercontent.com/u/1874252?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brianwolfe", "html_url": "https://github.com/brianwolfe", "followers_url": "https://api.github.com/users/brianwolfe/followers", "following_url": "https://api.github.com/users/brianwolfe/following{/other_user}", "gists_url": "https://api.github.com/users/brianwolfe/gists{/gist_id}", "starred_url": "https://api.github.com/users/brianwolfe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brianwolfe/subscriptions", "organizations_url": "https://api.github.com/users/brianwolfe/orgs", "repos_url": "https://api.github.com/users/brianwolfe/repos", "events_url": "https://api.github.com/users/brianwolfe/events{/privacy}", "received_events_url": "https://api.github.com/users/brianwolfe/received_events", "type": "User", "site_admin": false}, "body": "shouldn't be necessary. .read should just return empty string on no backends anyway.\n", "created_at": "2016-06-08T19:19:49Z", "updated_at": "2016-06-08T19:20:33Z", "html_url": "https://github.com/airbnb/synapse/pull/196#discussion_r66321441", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/196", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/66321441"}, "html": {"href": "https://github.com/airbnb/synapse/pull/196#discussion_r66321441"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/196"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/66321441/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/66322208", "pull_request_review_id": null, "id": 66322208, "diff_hunk": "@@ -1030,16 +1030,26 @@ def generate_backend_stanza(watcher, config)\n       ]\n     end\n \n+    def haproxy_exec(command)\n+      s = UNIXSocket.new(@opts['socket_file_path'])\n+      s.write(command)\n+      info = s.read\n+    ensure\n+      if s\n+        s.close\n+      end\n+    end\n+\n     # tries to set active backends via haproxy's stats socket\n     # because we can't add backends via the socket, we might still need to restart haproxy\n     def update_backends(watchers)\n       # first, get a list of existing servers for various backends\n       begin\n-        s = UNIXSocket.new(@opts['socket_file_path'])\n-        s.write(\"show stat\\n\")\n-        info = s.read()\n+        stat_command = \"show stat\\n\"\n+        info = haproxy_exec(stat_command)", "path": "lib/synapse/haproxy.rb", "position": 21, "original_position": 23, "commit_id": "7a1660eefc002847db196d4e2b8ff065d4721b85", "original_commit_id": "9fad3c589bc0f455fd0487067255db94ff38956a", "user": {"login": "brianwolfe", "id": 1874252, "avatar_url": "https://avatars2.githubusercontent.com/u/1874252?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brianwolfe", "html_url": "https://github.com/brianwolfe", "followers_url": "https://api.github.com/users/brianwolfe/followers", "following_url": "https://api.github.com/users/brianwolfe/following{/other_user}", "gists_url": "https://api.github.com/users/brianwolfe/gists{/gist_id}", "starred_url": "https://api.github.com/users/brianwolfe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brianwolfe/subscriptions", "organizations_url": "https://api.github.com/users/brianwolfe/orgs", "repos_url": "https://api.github.com/users/brianwolfe/repos", "events_url": "https://api.github.com/users/brianwolfe/events{/privacy}", "received_events_url": "https://api.github.com/users/brianwolfe/received_events", "type": "User", "site_admin": false}, "body": "http://ruby-doc.org/core-1.9.3/IO.html#method-i-read\n\n> At end of file, it returns nil or \"\" depend on length. ios.read() and ios.read(nil) returns \"\". ios.read(positive-integer) returns nil.\n\nWe are not passing in a length argument, so we should get \"\".\n", "created_at": "2016-06-08T19:24:21Z", "updated_at": "2016-06-08T19:24:21Z", "html_url": "https://github.com/airbnb/synapse/pull/196#discussion_r66322208", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/196", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/66322208"}, "html": {"href": "https://github.com/airbnb/synapse/pull/196#discussion_r66322208"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/196"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/66322208/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/68633254", "pull_request_review_id": null, "id": 68633254, "diff_hunk": "@@ -99,6 +102,17 @@ def validate_discovery_opts\n       log.warn \"synapse: warning: a stub watcher with no default servers is pretty useless\" if @default_servers.empty?\n     end\n \n+    def filter_backends_by_label(backends, label_filter)\n+      filtered_backends = []\n+      backends.each do |backend|\n+        backend_labels = backend['labels'] || {}\n+        if label_filter['condition'] == 'equals' and backend_labels[label_filter['label']] == label_filter['value']", "path": "lib/synapse/service_watcher/base.rb", "position": 25, "original_position": 25, "commit_id": "e794199e0d4e7f83d95cdb3c7737211898ef8200", "original_commit_id": "e794199e0d4e7f83d95cdb3c7737211898ef8200", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "oops, i should have caught this earlier. using `and` is not a good idea in ruby, you should always use `&&` because `and` has odd precedence rules. i'm working on this section of code, so i'll just fix it in my PR.\n", "created_at": "2016-06-27T18:45:56Z", "updated_at": "2016-06-27T18:45:57Z", "html_url": "https://github.com/airbnb/synapse/pull/164#discussion_r68633254", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/164", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/68633254"}, "html": {"href": "https://github.com/airbnb/synapse/pull/164#discussion_r68633254"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/164"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/68633254/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/70378561", "pull_request_review_id": null, "id": 70378561, "diff_hunk": "@@ -0,0 +1,20 @@\n+FactoryGirl.define do", "path": "spec/factories/backend.rb", "position": 1, "original_position": 1, "commit_id": "1b02254a5bb10f12111039bf2bb606f12d800dc5", "original_commit_id": "1b02254a5bb10f12111039bf2bb606f12d800dc5", "user": {"login": "scarletmeow", "id": 6128469, "avatar_url": "https://avatars2.githubusercontent.com/u/6128469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarletmeow", "html_url": "https://github.com/scarletmeow", "followers_url": "https://api.github.com/users/scarletmeow/followers", "following_url": "https://api.github.com/users/scarletmeow/following{/other_user}", "gists_url": "https://api.github.com/users/scarletmeow/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarletmeow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarletmeow/subscriptions", "organizations_url": "https://api.github.com/users/scarletmeow/orgs", "repos_url": "https://api.github.com/users/scarletmeow/repos", "events_url": "https://api.github.com/users/scarletmeow/events{/privacy}", "received_events_url": "https://api.github.com/users/scarletmeow/received_events", "type": "User", "site_admin": false}, "body": "Nice!\n", "created_at": "2016-07-12T05:22:40Z", "updated_at": "2016-07-12T05:22:40Z", "html_url": "https://github.com/airbnb/synapse/pull/202#discussion_r70378561", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/202", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/70378561"}, "html": {"href": "https://github.com/airbnb/synapse/pull/202#discussion_r70378561"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/202"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/70378561/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/70378591", "pull_request_review_id": null, "id": 70378591, "diff_hunk": "@@ -152,16 +152,17 @@ The base watcher is useful in situations where you only want to use the servers\n It has the following options:\n \n * `method`: base\n-* `label_filter`: optional filter to be applied to discovered service nodes\n+* `label_filters`: optional list of filters to be applied to discovered service nodes\n \n ###### Filtering service nodes ######\n-Synapse can be configured to only return service nodes that match a `label_filter` predicate. If provided, the `label_filter` hash should contain the following:\n \n-* `label`: The label for which the filter is applied\n+Synapse can be configured to only return service nodes that match a `label_filters` predicate. If provided, `label_filters` should be an array of hashes which contain the following:\n+\n+* `label`: The name of the label for which the filter is applied\n * `value`: The comparison value\n-* `condition` (one of ['`equals`']): The type of filter condition to be applied. Only `equals` is supported at present\n+* `condition` (one of ['`equals`', '`not-equals`']): The type of filter condition to be applied.\n \n-Given a `label_filter`: `{ \"label\": \"cluster\", \"value\": \"dev\", \"condition\": \"equals\" }`, this will return only service nodes that contain the label value `{ \"cluster\": \"dev\" }`.\n+Given a `label_filters`: `[{ \"label\": \"cluster\", \"value\": \"dev\", \"condition\": \"equals\" }]`, this will return only service nodes that contain the label value `{ \"cluster\": \"dev\" }`.", "path": "README.md", "position": 19, "original_position": 19, "commit_id": "1b02254a5bb10f12111039bf2bb606f12d800dc5", "original_commit_id": "1b02254a5bb10f12111039bf2bb606f12d800dc5", "user": {"login": "scarletmeow", "id": 6128469, "avatar_url": "https://avatars2.githubusercontent.com/u/6128469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarletmeow", "html_url": "https://github.com/scarletmeow", "followers_url": "https://api.github.com/users/scarletmeow/followers", "following_url": "https://api.github.com/users/scarletmeow/following{/other_user}", "gists_url": "https://api.github.com/users/scarletmeow/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarletmeow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarletmeow/subscriptions", "organizations_url": "https://api.github.com/users/scarletmeow/orgs", "repos_url": "https://api.github.com/users/scarletmeow/repos", "events_url": "https://api.github.com/users/scarletmeow/events{/privacy}", "received_events_url": "https://api.github.com/users/scarletmeow/received_events", "type": "User", "site_admin": false}, "body": "Should we warn that there's no validation to guard against nonsensical conditions? (ie, `az equals foo`, `az not-equals foo`)?\n", "created_at": "2016-07-12T05:23:22Z", "updated_at": "2016-07-12T05:23:22Z", "html_url": "https://github.com/airbnb/synapse/pull/202#discussion_r70378591", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/202", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/70378591"}, "html": {"href": "https://github.com/airbnb/synapse/pull/202#discussion_r70378591"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/202"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/70378591/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/70378997", "pull_request_review_id": null, "id": 70378997, "diff_hunk": "@@ -102,15 +120,16 @@ def validate_discovery_opts\n       log.warn \"synapse: warning: a stub watcher with no default servers is pretty useless\" if @default_servers.empty?\n     end\n \n-    def filter_backends_by_label(backends, label_filter)\n-      filtered_backends = []\n-      backends.each do |backend|\n+    def backends_filtered_by_labels\n+      filtered_backends = @backends.select do |backend|\n         backend_labels = backend['labels'] || {}\n-        if label_filter['condition'] == 'equals' and backend_labels[label_filter['label']] == label_filter['value']\n-          filtered_backends << backend\n+        @label_filters.all? do |label_filter|\n+          (label_filter['condition'] == 'equals' &&\n+            backend_labels[label_filter['label']] == label_filter['value']) ||\n+          (label_filter['condition'] == 'not-equals' &&", "path": "lib/synapse/service_watcher/base.rb", "position": 78, "original_position": 78, "commit_id": "1b02254a5bb10f12111039bf2bb606f12d800dc5", "original_commit_id": "1b02254a5bb10f12111039bf2bb606f12d800dc5", "user": {"login": "scarletmeow", "id": 6128469, "avatar_url": "https://avatars2.githubusercontent.com/u/6128469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarletmeow", "html_url": "https://github.com/scarletmeow", "followers_url": "https://api.github.com/users/scarletmeow/followers", "following_url": "https://api.github.com/users/scarletmeow/following{/other_user}", "gists_url": "https://api.github.com/users/scarletmeow/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarletmeow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarletmeow/subscriptions", "organizations_url": "https://api.github.com/users/scarletmeow/orgs", "repos_url": "https://api.github.com/users/scarletmeow/repos", "events_url": "https://api.github.com/users/scarletmeow/events{/privacy}", "received_events_url": "https://api.github.com/users/scarletmeow/received_events", "type": "User", "site_admin": false}, "body": "Food for thought: So right now, if a node is missing a label, it makes sense for the `equals` label condition to fail (we're missing information, so it can't be `equal` unless we are expecting a `nil` or missing value). So there's no confusion here for the `equals` filter.\n\nFor `not-equals`, this scenario may cause confusion. When a backend node is missing the label value altogether, it will always pass the `not-equals` label condition. Right now, there's no chance of the labels information in Nerve being flaky as they're statically configured. This could be a concern in the future when label information is dynamic and labels could drop in/out of existence.\n", "created_at": "2016-07-12T05:31:23Z", "updated_at": "2016-07-12T05:31:23Z", "html_url": "https://github.com/airbnb/synapse/pull/202#discussion_r70378997", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/202", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/70378997"}, "html": {"href": "https://github.com/airbnb/synapse/pull/202#discussion_r70378997"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/202"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/70378997/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/70534883", "pull_request_review_id": null, "id": 70534883, "diff_hunk": "@@ -102,15 +120,16 @@ def validate_discovery_opts\n       log.warn \"synapse: warning: a stub watcher with no default servers is pretty useless\" if @default_servers.empty?\n     end\n \n-    def filter_backends_by_label(backends, label_filter)\n-      filtered_backends = []\n-      backends.each do |backend|\n+    def backends_filtered_by_labels\n+      filtered_backends = @backends.select do |backend|\n         backend_labels = backend['labels'] || {}\n-        if label_filter['condition'] == 'equals' and backend_labels[label_filter['label']] == label_filter['value']\n-          filtered_backends << backend\n+        @label_filters.all? do |label_filter|\n+          (label_filter['condition'] == 'equals' &&\n+            backend_labels[label_filter['label']] == label_filter['value']) ||\n+          (label_filter['condition'] == 'not-equals' &&", "path": "lib/synapse/service_watcher/base.rb", "position": 78, "original_position": 78, "commit_id": "1b02254a5bb10f12111039bf2bb606f12d800dc5", "original_commit_id": "1b02254a5bb10f12111039bf2bb606f12d800dc5", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "hmmm... good point. i wonder if i should explicitly check whether `backend_labels.include?(label_filter['label'])` before matching anything?\n", "created_at": "2016-07-12T22:33:56Z", "updated_at": "2016-07-12T22:33:56Z", "html_url": "https://github.com/airbnb/synapse/pull/202#discussion_r70534883", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/202", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/70534883"}, "html": {"href": "https://github.com/airbnb/synapse/pull/202#discussion_r70534883"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/202"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/70534883/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/70536114", "pull_request_review_id": null, "id": 70536114, "diff_hunk": "@@ -102,15 +120,16 @@ def validate_discovery_opts\n       log.warn \"synapse: warning: a stub watcher with no default servers is pretty useless\" if @default_servers.empty?\n     end\n \n-    def filter_backends_by_label(backends, label_filter)\n-      filtered_backends = []\n-      backends.each do |backend|\n+    def backends_filtered_by_labels\n+      filtered_backends = @backends.select do |backend|\n         backend_labels = backend['labels'] || {}\n-        if label_filter['condition'] == 'equals' and backend_labels[label_filter['label']] == label_filter['value']\n-          filtered_backends << backend\n+        @label_filters.all? do |label_filter|\n+          (label_filter['condition'] == 'equals' &&\n+            backend_labels[label_filter['label']] == label_filter['value']) ||\n+          (label_filter['condition'] == 'not-equals' &&", "path": "lib/synapse/service_watcher/base.rb", "position": 78, "original_position": 78, "commit_id": "1b02254a5bb10f12111039bf2bb606f12d800dc5", "original_commit_id": "1b02254a5bb10f12111039bf2bb606f12d800dc5", "user": {"login": "scarletmeow", "id": 6128469, "avatar_url": "https://avatars2.githubusercontent.com/u/6128469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarletmeow", "html_url": "https://github.com/scarletmeow", "followers_url": "https://api.github.com/users/scarletmeow/followers", "following_url": "https://api.github.com/users/scarletmeow/following{/other_user}", "gists_url": "https://api.github.com/users/scarletmeow/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarletmeow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarletmeow/subscriptions", "organizations_url": "https://api.github.com/users/scarletmeow/orgs", "repos_url": "https://api.github.com/users/scarletmeow/repos", "events_url": "https://api.github.com/users/scarletmeow/events{/privacy}", "received_events_url": "https://api.github.com/users/scarletmeow/received_events", "type": "User", "site_admin": false}, "body": "As discussed offline:\n- `not-equals` will give the opposite truth table for `equals` operator\n- if users want to define behavior around missing or empty values, they can explicitly match against `nil`.\n", "created_at": "2016-07-12T22:43:38Z", "updated_at": "2016-07-12T22:43:38Z", "html_url": "https://github.com/airbnb/synapse/pull/202#discussion_r70536114", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/202", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/70536114"}, "html": {"href": "https://github.com/airbnb/synapse/pull/202#discussion_r70536114"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/202"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/70536114/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/73300964", "pull_request_review_id": null, "id": 73300964, "diff_hunk": "@@ -127,7 +127,12 @@ def discover\n \n       new_backends = []\n       @zk.children(@discovery['path'], :watch => true).each do |id|\n-        node = @zk.get(\"#{@discovery['path']}/#{id}\")\n+        begin\n+          node = @zk.get(\"#{@discovery['path']}/#{id}\")\n+        rescue ZK::Exceptions::NoNode => e\n+          log.error(\"synapse: consistency issue reading #{id} at #{@discovery['path']}: #{e}\")", "path": "lib/synapse/service_watcher/zookeeper.rb", "position": null, "original_position": 8, "commit_id": "cfa3feb84dc4279f45d2fecc60626600bda8718b", "original_commit_id": "405d746d0cd8cfc7b272a00773e36056b035aca8", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "i guess the idea here is that we found the node in the list, but then it disappeared before we could read it's contents. so, we will omit it from `new_backends`. should we make the log message more explanatory? people are going to be confused by what a `consistency issue` is, but it sounds pretty scary rather than routine.\n", "created_at": "2016-08-03T08:43:56Z", "updated_at": "2016-08-03T15:51:13Z", "html_url": "https://github.com/airbnb/synapse/pull/206#discussion_r73300964", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/206", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/73300964"}, "html": {"href": "https://github.com/airbnb/synapse/pull/206#discussion_r73300964"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/206"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/73300964/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/73301144", "pull_request_review_id": null, "id": 73301144, "diff_hunk": "@@ -127,7 +127,12 @@ def discover\n \n       new_backends = []\n       @zk.children(@discovery['path'], :watch => true).each do |id|\n-        node = @zk.get(\"#{@discovery['path']}/#{id}\")\n+        begin\n+          node = @zk.get(\"#{@discovery['path']}/#{id}\")\n+        rescue ZK::Exceptions::NoNode => e\n+          log.error(\"synapse: consistency issue reading #{id} at #{@discovery['path']}: #{e}\")", "path": "lib/synapse/service_watcher/zookeeper.rb", "position": null, "original_position": 8, "commit_id": "cfa3feb84dc4279f45d2fecc60626600bda8718b", "original_commit_id": "405d746d0cd8cfc7b272a00773e36056b035aca8", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "something like `\"synapse: node #{id} disappeared before it could be read\"` is probably fine, along with a comment in the code explaining why this could happen.\n", "created_at": "2016-08-03T08:45:32Z", "updated_at": "2016-08-03T15:51:13Z", "html_url": "https://github.com/airbnb/synapse/pull/206#discussion_r73301144", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/206", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/73301144"}, "html": {"href": "https://github.com/airbnb/synapse/pull/206#discussion_r73301144"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/206"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/73301144/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/73363795", "pull_request_review_id": null, "id": 73363795, "diff_hunk": "@@ -127,7 +127,12 @@ def discover\n \n       new_backends = []\n       @zk.children(@discovery['path'], :watch => true).each do |id|\n-        node = @zk.get(\"#{@discovery['path']}/#{id}\")\n+        begin\n+          node = @zk.get(\"#{@discovery['path']}/#{id}\")\n+        rescue ZK::Exceptions::NoNode => e\n+          log.error(\"synapse: consistency issue reading #{id} at #{@discovery['path']}: #{e}\")", "path": "lib/synapse/service_watcher/zookeeper.rb", "position": null, "original_position": 8, "commit_id": "cfa3feb84dc4279f45d2fecc60626600bda8718b", "original_commit_id": "405d746d0cd8cfc7b272a00773e36056b035aca8", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "ack, changed.\n", "created_at": "2016-08-03T15:51:25Z", "updated_at": "2016-08-03T15:51:25Z", "html_url": "https://github.com/airbnb/synapse/pull/206#discussion_r73363795", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/206", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/73363795"}, "html": {"href": "https://github.com/airbnb/synapse/pull/206#discussion_r73363795"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/206"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/73363795/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/85857881", "pull_request_review_id": 6548242, "id": 85857881, "diff_hunk": "@@ -1085,36 +1092,44 @@ def update_backends_at(socket_file_path, watchers)\n         watcher.backends.each do |backend|\n           backend_name = construct_name(backend)\n           if cur_backends[watcher.name].include? backend_name\n-            enabled_backends[watcher.name] << backend_name\n+            enabled_backends[watcher.name][backend_name] = 1", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 45, "commit_id": "61aee69f39bfcc7de7b3a0cad7ea95d13b59c17c", "original_commit_id": "84a7e32deb89133dbd8bfe9bb8445fa17c47c066", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "i'm having a lot of trouble understanding what `1` means here...\n", "created_at": "2016-11-01T00:06:23Z", "updated_at": "2016-11-05T06:50:33Z", "html_url": "https://github.com/airbnb/synapse/pull/211#discussion_r85857881", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/211", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/85857881"}, "html": {"href": "https://github.com/airbnb/synapse/pull/211#discussion_r85857881"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/211"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/85857881/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/85858277", "pull_request_review_id": 6548242, "id": 85858277, "diff_hunk": "@@ -1,3 +1,3 @@\n module Synapse\n-  VERSION = \"0.13.8\"\n+  VERSION = \"0.13.9\"", "path": "lib/synapse/version.rb", "position": null, "original_position": 3, "commit_id": "61aee69f39bfcc7de7b3a0cad7ea95d13b59c17c", "original_commit_id": "84a7e32deb89133dbd8bfe9bb8445fa17c47c066", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "don't bump the version as part of this PR. we should test this separately, and if it works then we can bump the version number as a separate change and then release the new version\n", "created_at": "2016-11-01T00:10:34Z", "updated_at": "2016-11-05T06:50:33Z", "html_url": "https://github.com/airbnb/synapse/pull/211#discussion_r85858277", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/211", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/85858277"}, "html": {"href": "https://github.com/airbnb/synapse/pull/211#discussion_r85858277"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/211"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/85858277/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/85858660", "pull_request_review_id": 6548242, "id": 85858660, "diff_hunk": "@@ -1060,20 +1064,23 @@ def update_backends_at(socket_file_path, watchers)\n \n       # parse the stats output to get current backends\n       cur_backends = {}\n+      re = Regexp.new('^(.+?),(.+?),(?:.*?,){15}(.+?),')\n+\n       info.split(\"\\n\").each do |line|\n         next if line[0] == '#'\n \n-        parts = line.split(',')\n-        next if ['FRONTEND', 'BACKEND'].include?(parts[1])\n+        name, addr, state = re.match(line)[1..3]\n \n-        cur_backends[parts[0]] ||= []\n-        cur_backends[parts[0]] << parts[1]\n+        next if ['FRONTEND', 'BACKEND'].include?(address)\n+\n+        cur_backends[name] ||= {}\n+        cur_backends[name][address] = state\n       end\n \n       # build a list of backends that should be enabled\n       enabled_backends = {}\n       watchers.each do |watcher|\n-        enabled_backends[watcher.name] = []\n+        enabled_backends[watcher.name] = {}", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 36, "commit_id": "61aee69f39bfcc7de7b3a0cad7ea95d13b59c17c", "original_commit_id": "84a7e32deb89133dbd8bfe9bb8445fa17c47c066", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "if you're turning this into a hash to speed up lookups, i would recommend using a Set instead\n", "created_at": "2016-11-01T00:14:36Z", "updated_at": "2016-11-05T06:50:33Z", "html_url": "https://github.com/airbnb/synapse/pull/211#discussion_r85858660", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/211", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/85858660"}, "html": {"href": "https://github.com/airbnb/synapse/pull/211#discussion_r85858660"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/211"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/85858660/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/85858735", "pull_request_review_id": 6548242, "id": 85858735, "diff_hunk": "@@ -8,6 +8,10 @@ class Haproxy\n     include Logging\n     attr_reader :opts\n \n+    HAPROXY_CMD_BATCH_SIZE = 4\n+\n+    HAPROXY_BACKEND_STATE_UP = 'UP'", "path": "lib/synapse/haproxy.rb", "position": null, "original_position": 6, "commit_id": "61aee69f39bfcc7de7b3a0cad7ea95d13b59c17c", "original_commit_id": "84a7e32deb89133dbd8bfe9bb8445fa17c47c066", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "eh i kind of changed my mind about this. we hardcode a bunch of magic strings all through the code here, i don't think extracting this one constant improves the situation.\n", "created_at": "2016-11-01T00:15:20Z", "updated_at": "2016-11-05T06:50:33Z", "html_url": "https://github.com/airbnb/synapse/pull/211#discussion_r85858735", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/211", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/85858735"}, "html": {"href": "https://github.com/airbnb/synapse/pull/211#discussion_r85858735"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/211"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/85858735/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/71786635", "pull_request_review_id": null, "id": 71786635, "diff_hunk": "@@ -134,12 +134,24 @@ The file has three main sections.\n \n The `services` section is a hash, where the keys are the `name` of the service to be configured.\n The name is just a human-readable string; it will be used in logs and notifications.\n-Each value in the services hash is also a hash, and should contain the following keys:\n+Each value in the services hash is also a hash, and must contain the following keys:\n+\n+* [`discovery`](#discovery): how synapse will discover hosts providing this service (see [below](#discovery))\n+\n+The services hash *should* contain a section on how to configure the routing/discovery", "path": "README.md", "position": null, "original_position": 9, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "451011fd095d4254a5b1cc1c67ac98eef6c1a3d7", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "s|routing/discovery|routing ?\n", "created_at": "2016-07-21T21:03:13Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r71786635", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/71786635"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r71786635"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/71786635/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/71786867", "pull_request_review_id": null, "id": 71786867, "diff_hunk": "@@ -134,12 +134,24 @@ The file has three main sections.\n \n The `services` section is a hash, where the keys are the `name` of the service to be configured.\n The name is just a human-readable string; it will be used in logs and notifications.\n-Each value in the services hash is also a hash, and should contain the following keys:\n+Each value in the services hash is also a hash, and must contain the following keys:\n+\n+* [`discovery`](#discovery): how synapse will discover hosts providing this service (see [below](#discovery))\n+\n+The services hash *should* contain a section on how to configure the routing/discovery\n+component you wish to use for this particular service. The only choice currently\n+is `haproxy`:\n \n-* [`discovery`](#discovery): how synapse will discover hosts providing this service (see below)\n-* `default_servers`: the list of default servers providing this service; synapse uses these if no others can be discovered\n * [`haproxy`](#haproxysvc): how will the haproxy section for this service be configured\n \n+The services hash may contain the following keys:\n+\n+* `default_servers` (default: \\[\\]): the list of default servers providing this service; synapse uses these if no others can be discovered. See [Listing Default Servers](#defaultservers).", "path": "README.md", "position": null, "original_position": 19, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "451011fd095d4254a5b1cc1c67ac98eef6c1a3d7", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "maybe \"default: `[]`\" ?\n", "created_at": "2016-07-21T21:04:41Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r71786867", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/71786867"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r71786867"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/71786867/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/71787014", "pull_request_review_id": null, "id": 71787014, "diff_hunk": "@@ -238,6 +250,7 @@ It takes the following options:\n * `check_interval`: How often to request the list of tasks from Marathon (default: 10 seconds)\n * `port_index`: Index of the backend port in the task's \"ports\" array. (default: 0)\n \n+<a name=defaultservers>", "path": "README.md", "position": null, "original_position": 45, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "451011fd095d4254a5b1cc1c67ac98eef6c1a3d7", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "should these `<a` have a `/>` to close the tags?\n", "created_at": "2016-07-21T21:05:47Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r71787014", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/71787014"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r71787014"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/71787014/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/71787157", "pull_request_review_id": null, "id": 71787157, "diff_hunk": "@@ -85,15 +76,30 @@ def reconfigure!\n       @config_updated = true\n     end\n \n+    def available_generators\n+      res = Hash[@config_generators.collect{|cg| [cg.name, cg]}]", "path": "lib/synapse.rb", "position": null, "original_position": 48, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "451011fd095d4254a5b1cc1c67ac98eef6c1a3d7", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "`res` is unused\n", "created_at": "2016-07-21T21:06:48Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r71787157", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/71787157"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r71787157"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/71787157/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/71793332", "pull_request_review_id": null, "id": 71793332, "diff_hunk": "@@ -792,8 +795,6 @@ class Haproxy\n     STATE_FILE_UPDATE_INTERVAL = 60.freeze # iterations; not a unit of time\n \n     def initialize(opts)\n-      super()\n-\n       %w{global defaults reload_command}.each do |req|\n         raise ArgumentError, \"haproxy requires a #{req} section\" if !opts.has_key?(req)\n       end", "path": "lib/synapse/config_generator/haproxy.rb", "position": null, "original_position": 28, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "451011fd095d4254a5b1cc1c67ac98eef6c1a3d7", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Not related to this PR, but we should make sure we fix the ordering of req_pairs and setting default values for do_writes/do_socket/do_reloads. I'll fix that in the next iteration.\n", "created_at": "2016-07-21T21:45:16Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r71793332", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/71793332"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r71793332"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/71793332/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/71796408", "pull_request_review_id": null, "id": 71796408, "diff_hunk": "@@ -0,0 +1,64 @@\n+## ConfigGenerator Classes\n+\n+Generators are the piece of Synapse that react to changes in service\n+registrations and actually reflect those changes in local state.\n+Generators should conform to the interface specified by `BaseGenerator` and\n+when your generator has received an update synapse via `update_config` it", "path": "lib/synapse/config_generator/README.md", "position": null, "original_position": 6, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "451011fd095d4254a5b1cc1c67ac98eef6c1a3d7", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "an update _from_ synapse?\n", "created_at": "2016-07-21T22:06:34Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r71796408", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/71796408"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r71796408"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/71796408/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/71928864", "pull_request_review_id": null, "id": 71928864, "diff_hunk": "@@ -134,12 +134,24 @@ The file has three main sections.\n \n The `services` section is a hash, where the keys are the `name` of the service to be configured.\n The name is just a human-readable string; it will be used in logs and notifications.\n-Each value in the services hash is also a hash, and should contain the following keys:\n+Each value in the services hash is also a hash, and must contain the following keys:\n+\n+* [`discovery`](#discovery): how synapse will discover hosts providing this service (see [below](#discovery))\n+\n+The services hash *should* contain a section on how to configure the routing/discovery", "path": "README.md", "position": null, "original_position": 9, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "451011fd095d4254a5b1cc1c67ac98eef6c1a3d7", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Sure, I view the file_output as more discovery than routing (unlike haproxy which is both), but sure.\n", "created_at": "2016-07-22T19:00:04Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r71928864", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/71928864"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r71928864"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/71928864/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/71928980", "pull_request_review_id": null, "id": 71928980, "diff_hunk": "@@ -134,12 +134,24 @@ The file has three main sections.\n \n The `services` section is a hash, where the keys are the `name` of the service to be configured.\n The name is just a human-readable string; it will be used in logs and notifications.\n-Each value in the services hash is also a hash, and should contain the following keys:\n+Each value in the services hash is also a hash, and must contain the following keys:\n+\n+* [`discovery`](#discovery): how synapse will discover hosts providing this service (see [below](#discovery))\n+\n+The services hash *should* contain a section on how to configure the routing/discovery\n+component you wish to use for this particular service. The only choice currently\n+is `haproxy`:\n \n-* [`discovery`](#discovery): how synapse will discover hosts providing this service (see below)\n-* `default_servers`: the list of default servers providing this service; synapse uses these if no others can be discovered\n * [`haproxy`](#haproxysvc): how will the haproxy section for this service be configured\n \n+The services hash may contain the following keys:\n+\n+* `default_servers` (default: \\[\\]): the list of default servers providing this service; synapse uses these if no others can be discovered. See [Listing Default Servers](#defaultservers).", "path": "README.md", "position": null, "original_position": 19, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "451011fd095d4254a5b1cc1c67ac98eef6c1a3d7", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "done\n", "created_at": "2016-07-22T19:00:56Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r71928980", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/71928980"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r71928980"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/71928980/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/71929559", "pull_request_review_id": null, "id": 71929559, "diff_hunk": "@@ -238,6 +250,7 @@ It takes the following options:\n * `check_interval`: How often to request the list of tasks from Marathon (default: 10 seconds)\n * `port_index`: Index of the backend port in the task's \"ports\" array. (default: 0)\n \n+<a name=defaultservers>", "path": "README.md", "position": null, "original_position": 45, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "451011fd095d4254a5b1cc1c67ac98eef6c1a3d7", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "indeed, on it\n", "created_at": "2016-07-22T19:04:58Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r71929559", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/71929559"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r71929559"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/71929559/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/71929684", "pull_request_review_id": null, "id": 71929684, "diff_hunk": "@@ -85,15 +76,30 @@ def reconfigure!\n       @config_updated = true\n     end\n \n+    def available_generators\n+      res = Hash[@config_generators.collect{|cg| [cg.name, cg]}]", "path": "lib/synapse.rb", "position": null, "original_position": 48, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "451011fd095d4254a5b1cc1c67ac98eef6c1a3d7", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "oops, leftover from some debugging\n", "created_at": "2016-07-22T19:05:39Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r71929684", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/71929684"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r71929684"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/71929684/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/71933355", "pull_request_review_id": null, "id": 71933355, "diff_hunk": "@@ -792,8 +795,6 @@ class Haproxy\n     STATE_FILE_UPDATE_INTERVAL = 60.freeze # iterations; not a unit of time\n \n     def initialize(opts)\n-      super()\n-\n       %w{global defaults reload_command}.each do |req|\n         raise ArgumentError, \"haproxy requires a #{req} section\" if !opts.has_key?(req)\n       end", "path": "lib/synapse/config_generator/haproxy.rb", "position": null, "original_position": 28, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "451011fd095d4254a5b1cc1c67ac98eef6c1a3d7", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Alright, I cleaned this up and added some more (regression?) tests\n", "created_at": "2016-07-22T19:33:07Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r71933355", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/71933355"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r71933355"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/71933355/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/71933424", "pull_request_review_id": null, "id": 71933424, "diff_hunk": "@@ -0,0 +1,64 @@\n+## ConfigGenerator Classes\n+\n+Generators are the piece of Synapse that react to changes in service\n+registrations and actually reflect those changes in local state.\n+Generators should conform to the interface specified by `BaseGenerator` and\n+when your generator has received an update synapse via `update_config` it", "path": "lib/synapse/config_generator/README.md", "position": null, "original_position": 6, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "451011fd095d4254a5b1cc1c67ac98eef6c1a3d7", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "done\n", "created_at": "2016-07-22T19:33:37Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r71933424", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/71933424"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r71933424"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/71933424/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/72666447", "pull_request_review_id": null, "id": 72666447, "diff_hunk": "@@ -134,12 +134,24 @@ The file has three main sections.\n \n The `services` section is a hash, where the keys are the `name` of the service to be configured.\n The name is just a human-readable string; it will be used in logs and notifications.\n-Each value in the services hash is also a hash, and should contain the following keys:\n+Each value in the services hash is also a hash, and must contain the following keys:\n+\n+* [`discovery`](#discovery): how synapse will discover hosts providing this service (see [below](#discovery))\n+\n+The services hash *should* contain a section on how to configure the routing\n+component you wish to use for this particular service. The only choice currently\n+is `haproxy`:\n \n-* [`discovery`](#discovery): how synapse will discover hosts providing this service (see below)\n-* `default_servers`: the list of default servers providing this service; synapse uses these if no others can be discovered\n * [`haproxy`](#haproxysvc): how will the haproxy section for this service be configured\n \n+The services hash may contain the following keys:\n+\n+* `default_servers` (default: `[]`): the list of default servers providing this service; synapse uses these if no others can be discovered. See [Listing Default Servers](#defaultservers).\n+* `keep_default_servers` (default: false): whether default servers should be added to discovered services\n+* `use_previous_backends` (default: true): if at any time the registry drops all backends, use previous backends we already know about.\n+<a name=\"backend_port_override\"/>\n+* `backend_port_override`: the port that discovered servers listen on; you should specify this if your discovery mechanism only discovers names or addresses (like the DNS watcher or the Ec2TagWatcher). If the discovery method discovers a port along with hostnames (like the zookeeper watcher) this option may be left out, but will be used in preference if given.\n+", "path": "README.md", "position": 24, "original_position": 24, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "f8559a38d58fdab70027c3e8d1af7e501caf5b09", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "I've noticed that this isn't actually a full list. Let's document all the options that we can set (filters, leader_election, etc ...)\n", "created_at": "2016-07-28T17:36:49Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r72666447", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/72666447"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r72666447"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/72666447/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99664301", "pull_request_review_id": 20348156, "id": 99664301, "diff_hunk": "@@ -0,0 +1,20 @@\n+require 'synapse/log'\n+require 'synapse/config_generator/base'\n+\n+module Synapse\n+  class ConfigGenerator\n+    # the type which actually dispatches generator creation requests\n+    def self.create(type, opts)\n+      generator = begin\n+        type = type.downcase\n+        require \"synapse/config_generator/#{type}\"", "path": "lib/synapse/config_generator.rb", "position": 10, "original_position": 10, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "one of the things i regret about the synapse design is that there's no easy way to add custom functionality without forking the repo. for instance, lets say you wanted to run your own custom config generator. you can submit a PR upstream, and we can try to decide whether to include your config generator into the project (and maintain it forever going forward), or whether to tell you to bugger off, in which case you'll fork or just give up.\r\n\r\nin interferon (our alerting framework) i designed for open-source by creating a complicated class loader that allowed you to just specify in the config where your custom classes would be located, so you can just install the off-the-shelf project and then add your own functionality to it. that code lives here: https://github.com/airbnb/interferon/blob/master/lib/interferon/loaders.rb\r\n\r\ni wonder if we can implement something similar for smartstack. this is probably not the right PR to do it, but just setting down some thoughts.", "created_at": "2017-02-06T19:30:54Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r99664301", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99664301"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r99664301"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99664301/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99664635", "pull_request_review_id": 20348156, "id": 99664635, "diff_hunk": "@@ -0,0 +1,64 @@\n+## ConfigGenerator Classes\n+\n+Generators are the piece of Synapse that react to changes in service\n+registrations and actually reflect those changes in local state.\n+Generators should conform to the interface specified by `BaseGenerator` and\n+when your generator has received an update from synapse via `update_config` it\n+should sync the watcher state with the external configuration (e.g. HAProxy\n+state)\n+\n+```ruby\n+require \"synapse/config_generator/base\"\n+\n+class Synapse::ServiceGenerator\n+  class MyGenerator < BaseGenerator\n+    # The generator name is used to find service specific\n+    # configuration in the service watchers. When supplying\n+    # per service config, use this as the key\n+    NAME = 'my_generator'.freeze\n+\n+    def update_config(watchers)\n+      # synapse will call this method whenever watcher state changes with the\n+      # watcher state. You should reflect that state in the local config state\n+    end\n+\n+    def tick\n+      # Called every loop of the main Synapse loop regardless of watcher #", "path": "lib/synapse/config_generator/README.md", "position": null, "original_position": 26, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "nit: extra `#`", "created_at": "2017-02-06T19:32:16Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r99664635", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99664635"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r99664635"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99664635/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99664762", "pull_request_review_id": 20348156, "id": 99664762, "diff_hunk": "@@ -0,0 +1,64 @@\n+## ConfigGenerator Classes\n+\n+Generators are the piece of Synapse that react to changes in service\n+registrations and actually reflect those changes in local state.\n+Generators should conform to the interface specified by `BaseGenerator` and\n+when your generator has received an update from synapse via `update_config` it\n+should sync the watcher state with the external configuration (e.g. HAProxy\n+state)\n+\n+```ruby\n+require \"synapse/config_generator/base\"\n+\n+class Synapse::ServiceGenerator\n+  class MyGenerator < BaseGenerator\n+    # The generator name is used to find service specific\n+    # configuration in the service watchers. When supplying\n+    # per service config, use this as the key\n+    NAME = 'my_generator'.freeze\n+\n+    def update_config(watchers)\n+      # synapse will call this method whenever watcher state changes with the\n+      # watcher state. You should reflect that state in the local config state\n+    end\n+\n+    def tick\n+      # Called every loop of the main Synapse loop regardless of watcher #\n+      # changes (roughly ~1s), you can use this to rate limit how often your", "path": "lib/synapse/config_generator/README.md", "position": null, "original_position": 27, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "nit: run-on sentence. `(roughly ~1s). You can`", "created_at": "2017-02-06T19:32:47Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r99664762", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99664762"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r99664762"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99664762/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99665762", "pull_request_review_id": 20348156, "id": 99665762, "diff_hunk": "@@ -0,0 +1,64 @@\n+## ConfigGenerator Classes\n+\n+Generators are the piece of Synapse that react to changes in service\n+registrations and actually reflect those changes in local state.\n+Generators should conform to the interface specified by `BaseGenerator` and\n+when your generator has received an update from synapse via `update_config` it\n+should sync the watcher state with the external configuration (e.g. HAProxy\n+state)\n+\n+```ruby\n+require \"synapse/config_generator/base\"\n+\n+class Synapse::ServiceGenerator\n+  class MyGenerator < BaseGenerator\n+    # The generator name is used to find service specific\n+    # configuration in the service watchers. When supplying\n+    # per service config, use this as the key\n+    NAME = 'my_generator'.freeze\n+\n+    def update_config(watchers)\n+      # synapse will call this method whenever watcher state changes with the\n+      # watcher state. You should reflect that state in the local config state\n+    end\n+\n+    def tick\n+      # Called every loop of the main Synapse loop regardless of watcher #\n+      # changes (roughly ~1s), you can use this to rate limit how often your\n+      # config generator actually reconfigures external services (e.g. HAProxy\n+      # may need to rate limit reloads as those can be disruptive to in\n+      # flight connections\n+    end\n+\n+    def normalize_config_generator_opts!(service_watcher_name, service_watcher_opts)\n+      # Every service section can contain configuration that changes how the\n+      # config generator reacts for that particular service. Typically this", "path": "lib/synapse/config_generator/README.md", "position": null, "original_position": 35, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "nit: took me a few tries to parse this sentence. maybe change `configuration` with `options` so we don't confuse the configuration for the configuration generator with the configuration the configuration generator generates? so, something like:\r\n\r\n> Every service section can contain options which change how the config generator reacts for that particular service. In this function, you should set any missing/default options. This is also a good place to raise errors in case any options are invalid.\r\n", "created_at": "2017-02-06T19:37:23Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r99665762", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99665762"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r99665762"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99665762/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99666099", "pull_request_review_id": 20348156, "id": 99666099, "diff_hunk": "@@ -0,0 +1,64 @@\n+## ConfigGenerator Classes\n+\n+Generators are the piece of Synapse that react to changes in service\n+registrations and actually reflect those changes in local state.\n+Generators should conform to the interface specified by `BaseGenerator` and\n+when your generator has received an update from synapse via `update_config` it\n+should sync the watcher state with the external configuration (e.g. HAProxy\n+state)\n+\n+```ruby\n+require \"synapse/config_generator/base\"\n+\n+class Synapse::ServiceGenerator\n+  class MyGenerator < BaseGenerator\n+    # The generator name is used to find service specific\n+    # configuration in the service watchers. When supplying\n+    # per service config, use this as the key\n+    NAME = 'my_generator'.freeze\n+\n+    def update_config(watchers)\n+      # synapse will call this method whenever watcher state changes with the\n+      # watcher state. You should reflect that state in the local config state\n+    end\n+\n+    def tick\n+      # Called every loop of the main Synapse loop regardless of watcher #\n+      # changes (roughly ~1s), you can use this to rate limit how often your\n+      # config generator actually reconfigures external services (e.g. HAProxy\n+      # may need to rate limit reloads as those can be disruptive to in\n+      # flight connections\n+    end\n+\n+    def normalize_config_generator_opts!(service_watcher_name, service_watcher_opts)\n+      # Every service section can contain configuration that changes how the\n+      # config generator reacts for that particular service. Typically this\n+      # is a good place to ensure you set config your generator expects every\n+      # service to supply in case they don't supply it\n+    end\n+  end\n+end\n+```\n+\n+### Generator Plugin Inteface\n+Synapse deduces both the class path and class name from any additional keys\n+passed to the top level configuration, which it assumes are equal to the `NAME`\n+of some ConfigGenerator. For example, if `haproxy` is set at the top level we\n+try to load the `Haproxy` `ConfigGenerator`.\n+\n+#### Class Location\n+Synapse expects to find your class at `synapse/config_generator/#{name}`. You\n+must make your generator available at that path, and Synapse can \"just work\" and\n+find it.\n+\n+#### Class Name\n+These type strings are then transformed into class names via the following\n+function:\n+\n+```\n+type_class  = type.split('_').map{|x| x.capitalize}\n+```\n+\n+This has the effect of taking the method, splitting on '_', capitalizing each", "path": "lib/synapse/config_generator/README.md", "position": null, "original_position": 62, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "nit: ```s/'/`/```", "created_at": "2017-02-06T19:38:48Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r99666099", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99666099"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r99666099"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99666099/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99666336", "pull_request_review_id": 20348156, "id": 99666336, "diff_hunk": "@@ -0,0 +1,37 @@\n+require 'synapse/log'\n+\n+class Synapse::ConfigGenerator\n+  class BaseGenerator\n+    include Synapse::Logging\n+\n+    NAME = 'base'.freeze\n+\n+    # Exposes NAME as 'name' so we can remain consistent with how we refer to\n+    # service_watchers' by generator.name access (instead of\n+    # generator.class::NAME) even though the names of generators don't change\n+    def name\n+      self.class::NAME\n+    end\n+\n+    # The synapse main loop will call this any time watchers change, the\n+    # config_generator is responsible for diffing the passed watcher state\n+    # against the output configuration\n+    def update_config(watchers)", "path": "lib/synapse/config_generator/base.rb", "position": 25, "original_position": 19, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "should we raise `NotImplementedError` in these?", "created_at": "2017-02-06T19:39:50Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r99666336", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99666336"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r99666336"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99666336/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99667758", "pull_request_review_id": 20348156, "id": 99667758, "diff_hunk": "@@ -792,29 +795,27 @@ class Haproxy\n     STATE_FILE_UPDATE_INTERVAL = 60.freeze # iterations; not a unit of time\n \n     def initialize(opts)\n-      super()\n-\n-      %w{global defaults reload_command}.each do |req|\n+      %w{global defaults}.each do |req|", "path": "lib/synapse/config_generator/haproxy.rb", "position": null, "original_position": 27, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "random note: we implement a lot of things as instance variables, which is a reason we have such a long `initialize`. we should probably be implementing them as accessor methods. for instance, instead of:\r\n```ruby\r\n@time = 0\r\n```\r\n\r\nwe should do\r\n```ruby\r\ndef time\r\n  @time ||= 0\r\nend\r\n```\r\n\r\nand use `time` instead of `@time` in the code.", "created_at": "2017-02-06T19:46:02Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r99667758", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99667758"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r99667758"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99667758/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99668362", "pull_request_review_id": 20348156, "id": 99668362, "diff_hunk": "@@ -85,15 +76,30 @@ def reconfigure!\n       @config_updated = true\n     end\n \n+    def available_generators\n+      Hash[@config_generators.collect{|cg| [cg.name, cg]}]", "path": "lib/synapse.rb", "position": 48, "original_position": 48, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "we should memoize this, both for performance and to indicate to users that it won't change after being initially set:\r\n\r\n```ruby\r\ndef available_generators\r\n  @available_generators ||= Hash[]\r\nend\r\n```", "created_at": "2017-02-06T19:48:59Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r99668362", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99668362"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r99668362"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99668362/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99672714", "pull_request_review_id": 20348156, "id": 99672714, "diff_hunk": "@@ -33,16 +33,10 @@ def initialize(opts={}, synapse)\n       @leader_election = opts['leader_election'] || false\n       @leader_last_warn = Time.now - LEADER_WARN_INTERVAL\n \n-      # the haproxy config\n-      @haproxy = opts['haproxy']\n-      @haproxy['server_options'] ||= \"\"\n-      @haproxy['server_port_override'] ||= nil\n-      %w{backend frontend listen}.each do |sec|\n-        @haproxy[sec] ||= []\n-      end\n-\n-      unless @haproxy.include?('port')\n-        log.warn \"synapse: service #{name}: haproxy config does not include a port; only backend sections for the service will be created; you must move traffic there manually using configuration in `extra_sections`\"\n+      @generator_config = {}\n+      @synapse.available_generators.each do |generator_name, generator|\n+        @generator_config[generator_name] = opts[generator_name] || {}", "path": "lib/synapse/service_watcher/base.rb", "position": null, "original_position": 34, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "i would prefer a more functional declaration:\r\n\r\n```ruby\r\ndef generator_config\r\n  @generator_config ||= Hash[@synapse.available_generators.map do |gen_name, gen|\r\n    gen_opts = opts[gen_name] || {}\r\n    normalized_opts = gen.normalize_config_generator_opts!(gen_opts)\r\n    [gen_name, normalized_opts]\r\n  end]\r\nend\r\n```\r\n\r\nthis might require us to persist the opts in the initializer:\r\n```ruby\r\nattr_reader :opts\r\ndef initialize(opts = {}, synapse)\r\n  @opts = opts\r\nend\r\n```", "created_at": "2017-02-06T20:08:30Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r99672714", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99672714"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r99672714"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99672714/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99673977", "pull_request_review_id": 20348156, "id": 99673977, "diff_hunk": "@@ -0,0 +1,37 @@\n+require 'synapse/log'\n+\n+class Synapse::ConfigGenerator\n+  class BaseGenerator\n+    include Synapse::Logging\n+\n+    NAME = 'base'.freeze\n+\n+    # Exposes NAME as 'name' so we can remain consistent with how we refer to\n+    # service_watchers' by generator.name access (instead of\n+    # generator.class::NAME) even though the names of generators don't change\n+    def name\n+      self.class::NAME\n+    end\n+\n+    # The synapse main loop will call this any time watchers change, the\n+    # config_generator is responsible for diffing the passed watcher state\n+    # against the output configuration\n+    def update_config(watchers)\n+    end\n+\n+    # The synapse main loop will call this every tick\n+    # of the logical clock (~1s). You can use this to intiate reloads\n+    # or restarts in a rate limited fashion\n+    def tick\n+    end\n+\n+    # Service watchers have a subsection of their ``services`` entry that is\n+    # dedicated to the watcher specific configuration for how to configure\n+    # the config generator. This method will be called with each of these\n+    # watcher hashes, and should normalize them to what the config generator\n+    # needs, such as adding defaults. Mutate the passed hash\n+    def normalize_config_generator_opts!(service_watcher_name, service_watcher_opts)", "path": "lib/synapse/config_generator/base.rb", "position": null, "original_position": 33, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "i was confused by there being two sources of options for a config generator. the first is the options passed to the `initialize` method, which contain overall options. the second is the watcher-specific options for this config generator.\r\n\r\nmaybe we should call these options `watcher_opts` rather than `config_generator_opts` to clarify the distinction?\r\n\r\nalso, should we really be encouraging side-effects? this might lead to trouble. given how we actually use this code below, returning a copy of the passed-in hash would work just as well. we should encourage users to do something like:\r\n```ruby\r\ndef normalize_watcher_opts(watcher_name, watcher_opts)\r\n  defaults = {}\r\n  normalized_opts = watcher_opts.merge(defaults)\r\nend\r\n```\r\n\r\nfinally, i was also confused by the fact that we have to reach into the watchers to get the config generator options each time we generate a config for that watcher. i guess i'm not sure what to do about that problem, but i'm kind of annoyed about repeated calls to, e.g., `watcher.generator_opts['haproxy']` ", "created_at": "2017-02-06T20:14:56Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r99673977", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99673977"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r99673977"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99673977/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99676725", "pull_request_review_id": 20348156, "id": 99676725, "diff_hunk": "@@ -0,0 +1,64 @@\n+## ConfigGenerator Classes\n+\n+Generators are the piece of Synapse that react to changes in service\n+registrations and actually reflect those changes in local state.\n+Generators should conform to the interface specified by `BaseGenerator` and\n+when your generator has received an update from synapse via `update_config` it\n+should sync the watcher state with the external configuration (e.g. HAProxy\n+state)\n+\n+```ruby\n+require \"synapse/config_generator/base\"\n+\n+class Synapse::ServiceGenerator\n+  class MyGenerator < BaseGenerator\n+    # The generator name is used to find service specific\n+    # configuration in the service watchers. When supplying\n+    # per service config, use this as the key\n+    NAME = 'my_generator'.freeze\n+", "path": "lib/synapse/config_generator/README.md", "position": 19, "original_position": 19, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "we should document `initialize`:\r\n\r\n```ruby\r\n# The generator will be passed-in any options specified in it's dedicated section. Those are\r\n# given as an `opts` hash to the initializer. You may (and probably should) omit this method,\r\n# or you can declare your own -- remember to invoke the parent initializer!\r\ndef initialize(opts = {})\r\n  super(opts)\r\nend\r\n```", "created_at": "2017-02-06T20:29:49Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r99676725", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99676725"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r99676725"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99676725/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99676913", "pull_request_review_id": 20348156, "id": 99676913, "diff_hunk": "@@ -0,0 +1,37 @@\n+require 'synapse/log'\n+\n+class Synapse::ConfigGenerator\n+  class BaseGenerator\n+    include Synapse::Logging\n+\n+    NAME = 'base'.freeze\n+\n+    # Exposes NAME as 'name' so we can remain consistent with how we refer to\n+    # service_watchers' by generator.name access (instead of\n+    # generator.class::NAME) even though the names of generators don't change\n+    def name\n+      self.class::NAME\n+    end\n+", "path": "lib/synapse/config_generator/base.rb", "position": 21, "original_position": 15, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "should we add a default initializer?\r\n```ruby\r\nattr_reader :opts\r\ndef initialize(opts = {})\r\n  @opts = opts\r\nend\r\n```", "created_at": "2017-02-06T20:30:47Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r99676913", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99676913"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r99676913"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99676913/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99678950", "pull_request_review_id": 20348156, "id": 99678950, "diff_hunk": "@@ -961,17 +973,28 @@ def validate_haproxy_stanza(stanza, stanza_type, service_name)\n \n     # generates an individual stanza for a particular watcher\n     def generate_frontend_stanza(watcher, config)\n-      unless watcher.haproxy.has_key?(\"port\")\n+      unless watcher.generator_config['haproxy'].has_key?(\"port\")", "path": "lib/synapse/config_generator/haproxy.rb", "position": null, "original_position": 117, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "can we declare a `watcher_opts` var so we don't have to keep calling `watcher.generator_config['haproxy']`? also, should we be hard-coding `'haproxy'`? i think we should use `name`:\r\n\r\n```ruby\r\nwatcher_opts = watcher.generator_config[name]\r\n```", "created_at": "2017-02-06T20:41:38Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r99678950", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99678950"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r99678950"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99678950/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99679164", "pull_request_review_id": 20348156, "id": 99679164, "diff_hunk": "@@ -961,17 +973,28 @@ def validate_haproxy_stanza(stanza, stanza_type, service_name)\n \n     # generates an individual stanza for a particular watcher\n     def generate_frontend_stanza(watcher, config)\n-      unless watcher.haproxy.has_key?(\"port\")\n+      unless watcher.generator_config['haproxy'].has_key?(\"port\")\n         log.debug \"synapse: not generating frontend stanza for watcher #{watcher.name} because it has no port defined\"\n         return []\n+      else\n+        port = watcher.generator_config['haproxy']['port']", "path": "lib/synapse/config_generator/haproxy.rb", "position": null, "original_position": 121, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "we can probably do:\r\n```ruby\r\nport = watcher_opts['port']\r\nunless port\r\nend\r\n```", "created_at": "2017-02-06T20:42:41Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r99679164", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99679164"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r99679164"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99679164/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99679295", "pull_request_review_id": 20348156, "id": 99679295, "diff_hunk": "@@ -1005,7 +1028,8 @@ def generate_backend_stanza(watcher, config)\n         log.debug \"synapse: no backends found for watcher #{watcher.name}\"\n       end\n \n-      keys = case watcher.haproxy['backend_order']\n+      watcher_haproxy = watcher.generator_config['haproxy']", "path": "lib/synapse/config_generator/haproxy.rb", "position": null, "original_position": 150, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "whenever we do this, lets keep the name consistent. i propose `watcher_opts` as a variable that generally refers to the watcher-specific options for the current generator", "created_at": "2017-02-06T20:43:27Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r99679295", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99679295"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r99679295"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99679295/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99679850", "pull_request_review_id": 20348156, "id": 99679850, "diff_hunk": "@@ -1151,9 +1176,9 @@ def restart\n       @next_restart += rand(@restart_jitter * @restart_interval + 1)\n \n       # do the actual restart\n-      res = `#{opts['reload_command']}`.chomp\n+      res = `#{@opts['reload_command']}`.chomp", "path": "lib/synapse/config_generator/haproxy.rb", "position": null, "original_position": 192, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "i feel like we should be moving towards accessor methods and away from explicit instance vars, not the other way. this makes testing easier, since you can `allow(generator).to receive(:opts).and_return({})` rather than resorting to meta-programming in the specs (`generator.instance_variable_set(:ops, {})`)", "created_at": "2017-02-06T20:46:27Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r99679850", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99679850"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r99679850"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99679850/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99680000", "pull_request_review_id": 20348156, "id": 99680000, "diff_hunk": "@@ -7,15 +7,15 @@ class BaseWatcher\n \n     LEADER_WARN_INTERVAL = 30\n \n-    attr_reader :name, :haproxy\n+    attr_reader :name, :generator_config", "path": "lib/synapse/service_watcher/base.rb", "position": null, "original_position": 5, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "should `generator_config` be  plural?", "created_at": "2017-02-06T20:47:08Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r99680000", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99680000"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r99680000"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99680000/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99680523", "pull_request_review_id": 20348156, "id": 99680523, "diff_hunk": "@@ -55,13 +49,28 @@ def initialize(opts={}, synapse)\n       # use the previous backends that we already know about.\n       @use_previous_backends = opts.fetch('use_previous_backends', true)\n \n+      # If backends discovered with this watcher lack ports or discovered\n+      # ports should be ignored, this option indicates that\n+      @backend_port_override = opts['backend_port_override'] || nil\n+\n+      # For backwards compatability we support server_port_override\n+      # This will be removed in future versions\n+      if @backend_port_override.nil? && @generator_config['haproxy']\n+        @backend_port_override = @generator_config['haproxy']['server_port_override']\n+      end\n+\n       # set a flag used to tell the watchers to exit\n       # this is not used in every watcher\n       @should_exit = false\n \n       validate_discovery_opts\n     end\n \n+    def haproxy\n+      log.warn \"synapse: service watcher #{@name} accessing watcher.haproxy. This is DEPRECATED and will be removed in future iterations, use watcher.generator_config['haproxy'] instead.\"\n+      @generator_config['haproxy']", "path": "lib/synapse/service_watcher/base.rb", "position": null, "original_position": 62, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "![image](https://cloud.githubusercontent.com/assets/200575/22665748/bd659b98-ec6a-11e6-8c81-57d04e1b8cd1.png)\r\n", "created_at": "2017-02-06T20:49:50Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r99680523", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99680523"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r99680523"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99680523/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99680910", "pull_request_review_id": 20348156, "id": 99680910, "diff_hunk": "@@ -55,13 +49,28 @@ def initialize(opts={}, synapse)\n       # use the previous backends that we already know about.\n       @use_previous_backends = opts.fetch('use_previous_backends', true)\n \n+      # If backends discovered with this watcher lack ports or discovered\n+      # ports should be ignored, this option indicates that\n+      @backend_port_override = opts['backend_port_override'] || nil\n+\n+      # For backwards compatability we support server_port_override\n+      # This will be removed in future versions", "path": "lib/synapse/service_watcher/base.rb", "position": 54, "original_position": 48, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": ":+1:", "created_at": "2017-02-06T20:51:46Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r99680910", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99680910"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r99680910"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99680910/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99680981", "pull_request_review_id": 20348156, "id": 99680981, "diff_hunk": "@@ -85,15 +76,30 @@ def reconfigure!\n       @config_updated = true\n     end\n \n+    def available_generators\n+      Hash[@config_generators.collect{|cg| [cg.name, cg]}]\n+    end\n+\n     private\n     def create_service_watchers(services={})\n-      service_watchers =[]\n+      service_watchers = []", "path": "lib/synapse.rb", "position": 54, "original_position": 54, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "\ud83d\udcaf ", "created_at": "2017-02-06T20:52:08Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r99680981", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99680981"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r99680981"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99680981/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99681627", "pull_request_review_id": 20348156, "id": 99681627, "diff_hunk": "@@ -55,13 +49,28 @@ def initialize(opts={}, synapse)\n       # use the previous backends that we already know about.\n       @use_previous_backends = opts.fetch('use_previous_backends', true)\n \n+      # If backends discovered with this watcher lack ports or discovered\n+      # ports should be ignored, this option indicates that\n+      @backend_port_override = opts['backend_port_override'] || nil\n+\n+      # For backwards compatability we support server_port_override\n+      # This will be removed in future versions\n+      if @backend_port_override.nil? && @generator_config['haproxy']\n+        @backend_port_override = @generator_config['haproxy']['server_port_override']\n+      end\n+\n       # set a flag used to tell the watchers to exit\n       # this is not used in every watcher\n       @should_exit = false\n \n       validate_discovery_opts\n     end\n \n+    def haproxy\n+      log.warn \"synapse: service watcher #{@name} accessing watcher.haproxy. This is DEPRECATED and will be removed in future iterations, use watcher.generator_config['haproxy'] instead.\"", "path": "lib/synapse/service_watcher/base.rb", "position": null, "original_position": 61, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "we're going to end up logging this warning quite a lot. maybe we should only do it once?", "created_at": "2017-02-06T20:55:06Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r99681627", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99681627"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r99681627"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99681627/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99681874", "pull_request_review_id": 20348156, "id": 99681874, "diff_hunk": "@@ -36,13 +36,13 @@ def validate_discovery_opts\n \n       # As we're only looking up instances with hostnames/IPs, need to\n       # be explicitly told which port the service we're balancing for listens on.\n-      unless @haproxy['server_port_override']\n+      unless @backend_port_override\n         raise ArgumentError,\n-          \"Missing server_port_override for service #{@name} - which port are backends listening on?\"\n+          \"Missing backend_port_override for service #{@name} - which port are backends listening on?\"\n       end\n \n-      unless @haproxy['server_port_override'].to_s.match(/^\\d+$/)\n-        raise ArgumentError, \"Invalid server_port_override value\"\n+      unless @backend_port_override.to_s.match(/^\\d+$/)", "path": "lib/synapse/service_watcher/ec2tag.rb", "position": null, "original_position": 13, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "should this validation, too, live in `BaseWatcher` ?", "created_at": "2017-02-06T20:56:14Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r99681874", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99681874"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r99681874"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99681874/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99734986", "pull_request_review_id": 20420015, "id": 99734986, "diff_hunk": "@@ -0,0 +1,20 @@\n+require 'synapse/log'\n+require 'synapse/config_generator/base'\n+\n+module Synapse\n+  class ConfigGenerator\n+    # the type which actually dispatches generator creation requests\n+    def self.create(type, opts)\n+      generator = begin\n+        type = type.downcase\n+        require \"synapse/config_generator/#{type}\"", "path": "lib/synapse/config_generator.rb", "position": 10, "original_position": 10, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "I was under the impression this is already possible if you install via gems? All you have to do is put your class in the right path and then synapse dynamically requires it, or that's what I thought the design from Nerve allowed you to do.\r\n\r\nI can whip up a quick example gem to see if this is flawed thinking, but I thought that was why we switched to this way of constructing classes in Nerve (and Synapse).", "created_at": "2017-02-07T02:48:10Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r99734986", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99734986"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r99734986"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/99734986/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 99664301}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100430000", "pull_request_review_id": 21138250, "id": 100430000, "diff_hunk": "@@ -0,0 +1,64 @@\n+## ConfigGenerator Classes\n+\n+Generators are the piece of Synapse that react to changes in service\n+registrations and actually reflect those changes in local state.\n+Generators should conform to the interface specified by `BaseGenerator` and\n+when your generator has received an update from synapse via `update_config` it\n+should sync the watcher state with the external configuration (e.g. HAProxy\n+state)\n+\n+```ruby\n+require \"synapse/config_generator/base\"\n+\n+class Synapse::ServiceGenerator\n+  class MyGenerator < BaseGenerator\n+    # The generator name is used to find service specific\n+    # configuration in the service watchers. When supplying\n+    # per service config, use this as the key\n+    NAME = 'my_generator'.freeze\n+", "path": "lib/synapse/config_generator/README.md", "position": 19, "original_position": 19, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Done.", "created_at": "2017-02-09T22:35:24Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r100430000", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100430000"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r100430000"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100430000/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 99676725}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100430078", "pull_request_review_id": 21138322, "id": 100430078, "diff_hunk": "@@ -0,0 +1,64 @@\n+## ConfigGenerator Classes\n+\n+Generators are the piece of Synapse that react to changes in service\n+registrations and actually reflect those changes in local state.\n+Generators should conform to the interface specified by `BaseGenerator` and\n+when your generator has received an update from synapse via `update_config` it\n+should sync the watcher state with the external configuration (e.g. HAProxy\n+state)\n+\n+```ruby\n+require \"synapse/config_generator/base\"\n+\n+class Synapse::ServiceGenerator\n+  class MyGenerator < BaseGenerator\n+    # The generator name is used to find service specific\n+    # configuration in the service watchers. When supplying\n+    # per service config, use this as the key\n+    NAME = 'my_generator'.freeze\n+\n+    def update_config(watchers)\n+      # synapse will call this method whenever watcher state changes with the\n+      # watcher state. You should reflect that state in the local config state\n+    end\n+\n+    def tick\n+      # Called every loop of the main Synapse loop regardless of watcher #", "path": "lib/synapse/config_generator/README.md", "position": null, "original_position": 26, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "fixed", "created_at": "2017-02-09T22:35:49Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r100430078", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100430078"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r100430078"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100430078/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 99664635}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100430172", "pull_request_review_id": 21138417, "id": 100430172, "diff_hunk": "@@ -0,0 +1,64 @@\n+## ConfigGenerator Classes\n+\n+Generators are the piece of Synapse that react to changes in service\n+registrations and actually reflect those changes in local state.\n+Generators should conform to the interface specified by `BaseGenerator` and\n+when your generator has received an update from synapse via `update_config` it\n+should sync the watcher state with the external configuration (e.g. HAProxy\n+state)\n+\n+```ruby\n+require \"synapse/config_generator/base\"\n+\n+class Synapse::ServiceGenerator\n+  class MyGenerator < BaseGenerator\n+    # The generator name is used to find service specific\n+    # configuration in the service watchers. When supplying\n+    # per service config, use this as the key\n+    NAME = 'my_generator'.freeze\n+\n+    def update_config(watchers)\n+      # synapse will call this method whenever watcher state changes with the\n+      # watcher state. You should reflect that state in the local config state\n+    end\n+\n+    def tick\n+      # Called every loop of the main Synapse loop regardless of watcher #\n+      # changes (roughly ~1s), you can use this to rate limit how often your", "path": "lib/synapse/config_generator/README.md", "position": null, "original_position": 27, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Fixed", "created_at": "2017-02-09T22:36:13Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r100430172", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100430172"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r100430172"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100430172/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 99664762}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100430652", "pull_request_review_id": 21138903, "id": 100430652, "diff_hunk": "@@ -0,0 +1,64 @@\n+## ConfigGenerator Classes\n+\n+Generators are the piece of Synapse that react to changes in service\n+registrations and actually reflect those changes in local state.\n+Generators should conform to the interface specified by `BaseGenerator` and\n+when your generator has received an update from synapse via `update_config` it\n+should sync the watcher state with the external configuration (e.g. HAProxy\n+state)\n+\n+```ruby\n+require \"synapse/config_generator/base\"\n+\n+class Synapse::ServiceGenerator\n+  class MyGenerator < BaseGenerator\n+    # The generator name is used to find service specific\n+    # configuration in the service watchers. When supplying\n+    # per service config, use this as the key\n+    NAME = 'my_generator'.freeze\n+\n+    def update_config(watchers)\n+      # synapse will call this method whenever watcher state changes with the\n+      # watcher state. You should reflect that state in the local config state\n+    end\n+\n+    def tick\n+      # Called every loop of the main Synapse loop regardless of watcher #\n+      # changes (roughly ~1s), you can use this to rate limit how often your\n+      # config generator actually reconfigures external services (e.g. HAProxy\n+      # may need to rate limit reloads as those can be disruptive to in\n+      # flight connections\n+    end\n+\n+    def normalize_config_generator_opts!(service_watcher_name, service_watcher_opts)\n+      # Every service section can contain configuration that changes how the\n+      # config generator reacts for that particular service. Typically this", "path": "lib/synapse/config_generator/README.md", "position": null, "original_position": 35, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Reworded, let me know if it's clearer :-)", "created_at": "2017-02-09T22:38:30Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r100430652", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100430652"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r100430652"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100430652/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 99665762}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100430709", "pull_request_review_id": 21138960, "id": 100430709, "diff_hunk": "@@ -0,0 +1,64 @@\n+## ConfigGenerator Classes\n+\n+Generators are the piece of Synapse that react to changes in service\n+registrations and actually reflect those changes in local state.\n+Generators should conform to the interface specified by `BaseGenerator` and\n+when your generator has received an update from synapse via `update_config` it\n+should sync the watcher state with the external configuration (e.g. HAProxy\n+state)\n+\n+```ruby\n+require \"synapse/config_generator/base\"\n+\n+class Synapse::ServiceGenerator\n+  class MyGenerator < BaseGenerator\n+    # The generator name is used to find service specific\n+    # configuration in the service watchers. When supplying\n+    # per service config, use this as the key\n+    NAME = 'my_generator'.freeze\n+\n+    def update_config(watchers)\n+      # synapse will call this method whenever watcher state changes with the\n+      # watcher state. You should reflect that state in the local config state\n+    end\n+\n+    def tick\n+      # Called every loop of the main Synapse loop regardless of watcher #\n+      # changes (roughly ~1s), you can use this to rate limit how often your\n+      # config generator actually reconfigures external services (e.g. HAProxy\n+      # may need to rate limit reloads as those can be disruptive to in\n+      # flight connections\n+    end\n+\n+    def normalize_config_generator_opts!(service_watcher_name, service_watcher_opts)\n+      # Every service section can contain configuration that changes how the\n+      # config generator reacts for that particular service. Typically this\n+      # is a good place to ensure you set config your generator expects every\n+      # service to supply in case they don't supply it\n+    end\n+  end\n+end\n+```\n+\n+### Generator Plugin Inteface\n+Synapse deduces both the class path and class name from any additional keys\n+passed to the top level configuration, which it assumes are equal to the `NAME`\n+of some ConfigGenerator. For example, if `haproxy` is set at the top level we\n+try to load the `Haproxy` `ConfigGenerator`.\n+\n+#### Class Location\n+Synapse expects to find your class at `synapse/config_generator/#{name}`. You\n+must make your generator available at that path, and Synapse can \"just work\" and\n+find it.\n+\n+#### Class Name\n+These type strings are then transformed into class names via the following\n+function:\n+\n+```\n+type_class  = type.split('_').map{|x| x.capitalize}\n+```\n+\n+This has the effect of taking the method, splitting on '_', capitalizing each", "path": "lib/synapse/config_generator/README.md", "position": null, "original_position": 62, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Fixed", "created_at": "2017-02-09T22:38:48Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r100430709", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100430709"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r100430709"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100430709/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 99666099}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100431766", "pull_request_review_id": 21140018, "id": 100431766, "diff_hunk": "@@ -0,0 +1,37 @@\n+require 'synapse/log'\n+\n+class Synapse::ConfigGenerator\n+  class BaseGenerator\n+    include Synapse::Logging\n+\n+    NAME = 'base'.freeze\n+\n+    # Exposes NAME as 'name' so we can remain consistent with how we refer to\n+    # service_watchers' by generator.name access (instead of\n+    # generator.class::NAME) even though the names of generators don't change\n+    def name\n+      self.class::NAME\n+    end\n+", "path": "lib/synapse/config_generator/base.rb", "position": 21, "original_position": 15, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Sure, done.", "created_at": "2017-02-09T22:44:17Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r100431766", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100431766"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r100431766"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100431766/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 99676913}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100433233", "pull_request_review_id": 21141521, "id": 100433233, "diff_hunk": "@@ -0,0 +1,37 @@\n+require 'synapse/log'\n+\n+class Synapse::ConfigGenerator\n+  class BaseGenerator\n+    include Synapse::Logging\n+\n+    NAME = 'base'.freeze\n+\n+    # Exposes NAME as 'name' so we can remain consistent with how we refer to\n+    # service_watchers' by generator.name access (instead of\n+    # generator.class::NAME) even though the names of generators don't change\n+    def name\n+      self.class::NAME\n+    end\n+\n+    # The synapse main loop will call this any time watchers change, the\n+    # config_generator is responsible for diffing the passed watcher state\n+    # against the output configuration\n+    def update_config(watchers)", "path": "lib/synapse/config_generator/base.rb", "position": 25, "original_position": 19, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "I don't think it's needed. Ok to punt?", "created_at": "2017-02-09T22:51:53Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r100433233", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100433233"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r100433233"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100433233/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 99666336}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100436857", "pull_request_review_id": 21145177, "id": 100436857, "diff_hunk": "@@ -0,0 +1,37 @@\n+require 'synapse/log'\n+\n+class Synapse::ConfigGenerator\n+  class BaseGenerator\n+    include Synapse::Logging\n+\n+    NAME = 'base'.freeze\n+\n+    # Exposes NAME as 'name' so we can remain consistent with how we refer to\n+    # service_watchers' by generator.name access (instead of\n+    # generator.class::NAME) even though the names of generators don't change\n+    def name\n+      self.class::NAME\n+    end\n+\n+    # The synapse main loop will call this any time watchers change, the\n+    # config_generator is responsible for diffing the passed watcher state\n+    # against the output configuration\n+    def update_config(watchers)\n+    end\n+\n+    # The synapse main loop will call this every tick\n+    # of the logical clock (~1s). You can use this to intiate reloads\n+    # or restarts in a rate limited fashion\n+    def tick\n+    end\n+\n+    # Service watchers have a subsection of their ``services`` entry that is\n+    # dedicated to the watcher specific configuration for how to configure\n+    # the config generator. This method will be called with each of these\n+    # watcher hashes, and should normalize them to what the config generator\n+    # needs, such as adding defaults. Mutate the passed hash\n+    def normalize_config_generator_opts!(service_watcher_name, service_watcher_opts)", "path": "lib/synapse/config_generator/base.rb", "position": null, "original_position": 33, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "> i was confused by there being two sources of options for a config generator. the first is the options passed to the initialize method, which contain overall options. the second is the watcher-specific options for this config generator.\r\n\r\nYup, the fact that there is coupling between the two presented a significant challenge during this refactor.\r\n\r\n>maybe we should call these options watcher_opts rather than config_generator_opts to clarify the distinction?\r\n\r\nHm, I will work on making this clearer\r\n\r\n> also, should we really be encouraging side-effects? this might lead to trouble. given how we actually use this code below, returning a copy of the passed-in hash would work just as well. we should encourage users to do something like:\r\n\r\nYea, I think I can figure that out\r\n\r\n>finally, i was also confused by the fact that we have to reach into the watchers to get the config generator options each time we generate a config for that watcher. i guess i'm not sure what to do about that problem, but i'm kind of annoyed about repeated calls to, e.g., watcher.generator_opts['haproxy']\r\n\r\nYes, I agree, but it's not that bad and we can refactor this in the future imo.", "created_at": "2017-02-09T23:12:27Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r100436857", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100436857"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r100436857"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100436857/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 99673977}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100439917", "pull_request_review_id": 21148157, "id": 100439917, "diff_hunk": "@@ -792,29 +795,27 @@ class Haproxy\n     STATE_FILE_UPDATE_INTERVAL = 60.freeze # iterations; not a unit of time\n \n     def initialize(opts)\n-      super()\n-\n-      %w{global defaults reload_command}.each do |req|\n+      %w{global defaults}.each do |req|", "path": "lib/synapse/config_generator/haproxy.rb", "position": null, "original_position": 27, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Agreed, but I'd like to punt this to another iteration.", "created_at": "2017-02-09T23:32:17Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r100439917", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100439917"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r100439917"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100439917/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 99667758}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100440298", "pull_request_review_id": 21148523, "id": 100440298, "diff_hunk": "@@ -961,17 +973,28 @@ def validate_haproxy_stanza(stanza, stanza_type, service_name)\n \n     # generates an individual stanza for a particular watcher\n     def generate_frontend_stanza(watcher, config)\n-      unless watcher.haproxy.has_key?(\"port\")\n+      unless watcher.generator_config['haproxy'].has_key?(\"port\")", "path": "lib/synapse/config_generator/haproxy.rb", "position": null, "original_position": 117, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Sure, I already did this for nginx, but was punting on this one. I can make the changes now though.", "created_at": "2017-02-09T23:34:37Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r100440298", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100440298"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r100440298"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100440298/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 99678950}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100444241", "pull_request_review_id": 21152427, "id": 100444241, "diff_hunk": "@@ -0,0 +1,20 @@\n+require 'synapse/log'\n+require 'synapse/config_generator/base'\n+\n+module Synapse\n+  class ConfigGenerator\n+    # the type which actually dispatches generator creation requests\n+    def self.create(type, opts)\n+      generator = begin\n+        type = type.downcase\n+        require \"synapse/config_generator/#{type}\"", "path": "lib/synapse/config_generator.rb", "position": 10, "original_position": 10, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "oh i see. yeah, i guess if you `gem install synapse` then it would work with any other systemwide-installed gems. if you install a synapse bundle and `bundle exec synapse`, you have to put the other gem system-wide or bundler won't find it", "created_at": "2017-02-10T00:01:13Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r100444241", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100444241"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r100444241"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100444241/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 99664301}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100444375", "pull_request_review_id": 21152559, "id": 100444375, "diff_hunk": "@@ -0,0 +1,37 @@\n+require 'synapse/log'\n+\n+class Synapse::ConfigGenerator\n+  class BaseGenerator\n+    include Synapse::Logging\n+\n+    NAME = 'base'.freeze\n+\n+    # Exposes NAME as 'name' so we can remain consistent with how we refer to\n+    # service_watchers' by generator.name access (instead of\n+    # generator.class::NAME) even though the names of generators don't change\n+    def name\n+      self.class::NAME\n+    end\n+\n+    # The synapse main loop will call this any time watchers change, the\n+    # config_generator is responsible for diffing the passed watcher state\n+    # against the output configuration\n+    def update_config(watchers)", "path": "lib/synapse/config_generator/base.rb", "position": 25, "original_position": 19, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "sure", "created_at": "2017-02-10T00:02:11Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r100444375", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100444375"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r100444375"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100444375/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 99666336}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100446312", "pull_request_review_id": 21154497, "id": 100446312, "diff_hunk": "@@ -961,17 +973,28 @@ def validate_haproxy_stanza(stanza, stanza_type, service_name)\n \n     # generates an individual stanza for a particular watcher\n     def generate_frontend_stanza(watcher, config)\n-      unless watcher.haproxy.has_key?(\"port\")\n+      unless watcher.generator_config['haproxy'].has_key?(\"port\")\n         log.debug \"synapse: not generating frontend stanza for watcher #{watcher.name} because it has no port defined\"\n         return []\n+      else\n+        port = watcher.generator_config['haproxy']['port']", "path": "lib/synapse/config_generator/haproxy.rb", "position": null, "original_position": 121, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "So ... I have plans over in #220 to allow a null port to be semantically different from no port. Basically for unix socket listeners I need to not supply a port, but we still want the frontend and to use bind_address.", "created_at": "2017-02-10T00:16:33Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r100446312", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100446312"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r100446312"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100446312/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 99679164}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100446412", "pull_request_review_id": 21154579, "id": 100446412, "diff_hunk": "@@ -1005,7 +1028,8 @@ def generate_backend_stanza(watcher, config)\n         log.debug \"synapse: no backends found for watcher #{watcher.name}\"\n       end\n \n-      keys = case watcher.haproxy['backend_order']\n+      watcher_haproxy = watcher.generator_config['haproxy']", "path": "lib/synapse/config_generator/haproxy.rb", "position": null, "original_position": 150, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "I ended up going with watcher_config, but feel free to rename to opts if you want (opts and config are hella confusing no matter how we slice it :-/)", "created_at": "2017-02-10T00:17:13Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r100446412", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100446412"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r100446412"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100446412/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 99679295}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100447882", "pull_request_review_id": 21156038, "id": 100447882, "diff_hunk": "@@ -1151,9 +1176,9 @@ def restart\n       @next_restart += rand(@restart_jitter * @restart_interval + 1)\n \n       # do the actual restart\n-      res = `#{opts['reload_command']}`.chomp\n+      res = `#{@opts['reload_command']}`.chomp", "path": "lib/synapse/config_generator/haproxy.rb", "position": null, "original_position": 192, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Agreed, changed.", "created_at": "2017-02-10T00:28:38Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r100447882", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100447882"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r100447882"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100447882/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 99679850}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100448233", "pull_request_review_id": 21156388, "id": 100448233, "diff_hunk": "@@ -85,15 +76,30 @@ def reconfigure!\n       @config_updated = true\n     end\n \n+    def available_generators\n+      Hash[@config_generators.collect{|cg| [cg.name, cg]}]", "path": "lib/synapse.rb", "position": 48, "original_position": 48, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "This method is only called during initialization of watchers. I don't really want to add state here unless I have to.", "created_at": "2017-02-10T00:31:29Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r100448233", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100448233"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r100448233"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100448233/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 99668362}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100448368", "pull_request_review_id": 21156527, "id": 100448368, "diff_hunk": "@@ -7,15 +7,15 @@ class BaseWatcher\n \n     LEADER_WARN_INTERVAL = 30\n \n-    attr_reader :name, :haproxy\n+    attr_reader :name, :generator_config", "path": "lib/synapse/service_watcher/base.rb", "position": null, "original_position": 5, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "I don't think so but ... naming is hard?", "created_at": "2017-02-10T00:32:35Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r100448368", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100448368"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r100448368"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100448368/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 99680000}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100450855", "pull_request_review_id": 21159082, "id": 100450855, "diff_hunk": "@@ -33,16 +33,10 @@ def initialize(opts={}, synapse)\n       @leader_election = opts['leader_election'] || false\n       @leader_last_warn = Time.now - LEADER_WARN_INTERVAL\n \n-      # the haproxy config\n-      @haproxy = opts['haproxy']\n-      @haproxy['server_options'] ||= \"\"\n-      @haproxy['server_port_override'] ||= nil\n-      %w{backend frontend listen}.each do |sec|\n-        @haproxy[sec] ||= []\n-      end\n-\n-      unless @haproxy.include?('port')\n-        log.warn \"synapse: service #{name}: haproxy config does not include a port; only backend sections for the service will be created; you must move traffic there manually using configuration in `extra_sections`\"\n+      @generator_config = {}\n+      @synapse.available_generators.each do |generator_name, generator|\n+        @generator_config[generator_name] = opts[generator_name] || {}", "path": "lib/synapse/service_watcher/base.rb", "position": null, "original_position": 34, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Ok, I've made it more functional but I didn't want to make it a separate function because I don't really want to persist opts. Punt for now?", "created_at": "2017-02-10T00:54:01Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r100450855", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100450855"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r100450855"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100450855/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 99672714}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100450977", "pull_request_review_id": 21159207, "id": 100450977, "diff_hunk": "@@ -55,13 +49,28 @@ def initialize(opts={}, synapse)\n       # use the previous backends that we already know about.\n       @use_previous_backends = opts.fetch('use_previous_backends', true)\n \n+      # If backends discovered with this watcher lack ports or discovered\n+      # ports should be ignored, this option indicates that\n+      @backend_port_override = opts['backend_port_override'] || nil\n+\n+      # For backwards compatability we support server_port_override\n+      # This will be removed in future versions\n+      if @backend_port_override.nil? && @generator_config['haproxy']\n+        @backend_port_override = @generator_config['haproxy']['server_port_override']\n+      end\n+\n       # set a flag used to tell the watchers to exit\n       # this is not used in every watcher\n       @should_exit = false\n \n       validate_discovery_opts\n     end\n \n+    def haproxy\n+      log.warn \"synapse: service watcher #{@name} accessing watcher.haproxy. This is DEPRECATED and will be removed in future iterations, use watcher.generator_config['haproxy'] instead.\"", "path": "lib/synapse/service_watcher/base.rb", "position": null, "original_position": 61, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "This was really just to help me when porting the service watchers. I think this would only impact folks if they had custom service watchers (all of the ones in the repo have been ported).", "created_at": "2017-02-10T00:54:57Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r100450977", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100450977"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r100450977"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100450977/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 99681627}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100451031", "pull_request_review_id": 21159262, "id": 100451031, "diff_hunk": "@@ -55,13 +49,28 @@ def initialize(opts={}, synapse)\n       # use the previous backends that we already know about.\n       @use_previous_backends = opts.fetch('use_previous_backends', true)\n \n+      # If backends discovered with this watcher lack ports or discovered\n+      # ports should be ignored, this option indicates that\n+      @backend_port_override = opts['backend_port_override'] || nil\n+\n+      # For backwards compatability we support server_port_override\n+      # This will be removed in future versions\n+      if @backend_port_override.nil? && @generator_config['haproxy']\n+        @backend_port_override = @generator_config['haproxy']['server_port_override']\n+      end\n+\n       # set a flag used to tell the watchers to exit\n       # this is not used in every watcher\n       @should_exit = false\n \n       validate_discovery_opts\n     end\n \n+    def haproxy\n+      log.warn \"synapse: service watcher #{@name} accessing watcher.haproxy. This is DEPRECATED and will be removed in future iterations, use watcher.generator_config['haproxy'] instead.\"\n+      @generator_config['haproxy']", "path": "lib/synapse/service_watcher/base.rb", "position": null, "original_position": 62, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "heh, ack", "created_at": "2017-02-10T00:55:23Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r100451031", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100451031"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r100451031"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100451031/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 99680523}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100451638", "pull_request_review_id": 21159858, "id": 100451638, "diff_hunk": "@@ -36,13 +36,13 @@ def validate_discovery_opts\n \n       # As we're only looking up instances with hostnames/IPs, need to\n       # be explicitly told which port the service we're balancing for listens on.\n-      unless @haproxy['server_port_override']\n+      unless @backend_port_override\n         raise ArgumentError,\n-          \"Missing server_port_override for service #{@name} - which port are backends listening on?\"\n+          \"Missing backend_port_override for service #{@name} - which port are backends listening on?\"\n       end\n \n-      unless @haproxy['server_port_override'].to_s.match(/^\\d+$/)\n-        raise ArgumentError, \"Invalid server_port_override value\"\n+      unless @backend_port_override.to_s.match(/^\\d+$/)", "path": "lib/synapse/service_watcher/ec2tag.rb", "position": null, "original_position": 13, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Sure, moved", "created_at": "2017-02-10T01:00:13Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r100451638", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100451638"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r100451638"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/100451638/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 99681874}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101402996", "pull_request_review_id": 22131216, "id": 101402996, "diff_hunk": "@@ -961,17 +980,29 @@ def validate_haproxy_stanza(stanza, stanza_type, service_name)\n \n     # generates an individual stanza for a particular watcher\n     def generate_frontend_stanza(watcher, config)\n-      unless watcher.haproxy.has_key?(\"port\")\n+      watcher_config = watcher.generator_config[name]\n+      unless watcher_config.has_key?(\"port\")\n         log.debug \"synapse: not generating frontend stanza for watcher #{watcher.name} because it has no port defined\"\n         return []\n+      else\n+        port = watcher_config['port']\n       end\n \n-      bo = watcher.haproxy['bind_options']\n+      bind_options = watcher_config['bind_options']\n+      bind_options = bind_options.nil? ? '' : ' ' + bind_options", "path": "lib/synapse/config_generator/haproxy.rb", "position": null, "original_position": 195, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "c4f7713de1516ed50a6e26f0440af1441588472b", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "maybe something like `bind_line = [\"#{bind_address}:#{port}\", bind_options].compact.join(' ')`?", "created_at": "2017-02-15T22:45:44Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r101402996", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101402996"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r101402996"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101402996/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101403119", "pull_request_review_id": 22131216, "id": 101403119, "diff_hunk": "@@ -961,17 +980,29 @@ def validate_haproxy_stanza(stanza, stanza_type, service_name)\n \n     # generates an individual stanza for a particular watcher\n     def generate_frontend_stanza(watcher, config)\n-      unless watcher.haproxy.has_key?(\"port\")\n+      watcher_config = watcher.generator_config[name]\n+      unless watcher_config.has_key?(\"port\")\n         log.debug \"synapse: not generating frontend stanza for watcher #{watcher.name} because it has no port defined\"\n         return []\n+      else\n+        port = watcher_config['port']\n       end\n \n-      bo = watcher.haproxy['bind_options']\n+      bind_options = watcher_config['bind_options']\n+      bind_options = bind_options.nil? ? '' : ' ' + bind_options\n+\n+      bind_address = (\n+        watcher_config['bind_address'] ||\n+        opts['bind_address'] ||\n+        'localhost'", "path": "lib/synapse/config_generator/haproxy.rb", "position": null, "original_position": 200, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "c4f7713de1516ed50a6e26f0440af1441588472b", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "magic strings should be constants; `DEFAULT_BIND_ADDRESS = 'localhost'`", "created_at": "2017-02-15T22:46:21Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r101403119", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101403119"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r101403119"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101403119/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101403652", "pull_request_review_id": 22131216, "id": 101403652, "diff_hunk": "@@ -135,6 +154,11 @@ def backends_filtered_by_labels\n     def set_backends(new_backends)\n       # Aggregate and deduplicate all potential backend service instances.\n       new_backends = (new_backends + @default_servers) if @keep_default_servers\n+      # Substitute backend_port_override for the provided port\n+      new_backends = new_backends.collect {|b|", "path": "lib/synapse/service_watcher/base.rb", "position": null, "original_position": 85, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "c4f7713de1516ed50a6e26f0440af1441588472b", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "convention is to use `{...}` with single-line blocks and `do...end` with multi-line blocks", "created_at": "2017-02-15T22:49:18Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r101403652", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101403652"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r101403652"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101403652/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101404053", "pull_request_review_id": 22131216, "id": 101404053, "diff_hunk": "@@ -1,8 +1,9 @@\n require 'spec_helper'\n require 'fileutils'\n+require 'synapse/config_generator/file_output'", "path": "spec/lib/synapse/file_output_spec.rb", "position": 3, "original_position": 3, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "c4f7713de1516ed50a6e26f0440af1441588472b", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "this file should probably live in `spec/lib/config_generator` ", "created_at": "2017-02-15T22:51:28Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r101404053", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101404053"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r101404053"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101404053/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101404646", "pull_request_review_id": 22131216, "id": 101404646, "diff_hunk": "@@ -33,17 +33,15 @@ def initialize(opts={}, synapse)\n       @leader_election = opts['leader_election'] || false\n       @leader_last_warn = Time.now - LEADER_WARN_INTERVAL\n \n-      # the haproxy config\n-      @haproxy = opts['haproxy']\n-      @haproxy['server_options'] ||= \"\"\n-      @haproxy['server_port_override'] ||= nil\n-      %w{backend frontend listen}.each do |sec|\n-        @haproxy[sec] ||= []\n-      end\n-\n-      unless @haproxy.include?('port')\n-        log.warn \"synapse: service #{name}: haproxy config does not include a port; only backend sections for the service will be created; you must move traffic there manually using configuration in `extra_sections`\"\n-      end\n+      @generator_config = Hash[\n+        @synapse.available_generators.collect{ |generator_name, generator|", "path": "lib/synapse/service_watcher/base.rb", "position": null, "original_position": 34, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "c4f7713de1516ed50a6e26f0440af1441588472b", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "convention is to use `do..end` for multi-line blocks", "created_at": "2017-02-15T22:54:25Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r101404646", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101404646"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r101404646"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101404646/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101404995", "pull_request_review_id": 22131216, "id": 101404995, "diff_hunk": "@@ -877,14 +890,19 @@ def generate_config(watchers)\n       shared_frontend_lines = generate_shared_frontend\n \n       watchers.each do |watcher|\n+        watcher_config = watcher.generator_config[name]", "path": "lib/synapse/config_generator/haproxy.rb", "position": null, "original_position": 115, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "c4f7713de1516ed50a6e26f0440af1441588472b", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "i still think it's jarring that we have things called `config_generator`s as well as a function called `generator_config`. maybe we can call this method `config_for_generator`? that reads better, since it is always accompanied by a specific generator name", "created_at": "2017-02-15T22:56:11Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r101404995", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101404995"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r101404995"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101404995/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101405663", "pull_request_review_id": 22131216, "id": 101405663, "diff_hunk": "@@ -5,7 +5,14 @@ class Synapse::ServiceWatcher::BaseWatcher\n end\n \n describe Synapse::ServiceWatcher::BaseWatcher do\n-  let(:mocksynapse) { double() }\n+  let(:mocksynapse) do", "path": "spec/lib/synapse/service_watcher_base_spec.rb", "position": 5, "original_position": 5, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "c4f7713de1516ed50a6e26f0440af1441588472b", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "we should probably pull this copy-pasta into a `RSpec.shared_context` definition, maybe we can call it `\"with a mock synapse\"`", "created_at": "2017-02-15T22:59:20Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r101405663", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101405663"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r101405663"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101405663/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101405884", "pull_request_review_id": 22131216, "id": 101405884, "diff_hunk": "@@ -1,16 +1,19 @@\n require 'spec_helper'\n+require 'synapse/config_generator/haproxy'", "path": "spec/lib/synapse/haproxy_spec.rb", "position": 2, "original_position": 2, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "c4f7713de1516ed50a6e26f0440af1441588472b", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "this spec file should probably live in `spec/lib/config_generator/haproxy_spec.rb`", "created_at": "2017-02-15T23:00:30Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r101405884", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101405884"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r101405884"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101405884/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101406566", "pull_request_review_id": 22131216, "id": 101406566, "diff_hunk": "@@ -0,0 +1,44 @@\n+require 'synapse/log'\n+\n+class Synapse::ConfigGenerator\n+  class BaseGenerator\n+    include Synapse::Logging\n+\n+    NAME = 'base'.freeze\n+\n+    attr_reader :opts\n+\n+    def initialize(opts={})\n+      @opts = opts\n+    end\n+\n+    # Exposes NAME as 'name' so we can remain consistent with how we refer to\n+    # service_watchers' by generator.name access (instead of\n+    # generator.class::NAME) even though the names of generators don't change\n+    def name\n+      self.class::NAME\n+    end\n+\n+    # The synapse main loop will call this any time watchers change, the\n+    # config_generator is responsible for diffing the passed watcher state\n+    # against the output configuration\n+    def update_config(watchers)\n+    end\n+\n+    # The synapse main loop will call this every tick\n+    # of the logical clock (~1s). You can use this to intiate reloads\n+    # or restarts in a rate limited fashion\n+    def tick\n+    end\n+\n+    # Service watchers have a subsection of their ``services`` entry that is\n+    # dedicated to the watcher specific configuration for how to configure\n+    # the config generator. This method will be called with each of these\n+    # watcher hashes, and should normalize them to what the config generator\n+    # needs, such as adding defaults. Return the properly populated default hash\n+    def normalize_watcher_provided_opts(service_watcher_name, service_watcher_opts)\n+      service_watcher_opts", "path": "lib/synapse/config_generator/base.rb", "position": null, "original_position": 40, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "c4f7713de1516ed50a6e26f0440af1441588472b", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "should we `.dup` this?", "created_at": "2017-02-15T23:04:13Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r101406566", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101406566"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r101406566"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101406566/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101406810", "pull_request_review_id": 22131216, "id": 101406810, "diff_hunk": "@@ -33,17 +33,15 @@ def initialize(opts={}, synapse)\n       @leader_election = opts['leader_election'] || false\n       @leader_last_warn = Time.now - LEADER_WARN_INTERVAL\n \n-      # the haproxy config\n-      @haproxy = opts['haproxy']\n-      @haproxy['server_options'] ||= \"\"\n-      @haproxy['server_port_override'] ||= nil\n-      %w{backend frontend listen}.each do |sec|\n-        @haproxy[sec] ||= []\n-      end\n-\n-      unless @haproxy.include?('port')\n-        log.warn \"synapse: service #{name}: haproxy config does not include a port; only backend sections for the service will be created; you must move traffic there manually using configuration in `extra_sections`\"\n-      end\n+      @generator_config = Hash[", "path": "lib/synapse/service_watcher/base.rb", "position": null, "original_position": 33, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "c4f7713de1516ed50a6e26f0440af1441588472b", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "so, this would become `@config_for_generator` if you accept my earlier suggestion", "created_at": "2017-02-15T23:05:38Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r101406810", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101406810"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r101406810"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101406810/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101407032", "pull_request_review_id": 22131216, "id": 101407032, "diff_hunk": "@@ -0,0 +1,74 @@\n+## ConfigGenerator Classes\n+\n+Generators are the piece of Synapse that react to changes in service\n+registrations and actually reflect those changes in local state.\n+Generators should conform to the interface specified by `BaseGenerator` and\n+when your generator has received an update from synapse via `update_config` it\n+should sync the watcher state with the external configuration (e.g. HAProxy\n+state)\n+\n+```ruby\n+require \"synapse/config_generator/base\"\n+\n+class Synapse::ConfigGenerator\n+  class MyGenerator < BaseGenerator\n+    # The generator name is used to find service specific\n+    # configuration in the service watchers. When supplying\n+    # per service config, use this as the key\n+    NAME = 'my_generator'.freeze\n+\n+    def initialize(opts = {})\n+        # Process and validate any options specified in the dedicated section\n+        # for this config generator, given as the `opts` hash. You may omit\n+        # this method, or you can declare your own, but remember to invoke\n+        # the parent initializer\n+        super(opts)\n+    end\n+\n+    def update_config(watchers)\n+      # synapse will call this method whenever watcher state changes with the\n+      # watcher state. You should reflect that state in the local config state\n+    end\n+\n+    def tick\n+      # Called every loop of the main Synapse loop regardless of watcher\n+      # changes (roughly ~1s). You can use this to rate limit how often your\n+      # config generator actually reconfigures external services (e.g. HAProxy\n+      # may need to rate limit reloads as those can be disruptive to in\n+      # flight connections\n+    end\n+\n+    def normalize_watcher_provided_opts(service_watcher_name, service_watcher_opts)", "path": "lib/synapse/config_generator/README.md", "position": null, "original_position": 41, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "c4f7713de1516ed50a6e26f0440af1441588472b", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "we should either call this `opts` or `config`. seems like we settled on `config`", "created_at": "2017-02-15T23:06:42Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r101407032", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101407032"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r101407032"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101407032/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101407566", "pull_request_review_id": 22131216, "id": 101407566, "diff_hunk": "@@ -85,15 +76,30 @@ def reconfigure!\n       @config_updated = true\n     end\n \n+    def available_generators\n+      Hash[@config_generators.collect{|cg| [cg.name, cg]}]", "path": "lib/synapse.rb", "position": 48, "original_position": 48, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "70d45f262a49b1fec6dbeab6a0d2fd6aec7ac0fa", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "eh, i feel like it's pretty standard practice to memoize in ruby if you need a specific view of otherwise-existing state. but UP2U!", "created_at": "2017-02-15T23:09:34Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r101407566", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101407566"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r101407566"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101407566/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 99668362}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101407893", "pull_request_review_id": 22131216, "id": 101407893, "diff_hunk": "@@ -28,37 +33,165 @@ class MockWatcher; end;\n     allow(mockWatcher).to receive(:name).and_return('example_service3')\n     backends = [{ 'host' => 'somehost', 'port' => 5555}]\n     allow(mockWatcher).to receive(:backends).and_return(backends)\n-    allow(mockWatcher).to receive(:haproxy).and_return({'server_options' => \"check inter 2000 rise 3 fall 2\", 'cookie_value_method' => 'hash'})\n+    allow(mockWatcher).to receive(:generator_config).and_return({\n+      'haproxy' => {'server_options' => \"check inter 2000 rise 3 fall 2\", 'cookie_value_method' => 'hash'}\n+    })\n     mockWatcher\n   end\n \n   let(:mockwatcher_frontend) do\n     mockWatcher = double(Synapse::ServiceWatcher)\n     allow(mockWatcher).to receive(:name).and_return('example_service4')\n-    allow(mockWatcher).to receive(:haproxy).and_return('port' => 2200)\n+    allow(mockWatcher).to receive(:generator_config).and_return({\n+      'haproxy' => {'port' => 2200}\n+    })\n     mockWatcher\n   end\n \n   let(:mockwatcher_frontend_with_bind_options) do\n     mockWatcher = double(Synapse::ServiceWatcher)\n     allow(mockWatcher).to receive(:name).and_return('example_service4')\n-    allow(mockWatcher).to receive(:haproxy).and_return('port' => 2200, 'bind_options' => 'ssl no-sslv3 crt /path/to/cert/example.pem ciphers ECDHE-ECDSA-CHACHA20-POLY1305')\n+    allow(mockWatcher).to receive(:generator_config).and_return({\n+      'haproxy' => {\n+        'port' => 2200,\n+      'bind_options' => 'ssl no-sslv3 crt /path/to/cert/example.pem ciphers ECDHE-ECDSA-CHACHA20-POLY1305'\n+      }\n+    })\n     mockWatcher\n   end\n \n   let(:mockwatcher_frontend_with_bind_address) do\n     mockWatcher = double(Synapse::ServiceWatcher)\n     allow(mockWatcher).to receive(:name).and_return('example_service5')\n-    allow(mockWatcher).to receive(:haproxy).and_return('port' => 2200, 'bind_address' => \"127.0.0.3\")\n+    allow(mockWatcher).to receive(:generator_config).and_return({\n+      'haproxy' => {'port' => 2200, 'bind_address' => \"127.0.0.3\"}\n+    })\n+    mockWatcher\n+  end\n+\n+  let(:mockwatcher_disabled) do\n+    mockWatcher = double(Synapse::ServiceWatcher)\n+    allow(mockWatcher).to receive(:name).and_return('disabled_watcher')\n+    backends = [{ 'host' => 'somehost', 'port' => 5555}]\n+    allow(mockWatcher).to receive(:backends).and_return(backends)\n+    allow(mockWatcher).to receive(:generator_config).and_return({\n+      'haproxy' => {'port' => 2200, 'disabled' => true}\n+    })\n     mockWatcher\n   end\n \n+  describe 'validates arguments' do", "path": "spec/lib/synapse/haproxy_spec.rb", "position": null, "original_position": 89, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "c4f7713de1516ed50a6e26f0440af1441588472b", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "should this be called `describe '#initialize'` ?", "created_at": "2017-02-15T23:11:33Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r101407893", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101407893"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r101407893"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101407893/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101408260", "pull_request_review_id": 22131216, "id": 101408260, "diff_hunk": "@@ -28,37 +33,165 @@ class MockWatcher; end;\n     allow(mockWatcher).to receive(:name).and_return('example_service3')\n     backends = [{ 'host' => 'somehost', 'port' => 5555}]\n     allow(mockWatcher).to receive(:backends).and_return(backends)\n-    allow(mockWatcher).to receive(:haproxy).and_return({'server_options' => \"check inter 2000 rise 3 fall 2\", 'cookie_value_method' => 'hash'})\n+    allow(mockWatcher).to receive(:generator_config).and_return({\n+      'haproxy' => {'server_options' => \"check inter 2000 rise 3 fall 2\", 'cookie_value_method' => 'hash'}\n+    })\n     mockWatcher\n   end\n \n   let(:mockwatcher_frontend) do\n     mockWatcher = double(Synapse::ServiceWatcher)\n     allow(mockWatcher).to receive(:name).and_return('example_service4')\n-    allow(mockWatcher).to receive(:haproxy).and_return('port' => 2200)\n+    allow(mockWatcher).to receive(:generator_config).and_return({\n+      'haproxy' => {'port' => 2200}\n+    })\n     mockWatcher\n   end\n \n   let(:mockwatcher_frontend_with_bind_options) do\n     mockWatcher = double(Synapse::ServiceWatcher)\n     allow(mockWatcher).to receive(:name).and_return('example_service4')\n-    allow(mockWatcher).to receive(:haproxy).and_return('port' => 2200, 'bind_options' => 'ssl no-sslv3 crt /path/to/cert/example.pem ciphers ECDHE-ECDSA-CHACHA20-POLY1305')\n+    allow(mockWatcher).to receive(:generator_config).and_return({\n+      'haproxy' => {\n+        'port' => 2200,\n+      'bind_options' => 'ssl no-sslv3 crt /path/to/cert/example.pem ciphers ECDHE-ECDSA-CHACHA20-POLY1305'\n+      }\n+    })\n     mockWatcher\n   end\n \n   let(:mockwatcher_frontend_with_bind_address) do\n     mockWatcher = double(Synapse::ServiceWatcher)\n     allow(mockWatcher).to receive(:name).and_return('example_service5')\n-    allow(mockWatcher).to receive(:haproxy).and_return('port' => 2200, 'bind_address' => \"127.0.0.3\")\n+    allow(mockWatcher).to receive(:generator_config).and_return({\n+      'haproxy' => {'port' => 2200, 'bind_address' => \"127.0.0.3\"}\n+    })\n+    mockWatcher\n+  end\n+\n+  let(:mockwatcher_disabled) do\n+    mockWatcher = double(Synapse::ServiceWatcher)\n+    allow(mockWatcher).to receive(:name).and_return('disabled_watcher')\n+    backends = [{ 'host' => 'somehost', 'port' => 5555}]\n+    allow(mockWatcher).to receive(:backends).and_return(backends)\n+    allow(mockWatcher).to receive(:generator_config).and_return({\n+      'haproxy' => {'port' => 2200, 'disabled' => true}\n+    })\n     mockWatcher\n   end\n \n+  describe 'validates arguments' do\n+    it 'succeeds on minimal config' do\n+      conf = {\n+        'global' => [],\n+        'defaults' => [],\n+        'do_writes' => false,\n+        'do_reloads' => false,\n+        'do_socket' => false\n+      }\n+      Synapse::ConfigGenerator::Haproxy.new(conf)\n+      expect{Synapse::ConfigGenerator::Haproxy.new(conf)}.not_to raise_error\n+    end\n+\n+    it 'validates req_pairs' do\n+      req_pairs = {\n+        'do_writes' => 'config_file_path',\n+        'do_socket' => 'socket_file_path',\n+        'do_reloads' => 'reload_command'\n+      }\n+      valid_conf = {\n+        'global' => [],\n+        'defaults' => [],\n+        'do_reloads' => false,\n+        'do_socket' => false,\n+        'do_writes' => false\n+      }\n+\n+      req_pairs.each do |key, value|\n+        conf = valid_conf.clone\n+        conf[key] = true\n+        expect{Synapse::ConfigGenerator::Haproxy.new(conf)}.\n+          to raise_error(ArgumentError, \"the `#{value}` option is required when `#{key}` is true\")\n+      end\n+\n+    end\n+\n+    it 'properly defaults do_writes, do_socket, do_reloads' do\n+      conf = {\n+        'global' => [],\n+        'defaults' => [],\n+        'config_file_path' => 'test_file',\n+        'socket_file_path' => 'test_socket',\n+        'reload_command' => 'test_reload'\n+      }\n+\n+      expect{Synapse::ConfigGenerator::Haproxy.new(conf)}.not_to raise_error\n+      haproxy = Synapse::ConfigGenerator::Haproxy.new(conf)\n+      expect(haproxy.opts['do_writes']).to eql(true)\n+      expect(haproxy.opts['do_socket']).to eql(true)\n+      expect(haproxy.opts['do_reloads']).to eql(true)\n+    end\n+\n+    it 'complains when req_pairs are not passed at all' do\n+      conf = {\n+        'global' => [],\n+        'defaults' => [],\n+      }\n+      expect{Synapse::ConfigGenerator::Haproxy.new(conf)}.to raise_error(ArgumentError)\n+    end\n+  end\n+\n   describe '#name' do\n     it 'returns haproxy' do\n       expect(subject.name).to eq('haproxy')\n     end\n   end\n \n+  describe 'disabled watcher' do\n+    let(:watchers) { [mockwatcher, mockwatcher_disabled] }\n+    let(:socket_file_path) { 'socket_file_path' }\n+\n+    before do\n+      config['haproxy']['do_socket'] = true\n+      config['haproxy']['socket_file_path'] = socket_file_path\n+    end\n+\n+    it 'does not generate config' do\n+      allow(subject).to receive(:parse_watcher_config).and_return({})\n+      expect(subject).to receive(:generate_frontend_stanza).exactly(:once).with(mockwatcher, nil)\n+      expect(subject).to receive(:generate_backend_stanza).exactly(:once).with(mockwatcher, nil)\n+      subject.update_config(watchers)\n+    end\n+\n+    it 'does not cause a restart due to the socket' do", "path": "spec/lib/synapse/haproxy_spec.rb", "position": null, "original_position": 172, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "c4f7713de1516ed50a6e26f0440af1441588472b", "user": {"login": "igor47", "id": 200575, "avatar_url": "https://avatars1.githubusercontent.com/u/200575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igor47", "html_url": "https://github.com/igor47", "followers_url": "https://api.github.com/users/igor47/followers", "following_url": "https://api.github.com/users/igor47/following{/other_user}", "gists_url": "https://api.github.com/users/igor47/gists{/gist_id}", "starred_url": "https://api.github.com/users/igor47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igor47/subscriptions", "organizations_url": "https://api.github.com/users/igor47/orgs", "repos_url": "https://api.github.com/users/igor47/repos", "events_url": "https://api.github.com/users/igor47/events{/privacy}", "received_events_url": "https://api.github.com/users/igor47/received_events", "type": "User", "site_admin": false}, "body": "maybe more like:\r\n\r\n```ruby\r\ncontext 'when configuration via the socket succeeds' do\r\n  before do\r\n    # make the context true by stubbing out `talk_to_socket`\r\n  end\r\n\r\n  it 'does not force a restart' do\r\n    subject.update_config(watchers)\r\n    expect(...).to be_falsey\r\n  end\r\nend\r\n```", "created_at": "2017-02-15T23:13:47Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r101408260", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "COLLABORATOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101408260"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r101408260"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101408260/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101660568", "pull_request_review_id": 22397053, "id": 101660568, "diff_hunk": "@@ -877,14 +890,19 @@ def generate_config(watchers)\n       shared_frontend_lines = generate_shared_frontend\n \n       watchers.each do |watcher|\n+        watcher_config = watcher.generator_config[name]", "path": "lib/synapse/config_generator/haproxy.rb", "position": null, "original_position": 115, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "c4f7713de1516ed50a6e26f0440af1441588472b", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "I like that better too. Done.", "created_at": "2017-02-17T00:20:06Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r101660568", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101660568"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r101660568"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101660568/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 101404995}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101661298", "pull_request_review_id": 22397767, "id": 101661298, "diff_hunk": "@@ -961,17 +980,29 @@ def validate_haproxy_stanza(stanza, stanza_type, service_name)\n \n     # generates an individual stanza for a particular watcher\n     def generate_frontend_stanza(watcher, config)\n-      unless watcher.haproxy.has_key?(\"port\")\n+      watcher_config = watcher.generator_config[name]\n+      unless watcher_config.has_key?(\"port\")\n         log.debug \"synapse: not generating frontend stanza for watcher #{watcher.name} because it has no port defined\"\n         return []\n+      else\n+        port = watcher_config['port']\n       end\n \n-      bo = watcher.haproxy['bind_options']\n+      bind_options = watcher_config['bind_options']\n+      bind_options = bind_options.nil? ? '' : ' ' + bind_options", "path": "lib/synapse/config_generator/haproxy.rb", "position": null, "original_position": 195, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "c4f7713de1516ed50a6e26f0440af1441588472b", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Sure, done. I can also fixup the address:port logic in the nginx review as well to do a similar thing.", "created_at": "2017-02-17T00:26:16Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r101661298", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101661298"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r101661298"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101661298/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 101402996}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101661409", "pull_request_review_id": 22397890, "id": 101661409, "diff_hunk": "@@ -961,17 +980,29 @@ def validate_haproxy_stanza(stanza, stanza_type, service_name)\n \n     # generates an individual stanza for a particular watcher\n     def generate_frontend_stanza(watcher, config)\n-      unless watcher.haproxy.has_key?(\"port\")\n+      watcher_config = watcher.generator_config[name]\n+      unless watcher_config.has_key?(\"port\")\n         log.debug \"synapse: not generating frontend stanza for watcher #{watcher.name} because it has no port defined\"\n         return []\n+      else\n+        port = watcher_config['port']\n       end\n \n-      bo = watcher.haproxy['bind_options']\n+      bind_options = watcher_config['bind_options']\n+      bind_options = bind_options.nil? ? '' : ' ' + bind_options\n+\n+      bind_address = (\n+        watcher_config['bind_address'] ||\n+        opts['bind_address'] ||\n+        'localhost'", "path": "lib/synapse/config_generator/haproxy.rb", "position": null, "original_position": 200, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "c4f7713de1516ed50a6e26f0440af1441588472b", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Sure, pre-existing but sure.", "created_at": "2017-02-17T00:27:22Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r101661409", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101661409"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r101661409"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101661409/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 101403119}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101661428", "pull_request_review_id": 22397911, "id": 101661428, "diff_hunk": "@@ -33,17 +33,15 @@ def initialize(opts={}, synapse)\n       @leader_election = opts['leader_election'] || false\n       @leader_last_warn = Time.now - LEADER_WARN_INTERVAL\n \n-      # the haproxy config\n-      @haproxy = opts['haproxy']\n-      @haproxy['server_options'] ||= \"\"\n-      @haproxy['server_port_override'] ||= nil\n-      %w{backend frontend listen}.each do |sec|\n-        @haproxy[sec] ||= []\n-      end\n-\n-      unless @haproxy.include?('port')\n-        log.warn \"synapse: service #{name}: haproxy config does not include a port; only backend sections for the service will be created; you must move traffic there manually using configuration in `extra_sections`\"\n-      end\n+      @generator_config = Hash[", "path": "lib/synapse/service_watcher/base.rb", "position": null, "original_position": 33, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "c4f7713de1516ed50a6e26f0440af1441588472b", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Yup", "created_at": "2017-02-17T00:27:33Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r101661428", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101661428"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r101661428"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101661428/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 101406810}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101661545", "pull_request_review_id": 22398031, "id": 101661545, "diff_hunk": "@@ -33,17 +33,15 @@ def initialize(opts={}, synapse)\n       @leader_election = opts['leader_election'] || false\n       @leader_last_warn = Time.now - LEADER_WARN_INTERVAL\n \n-      # the haproxy config\n-      @haproxy = opts['haproxy']\n-      @haproxy['server_options'] ||= \"\"\n-      @haproxy['server_port_override'] ||= nil\n-      %w{backend frontend listen}.each do |sec|\n-        @haproxy[sec] ||= []\n-      end\n-\n-      unless @haproxy.include?('port')\n-        log.warn \"synapse: service #{name}: haproxy config does not include a port; only backend sections for the service will be created; you must move traffic there manually using configuration in `extra_sections`\"\n-      end\n+      @generator_config = Hash[\n+        @synapse.available_generators.collect{ |generator_name, generator|", "path": "lib/synapse/service_watcher/base.rb", "position": null, "original_position": 34, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "c4f7713de1516ed50a6e26f0440af1441588472b", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Done", "created_at": "2017-02-17T00:28:22Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r101661545", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101661545"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r101661545"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101661545/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 101404646}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101661618", "pull_request_review_id": 22398097, "id": 101661618, "diff_hunk": "@@ -135,6 +154,11 @@ def backends_filtered_by_labels\n     def set_backends(new_backends)\n       # Aggregate and deduplicate all potential backend service instances.\n       new_backends = (new_backends + @default_servers) if @keep_default_servers\n+      # Substitute backend_port_override for the provided port\n+      new_backends = new_backends.collect {|b|", "path": "lib/synapse/service_watcher/base.rb", "position": null, "original_position": 85, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "c4f7713de1516ed50a6e26f0440af1441588472b", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Done", "created_at": "2017-02-17T00:29:00Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r101661618", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101661618"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r101661618"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101661618/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 101403652}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101661736", "pull_request_review_id": 22398224, "id": 101661736, "diff_hunk": "@@ -1,8 +1,9 @@\n require 'spec_helper'\n require 'fileutils'\n+require 'synapse/config_generator/file_output'", "path": "spec/lib/synapse/file_output_spec.rb", "position": 3, "original_position": 3, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "c4f7713de1516ed50a6e26f0440af1441588472b", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "I agree, but right now in synapse we don't group specs yet. I think punt and followup.", "created_at": "2017-02-17T00:29:46Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r101661736", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101661736"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r101661736"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101661736/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 101404053}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101661805", "pull_request_review_id": 22398293, "id": 101661805, "diff_hunk": "@@ -5,7 +5,14 @@ class Synapse::ServiceWatcher::BaseWatcher\n end\n \n describe Synapse::ServiceWatcher::BaseWatcher do\n-  let(:mocksynapse) { double() }\n+  let(:mocksynapse) do", "path": "spec/lib/synapse/service_watcher_base_spec.rb", "position": 5, "original_position": 5, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "c4f7713de1516ed50a6e26f0440af1441588472b", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Sure, but I think we can do that in a follow up.", "created_at": "2017-02-17T00:30:18Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r101661805", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101661805"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r101661805"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101661805/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 101405663}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101661864", "pull_request_review_id": 22398336, "id": 101661864, "diff_hunk": "@@ -1,16 +1,19 @@\n require 'spec_helper'\n+require 'synapse/config_generator/haproxy'", "path": "spec/lib/synapse/haproxy_spec.rb", "position": 2, "original_position": 2, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "c4f7713de1516ed50a6e26f0440af1441588472b", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Let's clean up the specs in a separate change.", "created_at": "2017-02-17T00:30:37Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r101661864", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101661864"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r101661864"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101661864/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 101405884}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101662033", "pull_request_review_id": 22398499, "id": 101662033, "diff_hunk": "@@ -28,37 +33,165 @@ class MockWatcher; end;\n     allow(mockWatcher).to receive(:name).and_return('example_service3')\n     backends = [{ 'host' => 'somehost', 'port' => 5555}]\n     allow(mockWatcher).to receive(:backends).and_return(backends)\n-    allow(mockWatcher).to receive(:haproxy).and_return({'server_options' => \"check inter 2000 rise 3 fall 2\", 'cookie_value_method' => 'hash'})\n+    allow(mockWatcher).to receive(:generator_config).and_return({\n+      'haproxy' => {'server_options' => \"check inter 2000 rise 3 fall 2\", 'cookie_value_method' => 'hash'}\n+    })\n     mockWatcher\n   end\n \n   let(:mockwatcher_frontend) do\n     mockWatcher = double(Synapse::ServiceWatcher)\n     allow(mockWatcher).to receive(:name).and_return('example_service4')\n-    allow(mockWatcher).to receive(:haproxy).and_return('port' => 2200)\n+    allow(mockWatcher).to receive(:generator_config).and_return({\n+      'haproxy' => {'port' => 2200}\n+    })\n     mockWatcher\n   end\n \n   let(:mockwatcher_frontend_with_bind_options) do\n     mockWatcher = double(Synapse::ServiceWatcher)\n     allow(mockWatcher).to receive(:name).and_return('example_service4')\n-    allow(mockWatcher).to receive(:haproxy).and_return('port' => 2200, 'bind_options' => 'ssl no-sslv3 crt /path/to/cert/example.pem ciphers ECDHE-ECDSA-CHACHA20-POLY1305')\n+    allow(mockWatcher).to receive(:generator_config).and_return({\n+      'haproxy' => {\n+        'port' => 2200,\n+      'bind_options' => 'ssl no-sslv3 crt /path/to/cert/example.pem ciphers ECDHE-ECDSA-CHACHA20-POLY1305'\n+      }\n+    })\n     mockWatcher\n   end\n \n   let(:mockwatcher_frontend_with_bind_address) do\n     mockWatcher = double(Synapse::ServiceWatcher)\n     allow(mockWatcher).to receive(:name).and_return('example_service5')\n-    allow(mockWatcher).to receive(:haproxy).and_return('port' => 2200, 'bind_address' => \"127.0.0.3\")\n+    allow(mockWatcher).to receive(:generator_config).and_return({\n+      'haproxy' => {'port' => 2200, 'bind_address' => \"127.0.0.3\"}\n+    })\n+    mockWatcher\n+  end\n+\n+  let(:mockwatcher_disabled) do\n+    mockWatcher = double(Synapse::ServiceWatcher)\n+    allow(mockWatcher).to receive(:name).and_return('disabled_watcher')\n+    backends = [{ 'host' => 'somehost', 'port' => 5555}]\n+    allow(mockWatcher).to receive(:backends).and_return(backends)\n+    allow(mockWatcher).to receive(:generator_config).and_return({\n+      'haproxy' => {'port' => 2200, 'disabled' => true}\n+    })\n     mockWatcher\n   end\n \n+  describe 'validates arguments' do", "path": "spec/lib/synapse/haproxy_spec.rb", "position": null, "original_position": 89, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "c4f7713de1516ed50a6e26f0440af1441588472b", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Don't have much of an opinion, renamed.", "created_at": "2017-02-17T00:32:03Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r101662033", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101662033"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r101662033"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101662033/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 101407893}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101663650", "pull_request_review_id": 22400146, "id": 101663650, "diff_hunk": "@@ -28,37 +33,165 @@ class MockWatcher; end;\n     allow(mockWatcher).to receive(:name).and_return('example_service3')\n     backends = [{ 'host' => 'somehost', 'port' => 5555}]\n     allow(mockWatcher).to receive(:backends).and_return(backends)\n-    allow(mockWatcher).to receive(:haproxy).and_return({'server_options' => \"check inter 2000 rise 3 fall 2\", 'cookie_value_method' => 'hash'})\n+    allow(mockWatcher).to receive(:generator_config).and_return({\n+      'haproxy' => {'server_options' => \"check inter 2000 rise 3 fall 2\", 'cookie_value_method' => 'hash'}\n+    })\n     mockWatcher\n   end\n \n   let(:mockwatcher_frontend) do\n     mockWatcher = double(Synapse::ServiceWatcher)\n     allow(mockWatcher).to receive(:name).and_return('example_service4')\n-    allow(mockWatcher).to receive(:haproxy).and_return('port' => 2200)\n+    allow(mockWatcher).to receive(:generator_config).and_return({\n+      'haproxy' => {'port' => 2200}\n+    })\n     mockWatcher\n   end\n \n   let(:mockwatcher_frontend_with_bind_options) do\n     mockWatcher = double(Synapse::ServiceWatcher)\n     allow(mockWatcher).to receive(:name).and_return('example_service4')\n-    allow(mockWatcher).to receive(:haproxy).and_return('port' => 2200, 'bind_options' => 'ssl no-sslv3 crt /path/to/cert/example.pem ciphers ECDHE-ECDSA-CHACHA20-POLY1305')\n+    allow(mockWatcher).to receive(:generator_config).and_return({\n+      'haproxy' => {\n+        'port' => 2200,\n+      'bind_options' => 'ssl no-sslv3 crt /path/to/cert/example.pem ciphers ECDHE-ECDSA-CHACHA20-POLY1305'\n+      }\n+    })\n     mockWatcher\n   end\n \n   let(:mockwatcher_frontend_with_bind_address) do\n     mockWatcher = double(Synapse::ServiceWatcher)\n     allow(mockWatcher).to receive(:name).and_return('example_service5')\n-    allow(mockWatcher).to receive(:haproxy).and_return('port' => 2200, 'bind_address' => \"127.0.0.3\")\n+    allow(mockWatcher).to receive(:generator_config).and_return({\n+      'haproxy' => {'port' => 2200, 'bind_address' => \"127.0.0.3\"}\n+    })\n+    mockWatcher\n+  end\n+\n+  let(:mockwatcher_disabled) do\n+    mockWatcher = double(Synapse::ServiceWatcher)\n+    allow(mockWatcher).to receive(:name).and_return('disabled_watcher')\n+    backends = [{ 'host' => 'somehost', 'port' => 5555}]\n+    allow(mockWatcher).to receive(:backends).and_return(backends)\n+    allow(mockWatcher).to receive(:generator_config).and_return({\n+      'haproxy' => {'port' => 2200, 'disabled' => true}\n+    })\n     mockWatcher\n   end\n \n+  describe 'validates arguments' do\n+    it 'succeeds on minimal config' do\n+      conf = {\n+        'global' => [],\n+        'defaults' => [],\n+        'do_writes' => false,\n+        'do_reloads' => false,\n+        'do_socket' => false\n+      }\n+      Synapse::ConfigGenerator::Haproxy.new(conf)\n+      expect{Synapse::ConfigGenerator::Haproxy.new(conf)}.not_to raise_error\n+    end\n+\n+    it 'validates req_pairs' do\n+      req_pairs = {\n+        'do_writes' => 'config_file_path',\n+        'do_socket' => 'socket_file_path',\n+        'do_reloads' => 'reload_command'\n+      }\n+      valid_conf = {\n+        'global' => [],\n+        'defaults' => [],\n+        'do_reloads' => false,\n+        'do_socket' => false,\n+        'do_writes' => false\n+      }\n+\n+      req_pairs.each do |key, value|\n+        conf = valid_conf.clone\n+        conf[key] = true\n+        expect{Synapse::ConfigGenerator::Haproxy.new(conf)}.\n+          to raise_error(ArgumentError, \"the `#{value}` option is required when `#{key}` is true\")\n+      end\n+\n+    end\n+\n+    it 'properly defaults do_writes, do_socket, do_reloads' do\n+      conf = {\n+        'global' => [],\n+        'defaults' => [],\n+        'config_file_path' => 'test_file',\n+        'socket_file_path' => 'test_socket',\n+        'reload_command' => 'test_reload'\n+      }\n+\n+      expect{Synapse::ConfigGenerator::Haproxy.new(conf)}.not_to raise_error\n+      haproxy = Synapse::ConfigGenerator::Haproxy.new(conf)\n+      expect(haproxy.opts['do_writes']).to eql(true)\n+      expect(haproxy.opts['do_socket']).to eql(true)\n+      expect(haproxy.opts['do_reloads']).to eql(true)\n+    end\n+\n+    it 'complains when req_pairs are not passed at all' do\n+      conf = {\n+        'global' => [],\n+        'defaults' => [],\n+      }\n+      expect{Synapse::ConfigGenerator::Haproxy.new(conf)}.to raise_error(ArgumentError)\n+    end\n+  end\n+\n   describe '#name' do\n     it 'returns haproxy' do\n       expect(subject.name).to eq('haproxy')\n     end\n   end\n \n+  describe 'disabled watcher' do\n+    let(:watchers) { [mockwatcher, mockwatcher_disabled] }\n+    let(:socket_file_path) { 'socket_file_path' }\n+\n+    before do\n+      config['haproxy']['do_socket'] = true\n+      config['haproxy']['socket_file_path'] = socket_file_path\n+    end\n+\n+    it 'does not generate config' do\n+      allow(subject).to receive(:parse_watcher_config).and_return({})\n+      expect(subject).to receive(:generate_frontend_stanza).exactly(:once).with(mockwatcher, nil)\n+      expect(subject).to receive(:generate_backend_stanza).exactly(:once).with(mockwatcher, nil)\n+      subject.update_config(watchers)\n+    end\n+\n+    it 'does not cause a restart due to the socket' do", "path": "spec/lib/synapse/haproxy_spec.rb", "position": null, "original_position": 172, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "c4f7713de1516ed50a6e26f0440af1441588472b", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Sure, I made it a context, except that we can't stub out talk_to_socket the same way for the two specs (one where the server was previously in the backends, and one without).\r\n\r\nAlso I don't like testing for falsey when that's not something that is supposed to be ok, namely nil isn't a valid value at all for restart_required.", "created_at": "2017-02-17T00:44:46Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r101663650", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101663650"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r101663650"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101663650/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 101408260}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101663752", "pull_request_review_id": 22400241, "id": 101663752, "diff_hunk": "@@ -0,0 +1,44 @@\n+require 'synapse/log'\n+\n+class Synapse::ConfigGenerator\n+  class BaseGenerator\n+    include Synapse::Logging\n+\n+    NAME = 'base'.freeze\n+\n+    attr_reader :opts\n+\n+    def initialize(opts={})\n+      @opts = opts\n+    end\n+\n+    # Exposes NAME as 'name' so we can remain consistent with how we refer to\n+    # service_watchers' by generator.name access (instead of\n+    # generator.class::NAME) even though the names of generators don't change\n+    def name\n+      self.class::NAME\n+    end\n+\n+    # The synapse main loop will call this any time watchers change, the\n+    # config_generator is responsible for diffing the passed watcher state\n+    # against the output configuration\n+    def update_config(watchers)\n+    end\n+\n+    # The synapse main loop will call this every tick\n+    # of the logical clock (~1s). You can use this to intiate reloads\n+    # or restarts in a rate limited fashion\n+    def tick\n+    end\n+\n+    # Service watchers have a subsection of their ``services`` entry that is\n+    # dedicated to the watcher specific configuration for how to configure\n+    # the config generator. This method will be called with each of these\n+    # watcher hashes, and should normalize them to what the config generator\n+    # needs, such as adding defaults. Return the properly populated default hash\n+    def normalize_watcher_provided_opts(service_watcher_name, service_watcher_opts)\n+      service_watcher_opts", "path": "lib/synapse/config_generator/base.rb", "position": null, "original_position": 40, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "c4f7713de1516ed50a6e26f0440af1441588472b", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Sure", "created_at": "2017-02-17T00:45:37Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r101663752", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101663752"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r101663752"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101663752/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 101406566}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101663858", "pull_request_review_id": 22400349, "id": 101663858, "diff_hunk": "@@ -0,0 +1,74 @@\n+## ConfigGenerator Classes\n+\n+Generators are the piece of Synapse that react to changes in service\n+registrations and actually reflect those changes in local state.\n+Generators should conform to the interface specified by `BaseGenerator` and\n+when your generator has received an update from synapse via `update_config` it\n+should sync the watcher state with the external configuration (e.g. HAProxy\n+state)\n+\n+```ruby\n+require \"synapse/config_generator/base\"\n+\n+class Synapse::ConfigGenerator\n+  class MyGenerator < BaseGenerator\n+    # The generator name is used to find service specific\n+    # configuration in the service watchers. When supplying\n+    # per service config, use this as the key\n+    NAME = 'my_generator'.freeze\n+\n+    def initialize(opts = {})\n+        # Process and validate any options specified in the dedicated section\n+        # for this config generator, given as the `opts` hash. You may omit\n+        # this method, or you can declare your own, but remember to invoke\n+        # the parent initializer\n+        super(opts)\n+    end\n+\n+    def update_config(watchers)\n+      # synapse will call this method whenever watcher state changes with the\n+      # watcher state. You should reflect that state in the local config state\n+    end\n+\n+    def tick\n+      # Called every loop of the main Synapse loop regardless of watcher\n+      # changes (roughly ~1s). You can use this to rate limit how often your\n+      # config generator actually reconfigures external services (e.g. HAProxy\n+      # may need to rate limit reloads as those can be disruptive to in\n+      # flight connections\n+    end\n+\n+    def normalize_watcher_provided_opts(service_watcher_name, service_watcher_opts)", "path": "lib/synapse/config_generator/README.md", "position": null, "original_position": 41, "commit_id": "5adf28fcf3299632c8bc8e4daa2aea1e568c333a", "original_commit_id": "c4f7713de1516ed50a6e26f0440af1441588472b", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Ack", "created_at": "2017-02-17T00:46:24Z", "updated_at": "2017-02-17T01:00:44Z", "html_url": "https://github.com/airbnb/synapse/pull/203#discussion_r101663858", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/203", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101663858"}, "html": {"href": "https://github.com/airbnb/synapse/pull/203#discussion_r101663858"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/203"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/101663858/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 101407032}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105498845", "pull_request_review_id": 26387831, "id": 105498845, "diff_hunk": "@@ -69,6 +69,15 @@ class MockWatcher; end;\n     mockWatcher\n   end\n \n+  let(:mockwatcher_frontend_with_nil_port) do\n+    mockWatcher = double(Synapse::ServiceWatcher)\n+    allow(mockWatcher).to receive(:name).and_return('example_service6')\n+    allow(mockWatcher).to receive(:config_for_generator).and_return({\n+      'haproxy' => {'port' => nil, 'bind_address' => \"127.0.0.3\"}", "path": "spec/lib/synapse/haproxy_spec.rb", "position": null, "original_position": 8, "commit_id": "1ef7f7677615c64176d2970069eac9f3b8175589", "original_commit_id": "e00293cfd8ac00facd41c3d6d3eb87ea3cd0aa09", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "maybe make this a unix socket to really show what this is for?", "created_at": "2017-03-10T22:03:49Z", "updated_at": "2017-03-10T22:26:00Z", "html_url": "https://github.com/airbnb/synapse/pull/223#discussion_r105498845", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/223", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105498845"}, "html": {"href": "https://github.com/airbnb/synapse/pull/223#discussion_r105498845"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/223"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105498845/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105502528", "pull_request_review_id": 26391929, "id": 105502528, "diff_hunk": "@@ -28,15 +28,30 @@ Synapse solves these difficulties in a simple and fault-tolerant way.\n \n ## How Synapse Works ##\n \n-Synapse runs on your application servers; here at Airbnb, we just run it on every box we deploy.\n-The heart of synapse is actually [HAProxy](http://haproxy.1wt.eu/), a stable and proven routing component.\n+Synapse typically runs on your application servers, often every machine. At the heart of Synapse\n+are proven routing components like [HAProxy](http://haproxy.1wt.eu/) or [NGINX](http://nginx.org/),\n+so you know that you won't drop a packet.\n+\n For every external service that your application talks to, we assign a synapse local port on localhost.\n Synapse creates a proxy from the local port to the service, and you reconfigure your application to talk to the proxy.\n \n-Synapse comes with a number of `watchers`, which are responsible for service discovery.\n-The synapse watchers take care of re-configuring the proxy so that it always points at available servers.\n+Under the hood, Synapse sports `service_watcher`s for service discovery and\n+`config_generators` for configuring local state (e.g. load balancer configs)\n+based on that service discovery state.\n+\n+Synapse supports service discovery with with pluggable `service_watcher`s.", "path": "README.md", "position": null, "original_position": 19, "commit_id": "f0891d536749f8cbc5162dedc3f5373baeead9bb", "original_commit_id": "863946f1e7e070003fd45fbe33ef740055471ed1", "user": {"login": "jnb", "id": 514311, "avatar_url": "https://avatars2.githubusercontent.com/u/514311?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnb", "html_url": "https://github.com/jnb", "followers_url": "https://api.github.com/users/jnb/followers", "following_url": "https://api.github.com/users/jnb/following{/other_user}", "gists_url": "https://api.github.com/users/jnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnb/subscriptions", "organizations_url": "https://api.github.com/users/jnb/orgs", "repos_url": "https://api.github.com/users/jnb/repos", "events_url": "https://api.github.com/users/jnb/events{/privacy}", "received_events_url": "https://api.github.com/users/jnb/received_events", "type": "User", "site_admin": false}, "body": "Could delete this sentence, and combine the next sentence ('The service watchers...') with the previous paragraph?", "created_at": "2017-03-10T22:28:51Z", "updated_at": "2017-03-10T23:14:42Z", "html_url": "https://github.com/airbnb/synapse/pull/222#discussion_r105502528", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/222", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105502528"}, "html": {"href": "https://github.com/airbnb/synapse/pull/222#discussion_r105502528"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/222"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105502528/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105506119", "pull_request_review_id": 26391929, "id": 105506119, "diff_hunk": "@@ -416,19 +464,30 @@ frontend shared-frontend\n Non-HTTP backends such as MySQL or RabbitMQ will obviously continue to need their own dedicated ports.\n \n ## Contributing\n+Note that now that we have a fully dynamic include system for service watchers\n+and configuration generators, you don't *have* to PR into the main tree, but\n+please do contribute a [link](#plugins).\n \n 1. Fork it\n 2. Create your feature branch (`git checkout -b my-new-feature`)\n 3. Commit your changes (`git commit -am 'Add some feature'`)\n 4. Push to the branch (`git push origin my-new-feature`)\n 5. Create new Pull Request\n \n+<a name=\"createsw\"/>\n ### Creating a Service Watcher ###\n \n See the Service Watcher [README](lib/synapse/service_watcher/README.md) for\n how to add new Service Watchers.\n \n+<a name=\"createconfig\"/>\n ### Creating a Config Generator ###\n \n See the Config Generator [README](lib/synapse/config_generator/README.md) for\n how to add new Config Generators\n+\n+<a name=\"plugins\"/>\n+## Links to Synapse Plugins ##\n+* [`synapse-nginx`](https://github.com/jolynch/synapse-nginx) Is a `config_generator`\n+  which allows Synapse to automatically configure and administrate a local NGINX", "path": "README.md", "position": null, "original_position": 174, "commit_id": "f0891d536749f8cbc5162dedc3f5373baeead9bb", "original_commit_id": "863946f1e7e070003fd45fbe33ef740055471ed1", "user": {"login": "jnb", "id": 514311, "avatar_url": "https://avatars2.githubusercontent.com/u/514311?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnb", "html_url": "https://github.com/jnb", "followers_url": "https://api.github.com/users/jnb/followers", "following_url": "https://api.github.com/users/jnb/following{/other_user}", "gists_url": "https://api.github.com/users/jnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnb/subscriptions", "organizations_url": "https://api.github.com/users/jnb/orgs", "repos_url": "https://api.github.com/users/jnb/repos", "events_url": "https://api.github.com/users/jnb/events{/privacy}", "received_events_url": "https://api.github.com/users/jnb/received_events", "type": "User", "site_admin": false}, "body": "delete 'and administrate'?  Or change 'administrate' to 'administer'?", "created_at": "2017-03-10T22:53:48Z", "updated_at": "2017-03-10T23:14:42Z", "html_url": "https://github.com/airbnb/synapse/pull/222#discussion_r105506119", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/222", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105506119"}, "html": {"href": "https://github.com/airbnb/synapse/pull/222#discussion_r105506119"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/222"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105506119/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105506586", "pull_request_review_id": 26391929, "id": 105506586, "diff_hunk": "@@ -28,15 +28,30 @@ Synapse solves these difficulties in a simple and fault-tolerant way.\n \n ## How Synapse Works ##\n \n-Synapse runs on your application servers; here at Airbnb, we just run it on every box we deploy.\n-The heart of synapse is actually [HAProxy](http://haproxy.1wt.eu/), a stable and proven routing component.\n+Synapse typically runs on your application servers, often every machine. At the heart of Synapse\n+are proven routing components like [HAProxy](http://haproxy.1wt.eu/) or [NGINX](http://nginx.org/),\n+so you know that you won't drop a packet.", "path": "README.md", "position": null, "original_position": 8, "commit_id": "f0891d536749f8cbc5162dedc3f5373baeead9bb", "original_commit_id": "863946f1e7e070003fd45fbe33ef740055471ed1", "user": {"login": "jnb", "id": 514311, "avatar_url": "https://avatars2.githubusercontent.com/u/514311?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnb", "html_url": "https://github.com/jnb", "followers_url": "https://api.github.com/users/jnb/followers", "following_url": "https://api.github.com/users/jnb/following{/other_user}", "gists_url": "https://api.github.com/users/jnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnb/subscriptions", "organizations_url": "https://api.github.com/users/jnb/orgs", "repos_url": "https://api.github.com/users/jnb/repos", "events_url": "https://api.github.com/users/jnb/events{/privacy}", "received_events_url": "https://api.github.com/users/jnb/received_events", "type": "User", "site_admin": false}, "body": "haha.  I don't know whether I'd leave the \"so you know that you won't drop a packet.\" in?", "created_at": "2017-03-10T22:57:32Z", "updated_at": "2017-03-10T23:14:42Z", "html_url": "https://github.com/airbnb/synapse/pull/222#discussion_r105506586", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/222", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105506586"}, "html": {"href": "https://github.com/airbnb/synapse/pull/222#discussion_r105506586"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/222"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105506586/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105506655", "pull_request_review_id": 26391929, "id": 105506655, "diff_hunk": "@@ -28,15 +28,30 @@ Synapse solves these difficulties in a simple and fault-tolerant way.\n \n ## How Synapse Works ##\n \n-Synapse runs on your application servers; here at Airbnb, we just run it on every box we deploy.\n-The heart of synapse is actually [HAProxy](http://haproxy.1wt.eu/), a stable and proven routing component.\n+Synapse typically runs on your application servers, often every machine. At the heart of Synapse\n+are proven routing components like [HAProxy](http://haproxy.1wt.eu/) or [NGINX](http://nginx.org/),\n+so you know that you won't drop a packet.\n+\n For every external service that your application talks to, we assign a synapse local port on localhost.\n Synapse creates a proxy from the local port to the service, and you reconfigure your application to talk to the proxy.\n \n-Synapse comes with a number of `watchers`, which are responsible for service discovery.\n-The synapse watchers take care of re-configuring the proxy so that it always points at available servers.\n+Under the hood, Synapse sports `service_watcher`s for service discovery and\n+`config_generators` for configuring local state (e.g. load balancer configs)\n+based on that service discovery state.\n+\n+Synapse supports service discovery with with pluggable `service_watcher`s.\n+The service watchers take care of signaling to the `config_generators` so that\n+they can react and reconfigure to point at available servers.\n+\n We've included a number of default watchers, including ones that query zookeeper and ones using the AWS API.\n-It is easy to write your own watchers for your use case, and we encourage submitting them back to the project.\n+It is easy to write your own watchers for your use case, and install them as gems that", "path": "README.md", "position": null, "original_position": 25, "commit_id": "f0891d536749f8cbc5162dedc3f5373baeead9bb", "original_commit_id": "863946f1e7e070003fd45fbe33ef740055471ed1", "user": {"login": "jnb", "id": 514311, "avatar_url": "https://avatars2.githubusercontent.com/u/514311?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnb", "html_url": "https://github.com/jnb", "followers_url": "https://api.github.com/users/jnb/followers", "following_url": "https://api.github.com/users/jnb/following{/other_user}", "gists_url": "https://api.github.com/users/jnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnb/subscriptions", "organizations_url": "https://api.github.com/users/jnb/orgs", "repos_url": "https://api.github.com/users/jnb/repos", "events_url": "https://api.github.com/users/jnb/events{/privacy}", "received_events_url": "https://api.github.com/users/jnb/received_events", "type": "User", "site_admin": false}, "body": "use-case?", "created_at": "2017-03-10T22:58:02Z", "updated_at": "2017-03-10T23:14:42Z", "html_url": "https://github.com/airbnb/synapse/pull/222#discussion_r105506655", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/222", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105506655"}, "html": {"href": "https://github.com/airbnb/synapse/pull/222#discussion_r105506655"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/222"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105506655/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105506707", "pull_request_review_id": 26391929, "id": 105506707, "diff_hunk": "@@ -28,15 +28,30 @@ Synapse solves these difficulties in a simple and fault-tolerant way.\n \n ## How Synapse Works ##\n \n-Synapse runs on your application servers; here at Airbnb, we just run it on every box we deploy.\n-The heart of synapse is actually [HAProxy](http://haproxy.1wt.eu/), a stable and proven routing component.\n+Synapse typically runs on your application servers, often every machine. At the heart of Synapse\n+are proven routing components like [HAProxy](http://haproxy.1wt.eu/) or [NGINX](http://nginx.org/),\n+so you know that you won't drop a packet.\n+\n For every external service that your application talks to, we assign a synapse local port on localhost.\n Synapse creates a proxy from the local port to the service, and you reconfigure your application to talk to the proxy.\n \n-Synapse comes with a number of `watchers`, which are responsible for service discovery.\n-The synapse watchers take care of re-configuring the proxy so that it always points at available servers.\n+Under the hood, Synapse sports `service_watcher`s for service discovery and\n+`config_generators` for configuring local state (e.g. load balancer configs)\n+based on that service discovery state.\n+\n+Synapse supports service discovery with with pluggable `service_watcher`s.\n+The service watchers take care of signaling to the `config_generators` so that\n+they can react and reconfigure to point at available servers.\n+\n We've included a number of default watchers, including ones that query zookeeper and ones using the AWS API.\n-It is easy to write your own watchers for your use case, and we encourage submitting them back to the project.\n+It is easy to write your own watchers for your use case, and install them as gems that\n+extend Synapse's functionality. Check out the [docs](#createsw) on creating\n+a watcher if you're interested, and if you think that the service watcher\n+would be generally useful feel free to pull request with a link to your watcher.", "path": "README.md", "position": 27, "original_position": 28, "commit_id": "f0891d536749f8cbc5162dedc3f5373baeead9bb", "original_commit_id": "863946f1e7e070003fd45fbe33ef740055471ed1", "user": {"login": "jnb", "id": 514311, "avatar_url": "https://avatars2.githubusercontent.com/u/514311?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnb", "html_url": "https://github.com/jnb", "followers_url": "https://api.github.com/users/jnb/followers", "following_url": "https://api.github.com/users/jnb/following{/other_user}", "gists_url": "https://api.github.com/users/jnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnb/subscriptions", "organizations_url": "https://api.github.com/users/jnb/orgs", "repos_url": "https://api.github.com/users/jnb/repos", "events_url": "https://api.github.com/users/jnb/events{/privacy}", "received_events_url": "https://api.github.com/users/jnb/received_events", "type": "User", "site_admin": false}, "body": "create a pull request", "created_at": "2017-03-10T22:58:24Z", "updated_at": "2017-03-10T23:14:42Z", "html_url": "https://github.com/airbnb/synapse/pull/222#discussion_r105506707", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/222", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105506707"}, "html": {"href": "https://github.com/airbnb/synapse/pull/222#discussion_r105506707"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/222"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105506707/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105507154", "pull_request_review_id": 26391929, "id": 105507154, "diff_hunk": "@@ -138,13 +172,19 @@ Each value in the services hash is also a hash, and must contain the following k\n \n * [`discovery`](#discovery): how synapse will discover hosts providing this service (see [below](#discovery))\n \n-The services hash *should* contain a section on how to configure the routing\n-component you wish to use for this particular service. The only choice currently\n-is `haproxy`:\n+The services hash *should* contain a section on how to configure each routing\n+component you wish to use for this particular service. The current choices are\n+`haproxy` but you can access others e.g. [`nginx`](https://github.com/jolynch/synapse-nginx)\n+through [plugins](createconfig). Note that if you give a routing component at the top level\n+but not at the service level the default is typically to make that service\n+available via that routing component, sans listening ports, if you wish to only", "path": "README.md", "position": null, "original_position": 105, "commit_id": "f0891d536749f8cbc5162dedc3f5373baeead9bb", "original_commit_id": "863946f1e7e070003fd45fbe33ef740055471ed1", "user": {"login": "jnb", "id": 514311, "avatar_url": "https://avatars2.githubusercontent.com/u/514311?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnb", "html_url": "https://github.com/jnb", "followers_url": "https://api.github.com/users/jnb/followers", "following_url": "https://api.github.com/users/jnb/following{/other_user}", "gists_url": "https://api.github.com/users/jnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnb/subscriptions", "organizations_url": "https://api.github.com/users/jnb/orgs", "repos_url": "https://api.github.com/users/jnb/repos", "events_url": "https://api.github.com/users/jnb/events{/privacy}", "received_events_url": "https://api.github.com/users/jnb/received_events", "type": "User", "site_admin": false}, "body": "... san listening ports.  If you wish to only...", "created_at": "2017-03-10T23:02:14Z", "updated_at": "2017-03-10T23:14:42Z", "html_url": "https://github.com/airbnb/synapse/pull/222#discussion_r105507154", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/222", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105507154"}, "html": {"href": "https://github.com/airbnb/synapse/pull/222#discussion_r105507154"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/222"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105507154/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105507342", "pull_request_review_id": 26391929, "id": 105507342, "diff_hunk": "@@ -138,13 +172,19 @@ Each value in the services hash is also a hash, and must contain the following k\n \n * [`discovery`](#discovery): how synapse will discover hosts providing this service (see [below](#discovery))\n \n-The services hash *should* contain a section on how to configure the routing\n-component you wish to use for this particular service. The only choice currently\n-is `haproxy`:\n+The services hash *should* contain a section on how to configure each routing\n+component you wish to use for this particular service. The current choices are\n+`haproxy` but you can access others e.g. [`nginx`](https://github.com/jolynch/synapse-nginx)\n+through [plugins](createconfig). Note that if you give a routing component at the top level\n+but not at the service level the default is typically to make that service\n+available via that routing component, sans listening ports, if you wish to only\n+configure a single component explicitly pass the ``disabled`` option to the", "path": "README.md", "position": null, "original_position": 106, "commit_id": "f0891d536749f8cbc5162dedc3f5373baeead9bb", "original_commit_id": "863946f1e7e070003fd45fbe33ef740055471ed1", "user": {"login": "jnb", "id": 514311, "avatar_url": "https://avatars2.githubusercontent.com/u/514311?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnb", "html_url": "https://github.com/jnb", "followers_url": "https://api.github.com/users/jnb/followers", "following_url": "https://api.github.com/users/jnb/following{/other_user}", "gists_url": "https://api.github.com/users/jnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnb/subscriptions", "organizations_url": "https://api.github.com/users/jnb/orgs", "repos_url": "https://api.github.com/users/jnb/repos", "events_url": "https://api.github.com/users/jnb/events{/privacy}", "received_events_url": "https://api.github.com/users/jnb/received_events", "type": "User", "site_admin": false}, "body": "This didn't make sense to me.  Is it worth giving a more concrete example?", "created_at": "2017-03-10T23:03:45Z", "updated_at": "2017-03-10T23:14:42Z", "html_url": "https://github.com/airbnb/synapse/pull/222#discussion_r105507342", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/222", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105507342"}, "html": {"href": "https://github.com/airbnb/synapse/pull/222#discussion_r105507342"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/222"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105507342/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105508067", "pull_request_review_id": 26397716, "id": 105508067, "diff_hunk": "@@ -28,15 +28,30 @@ Synapse solves these difficulties in a simple and fault-tolerant way.\n \n ## How Synapse Works ##\n \n-Synapse runs on your application servers; here at Airbnb, we just run it on every box we deploy.\n-The heart of synapse is actually [HAProxy](http://haproxy.1wt.eu/), a stable and proven routing component.\n+Synapse typically runs on your application servers, often every machine. At the heart of Synapse\n+are proven routing components like [HAProxy](http://haproxy.1wt.eu/) or [NGINX](http://nginx.org/),\n+so you know that you won't drop a packet.", "path": "README.md", "position": null, "original_position": 8, "commit_id": "f0891d536749f8cbc5162dedc3f5373baeead9bb", "original_commit_id": "863946f1e7e070003fd45fbe33ef740055471ed1", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "sure", "created_at": "2017-03-10T23:09:41Z", "updated_at": "2017-03-10T23:14:42Z", "html_url": "https://github.com/airbnb/synapse/pull/222#discussion_r105508067", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/222", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105508067"}, "html": {"href": "https://github.com/airbnb/synapse/pull/222#discussion_r105508067"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/222"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105508067/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 105506586}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105508176", "pull_request_review_id": 26397837, "id": 105508176, "diff_hunk": "@@ -28,15 +28,30 @@ Synapse solves these difficulties in a simple and fault-tolerant way.\n \n ## How Synapse Works ##\n \n-Synapse runs on your application servers; here at Airbnb, we just run it on every box we deploy.\n-The heart of synapse is actually [HAProxy](http://haproxy.1wt.eu/), a stable and proven routing component.\n+Synapse typically runs on your application servers, often every machine. At the heart of Synapse\n+are proven routing components like [HAProxy](http://haproxy.1wt.eu/) or [NGINX](http://nginx.org/),\n+so you know that you won't drop a packet.\n+\n For every external service that your application talks to, we assign a synapse local port on localhost.\n Synapse creates a proxy from the local port to the service, and you reconfigure your application to talk to the proxy.\n \n-Synapse comes with a number of `watchers`, which are responsible for service discovery.\n-The synapse watchers take care of re-configuring the proxy so that it always points at available servers.\n+Under the hood, Synapse sports `service_watcher`s for service discovery and\n+`config_generators` for configuring local state (e.g. load balancer configs)\n+based on that service discovery state.\n+\n+Synapse supports service discovery with with pluggable `service_watcher`s.", "path": "README.md", "position": null, "original_position": 19, "commit_id": "f0891d536749f8cbc5162dedc3f5373baeead9bb", "original_commit_id": "863946f1e7e070003fd45fbe33ef740055471ed1", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "Done", "created_at": "2017-03-10T23:10:46Z", "updated_at": "2017-03-10T23:14:42Z", "html_url": "https://github.com/airbnb/synapse/pull/222#discussion_r105508176", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/222", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105508176"}, "html": {"href": "https://github.com/airbnb/synapse/pull/222#discussion_r105508176"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/222"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105508176/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 105502528}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105508213", "pull_request_review_id": 26397880, "id": 105508213, "diff_hunk": "@@ -28,15 +28,30 @@ Synapse solves these difficulties in a simple and fault-tolerant way.\n \n ## How Synapse Works ##\n \n-Synapse runs on your application servers; here at Airbnb, we just run it on every box we deploy.\n-The heart of synapse is actually [HAProxy](http://haproxy.1wt.eu/), a stable and proven routing component.\n+Synapse typically runs on your application servers, often every machine. At the heart of Synapse\n+are proven routing components like [HAProxy](http://haproxy.1wt.eu/) or [NGINX](http://nginx.org/),\n+so you know that you won't drop a packet.\n+\n For every external service that your application talks to, we assign a synapse local port on localhost.\n Synapse creates a proxy from the local port to the service, and you reconfigure your application to talk to the proxy.\n \n-Synapse comes with a number of `watchers`, which are responsible for service discovery.\n-The synapse watchers take care of re-configuring the proxy so that it always points at available servers.\n+Under the hood, Synapse sports `service_watcher`s for service discovery and\n+`config_generators` for configuring local state (e.g. load balancer configs)\n+based on that service discovery state.\n+\n+Synapse supports service discovery with with pluggable `service_watcher`s.\n+The service watchers take care of signaling to the `config_generators` so that\n+they can react and reconfigure to point at available servers.\n+\n We've included a number of default watchers, including ones that query zookeeper and ones using the AWS API.\n-It is easy to write your own watchers for your use case, and we encourage submitting them back to the project.\n+It is easy to write your own watchers for your use case, and install them as gems that", "path": "README.md", "position": null, "original_position": 25, "commit_id": "f0891d536749f8cbc5162dedc3f5373baeead9bb", "original_commit_id": "863946f1e7e070003fd45fbe33ef740055471ed1", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "I haven't written one yet ... but like etcd would be an example.", "created_at": "2017-03-10T23:11:04Z", "updated_at": "2017-03-10T23:14:42Z", "html_url": "https://github.com/airbnb/synapse/pull/222#discussion_r105508213", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/222", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105508213"}, "html": {"href": "https://github.com/airbnb/synapse/pull/222#discussion_r105508213"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/222"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105508213/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 105506655}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105508555", "pull_request_review_id": 26398227, "id": 105508555, "diff_hunk": "@@ -138,13 +172,19 @@ Each value in the services hash is also a hash, and must contain the following k\n \n * [`discovery`](#discovery): how synapse will discover hosts providing this service (see [below](#discovery))\n \n-The services hash *should* contain a section on how to configure the routing\n-component you wish to use for this particular service. The only choice currently\n-is `haproxy`:\n+The services hash *should* contain a section on how to configure each routing\n+component you wish to use for this particular service. The current choices are\n+`haproxy` but you can access others e.g. [`nginx`](https://github.com/jolynch/synapse-nginx)\n+through [plugins](createconfig). Note that if you give a routing component at the top level\n+but not at the service level the default is typically to make that service\n+available via that routing component, sans listening ports, if you wish to only\n+configure a single component explicitly pass the ``disabled`` option to the", "path": "README.md", "position": null, "original_position": 106, "commit_id": "f0891d536749f8cbc5162dedc3f5373baeead9bb", "original_commit_id": "863946f1e7e070003fd45fbe33ef740055471ed1", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "I think it's sorta confusing, can iterate with more examples later.", "created_at": "2017-03-10T23:13:40Z", "updated_at": "2017-03-10T23:14:42Z", "html_url": "https://github.com/airbnb/synapse/pull/222#discussion_r105508555", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/222", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105508555"}, "html": {"href": "https://github.com/airbnb/synapse/pull/222#discussion_r105508555"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/222"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105508555/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 105507342}, {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105508564", "pull_request_review_id": 26398235, "id": 105508564, "diff_hunk": "@@ -416,19 +464,30 @@ frontend shared-frontend\n Non-HTTP backends such as MySQL or RabbitMQ will obviously continue to need their own dedicated ports.\n \n ## Contributing\n+Note that now that we have a fully dynamic include system for service watchers\n+and configuration generators, you don't *have* to PR into the main tree, but\n+please do contribute a [link](#plugins).\n \n 1. Fork it\n 2. Create your feature branch (`git checkout -b my-new-feature`)\n 3. Commit your changes (`git commit -am 'Add some feature'`)\n 4. Push to the branch (`git push origin my-new-feature`)\n 5. Create new Pull Request\n \n+<a name=\"createsw\"/>\n ### Creating a Service Watcher ###\n \n See the Service Watcher [README](lib/synapse/service_watcher/README.md) for\n how to add new Service Watchers.\n \n+<a name=\"createconfig\"/>\n ### Creating a Config Generator ###\n \n See the Config Generator [README](lib/synapse/config_generator/README.md) for\n how to add new Config Generators\n+\n+<a name=\"plugins\"/>\n+## Links to Synapse Plugins ##\n+* [`synapse-nginx`](https://github.com/jolynch/synapse-nginx) Is a `config_generator`\n+  which allows Synapse to automatically configure and administrate a local NGINX", "path": "README.md", "position": null, "original_position": 174, "commit_id": "f0891d536749f8cbc5162dedc3f5373baeead9bb", "original_commit_id": "863946f1e7e070003fd45fbe33ef740055471ed1", "user": {"login": "jolynch", "id": 1420460, "avatar_url": "https://avatars1.githubusercontent.com/u/1420460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jolynch", "html_url": "https://github.com/jolynch", "followers_url": "https://api.github.com/users/jolynch/followers", "following_url": "https://api.github.com/users/jolynch/following{/other_user}", "gists_url": "https://api.github.com/users/jolynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jolynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jolynch/subscriptions", "organizations_url": "https://api.github.com/users/jolynch/orgs", "repos_url": "https://api.github.com/users/jolynch/repos", "events_url": "https://api.github.com/users/jolynch/events{/privacy}", "received_events_url": "https://api.github.com/users/jolynch/received_events", "type": "User", "site_admin": false}, "body": "changed to administer.", "created_at": "2017-03-10T23:13:44Z", "updated_at": "2017-03-10T23:14:42Z", "html_url": "https://github.com/airbnb/synapse/pull/222#discussion_r105508564", "pull_request_url": "https://api.github.com/repos/airbnb/synapse/pulls/222", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105508564"}, "html": {"href": "https://github.com/airbnb/synapse/pull/222#discussion_r105508564"}, "pull_request": {"href": "https://api.github.com/repos/airbnb/synapse/pulls/222"}}, "reactions": {"url": "https://api.github.com/repos/airbnb/synapse/pulls/comments/105508564/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0}, "in_reply_to_id": 105506119}]}}}